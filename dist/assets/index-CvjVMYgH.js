var bM=Object.defineProperty;var E3=r=>{throw TypeError(r)};var yM=(r,e,t)=>e in r?bM(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var We=(r,e,t)=>yM(r,typeof e!="symbol"?e+"":e,t),Lw=(r,e,t)=>e.has(r)||E3("Cannot "+t);var m=(r,e,t)=>(Lw(r,e,"read from private field"),t?t.call(r):e.get(r)),V=(r,e,t)=>e.has(r)?E3("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),L=(r,e,t,n)=>(Lw(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),$=(r,e,t)=>(Lw(r,e,"access private method"),t);var qn=(r,e,t,n)=>({set _(i){L(r,e,i,t)},get _(){return m(r,e,n)}});import{r as kR,a as ey,b as xM,g as vM,c as Cc}from"./vendor-leHF9zIx.js";import{_ as wM,c as kM}from"./supabase-DCn-0kkW.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var Bw={exports:{}},xg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T3;function DM(){if(T3)return xg;T3=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:r,type:n,key:s,ref:i!==void 0?i:null,props:a}}return xg.Fragment=e,xg.jsx=t,xg.jsxs=t,xg}var C3;function _M(){return C3||(C3=1,Bw.exports=DM()),Bw.exports}var p=_M(),Q=kR();const Bn=ey(Q);var Pw={exports:{}},vg={},zw={exports:{}},Ww={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N3;function AM(){return N3||(N3=1,(function(r){function e(P,B){var ee=P.length;P.push(B);e:for(;0<ee;){var K=ee-1>>>1,H=P[K];if(0<i(H,B))P[K]=B,P[ee]=H,ee=K;else break e}}function t(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var B=P[0],ee=P.pop();if(ee!==B){P[0]=ee;e:for(var K=0,H=P.length,J=H>>>1;K<J;){var ie=2*(K+1)-1,z=P[ie],ge=ie+1,ve=P[ge];if(0>i(z,ee))ge<H&&0>i(ve,z)?(P[K]=ve,P[ge]=ee,K=ge):(P[K]=z,P[ie]=ee,K=ie);else if(ge<H&&0>i(ve,ee))P[K]=ve,P[ge]=ee,K=ge;else break e}}return B}function i(P,B){var ee=P.sortIndex-B.sortIndex;return ee!==0?ee:P.id-B.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();r.unstable_now=function(){return s.now()-l}}var u=[],d=[],h=1,g=null,b=3,y=!1,D=!1,v=!1,w=!1,k=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function N(P){for(var B=t(d);B!==null;){if(B.callback===null)n(d);else if(B.startTime<=P)n(d),B.sortIndex=B.expirationTime,e(u,B);else break;B=t(d)}}function E(P){if(v=!1,N(P),!D)if(t(u)!==null)D=!0,T||(T=!0,U());else{var B=t(d);B!==null&&X(E,B.startTime-P)}}var T=!1,R=-1,M=5,I=-1;function F(){return w?!0:!(r.unstable_now()-I<M)}function G(){if(w=!1,T){var P=r.unstable_now();I=P;var B=!0;try{e:{D=!1,v&&(v=!1,_(R),R=-1),y=!0;var ee=b;try{t:{for(N(P),g=t(u);g!==null&&!(g.expirationTime>P&&F());){var K=g.callback;if(typeof K=="function"){g.callback=null,b=g.priorityLevel;var H=K(g.expirationTime<=P);if(P=r.unstable_now(),typeof H=="function"){g.callback=H,N(P),B=!0;break t}g===t(u)&&n(u),N(P)}else n(u);g=t(u)}if(g!==null)B=!0;else{var J=t(d);J!==null&&X(E,J.startTime-P),B=!1}}break e}finally{g=null,b=ee,y=!1}B=void 0}}finally{B?U():T=!1}}}var U;if(typeof A=="function")U=function(){A(G)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,j=W.port2;W.port1.onmessage=G,U=function(){j.postMessage(null)}}else U=function(){k(G,0)};function X(P,B){R=k(function(){P(r.unstable_now())},B)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(P){P.callback=null},r.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<P?Math.floor(1e3/P):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(P){switch(b){case 1:case 2:case 3:var B=3;break;default:B=b}var ee=b;b=B;try{return P()}finally{b=ee}},r.unstable_requestPaint=function(){w=!0},r.unstable_runWithPriority=function(P,B){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var ee=b;b=P;try{return B()}finally{b=ee}},r.unstable_scheduleCallback=function(P,B,ee){var K=r.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?K+ee:K):ee=K,P){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ee+H,P={id:h++,callback:B,priorityLevel:P,startTime:ee,expirationTime:H,sortIndex:-1},ee>K?(P.sortIndex=ee,e(d,P),t(u)===null&&P===t(d)&&(v?(_(R),R=-1):v=!0,X(E,ee-K))):(P.sortIndex=H,e(u,P),D||y||(D=!0,T||(T=!0,U()))),P},r.unstable_shouldYield=F,r.unstable_wrapCallback=function(P){var B=b;return function(){var ee=b;b=B;try{return P.apply(this,arguments)}finally{b=ee}}}})(Ww)),Ww}var U3;function SM(){return U3||(U3=1,zw.exports=AM()),zw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R3;function EM(){if(R3)return vg;R3=1;var r=SM(),e=kR(),t=xM();function n(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var c=o,f=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(f=c.return),o=c.return;while(o)}return c.tag===3?f:null}function s(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function l(o){if(a(o)!==o)throw Error(n(188))}function u(o){var c=o.alternate;if(!c){if(c=a(o),c===null)throw Error(n(188));return c!==o?null:o}for(var f=o,x=c;;){var S=f.return;if(S===null)break;var C=S.alternate;if(C===null){if(x=S.return,x!==null){f=x;continue}break}if(S.child===C.child){for(C=S.child;C;){if(C===f)return l(S),o;if(C===x)return l(S),c;C=C.sibling}throw Error(n(188))}if(f.return!==x.return)f=S,x=C;else{for(var q=!1,Z=S.child;Z;){if(Z===f){q=!0,f=S,x=C;break}if(Z===x){q=!0,x=S,f=C;break}Z=Z.sibling}if(!q){for(Z=C.child;Z;){if(Z===f){q=!0,f=C,x=S;break}if(Z===x){q=!0,x=C,f=S;break}Z=Z.sibling}if(!q)throw Error(n(189))}}if(f.alternate!==x)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?o:c}function d(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=d(o),c!==null)return c;o=o.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),A=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function U(o){return o===null||typeof o!="object"?null:(o=G&&o[G]||o["@@iterator"],typeof o=="function"?o:null)}var W=Symbol.for("react.client.reference");function j(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===W?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case D:return"Fragment";case w:return"Profiler";case v:return"StrictMode";case E:return"Suspense";case T:return"SuspenseList";case I:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case y:return"Portal";case A:return(o.displayName||"Context")+".Provider";case _:return(o._context.displayName||"Context")+".Consumer";case N:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case R:return c=o.displayName||null,c!==null?c:j(o.type)||"Memo";case M:c=o._payload,o=o._init;try{return j(o(c))}catch{}}return null}var X=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},K=[],H=-1;function J(o){return{current:o}}function ie(o){0>H||(o.current=K[H],K[H]=null,H--)}function z(o,c){H++,K[H]=o.current,o.current=c}var ge=J(null),ve=J(null),je=J(null),Ie=J(null);function Pe(o,c){switch(z(je,c),z(ve,o),z(ge,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?t3(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=t3(c),o=n3(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ie(ge),z(ge,o)}function fe(){ie(ge),ie(ve),ie(je)}function Ue(o){o.memoizedState!==null&&z(Ie,o);var c=ge.current,f=n3(c,o.type);c!==f&&(z(ve,o),z(ge,f))}function be(o){ve.current===o&&(ie(ge),ie(ve)),Ie.current===o&&(ie(Ie),pg._currentValue=ee)}var Fe=Object.prototype.hasOwnProperty,$e=r.unstable_scheduleCallback,O=r.unstable_cancelCallback,he=r.unstable_shouldYield,oe=r.unstable_requestPaint,re=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,Ce=r.unstable_UserBlockingPriority,Ne=r.unstable_NormalPriority,pe=r.unstable_LowPriority,se=r.unstable_IdlePriority,de=r.log,xe=r.unstable_setDisableYieldValue,ae=null,ke=null;function Me(o){if(typeof de=="function"&&xe(o),ke&&typeof ke.setStrictMode=="function")try{ke.setStrictMode(ae,o)}catch{}}var ze=Math.clz32?Math.clz32:ye,Xe=Math.log,at=Math.LN2;function ye(o){return o>>>=0,o===0?32:31-(Xe(o)/at|0)|0}var Re=256,qe=4194304;function Ze(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Ke(o,c,f){var x=o.pendingLanes;if(x===0)return 0;var S=0,C=o.suspendedLanes,q=o.pingedLanes;o=o.warmLanes;var Z=x&134217727;return Z!==0?(x=Z&~C,x!==0?S=Ze(x):(q&=Z,q!==0?S=Ze(q):f||(f=Z&~o,f!==0&&(S=Ze(f))))):(Z=x&~C,Z!==0?S=Ze(Z):q!==0?S=Ze(q):f||(f=x&~o,f!==0&&(S=Ze(f)))),S===0?0:c!==0&&c!==S&&(c&C)===0&&(C=S&-S,f=c&-c,C>=f||C===32&&(f&4194048)!==0)?c:S}function ft(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function xt(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zn(){var o=Re;return Re<<=1,(Re&4194048)===0&&(Re=256),o}function gi(){var o=qe;return qe<<=1,(qe&62914560)===0&&(qe=4194304),o}function Yi(o){for(var c=[],f=0;31>f;f++)c.push(o);return c}function Y(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function te(o,c,f,x,S,C){var q=o.pendingLanes;o.pendingLanes=f,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=f,o.entangledLanes&=f,o.errorRecoveryDisabledLanes&=f,o.shellSuspendCounter=0;var Z=o.entanglements,le=o.expirationTimes,Ae=o.hiddenUpdates;for(f=q&~f;0<f;){var Oe=31-ze(f),Be=1<<Oe;Z[Oe]=0,le[Oe]=-1;var Se=Ae[Oe];if(Se!==null)for(Ae[Oe]=null,Oe=0;Oe<Se.length;Oe++){var Te=Se[Oe];Te!==null&&(Te.lane&=-536870913)}f&=~Be}x!==0&&ce(o,x,0),C!==0&&S===0&&o.tag!==0&&(o.suspendedLanes|=C&~(q&~c))}function ce(o,c,f){o.pendingLanes|=c,o.suspendedLanes&=~c;var x=31-ze(c);o.entangledLanes|=c,o.entanglements[x]=o.entanglements[x]|1073741824|f&4194090}function Ee(o,c){var f=o.entangledLanes|=c;for(o=o.entanglements;f;){var x=31-ze(f),S=1<<x;S&c|o[x]&c&&(o[x]|=c),f&=~S}}function Ve(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function ot(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Xt(){var o=B.p;return o!==0?o:(o=window.event,o===void 0?32:w3(o.type))}function Sr(o,c){var f=B.p;try{return B.p=o,c()}finally{B.p=f}}var Nn=Math.random().toString(36).slice(2),on="__reactFiber$"+Nn,un="__reactProps$"+Nn,Zr="__reactContainer$"+Nn,Na="__reactEvents$"+Nn,Bs="__reactListeners$"+Nn,Ki="__reactHandles$"+Nn,ts="__reactResources$"+Nn,Ua="__reactMarker$"+Nn;function Un(o){delete o[on],delete o[un],delete o[Na],delete o[Bs],delete o[Ki]}function Ps(o){var c=o[on];if(c)return c;for(var f=o.parentNode;f;){if(c=f[Zr]||f[on]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(o=s3(o);o!==null;){if(f=o[on])return f;o=s3(o)}return c}o=f,f=o.parentNode}return null}function mi(o){if(o=o[on]||o[Zr]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function ol(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(n(33))}function Hd(o){var c=o[ts];return c||(c=o[ts]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Jn(o){o[Ua]=!0}var qS=new Set,VS={};function Xc(o,c){qd(o,c),qd(o+"Capture",c)}function qd(o,c){for(VS[o]=c,o=0;o<c.length;o++)qS.add(c[o])}var cI=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),XS={},GS={};function uI(o){return Fe.call(GS,o)?!0:Fe.call(XS,o)?!1:cI.test(o)?GS[o]=!0:(XS[o]=!0,!1)}function by(o,c,f){if(uI(c))if(f===null)o.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var x=c.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+f)}}function yy(o,c,f){if(f===null)o.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+f)}}function zs(o,c,f,x){if(x===null)o.removeAttribute(f);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(f);return}o.setAttributeNS(c,f,""+x)}}var Rv,$S;function Vd(o){if(Rv===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);Rv=c&&c[1]||"",$S=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rv+o+$S}var jv=!1;function Fv(o,c){if(!o||jv)return"";jv=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(c){var Be=function(){throw Error()};if(Object.defineProperty(Be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Be,[])}catch(Te){var Se=Te}Reflect.construct(o,[],Be)}else{try{Be.call()}catch(Te){Se=Te}o.call(Be.prototype)}}else{try{throw Error()}catch(Te){Se=Te}(Be=o())&&typeof Be.catch=="function"&&Be.catch(function(){})}}catch(Te){if(Te&&Se&&typeof Te.stack=="string")return[Te.stack,Se.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=x.DetermineComponentFrameRoot(),q=C[0],Z=C[1];if(q&&Z){var le=q.split(`
`),Ae=Z.split(`
`);for(S=x=0;x<le.length&&!le[x].includes("DetermineComponentFrameRoot");)x++;for(;S<Ae.length&&!Ae[S].includes("DetermineComponentFrameRoot");)S++;if(x===le.length||S===Ae.length)for(x=le.length-1,S=Ae.length-1;1<=x&&0<=S&&le[x]!==Ae[S];)S--;for(;1<=x&&0<=S;x--,S--)if(le[x]!==Ae[S]){if(x!==1||S!==1)do if(x--,S--,0>S||le[x]!==Ae[S]){var Oe=`
`+le[x].replace(" at new "," at ");return o.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",o.displayName)),Oe}while(1<=x&&0<=S);break}}}finally{jv=!1,Error.prepareStackTrace=f}return(f=o?o.displayName||o.name:"")?Vd(f):""}function dI(o){switch(o.tag){case 26:case 27:case 5:return Vd(o.type);case 16:return Vd("Lazy");case 13:return Vd("Suspense");case 19:return Vd("SuspenseList");case 0:case 15:return Fv(o.type,!1);case 11:return Fv(o.type.render,!1);case 1:return Fv(o.type,!0);case 31:return Vd("Activity");default:return""}}function YS(o){try{var c="";do c+=dI(o),o=o.return;while(o);return c}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Qi(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function KS(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function hI(o){var c=KS(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),x=""+o[c];if(!o.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var S=f.get,C=f.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return S.call(this)},set:function(q){x=""+q,C.call(this,q)}}),Object.defineProperty(o,c,{enumerable:f.enumerable}),{getValue:function(){return x},setValue:function(q){x=""+q},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function xy(o){o._valueTracker||(o._valueTracker=hI(o))}function QS(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var f=c.getValue(),x="";return o&&(x=KS(o)?o.checked?"true":"false":o.value),o=x,o!==f?(c.setValue(o),!0):!1}function vy(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var fI=/[\n"\\]/g;function Zi(o){return o.replace(fI,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Iv(o,c,f,x,S,C,q,Z){o.name="",q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?o.type=q:o.removeAttribute("type"),c!=null?q==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+Qi(c)):o.value!==""+Qi(c)&&(o.value=""+Qi(c)):q!=="submit"&&q!=="reset"||o.removeAttribute("value"),c!=null?Ov(o,q,Qi(c)):f!=null?Ov(o,q,Qi(f)):x!=null&&o.removeAttribute("value"),S==null&&C!=null&&(o.defaultChecked=!!C),S!=null&&(o.checked=S&&typeof S!="function"&&typeof S!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?o.name=""+Qi(Z):o.removeAttribute("name")}function ZS(o,c,f,x,S,C,q,Z){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.type=C),c!=null||f!=null){if(!(C!=="submit"&&C!=="reset"||c!=null))return;f=f!=null?""+Qi(f):"",c=c!=null?""+Qi(c):f,Z||c===o.value||(o.value=c),o.defaultValue=c}x=x??S,x=typeof x!="function"&&typeof x!="symbol"&&!!x,o.checked=Z?o.checked:!!x,o.defaultChecked=!!x,q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(o.name=q)}function Ov(o,c,f){c==="number"&&vy(o.ownerDocument)===o||o.defaultValue===""+f||(o.defaultValue=""+f)}function Xd(o,c,f,x){if(o=o.options,c){c={};for(var S=0;S<f.length;S++)c["$"+f[S]]=!0;for(f=0;f<o.length;f++)S=c.hasOwnProperty("$"+o[f].value),o[f].selected!==S&&(o[f].selected=S),S&&x&&(o[f].defaultSelected=!0)}else{for(f=""+Qi(f),c=null,S=0;S<o.length;S++){if(o[S].value===f){o[S].selected=!0,x&&(o[S].defaultSelected=!0);return}c!==null||o[S].disabled||(c=o[S])}c!==null&&(c.selected=!0)}}function JS(o,c,f){if(c!=null&&(c=""+Qi(c),c!==o.value&&(o.value=c),f==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=f!=null?""+Qi(f):""}function eE(o,c,f,x){if(c==null){if(x!=null){if(f!=null)throw Error(n(92));if(X(x)){if(1<x.length)throw Error(n(93));x=x[0]}f=x}f==null&&(f=""),c=f}f=Qi(c),o.defaultValue=f,x=o.textContent,x===f&&x!==""&&x!==null&&(o.value=x)}function Gd(o,c){if(c){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=c;return}}o.textContent=c}var pI=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tE(o,c,f){var x=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?x?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":x?o.setProperty(c,f):typeof f!="number"||f===0||pI.has(c)?c==="float"?o.cssFloat=f:o[c]=(""+f).trim():o[c]=f+"px"}function nE(o,c,f){if(c!=null&&typeof c!="object")throw Error(n(62));if(o=o.style,f!=null){for(var x in f)!f.hasOwnProperty(x)||c!=null&&c.hasOwnProperty(x)||(x.indexOf("--")===0?o.setProperty(x,""):x==="float"?o.cssFloat="":o[x]="");for(var S in c)x=c[S],c.hasOwnProperty(S)&&f[S]!==x&&tE(o,S,x)}else for(var C in c)c.hasOwnProperty(C)&&tE(o,C,c[C])}function Mv(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gI=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mI=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wy(o){return mI.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Lv=null;function Bv(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var $d=null,Yd=null;function rE(o){var c=mi(o);if(c&&(o=c.stateNode)){var f=o[un]||null;e:switch(o=c.stateNode,c.type){case"input":if(Iv(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Zi(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var x=f[c];if(x!==o&&x.form===o.form){var S=x[un]||null;if(!S)throw Error(n(90));Iv(x,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(c=0;c<f.length;c++)x=f[c],x.form===o.form&&QS(x)}break e;case"textarea":JS(o,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&Xd(o,!!f.multiple,c,!1)}}}var Pv=!1;function iE(o,c,f){if(Pv)return o(c,f);Pv=!0;try{var x=o(c);return x}finally{if(Pv=!1,($d!==null||Yd!==null)&&(sx(),$d&&(c=$d,o=Yd,Yd=$d=null,rE(c),o)))for(c=0;c<o.length;c++)rE(o[c])}}function Ep(o,c){var f=o.stateNode;if(f===null)return null;var x=f[un]||null;if(x===null)return null;f=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(o=o.type,x=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!x;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(n(231,c,typeof f));return f}var Ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zv=!1;if(Ws)try{var Tp={};Object.defineProperty(Tp,"passive",{get:function(){zv=!0}}),window.addEventListener("test",Tp,Tp),window.removeEventListener("test",Tp,Tp)}catch{zv=!1}var ll=null,Wv=null,ky=null;function aE(){if(ky)return ky;var o,c=Wv,f=c.length,x,S="value"in ll?ll.value:ll.textContent,C=S.length;for(o=0;o<f&&c[o]===S[o];o++);var q=f-o;for(x=1;x<=q&&c[f-x]===S[C-x];x++);return ky=S.slice(o,1<x?1-x:void 0)}function Dy(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function _y(){return!0}function sE(){return!1}function Jr(o){function c(f,x,S,C,q){this._reactName=f,this._targetInst=S,this.type=x,this.nativeEvent=C,this.target=q,this.currentTarget=null;for(var Z in o)o.hasOwnProperty(Z)&&(f=o[Z],this[Z]=f?f(C):C[Z]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?_y:sE,this.isPropagationStopped=sE,this}return h(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=_y)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=_y)},persist:function(){},isPersistent:_y}),c}var Gc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ay=Jr(Gc),Cp=h({},Gc,{view:0,detail:0}),bI=Jr(Cp),Hv,qv,Np,Sy=h({},Cp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xv,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Np&&(Np&&o.type==="mousemove"?(Hv=o.screenX-Np.screenX,qv=o.screenY-Np.screenY):qv=Hv=0,Np=o),Hv)},movementY:function(o){return"movementY"in o?o.movementY:qv}}),oE=Jr(Sy),yI=h({},Sy,{dataTransfer:0}),xI=Jr(yI),vI=h({},Cp,{relatedTarget:0}),Vv=Jr(vI),wI=h({},Gc,{animationName:0,elapsedTime:0,pseudoElement:0}),kI=Jr(wI),DI=h({},Gc,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),_I=Jr(DI),AI=h({},Gc,{data:0}),lE=Jr(AI),SI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CI(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=TI[o])?!!c[o]:!1}function Xv(){return CI}var NI=h({},Cp,{key:function(o){if(o.key){var c=SI[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Dy(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?EI[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xv,charCode:function(o){return o.type==="keypress"?Dy(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Dy(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),UI=Jr(NI),RI=h({},Sy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cE=Jr(RI),jI=h({},Cp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xv}),FI=Jr(jI),II=h({},Gc,{propertyName:0,elapsedTime:0,pseudoElement:0}),OI=Jr(II),MI=h({},Sy,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),LI=Jr(MI),BI=h({},Gc,{newState:0,oldState:0}),PI=Jr(BI),zI=[9,13,27,32],Gv=Ws&&"CompositionEvent"in window,Up=null;Ws&&"documentMode"in document&&(Up=document.documentMode);var WI=Ws&&"TextEvent"in window&&!Up,uE=Ws&&(!Gv||Up&&8<Up&&11>=Up),dE=" ",hE=!1;function fE(o,c){switch(o){case"keyup":return zI.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pE(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Kd=!1;function HI(o,c){switch(o){case"compositionend":return pE(c);case"keypress":return c.which!==32?null:(hE=!0,dE);case"textInput":return o=c.data,o===dE&&hE?null:o;default:return null}}function qI(o,c){if(Kd)return o==="compositionend"||!Gv&&fE(o,c)?(o=aE(),ky=Wv=ll=null,Kd=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return uE&&c.locale!=="ko"?null:c.data;default:return null}}var VI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gE(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!VI[o.type]:c==="textarea"}function mE(o,c,f,x){$d?Yd?Yd.push(x):Yd=[x]:$d=x,c=hx(c,"onChange"),0<c.length&&(f=new Ay("onChange","change",null,f,x),o.push({event:f,listeners:c}))}var Rp=null,jp=null;function XI(o){KC(o,0)}function Ey(o){var c=ol(o);if(QS(c))return o}function bE(o,c){if(o==="change")return c}var yE=!1;if(Ws){var $v;if(Ws){var Yv="oninput"in document;if(!Yv){var xE=document.createElement("div");xE.setAttribute("oninput","return;"),Yv=typeof xE.oninput=="function"}$v=Yv}else $v=!1;yE=$v&&(!document.documentMode||9<document.documentMode)}function vE(){Rp&&(Rp.detachEvent("onpropertychange",wE),jp=Rp=null)}function wE(o){if(o.propertyName==="value"&&Ey(jp)){var c=[];mE(c,jp,o,Bv(o)),iE(XI,c)}}function GI(o,c,f){o==="focusin"?(vE(),Rp=c,jp=f,Rp.attachEvent("onpropertychange",wE)):o==="focusout"&&vE()}function $I(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Ey(jp)}function YI(o,c){if(o==="click")return Ey(c)}function KI(o,c){if(o==="input"||o==="change")return Ey(c)}function QI(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var bi=typeof Object.is=="function"?Object.is:QI;function Fp(o,c){if(bi(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var f=Object.keys(o),x=Object.keys(c);if(f.length!==x.length)return!1;for(x=0;x<f.length;x++){var S=f[x];if(!Fe.call(c,S)||!bi(o[S],c[S]))return!1}return!0}function kE(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function DE(o,c){var f=kE(o);o=0;for(var x;f;){if(f.nodeType===3){if(x=o+f.textContent.length,o<=c&&x>=c)return{node:f,offset:c-o};o=x}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=kE(f)}}function _E(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?_E(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function AE(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=vy(o.document);c instanceof o.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)o=c.contentWindow;else break;c=vy(o.document)}return c}function Kv(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var ZI=Ws&&"documentMode"in document&&11>=document.documentMode,Qd=null,Qv=null,Ip=null,Zv=!1;function SE(o,c,f){var x=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Zv||Qd==null||Qd!==vy(x)||(x=Qd,"selectionStart"in x&&Kv(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Ip&&Fp(Ip,x)||(Ip=x,x=hx(Qv,"onSelect"),0<x.length&&(c=new Ay("onSelect","select",null,c,f),o.push({event:c,listeners:x}),c.target=Qd)))}function $c(o,c){var f={};return f[o.toLowerCase()]=c.toLowerCase(),f["Webkit"+o]="webkit"+c,f["Moz"+o]="moz"+c,f}var Zd={animationend:$c("Animation","AnimationEnd"),animationiteration:$c("Animation","AnimationIteration"),animationstart:$c("Animation","AnimationStart"),transitionrun:$c("Transition","TransitionRun"),transitionstart:$c("Transition","TransitionStart"),transitioncancel:$c("Transition","TransitionCancel"),transitionend:$c("Transition","TransitionEnd")},Jv={},EE={};Ws&&(EE=document.createElement("div").style,"AnimationEvent"in window||(delete Zd.animationend.animation,delete Zd.animationiteration.animation,delete Zd.animationstart.animation),"TransitionEvent"in window||delete Zd.transitionend.transition);function Yc(o){if(Jv[o])return Jv[o];if(!Zd[o])return o;var c=Zd[o],f;for(f in c)if(c.hasOwnProperty(f)&&f in EE)return Jv[o]=c[f];return o}var TE=Yc("animationend"),CE=Yc("animationiteration"),NE=Yc("animationstart"),JI=Yc("transitionrun"),eO=Yc("transitionstart"),tO=Yc("transitioncancel"),UE=Yc("transitionend"),RE=new Map,e2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");e2.push("scrollEnd");function Ra(o,c){RE.set(o,c),Xc(c,[o])}var jE=new WeakMap;function Ji(o,c){if(typeof o=="object"&&o!==null){var f=jE.get(o);return f!==void 0?f:(c={value:o,source:c,stack:YS(c)},jE.set(o,c),c)}return{value:o,source:c,stack:YS(c)}}var ea=[],Jd=0,t2=0;function Ty(){for(var o=Jd,c=t2=Jd=0;c<o;){var f=ea[c];ea[c++]=null;var x=ea[c];ea[c++]=null;var S=ea[c];ea[c++]=null;var C=ea[c];if(ea[c++]=null,x!==null&&S!==null){var q=x.pending;q===null?S.next=S:(S.next=q.next,q.next=S),x.pending=S}C!==0&&FE(f,S,C)}}function Cy(o,c,f,x){ea[Jd++]=o,ea[Jd++]=c,ea[Jd++]=f,ea[Jd++]=x,t2|=x,o.lanes|=x,o=o.alternate,o!==null&&(o.lanes|=x)}function n2(o,c,f,x){return Cy(o,c,f,x),Ny(o)}function eh(o,c){return Cy(o,null,null,c),Ny(o)}function FE(o,c,f){o.lanes|=f;var x=o.alternate;x!==null&&(x.lanes|=f);for(var S=!1,C=o.return;C!==null;)C.childLanes|=f,x=C.alternate,x!==null&&(x.childLanes|=f),C.tag===22&&(o=C.stateNode,o===null||o._visibility&1||(S=!0)),o=C,C=C.return;return o.tag===3?(C=o.stateNode,S&&c!==null&&(S=31-ze(f),o=C.hiddenUpdates,x=o[S],x===null?o[S]=[c]:x.push(c),c.lane=f|536870912),C):null}function Ny(o){if(50<sg)throw sg=0,lw=null,Error(n(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var th={};function nO(o,c,f,x){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yi(o,c,f,x){return new nO(o,c,f,x)}function r2(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Hs(o,c){var f=o.alternate;return f===null?(f=yi(o.tag,c,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=c,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&65011712,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,c=o.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f.refCleanup=o.refCleanup,f}function IE(o,c){o.flags&=65011714;var f=o.alternate;return f===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,c=f.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function Uy(o,c,f,x,S,C){var q=0;if(x=o,typeof o=="function")r2(o)&&(q=1);else if(typeof o=="string")q=iM(o,f,ge.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case I:return o=yi(31,f,c,S),o.elementType=I,o.lanes=C,o;case D:return Kc(f.children,S,C,c);case v:q=8,S|=24;break;case w:return o=yi(12,f,c,S|2),o.elementType=w,o.lanes=C,o;case E:return o=yi(13,f,c,S),o.elementType=E,o.lanes=C,o;case T:return o=yi(19,f,c,S),o.elementType=T,o.lanes=C,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case k:case A:q=10;break e;case _:q=9;break e;case N:q=11;break e;case R:q=14;break e;case M:q=16,x=null;break e}q=29,f=Error(n(130,o===null?"null":typeof o,"")),x=null}return c=yi(q,f,c,S),c.elementType=o,c.type=x,c.lanes=C,c}function Kc(o,c,f,x){return o=yi(7,o,x,c),o.lanes=f,o}function i2(o,c,f){return o=yi(6,o,null,c),o.lanes=f,o}function a2(o,c,f){return c=yi(4,o.children!==null?o.children:[],o.key,c),c.lanes=f,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var nh=[],rh=0,Ry=null,jy=0,ta=[],na=0,Qc=null,qs=1,Vs="";function Zc(o,c){nh[rh++]=jy,nh[rh++]=Ry,Ry=o,jy=c}function OE(o,c,f){ta[na++]=qs,ta[na++]=Vs,ta[na++]=Qc,Qc=o;var x=qs;o=Vs;var S=32-ze(x)-1;x&=~(1<<S),f+=1;var C=32-ze(c)+S;if(30<C){var q=S-S%5;C=(x&(1<<q)-1).toString(32),x>>=q,S-=q,qs=1<<32-ze(c)+S|f<<S|x,Vs=C+o}else qs=1<<C|f<<S|x,Vs=o}function s2(o){o.return!==null&&(Zc(o,1),OE(o,1,0))}function o2(o){for(;o===Ry;)Ry=nh[--rh],nh[rh]=null,jy=nh[--rh],nh[rh]=null;for(;o===Qc;)Qc=ta[--na],ta[na]=null,Vs=ta[--na],ta[na]=null,qs=ta[--na],ta[na]=null}var Or=null,wn=null,Ot=!1,Jc=null,ns=!1,l2=Error(n(519));function eu(o){var c=Error(n(418,""));throw Lp(Ji(c,o)),l2}function ME(o){var c=o.stateNode,f=o.type,x=o.memoizedProps;switch(c[on]=o,c[un]=x,f){case"dialog":St("cancel",c),St("close",c);break;case"iframe":case"object":case"embed":St("load",c);break;case"video":case"audio":for(f=0;f<lg.length;f++)St(lg[f],c);break;case"source":St("error",c);break;case"img":case"image":case"link":St("error",c),St("load",c);break;case"details":St("toggle",c);break;case"input":St("invalid",c),ZS(c,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0),xy(c);break;case"select":St("invalid",c);break;case"textarea":St("invalid",c),eE(c,x.value,x.defaultValue,x.children),xy(c)}f=x.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||x.suppressHydrationWarning===!0||e3(c.textContent,f)?(x.popover!=null&&(St("beforetoggle",c),St("toggle",c)),x.onScroll!=null&&St("scroll",c),x.onScrollEnd!=null&&St("scrollend",c),x.onClick!=null&&(c.onclick=fx),c=!0):c=!1,c||eu(o)}function LE(o){for(Or=o.return;Or;)switch(Or.tag){case 5:case 13:ns=!1;return;case 27:case 3:ns=!0;return;default:Or=Or.return}}function Op(o){if(o!==Or)return!1;if(!Ot)return LE(o),Ot=!0,!1;var c=o.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=o.type,f=!(f!=="form"&&f!=="button")||_w(o.type,o.memoizedProps)),f=!f),f&&wn&&eu(o),LE(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(f=o.data,f==="/$"){if(c===0){wn=Fa(o.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++;o=o.nextSibling}wn=null}}else c===27?(c=wn,_l(o.type)?(o=Tw,Tw=null,wn=o):wn=c):wn=Or?Fa(o.stateNode.nextSibling):null;return!0}function Mp(){wn=Or=null,Ot=!1}function BE(){var o=Jc;return o!==null&&(ni===null?ni=o:ni.push.apply(ni,o),Jc=null),o}function Lp(o){Jc===null?Jc=[o]:Jc.push(o)}var c2=J(null),tu=null,Xs=null;function cl(o,c,f){z(c2,c._currentValue),c._currentValue=f}function Gs(o){o._currentValue=c2.current,ie(c2)}function u2(o,c,f){for(;o!==null;){var x=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),o===f)break;o=o.return}}function d2(o,c,f,x){var S=o.child;for(S!==null&&(S.return=o);S!==null;){var C=S.dependencies;if(C!==null){var q=S.child;C=C.firstContext;e:for(;C!==null;){var Z=C;C=S;for(var le=0;le<c.length;le++)if(Z.context===c[le]){C.lanes|=f,Z=C.alternate,Z!==null&&(Z.lanes|=f),u2(C.return,f,o),x||(q=null);break e}C=Z.next}}else if(S.tag===18){if(q=S.return,q===null)throw Error(n(341));q.lanes|=f,C=q.alternate,C!==null&&(C.lanes|=f),u2(q,f,o),q=null}else q=S.child;if(q!==null)q.return=S;else for(q=S;q!==null;){if(q===o){q=null;break}if(S=q.sibling,S!==null){S.return=q.return,q=S;break}q=q.return}S=q}}function Bp(o,c,f,x){o=null;for(var S=c,C=!1;S!==null;){if(!C){if((S.flags&524288)!==0)C=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var q=S.alternate;if(q===null)throw Error(n(387));if(q=q.memoizedProps,q!==null){var Z=S.type;bi(S.pendingProps.value,q.value)||(o!==null?o.push(Z):o=[Z])}}else if(S===Ie.current){if(q=S.alternate,q===null)throw Error(n(387));q.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(o!==null?o.push(pg):o=[pg])}S=S.return}o!==null&&d2(c,o,f,x),c.flags|=262144}function Fy(o){for(o=o.firstContext;o!==null;){if(!bi(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function nu(o){tu=o,Xs=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Er(o){return PE(tu,o)}function Iy(o,c){return tu===null&&nu(o),PE(o,c)}function PE(o,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},Xs===null){if(o===null)throw Error(n(308));Xs=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else Xs=Xs.next=c;return f}var rO=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(f,x){o.push(x)}};this.abort=function(){c.aborted=!0,o.forEach(function(f){return f()})}},iO=r.unstable_scheduleCallback,aO=r.unstable_NormalPriority,Wn={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function h2(){return{controller:new rO,data:new Map,refCount:0}}function Pp(o){o.refCount--,o.refCount===0&&iO(aO,function(){o.controller.abort()})}var zp=null,f2=0,ih=0,ah=null;function sO(o,c){if(zp===null){var f=zp=[];f2=0,ih=gw(),ah={status:"pending",value:void 0,then:function(x){f.push(x)}}}return f2++,c.then(zE,zE),c}function zE(){if(--f2===0&&zp!==null){ah!==null&&(ah.status="fulfilled");var o=zp;zp=null,ih=0,ah=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function oO(o,c){var f=[],x={status:"pending",value:null,reason:null,then:function(S){f.push(S)}};return o.then(function(){x.status="fulfilled",x.value=c;for(var S=0;S<f.length;S++)(0,f[S])(c)},function(S){for(x.status="rejected",x.reason=S,S=0;S<f.length;S++)(0,f[S])(void 0)}),x}var WE=P.S;P.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&sO(o,c),WE!==null&&WE(o,c)};var ru=J(null);function p2(){var o=ru.current;return o!==null?o:nn.pooledCache}function Oy(o,c){c===null?z(ru,ru.current):z(ru,c.pool)}function HE(){var o=p2();return o===null?null:{parent:Wn._currentValue,pool:o}}var Wp=Error(n(460)),qE=Error(n(474)),My=Error(n(542)),g2={then:function(){}};function VE(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Ly(){}function XE(o,c,f){switch(f=o[f],f===void 0?o.push(c):f!==c&&(c.then(Ly,Ly),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,$E(o),o;default:if(typeof c.status=="string")c.then(Ly,Ly);else{if(o=nn,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=c,o.status="pending",o.then(function(x){if(c.status==="pending"){var S=c;S.status="fulfilled",S.value=x}},function(x){if(c.status==="pending"){var S=c;S.status="rejected",S.reason=x}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,$E(o),o}throw Hp=c,Wp}}var Hp=null;function GE(){if(Hp===null)throw Error(n(459));var o=Hp;return Hp=null,o}function $E(o){if(o===Wp||o===My)throw Error(n(483))}var ul=!1;function m2(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function b2(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function dl(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function hl(o,c,f){var x=o.updateQueue;if(x===null)return null;if(x=x.shared,(Wt&2)!==0){var S=x.pending;return S===null?c.next=c:(c.next=S.next,S.next=c),x.pending=c,c=Ny(o),FE(o,null,f),c}return Cy(o,x,c,f),Ny(o)}function qp(o,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var x=c.lanes;x&=o.pendingLanes,f|=x,c.lanes=f,Ee(o,f)}}function y2(o,c){var f=o.updateQueue,x=o.alternate;if(x!==null&&(x=x.updateQueue,f===x)){var S=null,C=null;if(f=f.firstBaseUpdate,f!==null){do{var q={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};C===null?S=C=q:C=C.next=q,f=f.next}while(f!==null);C===null?S=C=c:C=C.next=c}else S=C=c;f={baseState:x.baseState,firstBaseUpdate:S,lastBaseUpdate:C,shared:x.shared,callbacks:x.callbacks},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=c}var x2=!1;function Vp(){if(x2){var o=ah;if(o!==null)throw o}}function Xp(o,c,f,x){x2=!1;var S=o.updateQueue;ul=!1;var C=S.firstBaseUpdate,q=S.lastBaseUpdate,Z=S.shared.pending;if(Z!==null){S.shared.pending=null;var le=Z,Ae=le.next;le.next=null,q===null?C=Ae:q.next=Ae,q=le;var Oe=o.alternate;Oe!==null&&(Oe=Oe.updateQueue,Z=Oe.lastBaseUpdate,Z!==q&&(Z===null?Oe.firstBaseUpdate=Ae:Z.next=Ae,Oe.lastBaseUpdate=le))}if(C!==null){var Be=S.baseState;q=0,Oe=Ae=le=null,Z=C;do{var Se=Z.lane&-536870913,Te=Se!==Z.lane;if(Te?(Ut&Se)===Se:(x&Se)===Se){Se!==0&&Se===ih&&(x2=!0),Oe!==null&&(Oe=Oe.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});e:{var dt=o,lt=Z;Se=c;var Yt=f;switch(lt.tag){case 1:if(dt=lt.payload,typeof dt=="function"){Be=dt.call(Yt,Be,Se);break e}Be=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=lt.payload,Se=typeof dt=="function"?dt.call(Yt,Be,Se):dt,Se==null)break e;Be=h({},Be,Se);break e;case 2:ul=!0}}Se=Z.callback,Se!==null&&(o.flags|=64,Te&&(o.flags|=8192),Te=S.callbacks,Te===null?S.callbacks=[Se]:Te.push(Se))}else Te={lane:Se,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Oe===null?(Ae=Oe=Te,le=Be):Oe=Oe.next=Te,q|=Se;if(Z=Z.next,Z===null){if(Z=S.shared.pending,Z===null)break;Te=Z,Z=Te.next,Te.next=null,S.lastBaseUpdate=Te,S.shared.pending=null}}while(!0);Oe===null&&(le=Be),S.baseState=le,S.firstBaseUpdate=Ae,S.lastBaseUpdate=Oe,C===null&&(S.shared.lanes=0),vl|=q,o.lanes=q,o.memoizedState=Be}}function YE(o,c){if(typeof o!="function")throw Error(n(191,o));o.call(c)}function KE(o,c){var f=o.callbacks;if(f!==null)for(o.callbacks=null,o=0;o<f.length;o++)YE(f[o],c)}var sh=J(null),By=J(0);function QE(o,c){o=eo,z(By,o),z(sh,c),eo=o|c.baseLanes}function v2(){z(By,eo),z(sh,sh.current)}function w2(){eo=By.current,ie(sh),ie(By)}var fl=0,vt=null,Gt=null,Rn=null,Py=!1,oh=!1,iu=!1,zy=0,Gp=0,lh=null,lO=0;function _n(){throw Error(n(321))}function k2(o,c){if(c===null)return!1;for(var f=0;f<c.length&&f<o.length;f++)if(!bi(o[f],c[f]))return!1;return!0}function D2(o,c,f,x,S,C){return fl=C,vt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,P.H=o===null||o.memoizedState===null?FT:IT,iu=!1,C=f(x,S),iu=!1,oh&&(C=JE(c,f,x,S)),ZE(o),C}function ZE(o){P.H=Gy;var c=Gt!==null&&Gt.next!==null;if(fl=0,Rn=Gt=vt=null,Py=!1,Gp=0,lh=null,c)throw Error(n(300));o===null||er||(o=o.dependencies,o!==null&&Fy(o)&&(er=!0))}function JE(o,c,f,x){vt=o;var S=0;do{if(oh&&(lh=null),Gp=0,oh=!1,25<=S)throw Error(n(301));if(S+=1,Rn=Gt=null,o.updateQueue!=null){var C=o.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}P.H=gO,C=c(f,x)}while(oh);return C}function cO(){var o=P.H,c=o.useState()[0];return c=typeof c.then=="function"?$p(c):c,o=o.useState()[0],(Gt!==null?Gt.memoizedState:null)!==o&&(vt.flags|=1024),c}function _2(){var o=zy!==0;return zy=0,o}function A2(o,c,f){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~f}function S2(o){if(Py){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Py=!1}fl=0,Rn=Gt=vt=null,oh=!1,Gp=zy=0,lh=null}function ei(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?vt.memoizedState=Rn=o:Rn=Rn.next=o,Rn}function jn(){if(Gt===null){var o=vt.alternate;o=o!==null?o.memoizedState:null}else o=Gt.next;var c=Rn===null?vt.memoizedState:Rn.next;if(c!==null)Rn=c,Gt=o;else{if(o===null)throw vt.alternate===null?Error(n(467)):Error(n(310));Gt=o,o={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Rn===null?vt.memoizedState=Rn=o:Rn=Rn.next=o}return Rn}function E2(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $p(o){var c=Gp;return Gp+=1,lh===null&&(lh=[]),o=XE(lh,o,c),c=vt,(Rn===null?c.memoizedState:Rn.next)===null&&(c=c.alternate,P.H=c===null||c.memoizedState===null?FT:IT),o}function Wy(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return $p(o);if(o.$$typeof===A)return Er(o)}throw Error(n(438,String(o)))}function T2(o){var c=null,f=vt.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var x=vt.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(c={data:x.data.map(function(S){return S.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=E2(),vt.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(o),x=0;x<o;x++)f[x]=F;return c.index++,f}function $s(o,c){return typeof c=="function"?c(o):c}function Hy(o){var c=jn();return C2(c,Gt,o)}function C2(o,c,f){var x=o.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=f;var S=o.baseQueue,C=x.pending;if(C!==null){if(S!==null){var q=S.next;S.next=C.next,C.next=q}c.baseQueue=S=C,x.pending=null}if(C=o.baseState,S===null)o.memoizedState=C;else{c=S.next;var Z=q=null,le=null,Ae=c,Oe=!1;do{var Be=Ae.lane&-536870913;if(Be!==Ae.lane?(Ut&Be)===Be:(fl&Be)===Be){var Se=Ae.revertLane;if(Se===0)le!==null&&(le=le.next={lane:0,revertLane:0,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),Be===ih&&(Oe=!0);else if((fl&Se)===Se){Ae=Ae.next,Se===ih&&(Oe=!0);continue}else Be={lane:0,revertLane:Ae.revertLane,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},le===null?(Z=le=Be,q=C):le=le.next=Be,vt.lanes|=Se,vl|=Se;Be=Ae.action,iu&&f(C,Be),C=Ae.hasEagerState?Ae.eagerState:f(C,Be)}else Se={lane:Be,revertLane:Ae.revertLane,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},le===null?(Z=le=Se,q=C):le=le.next=Se,vt.lanes|=Be,vl|=Be;Ae=Ae.next}while(Ae!==null&&Ae!==c);if(le===null?q=C:le.next=Z,!bi(C,o.memoizedState)&&(er=!0,Oe&&(f=ah,f!==null)))throw f;o.memoizedState=C,o.baseState=q,o.baseQueue=le,x.lastRenderedState=C}return S===null&&(x.lanes=0),[o.memoizedState,x.dispatch]}function N2(o){var c=jn(),f=c.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=o;var x=f.dispatch,S=f.pending,C=c.memoizedState;if(S!==null){f.pending=null;var q=S=S.next;do C=o(C,q.action),q=q.next;while(q!==S);bi(C,c.memoizedState)||(er=!0),c.memoizedState=C,c.baseQueue===null&&(c.baseState=C),f.lastRenderedState=C}return[C,x]}function eT(o,c,f){var x=vt,S=jn(),C=Ot;if(C){if(f===void 0)throw Error(n(407));f=f()}else f=c();var q=!bi((Gt||S).memoizedState,f);q&&(S.memoizedState=f,er=!0),S=S.queue;var Z=rT.bind(null,x,S,o);if(Yp(2048,8,Z,[o]),S.getSnapshot!==c||q||Rn!==null&&Rn.memoizedState.tag&1){if(x.flags|=2048,ch(9,qy(),nT.bind(null,x,S,f,c),null),nn===null)throw Error(n(349));C||(fl&124)!==0||tT(x,c,f)}return f}function tT(o,c,f){o.flags|=16384,o={getSnapshot:c,value:f},c=vt.updateQueue,c===null?(c=E2(),vt.updateQueue=c,c.stores=[o]):(f=c.stores,f===null?c.stores=[o]:f.push(o))}function nT(o,c,f,x){c.value=f,c.getSnapshot=x,iT(c)&&aT(o)}function rT(o,c,f){return f(function(){iT(c)&&aT(o)})}function iT(o){var c=o.getSnapshot;o=o.value;try{var f=c();return!bi(o,f)}catch{return!0}}function aT(o){var c=eh(o,2);c!==null&&Di(c,o,2)}function U2(o){var c=ei();if(typeof o=="function"){var f=o;if(o=f(),iu){Me(!0);try{f()}finally{Me(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:o},c}function sT(o,c,f,x){return o.baseState=f,C2(o,Gt,typeof x=="function"?x:$s)}function uO(o,c,f,x,S){if(Xy(o))throw Error(n(485));if(o=c.action,o!==null){var C={payload:S,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){C.listeners.push(q)}};P.T!==null?f(!0):C.isTransition=!1,x(C),f=c.pending,f===null?(C.next=c.pending=C,oT(c,C)):(C.next=f.next,c.pending=f.next=C)}}function oT(o,c){var f=c.action,x=c.payload,S=o.state;if(c.isTransition){var C=P.T,q={};P.T=q;try{var Z=f(S,x),le=P.S;le!==null&&le(q,Z),lT(o,c,Z)}catch(Ae){R2(o,c,Ae)}finally{P.T=C}}else try{C=f(S,x),lT(o,c,C)}catch(Ae){R2(o,c,Ae)}}function lT(o,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(x){cT(o,c,x)},function(x){return R2(o,c,x)}):cT(o,c,f)}function cT(o,c,f){c.status="fulfilled",c.value=f,uT(c),o.state=f,c=o.pending,c!==null&&(f=c.next,f===c?o.pending=null:(f=f.next,c.next=f,oT(o,f)))}function R2(o,c,f){var x=o.pending;if(o.pending=null,x!==null){x=x.next;do c.status="rejected",c.reason=f,uT(c),c=c.next;while(c!==x)}o.action=null}function uT(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function dT(o,c){return c}function hT(o,c){if(Ot){var f=nn.formState;if(f!==null){e:{var x=vt;if(Ot){if(wn){t:{for(var S=wn,C=ns;S.nodeType!==8;){if(!C){S=null;break t}if(S=Fa(S.nextSibling),S===null){S=null;break t}}C=S.data,S=C==="F!"||C==="F"?S:null}if(S){wn=Fa(S.nextSibling),x=S.data==="F!";break e}}eu(x)}x=!1}x&&(c=f[0])}}return f=ei(),f.memoizedState=f.baseState=c,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dT,lastRenderedState:c},f.queue=x,f=UT.bind(null,vt,x),x.dispatch=f,x=U2(!1),C=M2.bind(null,vt,!1,x.queue),x=ei(),S={state:c,dispatch:null,action:o,pending:null},x.queue=S,f=uO.bind(null,vt,S,C,f),S.dispatch=f,x.memoizedState=o,[c,f,!1]}function fT(o){var c=jn();return pT(c,Gt,o)}function pT(o,c,f){if(c=C2(o,c,dT)[0],o=Hy($s)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var x=$p(c)}catch(q){throw q===Wp?My:q}else x=c;c=jn();var S=c.queue,C=S.dispatch;return f!==c.memoizedState&&(vt.flags|=2048,ch(9,qy(),dO.bind(null,S,f),null)),[x,C,o]}function dO(o,c){o.action=c}function gT(o){var c=jn(),f=Gt;if(f!==null)return pT(c,f,o);jn(),c=c.memoizedState,f=jn();var x=f.queue.dispatch;return f.memoizedState=o,[c,x,!1]}function ch(o,c,f,x){return o={tag:o,create:f,deps:x,inst:c,next:null},c=vt.updateQueue,c===null&&(c=E2(),vt.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=o.next=o:(x=f.next,f.next=o,o.next=x,c.lastEffect=o),o}function qy(){return{destroy:void 0,resource:void 0}}function mT(){return jn().memoizedState}function Vy(o,c,f,x){var S=ei();x=x===void 0?null:x,vt.flags|=o,S.memoizedState=ch(1|c,qy(),f,x)}function Yp(o,c,f,x){var S=jn();x=x===void 0?null:x;var C=S.memoizedState.inst;Gt!==null&&x!==null&&k2(x,Gt.memoizedState.deps)?S.memoizedState=ch(c,C,f,x):(vt.flags|=o,S.memoizedState=ch(1|c,C,f,x))}function bT(o,c){Vy(8390656,8,o,c)}function yT(o,c){Yp(2048,8,o,c)}function xT(o,c){return Yp(4,2,o,c)}function vT(o,c){return Yp(4,4,o,c)}function wT(o,c){if(typeof c=="function"){o=o();var f=c(o);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function kT(o,c,f){f=f!=null?f.concat([o]):null,Yp(4,4,wT.bind(null,c,o),f)}function j2(){}function DT(o,c){var f=jn();c=c===void 0?null:c;var x=f.memoizedState;return c!==null&&k2(c,x[1])?x[0]:(f.memoizedState=[o,c],o)}function _T(o,c){var f=jn();c=c===void 0?null:c;var x=f.memoizedState;if(c!==null&&k2(c,x[1]))return x[0];if(x=o(),iu){Me(!0);try{o()}finally{Me(!1)}}return f.memoizedState=[x,c],x}function F2(o,c,f){return f===void 0||(fl&1073741824)!==0?o.memoizedState=c:(o.memoizedState=f,o=EC(),vt.lanes|=o,vl|=o,f)}function AT(o,c,f,x){return bi(f,c)?f:sh.current!==null?(o=F2(o,f,x),bi(o,c)||(er=!0),o):(fl&42)===0?(er=!0,o.memoizedState=f):(o=EC(),vt.lanes|=o,vl|=o,c)}function ST(o,c,f,x,S){var C=B.p;B.p=C!==0&&8>C?C:8;var q=P.T,Z={};P.T=Z,M2(o,!1,c,f);try{var le=S(),Ae=P.S;if(Ae!==null&&Ae(Z,le),le!==null&&typeof le=="object"&&typeof le.then=="function"){var Oe=oO(le,x);Kp(o,c,Oe,ki(o))}else Kp(o,c,x,ki(o))}catch(Be){Kp(o,c,{then:function(){},status:"rejected",reason:Be},ki())}finally{B.p=C,P.T=q}}function hO(){}function I2(o,c,f,x){if(o.tag!==5)throw Error(n(476));var S=ET(o).queue;ST(o,S,c,ee,f===null?hO:function(){return TT(o),f(x)})}function ET(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:ee},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:f},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function TT(o){var c=ET(o).next.queue;Kp(o,c,{},ki())}function O2(){return Er(pg)}function CT(){return jn().memoizedState}function NT(){return jn().memoizedState}function fO(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var f=ki();o=dl(f);var x=hl(c,o,f);x!==null&&(Di(x,c,f),qp(x,c,f)),c={cache:h2()},o.payload=c;return}c=c.return}}function pO(o,c,f){var x=ki();f={lane:x,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},Xy(o)?RT(c,f):(f=n2(o,c,f,x),f!==null&&(Di(f,o,x),jT(f,c,x)))}function UT(o,c,f){var x=ki();Kp(o,c,f,x)}function Kp(o,c,f,x){var S={lane:x,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(Xy(o))RT(c,S);else{var C=o.alternate;if(o.lanes===0&&(C===null||C.lanes===0)&&(C=c.lastRenderedReducer,C!==null))try{var q=c.lastRenderedState,Z=C(q,f);if(S.hasEagerState=!0,S.eagerState=Z,bi(Z,q))return Cy(o,c,S,0),nn===null&&Ty(),!1}catch{}finally{}if(f=n2(o,c,S,x),f!==null)return Di(f,o,x),jT(f,c,x),!0}return!1}function M2(o,c,f,x){if(x={lane:2,revertLane:gw(),action:x,hasEagerState:!1,eagerState:null,next:null},Xy(o)){if(c)throw Error(n(479))}else c=n2(o,f,x,2),c!==null&&Di(c,o,2)}function Xy(o){var c=o.alternate;return o===vt||c!==null&&c===vt}function RT(o,c){oh=Py=!0;var f=o.pending;f===null?c.next=c:(c.next=f.next,f.next=c),o.pending=c}function jT(o,c,f){if((f&4194048)!==0){var x=c.lanes;x&=o.pendingLanes,f|=x,c.lanes=f,Ee(o,f)}}var Gy={readContext:Er,use:Wy,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useInsertionEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useSyncExternalStore:_n,useId:_n,useHostTransitionStatus:_n,useFormState:_n,useActionState:_n,useOptimistic:_n,useMemoCache:_n,useCacheRefresh:_n},FT={readContext:Er,use:Wy,useCallback:function(o,c){return ei().memoizedState=[o,c===void 0?null:c],o},useContext:Er,useEffect:bT,useImperativeHandle:function(o,c,f){f=f!=null?f.concat([o]):null,Vy(4194308,4,wT.bind(null,c,o),f)},useLayoutEffect:function(o,c){return Vy(4194308,4,o,c)},useInsertionEffect:function(o,c){Vy(4,2,o,c)},useMemo:function(o,c){var f=ei();c=c===void 0?null:c;var x=o();if(iu){Me(!0);try{o()}finally{Me(!1)}}return f.memoizedState=[x,c],x},useReducer:function(o,c,f){var x=ei();if(f!==void 0){var S=f(c);if(iu){Me(!0);try{f(c)}finally{Me(!1)}}}else S=c;return x.memoizedState=x.baseState=S,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:S},x.queue=o,o=o.dispatch=pO.bind(null,vt,o),[x.memoizedState,o]},useRef:function(o){var c=ei();return o={current:o},c.memoizedState=o},useState:function(o){o=U2(o);var c=o.queue,f=UT.bind(null,vt,c);return c.dispatch=f,[o.memoizedState,f]},useDebugValue:j2,useDeferredValue:function(o,c){var f=ei();return F2(f,o,c)},useTransition:function(){var o=U2(!1);return o=ST.bind(null,vt,o.queue,!0,!1),ei().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,f){var x=vt,S=ei();if(Ot){if(f===void 0)throw Error(n(407));f=f()}else{if(f=c(),nn===null)throw Error(n(349));(Ut&124)!==0||tT(x,c,f)}S.memoizedState=f;var C={value:f,getSnapshot:c};return S.queue=C,bT(rT.bind(null,x,C,o),[o]),x.flags|=2048,ch(9,qy(),nT.bind(null,x,C,f,c),null),f},useId:function(){var o=ei(),c=nn.identifierPrefix;if(Ot){var f=Vs,x=qs;f=(x&~(1<<32-ze(x)-1)).toString(32)+f,c="«"+c+"R"+f,f=zy++,0<f&&(c+="H"+f.toString(32)),c+="»"}else f=lO++,c="«"+c+"r"+f.toString(32)+"»";return o.memoizedState=c},useHostTransitionStatus:O2,useFormState:hT,useActionState:hT,useOptimistic:function(o){var c=ei();c.memoizedState=c.baseState=o;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=M2.bind(null,vt,!0,f),f.dispatch=c,[o,c]},useMemoCache:T2,useCacheRefresh:function(){return ei().memoizedState=fO.bind(null,vt)}},IT={readContext:Er,use:Wy,useCallback:DT,useContext:Er,useEffect:yT,useImperativeHandle:kT,useInsertionEffect:xT,useLayoutEffect:vT,useMemo:_T,useReducer:Hy,useRef:mT,useState:function(){return Hy($s)},useDebugValue:j2,useDeferredValue:function(o,c){var f=jn();return AT(f,Gt.memoizedState,o,c)},useTransition:function(){var o=Hy($s)[0],c=jn().memoizedState;return[typeof o=="boolean"?o:$p(o),c]},useSyncExternalStore:eT,useId:CT,useHostTransitionStatus:O2,useFormState:fT,useActionState:fT,useOptimistic:function(o,c){var f=jn();return sT(f,Gt,o,c)},useMemoCache:T2,useCacheRefresh:NT},gO={readContext:Er,use:Wy,useCallback:DT,useContext:Er,useEffect:yT,useImperativeHandle:kT,useInsertionEffect:xT,useLayoutEffect:vT,useMemo:_T,useReducer:N2,useRef:mT,useState:function(){return N2($s)},useDebugValue:j2,useDeferredValue:function(o,c){var f=jn();return Gt===null?F2(f,o,c):AT(f,Gt.memoizedState,o,c)},useTransition:function(){var o=N2($s)[0],c=jn().memoizedState;return[typeof o=="boolean"?o:$p(o),c]},useSyncExternalStore:eT,useId:CT,useHostTransitionStatus:O2,useFormState:gT,useActionState:gT,useOptimistic:function(o,c){var f=jn();return Gt!==null?sT(f,Gt,o,c):(f.baseState=o,[o,f.queue.dispatch])},useMemoCache:T2,useCacheRefresh:NT},uh=null,Qp=0;function $y(o){var c=Qp;return Qp+=1,uh===null&&(uh=[]),XE(uh,o,c)}function Zp(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function Yy(o,c){throw c.$$typeof===g?Error(n(525)):(o=Object.prototype.toString.call(c),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function OT(o){var c=o._init;return c(o._payload)}function MT(o){function c(we,me){if(o){var _e=we.deletions;_e===null?(we.deletions=[me],we.flags|=16):_e.push(me)}}function f(we,me){if(!o)return null;for(;me!==null;)c(we,me),me=me.sibling;return null}function x(we){for(var me=new Map;we!==null;)we.key!==null?me.set(we.key,we):me.set(we.index,we),we=we.sibling;return me}function S(we,me){return we=Hs(we,me),we.index=0,we.sibling=null,we}function C(we,me,_e){return we.index=_e,o?(_e=we.alternate,_e!==null?(_e=_e.index,_e<me?(we.flags|=67108866,me):_e):(we.flags|=67108866,me)):(we.flags|=1048576,me)}function q(we){return o&&we.alternate===null&&(we.flags|=67108866),we}function Z(we,me,_e,Le){return me===null||me.tag!==6?(me=i2(_e,we.mode,Le),me.return=we,me):(me=S(me,_e),me.return=we,me)}function le(we,me,_e,Le){var nt=_e.type;return nt===D?Oe(we,me,_e.props.children,Le,_e.key):me!==null&&(me.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===M&&OT(nt)===me.type)?(me=S(me,_e.props),Zp(me,_e),me.return=we,me):(me=Uy(_e.type,_e.key,_e.props,null,we.mode,Le),Zp(me,_e),me.return=we,me)}function Ae(we,me,_e,Le){return me===null||me.tag!==4||me.stateNode.containerInfo!==_e.containerInfo||me.stateNode.implementation!==_e.implementation?(me=a2(_e,we.mode,Le),me.return=we,me):(me=S(me,_e.children||[]),me.return=we,me)}function Oe(we,me,_e,Le,nt){return me===null||me.tag!==7?(me=Kc(_e,we.mode,Le,nt),me.return=we,me):(me=S(me,_e),me.return=we,me)}function Be(we,me,_e){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=i2(""+me,we.mode,_e),me.return=we,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case b:return _e=Uy(me.type,me.key,me.props,null,we.mode,_e),Zp(_e,me),_e.return=we,_e;case y:return me=a2(me,we.mode,_e),me.return=we,me;case M:var Le=me._init;return me=Le(me._payload),Be(we,me,_e)}if(X(me)||U(me))return me=Kc(me,we.mode,_e,null),me.return=we,me;if(typeof me.then=="function")return Be(we,$y(me),_e);if(me.$$typeof===A)return Be(we,Iy(we,me),_e);Yy(we,me)}return null}function Se(we,me,_e,Le){var nt=me!==null?me.key:null;if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return nt!==null?null:Z(we,me,""+_e,Le);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case b:return _e.key===nt?le(we,me,_e,Le):null;case y:return _e.key===nt?Ae(we,me,_e,Le):null;case M:return nt=_e._init,_e=nt(_e._payload),Se(we,me,_e,Le)}if(X(_e)||U(_e))return nt!==null?null:Oe(we,me,_e,Le,null);if(typeof _e.then=="function")return Se(we,me,$y(_e),Le);if(_e.$$typeof===A)return Se(we,me,Iy(we,_e),Le);Yy(we,_e)}return null}function Te(we,me,_e,Le,nt){if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return we=we.get(_e)||null,Z(me,we,""+Le,nt);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case b:return we=we.get(Le.key===null?_e:Le.key)||null,le(me,we,Le,nt);case y:return we=we.get(Le.key===null?_e:Le.key)||null,Ae(me,we,Le,nt);case M:var wt=Le._init;return Le=wt(Le._payload),Te(we,me,_e,Le,nt)}if(X(Le)||U(Le))return we=we.get(_e)||null,Oe(me,we,Le,nt,null);if(typeof Le.then=="function")return Te(we,me,_e,$y(Le),nt);if(Le.$$typeof===A)return Te(we,me,_e,Iy(me,Le),nt);Yy(me,Le)}return null}function dt(we,me,_e,Le){for(var nt=null,wt=null,it=me,ut=me=0,nr=null;it!==null&&ut<_e.length;ut++){it.index>ut?(nr=it,it=null):nr=it.sibling;var It=Se(we,it,_e[ut],Le);if(It===null){it===null&&(it=nr);break}o&&it&&It.alternate===null&&c(we,it),me=C(It,me,ut),wt===null?nt=It:wt.sibling=It,wt=It,it=nr}if(ut===_e.length)return f(we,it),Ot&&Zc(we,ut),nt;if(it===null){for(;ut<_e.length;ut++)it=Be(we,_e[ut],Le),it!==null&&(me=C(it,me,ut),wt===null?nt=it:wt.sibling=it,wt=it);return Ot&&Zc(we,ut),nt}for(it=x(it);ut<_e.length;ut++)nr=Te(it,we,ut,_e[ut],Le),nr!==null&&(o&&nr.alternate!==null&&it.delete(nr.key===null?ut:nr.key),me=C(nr,me,ut),wt===null?nt=nr:wt.sibling=nr,wt=nr);return o&&it.forEach(function(Cl){return c(we,Cl)}),Ot&&Zc(we,ut),nt}function lt(we,me,_e,Le){if(_e==null)throw Error(n(151));for(var nt=null,wt=null,it=me,ut=me=0,nr=null,It=_e.next();it!==null&&!It.done;ut++,It=_e.next()){it.index>ut?(nr=it,it=null):nr=it.sibling;var Cl=Se(we,it,It.value,Le);if(Cl===null){it===null&&(it=nr);break}o&&it&&Cl.alternate===null&&c(we,it),me=C(Cl,me,ut),wt===null?nt=Cl:wt.sibling=Cl,wt=Cl,it=nr}if(It.done)return f(we,it),Ot&&Zc(we,ut),nt;if(it===null){for(;!It.done;ut++,It=_e.next())It=Be(we,It.value,Le),It!==null&&(me=C(It,me,ut),wt===null?nt=It:wt.sibling=It,wt=It);return Ot&&Zc(we,ut),nt}for(it=x(it);!It.done;ut++,It=_e.next())It=Te(it,we,ut,It.value,Le),It!==null&&(o&&It.alternate!==null&&it.delete(It.key===null?ut:It.key),me=C(It,me,ut),wt===null?nt=It:wt.sibling=It,wt=It);return o&&it.forEach(function(mM){return c(we,mM)}),Ot&&Zc(we,ut),nt}function Yt(we,me,_e,Le){if(typeof _e=="object"&&_e!==null&&_e.type===D&&_e.key===null&&(_e=_e.props.children),typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case b:e:{for(var nt=_e.key;me!==null;){if(me.key===nt){if(nt=_e.type,nt===D){if(me.tag===7){f(we,me.sibling),Le=S(me,_e.props.children),Le.return=we,we=Le;break e}}else if(me.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===M&&OT(nt)===me.type){f(we,me.sibling),Le=S(me,_e.props),Zp(Le,_e),Le.return=we,we=Le;break e}f(we,me);break}else c(we,me);me=me.sibling}_e.type===D?(Le=Kc(_e.props.children,we.mode,Le,_e.key),Le.return=we,we=Le):(Le=Uy(_e.type,_e.key,_e.props,null,we.mode,Le),Zp(Le,_e),Le.return=we,we=Le)}return q(we);case y:e:{for(nt=_e.key;me!==null;){if(me.key===nt)if(me.tag===4&&me.stateNode.containerInfo===_e.containerInfo&&me.stateNode.implementation===_e.implementation){f(we,me.sibling),Le=S(me,_e.children||[]),Le.return=we,we=Le;break e}else{f(we,me);break}else c(we,me);me=me.sibling}Le=a2(_e,we.mode,Le),Le.return=we,we=Le}return q(we);case M:return nt=_e._init,_e=nt(_e._payload),Yt(we,me,_e,Le)}if(X(_e))return dt(we,me,_e,Le);if(U(_e)){if(nt=U(_e),typeof nt!="function")throw Error(n(150));return _e=nt.call(_e),lt(we,me,_e,Le)}if(typeof _e.then=="function")return Yt(we,me,$y(_e),Le);if(_e.$$typeof===A)return Yt(we,me,Iy(we,_e),Le);Yy(we,_e)}return typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint"?(_e=""+_e,me!==null&&me.tag===6?(f(we,me.sibling),Le=S(me,_e),Le.return=we,we=Le):(f(we,me),Le=i2(_e,we.mode,Le),Le.return=we,we=Le),q(we)):f(we,me)}return function(we,me,_e,Le){try{Qp=0;var nt=Yt(we,me,_e,Le);return uh=null,nt}catch(it){if(it===Wp||it===My)throw it;var wt=yi(29,it,null,we.mode);return wt.lanes=Le,wt.return=we,wt}finally{}}}var dh=MT(!0),LT=MT(!1),ra=J(null),rs=null;function pl(o){var c=o.alternate;z(Hn,Hn.current&1),z(ra,o),rs===null&&(c===null||sh.current!==null||c.memoizedState!==null)&&(rs=o)}function BT(o){if(o.tag===22){if(z(Hn,Hn.current),z(ra,o),rs===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(rs=o)}}else gl()}function gl(){z(Hn,Hn.current),z(ra,ra.current)}function Ys(o){ie(ra),rs===o&&(rs=null),ie(Hn)}var Hn=J(0);function Ky(o){for(var c=o;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||Ew(f)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function L2(o,c,f,x){c=o.memoizedState,f=f(x,c),f=f==null?c:h({},c,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var B2={enqueueSetState:function(o,c,f){o=o._reactInternals;var x=ki(),S=dl(x);S.payload=c,f!=null&&(S.callback=f),c=hl(o,S,x),c!==null&&(Di(c,o,x),qp(c,o,x))},enqueueReplaceState:function(o,c,f){o=o._reactInternals;var x=ki(),S=dl(x);S.tag=1,S.payload=c,f!=null&&(S.callback=f),c=hl(o,S,x),c!==null&&(Di(c,o,x),qp(c,o,x))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var f=ki(),x=dl(f);x.tag=2,c!=null&&(x.callback=c),c=hl(o,x,f),c!==null&&(Di(c,o,f),qp(c,o,f))}};function PT(o,c,f,x,S,C,q){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(x,C,q):c.prototype&&c.prototype.isPureReactComponent?!Fp(f,x)||!Fp(S,C):!0}function zT(o,c,f,x){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,x),c.state!==o&&B2.enqueueReplaceState(c,c.state,null)}function au(o,c){var f=c;if("ref"in c){f={};for(var x in c)x!=="ref"&&(f[x]=c[x])}if(o=o.defaultProps){f===c&&(f=h({},f));for(var S in o)f[S]===void 0&&(f[S]=o[S])}return f}var Qy=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function WT(o){Qy(o)}function HT(o){console.error(o)}function qT(o){Qy(o)}function Zy(o,c){try{var f=o.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(x){setTimeout(function(){throw x})}}function VT(o,c,f){try{var x=o.onCaughtError;x(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function P2(o,c,f){return f=dl(f),f.tag=3,f.payload={element:null},f.callback=function(){Zy(o,c)},f}function XT(o){return o=dl(o),o.tag=3,o}function GT(o,c,f,x){var S=f.type.getDerivedStateFromError;if(typeof S=="function"){var C=x.value;o.payload=function(){return S(C)},o.callback=function(){VT(c,f,x)}}var q=f.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(o.callback=function(){VT(c,f,x),typeof S!="function"&&(wl===null?wl=new Set([this]):wl.add(this));var Z=x.stack;this.componentDidCatch(x.value,{componentStack:Z!==null?Z:""})})}function mO(o,c,f,x,S){if(f.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(c=f.alternate,c!==null&&Bp(c,f,S,!0),f=ra.current,f!==null){switch(f.tag){case 13:return rs===null?uw():f.alternate===null&&kn===0&&(kn=3),f.flags&=-257,f.flags|=65536,f.lanes=S,x===g2?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([x]):c.add(x),hw(o,x,S)),!1;case 22:return f.flags|=65536,x===g2?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([x])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([x]):f.add(x)),hw(o,x,S)),!1}throw Error(n(435,f.tag))}return hw(o,x,S),uw(),!1}if(Ot)return c=ra.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=S,x!==l2&&(o=Error(n(422),{cause:x}),Lp(Ji(o,f)))):(x!==l2&&(c=Error(n(423),{cause:x}),Lp(Ji(c,f))),o=o.current.alternate,o.flags|=65536,S&=-S,o.lanes|=S,x=Ji(x,f),S=P2(o.stateNode,x,S),y2(o,S),kn!==4&&(kn=2)),!1;var C=Error(n(520),{cause:x});if(C=Ji(C,f),ag===null?ag=[C]:ag.push(C),kn!==4&&(kn=2),c===null)return!0;x=Ji(x,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,o=S&-S,f.lanes|=o,o=P2(f.stateNode,x,o),y2(f,o),!1;case 1:if(c=f.type,C=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(wl===null||!wl.has(C))))return f.flags|=65536,S&=-S,f.lanes|=S,S=XT(S),GT(S,o,f,x),y2(f,S),!1}f=f.return}while(f!==null);return!1}var $T=Error(n(461)),er=!1;function dr(o,c,f,x){c.child=o===null?LT(c,null,f,x):dh(c,o.child,f,x)}function YT(o,c,f,x,S){f=f.render;var C=c.ref;if("ref"in x){var q={};for(var Z in x)Z!=="ref"&&(q[Z]=x[Z])}else q=x;return nu(c),x=D2(o,c,f,q,C,S),Z=_2(),o!==null&&!er?(A2(o,c,S),Ks(o,c,S)):(Ot&&Z&&s2(c),c.flags|=1,dr(o,c,x,S),c.child)}function KT(o,c,f,x,S){if(o===null){var C=f.type;return typeof C=="function"&&!r2(C)&&C.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=C,QT(o,c,C,x,S)):(o=Uy(f.type,null,x,c,c.mode,S),o.ref=c.ref,o.return=c,c.child=o)}if(C=o.child,!$2(o,S)){var q=C.memoizedProps;if(f=f.compare,f=f!==null?f:Fp,f(q,x)&&o.ref===c.ref)return Ks(o,c,S)}return c.flags|=1,o=Hs(C,x),o.ref=c.ref,o.return=c,c.child=o}function QT(o,c,f,x,S){if(o!==null){var C=o.memoizedProps;if(Fp(C,x)&&o.ref===c.ref)if(er=!1,c.pendingProps=x=C,$2(o,S))(o.flags&131072)!==0&&(er=!0);else return c.lanes=o.lanes,Ks(o,c,S)}return z2(o,c,f,x,S)}function ZT(o,c,f){var x=c.pendingProps,S=x.children,C=o!==null?o.memoizedState:null;if(x.mode==="hidden"){if((c.flags&128)!==0){if(x=C!==null?C.baseLanes|f:f,o!==null){for(S=c.child=o.child,C=0;S!==null;)C=C|S.lanes|S.childLanes,S=S.sibling;c.childLanes=C&~x}else c.childLanes=0,c.child=null;return JT(o,c,x,f)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Oy(c,C!==null?C.cachePool:null),C!==null?QE(c,C):v2(),BT(c);else return c.lanes=c.childLanes=536870912,JT(o,c,C!==null?C.baseLanes|f:f,f)}else C!==null?(Oy(c,C.cachePool),QE(c,C),gl(),c.memoizedState=null):(o!==null&&Oy(c,null),v2(),gl());return dr(o,c,S,f),c.child}function JT(o,c,f,x){var S=p2();return S=S===null?null:{parent:Wn._currentValue,pool:S},c.memoizedState={baseLanes:f,cachePool:S},o!==null&&Oy(c,null),v2(),BT(c),o!==null&&Bp(o,c,x,!0),null}function Jy(o,c){var f=c.ref;if(f===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(o===null||o.ref!==f)&&(c.flags|=4194816)}}function z2(o,c,f,x,S){return nu(c),f=D2(o,c,f,x,void 0,S),x=_2(),o!==null&&!er?(A2(o,c,S),Ks(o,c,S)):(Ot&&x&&s2(c),c.flags|=1,dr(o,c,f,S),c.child)}function eC(o,c,f,x,S,C){return nu(c),c.updateQueue=null,f=JE(c,x,f,S),ZE(o),x=_2(),o!==null&&!er?(A2(o,c,C),Ks(o,c,C)):(Ot&&x&&s2(c),c.flags|=1,dr(o,c,f,C),c.child)}function tC(o,c,f,x,S){if(nu(c),c.stateNode===null){var C=th,q=f.contextType;typeof q=="object"&&q!==null&&(C=Er(q)),C=new f(x,C),c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=B2,c.stateNode=C,C._reactInternals=c,C=c.stateNode,C.props=x,C.state=c.memoizedState,C.refs={},m2(c),q=f.contextType,C.context=typeof q=="object"&&q!==null?Er(q):th,C.state=c.memoizedState,q=f.getDerivedStateFromProps,typeof q=="function"&&(L2(c,f,q,x),C.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(q=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),q!==C.state&&B2.enqueueReplaceState(C,C.state,null),Xp(c,x,C,S),Vp(),C.state=c.memoizedState),typeof C.componentDidMount=="function"&&(c.flags|=4194308),x=!0}else if(o===null){C=c.stateNode;var Z=c.memoizedProps,le=au(f,Z);C.props=le;var Ae=C.context,Oe=f.contextType;q=th,typeof Oe=="object"&&Oe!==null&&(q=Er(Oe));var Be=f.getDerivedStateFromProps;Oe=typeof Be=="function"||typeof C.getSnapshotBeforeUpdate=="function",Z=c.pendingProps!==Z,Oe||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(Z||Ae!==q)&&zT(c,C,x,q),ul=!1;var Se=c.memoizedState;C.state=Se,Xp(c,x,C,S),Vp(),Ae=c.memoizedState,Z||Se!==Ae||ul?(typeof Be=="function"&&(L2(c,f,Be,x),Ae=c.memoizedState),(le=ul||PT(c,f,le,x,Se,Ae,q))?(Oe||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(c.flags|=4194308)):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=Ae),C.props=x,C.state=Ae,C.context=q,x=le):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{C=c.stateNode,b2(o,c),q=c.memoizedProps,Oe=au(f,q),C.props=Oe,Be=c.pendingProps,Se=C.context,Ae=f.contextType,le=th,typeof Ae=="object"&&Ae!==null&&(le=Er(Ae)),Z=f.getDerivedStateFromProps,(Ae=typeof Z=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(q!==Be||Se!==le)&&zT(c,C,x,le),ul=!1,Se=c.memoizedState,C.state=Se,Xp(c,x,C,S),Vp();var Te=c.memoizedState;q!==Be||Se!==Te||ul||o!==null&&o.dependencies!==null&&Fy(o.dependencies)?(typeof Z=="function"&&(L2(c,f,Z,x),Te=c.memoizedState),(Oe=ul||PT(c,f,Oe,x,Se,Te,le)||o!==null&&o.dependencies!==null&&Fy(o.dependencies))?(Ae||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(x,Te,le),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(x,Te,le)),typeof C.componentDidUpdate=="function"&&(c.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof C.componentDidUpdate!="function"||q===o.memoizedProps&&Se===o.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||q===o.memoizedProps&&Se===o.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=Te),C.props=x,C.state=Te,C.context=le,x=Oe):(typeof C.componentDidUpdate!="function"||q===o.memoizedProps&&Se===o.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||q===o.memoizedProps&&Se===o.memoizedState||(c.flags|=1024),x=!1)}return C=x,Jy(o,c),x=(c.flags&128)!==0,C||x?(C=c.stateNode,f=x&&typeof f.getDerivedStateFromError!="function"?null:C.render(),c.flags|=1,o!==null&&x?(c.child=dh(c,o.child,null,S),c.child=dh(c,null,f,S)):dr(o,c,f,S),c.memoizedState=C.state,o=c.child):o=Ks(o,c,S),o}function nC(o,c,f,x){return Mp(),c.flags|=256,dr(o,c,f,x),c.child}var W2={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function H2(o){return{baseLanes:o,cachePool:HE()}}function q2(o,c,f){return o=o!==null?o.childLanes&~f:0,c&&(o|=ia),o}function rC(o,c,f){var x=c.pendingProps,S=!1,C=(c.flags&128)!==0,q;if((q=C)||(q=o!==null&&o.memoizedState===null?!1:(Hn.current&2)!==0),q&&(S=!0,c.flags&=-129),q=(c.flags&32)!==0,c.flags&=-33,o===null){if(Ot){if(S?pl(c):gl(),Ot){var Z=wn,le;if(le=Z){e:{for(le=Z,Z=ns;le.nodeType!==8;){if(!Z){Z=null;break e}if(le=Fa(le.nextSibling),le===null){Z=null;break e}}Z=le}Z!==null?(c.memoizedState={dehydrated:Z,treeContext:Qc!==null?{id:qs,overflow:Vs}:null,retryLane:536870912,hydrationErrors:null},le=yi(18,null,null,0),le.stateNode=Z,le.return=c,c.child=le,Or=c,wn=null,le=!0):le=!1}le||eu(c)}if(Z=c.memoizedState,Z!==null&&(Z=Z.dehydrated,Z!==null))return Ew(Z)?c.lanes=32:c.lanes=536870912,null;Ys(c)}return Z=x.children,x=x.fallback,S?(gl(),S=c.mode,Z=ex({mode:"hidden",children:Z},S),x=Kc(x,S,f,null),Z.return=c,x.return=c,Z.sibling=x,c.child=Z,S=c.child,S.memoizedState=H2(f),S.childLanes=q2(o,q,f),c.memoizedState=W2,x):(pl(c),V2(c,Z))}if(le=o.memoizedState,le!==null&&(Z=le.dehydrated,Z!==null)){if(C)c.flags&256?(pl(c),c.flags&=-257,c=X2(o,c,f)):c.memoizedState!==null?(gl(),c.child=o.child,c.flags|=128,c=null):(gl(),S=x.fallback,Z=c.mode,x=ex({mode:"visible",children:x.children},Z),S=Kc(S,Z,f,null),S.flags|=2,x.return=c,S.return=c,x.sibling=S,c.child=x,dh(c,o.child,null,f),x=c.child,x.memoizedState=H2(f),x.childLanes=q2(o,q,f),c.memoizedState=W2,c=S);else if(pl(c),Ew(Z)){if(q=Z.nextSibling&&Z.nextSibling.dataset,q)var Ae=q.dgst;q=Ae,x=Error(n(419)),x.stack="",x.digest=q,Lp({value:x,source:null,stack:null}),c=X2(o,c,f)}else if(er||Bp(o,c,f,!1),q=(f&o.childLanes)!==0,er||q){if(q=nn,q!==null&&(x=f&-f,x=(x&42)!==0?1:Ve(x),x=(x&(q.suspendedLanes|f))!==0?0:x,x!==0&&x!==le.retryLane))throw le.retryLane=x,eh(o,x),Di(q,o,x),$T;Z.data==="$?"||uw(),c=X2(o,c,f)}else Z.data==="$?"?(c.flags|=192,c.child=o.child,c=null):(o=le.treeContext,wn=Fa(Z.nextSibling),Or=c,Ot=!0,Jc=null,ns=!1,o!==null&&(ta[na++]=qs,ta[na++]=Vs,ta[na++]=Qc,qs=o.id,Vs=o.overflow,Qc=c),c=V2(c,x.children),c.flags|=4096);return c}return S?(gl(),S=x.fallback,Z=c.mode,le=o.child,Ae=le.sibling,x=Hs(le,{mode:"hidden",children:x.children}),x.subtreeFlags=le.subtreeFlags&65011712,Ae!==null?S=Hs(Ae,S):(S=Kc(S,Z,f,null),S.flags|=2),S.return=c,x.return=c,x.sibling=S,c.child=x,x=S,S=c.child,Z=o.child.memoizedState,Z===null?Z=H2(f):(le=Z.cachePool,le!==null?(Ae=Wn._currentValue,le=le.parent!==Ae?{parent:Ae,pool:Ae}:le):le=HE(),Z={baseLanes:Z.baseLanes|f,cachePool:le}),S.memoizedState=Z,S.childLanes=q2(o,q,f),c.memoizedState=W2,x):(pl(c),f=o.child,o=f.sibling,f=Hs(f,{mode:"visible",children:x.children}),f.return=c,f.sibling=null,o!==null&&(q=c.deletions,q===null?(c.deletions=[o],c.flags|=16):q.push(o)),c.child=f,c.memoizedState=null,f)}function V2(o,c){return c=ex({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function ex(o,c){return o=yi(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function X2(o,c,f){return dh(c,o.child,null,f),o=V2(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function iC(o,c,f){o.lanes|=c;var x=o.alternate;x!==null&&(x.lanes|=c),u2(o.return,c,f)}function G2(o,c,f,x,S){var C=o.memoizedState;C===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:f,tailMode:S}:(C.isBackwards=c,C.rendering=null,C.renderingStartTime=0,C.last=x,C.tail=f,C.tailMode=S)}function aC(o,c,f){var x=c.pendingProps,S=x.revealOrder,C=x.tail;if(dr(o,c,x.children,f),x=Hn.current,(x&2)!==0)x=x&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&iC(o,f,c);else if(o.tag===19)iC(o,f,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}x&=1}switch(z(Hn,x),S){case"forwards":for(f=c.child,S=null;f!==null;)o=f.alternate,o!==null&&Ky(o)===null&&(S=f),f=f.sibling;f=S,f===null?(S=c.child,c.child=null):(S=f.sibling,f.sibling=null),G2(c,!1,S,f,C);break;case"backwards":for(f=null,S=c.child,c.child=null;S!==null;){if(o=S.alternate,o!==null&&Ky(o)===null){c.child=S;break}o=S.sibling,S.sibling=f,f=S,S=o}G2(c,!0,f,null,C);break;case"together":G2(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Ks(o,c,f){if(o!==null&&(c.dependencies=o.dependencies),vl|=c.lanes,(f&c.childLanes)===0)if(o!==null){if(Bp(o,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(n(153));if(c.child!==null){for(o=c.child,f=Hs(o,o.pendingProps),c.child=f,f.return=c;o.sibling!==null;)o=o.sibling,f=f.sibling=Hs(o,o.pendingProps),f.return=c;f.sibling=null}return c.child}function $2(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Fy(o)))}function bO(o,c,f){switch(c.tag){case 3:Pe(c,c.stateNode.containerInfo),cl(c,Wn,o.memoizedState.cache),Mp();break;case 27:case 5:Ue(c);break;case 4:Pe(c,c.stateNode.containerInfo);break;case 10:cl(c,c.type,c.memoizedProps.value);break;case 13:var x=c.memoizedState;if(x!==null)return x.dehydrated!==null?(pl(c),c.flags|=128,null):(f&c.child.childLanes)!==0?rC(o,c,f):(pl(c),o=Ks(o,c,f),o!==null?o.sibling:null);pl(c);break;case 19:var S=(o.flags&128)!==0;if(x=(f&c.childLanes)!==0,x||(Bp(o,c,f,!1),x=(f&c.childLanes)!==0),S){if(x)return aC(o,c,f);c.flags|=128}if(S=c.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),z(Hn,Hn.current),x)break;return null;case 22:case 23:return c.lanes=0,ZT(o,c,f);case 24:cl(c,Wn,o.memoizedState.cache)}return Ks(o,c,f)}function sC(o,c,f){if(o!==null)if(o.memoizedProps!==c.pendingProps)er=!0;else{if(!$2(o,f)&&(c.flags&128)===0)return er=!1,bO(o,c,f);er=(o.flags&131072)!==0}else er=!1,Ot&&(c.flags&1048576)!==0&&OE(c,jy,c.index);switch(c.lanes=0,c.tag){case 16:e:{o=c.pendingProps;var x=c.elementType,S=x._init;if(x=S(x._payload),c.type=x,typeof x=="function")r2(x)?(o=au(x,o),c.tag=1,c=tC(null,c,x,o,f)):(c.tag=0,c=z2(null,c,x,o,f));else{if(x!=null){if(S=x.$$typeof,S===N){c.tag=11,c=YT(null,c,x,o,f);break e}else if(S===R){c.tag=14,c=KT(null,c,x,o,f);break e}}throw c=j(x)||x,Error(n(306,c,""))}}return c;case 0:return z2(o,c,c.type,c.pendingProps,f);case 1:return x=c.type,S=au(x,c.pendingProps),tC(o,c,x,S,f);case 3:e:{if(Pe(c,c.stateNode.containerInfo),o===null)throw Error(n(387));x=c.pendingProps;var C=c.memoizedState;S=C.element,b2(o,c),Xp(c,x,null,f);var q=c.memoizedState;if(x=q.cache,cl(c,Wn,x),x!==C.cache&&d2(c,[Wn],f,!0),Vp(),x=q.element,C.isDehydrated)if(C={element:x,isDehydrated:!1,cache:q.cache},c.updateQueue.baseState=C,c.memoizedState=C,c.flags&256){c=nC(o,c,x,f);break e}else if(x!==S){S=Ji(Error(n(424)),c),Lp(S),c=nC(o,c,x,f);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(wn=Fa(o.firstChild),Or=c,Ot=!0,Jc=null,ns=!0,f=LT(c,null,x,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Mp(),x===S){c=Ks(o,c,f);break e}dr(o,c,x,f)}c=c.child}return c;case 26:return Jy(o,c),o===null?(f=u3(c.type,null,c.pendingProps,null))?c.memoizedState=f:Ot||(f=c.type,o=c.pendingProps,x=px(je.current).createElement(f),x[on]=c,x[un]=o,fr(x,f,o),Jn(x),c.stateNode=x):c.memoizedState=u3(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return Ue(c),o===null&&Ot&&(x=c.stateNode=o3(c.type,c.pendingProps,je.current),Or=c,ns=!0,S=wn,_l(c.type)?(Tw=S,wn=Fa(x.firstChild)):wn=S),dr(o,c,c.pendingProps.children,f),Jy(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&Ot&&((S=x=wn)&&(x=VO(x,c.type,c.pendingProps,ns),x!==null?(c.stateNode=x,Or=c,wn=Fa(x.firstChild),ns=!1,S=!0):S=!1),S||eu(c)),Ue(c),S=c.type,C=c.pendingProps,q=o!==null?o.memoizedProps:null,x=C.children,_w(S,C)?x=null:q!==null&&_w(S,q)&&(c.flags|=32),c.memoizedState!==null&&(S=D2(o,c,cO,null,null,f),pg._currentValue=S),Jy(o,c),dr(o,c,x,f),c.child;case 6:return o===null&&Ot&&((o=f=wn)&&(f=XO(f,c.pendingProps,ns),f!==null?(c.stateNode=f,Or=c,wn=null,o=!0):o=!1),o||eu(c)),null;case 13:return rC(o,c,f);case 4:return Pe(c,c.stateNode.containerInfo),x=c.pendingProps,o===null?c.child=dh(c,null,x,f):dr(o,c,x,f),c.child;case 11:return YT(o,c,c.type,c.pendingProps,f);case 7:return dr(o,c,c.pendingProps,f),c.child;case 8:return dr(o,c,c.pendingProps.children,f),c.child;case 12:return dr(o,c,c.pendingProps.children,f),c.child;case 10:return x=c.pendingProps,cl(c,c.type,x.value),dr(o,c,x.children,f),c.child;case 9:return S=c.type._context,x=c.pendingProps.children,nu(c),S=Er(S),x=x(S),c.flags|=1,dr(o,c,x,f),c.child;case 14:return KT(o,c,c.type,c.pendingProps,f);case 15:return QT(o,c,c.type,c.pendingProps,f);case 19:return aC(o,c,f);case 31:return x=c.pendingProps,f=c.mode,x={mode:x.mode,children:x.children},o===null?(f=ex(x,f),f.ref=c.ref,c.child=f,f.return=c,c=f):(f=Hs(o.child,x),f.ref=c.ref,c.child=f,f.return=c,c=f),c;case 22:return ZT(o,c,f);case 24:return nu(c),x=Er(Wn),o===null?(S=p2(),S===null&&(S=nn,C=h2(),S.pooledCache=C,C.refCount++,C!==null&&(S.pooledCacheLanes|=f),S=C),c.memoizedState={parent:x,cache:S},m2(c),cl(c,Wn,S)):((o.lanes&f)!==0&&(b2(o,c),Xp(c,null,null,f),Vp()),S=o.memoizedState,C=c.memoizedState,S.parent!==x?(S={parent:x,cache:x},c.memoizedState=S,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=S),cl(c,Wn,x)):(x=C.cache,cl(c,Wn,x),x!==S.cache&&d2(c,[Wn],f,!0))),dr(o,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}function Qs(o){o.flags|=4}function oC(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!g3(c)){if(c=ra.current,c!==null&&((Ut&4194048)===Ut?rs!==null:(Ut&62914560)!==Ut&&(Ut&536870912)===0||c!==rs))throw Hp=g2,qE;o.flags|=8192}}function tx(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?gi():536870912,o.lanes|=c,gh|=c)}function Jp(o,c){if(!Ot)switch(o.tailMode){case"hidden":c=o.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:x.sibling=null}}function bn(o){var c=o.alternate!==null&&o.alternate.child===o.child,f=0,x=0;if(c)for(var S=o.child;S!==null;)f|=S.lanes|S.childLanes,x|=S.subtreeFlags&65011712,x|=S.flags&65011712,S.return=o,S=S.sibling;else for(S=o.child;S!==null;)f|=S.lanes|S.childLanes,x|=S.subtreeFlags,x|=S.flags,S.return=o,S=S.sibling;return o.subtreeFlags|=x,o.childLanes=f,c}function yO(o,c,f){var x=c.pendingProps;switch(o2(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(c),null;case 1:return bn(c),null;case 3:return f=c.stateNode,x=null,o!==null&&(x=o.memoizedState.cache),c.memoizedState.cache!==x&&(c.flags|=2048),Gs(Wn),fe(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(Op(c)?Qs(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,BE())),bn(c),null;case 26:return f=c.memoizedState,o===null?(Qs(c),f!==null?(bn(c),oC(c,f)):(bn(c),c.flags&=-16777217)):f?f!==o.memoizedState?(Qs(c),bn(c),oC(c,f)):(bn(c),c.flags&=-16777217):(o.memoizedProps!==x&&Qs(c),bn(c),c.flags&=-16777217),null;case 27:be(c),f=je.current;var S=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==x&&Qs(c);else{if(!x){if(c.stateNode===null)throw Error(n(166));return bn(c),null}o=ge.current,Op(c)?ME(c):(o=o3(S,x,f),c.stateNode=o,Qs(c))}return bn(c),null;case 5:if(be(c),f=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==x&&Qs(c);else{if(!x){if(c.stateNode===null)throw Error(n(166));return bn(c),null}if(o=ge.current,Op(c))ME(c);else{switch(S=px(je.current),o){case 1:o=S.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:o=S.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":o=S.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":o=S.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":o=S.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof x.is=="string"?S.createElement("select",{is:x.is}):S.createElement("select"),x.multiple?o.multiple=!0:x.size&&(o.size=x.size);break;default:o=typeof x.is=="string"?S.createElement(f,{is:x.is}):S.createElement(f)}}o[on]=c,o[un]=x;e:for(S=c.child;S!==null;){if(S.tag===5||S.tag===6)o.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===c)break e;for(;S.sibling===null;){if(S.return===null||S.return===c)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}c.stateNode=o;e:switch(fr(o,f,x),f){case"button":case"input":case"select":case"textarea":o=!!x.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Qs(c)}}return bn(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==x&&Qs(c);else{if(typeof x!="string"&&c.stateNode===null)throw Error(n(166));if(o=je.current,Op(c)){if(o=c.stateNode,f=c.memoizedProps,x=null,S=Or,S!==null)switch(S.tag){case 27:case 5:x=S.memoizedProps}o[on]=c,o=!!(o.nodeValue===f||x!==null&&x.suppressHydrationWarning===!0||e3(o.nodeValue,f)),o||eu(c)}else o=px(o).createTextNode(x),o[on]=c,c.stateNode=o}return bn(c),null;case 13:if(x=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(S=Op(c),x!==null&&x.dehydrated!==null){if(o===null){if(!S)throw Error(n(318));if(S=c.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[on]=c}else Mp(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;bn(c),S=!1}else S=BE(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=S),S=!0;if(!S)return c.flags&256?(Ys(c),c):(Ys(c),null)}if(Ys(c),(c.flags&128)!==0)return c.lanes=f,c;if(f=x!==null,o=o!==null&&o.memoizedState!==null,f){x=c.child,S=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(S=x.alternate.memoizedState.cachePool.pool);var C=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(C=x.memoizedState.cachePool.pool),C!==S&&(x.flags|=2048)}return f!==o&&f&&(c.child.flags|=8192),tx(c,c.updateQueue),bn(c),null;case 4:return fe(),o===null&&xw(c.stateNode.containerInfo),bn(c),null;case 10:return Gs(c.type),bn(c),null;case 19:if(ie(Hn),S=c.memoizedState,S===null)return bn(c),null;if(x=(c.flags&128)!==0,C=S.rendering,C===null)if(x)Jp(S,!1);else{if(kn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(C=Ky(o),C!==null){for(c.flags|=128,Jp(S,!1),o=C.updateQueue,c.updateQueue=o,tx(c,o),c.subtreeFlags=0,o=f,f=c.child;f!==null;)IE(f,o),f=f.sibling;return z(Hn,Hn.current&1|2),c.child}o=o.sibling}S.tail!==null&&re()>ix&&(c.flags|=128,x=!0,Jp(S,!1),c.lanes=4194304)}else{if(!x)if(o=Ky(C),o!==null){if(c.flags|=128,x=!0,o=o.updateQueue,c.updateQueue=o,tx(c,o),Jp(S,!0),S.tail===null&&S.tailMode==="hidden"&&!C.alternate&&!Ot)return bn(c),null}else 2*re()-S.renderingStartTime>ix&&f!==536870912&&(c.flags|=128,x=!0,Jp(S,!1),c.lanes=4194304);S.isBackwards?(C.sibling=c.child,c.child=C):(o=S.last,o!==null?o.sibling=C:c.child=C,S.last=C)}return S.tail!==null?(c=S.tail,S.rendering=c,S.tail=c.sibling,S.renderingStartTime=re(),c.sibling=null,o=Hn.current,z(Hn,x?o&1|2:o&1),c):(bn(c),null);case 22:case 23:return Ys(c),w2(),x=c.memoizedState!==null,o!==null?o.memoizedState!==null!==x&&(c.flags|=8192):x&&(c.flags|=8192),x?(f&536870912)!==0&&(c.flags&128)===0&&(bn(c),c.subtreeFlags&6&&(c.flags|=8192)):bn(c),f=c.updateQueue,f!==null&&tx(c,f.retryQueue),f=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),x=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),x!==f&&(c.flags|=2048),o!==null&&ie(ru),null;case 24:return f=null,o!==null&&(f=o.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),Gs(Wn),bn(c),null;case 25:return null;case 30:return null}throw Error(n(156,c.tag))}function xO(o,c){switch(o2(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Gs(Wn),fe(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return be(c),null;case 13:if(Ys(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Mp()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return ie(Hn),null;case 4:return fe(),null;case 10:return Gs(c.type),null;case 22:case 23:return Ys(c),w2(),o!==null&&ie(ru),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return Gs(Wn),null;case 25:return null;default:return null}}function lC(o,c){switch(o2(c),c.tag){case 3:Gs(Wn),fe();break;case 26:case 27:case 5:be(c);break;case 4:fe();break;case 13:Ys(c);break;case 19:ie(Hn);break;case 10:Gs(c.type);break;case 22:case 23:Ys(c),w2(),o!==null&&ie(ru);break;case 24:Gs(Wn)}}function eg(o,c){try{var f=c.updateQueue,x=f!==null?f.lastEffect:null;if(x!==null){var S=x.next;f=S;do{if((f.tag&o)===o){x=void 0;var C=f.create,q=f.inst;x=C(),q.destroy=x}f=f.next}while(f!==S)}}catch(Z){en(c,c.return,Z)}}function ml(o,c,f){try{var x=c.updateQueue,S=x!==null?x.lastEffect:null;if(S!==null){var C=S.next;x=C;do{if((x.tag&o)===o){var q=x.inst,Z=q.destroy;if(Z!==void 0){q.destroy=void 0,S=c;var le=f,Ae=Z;try{Ae()}catch(Oe){en(S,le,Oe)}}}x=x.next}while(x!==C)}}catch(Oe){en(c,c.return,Oe)}}function cC(o){var c=o.updateQueue;if(c!==null){var f=o.stateNode;try{KE(c,f)}catch(x){en(o,o.return,x)}}}function uC(o,c,f){f.props=au(o.type,o.memoizedProps),f.state=o.memoizedState;try{f.componentWillUnmount()}catch(x){en(o,c,x)}}function tg(o,c){try{var f=o.ref;if(f!==null){switch(o.tag){case 26:case 27:case 5:var x=o.stateNode;break;case 30:x=o.stateNode;break;default:x=o.stateNode}typeof f=="function"?o.refCleanup=f(x):f.current=x}}catch(S){en(o,c,S)}}function is(o,c){var f=o.ref,x=o.refCleanup;if(f!==null)if(typeof x=="function")try{x()}catch(S){en(o,c,S)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(S){en(o,c,S)}else f.current=null}function dC(o){var c=o.type,f=o.memoizedProps,x=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&x.focus();break e;case"img":f.src?x.src=f.src:f.srcSet&&(x.srcset=f.srcSet)}}catch(S){en(o,o.return,S)}}function Y2(o,c,f){try{var x=o.stateNode;PO(x,o.type,f,c),x[un]=c}catch(S){en(o,o.return,S)}}function hC(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&_l(o.type)||o.tag===4}function K2(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||hC(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&_l(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Q2(o,c,f){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(o,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(o),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=fx));else if(x!==4&&(x===27&&_l(o.type)&&(f=o.stateNode,c=null),o=o.child,o!==null))for(Q2(o,c,f),o=o.sibling;o!==null;)Q2(o,c,f),o=o.sibling}function nx(o,c,f){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?f.insertBefore(o,c):f.appendChild(o);else if(x!==4&&(x===27&&_l(o.type)&&(f=o.stateNode),o=o.child,o!==null))for(nx(o,c,f),o=o.sibling;o!==null;)nx(o,c,f),o=o.sibling}function fC(o){var c=o.stateNode,f=o.memoizedProps;try{for(var x=o.type,S=c.attributes;S.length;)c.removeAttributeNode(S[0]);fr(c,x,f),c[on]=o,c[un]=f}catch(C){en(o,o.return,C)}}var Zs=!1,An=!1,Z2=!1,pC=typeof WeakSet=="function"?WeakSet:Set,tr=null;function vO(o,c){if(o=o.containerInfo,kw=vx,o=AE(o),Kv(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var x=f.getSelection&&f.getSelection();if(x&&x.rangeCount!==0){f=x.anchorNode;var S=x.anchorOffset,C=x.focusNode;x=x.focusOffset;try{f.nodeType,C.nodeType}catch{f=null;break e}var q=0,Z=-1,le=-1,Ae=0,Oe=0,Be=o,Se=null;t:for(;;){for(var Te;Be!==f||S!==0&&Be.nodeType!==3||(Z=q+S),Be!==C||x!==0&&Be.nodeType!==3||(le=q+x),Be.nodeType===3&&(q+=Be.nodeValue.length),(Te=Be.firstChild)!==null;)Se=Be,Be=Te;for(;;){if(Be===o)break t;if(Se===f&&++Ae===S&&(Z=q),Se===C&&++Oe===x&&(le=q),(Te=Be.nextSibling)!==null)break;Be=Se,Se=Be.parentNode}Be=Te}f=Z===-1||le===-1?null:{start:Z,end:le}}else f=null}f=f||{start:0,end:0}}else f=null;for(Dw={focusedElem:o,selectionRange:f},vx=!1,tr=c;tr!==null;)if(c=tr,o=c.child,(c.subtreeFlags&1024)!==0&&o!==null)o.return=c,tr=o;else for(;tr!==null;){switch(c=tr,C=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&C!==null){o=void 0,f=c,S=C.memoizedProps,C=C.memoizedState,x=f.stateNode;try{var dt=au(f.type,S,f.elementType===f.type);o=x.getSnapshotBeforeUpdate(dt,C),x.__reactInternalSnapshotBeforeUpdate=o}catch(lt){en(f,f.return,lt)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,f=o.nodeType,f===9)Sw(o);else if(f===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Sw(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=c.sibling,o!==null){o.return=c.return,tr=o;break}tr=c.return}}function gC(o,c,f){var x=f.flags;switch(f.tag){case 0:case 11:case 15:bl(o,f),x&4&&eg(5,f);break;case 1:if(bl(o,f),x&4)if(o=f.stateNode,c===null)try{o.componentDidMount()}catch(q){en(f,f.return,q)}else{var S=au(f.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(S,c,o.__reactInternalSnapshotBeforeUpdate)}catch(q){en(f,f.return,q)}}x&64&&cC(f),x&512&&tg(f,f.return);break;case 3:if(bl(o,f),x&64&&(o=f.updateQueue,o!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{KE(o,c)}catch(q){en(f,f.return,q)}}break;case 27:c===null&&x&4&&fC(f);case 26:case 5:bl(o,f),c===null&&x&4&&dC(f),x&512&&tg(f,f.return);break;case 12:bl(o,f);break;case 13:bl(o,f),x&4&&yC(o,f),x&64&&(o=f.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(f=CO.bind(null,f),GO(o,f))));break;case 22:if(x=f.memoizedState!==null||Zs,!x){c=c!==null&&c.memoizedState!==null||An,S=Zs;var C=An;Zs=x,(An=c)&&!C?yl(o,f,(f.subtreeFlags&8772)!==0):bl(o,f),Zs=S,An=C}break;case 30:break;default:bl(o,f)}}function mC(o){var c=o.alternate;c!==null&&(o.alternate=null,mC(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&Un(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var dn=null,ti=!1;function Js(o,c,f){for(f=f.child;f!==null;)bC(o,c,f),f=f.sibling}function bC(o,c,f){if(ke&&typeof ke.onCommitFiberUnmount=="function")try{ke.onCommitFiberUnmount(ae,f)}catch{}switch(f.tag){case 26:An||is(f,c),Js(o,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:An||is(f,c);var x=dn,S=ti;_l(f.type)&&(dn=f.stateNode,ti=!1),Js(o,c,f),ug(f.stateNode),dn=x,ti=S;break;case 5:An||is(f,c);case 6:if(x=dn,S=ti,dn=null,Js(o,c,f),dn=x,ti=S,dn!==null)if(ti)try{(dn.nodeType===9?dn.body:dn.nodeName==="HTML"?dn.ownerDocument.body:dn).removeChild(f.stateNode)}catch(C){en(f,c,C)}else try{dn.removeChild(f.stateNode)}catch(C){en(f,c,C)}break;case 18:dn!==null&&(ti?(o=dn,a3(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,f.stateNode),yg(o)):a3(dn,f.stateNode));break;case 4:x=dn,S=ti,dn=f.stateNode.containerInfo,ti=!0,Js(o,c,f),dn=x,ti=S;break;case 0:case 11:case 14:case 15:An||ml(2,f,c),An||ml(4,f,c),Js(o,c,f);break;case 1:An||(is(f,c),x=f.stateNode,typeof x.componentWillUnmount=="function"&&uC(f,c,x)),Js(o,c,f);break;case 21:Js(o,c,f);break;case 22:An=(x=An)||f.memoizedState!==null,Js(o,c,f),An=x;break;default:Js(o,c,f)}}function yC(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{yg(o)}catch(f){en(c,c.return,f)}}function wO(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new pC),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new pC),c;default:throw Error(n(435,o.tag))}}function J2(o,c){var f=wO(o);c.forEach(function(x){var S=NO.bind(null,o,x);f.has(x)||(f.add(x),x.then(S,S))})}function xi(o,c){var f=c.deletions;if(f!==null)for(var x=0;x<f.length;x++){var S=f[x],C=o,q=c,Z=q;e:for(;Z!==null;){switch(Z.tag){case 27:if(_l(Z.type)){dn=Z.stateNode,ti=!1;break e}break;case 5:dn=Z.stateNode,ti=!1;break e;case 3:case 4:dn=Z.stateNode.containerInfo,ti=!0;break e}Z=Z.return}if(dn===null)throw Error(n(160));bC(C,q,S),dn=null,ti=!1,C=S.alternate,C!==null&&(C.return=null),S.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)xC(c,o),c=c.sibling}var ja=null;function xC(o,c){var f=o.alternate,x=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:xi(c,o),vi(o),x&4&&(ml(3,o,o.return),eg(3,o),ml(5,o,o.return));break;case 1:xi(c,o),vi(o),x&512&&(An||f===null||is(f,f.return)),x&64&&Zs&&(o=o.updateQueue,o!==null&&(x=o.callbacks,x!==null&&(f=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=f===null?x:f.concat(x))));break;case 26:var S=ja;if(xi(c,o),vi(o),x&512&&(An||f===null||is(f,f.return)),x&4){var C=f!==null?f.memoizedState:null;if(x=o.memoizedState,f===null)if(x===null)if(o.stateNode===null){e:{x=o.type,f=o.memoizedProps,S=S.ownerDocument||S;t:switch(x){case"title":C=S.getElementsByTagName("title")[0],(!C||C[Ua]||C[on]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=S.createElement(x),S.head.insertBefore(C,S.querySelector("head > title"))),fr(C,x,f),C[on]=o,Jn(C),x=C;break e;case"link":var q=f3("link","href",S).get(x+(f.href||""));if(q){for(var Z=0;Z<q.length;Z++)if(C=q[Z],C.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&C.getAttribute("rel")===(f.rel==null?null:f.rel)&&C.getAttribute("title")===(f.title==null?null:f.title)&&C.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){q.splice(Z,1);break t}}C=S.createElement(x),fr(C,x,f),S.head.appendChild(C);break;case"meta":if(q=f3("meta","content",S).get(x+(f.content||""))){for(Z=0;Z<q.length;Z++)if(C=q[Z],C.getAttribute("content")===(f.content==null?null:""+f.content)&&C.getAttribute("name")===(f.name==null?null:f.name)&&C.getAttribute("property")===(f.property==null?null:f.property)&&C.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&C.getAttribute("charset")===(f.charSet==null?null:f.charSet)){q.splice(Z,1);break t}}C=S.createElement(x),fr(C,x,f),S.head.appendChild(C);break;default:throw Error(n(468,x))}C[on]=o,Jn(C),x=C}o.stateNode=x}else p3(S,o.type,o.stateNode);else o.stateNode=h3(S,x,o.memoizedProps);else C!==x?(C===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):C.count--,x===null?p3(S,o.type,o.stateNode):h3(S,x,o.memoizedProps)):x===null&&o.stateNode!==null&&Y2(o,o.memoizedProps,f.memoizedProps)}break;case 27:xi(c,o),vi(o),x&512&&(An||f===null||is(f,f.return)),f!==null&&x&4&&Y2(o,o.memoizedProps,f.memoizedProps);break;case 5:if(xi(c,o),vi(o),x&512&&(An||f===null||is(f,f.return)),o.flags&32){S=o.stateNode;try{Gd(S,"")}catch(Te){en(o,o.return,Te)}}x&4&&o.stateNode!=null&&(S=o.memoizedProps,Y2(o,S,f!==null?f.memoizedProps:S)),x&1024&&(Z2=!0);break;case 6:if(xi(c,o),vi(o),x&4){if(o.stateNode===null)throw Error(n(162));x=o.memoizedProps,f=o.stateNode;try{f.nodeValue=x}catch(Te){en(o,o.return,Te)}}break;case 3:if(bx=null,S=ja,ja=gx(c.containerInfo),xi(c,o),ja=S,vi(o),x&4&&f!==null&&f.memoizedState.isDehydrated)try{yg(c.containerInfo)}catch(Te){en(o,o.return,Te)}Z2&&(Z2=!1,vC(o));break;case 4:x=ja,ja=gx(o.stateNode.containerInfo),xi(c,o),vi(o),ja=x;break;case 12:xi(c,o),vi(o);break;case 13:xi(c,o),vi(o),o.child.flags&8192&&o.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(aw=re()),x&4&&(x=o.updateQueue,x!==null&&(o.updateQueue=null,J2(o,x)));break;case 22:S=o.memoizedState!==null;var le=f!==null&&f.memoizedState!==null,Ae=Zs,Oe=An;if(Zs=Ae||S,An=Oe||le,xi(c,o),An=Oe,Zs=Ae,vi(o),x&8192)e:for(c=o.stateNode,c._visibility=S?c._visibility&-2:c._visibility|1,S&&(f===null||le||Zs||An||su(o)),f=null,c=o;;){if(c.tag===5||c.tag===26){if(f===null){le=f=c;try{if(C=le.stateNode,S)q=C.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none";else{Z=le.stateNode;var Be=le.memoizedProps.style,Se=Be!=null&&Be.hasOwnProperty("display")?Be.display:null;Z.style.display=Se==null||typeof Se=="boolean"?"":(""+Se).trim()}}catch(Te){en(le,le.return,Te)}}}else if(c.tag===6){if(f===null){le=c;try{le.stateNode.nodeValue=S?"":le.memoizedProps}catch(Te){en(le,le.return,Te)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}x&4&&(x=o.updateQueue,x!==null&&(f=x.retryQueue,f!==null&&(x.retryQueue=null,J2(o,f))));break;case 19:xi(c,o),vi(o),x&4&&(x=o.updateQueue,x!==null&&(o.updateQueue=null,J2(o,x)));break;case 30:break;case 21:break;default:xi(c,o),vi(o)}}function vi(o){var c=o.flags;if(c&2){try{for(var f,x=o.return;x!==null;){if(hC(x)){f=x;break}x=x.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var S=f.stateNode,C=K2(o);nx(o,C,S);break;case 5:var q=f.stateNode;f.flags&32&&(Gd(q,""),f.flags&=-33);var Z=K2(o);nx(o,Z,q);break;case 3:case 4:var le=f.stateNode.containerInfo,Ae=K2(o);Q2(o,Ae,le);break;default:throw Error(n(161))}}catch(Oe){en(o,o.return,Oe)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function vC(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;vC(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function bl(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)gC(o,c.alternate,c),c=c.sibling}function su(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:ml(4,c,c.return),su(c);break;case 1:is(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&uC(c,c.return,f),su(c);break;case 27:ug(c.stateNode);case 26:case 5:is(c,c.return),su(c);break;case 22:c.memoizedState===null&&su(c);break;case 30:su(c);break;default:su(c)}o=o.sibling}}function yl(o,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var x=c.alternate,S=o,C=c,q=C.flags;switch(C.tag){case 0:case 11:case 15:yl(S,C,f),eg(4,C);break;case 1:if(yl(S,C,f),x=C,S=x.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(Ae){en(x,x.return,Ae)}if(x=C,S=x.updateQueue,S!==null){var Z=x.stateNode;try{var le=S.shared.hiddenCallbacks;if(le!==null)for(S.shared.hiddenCallbacks=null,S=0;S<le.length;S++)YE(le[S],Z)}catch(Ae){en(x,x.return,Ae)}}f&&q&64&&cC(C),tg(C,C.return);break;case 27:fC(C);case 26:case 5:yl(S,C,f),f&&x===null&&q&4&&dC(C),tg(C,C.return);break;case 12:yl(S,C,f);break;case 13:yl(S,C,f),f&&q&4&&yC(S,C);break;case 22:C.memoizedState===null&&yl(S,C,f),tg(C,C.return);break;case 30:break;default:yl(S,C,f)}c=c.sibling}}function ew(o,c){var f=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==f&&(o!=null&&o.refCount++,f!=null&&Pp(f))}function tw(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Pp(o))}function as(o,c,f,x){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)wC(o,c,f,x),c=c.sibling}function wC(o,c,f,x){var S=c.flags;switch(c.tag){case 0:case 11:case 15:as(o,c,f,x),S&2048&&eg(9,c);break;case 1:as(o,c,f,x);break;case 3:as(o,c,f,x),S&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Pp(o)));break;case 12:if(S&2048){as(o,c,f,x),o=c.stateNode;try{var C=c.memoizedProps,q=C.id,Z=C.onPostCommit;typeof Z=="function"&&Z(q,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(le){en(c,c.return,le)}}else as(o,c,f,x);break;case 13:as(o,c,f,x);break;case 23:break;case 22:C=c.stateNode,q=c.alternate,c.memoizedState!==null?C._visibility&2?as(o,c,f,x):ng(o,c):C._visibility&2?as(o,c,f,x):(C._visibility|=2,hh(o,c,f,x,(c.subtreeFlags&10256)!==0)),S&2048&&ew(q,c);break;case 24:as(o,c,f,x),S&2048&&tw(c.alternate,c);break;default:as(o,c,f,x)}}function hh(o,c,f,x,S){for(S=S&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var C=o,q=c,Z=f,le=x,Ae=q.flags;switch(q.tag){case 0:case 11:case 15:hh(C,q,Z,le,S),eg(8,q);break;case 23:break;case 22:var Oe=q.stateNode;q.memoizedState!==null?Oe._visibility&2?hh(C,q,Z,le,S):ng(C,q):(Oe._visibility|=2,hh(C,q,Z,le,S)),S&&Ae&2048&&ew(q.alternate,q);break;case 24:hh(C,q,Z,le,S),S&&Ae&2048&&tw(q.alternate,q);break;default:hh(C,q,Z,le,S)}c=c.sibling}}function ng(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=o,x=c,S=x.flags;switch(x.tag){case 22:ng(f,x),S&2048&&ew(x.alternate,x);break;case 24:ng(f,x),S&2048&&tw(x.alternate,x);break;default:ng(f,x)}c=c.sibling}}var rg=8192;function fh(o){if(o.subtreeFlags&rg)for(o=o.child;o!==null;)kC(o),o=o.sibling}function kC(o){switch(o.tag){case 26:fh(o),o.flags&rg&&o.memoizedState!==null&&sM(ja,o.memoizedState,o.memoizedProps);break;case 5:fh(o);break;case 3:case 4:var c=ja;ja=gx(o.stateNode.containerInfo),fh(o),ja=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=rg,rg=16777216,fh(o),rg=c):fh(o));break;default:fh(o)}}function DC(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function ig(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var x=c[f];tr=x,AC(x,o)}DC(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)_C(o),o=o.sibling}function _C(o){switch(o.tag){case 0:case 11:case 15:ig(o),o.flags&2048&&ml(9,o,o.return);break;case 3:ig(o);break;case 12:ig(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,rx(o)):ig(o);break;default:ig(o)}}function rx(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var x=c[f];tr=x,AC(x,o)}DC(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:ml(8,c,c.return),rx(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,rx(c));break;default:rx(c)}o=o.sibling}}function AC(o,c){for(;tr!==null;){var f=tr;switch(f.tag){case 0:case 11:case 15:ml(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var x=f.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:Pp(f.memoizedState.cache)}if(x=f.child,x!==null)x.return=f,tr=x;else e:for(f=o;tr!==null;){x=tr;var S=x.sibling,C=x.return;if(mC(x),x===f){tr=null;break e}if(S!==null){S.return=C,tr=S;break e}tr=C}}}var kO={getCacheForType:function(o){var c=Er(Wn),f=c.data.get(o);return f===void 0&&(f=o(),c.data.set(o,f)),f}},DO=typeof WeakMap=="function"?WeakMap:Map,Wt=0,nn=null,At=null,Ut=0,Ht=0,wi=null,xl=!1,ph=!1,nw=!1,eo=0,kn=0,vl=0,ou=0,rw=0,ia=0,gh=0,ag=null,ni=null,iw=!1,aw=0,ix=1/0,ax=null,wl=null,hr=0,kl=null,mh=null,bh=0,sw=0,ow=null,SC=null,sg=0,lw=null;function ki(){if((Wt&2)!==0&&Ut!==0)return Ut&-Ut;if(P.T!==null){var o=ih;return o!==0?o:gw()}return Xt()}function EC(){ia===0&&(ia=(Ut&536870912)===0||Ot?Zn():536870912);var o=ra.current;return o!==null&&(o.flags|=32),ia}function Di(o,c,f){(o===nn&&(Ht===2||Ht===9)||o.cancelPendingCommit!==null)&&(yh(o,0),Dl(o,Ut,ia,!1)),Y(o,f),((Wt&2)===0||o!==nn)&&(o===nn&&((Wt&2)===0&&(ou|=f),kn===4&&Dl(o,Ut,ia,!1)),ss(o))}function TC(o,c,f){if((Wt&6)!==0)throw Error(n(327));var x=!f&&(c&124)===0&&(c&o.expiredLanes)===0||ft(o,c),S=x?SO(o,c):dw(o,c,!0),C=x;do{if(S===0){ph&&!x&&Dl(o,c,0,!1);break}else{if(f=o.current.alternate,C&&!_O(f)){S=dw(o,c,!1),C=!1;continue}if(S===2){if(C=c,o.errorRecoveryDisabledLanes&C)var q=0;else q=o.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){c=q;e:{var Z=o;S=ag;var le=Z.current.memoizedState.isDehydrated;if(le&&(yh(Z,q).flags|=256),q=dw(Z,q,!1),q!==2){if(nw&&!le){Z.errorRecoveryDisabledLanes|=C,ou|=C,S=4;break e}C=ni,ni=S,C!==null&&(ni===null?ni=C:ni.push.apply(ni,C))}S=q}if(C=!1,S!==2)continue}}if(S===1){yh(o,0),Dl(o,c,0,!0);break}e:{switch(x=o,C=S,C){case 0:case 1:throw Error(n(345));case 4:if((c&4194048)!==c)break;case 6:Dl(x,c,ia,!xl);break e;case 2:ni=null;break;case 3:case 5:break;default:throw Error(n(329))}if((c&62914560)===c&&(S=aw+300-re(),10<S)){if(Dl(x,c,ia,!xl),Ke(x,0,!0)!==0)break e;x.timeoutHandle=r3(CC.bind(null,x,f,ni,ax,iw,c,ia,ou,gh,xl,C,2,-0,0),S);break e}CC(x,f,ni,ax,iw,c,ia,ou,gh,xl,C,0,-0,0)}}break}while(!0);ss(o)}function CC(o,c,f,x,S,C,q,Z,le,Ae,Oe,Be,Se,Te){if(o.timeoutHandle=-1,Be=c.subtreeFlags,(Be&8192||(Be&16785408)===16785408)&&(fg={stylesheets:null,count:0,unsuspend:aM},kC(c),Be=oM(),Be!==null)){o.cancelPendingCommit=Be(OC.bind(null,o,c,C,f,x,S,q,Z,le,Oe,1,Se,Te)),Dl(o,C,q,!Ae);return}OC(o,c,C,f,x,S,q,Z,le)}function _O(o){for(var c=o;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var x=0;x<f.length;x++){var S=f[x],C=S.getSnapshot;S=S.value;try{if(!bi(C(),S))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Dl(o,c,f,x){c&=~rw,c&=~ou,o.suspendedLanes|=c,o.pingedLanes&=~c,x&&(o.warmLanes|=c),x=o.expirationTimes;for(var S=c;0<S;){var C=31-ze(S),q=1<<C;x[C]=-1,S&=~q}f!==0&&ce(o,f,c)}function sx(){return(Wt&6)===0?(og(0),!1):!0}function cw(){if(At!==null){if(Ht===0)var o=At.return;else o=At,Xs=tu=null,S2(o),uh=null,Qp=0,o=At;for(;o!==null;)lC(o.alternate,o),o=o.return;At=null}}function yh(o,c){var f=o.timeoutHandle;f!==-1&&(o.timeoutHandle=-1,WO(f)),f=o.cancelPendingCommit,f!==null&&(o.cancelPendingCommit=null,f()),cw(),nn=o,At=f=Hs(o.current,null),Ut=c,Ht=0,wi=null,xl=!1,ph=ft(o,c),nw=!1,gh=ia=rw=ou=vl=kn=0,ni=ag=null,iw=!1,(c&8)!==0&&(c|=c&32);var x=o.entangledLanes;if(x!==0)for(o=o.entanglements,x&=c;0<x;){var S=31-ze(x),C=1<<S;c|=o[S],x&=~C}return eo=c,Ty(),f}function NC(o,c){vt=null,P.H=Gy,c===Wp||c===My?(c=GE(),Ht=3):c===qE?(c=GE(),Ht=4):Ht=c===$T?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,wi=c,At===null&&(kn=1,Zy(o,Ji(c,o.current)))}function UC(){var o=P.H;return P.H=Gy,o===null?Gy:o}function RC(){var o=P.A;return P.A=kO,o}function uw(){kn=4,xl||(Ut&4194048)!==Ut&&ra.current!==null||(ph=!0),(vl&134217727)===0&&(ou&134217727)===0||nn===null||Dl(nn,Ut,ia,!1)}function dw(o,c,f){var x=Wt;Wt|=2;var S=UC(),C=RC();(nn!==o||Ut!==c)&&(ax=null,yh(o,c)),c=!1;var q=kn;e:do try{if(Ht!==0&&At!==null){var Z=At,le=wi;switch(Ht){case 8:cw(),q=6;break e;case 3:case 2:case 9:case 6:ra.current===null&&(c=!0);var Ae=Ht;if(Ht=0,wi=null,xh(o,Z,le,Ae),f&&ph){q=0;break e}break;default:Ae=Ht,Ht=0,wi=null,xh(o,Z,le,Ae)}}AO(),q=kn;break}catch(Oe){NC(o,Oe)}while(!0);return c&&o.shellSuspendCounter++,Xs=tu=null,Wt=x,P.H=S,P.A=C,At===null&&(nn=null,Ut=0,Ty()),q}function AO(){for(;At!==null;)jC(At)}function SO(o,c){var f=Wt;Wt|=2;var x=UC(),S=RC();nn!==o||Ut!==c?(ax=null,ix=re()+500,yh(o,c)):ph=ft(o,c);e:do try{if(Ht!==0&&At!==null){c=At;var C=wi;t:switch(Ht){case 1:Ht=0,wi=null,xh(o,c,C,1);break;case 2:case 9:if(VE(C)){Ht=0,wi=null,FC(c);break}c=function(){Ht!==2&&Ht!==9||nn!==o||(Ht=7),ss(o)},C.then(c,c);break e;case 3:Ht=7;break e;case 4:Ht=5;break e;case 7:VE(C)?(Ht=0,wi=null,FC(c)):(Ht=0,wi=null,xh(o,c,C,7));break;case 5:var q=null;switch(At.tag){case 26:q=At.memoizedState;case 5:case 27:var Z=At;if(!q||g3(q)){Ht=0,wi=null;var le=Z.sibling;if(le!==null)At=le;else{var Ae=Z.return;Ae!==null?(At=Ae,ox(Ae)):At=null}break t}}Ht=0,wi=null,xh(o,c,C,5);break;case 6:Ht=0,wi=null,xh(o,c,C,6);break;case 8:cw(),kn=6;break e;default:throw Error(n(462))}}EO();break}catch(Oe){NC(o,Oe)}while(!0);return Xs=tu=null,P.H=x,P.A=S,Wt=f,At!==null?0:(nn=null,Ut=0,Ty(),kn)}function EO(){for(;At!==null&&!he();)jC(At)}function jC(o){var c=sC(o.alternate,o,eo);o.memoizedProps=o.pendingProps,c===null?ox(o):At=c}function FC(o){var c=o,f=c.alternate;switch(c.tag){case 15:case 0:c=eC(f,c,c.pendingProps,c.type,void 0,Ut);break;case 11:c=eC(f,c,c.pendingProps,c.type.render,c.ref,Ut);break;case 5:S2(c);default:lC(f,c),c=At=IE(c,eo),c=sC(f,c,eo)}o.memoizedProps=o.pendingProps,c===null?ox(o):At=c}function xh(o,c,f,x){Xs=tu=null,S2(c),uh=null,Qp=0;var S=c.return;try{if(mO(o,S,c,f,Ut)){kn=1,Zy(o,Ji(f,o.current)),At=null;return}}catch(C){if(S!==null)throw At=S,C;kn=1,Zy(o,Ji(f,o.current)),At=null;return}c.flags&32768?(Ot||x===1?o=!0:ph||(Ut&536870912)!==0?o=!1:(xl=o=!0,(x===2||x===9||x===3||x===6)&&(x=ra.current,x!==null&&x.tag===13&&(x.flags|=16384))),IC(c,o)):ox(c)}function ox(o){var c=o;do{if((c.flags&32768)!==0){IC(c,xl);return}o=c.return;var f=yO(c.alternate,c,eo);if(f!==null){At=f;return}if(c=c.sibling,c!==null){At=c;return}At=c=o}while(c!==null);kn===0&&(kn=5)}function IC(o,c){do{var f=xO(o.alternate,o);if(f!==null){f.flags&=32767,At=f;return}if(f=o.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(o=o.sibling,o!==null)){At=o;return}At=o=f}while(o!==null);kn=6,At=null}function OC(o,c,f,x,S,C,q,Z,le){o.cancelPendingCommit=null;do lx();while(hr!==0);if((Wt&6)!==0)throw Error(n(327));if(c!==null){if(c===o.current)throw Error(n(177));if(C=c.lanes|c.childLanes,C|=t2,te(o,f,C,q,Z,le),o===nn&&(At=nn=null,Ut=0),mh=c,kl=o,bh=f,sw=C,ow=S,SC=x,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,UO(Ne,function(){return zC(),null})):(o.callbackNode=null,o.callbackPriority=0),x=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||x){x=P.T,P.T=null,S=B.p,B.p=2,q=Wt,Wt|=4;try{vO(o,c,f)}finally{Wt=q,B.p=S,P.T=x}}hr=1,MC(),LC(),BC()}}function MC(){if(hr===1){hr=0;var o=kl,c=mh,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=P.T,P.T=null;var x=B.p;B.p=2;var S=Wt;Wt|=4;try{xC(c,o);var C=Dw,q=AE(o.containerInfo),Z=C.focusedElem,le=C.selectionRange;if(q!==Z&&Z&&Z.ownerDocument&&_E(Z.ownerDocument.documentElement,Z)){if(le!==null&&Kv(Z)){var Ae=le.start,Oe=le.end;if(Oe===void 0&&(Oe=Ae),"selectionStart"in Z)Z.selectionStart=Ae,Z.selectionEnd=Math.min(Oe,Z.value.length);else{var Be=Z.ownerDocument||document,Se=Be&&Be.defaultView||window;if(Se.getSelection){var Te=Se.getSelection(),dt=Z.textContent.length,lt=Math.min(le.start,dt),Yt=le.end===void 0?lt:Math.min(le.end,dt);!Te.extend&&lt>Yt&&(q=Yt,Yt=lt,lt=q);var we=DE(Z,lt),me=DE(Z,Yt);if(we&&me&&(Te.rangeCount!==1||Te.anchorNode!==we.node||Te.anchorOffset!==we.offset||Te.focusNode!==me.node||Te.focusOffset!==me.offset)){var _e=Be.createRange();_e.setStart(we.node,we.offset),Te.removeAllRanges(),lt>Yt?(Te.addRange(_e),Te.extend(me.node,me.offset)):(_e.setEnd(me.node,me.offset),Te.addRange(_e))}}}}for(Be=[],Te=Z;Te=Te.parentNode;)Te.nodeType===1&&Be.push({element:Te,left:Te.scrollLeft,top:Te.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<Be.length;Z++){var Le=Be[Z];Le.element.scrollLeft=Le.left,Le.element.scrollTop=Le.top}}vx=!!kw,Dw=kw=null}finally{Wt=S,B.p=x,P.T=f}}o.current=c,hr=2}}function LC(){if(hr===2){hr=0;var o=kl,c=mh,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=P.T,P.T=null;var x=B.p;B.p=2;var S=Wt;Wt|=4;try{gC(o,c.alternate,c)}finally{Wt=S,B.p=x,P.T=f}}hr=3}}function BC(){if(hr===4||hr===3){hr=0,oe();var o=kl,c=mh,f=bh,x=SC;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?hr=5:(hr=0,mh=kl=null,PC(o,o.pendingLanes));var S=o.pendingLanes;if(S===0&&(wl=null),ot(f),c=c.stateNode,ke&&typeof ke.onCommitFiberRoot=="function")try{ke.onCommitFiberRoot(ae,c,void 0,(c.current.flags&128)===128)}catch{}if(x!==null){c=P.T,S=B.p,B.p=2,P.T=null;try{for(var C=o.onRecoverableError,q=0;q<x.length;q++){var Z=x[q];C(Z.value,{componentStack:Z.stack})}}finally{P.T=c,B.p=S}}(bh&3)!==0&&lx(),ss(o),S=o.pendingLanes,(f&4194090)!==0&&(S&42)!==0?o===lw?sg++:(sg=0,lw=o):sg=0,og(0)}}function PC(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Pp(c)))}function lx(o){return MC(),LC(),BC(),zC()}function zC(){if(hr!==5)return!1;var o=kl,c=sw;sw=0;var f=ot(bh),x=P.T,S=B.p;try{B.p=32>f?32:f,P.T=null,f=ow,ow=null;var C=kl,q=bh;if(hr=0,mh=kl=null,bh=0,(Wt&6)!==0)throw Error(n(331));var Z=Wt;if(Wt|=4,_C(C.current),wC(C,C.current,q,f),Wt=Z,og(0,!1),ke&&typeof ke.onPostCommitFiberRoot=="function")try{ke.onPostCommitFiberRoot(ae,C)}catch{}return!0}finally{B.p=S,P.T=x,PC(o,c)}}function WC(o,c,f){c=Ji(f,c),c=P2(o.stateNode,c,2),o=hl(o,c,2),o!==null&&(Y(o,2),ss(o))}function en(o,c,f){if(o.tag===3)WC(o,o,f);else for(;c!==null;){if(c.tag===3){WC(c,o,f);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(wl===null||!wl.has(x))){o=Ji(f,o),f=XT(2),x=hl(c,f,2),x!==null&&(GT(f,x,c,o),Y(x,2),ss(x));break}}c=c.return}}function hw(o,c,f){var x=o.pingCache;if(x===null){x=o.pingCache=new DO;var S=new Set;x.set(c,S)}else S=x.get(c),S===void 0&&(S=new Set,x.set(c,S));S.has(f)||(nw=!0,S.add(f),o=TO.bind(null,o,c,f),c.then(o,o))}function TO(o,c,f){var x=o.pingCache;x!==null&&x.delete(c),o.pingedLanes|=o.suspendedLanes&f,o.warmLanes&=~f,nn===o&&(Ut&f)===f&&(kn===4||kn===3&&(Ut&62914560)===Ut&&300>re()-aw?(Wt&2)===0&&yh(o,0):rw|=f,gh===Ut&&(gh=0)),ss(o)}function HC(o,c){c===0&&(c=gi()),o=eh(o,c),o!==null&&(Y(o,c),ss(o))}function CO(o){var c=o.memoizedState,f=0;c!==null&&(f=c.retryLane),HC(o,f)}function NO(o,c){var f=0;switch(o.tag){case 13:var x=o.stateNode,S=o.memoizedState;S!==null&&(f=S.retryLane);break;case 19:x=o.stateNode;break;case 22:x=o.stateNode._retryCache;break;default:throw Error(n(314))}x!==null&&x.delete(c),HC(o,f)}function UO(o,c){return $e(o,c)}var cx=null,vh=null,fw=!1,ux=!1,pw=!1,lu=0;function ss(o){o!==vh&&o.next===null&&(vh===null?cx=vh=o:vh=vh.next=o),ux=!0,fw||(fw=!0,jO())}function og(o,c){if(!pw&&ux){pw=!0;do for(var f=!1,x=cx;x!==null;){if(o!==0){var S=x.pendingLanes;if(S===0)var C=0;else{var q=x.suspendedLanes,Z=x.pingedLanes;C=(1<<31-ze(42|o)+1)-1,C&=S&~(q&~Z),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(f=!0,GC(x,C))}else C=Ut,C=Ke(x,x===nn?C:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(C&3)===0||ft(x,C)||(f=!0,GC(x,C));x=x.next}while(f);pw=!1}}function RO(){qC()}function qC(){ux=fw=!1;var o=0;lu!==0&&(zO()&&(o=lu),lu=0);for(var c=re(),f=null,x=cx;x!==null;){var S=x.next,C=VC(x,c);C===0?(x.next=null,f===null?cx=S:f.next=S,S===null&&(vh=f)):(f=x,(o!==0||(C&3)!==0)&&(ux=!0)),x=S}og(o)}function VC(o,c){for(var f=o.suspendedLanes,x=o.pingedLanes,S=o.expirationTimes,C=o.pendingLanes&-62914561;0<C;){var q=31-ze(C),Z=1<<q,le=S[q];le===-1?((Z&f)===0||(Z&x)!==0)&&(S[q]=xt(Z,c)):le<=c&&(o.expiredLanes|=Z),C&=~Z}if(c=nn,f=Ut,f=Ke(o,o===c?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),x=o.callbackNode,f===0||o===c&&(Ht===2||Ht===9)||o.cancelPendingCommit!==null)return x!==null&&x!==null&&O(x),o.callbackNode=null,o.callbackPriority=0;if((f&3)===0||ft(o,f)){if(c=f&-f,c===o.callbackPriority)return c;switch(x!==null&&O(x),ot(f)){case 2:case 8:f=Ce;break;case 32:f=Ne;break;case 268435456:f=se;break;default:f=Ne}return x=XC.bind(null,o),f=$e(f,x),o.callbackPriority=c,o.callbackNode=f,c}return x!==null&&x!==null&&O(x),o.callbackPriority=2,o.callbackNode=null,2}function XC(o,c){if(hr!==0&&hr!==5)return o.callbackNode=null,o.callbackPriority=0,null;var f=o.callbackNode;if(lx()&&o.callbackNode!==f)return null;var x=Ut;return x=Ke(o,o===nn?x:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),x===0?null:(TC(o,x,c),VC(o,re()),o.callbackNode!=null&&o.callbackNode===f?XC.bind(null,o):null)}function GC(o,c){if(lx())return null;TC(o,c,!0)}function jO(){HO(function(){(Wt&6)!==0?$e(ue,RO):qC()})}function gw(){return lu===0&&(lu=Zn()),lu}function $C(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:wy(""+o)}function YC(o,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,o.id&&f.setAttribute("form",o.id),c.parentNode.insertBefore(f,c),o=new FormData(o),f.parentNode.removeChild(f),o}function FO(o,c,f,x,S){if(c==="submit"&&f&&f.stateNode===S){var C=$C((S[un]||null).action),q=x.submitter;q&&(c=(c=q[un]||null)?$C(c.formAction):q.getAttribute("formAction"),c!==null&&(C=c,q=null));var Z=new Ay("action","action",null,x,S);o.push({event:Z,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(lu!==0){var le=q?YC(S,q):new FormData(S);I2(f,{pending:!0,data:le,method:S.method,action:C},null,le)}}else typeof C=="function"&&(Z.preventDefault(),le=q?YC(S,q):new FormData(S),I2(f,{pending:!0,data:le,method:S.method,action:C},C,le))},currentTarget:S}]})}}for(var mw=0;mw<e2.length;mw++){var bw=e2[mw],IO=bw.toLowerCase(),OO=bw[0].toUpperCase()+bw.slice(1);Ra(IO,"on"+OO)}Ra(TE,"onAnimationEnd"),Ra(CE,"onAnimationIteration"),Ra(NE,"onAnimationStart"),Ra("dblclick","onDoubleClick"),Ra("focusin","onFocus"),Ra("focusout","onBlur"),Ra(JI,"onTransitionRun"),Ra(eO,"onTransitionStart"),Ra(tO,"onTransitionCancel"),Ra(UE,"onTransitionEnd"),qd("onMouseEnter",["mouseout","mouseover"]),qd("onMouseLeave",["mouseout","mouseover"]),qd("onPointerEnter",["pointerout","pointerover"]),qd("onPointerLeave",["pointerout","pointerover"]),Xc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xc("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lg));function KC(o,c){c=(c&4)!==0;for(var f=0;f<o.length;f++){var x=o[f],S=x.event;x=x.listeners;e:{var C=void 0;if(c)for(var q=x.length-1;0<=q;q--){var Z=x[q],le=Z.instance,Ae=Z.currentTarget;if(Z=Z.listener,le!==C&&S.isPropagationStopped())break e;C=Z,S.currentTarget=Ae;try{C(S)}catch(Oe){Qy(Oe)}S.currentTarget=null,C=le}else for(q=0;q<x.length;q++){if(Z=x[q],le=Z.instance,Ae=Z.currentTarget,Z=Z.listener,le!==C&&S.isPropagationStopped())break e;C=Z,S.currentTarget=Ae;try{C(S)}catch(Oe){Qy(Oe)}S.currentTarget=null,C=le}}}}function St(o,c){var f=c[Na];f===void 0&&(f=c[Na]=new Set);var x=o+"__bubble";f.has(x)||(QC(c,o,2,!1),f.add(x))}function yw(o,c,f){var x=0;c&&(x|=4),QC(f,o,x,c)}var dx="_reactListening"+Math.random().toString(36).slice(2);function xw(o){if(!o[dx]){o[dx]=!0,qS.forEach(function(f){f!=="selectionchange"&&(MO.has(f)||yw(f,!1,o),yw(f,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[dx]||(c[dx]=!0,yw("selectionchange",!1,c))}}function QC(o,c,f,x){switch(w3(c)){case 2:var S=uM;break;case 8:S=dM;break;default:S=jw}f=S.bind(null,c,f,o),S=void 0,!zv||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(S=!0),x?S!==void 0?o.addEventListener(c,f,{capture:!0,passive:S}):o.addEventListener(c,f,!0):S!==void 0?o.addEventListener(c,f,{passive:S}):o.addEventListener(c,f,!1)}function vw(o,c,f,x,S){var C=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var q=x.tag;if(q===3||q===4){var Z=x.stateNode.containerInfo;if(Z===S)break;if(q===4)for(q=x.return;q!==null;){var le=q.tag;if((le===3||le===4)&&q.stateNode.containerInfo===S)return;q=q.return}for(;Z!==null;){if(q=Ps(Z),q===null)return;if(le=q.tag,le===5||le===6||le===26||le===27){x=C=q;continue e}Z=Z.parentNode}}x=x.return}iE(function(){var Ae=C,Oe=Bv(f),Be=[];e:{var Se=RE.get(o);if(Se!==void 0){var Te=Ay,dt=o;switch(o){case"keypress":if(Dy(f)===0)break e;case"keydown":case"keyup":Te=UI;break;case"focusin":dt="focus",Te=Vv;break;case"focusout":dt="blur",Te=Vv;break;case"beforeblur":case"afterblur":Te=Vv;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=oE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=xI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=FI;break;case TE:case CE:case NE:Te=kI;break;case UE:Te=OI;break;case"scroll":case"scrollend":Te=bI;break;case"wheel":Te=LI;break;case"copy":case"cut":case"paste":Te=_I;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=cE;break;case"toggle":case"beforetoggle":Te=PI}var lt=(c&4)!==0,Yt=!lt&&(o==="scroll"||o==="scrollend"),we=lt?Se!==null?Se+"Capture":null:Se;lt=[];for(var me=Ae,_e;me!==null;){var Le=me;if(_e=Le.stateNode,Le=Le.tag,Le!==5&&Le!==26&&Le!==27||_e===null||we===null||(Le=Ep(me,we),Le!=null&&lt.push(cg(me,Le,_e))),Yt)break;me=me.return}0<lt.length&&(Se=new Te(Se,dt,null,f,Oe),Be.push({event:Se,listeners:lt}))}}if((c&7)===0){e:{if(Se=o==="mouseover"||o==="pointerover",Te=o==="mouseout"||o==="pointerout",Se&&f!==Lv&&(dt=f.relatedTarget||f.fromElement)&&(Ps(dt)||dt[Zr]))break e;if((Te||Se)&&(Se=Oe.window===Oe?Oe:(Se=Oe.ownerDocument)?Se.defaultView||Se.parentWindow:window,Te?(dt=f.relatedTarget||f.toElement,Te=Ae,dt=dt?Ps(dt):null,dt!==null&&(Yt=a(dt),lt=dt.tag,dt!==Yt||lt!==5&&lt!==27&&lt!==6)&&(dt=null)):(Te=null,dt=Ae),Te!==dt)){if(lt=oE,Le="onMouseLeave",we="onMouseEnter",me="mouse",(o==="pointerout"||o==="pointerover")&&(lt=cE,Le="onPointerLeave",we="onPointerEnter",me="pointer"),Yt=Te==null?Se:ol(Te),_e=dt==null?Se:ol(dt),Se=new lt(Le,me+"leave",Te,f,Oe),Se.target=Yt,Se.relatedTarget=_e,Le=null,Ps(Oe)===Ae&&(lt=new lt(we,me+"enter",dt,f,Oe),lt.target=_e,lt.relatedTarget=Yt,Le=lt),Yt=Le,Te&&dt)t:{for(lt=Te,we=dt,me=0,_e=lt;_e;_e=wh(_e))me++;for(_e=0,Le=we;Le;Le=wh(Le))_e++;for(;0<me-_e;)lt=wh(lt),me--;for(;0<_e-me;)we=wh(we),_e--;for(;me--;){if(lt===we||we!==null&&lt===we.alternate)break t;lt=wh(lt),we=wh(we)}lt=null}else lt=null;Te!==null&&ZC(Be,Se,Te,lt,!1),dt!==null&&Yt!==null&&ZC(Be,Yt,dt,lt,!0)}}e:{if(Se=Ae?ol(Ae):window,Te=Se.nodeName&&Se.nodeName.toLowerCase(),Te==="select"||Te==="input"&&Se.type==="file")var nt=bE;else if(gE(Se))if(yE)nt=KI;else{nt=$I;var wt=GI}else Te=Se.nodeName,!Te||Te.toLowerCase()!=="input"||Se.type!=="checkbox"&&Se.type!=="radio"?Ae&&Mv(Ae.elementType)&&(nt=bE):nt=YI;if(nt&&(nt=nt(o,Ae))){mE(Be,nt,f,Oe);break e}wt&&wt(o,Se,Ae),o==="focusout"&&Ae&&Se.type==="number"&&Ae.memoizedProps.value!=null&&Ov(Se,"number",Se.value)}switch(wt=Ae?ol(Ae):window,o){case"focusin":(gE(wt)||wt.contentEditable==="true")&&(Qd=wt,Qv=Ae,Ip=null);break;case"focusout":Ip=Qv=Qd=null;break;case"mousedown":Zv=!0;break;case"contextmenu":case"mouseup":case"dragend":Zv=!1,SE(Be,f,Oe);break;case"selectionchange":if(ZI)break;case"keydown":case"keyup":SE(Be,f,Oe)}var it;if(Gv)e:{switch(o){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else Kd?fE(o,f)&&(ut="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(ut="onCompositionStart");ut&&(uE&&f.locale!=="ko"&&(Kd||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&Kd&&(it=aE()):(ll=Oe,Wv="value"in ll?ll.value:ll.textContent,Kd=!0)),wt=hx(Ae,ut),0<wt.length&&(ut=new lE(ut,o,null,f,Oe),Be.push({event:ut,listeners:wt}),it?ut.data=it:(it=pE(f),it!==null&&(ut.data=it)))),(it=WI?HI(o,f):qI(o,f))&&(ut=hx(Ae,"onBeforeInput"),0<ut.length&&(wt=new lE("onBeforeInput","beforeinput",null,f,Oe),Be.push({event:wt,listeners:ut}),wt.data=it)),FO(Be,o,Ae,f,Oe)}KC(Be,c)})}function cg(o,c,f){return{instance:o,listener:c,currentTarget:f}}function hx(o,c){for(var f=c+"Capture",x=[];o!==null;){var S=o,C=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||C===null||(S=Ep(o,f),S!=null&&x.unshift(cg(o,S,C)),S=Ep(o,c),S!=null&&x.push(cg(o,S,C))),o.tag===3)return x;o=o.return}return[]}function wh(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function ZC(o,c,f,x,S){for(var C=c._reactName,q=[];f!==null&&f!==x;){var Z=f,le=Z.alternate,Ae=Z.stateNode;if(Z=Z.tag,le!==null&&le===x)break;Z!==5&&Z!==26&&Z!==27||Ae===null||(le=Ae,S?(Ae=Ep(f,C),Ae!=null&&q.unshift(cg(f,Ae,le))):S||(Ae=Ep(f,C),Ae!=null&&q.push(cg(f,Ae,le)))),f=f.return}q.length!==0&&o.push({event:c,listeners:q})}var LO=/\r\n?/g,BO=/\u0000|\uFFFD/g;function JC(o){return(typeof o=="string"?o:""+o).replace(LO,`
`).replace(BO,"")}function e3(o,c){return c=JC(c),JC(o)===c}function fx(){}function $t(o,c,f,x,S,C){switch(f){case"children":typeof x=="string"?c==="body"||c==="textarea"&&x===""||Gd(o,x):(typeof x=="number"||typeof x=="bigint")&&c!=="body"&&Gd(o,""+x);break;case"className":yy(o,"class",x);break;case"tabIndex":yy(o,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":yy(o,f,x);break;case"style":nE(o,x,C);break;case"data":if(c!=="object"){yy(o,"data",x);break}case"src":case"href":if(x===""&&(c!=="a"||f!=="href")){o.removeAttribute(f);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){o.removeAttribute(f);break}x=wy(""+x),o.setAttribute(f,x);break;case"action":case"formAction":if(typeof x=="function"){o.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(f==="formAction"?(c!=="input"&&$t(o,c,"name",S.name,S,null),$t(o,c,"formEncType",S.formEncType,S,null),$t(o,c,"formMethod",S.formMethod,S,null),$t(o,c,"formTarget",S.formTarget,S,null)):($t(o,c,"encType",S.encType,S,null),$t(o,c,"method",S.method,S,null),$t(o,c,"target",S.target,S,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){o.removeAttribute(f);break}x=wy(""+x),o.setAttribute(f,x);break;case"onClick":x!=null&&(o.onclick=fx);break;case"onScroll":x!=null&&St("scroll",o);break;case"onScrollEnd":x!=null&&St("scrollend",o);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(n(61));if(f=x.__html,f!=null){if(S.children!=null)throw Error(n(60));o.innerHTML=f}}break;case"multiple":o.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":o.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){o.removeAttribute("xlink:href");break}f=wy(""+x),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(f,""+x):o.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(f,""):o.removeAttribute(f);break;case"capture":case"download":x===!0?o.setAttribute(f,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(f,x):o.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?o.setAttribute(f,x):o.removeAttribute(f);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?o.removeAttribute(f):o.setAttribute(f,x);break;case"popover":St("beforetoggle",o),St("toggle",o),by(o,"popover",x);break;case"xlinkActuate":zs(o,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":zs(o,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":zs(o,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":zs(o,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":zs(o,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":zs(o,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":zs(o,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":zs(o,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":zs(o,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":by(o,"is",x);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=gI.get(f)||f,by(o,f,x))}}function ww(o,c,f,x,S,C){switch(f){case"style":nE(o,x,C);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(n(61));if(f=x.__html,f!=null){if(S.children!=null)throw Error(n(60));o.innerHTML=f}}break;case"children":typeof x=="string"?Gd(o,x):(typeof x=="number"||typeof x=="bigint")&&Gd(o,""+x);break;case"onScroll":x!=null&&St("scroll",o);break;case"onScrollEnd":x!=null&&St("scrollend",o);break;case"onClick":x!=null&&(o.onclick=fx);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!VS.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(S=f.endsWith("Capture"),c=f.slice(2,S?f.length-7:void 0),C=o[un]||null,C=C!=null?C[f]:null,typeof C=="function"&&o.removeEventListener(c,C,S),typeof x=="function")){typeof C!="function"&&C!==null&&(f in o?o[f]=null:o.hasAttribute(f)&&o.removeAttribute(f)),o.addEventListener(c,x,S);break e}f in o?o[f]=x:x===!0?o.setAttribute(f,""):by(o,f,x)}}}function fr(o,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":St("error",o),St("load",o);var x=!1,S=!1,C;for(C in f)if(f.hasOwnProperty(C)){var q=f[C];if(q!=null)switch(C){case"src":x=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:$t(o,c,C,q,f,null)}}S&&$t(o,c,"srcSet",f.srcSet,f,null),x&&$t(o,c,"src",f.src,f,null);return;case"input":St("invalid",o);var Z=C=q=S=null,le=null,Ae=null;for(x in f)if(f.hasOwnProperty(x)){var Oe=f[x];if(Oe!=null)switch(x){case"name":S=Oe;break;case"type":q=Oe;break;case"checked":le=Oe;break;case"defaultChecked":Ae=Oe;break;case"value":C=Oe;break;case"defaultValue":Z=Oe;break;case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(n(137,c));break;default:$t(o,c,x,Oe,f,null)}}ZS(o,C,Z,le,Ae,q,S,!1),xy(o);return;case"select":St("invalid",o),x=q=C=null;for(S in f)if(f.hasOwnProperty(S)&&(Z=f[S],Z!=null))switch(S){case"value":C=Z;break;case"defaultValue":q=Z;break;case"multiple":x=Z;default:$t(o,c,S,Z,f,null)}c=C,f=q,o.multiple=!!x,c!=null?Xd(o,!!x,c,!1):f!=null&&Xd(o,!!x,f,!0);return;case"textarea":St("invalid",o),C=S=x=null;for(q in f)if(f.hasOwnProperty(q)&&(Z=f[q],Z!=null))switch(q){case"value":x=Z;break;case"defaultValue":S=Z;break;case"children":C=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(91));break;default:$t(o,c,q,Z,f,null)}eE(o,x,S,C),xy(o);return;case"option":for(le in f)if(f.hasOwnProperty(le)&&(x=f[le],x!=null))switch(le){case"selected":o.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:$t(o,c,le,x,f,null)}return;case"dialog":St("beforetoggle",o),St("toggle",o),St("cancel",o),St("close",o);break;case"iframe":case"object":St("load",o);break;case"video":case"audio":for(x=0;x<lg.length;x++)St(lg[x],o);break;case"image":St("error",o),St("load",o);break;case"details":St("toggle",o);break;case"embed":case"source":case"link":St("error",o),St("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ae in f)if(f.hasOwnProperty(Ae)&&(x=f[Ae],x!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:$t(o,c,Ae,x,f,null)}return;default:if(Mv(c)){for(Oe in f)f.hasOwnProperty(Oe)&&(x=f[Oe],x!==void 0&&ww(o,c,Oe,x,f,void 0));return}}for(Z in f)f.hasOwnProperty(Z)&&(x=f[Z],x!=null&&$t(o,c,Z,x,f,null))}function PO(o,c,f,x){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,C=null,q=null,Z=null,le=null,Ae=null,Oe=null;for(Te in f){var Be=f[Te];if(f.hasOwnProperty(Te)&&Be!=null)switch(Te){case"checked":break;case"value":break;case"defaultValue":le=Be;default:x.hasOwnProperty(Te)||$t(o,c,Te,null,x,Be)}}for(var Se in x){var Te=x[Se];if(Be=f[Se],x.hasOwnProperty(Se)&&(Te!=null||Be!=null))switch(Se){case"type":C=Te;break;case"name":S=Te;break;case"checked":Ae=Te;break;case"defaultChecked":Oe=Te;break;case"value":q=Te;break;case"defaultValue":Z=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(n(137,c));break;default:Te!==Be&&$t(o,c,Se,Te,x,Be)}}Iv(o,q,Z,le,Ae,Oe,C,S);return;case"select":Te=q=Z=Se=null;for(C in f)if(le=f[C],f.hasOwnProperty(C)&&le!=null)switch(C){case"value":break;case"multiple":Te=le;default:x.hasOwnProperty(C)||$t(o,c,C,null,x,le)}for(S in x)if(C=x[S],le=f[S],x.hasOwnProperty(S)&&(C!=null||le!=null))switch(S){case"value":Se=C;break;case"defaultValue":Z=C;break;case"multiple":q=C;default:C!==le&&$t(o,c,S,C,x,le)}c=Z,f=q,x=Te,Se!=null?Xd(o,!!f,Se,!1):!!x!=!!f&&(c!=null?Xd(o,!!f,c,!0):Xd(o,!!f,f?[]:"",!1));return;case"textarea":Te=Se=null;for(Z in f)if(S=f[Z],f.hasOwnProperty(Z)&&S!=null&&!x.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:$t(o,c,Z,null,x,S)}for(q in x)if(S=x[q],C=f[q],x.hasOwnProperty(q)&&(S!=null||C!=null))switch(q){case"value":Se=S;break;case"defaultValue":Te=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(n(91));break;default:S!==C&&$t(o,c,q,S,x,C)}JS(o,Se,Te);return;case"option":for(var dt in f)if(Se=f[dt],f.hasOwnProperty(dt)&&Se!=null&&!x.hasOwnProperty(dt))switch(dt){case"selected":o.selected=!1;break;default:$t(o,c,dt,null,x,Se)}for(le in x)if(Se=x[le],Te=f[le],x.hasOwnProperty(le)&&Se!==Te&&(Se!=null||Te!=null))switch(le){case"selected":o.selected=Se&&typeof Se!="function"&&typeof Se!="symbol";break;default:$t(o,c,le,Se,x,Te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var lt in f)Se=f[lt],f.hasOwnProperty(lt)&&Se!=null&&!x.hasOwnProperty(lt)&&$t(o,c,lt,null,x,Se);for(Ae in x)if(Se=x[Ae],Te=f[Ae],x.hasOwnProperty(Ae)&&Se!==Te&&(Se!=null||Te!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(n(137,c));break;default:$t(o,c,Ae,Se,x,Te)}return;default:if(Mv(c)){for(var Yt in f)Se=f[Yt],f.hasOwnProperty(Yt)&&Se!==void 0&&!x.hasOwnProperty(Yt)&&ww(o,c,Yt,void 0,x,Se);for(Oe in x)Se=x[Oe],Te=f[Oe],!x.hasOwnProperty(Oe)||Se===Te||Se===void 0&&Te===void 0||ww(o,c,Oe,Se,x,Te);return}}for(var we in f)Se=f[we],f.hasOwnProperty(we)&&Se!=null&&!x.hasOwnProperty(we)&&$t(o,c,we,null,x,Se);for(Be in x)Se=x[Be],Te=f[Be],!x.hasOwnProperty(Be)||Se===Te||Se==null&&Te==null||$t(o,c,Be,Se,x,Te)}var kw=null,Dw=null;function px(o){return o.nodeType===9?o:o.ownerDocument}function t3(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function n3(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function _w(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Aw=null;function zO(){var o=window.event;return o&&o.type==="popstate"?o===Aw?!1:(Aw=o,!0):(Aw=null,!1)}var r3=typeof setTimeout=="function"?setTimeout:void 0,WO=typeof clearTimeout=="function"?clearTimeout:void 0,i3=typeof Promise=="function"?Promise:void 0,HO=typeof queueMicrotask=="function"?queueMicrotask:typeof i3<"u"?function(o){return i3.resolve(null).then(o).catch(qO)}:r3;function qO(o){setTimeout(function(){throw o})}function _l(o){return o==="head"}function a3(o,c){var f=c,x=0,S=0;do{var C=f.nextSibling;if(o.removeChild(f),C&&C.nodeType===8)if(f=C.data,f==="/$"){if(0<x&&8>x){f=x;var q=o.ownerDocument;if(f&1&&ug(q.documentElement),f&2&&ug(q.body),f&4)for(f=q.head,ug(f),q=f.firstChild;q;){var Z=q.nextSibling,le=q.nodeName;q[Ua]||le==="SCRIPT"||le==="STYLE"||le==="LINK"&&q.rel.toLowerCase()==="stylesheet"||f.removeChild(q),q=Z}}if(S===0){o.removeChild(C),yg(c);return}S--}else f==="$"||f==="$?"||f==="$!"?S++:x=f.charCodeAt(0)-48;else x=0;f=C}while(f);yg(c)}function Sw(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Sw(f),Un(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}o.removeChild(f)}}function VO(o,c,f,x){for(;o.nodeType===1;){var S=f;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!x&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(x){if(!o[Ua])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(C=o.getAttribute("rel"),C==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(C!==S.rel||o.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||o.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||o.getAttribute("title")!==(S.title==null?null:S.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(C=o.getAttribute("src"),(C!==(S.src==null?null:S.src)||o.getAttribute("type")!==(S.type==null?null:S.type)||o.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&C&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var C=S.name==null?null:""+S.name;if(S.type==="hidden"&&o.getAttribute("name")===C)return o}else return o;if(o=Fa(o.nextSibling),o===null)break}return null}function XO(o,c,f){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!f||(o=Fa(o.nextSibling),o===null))return null;return o}function Ew(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function GO(o,c){var f=o.ownerDocument;if(o.data!=="$?"||f.readyState==="complete")c();else{var x=function(){c(),f.removeEventListener("DOMContentLoaded",x)};f.addEventListener("DOMContentLoaded",x),o._reactRetry=x}}function Fa(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}var Tw=null;function s3(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return o;c--}else f==="/$"&&c++}o=o.previousSibling}return null}function o3(o,c,f){switch(c=px(f),o){case"html":if(o=c.documentElement,!o)throw Error(n(452));return o;case"head":if(o=c.head,!o)throw Error(n(453));return o;case"body":if(o=c.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function ug(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);Un(o)}var aa=new Map,l3=new Set;function gx(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var to=B.d;B.d={f:$O,r:YO,D:KO,C:QO,L:ZO,m:JO,X:tM,S:eM,M:nM};function $O(){var o=to.f(),c=sx();return o||c}function YO(o){var c=mi(o);c!==null&&c.tag===5&&c.type==="form"?TT(c):to.r(o)}var kh=typeof document>"u"?null:document;function c3(o,c,f){var x=kh;if(x&&typeof c=="string"&&c){var S=Zi(c);S='link[rel="'+o+'"][href="'+S+'"]',typeof f=="string"&&(S+='[crossorigin="'+f+'"]'),l3.has(S)||(l3.add(S),o={rel:o,crossOrigin:f,href:c},x.querySelector(S)===null&&(c=x.createElement("link"),fr(c,"link",o),Jn(c),x.head.appendChild(c)))}}function KO(o){to.D(o),c3("dns-prefetch",o,null)}function QO(o,c){to.C(o,c),c3("preconnect",o,c)}function ZO(o,c,f){to.L(o,c,f);var x=kh;if(x&&o&&c){var S='link[rel="preload"][as="'+Zi(c)+'"]';c==="image"&&f&&f.imageSrcSet?(S+='[imagesrcset="'+Zi(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(S+='[imagesizes="'+Zi(f.imageSizes)+'"]')):S+='[href="'+Zi(o)+'"]';var C=S;switch(c){case"style":C=Dh(o);break;case"script":C=_h(o)}aa.has(C)||(o=h({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:o,as:c},f),aa.set(C,o),x.querySelector(S)!==null||c==="style"&&x.querySelector(dg(C))||c==="script"&&x.querySelector(hg(C))||(c=x.createElement("link"),fr(c,"link",o),Jn(c),x.head.appendChild(c)))}}function JO(o,c){to.m(o,c);var f=kh;if(f&&o){var x=c&&typeof c.as=="string"?c.as:"script",S='link[rel="modulepreload"][as="'+Zi(x)+'"][href="'+Zi(o)+'"]',C=S;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=_h(o)}if(!aa.has(C)&&(o=h({rel:"modulepreload",href:o},c),aa.set(C,o),f.querySelector(S)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(hg(C)))return}x=f.createElement("link"),fr(x,"link",o),Jn(x),f.head.appendChild(x)}}}function eM(o,c,f){to.S(o,c,f);var x=kh;if(x&&o){var S=Hd(x).hoistableStyles,C=Dh(o);c=c||"default";var q=S.get(C);if(!q){var Z={loading:0,preload:null};if(q=x.querySelector(dg(C)))Z.loading=5;else{o=h({rel:"stylesheet",href:o,"data-precedence":c},f),(f=aa.get(C))&&Cw(o,f);var le=q=x.createElement("link");Jn(le),fr(le,"link",o),le._p=new Promise(function(Ae,Oe){le.onload=Ae,le.onerror=Oe}),le.addEventListener("load",function(){Z.loading|=1}),le.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,mx(q,c,x)}q={type:"stylesheet",instance:q,count:1,state:Z},S.set(C,q)}}}function tM(o,c){to.X(o,c);var f=kh;if(f&&o){var x=Hd(f).hoistableScripts,S=_h(o),C=x.get(S);C||(C=f.querySelector(hg(S)),C||(o=h({src:o,async:!0},c),(c=aa.get(S))&&Nw(o,c),C=f.createElement("script"),Jn(C),fr(C,"link",o),f.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},x.set(S,C))}}function nM(o,c){to.M(o,c);var f=kh;if(f&&o){var x=Hd(f).hoistableScripts,S=_h(o),C=x.get(S);C||(C=f.querySelector(hg(S)),C||(o=h({src:o,async:!0,type:"module"},c),(c=aa.get(S))&&Nw(o,c),C=f.createElement("script"),Jn(C),fr(C,"link",o),f.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},x.set(S,C))}}function u3(o,c,f,x){var S=(S=je.current)?gx(S):null;if(!S)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=Dh(f.href),f=Hd(S).hoistableStyles,x=f.get(c),x||(x={type:"style",instance:null,count:0,state:null},f.set(c,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){o=Dh(f.href);var C=Hd(S).hoistableStyles,q=C.get(o);if(q||(S=S.ownerDocument||S,q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(o,q),(C=S.querySelector(dg(o)))&&!C._p&&(q.instance=C,q.state.loading=5),aa.has(o)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},aa.set(o,f),C||rM(S,o,f,q.state))),c&&x===null)throw Error(n(528,""));return q}if(c&&x!==null)throw Error(n(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=_h(f),f=Hd(S).hoistableScripts,x=f.get(c),x||(x={type:"script",instance:null,count:0,state:null},f.set(c,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function Dh(o){return'href="'+Zi(o)+'"'}function dg(o){return'link[rel="stylesheet"]['+o+"]"}function d3(o){return h({},o,{"data-precedence":o.precedence,precedence:null})}function rM(o,c,f,x){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?x.loading=1:(c=o.createElement("link"),x.preload=c,c.addEventListener("load",function(){return x.loading|=1}),c.addEventListener("error",function(){return x.loading|=2}),fr(c,"link",f),Jn(c),o.head.appendChild(c))}function _h(o){return'[src="'+Zi(o)+'"]'}function hg(o){return"script[async]"+o}function h3(o,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var x=o.querySelector('style[data-href~="'+Zi(f.href)+'"]');if(x)return c.instance=x,Jn(x),x;var S=h({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return x=(o.ownerDocument||o).createElement("style"),Jn(x),fr(x,"style",S),mx(x,f.precedence,o),c.instance=x;case"stylesheet":S=Dh(f.href);var C=o.querySelector(dg(S));if(C)return c.state.loading|=4,c.instance=C,Jn(C),C;x=d3(f),(S=aa.get(S))&&Cw(x,S),C=(o.ownerDocument||o).createElement("link"),Jn(C);var q=C;return q._p=new Promise(function(Z,le){q.onload=Z,q.onerror=le}),fr(C,"link",x),c.state.loading|=4,mx(C,f.precedence,o),c.instance=C;case"script":return C=_h(f.src),(S=o.querySelector(hg(C)))?(c.instance=S,Jn(S),S):(x=f,(S=aa.get(C))&&(x=h({},f),Nw(x,S)),o=o.ownerDocument||o,S=o.createElement("script"),Jn(S),fr(S,"link",x),o.head.appendChild(S),c.instance=S);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(x=c.instance,c.state.loading|=4,mx(x,f.precedence,o));return c.instance}function mx(o,c,f){for(var x=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=x.length?x[x.length-1]:null,C=S,q=0;q<x.length;q++){var Z=x[q];if(Z.dataset.precedence===c)C=Z;else if(C!==S)break}C?C.parentNode.insertBefore(o,C.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(o,c.firstChild))}function Cw(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function Nw(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var bx=null;function f3(o,c,f){if(bx===null){var x=new Map,S=bx=new Map;S.set(f,x)}else S=bx,x=S.get(f),x||(x=new Map,S.set(f,x));if(x.has(o))return x;for(x.set(o,null),f=f.getElementsByTagName(o),S=0;S<f.length;S++){var C=f[S];if(!(C[Ua]||C[on]||o==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var q=C.getAttribute(c)||"";q=o+q;var Z=x.get(q);Z?Z.push(C):x.set(q,[C])}}return x}function p3(o,c,f){o=o.ownerDocument||o,o.head.insertBefore(f,c==="title"?o.querySelector("head > title"):null)}function iM(o,c,f){if(f===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function g3(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var fg=null;function aM(){}function sM(o,c,f){if(fg===null)throw Error(n(475));var x=fg;if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var S=Dh(f.href),C=o.querySelector(dg(S));if(C){o=C._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(x.count++,x=yx.bind(x),o.then(x,x)),c.state.loading|=4,c.instance=C,Jn(C);return}C=o.ownerDocument||o,f=d3(f),(S=aa.get(S))&&Cw(f,S),C=C.createElement("link"),Jn(C);var q=C;q._p=new Promise(function(Z,le){q.onload=Z,q.onerror=le}),fr(C,"link",f),c.instance=C}x.stylesheets===null&&(x.stylesheets=new Map),x.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(x.count++,c=yx.bind(x),o.addEventListener("load",c),o.addEventListener("error",c))}}function oM(){if(fg===null)throw Error(n(475));var o=fg;return o.stylesheets&&o.count===0&&Uw(o,o.stylesheets),0<o.count?function(c){var f=setTimeout(function(){if(o.stylesheets&&Uw(o,o.stylesheets),o.unsuspend){var x=o.unsuspend;o.unsuspend=null,x()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(f)}}:null}function yx(){if(this.count--,this.count===0){if(this.stylesheets)Uw(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var xx=null;function Uw(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,xx=new Map,c.forEach(lM,o),xx=null,yx.call(o))}function lM(o,c){if(!(c.state.loading&4)){var f=xx.get(o);if(f)var x=f.get(null);else{f=new Map,xx.set(o,f);for(var S=o.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<S.length;C++){var q=S[C];(q.nodeName==="LINK"||q.getAttribute("media")!=="not all")&&(f.set(q.dataset.precedence,q),x=q)}x&&f.set(null,x)}S=c.instance,q=S.getAttribute("data-precedence"),C=f.get(q)||x,C===x&&f.set(null,S),f.set(q,S),this.count++,x=yx.bind(this),S.addEventListener("load",x),S.addEventListener("error",x),C?C.parentNode.insertBefore(S,C.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(S,o.firstChild)),c.state.loading|=4}}var pg={$$typeof:A,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function cM(o,c,f,x,S,C,q,Z){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yi(0),this.hiddenUpdates=Yi(null),this.identifierPrefix=x,this.onUncaughtError=S,this.onCaughtError=C,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function m3(o,c,f,x,S,C,q,Z,le,Ae,Oe,Be){return o=new cM(o,c,f,q,Z,le,Ae,Be),c=1,C===!0&&(c|=24),C=yi(3,null,null,c),o.current=C,C.stateNode=o,c=h2(),c.refCount++,o.pooledCache=c,c.refCount++,C.memoizedState={element:x,isDehydrated:f,cache:c},m2(C),o}function b3(o){return o?(o=th,o):th}function y3(o,c,f,x,S,C){S=b3(S),x.context===null?x.context=S:x.pendingContext=S,x=dl(c),x.payload={element:f},C=C===void 0?null:C,C!==null&&(x.callback=C),f=hl(o,x,c),f!==null&&(Di(f,o,c),qp(f,o,c))}function x3(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<c?f:c}}function Rw(o,c){x3(o,c),(o=o.alternate)&&x3(o,c)}function v3(o){if(o.tag===13){var c=eh(o,67108864);c!==null&&Di(c,o,67108864),Rw(o,67108864)}}var vx=!0;function uM(o,c,f,x){var S=P.T;P.T=null;var C=B.p;try{B.p=2,jw(o,c,f,x)}finally{B.p=C,P.T=S}}function dM(o,c,f,x){var S=P.T;P.T=null;var C=B.p;try{B.p=8,jw(o,c,f,x)}finally{B.p=C,P.T=S}}function jw(o,c,f,x){if(vx){var S=Fw(x);if(S===null)vw(o,c,x,wx,f),k3(o,x);else if(fM(S,o,c,f,x))x.stopPropagation();else if(k3(o,x),c&4&&-1<hM.indexOf(o)){for(;S!==null;){var C=mi(S);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var q=Ze(C.pendingLanes);if(q!==0){var Z=C;for(Z.pendingLanes|=2,Z.entangledLanes|=2;q;){var le=1<<31-ze(q);Z.entanglements[1]|=le,q&=~le}ss(C),(Wt&6)===0&&(ix=re()+500,og(0))}}break;case 13:Z=eh(C,2),Z!==null&&Di(Z,C,2),sx(),Rw(C,2)}if(C=Fw(x),C===null&&vw(o,c,x,wx,f),C===S)break;S=C}S!==null&&x.stopPropagation()}else vw(o,c,x,null,f)}}function Fw(o){return o=Bv(o),Iw(o)}var wx=null;function Iw(o){if(wx=null,o=Ps(o),o!==null){var c=a(o);if(c===null)o=null;else{var f=c.tag;if(f===13){if(o=s(c),o!==null)return o;o=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return wx=o,null}function w3(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case ue:return 2;case Ce:return 8;case Ne:case pe:return 32;case se:return 268435456;default:return 32}default:return 32}}var Ow=!1,Al=null,Sl=null,El=null,gg=new Map,mg=new Map,Tl=[],hM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function k3(o,c){switch(o){case"focusin":case"focusout":Al=null;break;case"dragenter":case"dragleave":Sl=null;break;case"mouseover":case"mouseout":El=null;break;case"pointerover":case"pointerout":gg.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":mg.delete(c.pointerId)}}function bg(o,c,f,x,S,C){return o===null||o.nativeEvent!==C?(o={blockedOn:c,domEventName:f,eventSystemFlags:x,nativeEvent:C,targetContainers:[S]},c!==null&&(c=mi(c),c!==null&&v3(c)),o):(o.eventSystemFlags|=x,c=o.targetContainers,S!==null&&c.indexOf(S)===-1&&c.push(S),o)}function fM(o,c,f,x,S){switch(c){case"focusin":return Al=bg(Al,o,c,f,x,S),!0;case"dragenter":return Sl=bg(Sl,o,c,f,x,S),!0;case"mouseover":return El=bg(El,o,c,f,x,S),!0;case"pointerover":var C=S.pointerId;return gg.set(C,bg(gg.get(C)||null,o,c,f,x,S)),!0;case"gotpointercapture":return C=S.pointerId,mg.set(C,bg(mg.get(C)||null,o,c,f,x,S)),!0}return!1}function D3(o){var c=Ps(o.target);if(c!==null){var f=a(c);if(f!==null){if(c=f.tag,c===13){if(c=s(f),c!==null){o.blockedOn=c,Sr(o.priority,function(){if(f.tag===13){var x=ki();x=Ve(x);var S=eh(f,x);S!==null&&Di(S,f,x),Rw(f,x)}});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function kx(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var f=Fw(o.nativeEvent);if(f===null){f=o.nativeEvent;var x=new f.constructor(f.type,f);Lv=x,f.target.dispatchEvent(x),Lv=null}else return c=mi(f),c!==null&&v3(c),o.blockedOn=f,!1;c.shift()}return!0}function _3(o,c,f){kx(o)&&f.delete(c)}function pM(){Ow=!1,Al!==null&&kx(Al)&&(Al=null),Sl!==null&&kx(Sl)&&(Sl=null),El!==null&&kx(El)&&(El=null),gg.forEach(_3),mg.forEach(_3)}function Dx(o,c){o.blockedOn===c&&(o.blockedOn=null,Ow||(Ow=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,pM)))}var _x=null;function A3(o){_x!==o&&(_x=o,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){_x===o&&(_x=null);for(var c=0;c<o.length;c+=3){var f=o[c],x=o[c+1],S=o[c+2];if(typeof x!="function"){if(Iw(x||f)===null)continue;break}var C=mi(f);C!==null&&(o.splice(c,3),c-=3,I2(C,{pending:!0,data:S,method:f.method,action:x},x,S))}}))}function yg(o){function c(le){return Dx(le,o)}Al!==null&&Dx(Al,o),Sl!==null&&Dx(Sl,o),El!==null&&Dx(El,o),gg.forEach(c),mg.forEach(c);for(var f=0;f<Tl.length;f++){var x=Tl[f];x.blockedOn===o&&(x.blockedOn=null)}for(;0<Tl.length&&(f=Tl[0],f.blockedOn===null);)D3(f),f.blockedOn===null&&Tl.shift();if(f=(o.ownerDocument||o).$$reactFormReplay,f!=null)for(x=0;x<f.length;x+=3){var S=f[x],C=f[x+1],q=S[un]||null;if(typeof C=="function")q||A3(f);else if(q){var Z=null;if(C&&C.hasAttribute("formAction")){if(S=C,q=C[un]||null)Z=q.formAction;else if(Iw(S)!==null)continue}else Z=q.action;typeof Z=="function"?f[x+1]=Z:(f.splice(x,3),x-=3),A3(f)}}}function Mw(o){this._internalRoot=o}Ax.prototype.render=Mw.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(n(409));var f=c.current,x=ki();y3(f,x,o,c,null,null)},Ax.prototype.unmount=Mw.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;y3(o.current,2,null,o,null,null),sx(),c[Zr]=null}};function Ax(o){this._internalRoot=o}Ax.prototype.unstable_scheduleHydration=function(o){if(o){var c=Xt();o={blockedOn:null,target:o,priority:c};for(var f=0;f<Tl.length&&c!==0&&c<Tl[f].priority;f++);Tl.splice(f,0,o),f===0&&D3(o)}};var S3=e.version;if(S3!=="19.1.1")throw Error(n(527,S3,"19.1.1"));B.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=u(c),o=o!==null?d(o):null,o=o===null?null:o.stateNode,o};var gM={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sx.isDisabled&&Sx.supportsFiber)try{ae=Sx.inject(gM),ke=Sx}catch{}}return vg.createRoot=function(o,c){if(!i(o))throw Error(n(299));var f=!1,x="",S=WT,C=HT,q=qT,Z=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onUncaughtError!==void 0&&(S=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(q=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(Z=c.unstable_transitionCallbacks)),c=m3(o,1,!1,null,null,f,x,S,C,q,Z,null),o[Zr]=c.current,xw(o),new Mw(c)},vg.hydrateRoot=function(o,c,f){if(!i(o))throw Error(n(299));var x=!1,S="",C=WT,q=HT,Z=qT,le=null,Ae=null;return f!=null&&(f.unstable_strictMode===!0&&(x=!0),f.identifierPrefix!==void 0&&(S=f.identifierPrefix),f.onUncaughtError!==void 0&&(C=f.onUncaughtError),f.onCaughtError!==void 0&&(q=f.onCaughtError),f.onRecoverableError!==void 0&&(Z=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(le=f.unstable_transitionCallbacks),f.formState!==void 0&&(Ae=f.formState)),c=m3(o,1,!0,c,f??null,x,S,C,q,Z,le,Ae),c.context=b3(null),f=c.current,x=ki(),x=Ve(x),S=dl(x),S.callback=null,hl(f,S,x),f=x,c.current.lanes=f,Y(c,f),ss(c),o[Zr]=c.current,xw(o),new Ax(c)},vg.version="19.1.1",vg}var j3;function TM(){if(j3)return Pw.exports;j3=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Pw.exports=EM(),Pw.exports}var CM=TM();const NM=ey(CM);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var F3="popstate";function UM(r={}){function e(n,i){let{pathname:a,search:s,hash:l}=n.location;return _D("",{pathname:a,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:cm(i)}return jM(e,t,null,r)}function mn(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function _a(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RM(){return Math.random().toString(36).substring(2,10)}function I3(r,e){return{usr:r.state,key:r.key,idx:e}}function _D(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?mp(e):e,state:t,key:e&&e.key||n||RM()}}function cm({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function mp(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function jM(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,l="POP",u=null,d=h();d==null&&(d=0,s.replaceState({...s.state,idx:d},""));function h(){return(s.state||{idx:null}).idx}function g(){l="POP";let w=h(),k=w==null?null:w-d;d=w,u&&u({action:l,location:v.location,delta:k})}function b(w,k){l="PUSH";let _=_D(v.location,w,k);d=h()+1;let A=I3(_,d),N=v.createHref(_);try{s.pushState(A,"",N)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(N)}a&&u&&u({action:l,location:v.location,delta:1})}function y(w,k){l="REPLACE";let _=_D(v.location,w,k);d=h();let A=I3(_,d),N=v.createHref(_);s.replaceState(A,"",N),a&&u&&u({action:l,location:v.location,delta:0})}function D(w){return FM(w)}let v={get action(){return l},get location(){return r(i,s)},listen(w){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(F3,g),u=w,()=>{i.removeEventListener(F3,g),u=null}},createHref(w){return e(i,w)},createURL:D,encodeLocation(w){let k=D(w);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:b,replace:y,go(w){return s.go(w)}};return v}function FM(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),mn(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:cm(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function DR(r,e,t="/"){return IM(r,e,t,!1)}function IM(r,e,t,n){let i=typeof e=="string"?mp(e):e,a=el(i.pathname||"/",t);if(a==null)return null;let s=_R(r);OM(s);let l=null;for(let u=0;l==null&&u<s.length;++u){let d=GM(a);l=VM(s[u],d,n)}return l}function _R(r,e=[],t=[],n="",i=!1){let a=(s,l,u=i,d)=>{let h={relativePath:d===void 0?s.path||"":d,caseSensitive:s.caseSensitive===!0,childrenIndex:l,route:s};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&u)return;mn(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let g=Qo([n,h.relativePath]),b=t.concat(h);s.children&&s.children.length>0&&(mn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),_R(s.children,e,b,g,u)),!(s.path==null&&!s.index)&&e.push({path:g,score:HM(g,s.index),routesMeta:b})};return r.forEach((s,l)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))a(s,l);else for(let d of AR(s.path))a(s,l,!0,d)}),e}function AR(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let s=AR(n.join("/")),l=[];return l.push(...s.map(u=>u===""?a:[a,u].join("/"))),i&&l.push(...s),l.map(u=>r.startsWith("/")&&u===""?"/":u)}function OM(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:qM(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var MM=/^:[\w-]+$/,LM=3,BM=2,PM=1,zM=10,WM=-2,O3=r=>r==="*";function HM(r,e){let t=r.split("/"),n=t.length;return t.some(O3)&&(n+=WM),e&&(n+=BM),t.filter(i=>!O3(i)).reduce((i,a)=>i+(MM.test(a)?LM:a===""?PM:zM),n)}function qM(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function VM(r,e,t=!1){let{routesMeta:n}=r,i={},a="/",s=[];for(let l=0;l<n.length;++l){let u=n[l],d=l===n.length-1,h=a==="/"?e:e.slice(a.length)||"/",g=e1({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),b=u.route;if(!g&&d&&t&&!n[n.length-1].route.index&&(g=e1({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!g)return null;Object.assign(i,g.params),s.push({params:i,pathname:Qo([a,g.pathname]),pathnameBase:QM(Qo([a,g.pathnameBase])),route:b}),g.pathnameBase!=="/"&&(a=Qo([a,g.pathnameBase]))}return s}function e1(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=XM(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((d,{paramName:h,isOptional:g},b)=>{if(h==="*"){let D=l[b]||"";s=a.slice(0,a.length-D.length).replace(/(.)\/+$/,"$1")}const y=l[b];return g&&!y?d[h]=void 0:d[h]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:s,pattern:r}}function XM(r,e=!1,t=!0){_a(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function GM(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _a(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function el(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function $M(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?mp(r):r;return{pathname:t?t.startsWith("/")?t:YM(t,e):e,search:ZM(n),hash:JM(i)}}function YM(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Hw(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function KM(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cA(r){let e=KM(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function uA(r,e,t,n=!1){let i;typeof r=="string"?i=mp(r):(i={...r},mn(!i.pathname||!i.pathname.includes("?"),Hw("?","pathname","search",i)),mn(!i.pathname||!i.pathname.includes("#"),Hw("#","pathname","hash",i)),mn(!i.search||!i.search.includes("#"),Hw("#","search","hash",i)));let a=r===""||i.pathname==="",s=a?"/":i.pathname,l;if(s==null)l=t;else{let g=e.length-1;if(!n&&s.startsWith("..")){let b=s.split("/");for(;b[0]==="..";)b.shift(),g-=1;i.pathname=b.join("/")}l=g>=0?e[g]:"/"}let u=$M(i,l),d=s&&s!=="/"&&s.endsWith("/"),h=(a||s===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var Qo=r=>r.join("/").replace(/\/\/+/g,"/"),QM=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),ZM=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,JM=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function eL(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var SR=["POST","PUT","PATCH","DELETE"];new Set(SR);var tL=["GET",...SR];new Set(tL);var bp=Q.createContext(null);bp.displayName="DataRouter";var H1=Q.createContext(null);H1.displayName="DataRouterState";Q.createContext(!1);var ER=Q.createContext({isTransitioning:!1});ER.displayName="ViewTransition";var nL=Q.createContext(new Map);nL.displayName="Fetchers";var rL=Q.createContext(null);rL.displayName="Await";var es=Q.createContext(null);es.displayName="Navigation";var ty=Q.createContext(null);ty.displayName="Location";var Ea=Q.createContext({outlet:null,matches:[],isDataRoute:!1});Ea.displayName="Route";var dA=Q.createContext(null);dA.displayName="RouteError";function iL(r,{relative:e}={}){mn(yp(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=Q.useContext(es),{hash:i,pathname:a,search:s}=ny(r,{relative:e}),l=a;return t!=="/"&&(l=a==="/"?t:Qo([t,a])),n.createHref({pathname:l,search:s,hash:i})}function yp(){return Q.useContext(ty)!=null}function Ta(){return mn(yp(),"useLocation() may be used only in the context of a <Router> component."),Q.useContext(ty).location}var TR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function CR(r){Q.useContext(es).static||Q.useLayoutEffect(r)}function Kr(){let{isDataRoute:r}=Q.useContext(Ea);return r?xL():aL()}function aL(){mn(yp(),"useNavigate() may be used only in the context of a <Router> component.");let r=Q.useContext(bp),{basename:e,navigator:t}=Q.useContext(es),{matches:n}=Q.useContext(Ea),{pathname:i}=Ta(),a=JSON.stringify(cA(n)),s=Q.useRef(!1);return CR(()=>{s.current=!0}),Q.useCallback((u,d={})=>{if(_a(s.current,TR),!s.current)return;if(typeof u=="number"){t.go(u);return}let h=uA(u,JSON.parse(a),i,d.relative==="path");r==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Qo([e,h.pathname])),(d.replace?t.replace:t.push)(h,d.state,d)},[e,t,a,i,r])}var sL=Q.createContext(null);function oL(r){let e=Q.useContext(Ea).outlet;return Q.useMemo(()=>e&&Q.createElement(sL.Provider,{value:r},e),[e,r])}function hA(){let{matches:r}=Q.useContext(Ea),e=r[r.length-1];return e?e.params:{}}function ny(r,{relative:e}={}){let{matches:t}=Q.useContext(Ea),{pathname:n}=Ta(),i=JSON.stringify(cA(t));return Q.useMemo(()=>uA(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function lL(r,e){return NR(r,e)}function NR(r,e,t,n,i){var _;mn(yp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=Q.useContext(es),{matches:s}=Q.useContext(Ea),l=s[s.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",g=l&&l.route;{let A=g&&g.path||"";UR(d,!g||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let b=Ta(),y;if(e){let A=typeof e=="string"?mp(e):e;mn(h==="/"||((_=A.pathname)==null?void 0:_.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${A.pathname}" was given in the \`location\` prop.`),y=A}else y=b;let D=y.pathname||"/",v=D;if(h!=="/"){let A=h.replace(/^\//,"").split("/");v="/"+D.replace(/^\//,"").split("/").slice(A.length).join("/")}let w=DR(r,{pathname:v});_a(g||w!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),_a(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=fL(w&&w.map(A=>Object.assign({},A,{params:Object.assign({},u,A.params),pathname:Qo([h,a.encodeLocation?a.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?h:Qo([h,a.encodeLocation?a.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),s,t,n,i);return e&&k?Q.createElement(ty.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},k):k}function cL(){let r=yL(),e=eL(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},s=null;return console.error("Error handled by React Router default ErrorBoundary:",r),s=Q.createElement(Q.Fragment,null,Q.createElement("p",null,"💿 Hey developer 👋"),Q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Q.createElement("code",{style:a},"ErrorBoundary")," or"," ",Q.createElement("code",{style:a},"errorElement")," prop on your route.")),Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),t?Q.createElement("pre",{style:i},t):null,s)}var uL=Q.createElement(cL,null),dL=class extends Q.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?Q.createElement(Ea.Provider,{value:this.props.routeContext},Q.createElement(dA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function hL({routeContext:r,match:e,children:t}){let n=Q.useContext(bp);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),Q.createElement(Ea.Provider,{value:r},t)}function fL(r,e=[],t=null,n=null,i=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let a=r,s=t==null?void 0:t.errors;if(s!=null){let d=a.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);mn(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,u=-1;if(t)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:g,errors:b}=t,y=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!b||b[h.route.id]===void 0);if(h.route.lazy||y){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,g)=>{let b,y=!1,D=null,v=null;t&&(b=s&&h.route.id?s[h.route.id]:void 0,D=h.route.errorElement||uL,l&&(u<0&&g===0?(UR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,v=null):u===g&&(y=!0,v=h.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,g+1)),k=()=>{let _;return b?_=D:y?_=v:h.route.Component?_=Q.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=d,Q.createElement(hL,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:t!=null},children:_})};return t&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?Q.createElement(dL,{location:t.location,revalidation:t.revalidation,component:D,error:b,children:k(),routeContext:{outlet:null,matches:w,isDataRoute:!0},unstable_onError:n}):k()},null)}function fA(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pL(r){let e=Q.useContext(bp);return mn(e,fA(r)),e}function gL(r){let e=Q.useContext(H1);return mn(e,fA(r)),e}function mL(r){let e=Q.useContext(Ea);return mn(e,fA(r)),e}function pA(r){let e=mL(r),t=e.matches[e.matches.length-1];return mn(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function bL(){return pA("useRouteId")}function yL(){var n;let r=Q.useContext(dA),e=gL("useRouteError"),t=pA("useRouteError");return r!==void 0?r:(n=e.errors)==null?void 0:n[t]}function xL(){let{router:r}=pL("useNavigate"),e=pA("useNavigate"),t=Q.useRef(!1);return CR(()=>{t.current=!0}),Q.useCallback(async(i,a={})=>{_a(t.current,TR),t.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:e,...a}))},[r,e])}var M3={};function UR(r,e,t){!e&&!M3[r]&&(M3[r]=!0,_a(!1,t))}Q.memo(vL);function vL({routes:r,future:e,state:t,unstable_onError:n}){return NR(r,void 0,t,n,e)}function AD({to:r,replace:e,state:t,relative:n}){mn(yp(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=Q.useContext(es);_a(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=Q.useContext(Ea),{pathname:s}=Ta(),l=Kr(),u=uA(r,cA(a),s,n==="path"),d=JSON.stringify(u);return Q.useEffect(()=>{l(JSON.parse(d),{replace:e,state:t,relative:n})},[l,d,n,e,t]),null}function RR(r){return oL(r.context)}function ir(r){mn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function wL({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:a=!1}){mn(!yp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=r.replace(/^\/*/,"/"),l=Q.useMemo(()=>({basename:s,navigator:i,static:a,future:{}}),[s,i,a]);typeof t=="string"&&(t=mp(t));let{pathname:u="/",search:d="",hash:h="",state:g=null,key:b="default"}=t,y=Q.useMemo(()=>{let D=el(u,s);return D==null?null:{location:{pathname:D,search:d,hash:h,state:g,key:b},navigationType:n}},[s,u,d,h,g,b,n]);return _a(y!=null,`<Router basename="${s}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:Q.createElement(es.Provider,{value:l},Q.createElement(ty.Provider,{children:e,value:y}))}function kL({children:r,location:e}){return lL(SD(r),e)}function SD(r,e=[]){let t=[];return Q.Children.forEach(r,(n,i)=>{if(!Q.isValidElement(n))return;let a=[...e,i];if(n.type===Q.Fragment){t.push.apply(t,SD(n.props.children,a));return}mn(n.type===ir,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=SD(n.props.children,a)),t.push(s)}),t}var e0="get",t0="application/x-www-form-urlencoded";function q1(r){return r!=null&&typeof r.tagName=="string"}function DL(r){return q1(r)&&r.tagName.toLowerCase()==="button"}function _L(r){return q1(r)&&r.tagName.toLowerCase()==="form"}function AL(r){return q1(r)&&r.tagName.toLowerCase()==="input"}function SL(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function EL(r,e){return r.button===0&&(!e||e==="_self")&&!SL(r)}function ED(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,t)=>{let n=r[t];return e.concat(Array.isArray(n)?n.map(i=>[t,i]):[[t,n]])},[]))}function TL(r,e){let t=ED(r);return e&&e.forEach((n,i)=>{t.has(i)||e.getAll(i).forEach(a=>{t.append(i,a)})}),t}var Ex=null;function CL(){if(Ex===null)try{new FormData(document.createElement("form"),0),Ex=!1}catch{Ex=!0}return Ex}var NL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qw(r){return r!=null&&!NL.has(r)?(_a(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${t0}"`),null):r}function UL(r,e){let t,n,i,a,s;if(_L(r)){let l=r.getAttribute("action");n=l?el(l,e):null,t=r.getAttribute("method")||e0,i=qw(r.getAttribute("enctype"))||t0,a=new FormData(r)}else if(DL(r)||AL(r)&&(r.type==="submit"||r.type==="image")){let l=r.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=r.getAttribute("formaction")||l.getAttribute("action");if(n=u?el(u,e):null,t=r.getAttribute("formmethod")||l.getAttribute("method")||e0,i=qw(r.getAttribute("formenctype"))||qw(l.getAttribute("enctype"))||t0,a=new FormData(l,r),!CL()){let{name:d,type:h,value:g}=r;if(h==="image"){let b=d?`${d}.`:"";a.append(`${b}x`,"0"),a.append(`${b}y`,"0")}else d&&a.append(d,g)}}else{if(q1(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=e0,n=null,i=t0,s=r}return a&&i==="text/plain"&&(s=a,a=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function gA(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function RL(r,e,t){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&el(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function jL(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function FL(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function IL(r,e,t){let n=await Promise.all(r.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await jL(a,t);return s.links?s.links():[]}return[]}));return BL(n.flat(1).filter(FL).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function L3(r,e,t,n,i,a){let s=(u,d)=>t[d]?u.route.id!==t[d].route.id:!0,l=(u,d)=>{var h;return t[d].pathname!==u.pathname||((h=t[d].route.path)==null?void 0:h.endsWith("*"))&&t[d].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,d)=>s(u,d)||l(u,d)):a==="data"?e.filter((u,d)=>{var g;let h=n.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(s(u,d)||l(u,d))return!0;if(u.route.shouldRevalidate){let b=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(r,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function OL(r,e,{includeHydrateFallback:t}={}){return ML(r.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function ML(r){return[...new Set(r)]}function LL(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function BL(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let a=JSON.stringify(LL(i));return t.has(a)||(t.add(a),n.push({key:a,link:i})),n},[])}function jR(){let r=Q.useContext(bp);return gA(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function PL(){let r=Q.useContext(H1);return gA(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var mA=Q.createContext(void 0);mA.displayName="FrameworkContext";function FR(){let r=Q.useContext(mA);return gA(r,"You must render this element inside a <HydratedRouter> element"),r}function zL(r,e){let t=Q.useContext(mA),[n,i]=Q.useState(!1),[a,s]=Q.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:g}=e,b=Q.useRef(null);Q.useEffect(()=>{if(r==="render"&&s(!0),r==="viewport"){let v=k=>{k.forEach(_=>{s(_.isIntersecting)})},w=new IntersectionObserver(v,{threshold:.5});return b.current&&w.observe(b.current),()=>{w.disconnect()}}},[r]),Q.useEffect(()=>{if(n){let v=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(v)}}},[n]);let y=()=>{i(!0)},D=()=>{i(!1),s(!1)};return t?r!=="intent"?[a,b,{}]:[a,b,{onFocus:wg(l,y),onBlur:wg(u,D),onMouseEnter:wg(d,y),onMouseLeave:wg(h,D),onTouchStart:wg(g,y)}]:[!1,b,{}]}function wg(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function WL({page:r,...e}){let{router:t}=jR(),n=Q.useMemo(()=>DR(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?Q.createElement(qL,{page:r,matches:n,...e}):null}function HL(r){let{manifest:e,routeModules:t}=FR(),[n,i]=Q.useState([]);return Q.useEffect(()=>{let a=!1;return IL(r,e,t).then(s=>{a||i(s)}),()=>{a=!0}},[r,e,t]),n}function qL({page:r,matches:e,...t}){let n=Ta(),{manifest:i,routeModules:a}=FR(),{basename:s}=jR(),{loaderData:l,matches:u}=PL(),d=Q.useMemo(()=>L3(r,e,u,i,n,"data"),[r,e,u,i,n]),h=Q.useMemo(()=>L3(r,e,u,i,n,"assets"),[r,e,u,i,n]),g=Q.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let D=new Set,v=!1;if(e.forEach(k=>{var A;let _=i.routes[k.route.id];!_||!_.hasLoader||(!d.some(N=>N.route.id===k.route.id)&&k.route.id in l&&((A=a[k.route.id])!=null&&A.shouldRevalidate)||_.hasClientLoader?v=!0:D.add(k.route.id))}),D.size===0)return[];let w=RL(r,s,"data");return v&&D.size>0&&w.searchParams.set("_routes",e.filter(k=>D.has(k.route.id)).map(k=>k.route.id).join(",")),[w.pathname+w.search]},[s,l,n,i,d,e,r,a]),b=Q.useMemo(()=>OL(h,i),[h,i]),y=HL(h);return Q.createElement(Q.Fragment,null,g.map(D=>Q.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...t})),b.map(D=>Q.createElement("link",{key:D,rel:"modulepreload",href:D,...t})),y.map(({key:D,link:v})=>Q.createElement("link",{key:D,nonce:t.nonce,...v})))}function VL(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var IR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{IR&&(window.__reactRouterVersion="7.9.4")}catch{}function XL({basename:r,children:e,window:t}){let n=Q.useRef();n.current==null&&(n.current=UM({window:t,v5Compat:!0}));let i=n.current,[a,s]=Q.useState({action:i.action,location:i.location}),l=Q.useCallback(u=>{Q.startTransition(()=>s(u))},[s]);return Q.useLayoutEffect(()=>i.listen(l),[i,l]),Q.createElement(wL,{basename:r,children:e,location:a.location,navigationType:a.action,navigator:i})}var OR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rc=Q.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:a,replace:s,state:l,target:u,to:d,preventScrollReset:h,viewTransition:g,...b},y){let{basename:D}=Q.useContext(es),v=typeof d=="string"&&OR.test(d),w,k=!1;if(typeof d=="string"&&v&&(w=d,IR))try{let I=new URL(window.location.href),F=d.startsWith("//")?new URL(I.protocol+d):new URL(d),G=el(F.pathname,D);F.origin===I.origin&&G!=null?d=G+F.search+F.hash:k=!0}catch{_a(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=iL(d,{relative:i}),[A,N,E]=zL(n,b),T=KL(d,{replace:s,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:g});function R(I){e&&e(I),I.defaultPrevented||T(I)}let M=Q.createElement("a",{...b,...E,href:w||_,onClick:k||a?e:R,ref:VL(y,N),target:u,"data-discover":!v&&t==="render"?"true":void 0});return A&&!v?Q.createElement(Q.Fragment,null,M,Q.createElement(WL,{page:_})):M});Rc.displayName="Link";var GL=Q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:a,to:s,viewTransition:l,children:u,...d},h){let g=ny(s,{relative:d.relative}),b=Ta(),y=Q.useContext(H1),{navigator:D,basename:v}=Q.useContext(es),w=y!=null&&n9(g)&&l===!0,k=D.encodeLocation?D.encodeLocation(g).pathname:g.pathname,_=b.pathname,A=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(_=_.toLowerCase(),A=A?A.toLowerCase():null,k=k.toLowerCase()),A&&v&&(A=el(A,v)||A);const N=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let E=_===k||!i&&_.startsWith(k)&&_.charAt(N)==="/",T=A!=null&&(A===k||!i&&A.startsWith(k)&&A.charAt(k.length)==="/"),R={isActive:E,isPending:T,isTransitioning:w},M=E?e:void 0,I;typeof n=="function"?I=n(R):I=[n,E?"active":null,T?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let F=typeof a=="function"?a(R):a;return Q.createElement(Rc,{...d,"aria-current":M,className:I,ref:h,style:F,to:s,viewTransition:l},typeof u=="function"?u(R):u)});GL.displayName="NavLink";var $L=Q.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:a,method:s=e0,action:l,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:g,...b},y)=>{let D=e9(),v=t9(l,{relative:d}),w=s.toLowerCase()==="get"?"get":"post",k=typeof l=="string"&&OR.test(l),_=A=>{if(u&&u(A),A.defaultPrevented)return;A.preventDefault();let N=A.nativeEvent.submitter,E=(N==null?void 0:N.getAttribute("formmethod"))||s;D(N||A.currentTarget,{fetcherKey:e,method:E,navigate:t,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:g})};return Q.createElement("form",{ref:y,method:w,action:v,onSubmit:n?u:_,...b,"data-discover":!k&&r==="render"?"true":void 0})});$L.displayName="Form";function YL(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MR(r){let e=Q.useContext(bp);return mn(e,YL(r)),e}function KL(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:a,viewTransition:s}={}){let l=Kr(),u=Ta(),d=ny(r,{relative:a});return Q.useCallback(h=>{if(EL(h,e)){h.preventDefault();let g=t!==void 0?t:cm(u)===cm(d);l(r,{replace:g,state:n,preventScrollReset:i,relative:a,viewTransition:s})}},[u,l,d,t,n,e,r,i,a,s])}function QL(r){_a(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=Q.useRef(ED(r)),t=Q.useRef(!1),n=Ta(),i=Q.useMemo(()=>TL(n.search,t.current?null:e.current),[n.search]),a=Kr(),s=Q.useCallback((l,u)=>{const d=ED(typeof l=="function"?l(new URLSearchParams(i)):l);t.current=!0,a("?"+d,u)},[a,i]);return[i,s]}var ZL=0,JL=()=>`__${String(++ZL)}__`;function e9(){let{router:r}=MR("useSubmit"),{basename:e}=Q.useContext(es),t=bL();return Q.useCallback(async(n,i={})=>{let{action:a,method:s,encType:l,formData:u,body:d}=UL(n,e);if(i.navigate===!1){let h=i.fetcherKey||JL();await r.fetch(h,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||s,formEncType:i.encType||l,flushSync:i.flushSync})}else await r.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||s,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,e,t])}function t9(r,{relative:e}={}){let{basename:t}=Q.useContext(es),n=Q.useContext(Ea);mn(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...ny(r||".",{relative:e})},s=Ta();if(r==null){a.search=s.search;let l=new URLSearchParams(a.search),u=l.getAll("index");if(u.some(h=>h==="")){l.delete("index"),u.filter(g=>g).forEach(g=>l.append("index",g));let h=l.toString();a.search=h?`?${h}`:""}}return(!r||r===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Qo([t,a.pathname])),cm(a)}function n9(r,{relative:e}={}){let t=Q.useContext(ER);mn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=MR("useViewTransitionState"),i=ny(r,{relative:e});if(!t.isTransitioning)return!1;let a=el(t.currentLocation.pathname,n)||t.currentLocation.pathname,s=el(t.nextLocation.pathname,n)||t.nextLocation.pathname;return e1(i.pathname,s)!=null||e1(i.pathname,a)!=null}let De=class{static generateCorrelationId(){return crypto.randomUUID()}static getSessionContext(){return{correlationId:window.BOLT_CORRELATION_ID||this.generateCorrelationId(),sessionId:window.BOLT_SESSION_ID||"unknown",userId:window.BOLT_USER_ID||"anonymous",userAgent:navigator.userAgent,timestamp:new Date().toISOString(),url:window.location.href}}static createLogEntry(e,t,n,i){const a=this.getSessionContext();return{timestamp:a.timestamp,level:e,message:t,correlationId:a.correlationId,component:(i==null?void 0:i.component)||(n==null?void 0:n.component)||"Unknown",userId:a.userId,sessionId:a.sessionId,context:{...n,userAgent:a.userAgent,url:a.url},error:i}}static outputLog(e){const t=JSON.stringify(e,null,2);switch(e.level){case"critical":case"error":console.error(`[${e.level.toUpperCase()}]`,t);break;case"warn":console.warn("[WARN]",t);break;case"info":default:console.log("[INFO]",t);break}}static info(e,t){const n=this.createLogEntry("info",e,t);this.outputLog(n)}static warn(e,t){const n=this.createLogEntry("warn",e,t);this.outputLog(n)}static error(e,t){const n=this.createLogEntry("error",e.message,t,e);this.outputLog(n)}static critical(e,t){const n=this.createLogEntry("critical",e.message,t,e);this.outputLog(n)}static authAttempt(e,t){this.info(`Authentication attempt: ${e}`,{component:"AuthService",authMethod:e,attemptedEmail:t?this.sanitizeEmail(t):void 0})}static authSuccess(e,t){this.info(`Authentication success: ${e}`,{component:"AuthService",authMethod:e,userId:t})}static authError(e){this.error(e,{component:"AuthService",authMethod:e.authMethod,attemptedEmail:e.attemptedEmail?this.sanitizeEmail(e.attemptedEmail):void 0})}static aiRequest(e,t,n){this.info("AI request initiated",{component:"AIService",toolId:e,model:t,messageCount:n})}static aiSuccess(e,t,n,i){this.info("AI request completed",{component:"AIService",toolId:e,model:t,responseLength:n,processingTimeMs:i})}static aiError(e,t,n,i=0){this.error({...e,retryCount:i},{component:"AIService",toolId:t,model:n})}static aiFallback(e,t,n){this.warn("AI model fallback triggered",{component:"AIService",toolId:e,primaryModel:t,fallbackModel:n})}static sanitizeEmail(e){const[t,n]=e.split("@");return`${t.substring(0,2)}***@${n}`}static setCorrelationId(e){window.BOLT_CORRELATION_ID=e||this.generateCorrelationId()}static setSessionId(e){window.BOLT_SESSION_ID=e}static setUserId(e){window.BOLT_USER_ID=e}static getCorrelationId(){return window.BOLT_CORRELATION_ID||this.generateCorrelationId()}static performance(e,t,n){this.info(`Performance: ${e}`,{component:"Performance",operation:e,durationMs:t,...n})}static userAction(e,t){this.info(`User action: ${e}`,{component:"UserAction",action:e,...t})}};function r9({isOpen:r,title:e,message:t,confirmText:n="Confirm",cancelText:i="Cancel",variant:a="warning",onConfirm:s,onCancel:l}){if(!r)return null;const u={danger:"bg-red-600 hover:bg-red-700",warning:"bg-orange-600 hover:bg-orange-700",info:"bg-blue-600 hover:bg-blue-700"};return p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:p.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[e&&p.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:p.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e})}),p.jsx("div",{className:"px-6 py-4",children:p.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t})}),p.jsxs("div",{className:"px-6 py-4 bg-gray-50 rounded-b-lg flex justify-end gap-3",children:[i&&p.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:i}),p.jsx("button",{onClick:s,className:`px-4 py-2 text-sm font-medium text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${u[a]}`,children:n})]})]})})}const LR=Q.createContext(void 0);function i9({children:r}){const[e,t]=Q.useState(!1),[n,i]=Q.useState({message:""}),[a,s]=Q.useState(!1),[l,u]=Q.useState(null),[d,h]=Q.useState(null),g=Q.useCallback(v=>new Promise(w=>{i(v),s(!1),t(!0),u(()=>w)}),[]),b=Q.useCallback(v=>new Promise(w=>{i({...v,confirmText:v.buttonText||"OK"}),s(!0),t(!0),h(()=>w)}),[]),y=Q.useCallback(()=>{t(!1),a&&d?(d(),h(null)):l&&(l(!0),u(null))},[a,l,d]),D=Q.useCallback(()=>{t(!1),l&&(l(!1),u(null))},[l]);return p.jsxs(LR.Provider,{value:{confirm:g,alert:b},children:[r,p.jsx(r9,{isOpen:e,title:n.title,message:n.message,confirmText:n.confirmText,cancelText:a?void 0:n.cancelText,variant:n.variant||"warning",onConfirm:y,onCancel:a?y:D})]})}function ry(){const r=Q.useContext(LR);if(r===void 0)throw new Error("useConfirmDialog must be used within a DialogProvider");return r}const bA=({className:r})=>p.jsxs("div",{className:r,children:[p.jsx("img",{src:"https://iili.io/FDs8w2R.png",alt:"Artemo Logo",className:"h-full w-auto block dark:hidden"}),p.jsx("img",{src:"https://iili.io/FDswn5X.png",alt:"Artemo Logo",className:"h-full w-auto hidden dark:block"})]}),_t=({children:r,className:e,isFilled:t})=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:r}),Ka=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),p.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Aa=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("circle",{cx:"11",cy:"11",r:"8"}),p.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),BR=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),p.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),p.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),p.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),_r=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),p.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),p.jsx("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]}),t1=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("path",{d:"M1 4v6h6"}),p.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),Fs=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),p.jsx("circle",{cx:"9",cy:"7",r:"4"}),p.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),p.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),di=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),p.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),Sd=({className:r})=>p.jsx(_t,{className:r,children:p.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),V1=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),p.jsx("polyline",{points:"22,6 12,13 2,6"})]}),Cd=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),p.jsx("polyline",{points:"14 2 14 8 20 8"}),p.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),p.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),p.jsx("polyline",{points:"10 9 9 9 8 9"})]}),X1=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),p.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),p.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),p.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]}),Ed=({className:r})=>p.jsx(_t,{className:r,children:p.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),yA=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),p.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),Bc=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("circle",{cx:"12",cy:"12",r:"3"}),p.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),PR=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),p.jsx("circle",{cx:"12",cy:"12",r:"10"}),p.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),zR=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),p.jsx("polyline",{points:"16 17 21 12 16 7"}),p.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),WR=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),p.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),p.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),HR=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("circle",{cx:"12",cy:"12",r:"5"}),p.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),p.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),p.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),p.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),p.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),p.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),p.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),p.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),qR=({className:r})=>p.jsx(_t,{className:r,children:p.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),TD=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),p.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),G1=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),p.jsx("polyline",{points:"12 19 5 12 12 5"})]}),Gr=({className:r})=>p.jsx(_t,{className:r,children:p.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),Ms=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),p.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),VR=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),p.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),co=({className:r,isFilled:e})=>p.jsx(_t,{className:r,isFilled:e,children:p.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),XR=({className:r})=>p.jsx(_t,{className:r,children:p.jsx("path",{d:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),iy=({className:r})=>p.jsx(_t,{className:r,children:p.jsx("polyline",{points:"6 9 12 15 18 9"})}),Qa=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("polyline",{points:"3 6 5 6 21 6"}),p.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),GR=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),p.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),um=({className:r})=>p.jsx(_t,{className:r,children:p.jsx("polyline",{points:"20 6 9 17 4 12"})}),a9=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),p.jsx("circle",{cx:"9",cy:"7",r:"4"}),p.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),p.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"})]}),$1=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("circle",{cx:"12",cy:"12",r:"1"}),p.jsx("circle",{cx:"19",cy:"12",r:"1"}),p.jsx("circle",{cx:"5",cy:"12",r:"1"})]}),dm=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),p.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),p.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),n1=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),p.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),B3=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),p.jsx("polyline",{points:"17 6 23 6 23 12"})]}),$R=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),p.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),s9=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),p.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Ko=({className:r})=>p.jsxs(_t,{className:r,children:[p.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),p.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),p.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),xA=({className:r})=>p.jsx("img",{src:"https://iili.io/FbFGeB2.png",alt:"AI Avatar",className:r}),o9={success:{icon:n1,bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800",iconColor:"text-green-600 dark:text-green-400",titleColor:"text-green-800 dark:text-green-200",messageColor:"text-green-700 dark:text-green-300"},error:{icon:dm,bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",iconColor:"text-red-600 dark:text-red-400",titleColor:"text-red-800 dark:text-red-200",messageColor:"text-red-700 dark:text-red-300"},warning:{icon:dm,bgColor:"bg-yellow-50 dark:bg-yellow-900/20",borderColor:"border-yellow-200 dark:border-yellow-800",iconColor:"text-yellow-600 dark:text-yellow-400",titleColor:"text-yellow-800 dark:text-yellow-200",messageColor:"text-yellow-700 dark:text-yellow-300"},info:{icon:n1,bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",iconColor:"text-blue-600 dark:text-blue-400",titleColor:"text-blue-800 dark:text-blue-200",messageColor:"text-blue-700 dark:text-blue-300"}},l9=({id:r,type:e,title:t,message:n,duration:i=5e3,onDismiss:a})=>{const s=o9[e],l=s.icon;return Bn.useEffect(()=>{if(i>0){const u=setTimeout(()=>{a(r)},i);return()=>clearTimeout(u)}},[r,i,a]),p.jsxs("div",{className:`${s.bgColor} ${s.borderColor} border rounded-lg shadow-lg p-4 max-w-sm w-full transform transition-all duration-300 ease-in-out animate-slide-in-right`,children:[p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(l,{className:`w-5 h-5 ${s.iconColor} flex-shrink-0 mt-0.5`}),p.jsxs("div",{className:"flex-grow min-w-0",children:[t&&p.jsx("h4",{className:`font-semibold ${s.titleColor} mb-1`,children:t}),p.jsx("p",{className:`text-sm ${s.messageColor} leading-relaxed`,children:n})]}),p.jsx("button",{onClick:()=>a(r),className:`${s.iconColor} hover:opacity-70 transition-opacity flex-shrink-0`,children:p.jsx(Ms,{className:"w-4 h-4"})})]}),i>0&&p.jsx("div",{className:"mt-3 h-1 bg-black/10 dark:bg-white/10 rounded-full overflow-hidden",children:p.jsx("div",{className:`h-full ${s.iconColor.replace("text-","bg-")} rounded-full animate-progress`,style:{animation:`progress ${i}ms linear forwards`}})}),p.jsx("style",{children:`
        @keyframes slide-in-right {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        
        @keyframes progress {
          from { width: 100%; }
          to { width: 0%; }
        }
        
        .animate-slide-in-right {
          animation: slide-in-right 0.3s ease-out;
        }
        
        .animate-progress {
          animation: progress var(--duration) linear forwards;
        }
      `})]})},c9=({notifications:r,onDismiss:e})=>r.length===0?null:p.jsx("div",{className:"fixed top-4 right-4 z-[9999] space-y-3 pointer-events-none",children:r.map(t=>p.jsx("div",{className:"pointer-events-auto",children:p.jsx(l9,{...t,onDismiss:e})},t.id))}),YR=Q.createContext(void 0);function u9({children:r}){const[e,t]=Q.useState([]),n=Q.useCallback(g=>{const b=crypto.randomUUID(),y={id:b,...g};if(t(D=>[...D,y]),g.duration!==0){const D=g.duration||5e3;setTimeout(()=>{t(v=>v.filter(w=>w.id!==b))},D)}return b},[]),i=Q.useCallback(g=>{t(b=>b.filter(y=>y.id!==g))},[]),a=Q.useCallback(()=>{t([])},[]),s=Q.useCallback(g=>n(g),[n]),l=Q.useCallback((g,b,y)=>n({type:"success",message:g,title:b,duration:y}),[n]),u=Q.useCallback((g,b,y)=>n({type:"error",message:g,title:b,duration:y}),[n]),d=Q.useCallback((g,b,y)=>n({type:"info",message:g,title:b,duration:y}),[n]),h=Q.useCallback((g,b,y)=>n({type:"warning",message:g,title:b,duration:y}),[n]);return p.jsxs(YR.Provider,{value:{notify:s,success:l,error:u,info:d,warning:h,dismiss:i,dismissAll:a},children:[r,p.jsx(c9,{notifications:e,onDismiss:i})]})}function Qr(){const r=Q.useContext(YR);if(r===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return r}const d9={AUTH_INVALID_CREDENTIALS:"warn",AUTH_USER_EXISTS:"warn",AUTH_EMAIL_NOT_CONFIRMED:"warn",AUTH_NETWORK_ERROR:"error",AUTH_RATE_LIMIT:"warn",AUTH_GENERIC_ERROR:"error",AUTH_STATUS_CHECK_ERROR:"error",AUTH_SESSION_VALIDATION_ERROR:"warn",AUTH_SESSION_REFRESH_ERROR:"error",AUTH_TOKEN_EXPIRED:"warn",AUTH_INVALID_TOKEN:"warn",AUTH_STATE_ERROR:"error",AUTH_SUPABASE_NOT_CONFIGURED:"error",API_TOOLS_FETCH_ERROR:"error",API_TOOL_CREATE_ERROR:"error",API_TOOL_UPDATE_ERROR:"error",API_TOOL_DELETE_ERROR:"error",API_CATEGORIES_FETCH_ERROR:"error",API_MAX_RETRIES_EXCEEDED:"warn",API_DUPLICATE_ENTRY:"warn",AI_RATE_LIMIT_EXCEEDED:"warn",AI_MODEL_UNAVAILABLE:"error",AI_CONTENT_POLICY_VIOLATION:"warn",AI_TOKEN_LIMIT_EXCEEDED:"warn",AI_NETWORK_ERROR:"error",AI_UNKNOWN_ERROR:"error",AI_CHAT_PROCESSING_ERROR:"error",REACT_ERROR_BOUNDARY:"critical",UNHANDLED_FRONTEND_ERROR:"critical",UNHANDLED_PROMISE_REJECTION:"critical",MISSING_ROOT_ELEMENT:"critical",HOOK_TOOLS_FETCH_ERROR:"error",HOOK_TOOLS_NETWORK_ERROR:"error",HOOK_TOOL_CREATE_ERROR:"error",FILE_PROCESSING_ERROR:"warn",FILE_UPLOAD_ERROR:"warn",FILE_SIZE_EXCEEDED:"warn",FILE_TYPE_NOT_SUPPORTED:"warn",CHAT_AI_RESPONSE_ERROR:"error",CHAT_FLOW_ERROR:"error",CHAT_SESSION_SAVE_ERROR:"warn",CHAT_SESSION_NOT_FOUND:"warn",METHOD_NOT_ALLOWED:"warn",INVALID_JSON:"warn",MISSING_TOOL_ID:"warn",INVALID_MESSAGES:"warn",TOOL_NOT_FOUND:"warn",API_GENERIC_ERROR:"error"},h9={AUTH_INVALID_CREDENTIALS:"Invalid email or password. Please check your credentials and try again.",AUTH_USER_EXISTS:"An account with this email already exists. Please sign in instead.",AUTH_EMAIL_NOT_CONFIRMED:"Please confirm your email address before signing in.",AUTH_NETWORK_ERROR:"Network connection error. Please check your internet connection and try again.",AUTH_RATE_LIMIT:"Too many login attempts. Please wait a moment before trying again.",AUTH_GENERIC_ERROR:"Authentication failed. Please try again or contact support if the problem persists.",AUTH_STATUS_CHECK_ERROR:"Unable to verify authentication status. Please refresh the page.",AUTH_SESSION_VALIDATION_ERROR:"Your session could not be validated. Please sign in again.",AUTH_SESSION_REFRESH_ERROR:"Failed to refresh your session. Please sign in again.",AUTH_TOKEN_EXPIRED:"Your session has expired. Please sign in again.",AUTH_INVALID_TOKEN:"Invalid authentication token. Please sign in again.",AUTH_STATE_ERROR:"Authentication error occurred. Please sign in again.",AUTH_SUPABASE_NOT_CONFIGURED:"Backend not configured. Please contact support.",API_TOOLS_FETCH_ERROR:"Failed to load tools. Please refresh the page or try again later.",API_TOOL_CREATE_ERROR:"Failed to create tool. Please check your input and try again.",API_TOOL_UPDATE_ERROR:"Failed to update tool. Please try again.",API_TOOL_DELETE_ERROR:"Failed to delete tool. Please try again.",API_CATEGORIES_FETCH_ERROR:"Failed to load categories. Please refresh the page.",API_MAX_RETRIES_EXCEEDED:"Service temporarily unavailable. Please try again in a few minutes.",API_DUPLICATE_ENTRY:"A record with this name already exists. Please choose a different name.",AI_RATE_LIMIT_EXCEEDED:"AI service is busy. Please wait a moment and try again.",AI_MODEL_UNAVAILABLE:"AI model temporarily unavailable. Please try again.",AI_CONTENT_POLICY_VIOLATION:"Content violates AI policy. Please rephrase your request.",AI_TOKEN_LIMIT_EXCEEDED:"Request too long. Please shorten your input and try again.",AI_NETWORK_ERROR:"AI service connection error. Please try again.",AI_UNKNOWN_ERROR:"AI processing error. Please try again or contact support.",AI_CHAT_PROCESSING_ERROR:"Failed to process chat request. Please try again.",REACT_ERROR_BOUNDARY:"An unexpected error occurred in the application.",UNHANDLED_FRONTEND_ERROR:"An unexpected error occurred.",UNHANDLED_PROMISE_REJECTION:"An unexpected error occurred.",MISSING_ROOT_ELEMENT:"Critical application error: Unable to start application.",HOOK_TOOLS_FETCH_ERROR:"Failed to load tools data.",HOOK_TOOLS_NETWORK_ERROR:"Network error while loading tools.",HOOK_TOOL_CREATE_ERROR:"Failed to create tool.",FILE_PROCESSING_ERROR:"Failed to process uploaded file. Please try a different file.",FILE_UPLOAD_ERROR:"Failed to upload file. Please try again.",FILE_SIZE_EXCEEDED:"File size too large. Please choose a smaller file.",FILE_TYPE_NOT_SUPPORTED:"File type not supported. Please use PDF, DOCX, TXT, or MD files.",CHAT_AI_RESPONSE_ERROR:"Failed to generate AI response. Please try again.",CHAT_FLOW_ERROR:"Chat session error. Please refresh and try again.",CHAT_SESSION_SAVE_ERROR:"Failed to save chat session.",CHAT_SESSION_NOT_FOUND:"Chat session no longer exists.",METHOD_NOT_ALLOWED:"Invalid request method.",INVALID_JSON:"Invalid request format.",MISSING_TOOL_ID:"Tool ID is required.",INVALID_MESSAGES:"Invalid message format.",TOOL_NOT_FOUND:"Requested tool not found.",API_GENERIC_ERROR:"An unexpected error occurred. Please try again."},P3={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhybmFtaGlpbHllZXFuYmdrb2luIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAyMDY2NTEsImV4cCI6MjA3NTc4MjY1MX0.z3-17IXkQ0XYncbl4YTz3zUT9Q7kwcKOhc6KuuE9v9I",VITE_SUPABASE_URL:"https://xrnamhiilyeeqnbgkoin.supabase.co"};class xu{static createError(e,t,n,i){return{message:h9[e],code:e,details:t||"",timestamp:new Date().toISOString(),correlationId:i||De.getCorrelationId(),component:n||"Unknown",severity:d9[e]}}static handleError(e,t){let n;switch(e.code&&e.message&&e.severity?n=e:e instanceof Error?n=this.createError("UNHANDLED_FRONTEND_ERROR",e.message,t==null?void 0:t.component):typeof e=="string"?n=this.createError("UNHANDLED_FRONTEND_ERROR",e,t==null?void 0:t.component):n=this.createError("UNHANDLED_FRONTEND_ERROR",JSON.stringify(e),t==null?void 0:t.component),this.isAuthError(n)&&(De.warn("Auth error detected, triggering logout",{component:"ErrorHandler",errorCode:n.code}),wM(async()=>{const{useAuthStore:i}=await Promise.resolve().then(()=>x9);return{useAuthStore:i}},[]).then(({useAuthStore:i})=>{i.getState().clearAuth()})),n.severity){case"critical":De.critical(n,t);break;case"error":De.error(n,t);break;case"warn":De.warn(n.message,t);break;default:De.info(n.message,t)}return n}static isAuthError(e){const t=["AUTH_INVALID_CREDENTIALS","AUTH_SESSION_VALIDATION_ERROR","AUTH_SESSION_REFRESH_ERROR","AUTH_TOKEN_EXPIRED","AUTH_INVALID_TOKEN"],n=["Invalid JWT","JWT expired","Invalid token","Session expired","Authentication required","Unauthorized"];return t.includes(e.code)||n.some(i=>{var a;return e.message.includes(i)||((a=e.details)==null?void 0:a.includes(i))})}static handleSupabaseError(e,t,n){const i=this.mapSupabaseErrorToCode(e,t),a=this.createError(i,e.message||e.details||"Database operation failed","SupabaseApiService",n==null?void 0:n.correlationId);return this.handleError(a,{...n,operation:t,supabaseError:e}),a}static mapSupabaseErrorToCode(e,t){var i;const n=((i=e.message)==null?void 0:i.toLowerCase())||"";if(n.includes("row level security"))return"AUTH_INVALID_CREDENTIALS";if(n.includes("duplicate key")||n.includes("already exists"))return"API_DUPLICATE_ENTRY";if(n.includes("foreign key")||n.includes("violates"))return"API_TOOL_CREATE_ERROR";if(n.includes("network")||n.includes("fetch"))return"API_MAX_RETRIES_EXCEEDED";switch(t.toLowerCase()){case"gettools":case"fetchtools":return"API_TOOLS_FETCH_ERROR";case"createtool":return"API_TOOL_CREATE_ERROR";case"updatetool":return"API_TOOL_UPDATE_ERROR";case"deletetool":return"API_TOOL_DELETE_ERROR";case"getcategories":return"API_CATEGORIES_FETCH_ERROR";case"updatechatsession":return"CHAT_SESSION_SAVE_ERROR";default:return"API_GENERIC_ERROR"}}static async withRetry(e,t=3,n=1e3,i){let a;for(let l=1;l<=t;l++)try{const u=await e();return l>1&&De.info(`Operation succeeded on retry attempt ${l}`,{component:"ErrorHandler",attempt:l,maxRetries:t,...i}),u}catch(u){a=u,De.warn(`Operation failed on attempt ${l}/${t}`,{component:"ErrorHandler",attempt:l,maxRetries:t,error:u instanceof Error?u.message:"Unknown error",...i}),l<t&&await new Promise(d=>setTimeout(d,n*l))}throw this.createError("API_MAX_RETRIES_EXCEEDED",`Operation failed after ${t} attempts: ${(a==null?void 0:a.message)||"Unknown error"}`,i==null?void 0:i.component)}static validateEnvironment(){const t=["VITE_SUPABASE_URL","VITE_SUPABASE_ANON_KEY"].filter(n=>{const i=P3[n];return!i||i==="your_supabase_project_url"||i==="your_supabase_anon_key"});if(t.length>0){const n=this.createError("AUTH_SUPABASE_NOT_CONFIGURED",`Missing environment variables: ${t.join(", ")}`,"ErrorHandler");this.handleError(n,{missingVars:t,allEnvVars:Object.keys(P3)})}return{isValid:t.length===0,missingVars:t}}}class KR extends Q.Component{constructor(e){super(e),this.handleRetry=()=>{De.info("User initiated error recovery",{component:"ErrorBoundary",errorId:this.state.errorId}),this.setState({hasError:!1,error:null,errorId:null})},this.handleGoHome=()=>{De.info("User navigated to dashboard from error",{component:"ErrorBoundary",errorId:this.state.errorId}),window.location.href="/"},this.state={hasError:!1,error:null,errorId:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorId:crypto.randomUUID()}}componentDidCatch(e,t){const n={message:"An unexpected error occurred in the application",code:"REACT_ERROR_BOUNDARY",details:`${e.message}

Stack: ${e.stack}

Component Stack: ${t.componentStack}`,timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:this.getComponentName(t.componentStack),severity:"critical",userId:window.BOLT_USER_ID,sessionId:window.BOLT_SESSION_ID,userAgent:navigator.userAgent};xu.handleError(n,{errorInfo:t,errorId:this.state.errorId,componentStack:t.componentStack}),this.props.onError&&this.props.onError(e,t)}getComponentName(e){const n=e.split(`
`).find(i=>i.trim().startsWith("in "));return n?n.trim().replace("in ",""):"Unknown"}render(){return this.state.hasError?this.props.fallback?this.props.fallback:p.jsx("div",{className:"min-h-screen bg-light-bg-page dark:bg-dark-bg-page flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg shadow-lg max-w-md w-full p-8 text-center",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx(xA,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),p.jsx("h2",{className:"font-serif text-2xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:"Something went wrong"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-4",children:"We encountered an unexpected error. Our team has been notified and is working on a fix."}),this.state.errorId&&p.jsxs("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary font-mono bg-light-bg-sidebar dark:bg-dark-bg-sidebar p-2 rounded",children:["Error ID: ",this.state.errorId]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("button",{onClick:this.handleRetry,className:"w-full px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity font-medium",children:"Try Again"}),p.jsx("button",{onClick:this.handleGoHome,className:"w-full px-4 py-2 bg-light-bg-sidebar dark:bg-dark-bg-component border border-light-border dark:border-dark-border text-light-text-primary dark:text-dark-text-primary rounded-md hover:opacity-85 transition-opacity",children:"Go to Dashboard"})]}),p.jsx("div",{className:"mt-6 pt-4 border-t border-light-border dark:border-dark-border",children:p.jsxs("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:["If this problem persists, please contact"," ",p.jsx("a",{href:"mailto:support@artemo.ai",className:"text-primary-accent hover:underline",children:"support@artemo.ai"})]})})]})}):this.props.children}}const z3=r=>{let e;const t=new Set,n=(d,h)=>{const g=typeof d=="function"?d(e):d;if(!Object.is(g,e)){const b=e;e=h??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(y=>y(e,b))}},i=()=>e,l={setState:n,getState:i,getInitialState:()=>u,subscribe:d=>(t.add(d),()=>t.delete(d))},u=e=r(n,i,l);return l},f9=(r=>r?z3(r):z3),p9=r=>r;function g9(r,e=p9){const t=Bn.useSyncExternalStore(r.subscribe,Bn.useCallback(()=>e(r.getState()),[r,e]),Bn.useCallback(()=>e(r.getInitialState()),[r,e]));return Bn.useDebugValue(t),t}const m9=r=>{const e=f9(r),t=n=>g9(e,n);return Object.assign(t,e),t},QR=(r=>m9);function b9(r,e){let t;try{t=r()}catch{return}return{getItem:i=>{var a;const s=u=>u===null?null:JSON.parse(u,void 0),l=(a=t.getItem(i))!=null?a:null;return l instanceof Promise?l.then(s):s(l)},setItem:(i,a)=>t.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>t.removeItem(i)}}const CD=r=>e=>{try{const t=r(e);return t instanceof Promise?t:{then(n){return CD(n)(t)},catch(n){return this}}}catch(t){return{then(n){return this},catch(n){return CD(n)(t)}}}},y9=(r,e)=>(t,n,i)=>{let a={storage:b9(()=>localStorage),partialize:v=>v,version:0,merge:(v,w)=>({...w,...v}),...e},s=!1;const l=new Set,u=new Set;let d=a.storage;if(!d)return r((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),t(...v)},n,i);const h=()=>{const v=a.partialize({...n()});return d.setItem(a.name,{state:v,version:a.version})},g=i.setState;i.setState=(v,w)=>(g(v,w),h());const b=r((...v)=>(t(...v),h()),n,i);i.getInitialState=()=>b;let y;const D=()=>{var v,w;if(!d)return;s=!1,l.forEach(_=>{var A;return _((A=n())!=null?A:b)});const k=((w=a.onRehydrateStorage)==null?void 0:w.call(a,(v=n())!=null?v:b))||void 0;return CD(d.getItem.bind(d))(a.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==a.version){if(a.migrate){const A=a.migrate(_.state,_.version);return A instanceof Promise?A.then(N=>[!0,N]):[!0,A]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var A;const[N,E]=_;if(y=a.merge(E,(A=n())!=null?A:b),t(y,!0),N)return h()}).then(()=>{k==null||k(y,void 0),y=n(),s=!0,u.forEach(_=>_(y))}).catch(_=>{k==null||k(void 0,_)})};return i.persist={setOptions:v=>{a={...a,...v},v.storage&&(d=v.storage)},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>D(),hasHydrated:()=>s,onHydrate:v=>(l.add(v),()=>{l.delete(v)}),onFinishHydration:v=>(u.add(v),()=>{u.delete(v)})},a.skipHydration||D(),y||b},ZR=y9;class zh{static getInstance(){return zh.instance||(zh.instance=new zh),zh.instance}checkSupabaseConnection(){const e=!!Ge;return console.log("AppApiService: Connection check:",e),e}async getTools(){if(!this.checkSupabaseConnection())return console.log("AppApiService: Not connected, returning empty tools"),{success:!0,data:[]};if(!await Nc(5e3))return console.log("AppApiService: Session not stable, returning empty tools"),{success:!0,data:[]};try{console.log("AppApiService: Fetching tools from database");const{data:t,error:n}=await Ge.from("tools").select(`
                    *,
                    category:categories(*),
                    questions:tool_questions(*)
                `).eq("active",!0).order("created_at",{ascending:!1});if(n)throw n;const i=(t||[]).map(a=>{var s;return{id:a.id,title:a.title,category:((s=a.category)==null?void 0:s.name)||"Other",description:a.description,active:a.active,featured:a.featured,is_pro:a.is_pro??!1,primaryModel:a.primary_model,fallbackModels:a.fallback_models||[],promptInstructions:a.prompt_instructions,questions:(a.questions||[]).sort((l,u)=>l.question_order-u.question_order).map(l=>({id:l.id,label:l.label,type:l.type,placeholder:l.placeholder,required:l.required,order:l.question_order,options:l.options}))}});return console.log("AppApiService: Tools fetched successfully:",i.length),{success:!0,data:i}}catch(t){return console.log("AppApiService: Error fetching tools:",t),{success:!1,error:"Failed to fetch tools from database"}}}async getCategories(){if(!this.checkSupabaseConnection())return console.log("AppApiService: Not connected, returning empty categories"),{success:!0,data:[]};if(!await Nc(5e3))return console.log("AppApiService: Session not stable, returning empty categories"),{success:!0,data:[]};try{console.log("AppApiService: Fetching categories from database");const{data:t,error:n}=await Ge.from("categories").select("id, name, display_order, active, icon_name, icon_color").order("display_order",{ascending:!0});if(n)throw n;return{success:!0,data:(t||[]).map(a=>({id:a.id,name:a.name,displayOrder:a.display_order,active:a.active,iconName:a.icon_name||"Settings",iconColor:a.icon_color||"text-blue-600"}))}}catch(t){return console.log("AppApiService: Error fetching categories:",t),{success:!1,error:"Failed to fetch categories"}}}async sendChatMessage(e,t,n,i){var s,l,u,d;if(!this.checkSupabaseConnection())return console.log("AppApiService: Supabase not connected, returning demo response"),{success:!0,data:`Thank you for trying out this tool! 

This is a demo response since the backend isn't fully connected yet. 

To get real AI-powered responses:
1. Click "Connect to Supabase" in the top right
2. Add your AI API keys (Claude/OpenAI) to the edge function
3. The system will then provide intelligent, contextual responses

Your input has been processed and this demonstrates the complete workflow!`};if(!await Nc(5e3))return{success:!1,error:"Authentication session is not stable. Please try again in a moment."};try{console.log("AppApiService: Sending chat message to edge function");const{data:h,error:g}=await Ge.functions.invoke("ai-chat",{body:{toolId:e,messages:t,knowledgeBaseId:n,clientProfile:i,correlationId:De.getCorrelationId()},headers:{"X-Correlation-ID":De.getCorrelationId()}});if(g)throw g;if(!(h!=null&&h.response))throw new Error("No response from AI service");return console.log("AppApiService: AI response received successfully"),{success:!0,data:h.response}}catch(h){console.log("AppApiService: AI chat error:",h);let g="AI service temporarily unavailable. ";return(s=h.message)!=null&&s.includes("Function not found")||(l=h.message)!=null&&l.includes("404")?g+="The AI edge function needs to be deployed. Please contact your administrator.":(u=h.message)!=null&&u.includes("API key")||(d=h.message)!=null&&d.includes("unauthorized")?g+="AI API keys need to be configured. Please contact your administrator.":g+="Please try again in a moment or contact support if the issue persists.",{success:!1,error:g}}}async getProjects(e){if(!this.checkSupabaseConnection())return console.log("AppApiService: Not connected, returning empty projects"),{success:!0,data:[]};if(!await Nc(5e3))return console.log("AppApiService: Session not stable, returning empty projects"),{success:!0,data:[]};try{console.log("AppApiService: Fetching projects for user:",e);const{data:n,error:i}=await Ge.from("projects").select("*").eq("user_id",e).eq("archived",!1).order("updated_at",{ascending:!1});if(i)throw i;return{success:!0,data:(n||[]).map(s=>({id:s.id,name:s.name,color:s.color||"#008F6B",tags:s.tags||[],clientProfileSnapshot:s.client_profile_snapshot}))}}catch(n){return console.log("AppApiService: Error fetching projects:",n),{success:!1,error:"Failed to fetch projects"}}}async createProject(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:t,error:n}=await Ge.from("projects").insert({name:e.name,color:e.color,user_id:e.userId,client_profile_snapshot:e.clientProfileSnapshot}).select().single();if(n)throw n;return{success:!0,data:{id:t.id,name:t.name,color:t.color||"#008F6B",tags:t.tags||[],clientProfileSnapshot:t.client_profile_snapshot}}}catch(t){return{success:!1,error:Tt(t,"createProject").message}}}async updateProject(e,t){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:n,error:i}=await Ge.from("projects").update({name:t.name,color:t.color,client_profile_snapshot:t.clientProfileSnapshot}).eq("id",e).select().single();if(i)throw i;return{success:!0,data:{id:n.id,name:n.name,color:n.color||"#008F6B",tags:n.tags||[],clientProfileSnapshot:n.client_profile_snapshot}}}catch(n){return{success:!1,error:Tt(n,"updateProject",{projectId:e}).message}}}async deleteProject(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{error:t}=await Ge.from("projects").update({archived:!0}).eq("id",e);if(t)throw t;return{success:!0}}catch(t){return{success:!1,error:Tt(t,"deleteProject",{projectId:e}).message}}}async saveChatSession(e){if(console.log("🔍 DEBUG AppApiService: Received session data:",e),!this.checkSupabaseConnection())return{success:!0,data:{id:crypto.randomUUID(),toolId:e.toolId,toolTitle:e.title,messages:e.messages,timestamp:Date.now(),projectId:e.projectId}};try{const t=e.title||"Untitled Chat Session";if(e.id){const{data:n,error:i}=await Ge.from("chat_sessions").update({project_id:e.projectId,title:t,session_data:{messages:e.messages},ai_model_used:e.aiModel}).eq("id",e.id).select().single();if(i)throw i;return{success:!0,data:{id:n.id,toolId:n.tool_id,toolTitle:t,messages:e.messages,timestamp:new Date(n.updated_at).getTime(),projectId:n.project_id}}}else{const n={user_id:e.userId,tool_id:e.toolId,project_id:e.projectId,title:t,session_data:{messages:e.messages},ai_model_used:e.aiModel,completed:!0},{data:i,error:a}=await Ge.from("chat_sessions").insert(n).select().single();if(a)throw a;return{success:!0,data:{id:i.id,toolId:i.tool_id,toolTitle:t,messages:e.messages,timestamp:new Date(i.created_at).getTime(),projectId:i.project_id}}}}catch(t){return{success:!1,error:Tt(t,"saveChatSession").message}}}async getChatSessions(e){if(!this.checkSupabaseConnection())return{success:!0,data:[]};try{const{data:t,error:n}=await Ge.from("chat_sessions").select(`
                    *,
                    client_profile_id,
                    tool:tools(title),
                    project:projects(name)
                `).eq("user_id",e).order("created_at",{ascending:!1}).limit(50);if(n)throw n;return{success:!0,data:(t||[]).map(a=>{var s,l,u;return{id:a.id,toolId:a.tool_id,toolTitle:a.title||((s=a.tool)==null?void 0:s.title)||"Untitled Chat",messages:((l=a.session_data)==null?void 0:l.messages)||[],timestamp:new Date(a.created_at).getTime(),projectId:a.project_id,projectName:(u=a.project)==null?void 0:u.name,clientProfileId:a.client_profile_id}})}}catch(t){return{success:!1,error:Tt(t,"getChatSessions",{userId:e}).message}}}async getChatSessionsByProjectId(e,t){if(!this.checkSupabaseConnection())return{success:!0,data:[]};try{const{data:n,error:i}=await Ge.from("chat_sessions").select(`
                    *,
                    tool:tools(title)
                `).eq("project_id",e).eq("user_id",t).order("created_at",{ascending:!1});if(i)throw i;return{success:!0,data:(n||[]).map(s=>{var l,u;return{id:s.id,toolId:s.tool_id,toolTitle:s.title||((l=s.tool)==null?void 0:l.title)||"Untitled Chat",messages:((u=s.session_data)==null?void 0:u.messages)||[],timestamp:new Date(s.created_at).getTime(),projectId:s.project_id}})}}catch(n){return{success:!1,error:Tt(n,"getChatSessionsByProjectId",{projectId:e,userId:t}).message}}}async updateChatSession(e,t){var n,i,a;if(console.log("🔍 DEBUG AppApiService: updateChatSession called with:",{chatId:e,updates:t}),!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const s={};t.title!==void 0&&(s.title=t.title),t.messages!==void 0&&(s.session_data={messages:t.messages}),t.projectId!==void 0&&(s.project_id=t.projectId),t.clientProfileId!==void 0&&(s.client_profile_id=t.clientProfileId),console.log("🔍 DEBUG AppApiService: Final updateData:",s);const{data:l,error:u}=await Ge.from("chat_sessions").update(s).eq("id",e).select(`
                    *,
                    tool:tools(title),
                    project:projects(name)
                `).maybeSingle();if(u)throw console.log("🔍 DEBUG AppApiService: Update error:",u),u;if(!l)return console.log("🔍 DEBUG AppApiService: Chat session not found:",e),{success:!1,error:"Chat session not found or has been deleted"};const d={id:l.id,toolId:l.tool_id,toolTitle:l.title||((n=l.tool)==null?void 0:n.title)||"Untitled Chat",messages:((i=l.session_data)==null?void 0:i.messages)||[],timestamp:new Date(l.updated_at).getTime(),projectId:l.project_id,projectName:(a=l.project)==null?void 0:a.name};return console.log("🔍 DEBUG AppApiService: Update successful, transformed data:",d),{success:!0,data:d}}catch(s){return console.log("🔍 DEBUG AppApiService: Exception in updateChatSession:",s),{success:!1,error:Tt(s,"updateChatSession",{chatId:e}).message}}}async deleteChatSession(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{error:t}=await Ge.from("chat_sessions").delete().eq("id",e);if(t)throw t;return{success:!0}}catch(t){return{success:!1,error:Tt(t,"deleteChatSession",{chatId:e}).message}}}async deleteAllChatSessions(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{error:t}=await Ge.from("chat_sessions").delete().eq("user_id",e);if(t)throw t;return{success:!0}}catch(t){return{success:!1,error:Tt(t,"deleteAllChatSessions",{userId:e}).message}}}async getAnnouncements(){if(!this.checkSupabaseConnection())return console.log("🔧 API: Supabase not connected, returning empty announcements"),{success:!0,data:[]};try{console.log("🔧 API: Fetching announcements from database");const{data:e,error:t}=await Ge.from("announcements").select("*").eq("active",!0).order("created_at",{ascending:!1});if(t)throw t;const n=(e||[]).map(i=>({id:i.id,title:i.title,content:i.content,active:i.active,showOnLogin:i.show_on_login,createdAt:i.created_at,createdBy:i.created_by}));return console.log("🔧 API: Announcements fetched successfully:",n.length),{success:!0,data:n}}catch(e){const t=e.message||"";return t.includes("Failed to fetch")||t.includes("TypeError: Failed to fetch")||e instanceof TypeError?(console.log("🔧 API: Supabase connection failed for announcements - likely not configured"),{success:!0,data:[]}):{success:!1,error:Tt(e,"getAnnouncements").message}}}async saveClientProfile(e,t){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:n,error:i}=await Ge.from("user_profiles").select("preferences").eq("id",e).single();if(i)throw i;const a=(n==null?void 0:n.preferences)||{},s=a.clientProfiles||[],l=s.findIndex(b=>b.id===t.id);let u;l>=0?(u=[...s],u[l]=t):u=[...s,t];const d={...a,clientProfiles:u},{data:h,error:g}=await Ge.from("user_profiles").update({preferences:d}).eq("id",e).select().single();if(g)throw g;return{success:!0,data:t}}catch(n){return{success:!1,error:Tt(n,"saveClientProfile",{userId:e,profileId:t.id}).message}}}async deleteClientProfile(e,t){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:n,error:i}=await Ge.from("user_profiles").select("preferences, default_client_profile_id").eq("id",e).single();if(i)throw i;const a=(n==null?void 0:n.preferences)||{},l=(a.clientProfiles||[]).filter(g=>g.id!==t),d={preferences:{...a,clientProfiles:l}};(n==null?void 0:n.default_client_profile_id)===t&&(d.default_client_profile_id=null);const{error:h}=await Ge.from("user_profiles").update(d).eq("id",e);if(h)throw h;return{success:!0}}catch(n){return{success:!1,error:Tt(n,"deleteClientProfile",{userId:e,profileId:t}).message}}}async updateDefaultClientProfile(e,t){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{error:n}=await Ge.from("user_profiles").update({default_client_profile_id:t}).eq("id",e);if(n)throw n;return{success:!0}}catch(n){return{success:!1,error:Tt(n,"updateDefaultClientProfile",{userId:e,profileId:t}).message}}}generateSlug(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}}class Wh{static getInstance(){return Wh.instance||(Wh.instance=new Wh),Wh.instance}checkSupabaseConnection(){const e=!!Ge;return console.log("AdminApiService: Connection check:",e),e}async getAllTools(){if(!this.checkSupabaseConnection())return console.log("AdminApiService: Not connected, returning empty tools"),{success:!0,data:[]};if(!await Nc(5e3))return console.log("AdminApiService: Session not stable, returning empty tools"),{success:!0,data:[]};try{console.log("AdminApiService: Fetching ALL tools (including inactive) from database");const{data:t,error:n}=await Ge.from("tools").select(`
          *,
          category:categories(*),
          questions:tool_questions(*)
        `).order("created_at",{ascending:!1});if(n)throw n;const i=(t||[]).map(a=>{var s;return{id:a.id,title:a.title,category:((s=a.category)==null?void 0:s.name)||"Other",description:a.description,active:a.active,featured:a.featured,is_pro:a.is_pro??!1,primaryModel:a.primary_model,fallbackModels:a.fallback_models||[],promptInstructions:a.prompt_instructions,questions:(a.questions||[]).sort((l,u)=>l.question_order-u.question_order).map(l=>({id:l.id,label:l.label,type:l.type,placeholder:l.placeholder,required:l.required,order:l.question_order,options:l.options}))}});return console.log("AdminApiService: ALL tools fetched successfully:",i.length),{success:!0,data:i}}catch(t){return console.log("AdminApiService: Error fetching all tools:",t),{success:!1,error:"Failed to fetch tools from database"}}}async createTool(e){var n;if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};if(!await Nc(5e3))return{success:!1,error:"Authentication session is not stable. Please try again in a moment."};try{console.log("AdminApiService: Creating tool:",e.title);const{data:i}=await Ge.from("categories").select("id").eq("name",e.category).single();if(!i)throw new Error("Category not found");const{data:a,error:s}=await Ge.from("tools").insert({title:e.title,slug:this.generateSlug(e.title),description:e.description,category_id:i.id,active:e.active,featured:e.featured,is_pro:e.is_pro??!1,primary_model:e.primaryModel,fallback_models:e.fallbackModels,prompt_instructions:e.promptInstructions,knowledge_base_file_id:e.knowledgeBaseFileId||null,created_by:(n=(await Ge.auth.getUser()).data.user)==null?void 0:n.id}).select().single();if(s)throw s;if(e.questions&&e.questions.length>0){const u=e.questions.map(h=>({tool_id:a.id,label:h.label,type:h.type,placeholder:h.placeholder,required:h.required,question_order:h.order,options:h.options})),{error:d}=await Ge.from("tool_questions").insert(u);if(d)throw d}return console.log("AdminApiService: Tool created successfully:",a.id),{success:!0,data:{id:a.id,title:a.title,category:e.category,description:a.description,active:a.active,featured:a.featured,is_pro:a.is_pro??!1,primaryModel:a.primary_model,fallbackModels:a.fallback_models||[],promptInstructions:a.prompt_instructions,knowledgeBaseFileId:a.knowledge_base_file_id,questions:e.questions||[]}}}catch(i){return console.log("AdminApiService: Error creating tool:",i),{success:!1,error:"Failed to create tool"}}}async updateTool(e,t){try{let n;if(t.category){const{data:l}=await Ge.from("categories").select("id").eq("name",t.category).single();l&&(n=l.id)}const{data:i,error:a}=await Ge.from("tools").update({title:t.title,description:t.description,category_id:n,active:t.active,featured:t.featured,is_pro:t.is_pro!==void 0?t.is_pro:void 0,primary_model:t.primaryModel,fallback_models:t.fallbackModels,prompt_instructions:t.promptInstructions,knowledge_base_file_id:t.knowledgeBaseFileId||null}).eq("id",e).select().single();if(a)throw a;if(t.questions!==void 0){const{error:l}=await Ge.from("tool_questions").delete().eq("tool_id",e);if(l)throw l;if(t.questions&&t.questions.length>0){const u=t.questions.map(h=>({tool_id:e,label:h.label,type:h.type,placeholder:h.placeholder,required:h.required,question_order:h.order,options:h.options})),{error:d}=await Ge.from("tool_questions").insert(u);if(d)throw d}}return{success:!0,data:{id:i.id,title:i.title,category:t.category||"Other",description:i.description,active:i.active,featured:i.featured,is_pro:i.is_pro??!1,primaryModel:i.primary_model,fallbackModels:i.fallback_models||[],promptInstructions:i.prompt_instructions,knowledgeBaseFileId:i.knowledge_base_file_id,questions:t.questions||[]}}}catch(n){return{success:!1,error:Tt(n,"updateTool",{toolId:e}).message}}}async deleteTool(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{error:t}=await Ge.from("tools").delete().eq("id",e);if(t)throw t;return{success:!0}}catch(t){return{success:!1,error:Tt(t,"deleteTool",{toolId:e}).message}}}async createCategory(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};if(!await Nc(5e3))return{success:!1,error:"Authentication session is not stable. Please try again in a moment."};try{const{data:n,error:i}=await Ge.from("categories").insert({name:e.name,slug:this.generateSlug(e.name),display_order:e.displayOrder,active:e.active,icon_name:e.iconName||"Settings",icon_color:e.iconColor||"text-blue-600"}).select().single();if(i)throw i;return{success:!0,data:{id:n.id,name:n.name,displayOrder:n.display_order,active:n.active,iconName:n.icon_name||"Settings",iconColor:n.icon_color||"text-blue-600"}}}catch(n){return{success:!1,error:Tt(n,"createCategory").message}}}async updateCategory(e,t){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:n,error:i}=await Ge.from("categories").update({name:t.name,display_order:t.displayOrder,active:t.active,icon_name:t.iconName,icon_color:t.iconColor}).eq("id",e).select().single();if(i)throw i;return{success:!0,data:{id:n.id,name:n.name,displayOrder:n.display_order,active:n.active,iconName:n.icon_name||"Settings",iconColor:n.icon_color||"text-blue-600"}}}catch(n){return{success:!1,error:Tt(n,"updateCategory",{categoryId:e}).message}}}async deleteCategory(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{error:t}=await Ge.from("categories").delete().eq("id",e);if(t)throw t;return{success:!0}}catch(t){return{success:!1,error:Tt(t,"deleteCategory",{categoryId:e}).message}}}async getUsers(){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:e,error:t}=await Ge.from("user_profiles").select(`
          id,
          full_name,
          role,
          organization,
          active,
          created_at,
          updated_at,
          last_login,
          status_updated_by,
          status_updated_at
        `).is("deleted_at",null).order("created_at",{ascending:!1});if(t)throw t;return{success:!0,data:(e||[]).map(i=>({id:i.id,email:"Email not available",fullName:i.full_name||"",role:i.role,organization:i.organization||"",active:i.active,createdAt:i.created_at,lastLogin:i.last_login,status:i.active?"active":"inactive",statusUpdatedBy:i.status_updated_by,statusUpdatedAt:i.status_updated_at}))}}catch(e){return{success:!1,error:Tt(e,"getUsers").message}}}async updateUserRole(e,t,n){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:{user:i}}=await Ge.auth.getUser();if(!i)throw new Error("Admin user not authenticated");const{error:a}=await Ge.rpc("update_user_role",{target_user_id:e,new_role:t,admin_user_id:i.id,reason:n||"Role updated by admin"});if(a)throw a;return De.info("User role updated successfully",{component:"AdminApiService",targetUserId:e,newRole:t,adminUserId:i.id}),{success:!0}}catch(i){return{success:!1,error:Tt(i,"updateUserRole",{userId:e,role:t}).message}}}async updateUserStatus(e,t,n){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const i=t?"unban_user":"ban_user",{data:a,error:s}=await Ge.functions.invoke("admin-user-management",{body:{action:i,userId:e,reason:n||`User status set to ${t?"active":"inactive"} by admin`}});if(s)throw s;if(a!=null&&a.error)throw new Error(a.error);return{success:!0}}catch(i){return{success:!1,error:Tt(i,"updateUserStatus",{userId:e,active:t}).message}}}async deleteUser(e,t){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:n,error:i}=await Ge.functions.invoke("admin-user-management",{body:{action:"delete_user",userId:e,reason:t||"User deleted by admin"}});if(i)throw console.error("Edge function error:",i),i;if(!(n!=null&&n.success))throw new Error((n==null?void 0:n.error)||"Failed to delete user");return De.info("User soft deleted successfully",{component:"AdminApiService",targetUserId:e,method:"edge_function",cleanupResults:n==null?void 0:n.cleanupResults}),{success:!0}}catch(n){return console.error("Delete user error:",n),{success:!1,error:Tt(n,"deleteUser",{userId:e}).message}}}async inviteUser(e,t,n){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:i,error:a}=await Ge.functions.invoke("admin-invite-user",{body:{email:e,fullName:t,role:n}});if(a)throw console.error("Edge function error:",a),a;if(!(i!=null&&i.success))throw new Error((i==null?void 0:i.error)||"Failed to send invitation");return De.info("User invitation sent successfully",{component:"AdminApiService",email:e.substring(0,3)+"***",role:n}),{success:!0}}catch(i){return{success:!1,error:Tt(i,"inviteUser",{email:e.substring(0,3)+"***",role:n}).message}}}async restoreUser(e,t){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:{user:n}}=await Ge.auth.getUser();if(!n)throw new Error("Admin user not authenticated");const{error:i}=await Ge.rpc("restore_user",{target_user_id:e,admin_user_id:n.id,reason:t||"User restored by admin"});if(i)throw i;return De.info("User restored successfully",{component:"AdminApiService",targetUserId:e,adminUserId:n.id}),{success:!0}}catch(n){return{success:!1,error:Tt(n,"restoreUser",{userId:e}).message}}}async getUserAuditLog(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:t,error:n}=await Ge.from("user_management_audit").select(`
          *,
          admin:admin_user_id(full_name),
          target:target_user_id(full_name)
        `).eq("target_user_id",e).order("created_at",{ascending:!1}).limit(50);if(n)throw n;return{success:!0,data:t||[]}}catch(t){return{success:!1,error:Tt(t,"getUserAuditLog",{userId:e}).message}}}async getAllAuditLogs(e=100){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:t,error:n}=await Ge.from("user_management_audit").select(`
          *,
          admin:admin_user_id(full_name),
          target:target_user_id(full_name)
        `).order("created_at",{ascending:!1}).limit(e);if(n)throw n;return{success:!0,data:t||[]}}catch(t){return{success:!1,error:Tt(t,"getAllAuditLogs").message}}}async createAnnouncement(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};if(!await Nc(5e3))return{success:!1,error:"Authentication session is not stable. Please try again in a moment."};try{const{data:{user:n}}=await Ge.auth.getUser();if(!n)throw new Error("User not authenticated");const{data:i,error:a}=await Ge.from("announcements").insert({title:e.title,content:e.content,active:e.active,show_on_login:e.showOnLogin,created_by:n.id}).select().single();if(a)throw a;return{success:!0,data:{id:i.id,title:i.title,content:i.content,active:i.active,showOnLogin:i.show_on_login,createdAt:i.created_at,createdBy:i.created_by}}}catch(n){return Tt(n,"createAnnouncement"),{success:!1,error:"Failed to create announcement"}}}async updateAnnouncement(e,t){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:n,error:i}=await Ge.from("announcements").update({title:t.title,content:t.content,active:t.active,show_on_login:t.showOnLogin}).eq("id",e).select().single();if(i)throw i;return{success:!0,data:{id:n.id,title:n.title,content:n.content,active:n.active,showOnLogin:n.show_on_login,createdAt:n.created_at,createdBy:n.created_by}}}catch(n){return{success:!1,error:Tt(n,"updateAnnouncement",{announcementId:e}).message}}}async deleteAnnouncement(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{error:t}=await Ge.from("announcements").delete().eq("id",e);if(t)throw t;return{success:!0}}catch(t){return{success:!1,error:Tt(t,"deleteAnnouncement",{announcementId:e}).message}}}async getDashboardAnalytics(e="24h"){if(!this.checkSupabaseConnection())return{success:!0,data:{ai_generations_24h:0,daily_active_users:0,new_signups_24h:0,ai_success_rate:100,total_users:0,active_tools:0,total_categories:0,total_interactions:0}};try{const{data:t,error:n}=await Ge.rpc("get_dashboard_analytics",{time_range:e});if(n)throw n;return{success:!0,data:t||{ai_generations_24h:0,daily_active_users:0,new_signups_24h:0,ai_success_rate:100,total_users:0,active_tools:0,total_categories:0,total_interactions:0}}}catch(t){return{success:!1,error:Tt(t,"getDashboardAnalytics",{timeRange:e}).message}}}async getAIUsageMetrics(e="24h"){if(!this.checkSupabaseConnection())return{success:!0,data:{hourly_pattern:[],total_tokens_used:0,cost_estimate:0,fallback_rate:0}};try{const{data:t,error:n}=await Ge.from("usage_analytics").select("*").eq("action_type","ai_chat_completion").gte("created_at",this.getTimeRangeFilter(e));if(n)throw n;const i=Array(24).fill(0);return(t||[]).forEach(s=>{const l=new Date(s.created_at).getHours();i[l]++}),{success:!0,data:{hourly_pattern:i,total_tokens_used:(t||[]).length*500,cost_estimate:(t||[]).length*.002,fallback_rate:Math.random()*5}}}catch(t){return{success:!1,error:Tt(t,"getAIUsageMetrics",{timeRange:e}).message}}}async getSystemHealthMetrics(){if(!this.checkSupabaseConnection())return{success:!0,data:{ai_success_rate_trend:[],critical_alerts:[],model_failures:[]}};try{return{success:!0,data:{ai_success_rate_trend:Array(24).fill(100),critical_alerts:[],model_failures:[]}}}catch(e){return{success:!1,error:Tt(e,"getSystemHealthMetrics").message}}}async getUserEngagementMetrics(e="24h"){if(!this.checkSupabaseConnection())return{success:!0,data:{dau_trend:[],retention_7day:0,signup_sources:[]}};try{const t=this.getTimeRangeFilter(e),{data:n,error:i}=await Ge.from("usage_analytics").select("user_id, created_at").gte("created_at",t);if(i)throw i;const a=Array(7).fill(0),s=new Date;return(n||[]).forEach(u=>{const d=new Date(u.created_at),h=Math.floor((s.getTime()-d.getTime())/(1e3*60*60*24));h>=0&&h<7&&a[6-h]++}),{success:!0,data:{dau_trend:a,retention_7day:Math.floor(Math.random()*30)+60,signup_sources:[{source:"Direct",count:Math.floor(Math.random()*10)+5},{source:"Referral",count:Math.floor(Math.random()*5)+2}]}}}catch(t){return{success:!1,error:Tt(t,"getUserEngagementMetrics",{timeRange:e}).message}}}async getAdminActivityLog(e=50){if(!this.checkSupabaseConnection())return{success:!0,data:{tool_actions:[],admin_logins:[],system_changes:[]}};try{const{data:t,error:n}=await Ge.from("usage_analytics").select(`
          *,
          tool:tools(title),
          user_profile:user_profiles!user_id(full_name)
        `).eq("action_type","ai_chat_completion").order("created_at",{ascending:!1}).limit(20);n&&console.log("Error fetching tool usage:",n);const{data:i,error:a}=await Ge.from("user_management_audit").select(`
          *,
          admin_profile:user_profiles!admin_user_id(full_name),
          target_profile:user_profiles!target_user_id(full_name)
        `).order("created_at",{ascending:!1}).limit(e);a&&console.log("Error fetching audit logs:",a);const{data:s,error:l}=await Ge.from("tools").select(`
          id,
          title,
          created_at,
          updated_at,
          created_by,
          creator:user_profiles!created_by(full_name)
        `).not("created_by","is",null).order("updated_at",{ascending:!1}).limit(10);l&&console.log("Error fetching tool actions:",l);const{data:u,error:d}=await Ge.from("categories").select("*").order("updated_at",{ascending:!1}).limit(5);d&&console.log("Error fetching category actions:",d);const h=[...(t||[]).map(D=>{var v,w;return{action:"AI Chat Completion",toolName:((v=D.tool)==null?void 0:v.title)||"Unknown Tool",adminName:((w=D.user_profile)==null?void 0:w.full_name)||"Unknown User",timestamp:new Date(D.created_at).toLocaleString()}}),...(s||[]).map(D=>{var v;return{action:D.created_at===D.updated_at?"Tool Created":"Tool Updated",toolName:D.title,adminName:((v=D.creator)==null?void 0:v.full_name)||"Unknown Admin",timestamp:new Date(D.updated_at).toLocaleString()}}),...(u||[]).map(D=>({action:"Category Updated",toolName:D.name,adminName:"System Admin",timestamp:new Date(D.updated_at).toLocaleString()}))].sort((D,v)=>new Date(v.timestamp).getTime()-new Date(D.timestamp).getTime()).slice(0,20),{data:g,error:b}=await Ge.from("user_profiles").select("id, full_name, last_login, role").eq("role","admin").not("last_login","is",null).order("last_login",{ascending:!1}).limit(10);return b&&console.log("Error fetching admin profiles:",b),{success:!0,data:{tool_actions:h,admin_logins:(g||[]).map(D=>({adminName:D.full_name||"Unknown Admin",timestamp:new Date(D.last_login).toLocaleString(),ipAddress:void 0})),system_changes:(i||[]).map(D=>{var v;return{change:`${D.action_type.replace("_"," ").toUpperCase()} for user ${((v=D.target_profile)==null?void 0:v.full_name)||"Unknown"}`,details:D.reason||"No reason provided",timestamp:new Date(D.created_at).toLocaleString()}})}}}catch(t){return{success:!1,error:Tt(t,"getAdminActivityLog",{limit:e}).message}}}getTimeRangeFilter(e){const t=new Date;switch(e){case"1h":return new Date(t.getTime()-3600*1e3).toISOString();case"24h":return new Date(t.getTime()-1440*60*1e3).toISOString();case"7d":return new Date(t.getTime()-10080*60*1e3).toISOString();case"30d":return new Date(t.getTime()-720*60*60*1e3).toISOString();default:return new Date(t.getTime()-1440*60*1e3).toISOString()}}generateSlug(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}}class Pn{static getInstance(){return Pn.instance||(Pn.instance=new Pn),Pn.instance}constructor(){this.appService=zh.getInstance(),this.adminService=Wh.getInstance()}checkSupabaseConnection(){return this.appService.checkSupabaseConnection()}async getTools(){return this.appService.getTools()}async getAllTools(){return this.adminService.getAllTools()}async createTool(e){return this.adminService.createTool(e)}async updateTool(e,t){return this.adminService.updateTool(e,t)}async deleteTool(e){return this.adminService.deleteTool(e)}async getCategories(){return this.appService.getCategories()}async createCategory(e){return this.adminService.createCategory(e)}async updateCategory(e,t){return this.adminService.updateCategory(e,t)}async deleteCategory(e){return this.adminService.deleteCategory(e)}async sendChatMessage(e,t,n,i){return this.appService.sendChatMessage(e,t,n,i)}async getProjects(e){return this.appService.getProjects(e)}async createProject(e){return this.appService.createProject(e)}async updateProject(e,t){return this.appService.updateProject(e,t)}async deleteProject(e){return this.appService.deleteProject(e)}async saveChatSession(e){return this.appService.saveChatSession(e)}async getChatSessions(e){return this.appService.getChatSessions(e)}async getChatSessionsByProjectId(e,t){return this.appService.getChatSessionsByProjectId(e,t)}async updateChatSession(e,t){return this.appService.updateChatSession(e,t)}async deleteChatSession(e){return this.appService.deleteChatSession(e)}async deleteAllChatSessions(e){return this.appService.deleteAllChatSessions(e)}async getUsers(){return this.adminService.getUsers()}async updateUserRole(e,t,n){return this.adminService.updateUserRole(e,t,n)}async updateUserStatus(e,t,n){return this.adminService.updateUserStatus(e,t,n)}async deleteUser(e,t){return this.adminService.deleteUser(e,t)}async inviteUser(e,t,n){return this.adminService.inviteUser(e,t,n)}async restoreUser(e,t){return this.adminService.restoreUser(e,t)}async getUserAuditLog(e){return this.adminService.getUserAuditLog(e)}async getAllAuditLogs(e=100){return this.adminService.getAllAuditLogs(e)}async getAnnouncements(){return this.appService.getAnnouncements()}async createAnnouncement(e){return this.adminService.createAnnouncement(e)}async updateAnnouncement(e,t){return this.adminService.updateAnnouncement(e,t)}async deleteAnnouncement(e){return this.adminService.deleteAnnouncement(e)}async getDashboardAnalytics(e="24h"){return this.adminService.getDashboardAnalytics(e)}async getAIUsageMetrics(e="24h"){return this.adminService.getAIUsageMetrics(e)}async getSystemHealthMetrics(){return this.adminService.getSystemHealthMetrics()}async getUserEngagementMetrics(e="24h"){return this.adminService.getUserEngagementMetrics(e)}async getAdminActivityLog(e=50){return this.adminService.getAdminActivityLog(e)}async saveClientProfile(e,t){return this.appService.saveClientProfile(e,t)}async deleteClientProfile(e,t){return this.appService.deleteClientProfile(e,t)}async updateDefaultClientProfile(e,t){return this.appService.updateDefaultClientProfile(e,t)}}const ht=QR()(ZR((r,e)=>({user:null,session:null,profile:null,isLoading:!0,isAuthenticated:!1,isAdmin:!1,isPro:!1,sessionStatus:"loading",refreshPromise:null,activeClientProfileId:null,setAuth:(t,n)=>{if(console.log("🔧 AUTH DIAGNOSTIC: AuthStore.setAuth called",{userId:t==null?void 0:t.id,hasSession:!!n,sessionExpiry:n!=null&&n.expires_at?new Date(n.expires_at*1e3).toISOString():"N/A",isSessionValid:n!=null&&n.expires_at?n.expires_at>Date.now()/1e3:!1,timestamp:new Date().toISOString(),currentState:e().isAuthenticated,tabVisible:!document.hidden,pageVisibility:document.visibilityState}),n&&n.expires_at&&n.expires_at<Date.now()/1e3){console.log("🔧 AUTH DIAGNOSTIC: Attempted to set expired session, rejecting"),De.warn("Attempted to set expired session",{component:"AuthStore",expiresAt:n.expires_at,currentTime:Date.now()/1e3}),e().sessionStatus!=="refreshing"&&r({user:null,session:null,isAuthenticated:!1,isLoading:!1,sessionStatus:"unauthenticated",refreshPromise:null});return}De.info("Auth state updated",{component:"AuthStore",userId:t==null?void 0:t.id,hasSession:!!n}),r({user:t,session:n,isAuthenticated:!!t&&!!n,isLoading:!1,sessionStatus:t&&n?"authenticated":"unauthenticated",refreshPromise:null}),t&&De.setUserId(t.id)},setProfile:t=>{var i;console.log("🔧 AUTH DIAGNOSTIC: AuthStore.setProfile called",{userId:t==null?void 0:t.id,role:t==null?void 0:t.role,timestamp:new Date().toISOString()}),De.info("User profile updated",{component:"AuthStore",userId:t==null?void 0:t.id,role:t==null?void 0:t.role}),r({profile:t,isAdmin:(t==null?void 0:t.role)==="admin",isPro:(t==null?void 0:t.role)==="pro"||(t==null?void 0:t.role)==="admin"});const n=e();if(t&&!n.activeClientProfileId){const a=t.default_client_profile_id;if(a)r({activeClientProfileId:a});else{const s=((i=t.preferences)==null?void 0:i.clientProfiles)||[];s.length>0&&r({activeClientProfileId:s[0].id})}}(t==null?void 0:t.role)==="admin"&&!n.isAdmin&&console.log("Admin role detected, updating isAdmin flag")},setLoading:t=>r({isLoading:t}),clearAuth:()=>{var t;console.log("🔧 AUTH DIAGNOSTIC: AuthStore.clearAuth called",{previousState:{isAuthenticated:e().isAuthenticated,userId:(t=e().user)==null?void 0:t.id,hasProfile:!!e().profile},timestamp:new Date().toISOString(),tabVisible:!document.hidden,pageVisibility:document.visibilityState}),De.info("Auth cleared",{component:"AuthStore"}),r({user:null,session:null,profile:null,isAuthenticated:!1,isAdmin:!1,isPro:!1,sessionStatus:"unauthenticated",refreshPromise:null}),De.setUserId("anonymous")},setSessionStatus:t=>{console.log("🔧 AUTH DIAGNOSTIC: Setting session status to:",t),r({sessionStatus:t})},setRefreshPromise:t=>{r({refreshPromise:t})},updateProfile:t=>{const n=e().profile;if(n){const i={...n,...t};r({profile:i}),De.info("Profile updated locally",{component:"AuthStore",userId:n.id,updates:Object.keys(t)})}},setActiveClientProfileId:t=>{r({activeClientProfileId:t}),De.info("Active client profile updated",{component:"AuthStore",activeClientProfileId:t})},getActiveClientProfile:()=>{var s;const{activeClientProfileId:t,profile:n}=e(),i=((s=n==null?void 0:n.preferences)==null?void 0:s.clientProfiles)||[];if(t){const l=i.find(u=>u.id===t);if(l)return l}const a=n==null?void 0:n.default_client_profile_id;if(a){const l=i.find(u=>u.id===a);if(l)return l}return i.length>0?i[0]:null},saveClientProfile:async t=>{var s;const{user:n}=e();if(!n)throw new Error("User not authenticated");const a=await Pn.getInstance().saveClientProfile(n.id,t);if(a.success){const l=e().profile;if(l){const u=((s=l.preferences)==null?void 0:s.clientProfiles)||[],d=u.findIndex(g=>g.id===t.id);let h;d>=0?(h=[...u],h[d]=t):h=[...u,t],r({profile:{...l,preferences:{...l.preferences,clientProfiles:h}}})}}else throw new Error(a.error||"Failed to save client profile")},deleteClientProfile:async t=>{var s;const{user:n}=e();if(!n)throw new Error("User not authenticated");const a=await Pn.getInstance().deleteClientProfile(n.id,t);if(a.success){const l=e().profile,u=e();if(l){const h=(((s=l.preferences)==null?void 0:s.clientProfiles)||[]).filter(g=>g.id!==t);if(r({profile:{...l,preferences:{...l.preferences,clientProfiles:h},default_client_profile_id:l.default_client_profile_id===t?void 0:l.default_client_profile_id}}),u.activeClientProfileId===t){const g=l.default_client_profile_id;g&&g!==t?r({activeClientProfileId:g}):h.length>0?r({activeClientProfileId:h[0].id}):r({activeClientProfileId:null})}}}else throw new Error(a.error||"Failed to delete client profile")},setDefaultClientProfile:async t=>{const{user:n}=e();if(!n)throw new Error("User not authenticated");const a=await Pn.getInstance().updateDefaultClientProfile(n.id,t);if(a.success){const s=e().profile;s&&r({profile:{...s,default_client_profile_id:t||void 0}})}else throw new Error(a.error||"Failed to update default client profile")},getClientProfiles:()=>{var n;const{profile:t}=e();return((n=t==null?void 0:t.preferences)==null?void 0:n.clientProfiles)||[]},getDefaultClientProfile:()=>{var a;const{profile:t}=e(),n=((a=t==null?void 0:t.preferences)==null?void 0:a.clientProfiles)||[],i=t==null?void 0:t.default_client_profile_id;return i?n.find(s=>s.id===i)||null:n.length>0?n[0]:null}}),{name:"artemo-auth-storage",version:1,partialize:r=>({user:r.user,session:r.session,profile:r.profile,isAuthenticated:r.isAuthenticated,isAdmin:r.isAdmin,isPro:r.isPro,activeClientProfileId:r.activeClientProfileId}),onRehydrateStorage:()=>r=>{console.log("🔧 AUTH DIAGNOSTIC: Zustand rehydrating auth state",{hasUser:!!(r!=null&&r.user),hasSession:!!(r!=null&&r.session),isAuthenticated:r==null?void 0:r.isAuthenticated,timestamp:new Date().toISOString()}),r&&(r.isLoading=!1)}})),x9=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:ht},Symbol.toStringTag,{value:"Module"})),Xh="https://xrnamhiilyeeqnbgkoin.supabase.co",JR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhybmFtaGlpbHllZXFuYmdrb2luIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAyMDY2NTEsImV4cCI6MjA3NTc4MjY1MX0.z3-17IXkQ0XYncbl4YTz3zUT9Q7kwcKOhc6KuuE9v9I",W3=xu.validateEnvironment();W3.isValid||console.error("Supabase environment validation failed:",W3.missingVars);const vA=!!(Xh.includes("supabase.co")&&Xh.startsWith("https://")&&JR.length>20);if(!vA){const r={message:"Supabase configuration missing or not set up",code:"SUPABASE_CONFIG_ERROR",details:'Please click "Connect to Supabase" button to set up your Supabase project',timestamp:new Date().toISOString(),component:"SupabaseClient",severity:"critical"};De.critical(r),console.warn("Supabase not configured yet. Please connect to Supabase to enable backend features.")}const Ge=vA?kM(Xh,JR,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",storageKey:"artemo-auth-token",debug:!0,storage:{getItem:r=>{try{const e=localStorage.getItem(r);return console.log("🔧 STORAGE: Getting auth data",{key:r,hasValue:!!e}),e}catch{return console.log("🔧 STORAGE: Failed to get auth data",{key:r}),null}},setItem:(r,e)=>{try{console.log("🔧 STORAGE: Setting auth data",{key:r,valueLength:e.length}),localStorage.setItem(r,e)}catch{console.log("🔧 STORAGE: Failed to set auth data",{key:r})}},removeItem:r=>{try{console.log("🔧 STORAGE: Removing auth data",{key:r}),localStorage.removeItem(r)}catch{console.log("🔧 STORAGE: Failed to remove auth data",{key:r})}}}},global:{headers:{"X-Client-Info":"artemo-dashboard"}}}):null;console.log("Supabase Configuration Status:",{configured:vA,hasUrl:!0,hasKey:!0,urlValid:Xh==null?void 0:Xh.includes("supabase.co")});const cn=()=>Ge!==null,Nc=async(r=5e3)=>{const e=Date.now();return new Promise(t=>{const n=()=>{const i=ht.getState();if(i.sessionStatus==="authenticated"&&i.isAuthenticated){t(!0);return}if(i.sessionStatus==="unauthenticated"){t(!1);return}if(Date.now()-e>r){console.log("🔧 SUPABASE: Session stability timeout reached"),t(!1);return}if(i.sessionStatus==="loading"||i.sessionStatus==="refreshing"){setTimeout(n,100);return}t(!1)};n()})},Tt=(r,e,t)=>xu.handleSupabaseError(r,e,t);function Tx(r,e,t,n,i){return{message:r,code:e,details:t,timestamp:new Date().toISOString(),correlationId:i,component:"AuthService",severity:n}}class Nl{static info(e,t,n){console.log(JSON.stringify({timestamp:new Date().toISOString(),level:"info",message:e,correlationId:t,component:"AuthService",context:n}))}static error(e,t,n){console.error(JSON.stringify({timestamp:new Date().toISOString(),level:"error",message:e,correlationId:t,component:"AuthService",context:n}))}}class wa{static getInstance(){return wa.instance||(wa.instance=new wa),wa.instance}mapSupabaseAuthError(e,t,n){var u;const i={message:"An authentication error occurred",code:"AUTH_UNKNOWN_ERROR",timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"AuthService",severity:"error",authProvider:"supabase",authMethod:t,attemptedEmail:n,details:e.message||e.toString()},a=((u=e.message)==null?void 0:u.toLowerCase())||"",s=e.code||"";if(a.includes("invalid login credentials")||a.includes("invalid email or password"))return{...i,message:"Invalid email or password. Please check your credentials and try again.",code:"AUTH_INVALID_CREDENTIALS"};if(a.includes("user already registered")||a.includes("already exists"))return{...i,message:"An account with this email already exists. Please sign in instead.",code:"AUTH_USER_EXISTS",severity:"warn"};if(a.includes("email not confirmed")||a.includes("confirm"))return{...i,message:"Please confirm your email address before signing in.",code:"AUTH_EMAIL_NOT_CONFIRMED",severity:"warn"};if(a.includes("network")||a.includes("fetch"))return{...i,message:"Network connection error. Please check your internet connection and try again.",code:"AUTH_NETWORK_ERROR"};if(a.includes("rate limit")||a.includes("too many"))return{...i,message:"Too many login attempts. Please wait a moment before trying again.",code:"AUTH_RATE_LIMIT",severity:"warn"};if(s==="42P17")return{...i,message:"Database configuration error. Please contact support.",code:"AUTH_DATABASE_CONFIG_ERROR",details:"Infinite recursion detected in database policies"};if(s==="23505")return{...i,message:"An account with this email already exists. Please sign in instead.",code:"AUTH_USER_EXISTS",severity:"warn"};if(s==="23503")return{...i,message:"Account creation failed due to database constraints. Please try again.",code:"AUTH_DATABASE_CONSTRAINT_ERROR"};const l=e.message||e.details||"Unknown authentication error";return{...i,message:`Authentication failed: ${l}. Please try again or contact support if the problem persists.`,code:"AUTH_GENERIC_ERROR",details:`Original error: ${JSON.stringify({code:s,message:e.message,details:e.details})}`}}sanitizeEmail(e){const[t,n]=e.split("@");return`${t.substring(0,2)}***@${n}`}async signIn(e,t){if(!cn())throw new Error("Supabase not configured. Please connect to Supabase first.");const n=performance.now();De.getCorrelationId(),De.authAttempt("signin",e);try{const{data:i,error:a}=await Ge.auth.signInWithPassword({email:e,password:t});if(a)throw a;if(!i.user||!i.session)throw new Error("Authentication succeeded but no user data returned");const s=await this.getUserProfile(i.user.id);ht.getState().setAuth(i.user,i.session),ht.getState().setProfile(s);const l=performance.now();return De.performance("auth_signin",l-n,{success:!0,userId:i.user.id,hasProfile:!!s}),De.authSuccess("signin",i.user.id),i}catch(i){const a=performance.now(),s=this.mapSupabaseAuthError(i,"signin",e);throw De.performance("auth_signin",a-n,{success:!1,errorCode:s.code}),De.authError(s),s}}async signUp(e,t,n){var s,l;if(!cn())throw Tx("Supabase not configured. Please connect to Supabase first.","AUTH_SUPABASE_NOT_CONFIGURED","Supabase connection is required for user registration","error",De.getCorrelationId());const i=performance.now(),a=De.getCorrelationId();De.authAttempt("signup",e);try{Nl.info("Starting user signup process",a,{email:this.sanitizeEmail(e),fullName:n.substring(0,3)+"***"});const{data:u,error:d}=await Ge.auth.signUp({email:e,password:t,options:{data:{full_name:n}}});if(d)throw Nl.error("Supabase auth signup failed",a,{supabaseError:d,email:this.sanitizeEmail(e),errorCode:d.code,errorMessage:d.message}),d;if(!u.user)throw Tx("User creation succeeded but no user data returned","AUTH_USER_DATA_MISSING","Supabase auth.signUp returned success but data.user is null","error",a);Nl.info("Supabase auth signup successful, creating profile",a,{userId:u.user.id,email:this.sanitizeEmail(e)}),u.user&&setTimeout(async()=>{try{const g=await this.getUserProfile(u.user.id);g&&(ht.getState().setProfile(g),Nl.info("User profile loaded after signup",a,{userId:u.user.id,profileId:g.id}))}catch(g){Nl.error("Failed to load user profile after signup",a,{userId:u.user.id,error:g instanceof Error?g.message:"Unknown error"})}},1e3);const h=performance.now();return De.performance("auth_signup",h-i,{success:!0,userId:(s=u.user)==null?void 0:s.id}),De.authSuccess("signup",(l=u.user)==null?void 0:l.id),u}catch(u){const d=performance.now();Nl.error("Raw signup error details",a,{errorType:typeof u,errorCode:u.code,errorMessage:u.message,errorDetails:u.details,errorHint:u.hint,fullError:u});let h;throw u.code&&u.message&&u.severity&&u.component?h=u:h=this.mapSupabaseAuthError(u,"signup",e),De.performance("auth_signup",d-i,{success:!1,errorCode:h.code}),De.authError(h),h}}async signOut(){if(!cn()){ht.getState().clearAuth();return}const e=performance.now();De.authAttempt("signout");try{const{error:t}=await Ge.auth.signOut();if(t)throw t;ht.getState().clearAuth();const n=performance.now();De.performance("auth_signout",n-e,{success:!0}),De.authSuccess("signout")}catch(t){const n=performance.now(),i=this.mapSupabaseAuthError(t,"signout");throw De.performance("auth_signout",n-e,{success:!1,errorCode:i.code}),De.authError(i),i}}async getCurrentSession(){var e;if(!cn())return De.info("Supabase not available, skipping getCurrentSession",{component:"AuthService"}),console.log("🔧 AUTH DIAGNOSTIC: getCurrentSession - Supabase not available"),null;try{console.log("🔧 AUTH DIAGNOSTIC: getCurrentSession - Making Supabase call",{timestamp:new Date().toISOString(),tabVisible:!document.hidden});const{data:{session:t},error:n}=await Ge.auth.getSession();return n?(console.log("🔧 AUTH DIAGNOSTIC: getCurrentSession - Supabase error",{error:n.message,code:n.code,timestamp:new Date().toISOString()}),null):(console.log("🔧 AUTH DIAGNOSTIC: getCurrentSession - Session result",{hasSession:!!t,userId:(e=t==null?void 0:t.user)==null?void 0:e.id,sessionExpiry:t!=null&&t.expires_at?new Date(t.expires_at*1e3).toISOString():"N/A",isExpired:t!=null&&t.expires_at?t.expires_at<Date.now()/1e3:"N/A",timestamp:new Date().toISOString()}),t)}catch(t){return console.log("🔧 AUTH DIAGNOSTIC: getCurrentSession - Exception",{error:t.message,timestamp:new Date().toISOString()}),null}}async getCurrentUser(){if(!cn())return console.log("AuthService: Supabase not available, skipping getCurrentUser"),console.log("🔧 AUTH DIAGNOSTIC: getCurrentUser - Supabase not available"),null;try{const{data:{user:e},error:t}=await Ge.auth.getUser();if(t)throw t;return e&&De.setUserId(e.id),e}catch{return null}}async getUserProfile(e){if(!cn())return console.log("🔧 AUTH: Supabase not available, skipping getUserProfile"),null;try{console.log("🔧 AUTH: Getting user profile from Supabase");const{data:t,error:n}=await Ge.from("user_profiles").select("*").eq("id",e).maybeSingle();if(n)throw n;return t}catch(t){const n=t.message||"";return n.includes("Failed to fetch")||n.includes("TypeError: Failed to fetch")||t instanceof TypeError?(console.log("🔧 AUTH: Supabase connection failed - likely not configured"),null):(De.error({message:"Failed to fetch user profile",code:"AUTH_PROFILE_FETCH_ERROR",details:t.message,timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"AuthService",severity:"error"},{userId:e}),null)}}async createUserProfile(e,t,n){if(!cn())throw Tx("Supabase not connected","AUTH_SUPABASE_NOT_AVAILABLE","Cannot create user profile without Supabase connection","error",De.getCorrelationId());const i=De.getCorrelationId();try{Nl.info("Creating user profile",i,{userId:e,fullName:t.substring(0,3)+"***"});const{data:a,error:s}=await Ge.from("user_profiles").insert({id:e,full_name:t,role:"user"}).select().single();if(s)throw Nl.error("Database insert failed for user profile",i,{userId:e,supabaseError:s}),s;return De.info("User profile created",{component:"AuthService",userId:e,fullName:t.substring(0,3)+"***"}),a}catch(a){const s=Tx("Failed to create user profile","AUTH_PROFILE_CREATE_ERROR",a.message||"Unknown database error","error",i);throw De.error(s,{userId:e,fullName:t.substring(0,3)+"***",supabaseError:a}),s}}async resetPassword(e){if(!Ge)throw new Error("Supabase not connected");De.authAttempt("resetPassword",e);try{const{error:t}=await Ge.auth.resetPasswordForEmail(e);if(t)throw console.log("AuthService: Error resetting password:",t),t;console.log("AuthService: Password reset email sent"),De.info("Password reset email sent",{component:"AuthService",attemptedEmail:e})}catch(t){console.log("AuthService: resetPassword failed:",t);const n=this.mapSupabaseAuthError(t,"signin",e);throw De.authError(n),n}}setupAuthListener(e){return console.log("🔧 AUTH DIAGNOSTIC: setupAuthListener called"),console.log("🔧 AUTH DIAGNOSTIC: Supabase available:",cn()),cn()?(console.log("🔧 AUTH DIAGNOSTIC: Setting up Supabase auth state listener"),Ge.auth.onAuthStateChange(async(t,n)=>{var u,d,h;console.log("🔧 AUTH DIAGNOSTIC: Auth state change detected",{event:t,hasSession:!!n,userId:(u=n==null?void 0:n.user)==null?void 0:u.id,sessionExpiry:n!=null&&n.expires_at?new Date(n.expires_at*1e3).toISOString():"N/A",isSessionValid:n!=null&&n.expires_at?n.expires_at>Date.now()/1e3:!1,timestamp:new Date().toISOString(),tabVisible:!document.hidden,pageVisibility:document.visibilityState,currentAuthState:ht.getState().isAuthenticated,currentUserId:(d=ht.getState().user)==null?void 0:d.id}),De.info("Auth state changed",{component:"AuthService",event:t,hasSession:!!n,userId:(h=n==null?void 0:n.user)==null?void 0:h.id});const{setAuth:i,clearAuth:a,setSessionStatus:s,setProfile:l}=ht.getState();if(t==="TOKEN_REFRESHED")if(n)console.log("🔧 AUTH DIAGNOSTIC: Token refreshed successfully, updating session"),i(n.user,n);else{console.log("🔧 AUTH DIAGNOSTIC: Token refresh failed or session temporarily null, setting refreshing state"),s("refreshing"),e!=null&&e.onSessionExpired&&e.onSessionExpired();return}if(n&&n.expires_at&&n.expires_at<Date.now()/1e3){console.log("🔧 AUTH DIAGNOSTIC: Token refresh failed, session lost"),De.warn("Token refresh failed",{component:"AuthService",event:t}),a(),e!=null&&e.onSessionExpired&&e.onSessionExpired();return}t==="SIGNED_IN"&&(n!=null&&n.user)?(console.log("🔧 AUTH DIAGNOSTIC: User signed in, setting auth state"),i(n.user,n),this.getUserProfile(n.user.id).then(g=>{g&&l(g)}).catch(g=>{console.log("🔧 AUTH DIAGNOSTIC: Failed to load profile:",g)})):t==="SIGNED_OUT"||!n?(console.log("🔧 AUTH DIAGNOSTIC: User signed out or no session, clearing auth state"),a()):t==="USER_UPDATED"&&(n!=null&&n.user)&&(console.log("🔧 AUTH DIAGNOSTIC: User updated, refreshing profile"),i(n.user,n),this.getUserProfile(n.user.id).then(g=>{g&&l(g)}).catch(g=>{console.log("🔧 AUTH DIAGNOSTIC: Failed to refresh profile:",g)}))})):(console.log("🔧 AUTH DIAGNOSTIC: Supabase not available, returning mock subscription"),{data:{subscription:{unsubscribe:()=>{console.log("🔧 AUTH DIAGNOSTIC: Mock subscription unsubscribed")}}}})}async validateCurrentSession(){if(!cn())return!1;try{const e=await this.getCurrentSession();return e?e.expires_at&&e.expires_at<Date.now()/1e3?(De.warn("Session validation failed - expired",{component:"AuthService",expiresAt:e.expires_at,currentTime:Date.now()/1e3}),!1):!0:!1}catch(e){return De.error({message:"Session validation failed",code:"AUTH_SESSION_VALIDATION_ERROR",details:e instanceof Error?e.message:"Unknown error",timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"AuthService",severity:"warn"}),!1}}async refreshSessionIfNeeded(){if(!cn())return!1;try{const{data:e,error:t}=await Ge.auth.refreshSession();return t?(De.warn("Session refresh failed",{component:"AuthService",error:t.message}),!1):e.session&&e.user?(De.info("Session refreshed successfully",{component:"AuthService",userId:e.user.id}),ht.getState().setAuth(e.user,e.session),!0):!1}catch(e){return De.error({message:"Session refresh error",code:"AUTH_SESSION_REFRESH_ERROR",details:e instanceof Error?e.message:"Unknown error",timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"AuthService",severity:"error"}),!1}}async tryRefreshWithTimeout(e=1e4){const t=De.getCorrelationId();De.info("Attempting session refresh with timeout",{component:"AuthService",timeoutMs:e});try{ht.getState().setSessionStatus("refreshing");const n=Promise.race([this.refreshSessionIfNeeded(),new Promise((a,s)=>setTimeout(()=>s(new Error("Refresh timeout")),e))]);return ht.getState().setRefreshPromise(n),await n?(De.info("Session refresh completed successfully",{component:"AuthService",correlationId:t}),!0):(De.warn("Session refresh failed",{component:"AuthService",correlationId:t}),!1)}catch(n){return De.error({message:"Session refresh with timeout failed",code:"AUTH_SESSION_REFRESH_TIMEOUT",details:n instanceof Error?n.message:"Unknown error",timestamp:new Date().toISOString(),correlationId:t,component:"AuthService",severity:"error"}),!1}finally{ht.getState().setRefreshPromise(null)}}}const v9=({onSuccess:r,onToggleMode:e})=>{const t=Qr(),[n,i]=Q.useState(""),[a,s]=Q.useState(""),[l,u]=Q.useState(!1),[d,h]=Q.useState(null),g=wa.getInstance(),b=async y=>{var D;if(y.preventDefault(),!n.trim()||!a.trim()){h("Email and password are required");return}if(!n.includes("@")){h("Please enter a valid email address");return}u(!0),h(null),De.userAction("login_attempt",{component:"LoginForm",email:n.substring(0,3)+"***"});try{const v=await g.signIn(n,a);if(!v.user||!v.session)throw new Error("Login succeeded but no session data returned");console.log("Login successful:",v.user.id),De.userAction("login_success",{component:"LoginForm",userId:(D=v.user)==null?void 0:D.id}),r(),t.success("Welcome back! You have been signed in successfully.","Login Successful")}catch(v){console.error("Login error:",v);const w=v.message||"Login failed. Please try again.";h(w),t.error(w,"Login Failed"),De.error({message:w,code:v.code||"AUTH_LOGIN_ERROR",details:v.details||v.toString(),timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"LoginForm",severity:"error"},{formEmail:n.substring(0,3)+"***",passwordLength:a.length})}finally{u(!1)}};return p.jsx("div",{className:"min-h-screen bg-light-bg-page dark:bg-dark-bg-page flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg shadow-lg w-full max-w-md p-8",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"font-serif text-2xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:"Welcome Back"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Sign in to your Artemo account"})]}),p.jsxs("form",{onSubmit:b,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Email"}),p.jsx("input",{id:"email",type:"email",value:n,onChange:y=>i(y.target.value),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"your@email.com",required:!0,disabled:l})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Password"}),p.jsx("input",{id:"password",type:"password",value:a,onChange:y=>s(y.target.value),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Enter your password",required:!0,disabled:l})]}),d&&p.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:p.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:d})}),p.jsx("button",{type:"submit",disabled:l||!n||!a,className:"w-full py-3 px-4 bg-primary-accent text-text-on-accent rounded-md font-medium hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Signing in...":"Sign In"})]}),p.jsx("div",{className:"mt-6 text-center",children:p.jsx("button",{onClick:e,className:"text-sm text-primary-accent hover:underline",disabled:l,children:"Don't have an account? Sign up"})})]})})},w9=({onSuccess:r,onToggleMode:e})=>{const t=Qr(),[n,i]=Q.useState(""),[a,s]=Q.useState(""),[l,u]=Q.useState(""),[d,h]=Q.useState(!1),[g,b]=Q.useState(null),y=wa.getInstance(),D=async v=>{var w;if(v.preventDefault(),!n.trim()||!a.trim()||!l.trim()){b("All fields are required");return}if(a.length<6){b("Password must be at least 6 characters long");return}if(!n.includes("@")){b("Please enter a valid email address");return}h(!0),b(null),De.userAction("signup_attempt",{component:"SignupForm",email:n.substring(0,3)+"***"});try{const k=await y.signUp(n,a,l);if(!k.user)throw new Error("Signup succeeded but no user data returned");console.log("Signup successful:",k.user.id),De.userAction("signup_success",{component:"SignupForm",userId:(w=k.user)==null?void 0:w.id}),r(),t.success("Account created successfully! Welcome to Artemo AI Dashboard.","Account Created")}catch(k){console.error("Signup error:",k);const _=k.message||"Signup failed. Please try again.";b(_),t.error(_,"Signup Failed"),De.error({message:_,code:k.code||"AUTH_SIGNUP_ERROR",details:k.details||k.toString(),timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"SignupForm",severity:"error"},{formEmail:n.substring(0,3)+"***",fullName:l.substring(0,3)+"***",passwordLength:a.length})}finally{h(!1)}};return p.jsx("div",{className:"min-h-screen bg-light-bg-page dark:bg-dark-bg-page flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg shadow-lg w-full max-w-md p-8",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("h1",{className:"font-serif text-2xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:"Create Account"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Join Artemo AI Dashboard"})]}),p.jsxs("form",{onSubmit:D,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Full Name"}),p.jsx("input",{id:"fullName",type:"text",value:l,onChange:v=>u(v.target.value),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Your full name",required:!0,disabled:d})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Email"}),p.jsx("input",{id:"email",type:"email",value:n,onChange:v=>i(v.target.value),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"your@email.com",required:!0,disabled:d})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Password"}),p.jsx("input",{id:"password",type:"password",value:a,onChange:v=>s(v.target.value),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Create a password",required:!0,disabled:d,minLength:6})]}),g&&p.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:p.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:g})}),p.jsx("button",{type:"submit",disabled:d||!n||!a||!l,className:"w-full py-3 px-4 bg-primary-accent text-text-on-accent rounded-md font-medium hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Creating account...":"Create Account"})]}),p.jsx("div",{className:"mt-6 text-center",children:p.jsx("button",{onClick:e,className:"text-sm text-primary-accent hover:underline",disabled:d,children:"Already have an account? Sign in"})})]})})};function e5(r={}){const{enablePeriodicValidation:e=!0,enableFocusRecovery:t=!0,validationIntervalMs:n=3e4}=r,{isAuthenticated:i,sessionStatus:a,user:s,session:l,profile:u}=ht(),[d,h]=Q.useState(!0),g=Q.useRef(null),b=Q.useRef(!1),y=Q.useRef(null);return Q.useEffect(()=>{if(De.setCorrelationId(),De.setSessionId(crypto.randomUUID()),console.log("🔧 AUTH: useAuthSession hook initialized",{timestamp:new Date().toISOString(),enablePeriodicValidation:e,enableFocusRecovery:t,validationIntervalMs:n}),De.info("Authentication session hook initialized",{component:"useAuthSession",version:"1.0.0",environment:"production"}),!cn()){console.log("🔧 AUTH: Supabase not available, skipping auth setup"),h(!1);return}if((async()=>{console.log("🔧 AUTH: Initializing authentication");const v=wa.getInstance();y.current=v.setupAuthListener({onAuthError:k=>{console.log("🔧 AUTH: Auth error detected, clearing state",k),De.error({message:"Authentication error detected",code:"AUTH_STATE_ERROR",details:k.message,timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"useAuthSession",severity:"error"}),ht.getState().clearAuth()},onSessionExpired:()=>{var k;console.log("🔧 AUTH: Session expired, clearing state"),De.warn("User session expired",{component:"useAuthSession",userId:(k=ht.getState().user)==null?void 0:k.id}),ht.getState().clearAuth()}});const w=await v.getCurrentSession();if(w!=null&&w.user){console.log("🔧 AUTH: Found existing session, setting auth state"),ht.getState().setAuth(w.user,w);const k=await v.getUserProfile(w.user.id);k&&ht.getState().setProfile(k)}h(!1)})(),e&&setTimeout(()=>{g.current&&clearInterval(g.current);const w=setInterval(async()=>{var _;const k=ht.getState();if(k.isAuthenticated&&k.session&&cn()&&!b.current){console.log("🔧 AUTH: Periodic session validation check");try{k.session.expires_at&&k.session.expires_at<Date.now()/1e3+300&&(console.log("🔧 AUTH: Session needs refresh, attempting refresh"),b.current=!0,await wa.getInstance().tryRefreshWithTimeout(1e4)||(console.log("🔧 AUTH: Session refresh failed, clearing auth"),ht.getState().clearAuth()),b.current=!1)}catch(A){console.log("🔧 AUTH: Session validation error:",A);const N=A instanceof Error?A.message:"";!b.current&&(N.includes("Invalid JWT")||N.includes("JWT expired")||N.includes("Invalid token"))&&(De.warn("Session validation failed with auth error",{component:"useAuthSession",error:N,userId:(_=k.user)==null?void 0:_.id}),ht.getState().clearAuth())}}},n);g.current=w},5e3),t){const v=async()=>{console.log("🔧 AUTH: Page focus gained, checking session validity"),setTimeout(async()=>{if(console.log("🔧 AUTH: Delayed session check after focus"),!b.current){const A=ht.getState();A.isAuthenticated&&A.session&&cn()&&(A.session.expires_at&&A.session.expires_at<Date.now()/1e3+60?(console.log("🔧 AUTH: Session needs refresh on focus, attempting refresh"),b.current=!0,await wa.getInstance().tryRefreshWithTimeout(1e4)||(console.log("🔧 AUTH: Session refresh failed on focus, clearing auth"),ht.getState().clearAuth()),b.current=!1):console.log("🔧 AUTH: Stored session still valid on focus"))}},100)},w=()=>{var A;console.log("🔧 AUTH: Page visibility changed",{hidden:document.hidden,visibilityState:document.visibilityState,timestamp:new Date().toISOString(),currentAuthState:ht.getState().isAuthenticated,userId:(A=ht.getState().user)==null?void 0:A.id}),document.hidden||v()},k=()=>{var A;console.log("🔧 AUTH: Window focus gained",{timestamp:new Date().toISOString(),currentAuthState:ht.getState().isAuthenticated,userId:(A=ht.getState().user)==null?void 0:A.id}),v()},_=()=>{var A;console.log("🔧 AUTH: Window focus lost",{timestamp:new Date().toISOString(),currentAuthState:ht.getState().isAuthenticated,userId:(A=ht.getState().user)==null?void 0:A.id})};return document.addEventListener("visibilitychange",w),window.addEventListener("focus",k),window.addEventListener("blur",_),()=>{document.removeEventListener("visibilitychange",w),window.removeEventListener("focus",k),window.removeEventListener("blur",_)}}return()=>{var v,w,k;console.log("🔧 AUTH: useAuthSession cleanup",{timestamp:new Date().toISOString()}),(k=(w=(v=y.current)==null?void 0:v.data)==null?void 0:w.subscription)==null||k.unsubscribe(),g.current&&clearInterval(g.current),b.current=!1}},[e,t,n]),{isAuthenticated:i,sessionStatus:a,isInitializing:d,user:s,session:l,profile:u}}const k9=({children:r})=>{const{isAuthenticated:e,sessionStatus:t,isInitializing:n}=e5({enablePeriodicValidation:!1,enableFocusRecovery:!1}),[i,a]=Q.useState(!1),[s,l]=Q.useState(null);if(n||t==="loading"||t==="refreshing")return p.jsx("div",{className:"min-h-screen bg-light-bg-page dark:bg-dark-bg-page flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-accent mx-auto mb-4"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:t==="refreshing"?"Refreshing session...":"Initializing authentication..."})]})});const u=()=>{console.log("AuthWrapper: Auth success, reloading page"),l(null)},d=()=>{console.log("AuthWrapper: Switching to signup"),a(!0)},h=()=>{console.log("AuthWrapper: Switching to login"),a(!1),l(null)};return cn()?!e&&t==="unauthenticated"?p.jsxs(p.Fragment,{children:[s&&p.jsxs("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-red-100 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4 max-w-md",children:[p.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:s}),p.jsx("button",{onClick:()=>l(null),className:"mt-2 text-xs text-red-600 dark:text-red-400 hover:underline",children:"Dismiss"})]}),i?p.jsx(w9,{onSuccess:u,onToggleMode:h}):p.jsx(v9,{onSuccess:u,onToggleMode:d})]}):p.jsx(p.Fragment,{children:r}):p.jsx("div",{className:"min-h-screen bg-light-bg-page dark:bg-dark-bg-page flex items-center justify-center p-4",children:p.jsx("div",{className:"max-w-md w-full text-center",children:p.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg p-8 shadow-lg",children:[p.jsx("h2",{className:"text-2xl font-bold text-light-text-primary dark:text-dark-text-primary mb-4",children:"Connect to Supabase"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-6",children:"To enable backend features like authentication, data storage, and AI integration, please connect your Supabase project."}),p.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md p-4 mb-6",children:p.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:'Click the "Connect to Supabase" button in the top right corner of Bolt to get started.'})}),p.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",children:"Refresh After Connection"})]})})})},D9=({children:r,onAuthStateChange:e})=>{const{isAuthenticated:t,sessionStatus:n,isInitializing:i}=e5({enablePeriodicValidation:!0,enableFocusRecovery:!0});return Q.useEffect(()=>{e&&e(t)},[t,e]),i||n==="loading"?p.jsx("div",{className:"min-h-screen bg-light-bg-page dark:bg-dark-bg-page flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-accent mx-auto mb-4"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading application..."})]})}):p.jsx(p.Fragment,{children:r})},Ca=QR()(ZR(r=>({theme:"dark",isSidebarOpen:!1,searchTerm:"",favoriteTools:[],recentTools:[],isModalOpen:!1,isChatSearchOpen:!1,itemToRename:null,toolForActivation:null,showProUpgradeModal:!1,setShowProUpgradeModal:e=>r({showProUpgradeModal:e}),toggleTheme:()=>r(e=>({theme:e.theme==="light"?"dark":"light"})),toggleSidebar:()=>r(e=>({isSidebarOpen:!e.isSidebarOpen})),setSearchTerm:e=>r({searchTerm:e}),toggleFavorite:e=>r(t=>({favoriteTools:t.favoriteTools.includes(e)?t.favoriteTools.filter(i=>i!==e):[...t.favoriteTools,e]})),openModal:()=>r({isModalOpen:!0}),closeModal:()=>r({isModalOpen:!1}),openChatSearch:()=>r({isChatSearchOpen:!0}),closeChatSearch:()=>r({isChatSearchOpen:!1}),setItemToRename:e=>r({itemToRename:e}),setToolForActivation:e=>r({toolForActivation:e}),addRecentTool:e=>r(t=>({recentTools:[e,...t.recentTools.filter(a=>a!==e)].slice(0,10)}))}),{name:"ui-store"})),_9=()=>{const{showProUpgradeModal:r,setShowProUpgradeModal:e}=Ca();if(!r)return null;const t=()=>{console.log("Redirecting to upgrade page..."),e(!1)};return p.jsx("div",{className:"fixed inset-0 bg-black/50 z-[60] flex items-center justify-center p-4",onClick:()=>e(!1),children:p.jsx("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-md",onClick:n=>n.stopPropagation(),children:p.jsxs("div",{className:"p-6 relative",children:[p.jsx("button",{onClick:()=>e(!1),className:"absolute top-4 right-4 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:p.jsx(Ms,{className:"w-6 h-6"})}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-accent-light-blue/50 dark:bg-accent-dark-blue/20 mb-4",children:p.jsx(VR,{className:"h-8 w-8 text-accent-dark-blue dark:text-accent-light-blue"})}),p.jsx("h3",{className:"font-serif text-2xl font-bold text-light-text-primary dark:text-dark-text-primary mb-3",children:"Upgrade to Pro"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-6",children:"This is a Pro tool. Upgrade your plan to get exclusive access to this and other powerful features."}),p.jsx("button",{onClick:t,className:"w-full px-4 py-3 bg-primary-accent text-text-on-accent rounded-md font-medium text-lg hover:opacity-90 transition-opacity",children:"Unlock Pro Tools"})]})]})})})},xp=()=>{const[r,e]=Q.useState([]),[t,n]=Q.useState(!0),[i,a]=Q.useState(null),{user:s}=ht(),l=Pn.getInstance(),u=ry(),d=Qr(),h=async()=>{var D;if(!s){n(!1);return}if(!cn()){console.log("useProjects: Supabase not connected, using empty projects"),e([]),n(!1);return}n(!0),a(null);try{const v=await l.getProjects(s.id);v.success&&v.data?(e(v.data),De.info("Projects fetched successfully",{component:"useProjects",projectCount:v.data.length,userId:s.id})):(D=v.error)!=null&&D.includes("session is not stable")?(console.log("useProjects: Session not stable, will retry automatically"),e([])):a(v.error||"Failed to fetch projects")}catch(v){console.log("useProjects: Error fetching projects:",v),(v instanceof Error?v.message:"Unknown error").includes("session is not stable")?(console.log("useProjects: Session not stable, will retry automatically"),e([])):a("Network error occurred")}finally{n(!1)}};return Q.useEffect(()=>{s?h():n(!1)},[s]),{projects:r,loading:t,error:i,refetch:h,createProject:async(D,v,w)=>{if(!s){d.error("You must be logged in to create a project.");return}if(!cn()){d.error("Cannot create project, connection not available.");return}try{const k=await l.createProject({name:D,color:v,userId:s.id,clientProfileSnapshot:w});if(k.success&&k.data)return d.success("Project created successfully!"),await h(),k.data;throw new Error(k.error||"Failed to create project")}catch(k){throw d.error(`Failed to create project: ${k instanceof Error?k.message:"Unknown error"}`),k}},deleteProject:async D=>{if(await u.confirm({title:"Delete Project",message:"Are you sure you want to delete this project and all its associated chats? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",variant:"danger"})){if(!cn()){d.error("Cannot delete project, connection not available.");return}try{const w=await l.deleteProject(D);if(w.success)d.success("Project deleted successfully."),await h();else throw new Error(w.error||"Failed to delete project")}catch(w){d.error(`Failed to delete project: ${w instanceof Error?w.message:"Unknown error"}`)}}},updateProject:async(D,v)=>{if(!cn()){d.error("Cannot update project, connection not available.");return}try{const w=await l.updateProject(D,v);if(w.success&&w.data)return d.success("Project updated successfully."),await h(),w.data;throw new Error(w.error||"Failed to update project")}catch(w){throw d.error(`Failed to update project: ${w instanceof Error?w.message:"Unknown error"}`),w}}}},A9=({isOpen:r,onClose:e,onSelectProject:t,currentProjectId:n,projects:i=[]})=>r?p.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-[1001] flex items-center justify-center p-4",onClick:e,children:p.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-md",onClick:a=>a.stopPropagation(),children:[p.jsx("div",{className:"p-4 border-b border-light-border dark:border-dark-border",children:p.jsx("h3",{className:"font-serif text-lg font-bold text-light-text-primary dark:text-dark-text-primary",children:"Add Chat to Project"})}),p.jsx("div",{className:"p-4 max-h-60 overflow-y-auto",children:i&&i.length>0?p.jsx("div",{className:"space-y-2",children:i.map(a=>p.jsxs("button",{onClick:()=>{t(a.id),e()},className:`w-full text-left p-3 rounded-md border transition-colors ${n===a.id?"border-primary-accent bg-primary-accent/10 text-light-text-primary dark:text-dark-text-primary":"border-light-border dark:border-dark-border hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page text-light-text-secondary dark:text-dark-text-secondary"}`,children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Gr,{className:"w-4 h-4"}),p.jsx("span",{className:"font-medium",children:a.name}),n===a.id&&p.jsx("span",{className:"text-xs text-primary-accent ml-auto",children:"Current"})]}),a.tags.length>0&&p.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[a.tags.slice(0,3).map(s=>p.jsx("span",{className:"text-xs px-2 py-1 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-full",children:s},s)),a.tags.length>3&&p.jsxs("span",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:["+",a.tags.length-3," more"]})]})]},a.id))}):p.jsxs("div",{className:"text-center py-8 text-light-text-tertiary dark:text-dark-text-tertiary",children:[p.jsx(Gr,{className:"w-8 h-8 mx-auto mb-2"}),p.jsx("p",{children:"No projects available"}),p.jsx("p",{className:"text-sm",children:"Create a project first"})]})}),p.jsx("div",{className:"p-4 border-t border-light-border dark:border-dark-border flex justify-end",children:p.jsx("button",{onClick:e,className:"px-4 py-2 text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:"Cancel"})})]})}):null,S9=({chatItem:r,onRename:e,onDelete:t,onAddToProject:n})=>{const[i,a]=Q.useState(!1),[s,l]=Q.useState(!1),[u,d]=Q.useState(!1),h=Q.useRef(null),{projects:g}=xp(),{user:b}=ht(),y=Pn.getInstance();Q.useEffect(()=>{const w=k=>{h.current&&!h.current.contains(k.target)&&a(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const D=async w=>{if(b){d(!0);try{const k=await y.updateChatSession(r.id,{projectId:w});if(k.success)n(w),console.log("Chat successfully added to project");else throw new Error(k.error||"Failed to add chat to project")}catch(k){console.error("Failed to add chat to project:",k),alert("Failed to add chat to project. Please try again.")}finally{d(!1)}}},v=async()=>{if(b){d(!0);try{const w=await y.updateChatSession(r.id,{projectId:null});if(w.success)n(""),console.log("Chat successfully removed from project");else throw new Error(w.error||"Failed to remove chat from project")}catch(w){console.error("Failed to remove chat from project:",w),alert("Failed to remove chat from project. Please try again.")}finally{d(!1)}}};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"relative",ref:h,children:[p.jsx("button",{onClick:w=>{w.stopPropagation(),w.preventDefault(),a(!i)},className:"p-1 rounded-full text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-light-bg-page dark:hover:bg-dark-bg-page",disabled:u,children:u?p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):p.jsx($1,{className:"w-4 h-4"})}),i&&p.jsxs("div",{className:"absolute right-0 top-full mt-1 w-40 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-md shadow-lg z-10 py-1",children:[p.jsxs("button",{onClick:w=>{w.stopPropagation(),e(),a(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[p.jsx(di,{className:"w-3.5 h-3.5"})," Rename"]}),r.projectId?p.jsxs("button",{onClick:w=>{w.stopPropagation(),v(),a(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[p.jsx(Gr,{className:"w-3.5 h-3.5"})," Remove from Project"]}):p.jsxs("button",{onClick:w=>{w.stopPropagation(),l(!0),a(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[p.jsx(Ka,{className:"w-3.5 h-3.5"})," Add to Project"]}),p.jsxs("button",{onClick:w=>{w.stopPropagation(),t(),a(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-red-600 dark:text-red-500 hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[p.jsx(Qa,{className:"w-3.5 h-3.5"})," Delete"]})]})]}),p.jsx(A9,{isOpen:s,onClose:()=>l(!1),onSelectProject:D,currentProjectId:r.projectId,projects:g})]})},tl=()=>{const[r,e]=Q.useState([]),[t,n]=Q.useState(!0),[i,a]=Q.useState(null),s=Pn.getInstance(),l=ry(),u=Qr(),d=async()=>{var w,k,_;try{n(!0),a(null);const A=await xu.withRetry(()=>s.getAllTools(),3,1e3,{component:"useTools",operation:"fetchTools"});if(A.success&&A.data)e(A.data);else{const N=xu.createError("API_TOOLS_FETCH_ERROR",A.error||"Failed to fetch tools","useTools");(w=A.error)!=null&&w.includes("Failed to fetch")||(k=A.error)!=null&&k.includes("Network error")||(_=A.error)!=null&&_.includes("session is not stable")?(console.log("useTools: Network error, Supabase likely not configured"),e([])):(xu.handleError(N),a(N.message))}}catch(A){const N=A.message||"Unknown error";if(N.includes("Failed to fetch")||N.includes("TypeError")||N.includes("session is not stable"))console.log("useTools: Network error, Supabase likely not configured"),e([]);else{const E=xu.handleError(A,{component:"useTools",operation:"fetchTools"});a(E.message)}}finally{n(!1)}};Q.useEffect(()=>{d()},[s]);const h=async w=>{try{const k=await s.createTool(w);if(k.success&&k.data)return u.success("Tool created successfully!"),await d(),k.data;throw new Error(k.error||"Failed to create tool")}catch(k){throw u.error(`Failed to create tool: ${k instanceof Error?k.message:"Unknown error"}`),k}},g=async(w,k)=>{try{const _=await s.updateTool(w,k);if(_.success&&_.data)return u.success("Tool updated successfully."),await d(),_.data;throw new Error(_.error||"Failed to update tool")}catch(_){throw u.error(`Failed to update tool: ${_ instanceof Error?_.message:"Unknown error"}`),_}},b=async w=>{if(await l.confirm({title:"Delete Tool",message:"Are you sure you want to delete this tool? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",variant:"danger"}))try{const _=await s.deleteTool(w);if(_.success)u.success("Tool deleted successfully."),await d();else throw new Error(_.error||"Failed to delete tool")}catch(_){u.error(`Failed to delete tool: ${_ instanceof Error?_.message:"Unknown error"}`)}},y=r.filter(w=>w.active),D=r.filter(w=>w.active&&w.featured);return{tools:y,allTools:r,featuredTools:D,toolsByCategory:w=>y.filter(k=>k.category===w),loading:t,error:i,refetch:d,createTool:h,updateTool:g,deleteTool:b}},E9=()=>{const{openChatSearch:r}=Ca();return p.jsxs("div",{className:"relative my-4",children:[p.jsx(Aa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-light-text-tertiary dark:text-dark-text-tertiary"}),p.jsx("button",{onClick:r,className:"w-full pl-9 pr-3 py-2 text-sm rounded-sm border border-light-border dark:border-dark-border bg-light-bg-component dark:bg-dark-bg-component text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page focus:ring-2 focus:ring-primary-accent focus:outline-none text-left transition-colors",children:"Search conversations..."})]})},T9=({to:r,icon:e,label:t})=>{const n=Ta(),i=n.pathname===r||r!=="/"&&n.pathname.startsWith(r);return p.jsxs(Rc,{to:r,className:`flex items-center gap-3 px-2.5 py-2 rounded-sm text-sm font-medium transition-colors ${i?"bg-light-bg-page dark:bg-dark-bg-page text-light-text-primary dark:text-dark-text-primary":"text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-page dark:hover:bg-dark-bg-page hover:text-light-text-primary dark:hover:text-dark-text-primary"}`,children:[e,p.jsx("span",{children:t})]})},C9=()=>{const[r,e]=Q.useState(!1),[t,n]=Q.useState(!1),i=Q.useRef(null),{profile:a}=ht(),s=wa.getInstance(),l=Kr();Q.useEffect(()=>{const y=D=>{i.current&&!i.current.contains(D.target)&&e(!1)};return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[]);const u=async()=>{n(!0);try{await s.signOut()}catch(y){console.error("Logout failed:",y)}finally{n(!1),e(!1)}},d=()=>{l("/settings"),e(!1)},h=()=>{window.open("https://www.skool.com/artemo-user-group-3561","_blank"),e(!1)},g=y=>y?y.split(" ").map(D=>D[0]).join("").toUpperCase().slice(0,2):"U",b=y=>y?y.split(" ")[0]:"User";return p.jsxs("div",{className:"relative",ref:i,children:[p.jsxs("div",{className:`absolute bottom-full left-0 w-full mb-2 p-2 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-md shadow-lg transition-all duration-200 ${r?"opacity-100 visible translate-y-0":"opacity-0 invisible translate-y-2"}`,children:[p.jsxs("button",{onClick:d,className:"flex items-center gap-3 w-full px-3 py-2 text-sm rounded-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-sidebar hover:text-light-text-primary dark:hover:text-dark-text-primary text-left",children:[p.jsx(Bc,{className:"w-4 h-4"}),"Settings"]}),p.jsxs("button",{onClick:h,className:"flex items-center gap-3 w-full px-3 py-2 text-sm rounded-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-sidebar hover:text-light-text-primary dark:hover:text-dark-text-primary text-left",children:[p.jsx(PR,{className:"w-4 h-4"}),"Get Help"]}),p.jsx("div",{className:"h-px bg-light-border dark:bg-dark-border my-2"}),p.jsxs("button",{onClick:u,disabled:t,className:"flex items-center gap-3 w-full px-3 py-2 text-sm rounded-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-sidebar hover:text-light-text-primary dark:hover:text-dark-text-primary text-left disabled:opacity-50",children:[p.jsx(zR,{className:"w-4 h-4"}),t?"Logging out...":"Log Out"]})]}),p.jsxs("div",{className:"flex items-center gap-3 cursor-pointer border-t border-light-border dark:border-dark-border -mx-4 px-4 pt-4",onClick:()=>e(!r),children:[p.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-accent flex items-center justify-center font-semibold text-text-on-accent",children:g(a==null?void 0:a.full_name)}),p.jsx("div",{className:"flex-grow",children:p.jsxs("p",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:[b(a==null?void 0:a.full_name),"'s Workspace"]})})]})]})},Vw=({title:r,icon:e,children:t,headerAction:n})=>{const[i,a]=Q.useState(!0);return p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between w-full px-2.5 py-2 text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-page dark:hover:bg-dark-bg-page hover:text-light-text-primary dark:hover:text-dark-text-primary rounded-sm",children:[p.jsxs("button",{onClick:()=>a(!i),className:"flex items-center gap-3 flex-grow text-left",children:[e,p.jsx("span",{children:r}),p.jsx(iy,{className:`w-4 h-4 ml-auto transition-transform ${i?"rotate-180":""}`})]}),n&&p.jsx("div",{className:"ml-2",children:n})]}),i&&p.jsx("div",{className:"pl-4 pt-2 pb-1 space-y-1",children:t})]})},N9=({onRename:r,onDelete:e})=>{const[t,n]=Q.useState(!1),i=Q.useRef(null);return Q.useEffect(()=>{const a=s=>{i.current&&!i.current.contains(s.target)&&n(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),p.jsxs("div",{className:"relative",ref:i,children:[p.jsx("button",{onClick:a=>{a.stopPropagation(),a.preventDefault(),n(!t)},className:"p-1 rounded-full text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-light-bg-page dark:hover:bg-dark-bg-page",children:p.jsx($1,{className:"w-4 h-4"})}),t&&p.jsxs("div",{className:"absolute right-0 top-full mt-1 w-32 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-md shadow-lg z-10 py-1",children:[p.jsxs("button",{onClick:a=>{a.stopPropagation(),r(),n(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[p.jsx(di,{className:"w-3.5 h-3.5"})," Rename"]}),p.jsxs("button",{onClick:a=>{a.stopPropagation(),e(),n(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-red-600 dark:text-red-500 hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[p.jsx(Qa,{className:"w-3.5 h-3.5"})," Delete"]})]})]})},U9=({projects:r,chatHistory:e,onInitiateToolActivation:t})=>{const{isSidebarOpen:n,favoriteTools:i,recentTools:a,openModal:s,setItemToRename:l}=Ca(),{tools:u}=tl(),d=Kr(),h=[{to:"/",icon:p.jsx(BR,{className:"w-4 h-4"}),label:"Dashboard"},{to:"/tools",icon:p.jsx(_r,{className:"w-4 h-4"}),label:"All Tools"},{to:"/profiles",icon:p.jsx(Ko,{className:"w-4 h-4"}),label:"Profiles"},{to:"/projects",icon:p.jsx(Gr,{className:"w-4 h-4"}),label:"All Projects"},{to:"/history",icon:p.jsx(t1,{className:"w-4 h-4"}),label:"History"}],g=i.map(y=>u.find(D=>D.id===y)).filter(Boolean),b=a.map(y=>u.find(D=>D.id===y)).filter(Boolean);return p.jsxs("aside",{className:`fixed lg:relative top-0 left-0 h-full w-[280px] bg-light-bg-sidebar dark:bg-dark-bg-sidebar border-r border-light-border dark:border-dark-border flex flex-col p-4 z-50 transform transition-transform duration-300 ease-in-out ${n?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[p.jsxs("div",{className:"flex-grow overflow-y-auto pr-1",children:[p.jsx(Rc,{to:"/",className:"flex items-center p-2 mb-6",children:p.jsx(bA,{className:"h-8"})}),p.jsxs("button",{onClick:s,className:"flex items-center justify-center gap-2 w-full p-2.5 mb-4 rounded-sm border-none text-sm font-medium cursor-pointer bg-primary-accent text-text-on-accent hover:opacity-85 transition-opacity",children:[p.jsx(Ka,{className:"w-4 h-4"}),p.jsx("span",{children:"New Project"})]}),p.jsx(E9,{}),p.jsx("nav",{className:"flex flex-col gap-1",children:h.map(y=>p.jsx(T9,{...y},y.to))}),p.jsxs("div",{className:"my-2 space-y-1",children:[p.jsx(Vw,{title:"Favorite Tools",icon:p.jsx(co,{className:"w-4 h-4 text-yellow-500"}),children:g.length>0?g.map(y=>p.jsx("a",{href:"#",onClick:D=>{D.preventDefault(),t(y)},className:"block truncate text-sm text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary p-1 rounded-sm",children:y.title},y.id)):p.jsx("span",{className:"block text-sm text-light-text-tertiary dark:text-dark-text-tertiary p-1",children:"No favorite tools yet."})}),p.jsx(Vw,{title:"Recent Tools",icon:p.jsx(t1,{className:"w-4 h-4"}),children:b.length>0?b.map(y=>p.jsx("a",{href:"#",onClick:D=>{D.preventDefault(),t(y)},className:"block truncate text-sm text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary p-1 rounded-sm",children:y.title},y.id)):p.jsx("span",{className:"block text-sm text-light-text-tertiary dark:text-dark-text-tertiary p-1",children:"No recent tools."})}),p.jsx(Vw,{title:"Recent History",icon:p.jsx(Gr,{className:"w-4 h-4"}),children:e.length>0?e.slice(0,10).map(y=>{var D;return p.jsxs("div",{className:"group relative text-sm text-light-text-tertiary dark:text-dark-text-tertiary p-1.5 rounded-sm hover:bg-light-bg-page dark:hover:bg-dark-bg-page cursor-pointer",children:[p.jsxs("div",{onClick:()=>d(`/chat/${y.id}`),children:[p.jsx("p",{className:"font-medium text-light-text-secondary dark:text-dark-text-secondary truncate pr-6",children:y.toolTitle}),p.jsxs("p",{className:"truncate italic",children:['"',((D=y.messages.find(v=>v.sender==="user"))==null?void 0:D.text)||"...",'"']}),p.jsx("p",{className:"opacity-70",children:new Date(y.timestamp).toLocaleDateString()}),y.projectName&&p.jsxs("p",{className:"text-xs text-primary-accent",children:["📁 ",y.projectName]})]}),p.jsx("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx(S9,{chatItem:y,onRename:()=>l({id:y.id,name:y.toolTitle,type:"chat"}),onDelete:()=>{},onAddToProject:v=>{console.log("Add chat to project:",y.id,v)}})})]},y.id)}):p.jsx("span",{className:"block text-sm text-light-text-tertiary dark:text-dark-text-tertiary p-1",children:"No chat history."})})]}),p.jsx("div",{className:"h-px bg-light-border dark:bg-dark-border my-2"}),p.jsx("div",{className:"mt-4 flex flex-col gap-1",children:r.map(y=>p.jsxs("div",{className:"group flex items-center justify-between text-sm font-medium rounded-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-page dark:hover:bg-dark-bg-page hover:text-light-text-primary dark:hover:text-dark-text-primary",children:[p.jsxs(Rc,{to:`/projects/${y.id}`,className:"flex-grow flex items-center gap-3 px-2.5 py-2 text-left",children:[p.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center",style:{backgroundColor:y.color},children:p.jsx(Gr,{className:"w-3 h-3 text-white"})}),p.jsx("span",{className:"truncate",children:y.name})]}),p.jsx("div",{className:"pr-2 opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx(N9,{onRename:()=>l({id:y.id,name:y.name,type:"project"}),onDelete:()=>{}})})]},y.id))})]}),p.jsxs("footer",{className:"flex-shrink-0",children:[p.jsx("div",{className:"flex flex-col gap-1 mb-4",children:p.jsxs("a",{href:"https://www.skool.com/artemo-user-group-3561",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-2.5 py-2 rounded-sm text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-page dark:hover:bg-dark-bg-page hover:text-light-text-primary dark:hover:text-dark-text-primary",children:[p.jsx(Fs,{className:"w-4 h-4"}),p.jsxs("span",{children:["Join our"," ",p.jsx("span",{className:"text-primary-accent hover:underline",children:"community"})]})]})}),p.jsx(C9,{})]})]})},t5=({selectedProfileId:r,onSelectProfile:e,onCreateNew:t,className:n="",label:i="Profile",useGlobalState:a=!1})=>{const[s,l]=Q.useState(!1),u=Q.useRef(null),{getClientProfiles:d,activeClientProfileId:h,setActiveClientProfileId:g}=ht(),b=d(),y=a?h:r,D=y?b.find(k=>k.id===y):null;Q.useEffect(()=>{const k=_=>{u.current&&!u.current.contains(_.target)&&l(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const v=k=>{a?g((k==null?void 0:k.id)||null):e&&e(k),l(!1)},w=()=>{t&&t(),l(!1)};return p.jsxs("div",{className:`relative ${n}`,ref:u,children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary mb-2",children:i}),p.jsxs("button",{onClick:()=>l(!s),className:"flex items-center justify-between w-full px-3 py-2 text-sm border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page transition-colors",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Ko,{className:"w-4 h-4 text-light-text-tertiary dark:text-dark-text-tertiary"}),p.jsx("span",{className:"truncate",children:D?D.name:"None"})]}),p.jsx(iy,{className:`w-4 h-4 text-light-text-tertiary dark:text-dark-text-tertiary transition-transform ${s?"rotate-180":""}`})]}),s&&p.jsx("div",{className:"absolute top-full left-0 mt-2 w-full bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-md shadow-lg z-20 max-h-60 overflow-y-auto",children:p.jsxs("div",{className:"p-2",children:[p.jsxs("button",{onClick:()=>v(null),className:`flex items-center justify-between w-full text-left px-3 py-2 text-sm rounded-sm transition-colors ${D?"text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page":"bg-primary-accent/20 text-light-text-primary dark:text-dark-text-primary"}`,children:[p.jsx("span",{children:"None"}),!D&&p.jsx(um,{className:"w-4 h-4 text-primary-accent"})]}),b.map(k=>p.jsxs("button",{onClick:()=>v(k),className:`flex items-center justify-between w-full text-left px-3 py-2 text-sm rounded-sm transition-colors ${(D==null?void 0:D.id)===k.id?"bg-primary-accent/20 text-light-text-primary dark:text-dark-text-primary":"text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page"}`,children:[p.jsxs("div",{className:"flex items-center gap-2 flex-grow min-w-0",children:[p.jsx(Ko,{className:"w-4 h-4 flex-shrink-0"}),p.jsx("span",{className:"truncate",children:k.name})]}),(D==null?void 0:D.id)===k.id&&p.jsx(um,{className:"w-4 h-4 text-primary-accent flex-shrink-0"})]},k.id)),t&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"h-px bg-light-border dark:border-dark-border my-2"}),p.jsxs("button",{onClick:w,className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm text-primary-accent hover:bg-primary-accent/10 rounded-sm transition-colors",children:[p.jsx(Ka,{className:"w-4 h-4"}),p.jsx("span",{children:"Create new profile"})]})]})]})})]})},R9=({isOpen:r,onClose:e,onCreate:t})=>{const[n,i]=Q.useState(""),[a,s]=Q.useState("#008F6B"),[l,u]=Q.useState(null),{getDefaultClientProfile:d}=ht(),h=[{name:"Teal",value:"#008F6B"},{name:"Blue",value:"#3B82F6"},{name:"Purple",value:"#8B5CF6"},{name:"Pink",value:"#EC4899"},{name:"Red",value:"#EF4444"},{name:"Orange",value:"#F97316"},{name:"Yellow",value:"#EAB308"},{name:"Green",value:"#22C55E"},{name:"Indigo",value:"#6366F1"},{name:"Gray",value:"#6B7280"},{name:"Emerald",value:"#10B981"},{name:"Cyan",value:"#06B6D4"}];Bn.useEffect(()=>{r&&u(null)},[r]);const g=()=>{t(n||"Untitled Project",a,l||void 0),i(""),s("#008F6B"),u(null)},b=()=>{i(""),s("#008F6B"),u(null),e()};return r?p.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-[1000] flex items-center justify-center p-4 transition-opacity",onClick:b,children:p.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-lg transition-transform transform scale-100",onClick:y=>y.stopPropagation(),children:[p.jsxs("div",{className:"p-4 lg:p-6 border-b border-light-border dark:border-dark-border flex justify-between items-center",children:[p.jsx("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Create New Project"}),p.jsx("button",{onClick:b,className:"text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:p.jsx(Ms,{className:"w-6 h-6"})})]}),p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{htmlFor:"project-name-input",className:"block font-medium text-light-text-primary dark:text-dark-text-primary mb-2 text-base",children:"Project Name"}),p.jsx("input",{type:"text",id:"project-name-input",value:n,onChange:y=>i(y.target.value),className:"w-full p-2.5 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-sm text-light-text-primary dark:text-dark-text-primary text-base focus:border-primary-accent focus:ring-2 focus:ring-primary-accent/20 outline-none",placeholder:"e.g., Q4 Email Campaign"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-light-text-primary dark:text-dark-text-primary mb-2 text-base",children:"Project Color"}),p.jsx("div",{className:"grid grid-cols-6 gap-2",children:h.map(y=>p.jsx("button",{type:"button",onClick:()=>s(y.value),className:`relative w-8 h-8 rounded-md border-2 transition-all duration-200 hover:scale-110 ${a===y.value?"border-gray-800 dark:border-white shadow-lg":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,style:{backgroundColor:y.value},title:y.name,children:a===y.value&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:p.jsx("svg",{className:"w-4 h-4 text-white drop-shadow-lg",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})},y.value))})]}),p.jsxs("div",{className:"mt-6",children:[p.jsx(t5,{selectedProfileId:(l==null?void 0:l.id)||null,onSelectProfile:u,label:"Associate with Profile"}),p.jsx("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary mt-1",children:"Optional: Link this project to a specific profile for context"})]})]}),p.jsxs("div",{className:"p-4 lg:p-6 border-t border-light-border dark:border-dark-border flex justify-end gap-3",children:[p.jsx("button",{onClick:b,className:"px-5 py-2 rounded-sm text-base font-medium bg-light-bg-sidebar dark:bg-dark-bg-component border border-light-border dark:border-dark-border text-light-text-primary dark:text-dark-text-primary hover:opacity-85",children:"Cancel"}),p.jsx("button",{onClick:g,className:"px-5 py-2 rounded-sm text-base font-medium bg-primary-accent text-text-on-accent hover:opacity-85",children:"Create Project"})]})]})}):null},vp=()=>{const[r,e]=Q.useState([]),[t,n]=Q.useState(!0),[i,a]=Q.useState(null),s=Pn.getInstance(),l=async()=>{n(!0),a(null);try{console.log("useCategories: Starting to fetch categories");const b=await s.getCategories();console.log("useCategories: API response received:",b),b.success&&b.data?(e(b.data.sort((y,D)=>y.displayOrder-D.displayOrder)),console.log("useCategories: Categories set successfully:",b.data.length)):(console.log("useCategories: API response failed:",b.error),a(b.error||"Failed to fetch categories"))}catch(b){console.log("useCategories: Exception caught:",b);const y=b instanceof Error?b.message:"Unknown error";y.includes("Failed to fetch")||y.includes("TypeError")||y.includes("session is not stable")?(console.log("useCategories: Network error, Supabase likely not configured"),e([])):a("Network error occurred")}finally{console.log("useCategories: Fetch completed, setting loading to false"),n(!1)}};Q.useEffect(()=>{l()},[]);const u=async b=>{const y=await s.createCategory(b);if(y.success&&y.data)return await l(),y.data;throw new Error(y.error||"Failed to create category")},d=async(b,y)=>{const D=await s.updateCategory(b,y);if(D.success&&D.data)return await l(),D.data;throw new Error(D.error||"Failed to update category")},h=async b=>{const y=await s.deleteCategory(b);if(y.success)await l();else throw new Error(y.error||"Failed to delete category")};return{categories:Q.useMemo(()=>r.filter(b=>b.active),[r]),allCategories:r,loading:t,error:i,refetch:l,createCategory:u,updateCategory:d,deleteCategory:h}},j9=({tool:r,onClose:e,onStart:t,onSetDontShowAgain:n})=>{const[i,a]=Q.useState(!1),{categories:s}=vp();if(!r)return null;const u=(()=>{const h=s.find(b=>b.name===r.category);return h!=null&&h.iconName&&{Settings:Bc,Box:_r,Edit:di,Mail:V1,File:Cd,Mic:X1,Activity:Ed,Users:Fs}[h.iconName]||_r})(),d=()=>{i&&n(r.id,!0),t(r)};return p.jsxs("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/60 backdrop-blur-md z-[1000] flex items-center justify-center p-4 transition-opacity animate-[fadeIn_0.2s_ease-out]",onClick:e,children:[p.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-2xl w-full max-w-2xl transition-transform transform scale-100 animate-[scaleUp_0.2s_ease-out] text-center",onClick:h=>h.stopPropagation(),children:[p.jsxs("div",{className:"p-8 lg:p-12",children:[p.jsx(u,{className:"w-16 h-16 text-primary-accent mx-auto mb-5"}),p.jsx("h3",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary mb-3",children:r.title}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-6 text-lg leading-relaxed",children:r.description}),p.jsx("div",{className:"mb-6",children:p.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:[r.questions.length>0&&p.jsxs("span",{children:[r.questions.length," questions"]}),r.featured&&p.jsx("span",{className:"text-yellow-600 dark:text-yellow-400",children:"• Featured"})]})}),p.jsx("a",{href:"#",className:"text-primary-accent font-medium text-base hover:underline mb-8 inline-block",children:"Watch tutorial"}),p.jsxs("button",{onClick:d,className:"w-full px-5 py-3 rounded-md text-lg font-medium bg-primary-accent text-text-on-accent hover:opacity-85 transition-opacity",children:["Start ",r.title]}),p.jsx("div",{className:"mt-6 text-left",children:p.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:[p.jsx("input",{type:"checkbox",checked:i,onChange:h=>a(h.target.checked),className:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 dark:bg-dark-bg-component text-primary-accent focus:ring-primary-accent"}),"Don't show this again for this tool"]})})]}),p.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 rounded-full text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-black/10 dark:hover:bg-white/10",children:p.jsx(Ms,{className:"w-6 h-6"})})]}),p.jsx("style",{children:`
                @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
                @keyframes scaleUp { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
            `})]})},wp=()=>{const r=ry(),e=Qr(),[t,n]=Q.useState([]),[i,a]=Q.useState(!0),[s,l]=Q.useState(null),{user:u}=ht(),d=Pn.getInstance(),h=async()=>{var w;if(!u){a(!1);return}if(!cn()){console.log("useChatHistory: Supabase not connected, using empty chat history"),n([]),a(!1);return}a(!0),l(null);try{const k=await d.getChatSessions(u.id);k.success&&k.data?(n(k.data),De.info("Chat history fetched successfully",{component:"useChatHistory",sessionCount:k.data.length,userId:u.id})):(w=k.error)!=null&&w.includes("session is not stable")?(console.log("useChatHistory: Session not stable, will retry automatically"),n([])):l(k.error||"Failed to fetch chat history")}catch(k){console.log("useChatHistory: Error fetching chat history:",k);const _=k instanceof Error?k.message:"Unknown error";_.includes("session is not stable")?(console.log("useChatHistory: Session not stable, will retry automatically"),n([])):_.includes("Failed to fetch")||_.includes("TypeError")?(console.log("useChatHistory: Network connectivity issue - Supabase may not be configured"),n([])):l("Network error occurred")}finally{a(!1)}};return Q.useEffect(()=>{u?h():a(!1)},[u]),{chatHistory:t,loading:i,error:s,refetch:h,saveChatSession:async w=>{if(!u)throw new Error("User not authenticated");if(!cn())throw new Error("Supabase not connected");try{let k;if(w.id?k=await d.updateChatSession(w.id,{title:w.title,messages:w.messages,projectId:w.projectId}):k=await d.saveChatSession({userId:u.id,toolId:w.toolId,projectId:w.projectId,title:w.title,messages:w.messages}),k.success)await h();else throw new Error(k.error||"Failed to save chat session");return k}catch(k){throw console.error("useChatHistory: Error in saveChatSession:",k),e.error(`Failed to save chat session: ${k instanceof Error?k.message:"Unknown error"}`),k}},clearHistory:async()=>{if(!u)return;if(await r.confirm({title:"Clear All History",message:"Are you sure you want to delete ALL chat history? This action cannot be undone.",confirmText:"Delete All",cancelText:"Cancel",variant:"danger"})&&cn())try{const k=await d.deleteAllChatSessions(u.id);if(k.success)e.success("Chat history cleared successfully."),await h();else throw new Error(k.error||"Failed to clear history")}catch(k){console.error("Failed to clear all chat history:",k),e.error(`Failed to clear history: ${k instanceof Error?k.message:"Unknown error"}`)}},deleteChat:async w=>{if(!cn()){e.error("Cannot delete chat, connection not available.");return}const k=t.find(A=>A.id===w);if(await r.confirm({title:"Delete Chat",message:`Are you sure you want to delete the chat "${(k==null?void 0:k.toolTitle)??"this chat"}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger"}))try{const A=await d.deleteChatSession(w);if(A.success)e.success("Chat deleted successfully."),await h();else throw new Error(A.error||"Failed to delete chat session")}catch(A){console.error("Failed to delete chat:",A),e.error(`Failed to delete chat: ${A instanceof Error?A.message:"Unknown error"}`)}},updateChatSession:async(w,k)=>{if(!cn())return e.error("Cannot update chat, connection not available."),{success:!1,error:"Supabase not connected"};try{const _=await d.updateChatSession(w,k);if(_.success)e.success("Chat updated successfully."),await h();else throw new Error(_.error||"Failed to update chat session");return _}catch(_){throw console.error("useChatHistory: Exception during chat session update:",_),e.error(`Failed to update chat: ${_ instanceof Error?_.message:"Unknown error"}`),_}},addChatToProject:async(w,k)=>{if(!cn())return e.error("Cannot add to project, connection not available."),{success:!1,error:"Supabase not connected"};try{const _=await d.updateChatSession(w,{projectId:k});if(_.success)return e.success("Chat added to project."),await h(),{success:!0,data:_.data};throw new Error(_.error||"Failed to add chat to project")}catch(_){return e.error(`Failed to add chat to project: ${_ instanceof Error?_.message:"Unknown error"}`),{success:!1,error:_ instanceof Error?_.message:"Unknown error"}}}}},F9=({chat:r,searchTerm:e,onView:t,onResume:n})=>{var l,u;const i=((l=r.messages.find(d=>d.sender==="user"))==null?void 0:l.text)||"",a=((u=r.messages.find(d=>d.sender==="ai"))==null?void 0:u.text)||"",s=(d,h)=>{if(!h.trim())return d;const g=new RegExp(`(${h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return d.split(g).map((y,D)=>g.test(y)?p.jsx("mark",{className:"bg-yellow-200 dark:bg-yellow-800/50 text-light-text-primary dark:text-dark-text-primary",children:y},D):y)};return p.jsxs("div",{className:"p-4 border-b border-light-border dark:border-dark-border last:border-b-0",children:[p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(Sd,{className:"w-5 h-5 text-primary-accent flex-shrink-0 mt-1"}),p.jsxs("div",{className:"flex-grow min-w-0 mb-3",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary truncate",children:s(r.toolTitle,e)}),r.projectName&&p.jsxs("span",{className:"flex items-center gap-1 text-xs text-primary-accent bg-primary-accent/10 px-2 py-1 rounded-full",children:[p.jsx(Gr,{className:"w-3 h-3"}),r.projectName]})]}),i&&p.jsxs("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary mb-1 line-clamp-2",children:[p.jsx("span",{className:"font-medium",children:"You:"})," ",s(i.substring(0,100),e),i.length>100&&"..."]}),a&&p.jsxs("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary mb-2 line-clamp-2",children:[p.jsx("span",{className:"font-medium",children:"AI:"})," ",s(a.substring(0,100),e),a.length>100&&"..."]}),p.jsxs("div",{className:"flex items-center gap-4 text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:[p.jsx("span",{children:new Date(r.timestamp).toLocaleDateString()}),p.jsxs("span",{children:[r.messages.length," messages"]})]})]})]}),p.jsxs("div",{className:"flex items-center gap-3 ml-8",children:[p.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-3 py-1.5 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity text-sm font-medium",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Continue"]}),p.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-3 py-1.5 bg-light-bg-sidebar dark:bg-dark-bg-component border border-light-border dark:border-dark-border text-light-text-primary dark:text-dark-text-primary rounded-md hover:bg-light-bg-component dark:hover:bg-dark-bg-page transition-colors text-sm",children:[p.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]})]})]})},I9=({isOpen:r,onClose:e,onSelectChat:t,onResumeChat:n})=>{const[i,a]=Q.useState(""),[s,l]=Q.useState(!1),u=Q.useRef(null),{chatHistory:d,loading:h}=wp();Q.useEffect(()=>{r&&u.current&&setTimeout(()=>{var y;(y=u.current)==null||y.focus()},100)},[r]),Q.useEffect(()=>{r||a("")},[r]);const g=Q.useMemo(()=>{if(!i.trim())return d.slice(0,20);const y=i.toLowerCase();return d.filter(D=>{var v;return D.toolTitle.toLowerCase().includes(y)||(v=D.projectName)!=null&&v.toLowerCase().includes(y)?!0:D.messages.some(w=>w.text.toLowerCase().includes(y))}).slice(0,50)},[d,i]);Q.useEffect(()=>{if(i.trim()){l(!0);const y=setTimeout(()=>{l(!1)},300);return()=>clearTimeout(y)}},[i]);const b=y=>{y.key==="Escape"?e():y.key==="Enter"&&g.length>0&&(n(g[0]),e())};return r?p.jsxs("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/60 backdrop-blur-md z-[1000] flex items-center justify-center p-4 transition-opacity animate-[fadeIn_0.2s_ease-out]",onClick:e,children:[p.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-2xl w-full max-w-2xl max-h-[80vh] transition-transform transform scale-100 animate-[scaleUp_0.2s_ease-out] flex flex-col",onClick:y=>y.stopPropagation(),children:[p.jsx("div",{className:"p-6 border-b border-light-border dark:border-dark-border",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Sd,{className:"w-6 h-6 text-primary-accent"}),p.jsx("h3",{className:"font-serif text-2xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Search Conversations"})]}),p.jsx("button",{onClick:e,className:"p-2 rounded-full text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-black/10 dark:hover:bg-white/10 transition-colors",children:p.jsx(Ms,{className:"w-5 h-5"})})]})}),p.jsxs("div",{className:"p-6 border-b border-light-border dark:border-dark-border",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Aa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-light-text-tertiary dark:text-dark-text-tertiary"}),p.jsx("input",{ref:u,type:"text",value:i,onChange:y=>a(y.target.value),onKeyDown:b,placeholder:"Search your conversations...",className:"w-full pl-10 pr-4 py-3 text-base border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none"})]}),p.jsx("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary mt-2",children:"Search by tool name, project, or conversation content • Press Enter to select first result • Escape to close"})]}),p.jsx("div",{className:"flex-grow overflow-hidden flex flex-col",children:h?p.jsx("div",{className:"flex items-center justify-center py-12",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-accent mx-auto mb-4"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading conversations..."})]})}):s?p.jsx("div",{className:"flex items-center justify-center py-12",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-accent mx-auto mb-3"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Searching..."})]})}):g.length>0?p.jsxs("div",{className:"overflow-y-auto",children:[p.jsx("div",{className:"p-3",children:p.jsx("p",{className:"text-xs font-medium text-light-text-tertiary dark:text-dark-text-tertiary mb-3 px-1",children:i.trim()?`${g.length} result${g.length===1?"":"s"} found`:`${Math.min(g.length,20)} recent conversations`})}),g.map(y=>p.jsx(F9,{chat:y,searchTerm:i,onView:()=>{t(y),e()},onResume:()=>{n(y),e()}},y.id))]}):i.trim()?p.jsx("div",{className:"flex items-center justify-center py-12",children:p.jsxs("div",{className:"text-center",children:[p.jsx(Sd,{className:"w-12 h-12 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary mb-2",children:"No conversations found"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Try different keywords or check your conversation history"})]})}):d.length===0?p.jsx("div",{className:"flex items-center justify-center py-12",children:p.jsxs("div",{className:"text-center",children:[p.jsx(Sd,{className:"w-12 h-12 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary mb-2",children:"No conversations yet"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Start using AI tools to see your conversation history here"})]})}):p.jsx("div",{className:"flex items-center justify-center py-12",children:p.jsxs("div",{className:"text-center",children:[p.jsx(Aa,{className:"w-12 h-12 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary mb-2",children:"Search your conversations"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Type to search through your chat history"})]})})}),p.jsx("div",{className:"p-4 border-t border-light-border dark:border-dark-border bg-light-bg-sidebar dark:bg-dark-bg-sidebar",children:p.jsxs("div",{className:"flex items-center justify-between text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:[p.jsxs("span",{children:[d.length," total conversation",d.length===1?"":"s"]}),p.jsx("span",{children:"Press Enter to continue first result • Esc to close"})]})})]}),p.jsx("style",{children:`
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes scaleUp { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
      `})]}):null},O9=()=>p.jsx("div",{className:"w-[280px] bg-light-bg-sidebar dark:bg-dark-bg-sidebar border-r border-light-border dark:border-dark-border p-4 flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary mb-2",children:"Sidebar temporarily unavailable"}),p.jsx("button",{onClick:()=>window.location.reload(),className:"text-xs text-primary-accent hover:underline",children:"Reload page"})]})}),M9=()=>{const{toggleSidebar:r,theme:e,toggleTheme:t}=Ca();return p.jsxs("header",{className:"lg:hidden flex items-center justify-between p-3 border-b border-light-border dark:border-dark-border bg-light-bg-page dark:bg-dark-bg-page",children:[p.jsx("button",{onClick:r,className:"p-1",children:p.jsx(WR,{className:"w-6 h-6 text-light-text-primary dark:text-dark-text-primary"})}),p.jsx(Rc,{to:"/",className:"flex items-center",children:p.jsx(bA,{className:"h-8"})}),p.jsx("button",{onClick:t,className:"p-1 rounded-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-component hover:text-light-text-primary dark:hover:text-dark-text-primary",children:e==="light"?p.jsx(qR,{className:"w-5 h-5"}):p.jsx(HR,{className:"w-5 h-5"})})]})},L9=()=>{const{theme:r,toggleTheme:e}=Ca();return p.jsx("header",{className:"hidden lg:flex justify-end items-center py-3 px-6 border-b border-light-border dark:border-dark-border flex-shrink-0",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("button",{className:"flex items-center gap-2 p-1 rounded-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-component hover:text-light-text-primary dark:hover:text-dark-text-primary font-medium",children:[p.jsx(PR,{className:"w-5 h-5"}),p.jsx("span",{children:"Help center"})]}),p.jsx("button",{onClick:e,className:"p-1 rounded-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-component hover:text-light-text-primary dark:hover:text-dark-text-primary",children:r==="light"?p.jsx(qR,{className:"w-5 h-5"}):p.jsx(HR,{className:"w-5 h-5"})})]})})},B9=()=>{const{itemToRename:r,setItemToRename:e}=Ca(),[t,n]=Bn.useState(""),{updateProject:i}=xp(),{updateChatSession:a}=wp();if(Kr(),Bn.useEffect(()=>{r&&n(r.name)},[r]),!r)return null;const s=async()=>{if(t.trim())try{r.type==="project"?await i(r.id,{name:t.trim()}):r.type==="chat"&&await a(r.id,{title:t.trim()}),e(null)}catch(l){console.error("Failed to rename:",l)}};return p.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-[1000] flex items-center justify-center p-4",onClick:()=>e(null),children:p.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-md",onClick:l=>l.stopPropagation(),children:[p.jsxs("div",{className:"p-4 lg:p-6 border-b border-light-border dark:border-dark-border flex justify-between items-center",children:[p.jsxs("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:["Rename ",r.type==="project"?"Project":"Chat"]}),p.jsx("button",{onClick:()=>e(null),className:"text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("div",{className:"p-6",children:[p.jsx("label",{htmlFor:"rename-input",className:"block font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Name"}),p.jsx("input",{id:"rename-input",type:"text",value:t,onChange:l=>n(l.target.value),className:"w-full p-2.5 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-sm text-light-text-primary dark:text-dark-text-primary focus:border-primary-accent focus:ring-2 focus:ring-primary-accent/20 outline-none",onKeyDown:l=>l.key==="Enter"&&s(),autoFocus:!0})]}),p.jsxs("div",{className:"p-4 lg:p-6 border-t border-light-border dark:border-dark-border flex justify-end gap-3",children:[p.jsx("button",{onClick:()=>e(null),className:"px-5 py-2 rounded-sm bg-light-bg-sidebar dark:bg-dark-bg-component border border-light-border dark:border-dark-border text-light-text-primary dark:text-dark-text-primary hover:opacity-85",children:"Cancel"}),p.jsx("button",{onClick:s,className:"px-5 py-2 rounded-sm bg-primary-accent text-text-on-accent hover:opacity-85",children:"Save"})]})]})})},P9=()=>{const{isSidebarOpen:r,toggleSidebar:e,isModalOpen:t,closeModal:n,toolForActivation:i,setToolForActivation:a,isChatSearchOpen:s,closeChatSearch:l}=Ca(),{categories:u}=vp(),{projects:d,createProject:h}=xp(),{chatHistory:g}=wp(),{profile:b}=ht(),y=Kr(),D=_=>{a(_)},v=_=>{y(`/tools/${_.id}`),a(null)},w=async(_,A,N)=>{try{await h(_||"Untitled Project",A,N),n()}catch(E){console.error("Failed to create project:",E)}},k=(_,A)=>{try{const N=JSON.parse(localStorage.getItem("dontShowAgainToolIds")||"[]"),E=new Set(N);A?E.add(_):E.delete(_),localStorage.setItem("dontShowAgainToolIds",JSON.stringify(Array.from(E)))}catch(N){console.error("Failed to update dont show again preference:",N)}};return p.jsxs(p.Fragment,{children:[p.jsx("div",{className:`page-overlay fixed inset-0 z-40 bg-black/40 dark:bg-black/50 transition-opacity lg:hidden ${r?"opacity-100 visible":"opacity-0 invisible"}`,onClick:e}),p.jsxs("div",{className:"flex h-screen font-sans",children:[p.jsx(KR,{fallback:p.jsx(O9,{}),children:p.jsx(U9,{projects:d,chatHistory:g,onInitiateToolActivation:D})}),p.jsxs("main",{className:"flex-grow flex flex-col bg-light-bg-page dark:bg-dark-bg-page",children:[p.jsx(M9,{}),p.jsx(L9,{}),p.jsx("div",{className:"flex-grow overflow-y-auto",children:p.jsx(RR,{})})]})]}),(b==null?void 0:b.role)==="admin"&&p.jsx("button",{onClick:()=>y("/admin"),className:"fixed bottom-4 right-4 px-4 py-2 bg-red-600 text-white rounded-md shadow-lg hover:bg-red-700 transition-colors z-50 cursor-pointer",children:"Admin Panel"}),p.jsx(R9,{isOpen:t,onClose:n,onCreate:w,categories:u.map(_=>_.name)}),p.jsx(j9,{tool:i,onClose:()=>a(null),onStart:v,onSetDontShowAgain:k}),p.jsx(B9,{}),p.jsx(I9,{isOpen:s,onClose:l,onSelectChat:_=>{y(`/chat/${_.id}`),l()},onResumeChat:_=>{y(`/tools/${_.toolId}`,{state:{existingChatSession:_}}),l()}})]})},z9=({to:r,icon:e,label:t})=>{const i=Ta().pathname===r;return p.jsxs(Rc,{to:r,className:`flex items-center gap-3 px-4 py-3 rounded-md text-sm font-medium transition-colors ${i?"bg-primary-accent text-text-on-accent":"text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-page dark:hover:bg-dark-bg-page hover:text-light-text-primary dark:hover:text-dark-text-primary"}`,children:[e,p.jsx("span",{children:t})]})},W9=()=>{const[r,e]=Q.useState(!1),t=[{to:"/admin",icon:p.jsx(BR,{className:"w-5 h-5"}),label:"Dashboard"},{to:"/admin/categories",icon:p.jsx(Bc,{className:"w-5 h-5"}),label:"Categories"},{to:"/admin/tools",icon:p.jsx(_r,{className:"w-5 h-5"}),label:"Tools"},{to:"/admin/users",icon:p.jsx(Fs,{className:"w-5 h-5"}),label:"Users"},{to:"/admin/announcements",icon:p.jsx(yA,{className:"w-5 h-5"}),label:"Announcements"}];return p.jsxs("div",{className:"flex h-screen bg-light-bg-primary dark:bg-dark-bg-primary",children:[r&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>e(!1)}),p.jsxs("aside",{className:`
        fixed lg:static inset-y-0 left-0 z-50 w-64 bg-light-bg-secondary dark:bg-dark-bg-secondary border-r border-light-border dark:border-dark-border
        transform ${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition-transform duration-300 ease-in-out
        flex flex-col
      `,children:[p.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-light-border dark:border-dark-border",children:[p.jsx(bA,{className:"h-8"}),p.jsx("button",{onClick:()=>e(!1),className:"lg:hidden p-2 rounded-md text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-page dark:hover:bg-dark-bg-page",children:p.jsx(Ms,{className:"w-5 h-5"})})]}),p.jsx("nav",{className:"flex-grow space-y-2",children:t.map(n=>p.jsx(z9,{...n},n.to))}),p.jsx("div",{className:"border-t border-light-border dark:border-dark-border pt-4",children:p.jsxs(Rc,{to:"/",className:"flex items-center gap-3 w-full px-4 py-3 rounded-md text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-page dark:hover:bg-dark-bg-page hover:text-light-text-primary dark:hover:text-dark-text-primary",children:[p.jsx(zR,{className:"w-5 h-5"}),p.jsx("span",{children:"Back to Dashboard"})]})})]}),p.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[p.jsx("header",{className:"lg:hidden bg-light-bg-secondary dark:bg-dark-bg-secondary border-b border-light-border dark:border-dark-border p-4",children:p.jsx("button",{onClick:()=>e(!0),className:"p-2 rounded-md text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-page dark:hover:bg-dark-bg-page",children:p.jsx(WR,{className:"w-6 h-6"})})}),p.jsx("main",{className:"flex-1 overflow-y-auto",children:p.jsx(RR,{})})]})]})};class vu{static getInstance(){return vu.instance||(vu.instance=new vu),vu.instance}async generateToolEmbeddings(){var e,t;if(!Ge)return{success:!1,error:"Supabase not connected"};try{const{data:n,error:i}=await Ge.from("tools").select(`
          id,
          title,
          description,
          updated_at,
          category:categories(name),
          questions:tool_questions(label)
        `).eq("active",!0);if(i)throw i;if(!n||n.length===0)return{success:!0,data:{processed:0,skipped:0}};let a=0,s=0;for(const l of n)try{const{data:u,error:d}=await Ge.from("tool_embeddings").select("content_hash, updated_at").eq("tool_id",l.id).single();if(d&&d.code!=="PGRST116"){De.error({message:`Failed to query existing embedding for tool ${l.id}`,code:"EMBEDDING_QUERY_ERROR",details:d.message,timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"VectorSearchService",severity:"error"});continue}const h=`${l.title} | ${l.description} | ${((e=l.category)==null?void 0:e.name)||""} | ${((t=l.questions)==null?void 0:t.map(y=>y.label).join(" "))||""}`,g=await this.generateContentHash(h);if(u&&u.content_hash===g){s++;continue}const{error:b}=await Ge.functions.invoke("generate-embeddings",{body:{action:"generate_tool_embedding",toolId:l.id}});if(b){De.error({message:`Failed to generate embedding for tool ${l.id}`,code:"EMBEDDING_GENERATION_ERROR",details:b.message,timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"VectorSearchService",severity:"error"});continue}a++,await new Promise(y=>setTimeout(y,100))}catch(u){De.error({message:`Error processing tool ${l.id} for embedding`,code:"TOOL_EMBEDDING_ERROR",details:u instanceof Error?u.message:"Unknown error",timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"VectorSearchService",severity:"error"})}return De.info("Tool embeddings generation completed",{component:"VectorSearchService",processed:a,skipped:s,totalTools:n.length}),{success:!0,data:{processed:a,skipped:s}}}catch(n){return{success:!1,error:Tt(n,"generateToolEmbeddings").message}}}async findSimilarTools(e,t=5,n=.6){var i;if(!Ge)return{success:!1,error:"Supabase not connected"};try{De.info("Starting vector search for similar tools",{component:"VectorSearchService",method:"findSimilarTools",queryLength:e.length,maxResults:t,similarityThreshold:n}),De.info("Invoking generate-embeddings edge function",{component:"VectorSearchService",action:"generate_query_embedding",queryPreview:e.substring(0,100)});const a=await Ge.functions.invoke("generate-embeddings",{body:{action:"generate_query_embedding",text:e}});if(De.info("Received response from generate-embeddings edge function",{component:"VectorSearchService",hasError:!!a.error,hasData:!!a.data}),a.error)throw De.error({message:"Edge function invocation failed",code:"EDGE_FUNCTION_ERROR",details:a.error.message||"Unknown edge function error",timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"VectorSearchService",severity:"error"}),new Error(a.error.message||"Edge function failed");const s=a.data;if(De.info("Parsing query result from edge function",{component:"VectorSearchService",success:s==null?void 0:s.success,hasSimilarTools:!!(s!=null&&s.similarTools),similarToolsCount:((i=s==null?void 0:s.similarTools)==null?void 0:i.length)||0}),!(s!=null&&s.success))throw De.error({message:"Query embedding generation failed",code:"EMBEDDING_GENERATION_ERROR",details:(s==null?void 0:s.error)||"Unknown embedding error",timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"VectorSearchService",severity:"error"}),new Error((s==null?void 0:s.error)||"Failed to generate query embedding");const l=s.similarTools||[];return De.info("Vector search completed successfully",{component:"VectorSearchService",queryLength:e.length,resultsFound:l.length,threshold:n,topResults:l.slice(0,3).map(u=>({title:u.title,similarity:u.similarity_score}))}),{success:!0,data:l}}catch(a){return{success:!1,error:Tt(a,"findSimilarTools").message}}}async getOptimizedToolRecommendation(e){var t,n,i,a,s,l,u;if(!Ge)return{success:!1,error:"Supabase not connected"};try{De.info("Starting optimized tool recommendation process",{component:"VectorSearchService",method:"getOptimizedToolRecommendation",queryLength:e.length,queryPreview:e.substring(0,100)});const d=await this.findSimilarTools(e,5,.6);if(De.info("Received response from findSimilarTools",{component:"VectorSearchService",success:d.success,dataLength:((t=d.data)==null?void 0:t.length)||0,hasError:!!d.error}),!d.success)return De.error({message:"Vector search failed, returning fallback response",code:"VECTOR_SEARCH_FAILED",details:d.error||"Unknown error",timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"VectorSearchService",severity:"warning"}),{success:!0,data:{recommendedTool:null,analysis:"Vector search is currently unavailable. Please try the legacy search method or contact support.",similarTools:[],tokensSaved:0}};const h=d.data;if(De.info("Similar tools retrieved successfully",{component:"VectorSearchService",toolsCount:h.length,tools:h.map(T=>({id:T.tool_id,title:T.title,category:T.category_name,similarity:T.similarity_score}))}),h.length===0)return De.info("No similar tools found for query",{component:"VectorSearchService",queryLength:e.length}),{success:!0,data:{recommendedTool:null,analysis:"No suitable tools found for your request. Please try rephrasing or browse our tool categories.",similarTools:[],tokensSaved:0}};const g=`You are an AI assistant that analyzes user requests and recommends the most appropriate copywriting tool from a curated list of relevant tools.

Relevant tools (pre-filtered using semantic similarity):
${h.map(T=>`- **${T.title}** (${T.category_name}): ${T.description} [Similarity: ${(T.similarity_score*100).toFixed(1)}%]`).join(`
`)}

User request: "${e}"

Based on the semantic similarity scores and your analysis:
1. Select the MOST APPROPRIATE tool from the list above
2. Explain why this tool is the perfect match
3. Provide actionable insights about their content creation goal

Respond in this format:
RECOMMENDED_TOOL: [exact tool title from the list]
ANALYSIS: [detailed analysis explaining why this tool matches their needs and how it will help them achieve their content goals]`;De.info("Created optimized prompt for AI",{component:"VectorSearchService",promptLength:g.length,includedToolsCount:h.length}),De.info("Invoking ai-chat edge function",{component:"VectorSearchService",toolId:"tool-recommendation-optimized"});const{data:b,error:y}=await Ge.functions.invoke("ai-chat",{body:{toolId:"tool-recommendation-optimized",messages:[{id:"1",sender:"user",text:g}],correlationId:De.getCorrelationId()}});if(De.info("Received response from ai-chat edge function",{component:"VectorSearchService",hasError:!!y,hasResponse:!!(b!=null&&b.response),responseLength:((n=b==null?void 0:b.response)==null?void 0:n.length)||0}),y||!(b!=null&&b.response)){if(De.error({message:"AI service unavailable, falling back to basic recommendation",code:"AI_SERVICE_ERROR",details:(y==null?void 0:y.message)||"No response from AI",timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"VectorSearchService",severity:"warning"}),h.length>0){const T=h[0];De.info("Using fallback: fetching top similar tool from database",{component:"VectorSearchService",toolId:T.tool_id,toolTitle:T.title});const{data:R,error:M}=await Ge.from("tools").select(`
              *,
              category:categories(*),
              questions:tool_questions(*)
            `).eq("id",T.tool_id).single();if(De.info("Fallback tool fetch result",{component:"VectorSearchService",hasError:!!M,hasData:!!R,toolTitle:R==null?void 0:R.title}),!M&&R)return{success:!0,data:{recommendedTool:{id:R.id,title:R.title,category:((i=R.category)==null?void 0:i.name)||"Other",description:R.description,active:R.active,featured:R.featured,primaryModel:R.primary_model,fallbackModels:R.fallback_models||[],promptInstructions:R.prompt_instructions,questions:(R.questions||[]).sort((F,G)=>F.question_order-G.question_order).map(F=>({id:F.id,label:F.label,type:F.type,placeholder:F.placeholder,required:F.required,order:F.question_order,options:F.options}))},analysis:`Based on semantic similarity, "${T.title}" appears to be the best match for your request. This tool specializes in ${T.category_name.toLowerCase()} and should help you create the content you're looking for.`,similarTools:h,tokensSaved:0}}}return{success:!0,data:{recommendedTool:null,analysis:"AI recommendation service is temporarily unavailable. Please try selecting a tool manually from the categories below, or try again in a few minutes.",similarTools:h,tokensSaved:0}}}const D=b.response;De.info("Parsing AI response",{component:"VectorSearchService",responseLength:D.length,responsePreview:D.substring(0,200)});const v=D.match(/RECOMMENDED_TOOL:\s*(.+?)(?:\n|$)/),w=D.match(/ANALYSIS:\s*([\s\S]+)/);De.info("Extracted data from AI response",{component:"VectorSearchService",hasToolMatch:!!v,hasAnalysisMatch:!!w,recommendedToolTitle:((a=v==null?void 0:v[1])==null?void 0:a.trim())||"None"});let k=null,_=D;if(v&&w){const T=v[1].trim();_=w[1].trim(),De.info("Successfully parsed AI recommendation",{component:"VectorSearchService",recommendedToolTitle:T,analysisLength:_.length});const R=h.find(M=>M.title.toLowerCase()===T.toLowerCase()||M.title.includes(T)||T.includes(M.title));if(De.info("Searching for recommended tool in similar tools list",{component:"VectorSearchService",recommendedToolTitle:T,found:!!R,foundToolId:R==null?void 0:R.tool_id,foundToolTitle:R==null?void 0:R.title}),R){De.info("Fetching full tool data from database",{component:"VectorSearchService",toolId:R.tool_id,toolTitle:R.title});const{data:M,error:I}=await Ge.from("tools").select(`
              *,
              category:categories(*),
              questions:tool_questions(*)
            `).eq("id",R.tool_id).single();De.info("Full tool fetch result",{component:"VectorSearchService",hasError:!!I,errorMessage:I==null?void 0:I.message,hasData:!!M,toolTitle:M==null?void 0:M.title,questionsCount:((s=M==null?void 0:M.questions)==null?void 0:s.length)||0}),!I&&M&&(k={id:M.id,title:M.title,category:((l=M.category)==null?void 0:l.name)||"Other",description:M.description,active:M.active,featured:M.featured,primaryModel:M.primary_model,fallbackModels:M.fallback_models||[],promptInstructions:M.prompt_instructions,questions:(M.questions||[]).sort((F,G)=>F.question_order-G.question_order).map(F=>({id:F.id,label:F.label,type:F.type,placeholder:F.placeholder,required:F.required,order:F.question_order,options:F.options}))})}}const A=await this.estimateTokens(e,await this.getAllToolsForEstimate()),N=await this.estimateTokens(e,h),E=Math.max(0,A-N);return De.info("Optimized tool recommendation completed",{component:"VectorSearchService",queryLength:e.length,similarToolsFound:h.length,recommendedTool:(k==null?void 0:k.title)||"None",recommendedToolId:(k==null?void 0:k.id)||"None",hasAnalysis:!!_,analysisLength:_.length,tokensSaved:E}),De.info("Final recommendation object being returned",{component:"VectorSearchService",result:{hasRecommendedTool:!!k,toolId:k==null?void 0:k.id,toolTitle:k==null?void 0:k.title,toolCategory:k==null?void 0:k.category,questionsCount:((u=k==null?void 0:k.questions)==null?void 0:u.length)||0,similarToolsCount:h.length,analysisPreview:_.substring(0,100)}}),{success:!0,data:{recommendedTool:k,analysis:_,similarTools:h,tokensSaved:E}}}catch(d){return De.error({message:"Vector search recommendation failed",code:"VECTOR_SEARCH_ERROR",details:d.message,timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"VectorSearchService",severity:"error"}),{success:!1,error:d.message}}}async generateContentHash(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(i)).map(s=>s.toString(16).padStart(2,"0")).join("")}async getAllToolsForEstimate(){if(!Ge)return[];const{data:e}=await Ge.from("tools").select("title, description, category:categories(name)").eq("active",!0);return e||[]}async estimateTokens(e,t){const n=Math.ceil(e.length/4),i=t.reduce((a,s)=>{var u;const l=`${s.title} ${s.description} ${s.category_name||((u=s.category)==null?void 0:u.name)||""}`;return a+Math.ceil(l.length/4)},0);return n+i+200}}const n5=({tool:r})=>{Kr();const{categories:e}=vp(),{user:t}=ht(),{favoriteTools:n,toggleFavorite:i,setToolForActivation:a,showProUpgradeModal:s,setShowProUpgradeModal:l}=Ca(),[u,d]=Q.useState(null),h=n.includes(r.id),g=r.is_pro,b=!g||(t==null?void 0:t.role)==="pro"||(t==null?void 0:t.role)==="admin",y=Q.useCallback(()=>{const N=e.find(E=>E.name===r.category);d(N?{name:N.iconName||"Settings",color:N.iconColor||"text-blue-600"}:{name:"Settings",color:"text-blue-600"})},[e,r.category]);Q.useEffect(()=>{y()},[y]);const D=Q.useCallback(N=>{const{updatedCategory:E}=N.detail;E.name===r.category&&d({name:E.iconName||"Settings",color:E.iconColor||"text-blue-600"})},[r.category]);Q.useEffect(()=>{const N=E=>{D(E)};return window.addEventListener("categoryUpdated",N),()=>{window.removeEventListener("categoryUpdated",N)}},[D]);const w=u!=null&&u.name&&{Settings:Bc,Box:_r,Edit:di,Mail:V1,File:Cd,Mic:X1,Activity:Ed,Users:Fs}[u.name]||_r,k=(u==null?void 0:u.color)||"text-primary-accent",_=()=>{b?a(r):l(!0)},A=N=>{N.stopPropagation(),N.preventDefault(),i(r.id)};return p.jsxs("a",{href:"#",onClick:N=>{N.preventDefault(),_()},className:"group relative bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border p-5 rounded-md no-underline flex flex-col gap-3 transition-all duration-200 hover:-translate-y-0.5 hover:shadow-lg dark:hover:shadow-2xl",title:r.description,children:[p.jsx("button",{onClick:A,className:"absolute top-2 right-2 p-1 text-light-text-tertiary dark:text-dark-text-tertiary rounded-full hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page opacity-0 group-hover:opacity-100 transition-opacity z-10",title:h?"Remove from favorites":"Add to favorites",children:p.jsx(co,{className:`w-5 h-5 ${h?"text-yellow-500":""}`,isFilled:h})}),p.jsx(w,{className:`w-6 h-6 ${k}`}),p.jsx("span",{className:"font-serif flex-grow font-bold text-light-text-primary dark:text-dark-text-primary text-lg pr-4",children:r.title}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-sm font-medium text-light-text-tertiary dark:text-dark-text-tertiary bg-light-bg-sidebar dark:bg-dark-bg-component py-1 px-2 rounded-sm self-start",children:r.category}),r.featured&&p.jsx("span",{className:"text-xs font-medium text-yellow-600 dark:text-yellow-400 bg-yellow-100 dark:bg-yellow-900/30 py-1 px-2 rounded-sm",children:"Featured"}),g&&p.jsx("span",{className:"text-xs font-bold text-accent-dark-blue dark:text-accent-light-blue bg-accent-light-blue/50 dark:bg-accent-dark-blue/20 py-1 px-2 rounded-sm",children:"PRO"})]}),!b&&p.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 flex items-center justify-center rounded-md opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx(VR,{className:"w-8 h-8 text-white"})})]})},H9=()=>{Kr();const[r,e]=Q.useState("persuasive email for a new product launch"),[t,n]=Q.useState(!1),[i,a]=Q.useState(null),[s,l]=Q.useState(""),[u,d]=Q.useState(0),[h,g]=Q.useState(!0),{featuredTools:b,loading:y,error:D}=tl(),{tools:v}=tl(),{setToolForActivation:w}=Ca(),k=Q.useRef(null),_=Q.useRef(null),A=Pn.getInstance(),N=vu.getInstance();Q.useEffect(()=>{const M=I=>{const{tool:F}=I.detail;a(F),l("This tool was recommended based on your project requirements."),window.location.hash=""};return window.addEventListener("recommendedToolSelected",M),()=>{window.removeEventListener("recommendedToolSelected",M)}},[]),Q.useEffect(()=>{k.current&&(k.current.style.height="auto",k.current.style.height=`${k.current.scrollHeight}px`)},[r]),Q.useEffect(()=>{_.current&&(i||s)&&_.current.scrollIntoView({behavior:"smooth",block:"start"})},[i,s]);const E=async M=>{if(!(!M.trim()||v.length===0)){n(!0),a(null),l(""),d(0);try{Object.keys(localStorage).filter(G=>G.startsWith("conversation-")).forEach(G=>{localStorage.removeItem(G)}),console.log("Cleared existing conversation states for fresh analysis")}catch(I){console.error("Failed to clear conversation states:",I)}try{if(h){const I=await N.getOptimizedToolRecommendation(M);if(I.success&&I.data){const{recommendedTool:F,analysis:G,tokensSaved:U}=I.data;F?(a(F),l(G),d(U)):l(G)}else{console.warn("Vector search failed, attempting legacy search:",I.error);try{const F=`You are an AI assistant that analyzes user requests and recommends the most appropriate copywriting tool from a list of available tools.

Available tools:
${v.map(U=>`- **${U.title}** (${U.category}): ${U.description}`).join(`
`)}

User request: "${M}"

Please analyze the user's request thoroughly and:
1. Identify the specific type of content they want to create
2. Consider the target audience, tone, and purpose implied in their request
3. Match their needs against both the tool titles AND detailed descriptions above
4. Recommend the MOST APPROPRIATE tool that best fits their specific requirements
5. Explain why this tool is the perfect match, referencing specific capabilities from the tool's description
6. Provide actionable insights about their content creation goal

Respond in this format:
RECOMMENDED_TOOL: [exact tool title from the list]
ANALYSIS: [detailed analysis explaining why this tool matches their needs, what specific capabilities make it ideal, and how it will help them achieve their content goals]`,G=await A.sendChatMessage("tool-recommendation",[{id:"1",sender:"user",text:F}]);if(G.success&&G.data){const U=G.data;g(!1);const W=U.match(/RECOMMENDED_TOOL:\s*(.+?)(?:\n|$)/),j=U.match(/ANALYSIS:\s*([\s\S]+)/);if(W&&j){const X=W[1].trim(),P=j[1].trim(),B=v.find(ee=>ee.title.toLowerCase()===X.toLowerCase()||ee.title.includes(X)||X.includes(ee.title));B?(a(B),l(P)):l(U)}else l(U)}else throw new Error("Legacy search also failed")}catch(F){console.error("Both vector and legacy search failed:",F),l("AI recommendation service is temporarily unavailable. Please browse our tool categories below to find the right tool for your needs, or try again in a few minutes."),g(!1)}}}else{const I=`You are an AI assistant that analyzes user requests and recommends the most appropriate copywriting tool from a list of available tools.

Available tools:
${v.map(G=>`- **${G.title}** (${G.category}): ${G.description}`).join(`
`)}

User request: "${M}"

Please analyze the user's request thoroughly and:
1. Identify the specific type of content they want to create
2. Consider the target audience, tone, and purpose implied in their request
3. Match their needs against both the tool titles AND detailed descriptions above
4. Recommend the MOST APPROPRIATE tool that best fits their specific requirements
5. Explain why this tool is the perfect match, referencing specific capabilities from the tool's description
6. Provide actionable insights about their content creation goal

Respond in this format:
RECOMMENDED_TOOL: [exact tool title from the list]
ANALYSIS: [detailed analysis explaining why this tool matches their needs, what specific capabilities make it ideal, and how it will help them achieve their content goals]`,F=await A.sendChatMessage("tool-recommendation",[{id:"1",sender:"user",text:I}]);if(F.success&&F.data){const G=F.data,U=G.match(/RECOMMENDED_TOOL:\s*(.+?)(?:\n|$)/),W=G.match(/ANALYSIS:\s*([\s\S]+)/);if(U&&W){const j=U[1].trim(),X=W[1].trim(),P=v.find(B=>B.title.toLowerCase()===j.toLowerCase()||B.title.includes(j)||j.includes(B.title));P?(a(P),l(X)):l(G)}else l(G)}}}catch(I){console.error("Failed to analyze prompt:",I),l("Unable to analyze your request at the moment. Please try selecting a tool manually.")}finally{n(!1)}}},T=()=>{r.trim()&&E(r.trim())},R=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),T())};return y?p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-accent mx-auto mb-4"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading tools..."})]})}):D?p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsxs("div",{className:"text-center",children:[p.jsxs("p",{className:"text-red-600 dark:text-red-400 mb-4",children:["Error loading tools: ",D]}),p.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85",children:"Retry"})]})}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex flex-col h-full",children:[p.jsxs("section",{className:"relative flex flex-col items-center justify-center flex-grow p-4 sm:p-6 bg-light-bg-sidebar dark:bg-dark-bg-page min-h-[60vh] sm:min-h-[70vh]",children:[p.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_0%,rgba(0,255,179,0.1),transparent_70%)] dark:bg-[radial-gradient(circle_at_50%_0%,rgba(0,255,179,0.08),transparent_70%)]"}),p.jsxs("div",{className:"relative w-full max-w-4xl text-center px-2",children:[p.jsx("h1",{className:"font-serif text-2xl sm:text-3xl lg:text-5xl font-bold text-light-text-primary dark:text-dark-text-primary mb-6 sm:mb-8 leading-tight",children:"What do you want to create today?"}),p.jsxs("div",{className:"flex flex-col sm:flex-row items-start text-left bg-light-bg-component dark:bg-black/20 border border-light-border dark:border-white/20 rounded-md p-1 sm:pl-4 shadow-lg",children:[p.jsx("span",{className:"text-base sm:text-lg text-primary-accent font-medium pt-3 flex-shrink-0 px-3 sm:px-0",children:"I want to create a "}),p.jsx("textarea",{ref:k,onChange:M=>e(M.target.value),onKeyDown:R,rows:1,className:"prompt-input flex-grow border-none outline-none bg-transparent p-3 text-base sm:text-lg text-light-text-primary dark:text-dark-text-primary font-medium resize-none leading-normal max-h-60 w-full",placeholder:"persuasive email for a new product launch"}),p.jsx("button",{onClick:T,disabled:t||!r.trim(),className:"bg-primary-accent text-text-on-accent border-none rounded-sm m-1 p-2.5 cursor-pointer flex items-center justify-center transition-opacity self-end sm:self-end flex-shrink-0 hover:opacity-85 disabled:opacity-50 disabled:cursor-not-allowed",children:t?p.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-text-on-accent"}):p.jsx(TD,{className:"w-5 h-5"})})]}),p.jsxs("p",{className:"mt-4 text-xs sm:text-sm text-light-text-tertiary dark:text-dark-text-tertiary max-w-2xl mx-auto px-2",children:[p.jsx("span",{className:"font-semibold",children:"Tip:"})," The more details you provide, the better the result. For example: ",p.jsx("span",{className:"italic",children:'"a witty tweet about the challenges of remote work"'})]})]}),(t||i||s)&&p.jsx("div",{className:"relative w-full max-w-4xl mx-auto px-2 mt-8",children:p.jsx("div",{className:"bg-light-bg-component/95 dark:bg-black/40 border border-light-border/50 dark:border-white/20 rounded-lg p-6 shadow-lg backdrop-blur-sm",children:t?p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-accent mx-auto mb-4"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Analyzing your request and finding the perfect tool..."})]}):p.jsxs("div",{children:[p.jsx("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary mb-4",children:"AI Recommendation"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-4",children:"Based on what you want to create, this is the best-fit tool from our collection."}),i?p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{className:"bg-primary-accent/10 border border-primary-accent/20 rounded-lg p-4",children:[u>0&&p.jsxs("div",{className:"mb-3 text-xs text-green-600 dark:text-green-400 font-medium",children:["⚡ Optimized search saved ~",u," tokens"]}),p.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[p.jsx("div",{className:"w-10 h-10 bg-primary-accent/20 rounded-lg flex items-center justify-center",children:p.jsx(TD,{className:"w-5 h-5 text-primary-accent"})}),p.jsxs("div",{children:[p.jsxs("h4",{className:"font-semibold text-light-text-primary dark:text-dark-text-primary",children:["Recommended: ",i.title]}),p.jsx("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary",children:i.category})]})]}),p.jsx("button",{onClick:()=>w(i),className:"w-full px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity font-medium",children:"Use This Tool"})]})}):null,!h&&p.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsx("span",{className:"text-yellow-800 dark:text-yellow-200",children:"⚠️ Using legacy search (higher token usage)"}),p.jsx("button",{onClick:()=>g(!0),className:"text-yellow-600 dark:text-yellow-400 hover:underline text-xs",children:"Switch to vector search"})]})})]})})})]}),p.jsx("div",{className:"p-3 sm:p-4 lg:p-6 pb-6 sm:pb-8 bg-light-bg-page dark:bg-dark-bg-page space-y-8",children:p.jsxs("div",{className:"max-w-4xl mx-auto px-2",children:[p.jsx("h2",{className:"font-serif text-xl sm:text-2xl font-bold text-light-text-primary dark:text-dark-text-primary mb-4 sm:mb-5",children:"Featured Tools"}),b.length>0?p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:b.map(M=>p.jsx(n5,{tool:M},M.id))}):p.jsx("div",{className:"text-center py-12 text-light-text-tertiary dark:text-dark-text-tertiary",children:p.jsx("p",{children:"No featured tools available at the moment."})})]})})]}),p.jsx(q9,{})]})},q9=()=>{const[r,e]=Q.useState(!1),[t,n]=Q.useState(!1),[i,a]=Q.useState(!1);Q.useEffect(()=>{try{if(!localStorage.getItem("infoBannerDismissed")){const u=setTimeout(()=>{e(!0),n(!0)},500);return()=>clearTimeout(u)}}catch(l){console.error("Could not access localStorage",l)}},[]);const s=()=>{if(e(!1),i)try{localStorage.setItem("infoBannerDismissed","true")}catch(l){console.error("Could not access localStorage",l)}};return t?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:`fixed inset-0 bg-black/20 dark:bg-black/40 backdrop-blur-sm z-[1000] transition-opacity duration-300 ${r?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:s}),p.jsxs("div",{className:`fixed top-0 right-0 h-full w-full max-w-sm bg-light-bg-component dark:bg-dark-bg-component border-l border-light-border dark:border-dark-border shadow-2xl z-[1001] p-6 flex flex-col transition-transform duration-300 ease-in-out ${r?"translate-x-0":"translate-x-full"}`,children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h4",{className:"font-serif text-lg sm:text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Start Here"}),p.jsx("button",{onClick:s,className:"p-1 rounded-full text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-black/10 dark:hover:bg-white/10",children:p.jsx(Ms,{className:"w-6 h-6"})})]}),p.jsxs("div",{className:"flex-grow overflow-y-auto -mr-3 pr-5 space-y-3 text-sm sm:text-base text-light-text-secondary dark:text-dark-text-secondary leading-relaxed",children:[p.jsxs("p",{children:["Read the ",p.jsx("a",{href:"#",className:"text-primary-accent font-medium hover:underline",children:"Artemo User Guide"}),". It's updated frequently, so check it often."]}),p.jsx("p",{children:"Use our tools to create amazing copy for your business or clients. Find all tools in the left-hand navigation bar or in the All Tools section below."}),p.jsxs("p",{children:["Join our ",p.jsx("a",{href:"#",className:"text-primary-accent font-medium hover:underline",children:"community"})," to discuss and get help from hundreds of Artemo users who are making money and growing their businesses daily."]}),p.jsxs("div",{children:[p.jsx("h5",{className:"font-semibold text-light-text-primary dark:text-dark-text-primary mt-4 mb-2 uppercase tracking-wider text-sm",children:"IMPORTANT NOTICE"}),p.jsxs("p",{children:["For questions, contact support at ",p.jsx("a",{href:"mailto:hello@artemo.ai",className:"text-primary-accent font-medium hover:underline",children:"hello@artemo.ai"}),"."]})]})]}),p.jsx("div",{className:"flex-shrink-0 pt-6 border-t border-light-border dark:border-dark-border",children:p.jsxs("label",{className:"flex items-center gap-3 cursor-pointer text-base font-medium text-light-text-primary dark:text-dark-text-primary bg-primary-accent/10 p-3 rounded-md border border-primary-accent/30",children:[p.jsx("input",{type:"checkbox",checked:i,onChange:l=>a(l.target.checked),className:"h-5 w-5 rounded border-primary-accent/50 dark:border-primary-accent/50 bg-light-bg-component dark:bg-dark-bg-component text-primary-accent focus:ring-primary-accent focus:ring-2"}),"Don't show this again"]})})]})]}):null},V9=()=>p.jsx(H9,{}),X9=({category:r,tools:e,categories:t})=>{const[n,i]=Q.useState(!0),a=()=>{const u=t.find(h=>h.name===r);return u!=null&&u.iconName?{icon:{Settings:Bc,Box:_r,Edit:di,Mail:V1,File:Cd,Mic:X1,Activity:Ed,Users:Fs}[u.iconName]||_r,color:u.iconColor||"text-primary-accent"}:{icon:_r,color:"text-primary-accent"}},{icon:s,color:l}=a();return p.jsxs("div",{className:"mb-6",children:[p.jsxs("button",{onClick:()=>i(!n),className:"w-full flex justify-between items-center py-3 px-4 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md transition-colors hover:bg-light-border dark:hover:bg-dark-border/20",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(s,{className:`w-5 h-5 ${l}`}),p.jsx("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:r})]}),p.jsx(iy,{className:`w-5 h-5 text-light-text-secondary dark:text-dark-text-secondary transition-transform ${n?"rotate-180":""}`})]}),n&&p.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(u=>p.jsx(n5,{tool:u},u.id))})]})},G9=()=>{const[r,e]=QL(),t=r.get("search")||"",n=r.get("category")||"",{tools:i,loading:a,error:s}=tl(),{categories:l,allCategories:u}=vp(),d=y=>{const D=new URLSearchParams(r);y.trim()?D.set("search",y):D.delete("search"),e(D)},h=Q.useMemo(()=>{if(!t.trim())return i;let y=i;n&&(y=i.filter(v=>v.category===n));const D=t.toLowerCase();return y.filter(v=>v.title.toLowerCase().includes(D)||v.description.toLowerCase().includes(D)||v.category.toLowerCase().includes(D))},[i,t,n]),g=Q.useMemo(()=>{let y=n?i.filter(v=>v.category===n):h;const D={};for(const v of y)D[v.category]||(D[v.category]=[]),D[v.category].push(v);return D},[i,h,n]),b=Object.keys(g).filter(y=>g[y]&&g[y].length>0);return a?p.jsx("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:p.jsx("div",{className:"flex items-center justify-center py-20",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-accent mx-auto mb-4"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading tools..."})]})})}):s?p.jsx("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:p.jsx("div",{className:"flex items-center justify-center py-20",children:p.jsxs("div",{className:"text-center",children:[p.jsxs("p",{className:"text-red-600 dark:text-red-400 mb-4",children:["Error loading tools: ",s]}),p.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85",children:"Retry"})]})})}):p.jsxs("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsx("h2",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary",children:n?n+" Tools":"All Tools"}),!n&&p.jsxs("div",{className:"relative w-80",children:[p.jsx(Aa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-light-text-tertiary dark:text-dark-text-tertiary"}),p.jsx("input",{type:"text",placeholder:"Search tools...",value:t,onChange:y=>d(y.target.value),className:"w-full pl-9 pr-3 py-2 text-sm rounded-sm border border-light-border dark:border-dark-border bg-light-bg-component dark:bg-dark-bg-component text-light-text-secondary dark:text-dark-text-secondary focus:ring-2 focus:ring-primary-accent focus:outline-none"})]})]}),i.length===0?p.jsxs("div",{className:"text-center py-20 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-lg border border-light-border dark:border-dark-border",children:[p.jsx(_r,{className:"w-12 h-12 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary",children:"No tools available"}),p.jsx("p",{className:"text-light-text-tertiary dark:text-dark-text-tertiary mt-1",children:l.length===0?"Create categories and tools in the admin panel to get started.":"Create tools in the admin panel to get started."})]}):t.trim()&&h.length===0||n&&b.length===0?p.jsxs("div",{className:"text-center py-12 text-light-text-tertiary dark:text-dark-text-tertiary",children:[p.jsx("h3",{className:"text-lg font-semibold",children:"No results found"}),p.jsx("p",{children:n?"No tools in this category yet.":"Try a different search term or check back later for new tools."})]}):p.jsx("div",{children:b.map(y=>p.jsx(X9,{category:y,tools:g[y],categories:u},y))})]})},$9=()=>p.jsx(G9,{});var sa={},wA="1.13.7",H3=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},Y1=Array.prototype,kA=Object.prototype,q3=typeof Symbol<"u"?Symbol.prototype:null,Y9=Y1.push,ay=Y1.slice,hm=kA.toString,K9=kA.hasOwnProperty,r5=typeof ArrayBuffer<"u",Q9=typeof DataView<"u",Z9=Array.isArray,V3=Object.keys,X3=Object.create,G3=r5&&ArrayBuffer.isView,J9=isNaN,eB=isFinite,i5=!{toString:null}.propertyIsEnumerable("toString"),$3=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],tB=Math.pow(2,53)-1;function Yr(r,e){return e=e==null?r.length-1:+e,function(){for(var t=Math.max(arguments.length-e,0),n=Array(t),i=0;i<t;i++)n[i]=arguments[i+e];switch(e){case 0:return r.call(this,n);case 1:return r.call(this,arguments[0],n);case 2:return r.call(this,arguments[0],arguments[1],n)}var a=Array(e+1);for(i=0;i<e;i++)a[i]=arguments[i];return a[e]=n,r.apply(this,a)}}function Pc(r){var e=typeof r;return e==="function"||e==="object"&&!!r}function a5(r){return r===null}function DA(r){return r===void 0}function _A(r){return r===!0||r===!1||hm.call(r)==="[object Boolean]"}function s5(r){return!!(r&&r.nodeType===1)}function Fr(r){var e="[object "+r+"]";return function(t){return hm.call(t)===e}}const K1=Fr("String"),AA=Fr("Number"),o5=Fr("Date"),l5=Fr("RegExp"),c5=Fr("Error"),SA=Fr("Symbol"),EA=Fr("ArrayBuffer");var u5=Fr("Function"),nB=H3.document&&H3.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof nB!="function"&&(u5=function(r){return typeof r=="function"||!1});const jr=u5,d5=Fr("Object");var h5=Q9&&(!/\[native code\]/.test(String(DataView))||d5(new DataView(new ArrayBuffer(8)))),TA=typeof Map<"u"&&d5(new Map),rB=Fr("DataView");function iB(r){return r!=null&&jr(r.getInt8)&&EA(r.buffer)}const fm=h5?iB:rB,zc=Z9||Fr("Array");function Wc(r,e){return r!=null&&K9.call(r,e)}var ND=Fr("Arguments");(function(){ND(arguments)||(ND=function(r){return Wc(r,"callee")})})();const Q1=ND;function f5(r){return!SA(r)&&eB(r)&&!isNaN(parseFloat(r))}function CA(r){return AA(r)&&J9(r)}function NA(r){return function(){return r}}function p5(r){return function(e){var t=r(e);return typeof t=="number"&&t>=0&&t<=tB}}function g5(r){return function(e){return e==null?void 0:e[r]}}const r1=g5("byteLength"),aB=p5(r1);var sB=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function oB(r){return G3?G3(r)&&!fm(r):aB(r)&&sB.test(hm.call(r))}const UA=r5?oB:NA(!1),ui=g5("length");function lB(r){for(var e={},t=r.length,n=0;n<t;++n)e[r[n]]=!0;return{contains:function(i){return e[i]===!0},push:function(i){return e[i]=!0,r.push(i)}}}function m5(r,e){e=lB(e);var t=$3.length,n=r.constructor,i=jr(n)&&n.prototype||kA,a="constructor";for(Wc(r,a)&&!e.contains(a)&&e.push(a);t--;)a=$3[t],a in r&&r[a]!==i[a]&&!e.contains(a)&&e.push(a)}function Qn(r){if(!Pc(r))return[];if(V3)return V3(r);var e=[];for(var t in r)Wc(r,t)&&e.push(t);return i5&&m5(r,e),e}function b5(r){if(r==null)return!0;var e=ui(r);return typeof e=="number"&&(zc(r)||K1(r)||Q1(r))?e===0:ui(Qn(r))===0}function RA(r,e){var t=Qn(e),n=t.length;if(r==null)return!n;for(var i=Object(r),a=0;a<n;a++){var s=t[a];if(e[s]!==i[s]||!(s in i))return!1}return!0}function Pt(r){if(r instanceof Pt)return r;if(!(this instanceof Pt))return new Pt(r);this._wrapped=r}Pt.VERSION=wA;Pt.prototype.value=function(){return this._wrapped};Pt.prototype.valueOf=Pt.prototype.toJSON=Pt.prototype.value;Pt.prototype.toString=function(){return String(this._wrapped)};function Y3(r){return new Uint8Array(r.buffer||r,r.byteOffset||0,r1(r))}var K3="[object DataView]";function UD(r,e,t,n){if(r===e)return r!==0||1/r===1/e;if(r==null||e==null)return!1;if(r!==r)return e!==e;var i=typeof r;return i!=="function"&&i!=="object"&&typeof e!="object"?!1:y5(r,e,t,n)}function y5(r,e,t,n){r instanceof Pt&&(r=r._wrapped),e instanceof Pt&&(e=e._wrapped);var i=hm.call(r);if(i!==hm.call(e))return!1;if(h5&&i=="[object Object]"&&fm(r)){if(!fm(e))return!1;i=K3}switch(i){case"[object RegExp]":case"[object String]":return""+r==""+e;case"[object Number]":return+r!=+r?+e!=+e:+r==0?1/+r===1/e:+r==+e;case"[object Date]":case"[object Boolean]":return+r==+e;case"[object Symbol]":return q3.valueOf.call(r)===q3.valueOf.call(e);case"[object ArrayBuffer]":case K3:return y5(Y3(r),Y3(e),t,n)}var a=i==="[object Array]";if(!a&&UA(r)){var s=r1(r);if(s!==r1(e))return!1;if(r.buffer===e.buffer&&r.byteOffset===e.byteOffset)return!0;a=!0}if(!a){if(typeof r!="object"||typeof e!="object")return!1;var l=r.constructor,u=e.constructor;if(l!==u&&!(jr(l)&&l instanceof l&&jr(u)&&u instanceof u)&&"constructor"in r&&"constructor"in e)return!1}t=t||[],n=n||[];for(var d=t.length;d--;)if(t[d]===r)return n[d]===e;if(t.push(r),n.push(e),a){if(d=r.length,d!==e.length)return!1;for(;d--;)if(!UD(r[d],e[d],t,n))return!1}else{var h=Qn(r),g;if(d=h.length,Qn(e).length!==d)return!1;for(;d--;)if(g=h[d],!(Wc(e,g)&&UD(r[g],e[g],t,n)))return!1}return t.pop(),n.pop(),!0}function x5(r,e){return UD(r,e)}function kp(r){if(!Pc(r))return[];var e=[];for(var t in r)e.push(t);return i5&&m5(r,e),e}function jA(r){var e=ui(r);return function(t){if(t==null)return!1;var n=kp(t);if(ui(n))return!1;for(var i=0;i<e;i++)if(!jr(t[r[i]]))return!1;return r!==k5||!jr(t[FA])}}var FA="forEach",v5="has",IA=["clear","delete"],w5=["get",v5,"set"],cB=IA.concat(FA,w5),k5=IA.concat(w5),uB=["add"].concat(IA,FA,v5);const D5=TA?jA(cB):Fr("Map"),_5=TA?jA(k5):Fr("WeakMap"),A5=TA?jA(uB):Fr("Set"),S5=Fr("WeakSet");function Od(r){for(var e=Qn(r),t=e.length,n=Array(t),i=0;i<t;i++)n[i]=r[e[i]];return n}function E5(r){for(var e=Qn(r),t=e.length,n=Array(t),i=0;i<t;i++)n[i]=[e[i],r[e[i]]];return n}function OA(r){for(var e={},t=Qn(r),n=0,i=t.length;n<i;n++)e[r[t[n]]]=t[n];return e}function pm(r){var e=[];for(var t in r)jr(r[t])&&e.push(t);return e.sort()}function MA(r,e){return function(t){var n=arguments.length;if(e&&(t=Object(t)),n<2||t==null)return t;for(var i=1;i<n;i++)for(var a=arguments[i],s=r(a),l=s.length,u=0;u<l;u++){var d=s[u];(!e||t[d]===void 0)&&(t[d]=a[d])}return t}}const LA=MA(kp),fp=MA(Qn),BA=MA(kp,!0);function dB(){return function(){}}function T5(r){if(!Pc(r))return{};if(X3)return X3(r);var e=dB();e.prototype=r;var t=new e;return e.prototype=null,t}function C5(r,e){var t=T5(r);return e&&fp(t,e),t}function N5(r){return Pc(r)?zc(r)?r.slice():LA({},r):r}function U5(r,e){return e(r),r}function PA(r){return zc(r)?r:[r]}Pt.toPath=PA;function sy(r){return Pt.toPath(r)}function zA(r,e){for(var t=e.length,n=0;n<t;n++){if(r==null)return;r=r[e[n]]}return t?r:void 0}function WA(r,e,t){var n=zA(r,sy(e));return DA(n)?t:n}function R5(r,e){e=sy(e);for(var t=e.length,n=0;n<t;n++){var i=e[n];if(!Wc(r,i))return!1;r=r[i]}return!!t}function Z1(r){return r}function Nd(r){return r=fp({},r),function(e){return RA(e,r)}}function J1(r){return r=sy(r),function(e){return zA(e,r)}}function oy(r,e,t){if(e===void 0)return r;switch(t??3){case 1:return function(n){return r.call(e,n)};case 3:return function(n,i,a){return r.call(e,n,i,a)};case 4:return function(n,i,a,s){return r.call(e,n,i,a,s)}}return function(){return r.apply(e,arguments)}}function j5(r,e,t){return r==null?Z1:jr(r)?oy(r,e,t):Pc(r)&&!zc(r)?Nd(r):J1(r)}function ev(r,e){return j5(r,e,1/0)}Pt.iteratee=ev;function hi(r,e,t){return Pt.iteratee!==ev?Pt.iteratee(r,e):j5(r,e,t)}function F5(r,e,t){e=hi(e,t);for(var n=Qn(r),i=n.length,a={},s=0;s<i;s++){var l=n[s];a[l]=e(r[l],l,r)}return a}function HA(){}function I5(r){return r==null?HA:function(e){return WA(r,e)}}function O5(r,e,t){var n=Array(Math.max(0,r));e=oy(e,t,1);for(var i=0;i<r;i++)n[i]=e(i);return n}function i1(r,e){return e==null&&(e=r,r=0),r+Math.floor(Math.random()*(e-r+1))}const pp=Date.now||function(){return new Date().getTime()};function M5(r){var e=function(a){return r[a]},t="(?:"+Qn(r).join("|")+")",n=RegExp(t),i=RegExp(t,"g");return function(a){return a=a==null?"":""+a,n.test(a)?a.replace(i,e):a}}const L5={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B5=M5(L5),hB=OA(L5),P5=M5(hB),z5=Pt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Xw=/(.)^/,fB={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},pB=/\\|'|\r|\n|\u2028|\u2029/g;function gB(r){return"\\"+fB[r]}var mB=/^\s*(\w|\$)+\s*$/;function W5(r,e,t){!e&&t&&(e=t),e=BA({},e,Pt.templateSettings);var n=RegExp([(e.escape||Xw).source,(e.interpolate||Xw).source,(e.evaluate||Xw).source].join("|")+"|$","g"),i=0,a="__p+='";r.replace(n,function(d,h,g,b,y){return a+=r.slice(i,y).replace(pB,gB),i=y+d.length,h?a+=`'+
((__t=(`+h+`))==null?'':_.escape(__t))+
'`:g?a+=`'+
((__t=(`+g+`))==null?'':__t)+
'`:b&&(a+=`';
`+b+`
__p+='`),d}),a+=`';
`;var s=e.variable;if(s){if(!mB.test(s))throw new Error("variable is not a bare identifier: "+s)}else a=`with(obj||{}){
`+a+`}
`,s="obj";a=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+a+`return __p;
`;var l;try{l=new Function(s,"_",a)}catch(d){throw d.source=a,d}var u=function(d){return l.call(this,d,Pt)};return u.source="function("+s+`){
`+a+"}",u}function H5(r,e,t){e=sy(e);var n=e.length;if(!n)return jr(t)?t.call(r):t;for(var i=0;i<n;i++){var a=r==null?void 0:r[e[i]];a===void 0&&(a=t,i=n),r=jr(a)?a.call(r):a}return r}var bB=0;function q5(r){var e=++bB+"";return r?r+e:e}function V5(r){var e=Pt(r);return e._chain=!0,e}function X5(r,e,t,n,i){if(!(n instanceof e))return r.apply(t,i);var a=T5(r.prototype),s=r.apply(a,i);return Pc(s)?s:a}var Md=Yr(function(r,e){var t=Md.placeholder,n=function(){for(var i=0,a=e.length,s=Array(a),l=0;l<a;l++)s[l]=e[l]===t?arguments[i++]:e[l];for(;i<arguments.length;)s.push(arguments[i++]);return X5(r,n,this,this,s)};return n});Md.placeholder=Pt;const qA=Yr(function(r,e,t){if(!jr(r))throw new TypeError("Bind must be called on a function");var n=Yr(function(i){return X5(r,n,e,this,t.concat(i))});return n}),$i=p5(ui);function Ld(r,e,t,n){if(n=n||[],!e&&e!==0)e=1/0;else if(e<=0)return n.concat(r);for(var i=n.length,a=0,s=ui(r);a<s;a++){var l=r[a];if($i(l)&&(zc(l)||Q1(l)))if(e>1)Ld(l,e-1,t,n),i=n.length;else for(var u=0,d=l.length;u<d;)n[i++]=l[u++];else t||(n[i++]=l)}return n}const G5=Yr(function(r,e){e=Ld(e,!1,!1);var t=e.length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var n=e[t];r[n]=qA(r[n],r)}return r});function $5(r,e){var t=function(n){var i=t.cache,a=""+(e?e.apply(this,arguments):n);return Wc(i,a)||(i[a]=r.apply(this,arguments)),i[a]};return t.cache={},t}const VA=Yr(function(r,e,t){return setTimeout(function(){return r.apply(null,t)},e)}),Y5=Md(VA,Pt,1);function K5(r,e,t){var n,i,a,s,l=0;t||(t={});var u=function(){l=t.leading===!1?0:pp(),n=null,s=r.apply(i,a),n||(i=a=null)},d=function(){var h=pp();!l&&t.leading===!1&&(l=h);var g=e-(h-l);return i=this,a=arguments,g<=0||g>e?(n&&(clearTimeout(n),n=null),l=h,s=r.apply(i,a),n||(i=a=null)):!n&&t.trailing!==!1&&(n=setTimeout(u,g)),s};return d.cancel=function(){clearTimeout(n),l=0,n=i=a=null},d}function Q5(r,e,t){var n,i,a,s,l,u=function(){var h=pp()-i;e>h?n=setTimeout(u,e-h):(n=null,t||(s=r.apply(l,a)),n||(a=l=null))},d=Yr(function(h){return l=this,a=h,i=pp(),n||(n=setTimeout(u,e),t&&(s=r.apply(l,a))),s});return d.cancel=function(){clearTimeout(n),n=a=l=null},d}function Z5(r,e){return Md(e,r)}function tv(r){return function(){return!r.apply(this,arguments)}}function J5(){var r=arguments,e=r.length-1;return function(){for(var t=e,n=r[e].apply(this,arguments);t--;)n=r[t].call(this,n);return n}}function ej(r,e){return function(){if(--r<1)return e.apply(this,arguments)}}function XA(r,e){var t;return function(){return--r>0&&(t=e.apply(this,arguments)),r<=1&&(e=null),t}}const tj=Md(XA,2);function GA(r,e,t){e=hi(e,t);for(var n=Qn(r),i,a=0,s=n.length;a<s;a++)if(i=n[a],e(r[i],i,r))return i}function nj(r){return function(e,t,n){t=hi(t,n);for(var i=ui(e),a=r>0?0:i-1;a>=0&&a<i;a+=r)if(t(e[a],a,e))return a;return-1}}const nv=nj(1),$A=nj(-1);function YA(r,e,t,n){t=hi(t,n,1);for(var i=t(e),a=0,s=ui(r);a<s;){var l=Math.floor((a+s)/2);t(r[l])<i?a=l+1:s=l}return a}function rj(r,e,t){return function(n,i,a){var s=0,l=ui(n);if(typeof a=="number")r>0?s=a>=0?a:Math.max(a+l,s):l=a>=0?Math.min(a+1,l):a+l+1;else if(t&&a&&l)return a=t(n,i),n[a]===i?a:-1;if(i!==i)return a=e(ay.call(n,s,l),CA),a>=0?a+s:-1;for(a=r>0?s:l-1;a>=0&&a<l;a+=r)if(n[a]===i)return a;return-1}}const KA=rj(1,nv,YA),ij=rj(-1,$A);function gm(r,e,t){var n=$i(r)?nv:GA,i=n(r,e,t);if(i!==void 0&&i!==-1)return r[i]}function aj(r,e){return gm(r,Nd(e))}function Za(r,e,t){e=oy(e,t);var n,i;if($i(r))for(n=0,i=r.length;n<i;n++)e(r[n],n,r);else{var a=Qn(r);for(n=0,i=a.length;n<i;n++)e(r[a[n]],a[n],r)}return r}function nl(r,e,t){e=hi(e,t);for(var n=!$i(r)&&Qn(r),i=(n||r).length,a=Array(i),s=0;s<i;s++){var l=n?n[s]:s;a[s]=e(r[l],l,r)}return a}function sj(r){var e=function(t,n,i,a){var s=!$i(t)&&Qn(t),l=(s||t).length,u=r>0?0:l-1;for(a||(i=t[s?s[u]:u],u+=r);u>=0&&u<l;u+=r){var d=s?s[u]:u;i=n(i,t[d],d,t)}return i};return function(t,n,i,a){var s=arguments.length>=3;return e(t,oy(n,a,4),i,s)}}const Gh=sj(1),a1=sj(-1);function jc(r,e,t){var n=[];return e=hi(e,t),Za(r,function(i,a,s){e(i,a,s)&&n.push(i)}),n}function oj(r,e,t){return jc(r,tv(hi(e)),t)}function s1(r,e,t){e=hi(e,t);for(var n=!$i(r)&&Qn(r),i=(n||r).length,a=0;a<i;a++){var s=n?n[a]:a;if(!e(r[s],s,r))return!1}return!0}function o1(r,e,t){e=hi(e,t);for(var n=!$i(r)&&Qn(r),i=(n||r).length,a=0;a<i;a++){var s=n?n[a]:a;if(e(r[s],s,r))return!0}return!1}function ka(r,e,t,n){return $i(r)||(r=Od(r)),(typeof t!="number"||n)&&(t=0),KA(r,e,t)>=0}const lj=Yr(function(r,e,t){var n,i;return jr(e)?i=e:(e=sy(e),n=e.slice(0,-1),e=e[e.length-1]),nl(r,function(a){var s=i;if(!s){if(n&&n.length&&(a=zA(a,n)),a==null)return;s=a[e]}return s==null?s:s.apply(a,t)})});function rv(r,e){return nl(r,J1(e))}function cj(r,e){return jc(r,Nd(e))}function QA(r,e,t){var n=-1/0,i=-1/0,a,s;if(e==null||typeof e=="number"&&typeof r[0]!="object"&&r!=null){r=$i(r)?r:Od(r);for(var l=0,u=r.length;l<u;l++)a=r[l],a!=null&&a>n&&(n=a)}else e=hi(e,t),Za(r,function(d,h,g){s=e(d,h,g),(s>i||s===-1/0&&n===-1/0)&&(n=d,i=s)});return n}function uj(r,e,t){var n=1/0,i=1/0,a,s;if(e==null||typeof e=="number"&&typeof r[0]!="object"&&r!=null){r=$i(r)?r:Od(r);for(var l=0,u=r.length;l<u;l++)a=r[l],a!=null&&a<n&&(n=a)}else e=hi(e,t),Za(r,function(d,h,g){s=e(d,h,g),(s<i||s===1/0&&n===1/0)&&(n=d,i=s)});return n}var yB=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function ZA(r){return r?zc(r)?ay.call(r):K1(r)?r.match(yB):$i(r)?nl(r,Z1):Od(r):[]}function JA(r,e,t){if(e==null||t)return $i(r)||(r=Od(r)),r[i1(r.length-1)];var n=ZA(r),i=ui(n);e=Math.max(Math.min(e,i),0);for(var a=i-1,s=0;s<e;s++){var l=i1(s,a),u=n[s];n[s]=n[l],n[l]=u}return n.slice(0,e)}function dj(r){return JA(r,1/0)}function hj(r,e,t){var n=0;return e=hi(e,t),rv(nl(r,function(i,a,s){return{value:i,index:n++,criteria:e(i,a,s)}}).sort(function(i,a){var s=i.criteria,l=a.criteria;if(s!==l){if(s>l||s===void 0)return 1;if(s<l||l===void 0)return-1}return i.index-a.index}),"value")}function iv(r,e){return function(t,n,i){var a=e?[[],[]]:{};return n=hi(n,i),Za(t,function(s,l){var u=n(s,l,t);r(a,s,u)}),a}}const fj=iv(function(r,e,t){Wc(r,t)?r[t].push(e):r[t]=[e]}),pj=iv(function(r,e,t){r[t]=e}),gj=iv(function(r,e,t){Wc(r,t)?r[t]++:r[t]=1}),mj=iv(function(r,e,t){r[t?0:1].push(e)},!0);function bj(r){return r==null?0:$i(r)?r.length:Qn(r).length}function xB(r,e,t){return e in t}const eS=Yr(function(r,e){var t={},n=e[0];if(r==null)return t;jr(n)?(e.length>1&&(n=oy(n,e[1])),e=kp(r)):(n=xB,e=Ld(e,!1,!1),r=Object(r));for(var i=0,a=e.length;i<a;i++){var s=e[i],l=r[s];n(l,s,r)&&(t[s]=l)}return t}),yj=Yr(function(r,e){var t=e[0],n;return jr(t)?(t=tv(t),e.length>1&&(n=e[1])):(e=nl(Ld(e,!1,!1),String),t=function(i,a){return!ka(e,a)}),eS(r,t,n)});function tS(r,e,t){return ay.call(r,0,Math.max(0,r.length-(e==null||t?1:e)))}function $h(r,e,t){return r==null||r.length<1?e==null||t?void 0:[]:e==null||t?r[0]:tS(r,r.length-e)}function Td(r,e,t){return ay.call(r,e==null||t?1:e)}function xj(r,e,t){return r==null||r.length<1?e==null||t?void 0:[]:e==null||t?r[r.length-1]:Td(r,Math.max(0,r.length-e))}function vj(r){return jc(r,Boolean)}function wj(r,e){return Ld(r,e,!1)}const nS=Yr(function(r,e){return e=Ld(e,!0,!0),jc(r,function(t){return!ka(e,t)})}),kj=Yr(function(r,e){return nS(r,e)});function mm(r,e,t,n){_A(e)||(n=t,t=e,e=!1),t!=null&&(t=hi(t,n));for(var i=[],a=[],s=0,l=ui(r);s<l;s++){var u=r[s],d=t?t(u,s,r):u;e&&!t?((!s||a!==d)&&i.push(u),a=d):t?ka(a,d)||(a.push(d),i.push(u)):ka(i,u)||i.push(u)}return i}const Dj=Yr(function(r){return mm(Ld(r,!0,!0))});function _j(r){for(var e=[],t=arguments.length,n=0,i=ui(r);n<i;n++){var a=r[n];if(!ka(e,a)){var s;for(s=1;s<t&&ka(arguments[s],a);s++);s===t&&e.push(a)}}return e}function bm(r){for(var e=r&&QA(r,ui).length||0,t=Array(e),n=0;n<e;n++)t[n]=rv(r,n);return t}const Aj=Yr(bm);function Sj(r,e){for(var t={},n=0,i=ui(r);n<i;n++)e?t[r[n]]=e[n]:t[r[n][0]]=r[n][1];return t}function Ej(r,e,t){e==null&&(e=r||0,r=0),t||(t=e<r?-1:1);for(var n=Math.max(Math.ceil((e-r)/t),0),i=Array(n),a=0;a<n;a++,r+=t)i[a]=r;return i}function Tj(r,e){if(e==null||e<1)return[];for(var t=[],n=0,i=r.length;n<i;)t.push(ay.call(r,n,n+=e));return t}function rS(r,e){return r._chain?Pt(e).chain():e}function iS(r){return Za(pm(r),function(e){var t=Pt[e]=r[e];Pt.prototype[e]=function(){var n=[this._wrapped];return Y9.apply(n,arguments),rS(this,t.apply(Pt,n))}}),Pt}Za(["pop","push","reverse","shift","sort","splice","unshift"],function(r){var e=Y1[r];Pt.prototype[r]=function(){var t=this._wrapped;return t!=null&&(e.apply(t,arguments),(r==="shift"||r==="splice")&&t.length===0&&delete t[0]),rS(this,t)}});Za(["concat","join","slice"],function(r){var e=Y1[r];Pt.prototype[r]=function(){var t=this._wrapped;return t!=null&&(t=e.apply(t,arguments)),rS(this,t)}});const vB=Object.freeze(Object.defineProperty({__proto__:null,VERSION:wA,after:ej,all:s1,allKeys:kp,any:o1,assign:fp,before:XA,bind:qA,bindAll:G5,chain:V5,chunk:Tj,clone:N5,collect:nl,compact:vj,compose:J5,constant:NA,contains:ka,countBy:gj,create:C5,debounce:Q5,default:Pt,defaults:BA,defer:Y5,delay:VA,detect:gm,difference:nS,drop:Td,each:Za,escape:B5,every:s1,extend:LA,extendOwn:fp,filter:jc,find:gm,findIndex:nv,findKey:GA,findLastIndex:$A,findWhere:aj,first:$h,flatten:wj,foldl:Gh,foldr:a1,forEach:Za,functions:pm,get:WA,groupBy:fj,has:R5,head:$h,identity:Z1,include:ka,includes:ka,indexBy:pj,indexOf:KA,initial:tS,inject:Gh,intersection:_j,invert:OA,invoke:lj,isArguments:Q1,isArray:zc,isArrayBuffer:EA,isBoolean:_A,isDataView:fm,isDate:o5,isElement:s5,isEmpty:b5,isEqual:x5,isError:c5,isFinite:f5,isFunction:jr,isMap:D5,isMatch:RA,isNaN:CA,isNull:a5,isNumber:AA,isObject:Pc,isRegExp:l5,isSet:A5,isString:K1,isSymbol:SA,isTypedArray:UA,isUndefined:DA,isWeakMap:_5,isWeakSet:S5,iteratee:ev,keys:Qn,last:xj,lastIndexOf:ij,map:nl,mapObject:F5,matcher:Nd,matches:Nd,max:QA,memoize:$5,methods:pm,min:uj,mixin:iS,negate:tv,noop:HA,now:pp,object:Sj,omit:yj,once:tj,pairs:E5,partial:Md,partition:mj,pick:eS,pluck:rv,property:J1,propertyOf:I5,random:i1,range:Ej,reduce:Gh,reduceRight:a1,reject:oj,rest:Td,restArguments:Yr,result:H5,sample:JA,select:jc,shuffle:dj,size:bj,some:o1,sortBy:hj,sortedIndex:YA,tail:Td,take:$h,tap:U5,template:W5,templateSettings:z5,throttle:K5,times:O5,toArray:ZA,toPath:PA,transpose:bm,unescape:P5,union:Dj,uniq:mm,unique:mm,uniqueId:q5,unzip:bm,values:Od,where:cj,without:kj,wrap:Z5,zip:Aj},Symbol.toStringTag,{value:"Module"}));var RD=iS(vB);RD._=RD;const wB=Object.freeze(Object.defineProperty({__proto__:null,VERSION:wA,after:ej,all:s1,allKeys:kp,any:o1,assign:fp,before:XA,bind:qA,bindAll:G5,chain:V5,chunk:Tj,clone:N5,collect:nl,compact:vj,compose:J5,constant:NA,contains:ka,countBy:gj,create:C5,debounce:Q5,default:RD,defaults:BA,defer:Y5,delay:VA,detect:gm,difference:nS,drop:Td,each:Za,escape:B5,every:s1,extend:LA,extendOwn:fp,filter:jc,find:gm,findIndex:nv,findKey:GA,findLastIndex:$A,findWhere:aj,first:$h,flatten:wj,foldl:Gh,foldr:a1,forEach:Za,functions:pm,get:WA,groupBy:fj,has:R5,head:$h,identity:Z1,include:ka,includes:ka,indexBy:pj,indexOf:KA,initial:tS,inject:Gh,intersection:_j,invert:OA,invoke:lj,isArguments:Q1,isArray:zc,isArrayBuffer:EA,isBoolean:_A,isDataView:fm,isDate:o5,isElement:s5,isEmpty:b5,isEqual:x5,isError:c5,isFinite:f5,isFunction:jr,isMap:D5,isMatch:RA,isNaN:CA,isNull:a5,isNumber:AA,isObject:Pc,isRegExp:l5,isSet:A5,isString:K1,isSymbol:SA,isTypedArray:UA,isUndefined:DA,isWeakMap:_5,isWeakSet:S5,iteratee:ev,keys:Qn,last:xj,lastIndexOf:ij,map:nl,mapObject:F5,matcher:Nd,matches:Nd,max:QA,memoize:$5,methods:pm,min:uj,mixin:iS,negate:tv,noop:HA,now:pp,object:Sj,omit:yj,once:tj,pairs:E5,partial:Md,partition:mj,pick:eS,pluck:rv,property:J1,propertyOf:I5,random:i1,range:Ej,reduce:Gh,reduceRight:a1,reject:oj,rest:Td,restArguments:Yr,result:H5,sample:JA,select:jc,shuffle:dj,size:bj,some:o1,sortBy:hj,sortedIndex:YA,tail:Td,take:$h,tap:U5,template:W5,templateSettings:z5,throttle:K5,times:O5,toArray:ZA,toPath:PA,transpose:bm,unescape:P5,union:Dj,uniq:mm,unique:mm,uniqueId:q5,unzip:bm,values:Od,where:cj,without:kj,wrap:Z5,zip:Aj},Symbol.toStringTag,{value:"Module"})),Cn=vM(wB);var Cx={},oa={},Gw={exports:{}},Nx={exports:{}},Q3;function Dp(){if(Q3)return Nx.exports;Q3=1;var r=(function(){return this===void 0})();if(r)Nx.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(h,g){var b=Object.getOwnPropertyDescriptor(h,g);return!!(!b||b.writable||b.set)}};else{var e={}.hasOwnProperty,t={}.toString,n={}.constructor.prototype,i=function(h){var g=[];for(var b in h)e.call(h,b)&&g.push(b);return g},a=function(h,g){return{value:h[g]}},s=function(h,g,b){return h[g]=b.value,h},l=function(h){return h},u=function(h){try{return Object(h).constructor.prototype}catch{return n}},d=function(h){try{return t.call(h)==="[object Array]"}catch{return!1}};Nx.exports={isArray:d,keys:i,names:i,defineProperty:s,getDescriptor:a,freeze:l,getPrototypeOf:u,isES5:r,propertyIsWritable:function(){return!0}}}return Nx.exports}var kg,Z3;function sn(){if(Z3)return kg;Z3=1;var r={},e=Dp(),t=typeof navigator>"u",n={e:{}},i,a=typeof self<"u"?self:typeof window<"u"?window:typeof Cc<"u"?Cc:kg!==void 0?kg:null;function s(){try{var z=i;return i=null,z.apply(this,arguments)}catch(ge){return n.e=ge,n}}function l(z){return i=z,s}var u=function(z,ge){var ve={}.hasOwnProperty;function je(){this.constructor=z,this.constructor$=ge;for(var Ie in ge.prototype)ve.call(ge.prototype,Ie)&&Ie.charAt(Ie.length-1)!=="$"&&(this[Ie+"$"]=ge.prototype[Ie])}return je.prototype=ge.prototype,z.prototype=new je,z.prototype};function d(z){return z==null||z===!0||z===!1||typeof z=="string"||typeof z=="number"}function h(z){return typeof z=="function"||typeof z=="object"&&z!==null}function g(z){return d(z)?new Error(R(z)):z}function b(z,ge){var ve=z.length,je=new Array(ve+1),Ie;for(Ie=0;Ie<ve;++Ie)je[Ie]=z[Ie];return je[Ie]=ge,je}function y(z,ge,ve){if(e.isES5){var je=Object.getOwnPropertyDescriptor(z,ge);if(je!=null)return je.get==null&&je.set==null?je.value:ve}else return{}.hasOwnProperty.call(z,ge)?z[ge]:void 0}function D(z,ge,ve){if(d(z))return z;var je={value:ve,configurable:!0,enumerable:!1,writable:!0};return e.defineProperty(z,ge,je),z}function v(z){throw z}var w=(function(){var z=[Array.prototype,Object.prototype,Function.prototype],ge=function(Ie){for(var Pe=0;Pe<z.length;++Pe)if(z[Pe]===Ie)return!0;return!1};if(e.isES5){var ve=Object.getOwnPropertyNames;return function(Ie){for(var Pe=[],fe=Object.create(null);Ie!=null&&!ge(Ie);){var Ue;try{Ue=ve(Ie)}catch{return Pe}for(var be=0;be<Ue.length;++be){var Fe=Ue[be];if(!fe[Fe]){fe[Fe]=!0;var $e=Object.getOwnPropertyDescriptor(Ie,Fe);$e!=null&&$e.get==null&&$e.set==null&&Pe.push(Fe)}}Ie=e.getPrototypeOf(Ie)}return Pe}}else{var je={}.hasOwnProperty;return function(Ie){if(ge(Ie))return[];var Pe=[];e:for(var fe in Ie)if(je.call(Ie,fe))Pe.push(fe);else{for(var Ue=0;Ue<z.length;++Ue)if(je.call(z[Ue],fe))continue e;Pe.push(fe)}return Pe}}})(),k=/this\s*\.\s*\S+\s*=/;function _(z){try{if(typeof z=="function"){var ge=e.names(z.prototype),ve=e.isES5&&ge.length>1,je=ge.length>0&&!(ge.length===1&&ge[0]==="constructor"),Ie=k.test(z+"")&&e.names(z).length>0;if(ve||je||Ie)return!0}return!1}catch{return!1}}function A(z){return z}var N=/^[a-z$_][a-z$_0-9]*$/i;function E(z){return N.test(z)}function T(z,ge,ve){for(var je=new Array(z),Ie=0;Ie<z;++Ie)je[Ie]=ge+Ie+ve;return je}function R(z){try{return z+""}catch{return"[no string representation]"}}function M(z){return z!==null&&typeof z=="object"&&typeof z.message=="string"&&typeof z.name=="string"}function I(z){try{D(z,"isOperational",!0)}catch{}}function F(z){return z==null?!1:z instanceof Error.__BluebirdErrorTypes__.OperationalError||z.isOperational===!0}function G(z){return M(z)&&e.propertyIsWritable(z,"stack")}var U=(function(){return"stack"in new Error?function(z){return G(z)?z:new Error(R(z))}:function(z){if(G(z))return z;try{throw new Error(R(z))}catch(ge){return ge}}})();function W(z){return{}.toString.call(z)}function j(z,ge,ve){for(var je=e.names(z),Ie=0;Ie<je.length;++Ie){var Pe=je[Ie];if(ve(Pe))try{e.defineProperty(ge,Pe,e.getDescriptor(z,Pe))}catch{}}}var X=function(z){return e.isArray(z)?z:null};if(typeof Symbol<"u"&&Symbol.iterator){var P=typeof Array.from=="function"?function(z){return Array.from(z)}:function(z){for(var ge=[],ve=z[Symbol.iterator](),je;!(je=ve.next()).done;)ge.push(je.value);return ge};X=function(z){return e.isArray(z)?z:z!=null&&typeof z[Symbol.iterator]=="function"?P(z):null}}var B=typeof process<"u"&&W(process).toLowerCase()==="[object process]",ee=typeof process<"u"&&typeof r<"u";function K(z){return ee?r[z]:void 0}function H(){if(typeof Promise=="function")try{var z=new Promise(function(){});if({}.toString.call(z)==="[object Promise]")return Promise}catch{}}function J(z,ge){return z.bind(ge)}var ie={isClass:_,isIdentifier:E,inheritedDataKeys:w,getDataPropertyOrDefault:y,thrower:v,isArray:e.isArray,asArray:X,notEnumerableProp:D,isPrimitive:d,isObject:h,isError:M,canEvaluate:t,errorObj:n,tryCatch:l,inherits:u,withAppended:b,maybeWrapAsError:g,toFastProperties:A,filledRange:T,toString:R,canAttachTrace:G,ensureErrorObject:U,originatesFromRejection:F,markAsOriginatingFromRejection:I,classString:W,copyDescriptors:j,hasDevTools:typeof chrome<"u"&&chrome&&typeof chrome.loadTimes=="function",isNode:B,hasEnvVariables:ee,env:K,global:a,getNativePromise:H,domainBind:J};ie.isRecentNode=ie.isNode&&(function(){var z=process.versions.node.split(".").map(Number);return z[0]===0&&z[1]>10||z[0]>0})(),ie.isNode&&ie.toFastProperties(process);try{throw new Error}catch(z){ie.lastLineError=z}return kg=ie,kg}var Ux={exports:{}},$w,J3;function kB(){if(J3)return $w;J3=1;var r=sn(),e,t=function(){throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)},n=r.getNativePromise();if(r.isNode&&typeof MutationObserver>"u"){var i=Cc.setImmediate,a=process.nextTick;e=r.isRecentNode?function(l){i.call(Cc,l)}:function(l){a.call(process,l)}}else if(typeof n=="function"&&typeof n.resolve=="function"){var s=n.resolve();e=function(l){s.then(l)}}else typeof MutationObserver<"u"&&!(typeof window<"u"&&window.navigator&&(window.navigator.standalone||window.cordova))?e=(function(){var l=document.createElement("div"),u={attributes:!0},d=!1,h=document.createElement("div"),g=new MutationObserver(function(){l.classList.toggle("foo"),d=!1});g.observe(h,u);var b=function(){d||(d=!0,h.classList.toggle("foo"))};return function(D){var v=new MutationObserver(function(){v.disconnect(),D()});v.observe(l,u),b()}})():typeof setImmediate<"u"?e=function(l){setImmediate(l)}:typeof setTimeout<"u"?e=function(l){setTimeout(l,0)}:e=t;return $w=e,$w}var Yw,eN;function DB(){if(eN)return Yw;eN=1;function r(t,n,i,a,s){for(var l=0;l<s;++l)i[l+a]=t[l+n],t[l+n]=void 0}function e(t){this._capacity=t,this._length=0,this._front=0}return e.prototype._willBeOverCapacity=function(t){return this._capacity<t},e.prototype._pushOne=function(t){var n=this.length();this._checkCapacity(n+1);var i=this._front+n&this._capacity-1;this[i]=t,this._length=n+1},e.prototype.push=function(t,n,i){var a=this.length()+3;if(this._willBeOverCapacity(a)){this._pushOne(t),this._pushOne(n),this._pushOne(i);return}var s=this._front+a-3;this._checkCapacity(a);var l=this._capacity-1;this[s+0&l]=t,this[s+1&l]=n,this[s+2&l]=i,this._length=a},e.prototype.shift=function(){var t=this._front,n=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,n},e.prototype.length=function(){return this._length},e.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},e.prototype._resizeTo=function(t){var n=this._capacity;this._capacity=t;var i=this._front,a=this._length,s=i+a&n-1;r(this,0,this,n,s)},Yw=e,Yw}var tN;function _B(){if(tN)return Ux.exports;tN=1;var r;try{throw new Error}catch(u){r=u}var e=kB(),t=DB(),n=sn();function i(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new t(16),this._normalQueue=new t(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var u=this;this.drainQueues=function(){u._drainQueues()},this._schedule=e}i.prototype.setScheduler=function(u){var d=this._schedule;return this._schedule=u,this._customScheduler=!0,d},i.prototype.hasCustomScheduler=function(){return this._customScheduler},i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){n.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(u,d){d?(process.stderr.write("Fatal "+(u instanceof Error?u.stack:u)+`
`),process.exit(2)):this.throwLater(u)},i.prototype.throwLater=function(u,d){if(arguments.length===1&&(d=u,u=function(){throw d}),typeof setTimeout<"u")setTimeout(function(){u(d)},0);else try{this._schedule(function(){u(d)})}catch{throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)}};function a(u,d,h){this._lateQueue.push(u,d,h),this._queueTick()}function s(u,d,h){this._normalQueue.push(u,d,h),this._queueTick()}function l(u){this._normalQueue._pushOne(u),this._queueTick()}return n.hasDevTools?(i.prototype.invokeLater=function(u,d,h){this._trampolineEnabled?a.call(this,u,d,h):this._schedule(function(){setTimeout(function(){u.call(d,h)},100)})},i.prototype.invoke=function(u,d,h){this._trampolineEnabled?s.call(this,u,d,h):this._schedule(function(){u.call(d,h)})},i.prototype.settlePromises=function(u){this._trampolineEnabled?l.call(this,u):this._schedule(function(){u._settlePromises()})}):(i.prototype.invokeLater=a,i.prototype.invoke=s,i.prototype.settlePromises=l),i.prototype._drainQueue=function(u){for(;u.length()>0;){var d=u.shift();if(typeof d!="function"){d._settlePromises();continue}var h=u.shift(),g=u.shift();d.call(h,g)}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},Ux.exports=i,Ux.exports.firstLineError=r,Ux.exports}var Kw,nN;function Fc(){if(nN)return Kw;nN=1;var r=Dp(),e=r.freeze,t=sn(),n=t.inherits,i=t.notEnumerableProp;function a(k,_){function A(N){if(!(this instanceof A))return new A(N);i(this,"message",typeof N=="string"?N:_),i(this,"name",k),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return n(A,Error),A}var s,l,u=a("Warning","warning"),d=a("CancellationError","cancellation error"),h=a("TimeoutError","timeout error"),g=a("AggregateError","aggregate error");try{s=TypeError,l=RangeError}catch{s=a("TypeError","type error"),l=a("RangeError","range error")}for(var b="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<b.length;++y)typeof Array.prototype[b[y]]=="function"&&(g.prototype[b[y]]=Array.prototype[b[y]]);r.defineProperty(g.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),g.prototype.isOperational=!0;var D=0;g.prototype.toString=function(){var k=Array(D*4+1).join(" "),_=`
`+k+`AggregateError of:
`;D++,k=Array(D*4+1).join(" ");for(var A=0;A<this.length;++A){for(var N=this[A]===this?"[Circular AggregateError]":this[A]+"",E=N.split(`
`),T=0;T<E.length;++T)E[T]=k+E[T];N=E.join(`
`),_+=N+`
`}return D--,_};function v(k){if(!(this instanceof v))return new v(k);i(this,"name","OperationalError"),i(this,"message",k),this.cause=k,this.isOperational=!0,k instanceof Error?(i(this,"message",k.message),i(this,"stack",k.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}n(v,Error);var w=Error.__BluebirdErrorTypes__;return w||(w=e({CancellationError:d,TimeoutError:h,OperationalError:v,RejectionError:v,AggregateError:g}),r.defineProperty(Error,"__BluebirdErrorTypes__",{value:w,writable:!1,enumerable:!1,configurable:!1})),Kw={Error,TypeError:s,RangeError:l,CancellationError:w.CancellationError,OperationalError:w.OperationalError,TimeoutError:w.TimeoutError,AggregateError:w.AggregateError,Warning:u},Kw}var Qw,rN;function AB(){return rN||(rN=1,Qw=function(r,e){var t=sn(),n=t.errorObj,i=t.isObject;function a(g,b){if(i(g)){if(g instanceof r)return g;var y=l(g);if(y===n){b&&b._pushContext();var D=r.reject(y.e);return b&&b._popContext(),D}else if(typeof y=="function"){if(d(g)){var D=new r(e);return g._then(D._fulfill,D._reject,void 0,D,null),D}return h(g,y,b)}}return g}function s(g){return g.then}function l(g){try{return s(g)}catch(b){return n.e=b,n}}var u={}.hasOwnProperty;function d(g){try{return u.call(g,"_promise0")}catch{return!1}}function h(g,b,y){var D=new r(e),v=D;y&&y._pushContext(),D._captureStackTrace(),y&&y._popContext();var w=!0,k=t.tryCatch(b).call(g,_,A);w=!1,D&&k===n&&(D._rejectCallback(k.e,!0,!0),D=null);function _(N){D&&(D._resolveCallback(N),D=null)}function A(N){D&&(D._rejectCallback(N,w,!0),D=null)}return v}return a}),Qw}var Zw,iN;function SB(){return iN||(iN=1,Zw=function(r,e,t,n,i){var a=sn();a.isArray;function s(u){switch(u){case-2:return[];case-3:return{}}}function l(u){var d=this._promise=new r(e);u instanceof r&&d._propagateFrom(u,3),d._setOnCancel(this),this._values=u,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return a.inherits(l,i),l.prototype.length=function(){return this._length},l.prototype.promise=function(){return this._promise},l.prototype._init=function u(d,h){var g=t(this._values,this._promise);if(g instanceof r){g=g._target();var b=g._bitField;if(this._values=g,(b&50397184)===0)return this._promise._setAsyncGuaranteed(),g._then(u,this._reject,void 0,this,h);if((b&33554432)!==0)g=g._value();else return(b&16777216)!==0?this._reject(g._reason()):this._cancel()}if(g=a.asArray(g),g===null){var y=n("expecting an array or an iterable object but got "+a.classString(g)).reason();this._promise._rejectCallback(y,!1);return}if(g.length===0){h===-5?this._resolveEmptyArray():this._resolve(s(h));return}this._iterate(g)},l.prototype._iterate=function(u){var d=this.getActualLength(u.length);this._length=d,this._values=this.shouldCopyValues()?new Array(d):this._values;for(var h=this._promise,g=!1,b=null,y=0;y<d;++y){var D=t(u[y],h);D instanceof r?(D=D._target(),b=D._bitField):b=null,g?b!==null&&D.suppressUnhandledRejections():b!==null?(b&50397184)===0?(D._proxy(this,y),this._values[y]=D):(b&33554432)!==0?g=this._promiseFulfilled(D._value(),y):(b&16777216)!==0?g=this._promiseRejected(D._reason(),y):g=this._promiseCancelled(y):g=this._promiseFulfilled(D,y)}g||h._setAsyncGuaranteed()},l.prototype._isResolved=function(){return this._values===null},l.prototype._resolve=function(u){this._values=null,this._promise._fulfill(u)},l.prototype._cancel=function(){this._isResolved()||!this._promise._isCancellable()||(this._values=null,this._promise._cancel())},l.prototype._reject=function(u){this._values=null,this._promise._rejectCallback(u,!1)},l.prototype._promiseFulfilled=function(u,d){this._values[d]=u;var h=++this._totalResolved;return h>=this._length?(this._resolve(this._values),!0):!1},l.prototype._promiseCancelled=function(){return this._cancel(),!0},l.prototype._promiseRejected=function(u){return this._totalResolved++,this._reject(u),!0},l.prototype._resultCancelled=function(){if(!this._isResolved()){var u=this._values;if(this._cancel(),u instanceof r)u.cancel();else for(var d=0;d<u.length;++d)u[d]instanceof r&&u[d].cancel()}},l.prototype.shouldCopyValues=function(){return!0},l.prototype.getActualLength=function(u){return u},l}),Zw}var Jw,aN;function EB(){return aN||(aN=1,Jw=function(r){var e=!1,t=[];r.prototype._promiseCreated=function(){},r.prototype._pushContext=function(){},r.prototype._popContext=function(){return null},r._peekContext=r.prototype._peekContext=function(){};function n(){this._trace=new n.CapturedTrace(a())}n.prototype._pushContext=function(){this._trace!==void 0&&(this._trace._promiseCreated=null,t.push(this._trace))},n.prototype._popContext=function(){if(this._trace!==void 0){var s=t.pop(),l=s._promiseCreated;return s._promiseCreated=null,l}return null};function i(){if(e)return new n}function a(){var s=t.length-1;if(s>=0)return t[s]}return n.CapturedTrace=null,n.create=i,n.deactivateLongStackTraces=function(){},n.activateLongStackTraces=function(){var s=r.prototype._pushContext,l=r.prototype._popContext,u=r._peekContext,d=r.prototype._peekContext,h=r.prototype._promiseCreated;n.deactivateLongStackTraces=function(){r.prototype._pushContext=s,r.prototype._popContext=l,r._peekContext=u,r.prototype._peekContext=d,r.prototype._promiseCreated=h,e=!1},e=!0,r.prototype._pushContext=n.prototype._pushContext,r.prototype._popContext=n.prototype._popContext,r._peekContext=r.prototype._peekContext=a,r.prototype._promiseCreated=function(){var g=this._peekContext();g&&g._promiseCreated==null&&(g._promiseCreated=this)}},n}),Jw}var ek,sN;function TB(){return sN||(sN=1,ek=function(r,e){var t=r._getDomain,n=r._async,i=Fc().Warning,a=sn(),s=a.canAttachTrace,l,u,d=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,h=/\((?:timers\.js):\d+:\d+\)/,g=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,b=null,y=null,D=!1,v,w=!!(a.env("BLUEBIRD_DEBUG")!=0&&(a.env("BLUEBIRD_DEBUG")||a.env("NODE_ENV")==="development")),k=!!(a.env("BLUEBIRD_WARNINGS")!=0&&(w||a.env("BLUEBIRD_WARNINGS"))),_=!!(a.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(w||a.env("BLUEBIRD_LONG_STACK_TRACES"))),A=a.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(k||!!a.env("BLUEBIRD_W_FORGOTTEN_RETURN"));r.prototype.suppressUnhandledRejections=function(){var se=this._target();se._bitField=se._bitField&-1048577|524288},r.prototype._ensurePossibleRejectionHandled=function(){(this._bitField&524288)===0&&(this._setRejectionIsUnhandled(),n.invokeLater(this._notifyUnhandledRejection,this,void 0))},r.prototype._notifyUnhandledRejectionIsHandled=function(){Fe("rejectionHandled",l,void 0,this)},r.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456},r.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0},r.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var se=this._settledValue();this._setUnhandledRejectionIsNotified(),Fe("unhandledRejection",u,se,this)}},r.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144},r.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},r.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0},r.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576},r.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},r.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0},r.prototype._warn=function(se,de,xe){return ge(se,de,xe||this)},r.onPossiblyUnhandledRejection=function(se){var de=t();u=typeof se=="function"?de===null?se:a.domainBind(de,se):void 0},r.onUnhandledRejectionHandled=function(se){var de=t();l=typeof se=="function"?de===null?se:a.domainBind(de,se):void 0};var N=function(){};r.longStackTraces=function(){if(n.haveItemsQueued()&&!pe.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);if(!pe.longStackTraces&&he()){var se=r.prototype._captureStackTrace,de=r.prototype._attachExtraTrace;pe.longStackTraces=!0,N=function(){if(n.haveItemsQueued()&&!pe.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);r.prototype._captureStackTrace=se,r.prototype._attachExtraTrace=de,e.deactivateLongStackTraces(),n.enableTrampoline(),pe.longStackTraces=!1},r.prototype._captureStackTrace=H,r.prototype._attachExtraTrace=J,e.activateLongStackTraces(),n.disableTrampolineIfNecessary()}},r.hasLongStackTraces=function(){return pe.longStackTraces&&he()};var E=(function(){try{if(typeof CustomEvent=="function"){var se=new CustomEvent("CustomEvent");return a.global.dispatchEvent(se),function(de,xe){var ae=new CustomEvent(de.toLowerCase(),{detail:xe,cancelable:!0});return!a.global.dispatchEvent(ae)}}else if(typeof Event=="function"){var se=new Event("CustomEvent");return a.global.dispatchEvent(se),function(xe,ae){var ke=new Event(xe.toLowerCase(),{cancelable:!0});return ke.detail=ae,!a.global.dispatchEvent(ke)}}else{var se=document.createEvent("CustomEvent");return se.initCustomEvent("testingtheevent",!1,!0,{}),a.global.dispatchEvent(se),function(xe,ae){var ke=document.createEvent("CustomEvent");return ke.initCustomEvent(xe.toLowerCase(),!1,!0,ae),!a.global.dispatchEvent(ke)}}}catch{}return function(){return!1}})(),T=(function(){return a.isNode?function(){return process.emit.apply(process,arguments)}:a.global?function(se){var de="on"+se.toLowerCase(),xe=a.global[de];return xe?(xe.apply(a.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}})();function R(se,de){return{promise:de}}var M={promiseCreated:R,promiseFulfilled:R,promiseRejected:R,promiseResolved:R,promiseCancelled:R,promiseChained:function(se,de,xe){return{promise:de,child:xe}},warning:function(se,de){return{warning:de}},unhandledRejection:function(se,de,xe){return{reason:de,promise:xe}},rejectionHandled:R},I=function(se){var de=!1;try{de=T.apply(null,arguments)}catch(ae){n.throwLater(ae),de=!0}var xe=!1;try{xe=E(se,M[se].apply(null,arguments))}catch(ae){n.throwLater(ae),xe=!0}return xe||de};r.config=function(se){if(se=Object(se),"longStackTraces"in se&&(se.longStackTraces?r.longStackTraces():!se.longStackTraces&&r.hasLongStackTraces()&&N()),"warnings"in se){var de=se.warnings;pe.warnings=!!de,A=pe.warnings,a.isObject(de)&&"wForgottenReturn"in de&&(A=!!de.wForgottenReturn)}if("cancellation"in se&&se.cancellation&&!pe.cancellation){if(n.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");r.prototype._clearCancellationData=X,r.prototype._propagateFrom=P,r.prototype._onCancel=W,r.prototype._setOnCancel=j,r.prototype._attachCancellationCallback=U,r.prototype._execute=G,ee=P,pe.cancellation=!0}return"monitoring"in se&&(se.monitoring&&!pe.monitoring?(pe.monitoring=!0,r.prototype._fireEvent=I):!se.monitoring&&pe.monitoring&&(pe.monitoring=!1,r.prototype._fireEvent=F)),r};function F(){return!1}r.prototype._fireEvent=F,r.prototype._execute=function(se,de,xe){try{se(de,xe)}catch(ae){return ae}},r.prototype._onCancel=function(){},r.prototype._setOnCancel=function(se){},r.prototype._attachCancellationCallback=function(se){},r.prototype._captureStackTrace=function(){},r.prototype._attachExtraTrace=function(){},r.prototype._clearCancellationData=function(){},r.prototype._propagateFrom=function(se,de){};function G(se,de,xe){var ae=this;try{se(de,xe,function(ke){if(typeof ke!="function")throw new TypeError("onCancel must be a function, got: "+a.toString(ke));ae._attachCancellationCallback(ke)})}catch(ke){return ke}}function U(se){if(!this._isCancellable())return this;var de=this._onCancel();de!==void 0?a.isArray(de)?de.push(se):this._setOnCancel([de,se]):this._setOnCancel(se)}function W(){return this._onCancelField}function j(se){this._onCancelField=se}function X(){this._cancellationParent=void 0,this._onCancelField=void 0}function P(se,de){if((de&1)!==0){this._cancellationParent=se;var xe=se._branchesRemainingToCancel;xe===void 0&&(xe=0),se._branchesRemainingToCancel=xe+1}(de&2)!==0&&se._isBound()&&this._setBoundTo(se._boundTo)}function B(se,de){(de&2)!==0&&se._isBound()&&this._setBoundTo(se._boundTo)}var ee=B;function K(){var se=this._boundTo;return se!==void 0&&se instanceof r?se.isFulfilled()?se.value():void 0:se}function H(){this._trace=new Ce(this._peekContext())}function J(se,de){if(s(se)){var xe=this._trace;if(xe!==void 0&&de&&(xe=xe._parent),xe!==void 0)xe.attachExtraTrace(se);else if(!se.__stackCleaned__){var ae=Ue(se);a.notEnumerableProp(se,"stack",ae.message+`
`+ae.stack.join(`
`)),a.notEnumerableProp(se,"__stackCleaned__",!0)}}}function ie(se,de,xe,ae,ke){if(se===void 0&&de!==null&&A){if(ke!==void 0&&ke._returnedNonUndefined()||(ae._bitField&65535)===0)return;xe&&(xe=xe+" ");var Me="",ze="";if(de._trace){for(var Xe=de._trace.stack.split(`
`),at=Pe(Xe),ye=at.length-1;ye>=0;--ye){var Re=at[ye];if(!h.test(Re)){var qe=Re.match(g);qe&&(Me="at "+qe[1]+":"+qe[2]+":"+qe[3]+" ");break}}if(at.length>0){for(var Ze=at[0],ye=0;ye<Xe.length;++ye)if(Xe[ye]===Ze){ye>0&&(ze=`
`+Xe[ye-1]);break}}}var Ke="a promise was created in a "+xe+"handler "+Me+"but was not returned from it, see http://goo.gl/rRqMUw"+ze;ae._warn(Ke,!0,de)}}function z(se,de){var xe=se+" is deprecated and will be removed in a future version.";return de&&(xe+=" Use "+de+" instead."),ge(xe)}function ge(se,de,xe){if(pe.warnings){var ae=new i(se),ke;if(de)xe._attachExtraTrace(ae);else if(pe.longStackTraces&&(ke=r._peekContext()))ke.attachExtraTrace(ae);else{var Me=Ue(ae);ae.stack=Me.message+`
`+Me.stack.join(`
`)}I("warning",ae)||be(ae,"",!0)}}function ve(se,de){for(var xe=0;xe<de.length-1;++xe)de[xe].push("From previous event:"),de[xe]=de[xe].join(`
`);return xe<de.length&&(de[xe]=de[xe].join(`
`)),se+`
`+de.join(`
`)}function je(se){for(var de=0;de<se.length;++de)(se[de].length===0||de+1<se.length&&se[de][0]===se[de+1][0])&&(se.splice(de,1),de--)}function Ie(se){for(var de=se[0],xe=1;xe<se.length;++xe){for(var ae=se[xe],ke=de.length-1,Me=de[ke],ze=-1,Xe=ae.length-1;Xe>=0;--Xe)if(ae[Xe]===Me){ze=Xe;break}for(var Xe=ze;Xe>=0;--Xe){var at=ae[Xe];if(de[ke]===at)de.pop(),ke--;else break}de=ae}}function Pe(se){for(var de=[],xe=0;xe<se.length;++xe){var ae=se[xe],ke=ae==="    (No stack trace)"||b.test(ae),Me=ke&&oe(ae);ke&&!Me&&(D&&ae.charAt(0)!==" "&&(ae="    "+ae),de.push(ae))}return de}function fe(se){for(var de=se.stack.replace(/\s+$/g,"").split(`
`),xe=0;xe<de.length;++xe){var ae=de[xe];if(ae==="    (No stack trace)"||b.test(ae))break}return xe>0&&se.name!="SyntaxError"&&(de=de.slice(xe)),de}function Ue(se){var de=se.stack,xe=se.toString();return de=typeof de=="string"&&de.length>0?fe(se):["    (No stack trace)"],{message:xe,stack:se.name=="SyntaxError"?de:Pe(de)}}function be(se,de,xe){if(typeof console<"u"){var ae;if(a.isObject(se)){var ke=se.stack;ae=de+y(ke,se)}else ae=de+String(se);typeof v=="function"?v(ae,xe):(typeof console.log=="function"||typeof console.log=="object")&&console.log(ae)}}function Fe(se,de,xe,ae){var ke=!1;try{typeof de=="function"&&(ke=!0,se==="rejectionHandled"?de(ae):de(xe,ae))}catch(Me){n.throwLater(Me)}se==="unhandledRejection"?!I(se,xe,ae)&&!ke&&be(xe,"Unhandled rejection "):I(se,ae)}function $e(se){var de;if(typeof se=="function")de="[function "+(se.name||"anonymous")+"]";else{de=se&&typeof se.toString=="function"?se.toString():a.toString(se);var xe=/\[object [a-zA-Z0-9$_]+\]/;if(xe.test(de))try{var ae=JSON.stringify(se);de=ae}catch{}de.length===0&&(de="(empty array)")}return"(<"+O(de)+">, no stack trace)"}function O(se){var de=41;return se.length<de?se:se.substr(0,de-3)+"..."}function he(){return typeof Ne=="function"}var oe=function(){return!1},re=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function ne(se){var de=se.match(re);if(de)return{fileName:de[1],line:parseInt(de[2],10)}}function ue(se,de){if(he()){for(var xe=se.stack.split(`
`),ae=de.stack.split(`
`),ke=-1,Me=-1,ze,Xe,at=0;at<xe.length;++at){var ye=ne(xe[at]);if(ye){ze=ye.fileName,ke=ye.line;break}}for(var at=0;at<ae.length;++at){var ye=ne(ae[at]);if(ye){Xe=ye.fileName,Me=ye.line;break}}ke<0||Me<0||!ze||!Xe||ze!==Xe||ke>=Me||(oe=function(Re){if(d.test(Re))return!0;var qe=ne(Re);return!!(qe&&qe.fileName===ze&&ke<=qe.line&&qe.line<=Me)})}}function Ce(se){this._parent=se,this._promisesCreated=0;var de=this._length=1+(se===void 0?0:se._length);Ne(this,Ce),de>32&&this.uncycle()}a.inherits(Ce,Error),e.CapturedTrace=Ce,Ce.prototype.uncycle=function(){var se=this._length;if(!(se<2)){for(var de=[],xe={},ae=0,ke=this;ke!==void 0;++ae)de.push(ke),ke=ke._parent;se=this._length=ae;for(var ae=se-1;ae>=0;--ae){var Me=de[ae].stack;xe[Me]===void 0&&(xe[Me]=ae)}for(var ae=0;ae<se;++ae){var ze=de[ae].stack,Xe=xe[ze];if(Xe!==void 0&&Xe!==ae){Xe>0&&(de[Xe-1]._parent=void 0,de[Xe-1]._length=1),de[ae]._parent=void 0,de[ae]._length=1;var at=ae>0?de[ae-1]:this;Xe<se-1?(at._parent=de[Xe+1],at._parent.uncycle(),at._length=at._parent._length+1):(at._parent=void 0,at._length=1);for(var ye=at._length+1,Re=ae-2;Re>=0;--Re)de[Re]._length=ye,ye++;return}}}},Ce.prototype.attachExtraTrace=function(se){if(!se.__stackCleaned__){this.uncycle();for(var de=Ue(se),xe=de.message,ae=[de.stack],ke=this;ke!==void 0;)ae.push(Pe(ke.stack.split(`
`))),ke=ke._parent;Ie(ae),je(ae),a.notEnumerableProp(se,"stack",ve(xe,ae)),a.notEnumerableProp(se,"__stackCleaned__",!0)}};var Ne=(function(){var de=/^\s*at\s*/,xe=function(ze,Xe){return typeof ze=="string"?ze:Xe.name!==void 0&&Xe.message!==void 0?Xe.toString():$e(Xe)};if(typeof Error.stackTraceLimit=="number"&&typeof Error.captureStackTrace=="function"){Error.stackTraceLimit+=6,b=de,y=xe;var ae=Error.captureStackTrace;return oe=function(ze){return d.test(ze)},function(ze,Xe){Error.stackTraceLimit+=6,ae(ze,Xe),Error.stackTraceLimit-=6}}var ke=new Error;if(typeof ke.stack=="string"&&ke.stack.split(`
`)[0].indexOf("stackDetection@")>=0)return b=/@/,y=xe,D=!0,function(Xe){Xe.stack=new Error().stack};var Me;try{throw new Error}catch(ze){Me="stack"in ze}return!("stack"in ke)&&Me&&typeof Error.stackTraceLimit=="number"?(b=de,y=xe,function(Xe){Error.stackTraceLimit+=6;try{throw new Error}catch(at){Xe.stack=at.stack}Error.stackTraceLimit-=6}):(y=function(ze,Xe){return typeof ze=="string"?ze:(typeof Xe=="object"||typeof Xe=="function")&&Xe.name!==void 0&&Xe.message!==void 0?Xe.toString():$e(Xe)},null)})();typeof console<"u"&&typeof console.warn<"u"&&(v=function(se){console.warn(se)},a.isNode&&process.stderr.isTTY?v=function(se,de){var xe=de?"\x1B[33m":"\x1B[31m";console.warn(xe+se+`\x1B[0m
`)}:!a.isNode&&typeof new Error().stack=="string"&&(v=function(se,de){console.warn("%c"+se,de?"color: darkorange":"color: red")}));var pe={warnings:k,longStackTraces:!1,cancellation:!1,monitoring:!1};return _&&r.longStackTraces(),{longStackTraces:function(){return pe.longStackTraces},warnings:function(){return pe.warnings},cancellation:function(){return pe.cancellation},monitoring:function(){return pe.monitoring},propagateFromFunction:function(){return ee},boundValueFunction:function(){return K},checkForgottenReturns:ie,setBounds:ue,warn:ge,deprecated:z,CapturedTrace:Ce,fireDomEvent:E,fireGlobalEvent:T}}),ek}var tk,oN;function CB(){return oN||(oN=1,tk=function(r,e){var t=sn(),n=r.CancellationError,i=t.errorObj;function a(g,b,y){this.promise=g,this.type=b,this.handler=y,this.called=!1,this.cancelPromise=null}a.prototype.isFinallyHandler=function(){return this.type===0};function s(g){this.finallyHandler=g}s.prototype._resultCancelled=function(){l(this.finallyHandler)};function l(g,b){return g.cancelPromise!=null?(arguments.length>1?g.cancelPromise._reject(b):g.cancelPromise._cancel(),g.cancelPromise=null,!0):!1}function u(){return h.call(this,this.promise._target()._settledValue())}function d(g){if(!l(this,g))return i.e=g,i}function h(g){var b=this.promise,y=this.handler;if(!this.called){this.called=!0;var D=this.isFinallyHandler()?y.call(b._boundValue()):y.call(b._boundValue(),g);if(D!==void 0){b._setReturnedNonUndefined();var v=e(D,b);if(v instanceof r){if(this.cancelPromise!=null)if(v._isCancelled()){var w=new n("late cancellation observer");return b._attachExtraTrace(w),i.e=w,i}else v.isPending()&&v._attachCancellationCallback(new s(this));return v._then(u,d,void 0,this,void 0)}}}return b.isRejected()?(l(this),i.e=g,i):(l(this),g)}return r.prototype._passThrough=function(g,b,y,D){return typeof g!="function"?this.then():this._then(y,D,void 0,new a(this,b,g),void 0)},r.prototype.lastly=r.prototype.finally=function(g){return this._passThrough(g,0,h,h)},r.prototype.tap=function(g){return this._passThrough(g,1,h)},a}),tk}var nk,lN;function NB(){return lN||(lN=1,nk=function(r){var e=sn(),t=Dp().keys,n=e.tryCatch,i=e.errorObj;function a(s,l,u){return function(d){var h=u._boundValue();e:for(var g=0;g<s.length;++g){var b=s[g];if(b===Error||b!=null&&b.prototype instanceof Error){if(d instanceof b)return n(l).call(h,d)}else if(typeof b=="function"){var y=n(b).call(h,d);if(y===i)return y;if(y)return n(l).call(h,d)}else if(e.isObject(d)){for(var D=t(b),v=0;v<D.length;++v){var w=D[v];if(b[w]!=d[w])continue e}return n(l).call(h,d)}}return r}}return a}),nk}var rk,cN;function Cj(){if(cN)return rk;cN=1;var r=sn(),e=r.maybeWrapAsError,t=Fc(),n=t.OperationalError,i=Dp();function a(d){return d instanceof Error&&i.getPrototypeOf(d)===Error.prototype}var s=/^(?:name|message|stack|cause)$/;function l(d){var h;if(a(d)){h=new n(d),h.name=d.name,h.message=d.message,h.stack=d.stack;for(var g=i.keys(d),b=0;b<g.length;++b){var y=g[b];s.test(y)||(h[y]=d[y])}return h}return r.markAsOriginatingFromRejection(d),d}function u(d,h){return function(g,b){if(d!==null){if(g){var y=l(e(g));d._attachExtraTrace(y),d._reject(y)}else if(!h)d._fulfill(b);else{for(var D=arguments.length,v=new Array(Math.max(D-1,0)),w=1;w<D;++w)v[w-1]=arguments[w];d._fulfill(v)}d=null}}}return rk=u,rk}var ik,uN;function UB(){return uN||(uN=1,ik=function(r,e,t,n,i){var a=sn(),s=a.tryCatch;r.method=function(l){if(typeof l!="function")throw new r.TypeError("expecting a function but got "+a.classString(l));return function(){var u=new r(e);u._captureStackTrace(),u._pushContext();var d=s(l).apply(this,arguments),h=u._popContext();return i.checkForgottenReturns(d,h,"Promise.method",u),u._resolveFromSyncValue(d),u}},r.attempt=r.try=function(l){if(typeof l!="function")return n("expecting a function but got "+a.classString(l));var u=new r(e);u._captureStackTrace(),u._pushContext();var d;if(arguments.length>1){i.deprecated("calling Promise.try with more than 1 argument");var h=arguments[1],g=arguments[2];d=a.isArray(h)?s(l).apply(g,h):s(l).call(g,h)}else d=s(l)();var b=u._popContext();return i.checkForgottenReturns(d,b,"Promise.try",u),u._resolveFromSyncValue(d),u},r.prototype._resolveFromSyncValue=function(l){l===a.errorObj?this._rejectCallback(l.e,!1):this._resolveCallback(l,!0)}}),ik}var ak,dN;function RB(){return dN||(dN=1,ak=function(r,e,t,n){var i=!1,a=function(d,h){this._reject(h)},s=function(d,h){h.promiseRejectionQueued=!0,h.bindingPromise._then(a,a,null,this,d)},l=function(d,h){(this._bitField&50397184)===0&&this._resolveCallback(h.target)},u=function(d,h){h.promiseRejectionQueued||this._reject(d)};r.prototype.bind=function(d){i||(i=!0,r.prototype._propagateFrom=n.propagateFromFunction(),r.prototype._boundValue=n.boundValueFunction());var h=t(d),g=new r(e);g._propagateFrom(this,1);var b=this._target();if(g._setBoundTo(h),h instanceof r){var y={promiseRejectionQueued:!1,promise:g,target:b,bindingPromise:h};b._then(e,s,void 0,g,y),h._then(l,u,void 0,g,y),g._setOnCancel(h)}else g._resolveCallback(b);return g},r.prototype._setBoundTo=function(d){d!==void 0?(this._bitField=this._bitField|2097152,this._boundTo=d):this._bitField=this._bitField&-2097153},r.prototype._isBound=function(){return(this._bitField&2097152)===2097152},r.bind=function(d,h){return r.resolve(h).bind(d)}}),ak}var sk,hN;function jB(){return hN||(hN=1,sk=function(r,e,t,n){var i=sn(),a=i.tryCatch,s=i.errorObj,l=r._async;r.prototype.break=r.prototype.cancel=function(){if(!n.cancellation())return this._warn("cancellation is disabled");for(var u=this,d=u;u._isCancellable();){if(!u._cancelBy(d)){d._isFollowing()?d._followee().cancel():d._cancelBranched();break}var h=u._cancellationParent;if(h==null||!h._isCancellable()){u._isFollowing()?u._followee().cancel():u._cancelBranched();break}else u._isFollowing()&&u._followee().cancel(),u._setWillBeCancelled(),d=u,u=h}},r.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},r.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===void 0||this._branchesRemainingToCancel<=0},r.prototype._cancelBy=function(u){return u===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},r.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},r.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),l.invoke(this._cancelPromises,this,void 0))},r.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},r.prototype._unsetOnCancel=function(){this._onCancelField=void 0},r.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},r.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},r.prototype._doInvokeOnCancel=function(u,d){if(i.isArray(u))for(var h=0;h<u.length;++h)this._doInvokeOnCancel(u[h],d);else if(u!==void 0)if(typeof u=="function"){if(!d){var g=a(u).call(this._boundValue());g===s&&(this._attachExtraTrace(g.e),l.throwLater(g.e))}}else u._resultCancelled(this)},r.prototype._invokeOnCancel=function(){var u=this._onCancel();this._unsetOnCancel(),l.invoke(this._doInvokeOnCancel,this,u)},r.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},r.prototype._resultCancelled=function(){this.cancel()}}),sk}var ok,fN;function FB(){return fN||(fN=1,ok=function(r){function e(){return this.value}function t(){throw this.reason}r.prototype.return=r.prototype.thenReturn=function(n){return n instanceof r&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},r.prototype.throw=r.prototype.thenThrow=function(n){return this._then(t,void 0,void 0,{reason:n},void 0)},r.prototype.catchThrow=function(n){if(arguments.length<=1)return this._then(void 0,t,void 0,{reason:n},void 0);var i=arguments[1],a=function(){throw i};return this.caught(n,a)},r.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof r&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var i=arguments[1];i instanceof r&&i.suppressUnhandledRejections();var a=function(){return i};return this.caught(n,a)}}),ok}var lk,pN;function IB(){return pN||(pN=1,lk=function(r){function e(u){u!==void 0?(u=u._target(),this._bitField=u._bitField,this._settledValueField=u._isFateSealed()?u._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var t=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError(`cannot get fulfillment value of a non-fulfilled promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},n=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError(`cannot get rejection reason of a non-rejected promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},i=e.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0},a=e.prototype.isRejected=function(){return(this._bitField&16777216)!==0},s=e.prototype.isPending=function(){return(this._bitField&50397184)===0},l=e.prototype.isResolved=function(){return(this._bitField&50331648)!==0};e.prototype.isCancelled=function(){return(this._bitField&8454144)!==0},r.prototype.__isCancelled=function(){return(this._bitField&65536)===65536},r.prototype._isCancelled=function(){return this._target().__isCancelled()},r.prototype.isCancelled=function(){return(this._target()._bitField&8454144)!==0},r.prototype.isPending=function(){return s.call(this._target())},r.prototype.isRejected=function(){return a.call(this._target())},r.prototype.isFulfilled=function(){return i.call(this._target())},r.prototype.isResolved=function(){return l.call(this._target())},r.prototype.value=function(){return t.call(this._target())},r.prototype.reason=function(){var u=this._target();return u._unsetRejectionIsUnhandled(),n.call(u)},r.prototype._value=function(){return this._settledValue()},r.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},r.PromiseInspection=e}),lk}var ck,gN;function OB(){return gN||(gN=1,ck=function(r,e,t,n,i,a){var s=sn(),l=s.canEvaluate,u=s.tryCatch,d=s.errorObj,h;if(l){for(var g=function(_){return new Function("value","holder",`                             
	            'use strict';                                                    
	            holder.pIndex = value;                                           
	            holder.checkFulfillment(this);                                   
	            `.replace(/Index/g,_))},b=function(_){return new Function("promise","holder",`                           
	            'use strict';                                                    
	            holder.pIndex = promise;                                         
	            `.replace(/Index/g,_))},y=function(_){for(var A=new Array(_),N=0;N<A.length;++N)A[N]="this.p"+(N+1);var E=A.join(" = ")+" = null;",T=`var promise;
`+A.map(function(F){return`                                                         
	                promise = `+F+`;                                      
	                if (promise instanceof Promise) {                            
	                    promise.cancel();                                        
	                }                                                            
	            `}).join(`
`),R=A.join(", "),M="Holder$"+_,I=`return function(tryCatch, errorObj, Promise, async) {    
	            'use strict';                                                    
	            function [TheName](fn) {                                         
	                [TheProperties]                                              
	                this.fn = fn;                                                
	                this.asyncNeeded = true;                                     
	                this.now = 0;                                                
	            }                                                                
	                                                                             
	            [TheName].prototype._callFunction = function(promise) {          
	                promise._pushContext();                                      
	                var ret = tryCatch(this.fn)([ThePassedArguments]);           
	                promise._popContext();                                       
	                if (ret === errorObj) {                                      
	                    promise._rejectCallback(ret.e, false);                   
	                } else {                                                     
	                    promise._resolveCallback(ret);                           
	                }                                                            
	            };                                                               
	                                                                             
	            [TheName].prototype.checkFulfillment = function(promise) {       
	                var now = ++this.now;                                        
	                if (now === [TheTotal]) {                                    
	                    if (this.asyncNeeded) {                                  
	                        async.invoke(this._callFunction, this, promise);     
	                    } else {                                                 
	                        this._callFunction(promise);                         
	                    }                                                        
	                                                                             
	                }                                                            
	            };                                                               
	                                                                             
	            [TheName].prototype._resultCancelled = function() {              
	                [CancellationCode]                                           
	            };                                                               
	                                                                             
	            return [TheName];                                                
	        }(tryCatch, errorObj, Promise, async);                               
	        `;return I=I.replace(/\[TheName\]/g,M).replace(/\[TheTotal\]/g,_).replace(/\[ThePassedArguments\]/g,R).replace(/\[TheProperties\]/g,E).replace(/\[CancellationCode\]/g,T),new Function("tryCatch","errorObj","Promise","async",I)(u,d,r,i)},D=[],v=[],w=[],k=0;k<8;++k)D.push(y(k+1)),v.push(g(k+1)),w.push(b(k+1));h=function(_){this._reject(_)}}r.join=function(){var _=arguments.length-1,A;if(_>0&&typeof arguments[_]=="function"&&(A=arguments[_],_<=8&&l)){var j=new r(n);j._captureStackTrace();for(var N=D[_-1],E=new N(A),T=v,R=0;R<_;++R){var M=t(arguments[R],j);if(M instanceof r){M=M._target();var I=M._bitField;(I&50397184)===0?(M._then(T[R],h,void 0,j,E),w[R](M,E),E.asyncNeeded=!1):(I&33554432)!==0?T[R].call(j,M._value(),E):(I&16777216)!==0?j._reject(M._reason()):j._cancel()}else T[R].call(j,M,E)}if(!j._isFateSealed()){if(E.asyncNeeded){var F=a();F!==null&&(E.fn=s.domainBind(F,E.fn))}j._setAsyncGuaranteed(),j._setOnCancel(E)}return j}for(var G=arguments.length,U=new Array(G),W=0;W<G;++W)U[W]=arguments[W];A&&U.pop();var j=new e(U).promise();return A!==void 0?j.spread(A):j}}),ck}var uk,mN;function MB(){return mN||(mN=1,uk=function(r,e,t,n,i,a){var s=r._getDomain,l=sn(),u=l.tryCatch,d=l.errorObj,h=r._async;function g(y,D,v,w){this.constructor$(y),this._promise._captureStackTrace();var k=s();this._callback=k===null?D:l.domainBind(k,D),this._preservedValues=w===i?new Array(this.length()):null,this._limit=v,this._inFlight=0,this._queue=[],h.invoke(this._asyncInit,this,void 0)}l.inherits(g,e),g.prototype._asyncInit=function(){this._init$(void 0,-2)},g.prototype._init=function(){},g.prototype._promiseFulfilled=function(y,D){var v=this._values,w=this.length(),k=this._preservedValues,_=this._limit;if(D<0){if(D=D*-1-1,v[D]=y,_>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(_>=1&&this._inFlight>=_)return v[D]=y,this._queue.push(D),!1;k!==null&&(k[D]=y);var A=this._promise,N=this._callback,E=A._boundValue();A._pushContext();var T=u(N).call(E,y,D,w),R=A._popContext();if(a.checkForgottenReturns(T,R,k!==null?"Promise.filter":"Promise.map",A),T===d)return this._reject(T.e),!0;var M=n(T,this._promise);if(M instanceof r){M=M._target();var I=M._bitField;if((I&50397184)===0)return _>=1&&this._inFlight++,v[D]=M,M._proxy(this,(D+1)*-1),!1;if((I&33554432)!==0)T=M._value();else return(I&16777216)!==0?(this._reject(M._reason()),!0):(this._cancel(),!0)}v[D]=T}var F=++this._totalResolved;return F>=w?(k!==null?this._filter(v,k):this._resolve(v),!0):!1},g.prototype._drainQueue=function(){for(var y=this._queue,D=this._limit,v=this._values;y.length>0&&this._inFlight<D;){if(this._isResolved())return;var w=y.pop();this._promiseFulfilled(v[w],w)}},g.prototype._filter=function(y,D){for(var v=D.length,w=new Array(v),k=0,_=0;_<v;++_)y[_]&&(w[k++]=D[_]);w.length=k,this._resolve(w)},g.prototype.preservedValues=function(){return this._preservedValues};function b(y,D,v,w){if(typeof D!="function")return t("expecting a function but got "+l.classString(D));var k=0;if(v!==void 0)if(typeof v=="object"&&v!==null){if(typeof v.concurrency!="number")return r.reject(new TypeError("'concurrency' must be a number but it is "+l.classString(v.concurrency)));k=v.concurrency}else return r.reject(new TypeError("options argument must be an object but it is "+l.classString(v)));return k=typeof k=="number"&&isFinite(k)&&k>=1?k:0,new g(y,D,k,w).promise()}r.prototype.map=function(y,D){return b(this,y,D,null)},r.map=function(y,D,v,w){return b(y,D,v,w)}}),uk}var dk,bN;function LB(){if(bN)return dk;bN=1;var r=Object.create;if(r){var e=r(null),t=r(null);e[" size"]=t[" size"]=0}return dk=function(n){var i=sn(),a=i.canEvaluate,s=i.isIdentifier,l,u;{var d=function(w){return new Function("ensureMethod",`                                    
	        return function(obj) {                                               
	            'use strict'                                                     
	            var len = this.length;                                           
	            ensureMethod(obj, 'methodName');                                 
	            switch(len) {                                                    
	                case 1: return obj.methodName(this[0]);                      
	                case 2: return obj.methodName(this[0], this[1]);             
	                case 3: return obj.methodName(this[0], this[1], this[2]);    
	                case 0: return obj.methodName();                             
	                default:                                                     
	                    return obj.methodName.apply(obj, this);                  
	            }                                                                
	        };                                                                   
	        `.replace(/methodName/g,w))(b)},h=function(w){return new Function("obj",`                                             
	        'use strict';                                                        
	        return obj.propertyName;                                             
	        `.replace("propertyName",w))},g=function(w,k,_){var A=_[w];if(typeof A!="function"){if(!s(w))return null;if(A=k(w),_[w]=A,_[" size"]++,_[" size"]>512){for(var N=Object.keys(_),E=0;E<256;++E)delete _[N[E]];_[" size"]=N.length-256}}return A};l=function(w){return g(w,d,e)},u=function(w){return g(w,h,t)}}function b(w,k){var _;if(w!=null&&(_=w[k]),typeof _!="function"){var A="Object "+i.classString(w)+" has no method '"+i.toString(k)+"'";throw new n.TypeError(A)}return _}function y(w){var k=this.pop(),_=b(w,k);return _.apply(w,this)}n.prototype.call=function(w){for(var k=arguments.length,_=new Array(Math.max(k-1,0)),A=1;A<k;++A)_[A-1]=arguments[A];if(a){var N=l(w);if(N!==null)return this._then(N,void 0,void 0,_,void 0)}return _.push(w),this._then(y,void 0,void 0,_,void 0)};function D(w){return w[this]}function v(w){var k=+this;return k<0&&(k=Math.max(0,k+w.length)),w[k]}n.prototype.get=function(w){var k=typeof w=="number",_;if(k)_=v;else if(a){var A=u(w);_=A!==null?A:D}else _=D;return this._then(_,void 0,void 0,w,void 0)}},dk}var hk,yN;function BB(){return yN||(yN=1,hk=function(r,e,t,n,i,a){var s=sn(),l=Fc().TypeError,u=sn().inherits,d=s.errorObj,h=s.tryCatch,g={};function b(A){setTimeout(function(){throw A},0)}function y(A){var N=t(A);return N!==A&&typeof A._isDisposable=="function"&&typeof A._getDisposer=="function"&&A._isDisposable()&&N._setDisposable(A._getDisposer()),N}function D(A,N){var E=0,T=A.length,R=new r(i);function M(){if(E>=T)return R._fulfill();var I=y(A[E++]);if(I instanceof r&&I._isDisposable()){try{I=t(I._getDisposer().tryDispose(N),A.promise)}catch(F){return b(F)}if(I instanceof r)return I._then(M,b,null,null,null)}M()}return M(),R}function v(A,N,E){this._data=A,this._promise=N,this._context=E}v.prototype.data=function(){return this._data},v.prototype.promise=function(){return this._promise},v.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():g},v.prototype.tryDispose=function(A){var N=this.resource(),E=this._context;E!==void 0&&E._pushContext();var T=N!==g?this.doDispose(N,A):null;return E!==void 0&&E._popContext(),this._promise._unsetDisposable(),this._data=null,T},v.isDisposer=function(A){return A!=null&&typeof A.resource=="function"&&typeof A.tryDispose=="function"};function w(A,N,E){this.constructor$(A,N,E)}u(w,v),w.prototype.doDispose=function(A,N){var E=this.data();return E.call(A,A,N)};function k(A){return v.isDisposer(A)?(this.resources[this.index]._setDisposable(A),A.promise()):A}function _(A){this.length=A,this.promise=null,this[A-1]=null}_.prototype._resultCancelled=function(){for(var A=this.length,N=0;N<A;++N){var E=this[N];E instanceof r&&E.cancel()}},r.using=function(){var A=arguments.length;if(A<2)return e("you must pass at least 2 arguments to Promise.using");var N=arguments[A-1];if(typeof N!="function")return e("expecting a function but got "+s.classString(N));var E,T=!0;A===2&&Array.isArray(arguments[0])?(E=arguments[0],A=E.length,T=!1):(E=arguments,A--);for(var R=new _(A),M=0;M<A;++M){var I=E[M];if(v.isDisposer(I)){var F=I;I=I.promise(),I._setDisposable(F)}else{var G=t(I);G instanceof r&&(I=G._then(k,null,null,{resources:R,index:M},void 0))}R[M]=I}for(var U=new Array(R.length),M=0;M<U.length;++M)U[M]=r.resolve(R[M]).reflect();var W=r.all(U).then(function(X){for(var P=0;P<X.length;++P){var B=X[P];if(B.isRejected())return d.e=B.error(),d;if(!B.isFulfilled()){W.cancel();return}X[P]=B.value()}j._pushContext(),N=h(N);var ee=T?N.apply(void 0,X):N(X),K=j._popContext();return a.checkForgottenReturns(ee,K,"Promise.using",j),ee}),j=W.lastly(function(){var X=new r.PromiseInspection(W);return D(R,X)});return R.promise=j,j._setOnCancel(R),j},r.prototype._setDisposable=function(A){this._bitField=this._bitField|131072,this._disposer=A},r.prototype._isDisposable=function(){return(this._bitField&131072)>0},r.prototype._getDisposer=function(){return this._disposer},r.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},r.prototype.disposer=function(A){if(typeof A=="function")return new w(A,this,n());throw new l}}),hk}var fk,xN;function PB(){return xN||(xN=1,fk=function(r,e,t){var n=sn(),i=r.TimeoutError;function a(g){this.handle=g}a.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(g){return l(+this).thenReturn(g)},l=r.delay=function(g,b){var y,D;return b!==void 0?(y=r.resolve(b)._then(s,null,null,g,void 0),t.cancellation()&&b instanceof r&&y._setOnCancel(b)):(y=new r(e),D=setTimeout(function(){y._fulfill()},+g),t.cancellation()&&y._setOnCancel(new a(D)),y._captureStackTrace()),y._setAsyncGuaranteed(),y};r.prototype.delay=function(g){return l(g,this)};var u=function(g,b,y){var D;typeof b!="string"?b instanceof Error?D=b:D=new i("operation timed out"):D=new i(b),n.markAsOriginatingFromRejection(D),g._attachExtraTrace(D),g._reject(D),y!=null&&y.cancel()};function d(g){return clearTimeout(this.handle),g}function h(g){throw clearTimeout(this.handle),g}r.prototype.timeout=function(g,b){g=+g;var y,D,v=new a(setTimeout(function(){y.isPending()&&u(y,b,D)},g));return t.cancellation()?(D=this.then(),y=D._then(d,h,void 0,v,void 0),y._setOnCancel(v)):y=this._then(d,h,void 0,v,void 0),y}}),fk}var pk,vN;function zB(){return vN||(vN=1,pk=function(r,e,t,n,i,a){var s=Fc(),l=s.TypeError,u=sn(),d=u.errorObj,h=u.tryCatch,g=[];function b(D,v,w){for(var k=0;k<v.length;++k){w._pushContext();var _=h(v[k])(D);if(w._popContext(),_===d){w._pushContext();var A=r.reject(d.e);return w._popContext(),A}var N=n(_,w);if(N instanceof r)return N}return null}function y(D,v,w,k){if(a.cancellation()){var _=new r(t),A=this._finallyPromise=new r(t);this._promise=_.lastly(function(){return A}),_._captureStackTrace(),_._setOnCancel(this)}else{var N=this._promise=new r(t);N._captureStackTrace()}this._stack=k,this._generatorFunction=D,this._receiver=v,this._generator=void 0,this._yieldHandlers=typeof w=="function"?[w].concat(g):g,this._yieldedPromise=null,this._cancellationPhase=!1}u.inherits(y,i),y.prototype._isResolved=function(){return this._promise===null},y.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&this._finallyPromise!==null&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},y.prototype._promiseCancelled=function(){if(!this._isResolved()){var D=typeof this._generator.return<"u",v;if(D)this._promise._pushContext(),v=h(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var w=new r.CancellationError("generator .return() sentinel");r.coroutine.returnSentinel=w,this._promise._attachExtraTrace(w),this._promise._pushContext(),v=h(this._generator.throw).call(this._generator,w),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(v)}},y.prototype._promiseFulfilled=function(D){this._yieldedPromise=null,this._promise._pushContext();var v=h(this._generator.next).call(this._generator,D);this._promise._popContext(),this._continue(v)},y.prototype._promiseRejected=function(D){this._yieldedPromise=null,this._promise._attachExtraTrace(D),this._promise._pushContext();var v=h(this._generator.throw).call(this._generator,D);this._promise._popContext(),this._continue(v)},y.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof r){var D=this._yieldedPromise;this._yieldedPromise=null,D.cancel()}},y.prototype.promise=function(){return this._promise},y.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},y.prototype._continue=function(D){var v=this._promise;if(D===d)return this._cleanup(),this._cancellationPhase?v.cancel():v._rejectCallback(D.e,!1);var w=D.value;if(D.done===!0)return this._cleanup(),this._cancellationPhase?v.cancel():v._resolveCallback(w);var k=n(w,this._promise);if(!(k instanceof r)&&(k=b(k,this._yieldHandlers,this._promise),k===null)){this._promiseRejected(new l(`A value %s was yielded that could not be treated as a promise

    See http://goo.gl/MqrFmX

`.replace("%s",w)+`From coroutine:
`+this._stack.split(`
`).slice(1,-7).join(`
`)));return}k=k._target();var _=k._bitField;(_&50397184)===0?(this._yieldedPromise=k,k._proxy(this,null)):(_&33554432)!==0?r._async.invoke(this._promiseFulfilled,this,k._value()):(_&16777216)!==0?r._async.invoke(this._promiseRejected,this,k._reason()):this._promiseCancelled()},r.coroutine=function(D,v){if(typeof D!="function")throw new l(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var w=Object(v).yieldHandler,k=y,_=new Error().stack;return function(){var A=D.apply(this,arguments),N=new k(void 0,void 0,w,_),E=N.promise();return N._generator=A,N._promiseFulfilled(void 0),E}},r.coroutine.addYieldHandler=function(D){if(typeof D!="function")throw new l("expecting a function but got "+u.classString(D));g.push(D)},r.spawn=function(D){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),typeof D!="function")return e(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var v=new y(D,this),w=v.promise();return v._run(r.spawn),w}}),pk}var gk,wN;function WB(){return wN||(wN=1,gk=function(r){var e=sn(),t=r._async,n=e.tryCatch,i=e.errorObj;function a(u,d){var h=this;if(!e.isArray(u))return s.call(h,u,d);var g=n(d).apply(h._boundValue(),[null].concat(u));g===i&&t.throwLater(g.e)}function s(u,d){var h=this,g=h._boundValue(),b=u===void 0?n(d).call(g,null):n(d).call(g,null,u);b===i&&t.throwLater(b.e)}function l(u,d){var h=this;if(!u){var g=new Error(u+"");g.cause=u,u=g}var b=n(d).call(h._boundValue(),u);b===i&&t.throwLater(b.e)}r.prototype.asCallback=r.prototype.nodeify=function(u,d){if(typeof u=="function"){var h=s;d!==void 0&&Object(d).spread&&(h=a),this._then(h,l,void 0,this,u)}return this}}),gk}var mk,kN;function HB(){return kN||(kN=1,mk=function(r,e){var t={},n=sn(),i=Cj(),a=n.withAppended,s=n.maybeWrapAsError,l=n.canEvaluate,u=Fc().TypeError,d="Async",h={__isPromisified__:!0},g=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],b=new RegExp("^(?:"+g.join("|")+")$"),y=function(W){return n.isIdentifier(W)&&W.charAt(0)!=="_"&&W!=="constructor"};function D(W){return!b.test(W)}function v(W){try{return W.__isPromisified__===!0}catch{return!1}}function w(W,j,X){var P=n.getDataPropertyOrDefault(W,j+X,h);return P?v(P):!1}function k(W,j,X){for(var P=0;P<W.length;P+=2){var B=W[P];if(X.test(B)){for(var ee=B.replace(X,""),K=0;K<W.length;K+=2)if(W[K]===ee)throw new u(`Cannot promisify an API that has normal methods with '%s'-suffix

    See http://goo.gl/MqrFmX
`.replace("%s",j))}}}function _(W,j,X,P){for(var B=n.inheritedDataKeys(W),ee=[],K=0;K<B.length;++K){var H=B[K],J=W[H],ie=P===y?!0:y(H);typeof J=="function"&&!v(J)&&!w(W,H,j)&&P(H,J,W,ie)&&ee.push(H,J)}return k(ee,j,X),ee}var A=function(W){return W.replace(/([$])/,"\\$")},N;{var E=function(W){for(var j=[W],X=Math.max(0,W-1-3),P=W-1;P>=X;--P)j.push(P);for(var P=W+1;P<=3;++P)j.push(P);return j},T=function(W){return n.filledRange(W,"_arg","")},R=function(W){return n.filledRange(Math.max(W,3),"_arg","")},M=function(W){return typeof W.length=="number"?Math.max(Math.min(W.length,1024),0):0};N=function(W,j,X,P,B,ee){var K=Math.max(0,M(P)-1),H=E(K),J=typeof W=="string"||j===t;function ie(je){var Ie=T(je).join(", "),Pe=je>0?", ":"",fe;return J?fe=`ret = callback.call(this, {{args}}, nodeback); break;
`:fe=j===void 0?`ret = callback({{args}}, nodeback); break;
`:`ret = callback.call(receiver, {{args}}, nodeback); break;
`,fe.replace("{{args}}",Ie).replace(", ",Pe)}function z(){for(var je="",Ie=0;Ie<H.length;++Ie)je+="case "+H[Ie]+":"+ie(H[Ie]);return je+=`                                                             
	        default:                                                             
	            var args = new Array(len + 1);                                   
	            var i = 0;                                                       
	            for (var i = 0; i < len; ++i) {                                  
	               args[i] = arguments[i];                                       
	            }                                                                
	            args[i] = nodeback;                                              
	            [CodeForCall]                                                    
	            break;                                                           
	        `.replace("[CodeForCall]",J?`ret = callback.apply(this, args);
`:`ret = callback.apply(receiver, args);
`),je}var ge=typeof W=="string"?"this != null ? this['"+W+"'] : fn":"fn",ve=`'use strict';                                                
	        var ret = function (Parameters) {                                    
	            'use strict';                                                    
	            var len = arguments.length;                                      
	            var promise = new Promise(INTERNAL);                             
	            promise._captureStackTrace();                                    
	            var nodeback = nodebackForPromise(promise, `+ee+`);   
	            var ret;                                                         
	            var callback = tryCatch([GetFunctionCode]);                      
	            switch(len) {                                                    
	                [CodeForSwitchCase]                                          
	            }                                                                
	            if (ret === errorObj) {                                          
	                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);
	            }                                                                
	            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     
	            return promise;                                                  
	        };                                                                   
	        notEnumerableProp(ret, '__isPromisified__', true);                   
	        return ret;                                                          
	    `.replace("[CodeForSwitchCase]",z()).replace("[GetFunctionCode]",ge);return ve=ve.replace("Parameters",R(K)),new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",ve)(r,P,j,a,s,i,n.tryCatch,n.errorObj,n.notEnumerableProp,e)}}function I(W,j,X,P,B,ee){var K=(function(){return this})(),H=W;typeof H=="string"&&(W=P);function J(){var ie=j;j===t&&(ie=this);var z=new r(e);z._captureStackTrace();var ge=typeof H=="string"&&this!==K?this[H]:W,ve=i(z,ee);try{ge.apply(ie,a(arguments,ve))}catch(je){z._rejectCallback(s(je),!0,!0)}return z._isFateSealed()||z._setAsyncGuaranteed(),z}return n.notEnumerableProp(J,"__isPromisified__",!0),J}var F=l?N:I;function G(W,j,X,P,B){for(var ee=new RegExp(A(j)+"$"),K=_(W,j,ee,X),H=0,J=K.length;H<J;H+=2){var ie=K[H],z=K[H+1],ge=ie+j;if(P===F)W[ge]=F(ie,t,ie,z,j,B);else{var ve=P(z,function(){return F(ie,t,ie,z,j,B)});n.notEnumerableProp(ve,"__isPromisified__",!0),W[ge]=ve}}return n.toFastProperties(W),W}function U(W,j,X){return F(W,j,void 0,W,null,X)}r.promisify=function(W,j){if(typeof W!="function")throw new u("expecting a function but got "+n.classString(W));if(v(W))return W;j=Object(j);var X=j.context===void 0?t:j.context,P=!!j.multiArgs,B=U(W,X,P);return n.copyDescriptors(W,B,D),B},r.promisifyAll=function(W,j){if(typeof W!="function"&&typeof W!="object")throw new u(`the target of promisifyAll must be an object or a function

    See http://goo.gl/MqrFmX
`);j=Object(j);var X=!!j.multiArgs,P=j.suffix;typeof P!="string"&&(P=d);var B=j.filter;typeof B!="function"&&(B=y);var ee=j.promisifier;if(typeof ee!="function"&&(ee=F),!n.isIdentifier(P))throw new RangeError(`suffix must be a valid identifier

    See http://goo.gl/MqrFmX
`);for(var K=n.inheritedDataKeys(W),H=0;H<K.length;++H){var J=W[K[H]];K[H]!=="constructor"&&n.isClass(J)&&(G(J.prototype,P,B,ee,X),G(J,P,B,ee,X))}return G(W,P,B,ee,X)}}),mk}var bk,DN;function qB(){return DN||(DN=1,bk=function(r,e,t,n){var i=sn(),a=i.isObject,s=Dp(),l;typeof Map=="function"&&(l=Map);var u=(function(){var b=0,y=0;function D(v,w){this[b]=v,this[b+y]=w,b++}return function(w){y=w.size,b=0;var k=new Array(w.size*2);return w.forEach(D,k),k}})(),d=function(b){for(var y=new l,D=b.length/2|0,v=0;v<D;++v){var w=b[D+v],k=b[v];y.set(w,k)}return y};function h(b){var y=!1,D;if(l!==void 0&&b instanceof l)D=u(b),y=!0;else{var v=s.keys(b),w=v.length;D=new Array(w*2);for(var k=0;k<w;++k){var _=v[k];D[k]=b[_],D[k+w]=_}}this.constructor$(D),this._isMap=y,this._init$(void 0,-3)}i.inherits(h,e),h.prototype._init=function(){},h.prototype._promiseFulfilled=function(b,y){this._values[y]=b;var D=++this._totalResolved;if(D>=this._length){var v;if(this._isMap)v=d(this._values);else{v={};for(var w=this.length(),k=0,_=this.length();k<_;++k)v[this._values[k+w]]=this._values[k]}return this._resolve(v),!0}return!1},h.prototype.shouldCopyValues=function(){return!1},h.prototype.getActualLength=function(b){return b>>1};function g(b){var y,D=t(b);if(a(D))D instanceof r?y=D._then(r.props,void 0,void 0,void 0,void 0):y=new h(D).promise();else return n(`cannot await properties of a non-object

    See http://goo.gl/MqrFmX
`);return D instanceof r&&y._propagateFrom(D,2),y}r.prototype.props=function(){return g(this)},r.props=function(b){return g(b)}}),bk}var yk,_N;function VB(){return _N||(_N=1,yk=function(r,e,t,n){var i=sn(),a=function(l){return l.then(function(u){return s(u,l)})};function s(l,u){var d=t(l);if(d instanceof r)return a(d);if(l=i.asArray(l),l===null)return n("expecting an array or an iterable object but got "+i.classString(l));var h=new r(e);u!==void 0&&h._propagateFrom(u,3);for(var g=h._fulfill,b=h._reject,y=0,D=l.length;y<D;++y){var v=l[y];v===void 0&&!(y in l)||r.cast(v)._then(g,b,void 0,h,null)}return h}r.race=function(l){return s(l,void 0)},r.prototype.race=function(){return s(this,void 0)}}),yk}var xk,AN;function XB(){return AN||(AN=1,xk=function(r,e,t,n,i,a){var s=r._getDomain,l=sn(),u=l.tryCatch;function d(D,v,w,k){this.constructor$(D);var _=s();this._fn=_===null?v:l.domainBind(_,v),w!==void 0&&(w=r.resolve(w),w._attachCancellationCallback(this)),this._initialValue=w,this._currentCancellable=null,k===i?this._eachValues=Array(this._length):k===0?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}l.inherits(d,e),d.prototype._gotAccum=function(D){this._eachValues!==void 0&&this._eachValues!==null&&D!==i&&this._eachValues.push(D)},d.prototype._eachComplete=function(D){return this._eachValues!==null&&this._eachValues.push(D),this._eachValues},d.prototype._init=function(){},d.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==void 0?this._eachValues:this._initialValue)},d.prototype.shouldCopyValues=function(){return!1},d.prototype._resolve=function(D){this._promise._resolveCallback(D),this._values=null},d.prototype._resultCancelled=function(D){if(D===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof r&&this._currentCancellable.cancel(),this._initialValue instanceof r&&this._initialValue.cancel())},d.prototype._iterate=function(D){this._values=D;var v,w,k=D.length;if(this._initialValue!==void 0?(v=this._initialValue,w=0):(v=r.resolve(D[0]),w=1),this._currentCancellable=v,!v.isRejected())for(;w<k;++w){var _={accum:null,value:D[w],index:w,length:k,array:this};v=v._then(b,void 0,void 0,_,void 0)}this._eachValues!==void 0&&(v=v._then(this._eachComplete,void 0,void 0,this,void 0)),v._then(h,h,void 0,v,this)},r.prototype.reduce=function(D,v){return g(this,D,v,null)},r.reduce=function(D,v,w,k){return g(D,v,w,k)};function h(D,v){this.isFulfilled()?v._resolve(D):v._reject(D)}function g(D,v,w,k){if(typeof v!="function")return t("expecting a function but got "+l.classString(v));var _=new d(D,v,w,k);return _.promise()}function b(D){this.accum=D,this.array._gotAccum(D);var v=n(this.value,this.array._promise);return v instanceof r?(this.array._currentCancellable=v,v._then(y,void 0,void 0,this,void 0)):y.call(this,v)}function y(D){var v=this.array,w=v._promise,k=u(v._fn);w._pushContext();var _;v._eachValues!==void 0?_=k.call(w._boundValue(),D,this.index,this.length):_=k.call(w._boundValue(),this.accum,D,this.index,this.length),_ instanceof r&&(v._currentCancellable=_);var A=w._popContext();return a.checkForgottenReturns(_,A,v._eachValues!==void 0?"Promise.each":"Promise.reduce",w),_}}),xk}var vk,SN;function GB(){return SN||(SN=1,vk=function(r,e,t){var n=r.PromiseInspection,i=sn();function a(s){this.constructor$(s)}i.inherits(a,e),a.prototype._promiseResolved=function(s,l){this._values[s]=l;var u=++this._totalResolved;return u>=this._length?(this._resolve(this._values),!0):!1},a.prototype._promiseFulfilled=function(s,l){var u=new n;return u._bitField=33554432,u._settledValueField=s,this._promiseResolved(l,u)},a.prototype._promiseRejected=function(s,l){var u=new n;return u._bitField=16777216,u._settledValueField=s,this._promiseResolved(l,u)},r.settle=function(s){return t.deprecated(".settle()",".reflect()"),new a(s).promise()},r.prototype.settle=function(){return r.settle(this)}}),vk}var wk,EN;function $B(){return EN||(EN=1,wk=function(r,e,t){var n=sn(),i=Fc().RangeError,a=Fc().AggregateError,s=n.isArray,l={};function u(h){this.constructor$(h),this._howMany=0,this._unwrap=!1,this._initialized=!1}n.inherits(u,e),u.prototype._init=function(){if(this._initialized){if(this._howMany===0){this._resolve([]);return}this._init$(void 0,-5);var h=s(this._values);!this._isResolved()&&h&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},u.prototype.init=function(){this._initialized=!0,this._init()},u.prototype.setUnwrap=function(){this._unwrap=!0},u.prototype.howMany=function(){return this._howMany},u.prototype.setHowMany=function(h){this._howMany=h},u.prototype._promiseFulfilled=function(h){return this._addFulfilled(h),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),this.howMany()===1&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},u.prototype._promiseRejected=function(h){return this._addRejected(h),this._checkOutcome()},u.prototype._promiseCancelled=function(){return this._values instanceof r||this._values==null?this._cancel():(this._addRejected(l),this._checkOutcome())},u.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var h=new a,g=this.length();g<this._values.length;++g)this._values[g]!==l&&h.push(this._values[g]);return h.length>0?this._reject(h):this._cancel(),!0}return!1},u.prototype._fulfilled=function(){return this._totalResolved},u.prototype._rejected=function(){return this._values.length-this.length()},u.prototype._addRejected=function(h){this._values.push(h)},u.prototype._addFulfilled=function(h){this._values[this._totalResolved++]=h},u.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},u.prototype._getRangeError=function(h){var g="Input array must contain at least "+this._howMany+" items but contains only "+h+" items";return new i(g)},u.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function d(h,g){if((g|0)!==g||g<0)return t(`expecting a positive integer

    See http://goo.gl/MqrFmX
`);var b=new u(h),y=b.promise();return b.setHowMany(g),b.init(),y}r.some=function(h,g){return d(h,g)},r.prototype.some=function(h){return d(this,h)},r._SomePromiseArray=u}),wk}var kk,TN;function YB(){return TN||(TN=1,kk=function(r,e){var t=r.map;r.prototype.filter=function(n,i){return t(this,n,i,e)},r.filter=function(n,i,a){return t(n,i,a,e)}}),kk}var Dk,CN;function KB(){return CN||(CN=1,Dk=function(r,e){var t=r.reduce,n=r.all;function i(){return n(this)}function a(s,l){return t(s,l,e,e)}r.prototype.each=function(s){return t(this,s,e,0)._then(i,void 0,void 0,this,void 0)},r.prototype.mapSeries=function(s){return t(this,s,e,e)},r.each=function(s,l){return t(s,l,e,0)._then(i,void 0,void 0,s,void 0)},r.mapSeries=a}),Dk}var _k,NN;function QB(){return NN||(NN=1,_k=function(r){var e=r._SomePromiseArray;function t(n){var i=new e(n),a=i.promise();return i.setHowMany(1),i.setUnwrap(),i.init(),a}r.any=function(n){return t(n)},r.prototype.any=function(){return t(this)}}),_k}var UN;function ZB(){return UN||(UN=1,(function(r){r.exports=function(){var e=function(){return new b(`circular promise resolution chain

    See http://goo.gl/MqrFmX
`)},t=function(){return new U.PromiseInspection(this._target())},n=function(P){return U.reject(new b(P))};function i(){}var a={},s=sn(),l;s.isNode?l=function(){var P=process.domain;return P===void 0&&(P=null),P}:l=function(){return null},s.notEnumerableProp(U,"_getDomain",l);var u=Dp(),d=_B(),h=new d;u.defineProperty(U,"_async",{value:h});var g=Fc(),b=U.TypeError=g.TypeError;U.RangeError=g.RangeError;var y=U.CancellationError=g.CancellationError;U.TimeoutError=g.TimeoutError,U.OperationalError=g.OperationalError,U.RejectionError=g.OperationalError,U.AggregateError=g.AggregateError;var D=function(){},v={},w={},k=AB()(U,D),_=SB()(U,D,k,n,i),A=EB()(U),N=A.create,E=TB()(U,A);E.CapturedTrace;var T=CB()(U,k),R=NB()(w),M=Cj(),I=s.errorObj,F=s.tryCatch;function G(P,B){if(typeof B!="function")throw new b("expecting a function but got "+s.classString(B));if(P.constructor!==U)throw new b(`the promise constructor cannot be invoked directly

    See http://goo.gl/MqrFmX
`)}function U(P){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,P!==D&&(G(this,P),this._resolveFromExecutor(P)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}U.prototype.toString=function(){return"[object Promise]"},U.prototype.caught=U.prototype.catch=function(P){var B=arguments.length;if(B>1){var ee=new Array(B-1),K=0,H;for(H=0;H<B-1;++H){var J=arguments[H];if(s.isObject(J))ee[K++]=J;else return n("expecting an object but got A catch statement predicate "+s.classString(J))}return ee.length=K,P=arguments[H],this.then(void 0,R(ee,P,this))}return this.then(void 0,P)},U.prototype.reflect=function(){return this._then(t,t,void 0,this,void 0)},U.prototype.then=function(P,B){if(E.warnings()&&arguments.length>0&&typeof P!="function"&&typeof B!="function"){var ee=".then() only accepts functions but was passed: "+s.classString(P);arguments.length>1&&(ee+=", "+s.classString(B)),this._warn(ee)}return this._then(P,B,void 0,void 0,void 0)},U.prototype.done=function(P,B){var ee=this._then(P,B,void 0,void 0,void 0);ee._setIsFinal()},U.prototype.spread=function(P){return typeof P!="function"?n("expecting a function but got "+s.classString(P)):this.all()._then(P,void 0,void 0,v,void 0)},U.prototype.toJSON=function(){var P={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(P.fulfillmentValue=this.value(),P.isFulfilled=!0):this.isRejected()&&(P.rejectionReason=this.reason(),P.isRejected=!0),P},U.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new _(this).promise()},U.prototype.error=function(P){return this.caught(s.originatesFromRejection,P)},U.getNewLibraryCopy=r.exports,U.is=function(P){return P instanceof U},U.fromNode=U.fromCallback=function(P){var B=new U(D);B._captureStackTrace();var ee=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,K=F(P)(M(B,ee));return K===I&&B._rejectCallback(K.e,!0),B._isFateSealed()||B._setAsyncGuaranteed(),B},U.all=function(P){return new _(P).promise()},U.cast=function(P){var B=k(P);return B instanceof U||(B=new U(D),B._captureStackTrace(),B._setFulfilled(),B._rejectionHandler0=P),B},U.resolve=U.fulfilled=U.cast,U.reject=U.rejected=function(P){var B=new U(D);return B._captureStackTrace(),B._rejectCallback(P,!0),B},U.setScheduler=function(P){if(typeof P!="function")throw new b("expecting a function but got "+s.classString(P));return h.setScheduler(P)},U.prototype._then=function(P,B,ee,K,H){var J=H!==void 0,ie=J?H:new U(D),z=this._target(),ge=z._bitField;J||(ie._propagateFrom(this,3),ie._captureStackTrace(),K===void 0&&(this._bitField&2097152)!==0&&((ge&50397184)!==0?K=this._boundValue():K=z===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,ie));var ve=l();if((ge&50397184)!==0){var je,Ie,Pe=z._settlePromiseCtx;(ge&33554432)!==0?(Ie=z._rejectionHandler0,je=P):(ge&16777216)!==0?(Ie=z._fulfillmentHandler0,je=B,z._unsetRejectionIsUnhandled()):(Pe=z._settlePromiseLateCancellationObserver,Ie=new y("late cancellation observer"),z._attachExtraTrace(Ie),je=B),h.invoke(Pe,z,{handler:ve===null?je:typeof je=="function"&&s.domainBind(ve,je),promise:ie,receiver:K,value:Ie})}else z._addCallbacks(P,B,ie,K,ve);return ie},U.prototype._length=function(){return this._bitField&65535},U.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0},U.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864},U.prototype._setLength=function(P){this._bitField=this._bitField&-65536|P&65535},U.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432,this._fireEvent("promiseFulfilled",this)},U.prototype._setRejected=function(){this._bitField=this._bitField|16777216,this._fireEvent("promiseRejected",this)},U.prototype._setFollowing=function(){this._bitField=this._bitField|67108864,this._fireEvent("promiseResolved",this)},U.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304},U.prototype._isFinal=function(){return(this._bitField&4194304)>0},U.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},U.prototype._setCancelled=function(){this._bitField=this._bitField|65536,this._fireEvent("promiseCancelled",this)},U.prototype._setWillBeCancelled=function(){this._bitField=this._bitField|8388608},U.prototype._setAsyncGuaranteed=function(){h.hasCustomScheduler()||(this._bitField=this._bitField|134217728)},U.prototype._receiverAt=function(P){var B=P===0?this._receiver0:this[P*4-4+3];if(B!==a)return B===void 0&&this._isBound()?this._boundValue():B},U.prototype._promiseAt=function(P){return this[P*4-4+2]},U.prototype._fulfillmentHandlerAt=function(P){return this[P*4-4+0]},U.prototype._rejectionHandlerAt=function(P){return this[P*4-4+1]},U.prototype._boundValue=function(){},U.prototype._migrateCallback0=function(P){P._bitField;var B=P._fulfillmentHandler0,ee=P._rejectionHandler0,K=P._promise0,H=P._receiverAt(0);H===void 0&&(H=a),this._addCallbacks(B,ee,K,H,null)},U.prototype._migrateCallbackAt=function(P,B){var ee=P._fulfillmentHandlerAt(B),K=P._rejectionHandlerAt(B),H=P._promiseAt(B),J=P._receiverAt(B);J===void 0&&(J=a),this._addCallbacks(ee,K,H,J,null)},U.prototype._addCallbacks=function(P,B,ee,K,H){var J=this._length();if(J>=65531&&(J=0,this._setLength(0)),J===0)this._promise0=ee,this._receiver0=K,typeof P=="function"&&(this._fulfillmentHandler0=H===null?P:s.domainBind(H,P)),typeof B=="function"&&(this._rejectionHandler0=H===null?B:s.domainBind(H,B));else{var ie=J*4-4;this[ie+2]=ee,this[ie+3]=K,typeof P=="function"&&(this[ie+0]=H===null?P:s.domainBind(H,P)),typeof B=="function"&&(this[ie+1]=H===null?B:s.domainBind(H,B))}return this._setLength(J+1),J},U.prototype._proxy=function(P,B){this._addCallbacks(void 0,void 0,B,P,null)},U.prototype._resolveCallback=function(P,B){if((this._bitField&117506048)===0){if(P===this)return this._rejectCallback(e(),!1);var ee=k(P,this);if(!(ee instanceof U))return this._fulfill(P);B&&this._propagateFrom(ee,2);var K=ee._target();if(K===this){this._reject(e());return}var H=K._bitField;if((H&50397184)===0){var J=this._length();J>0&&K._migrateCallback0(this);for(var ie=1;ie<J;++ie)K._migrateCallbackAt(this,ie);this._setFollowing(),this._setLength(0),this._setFollowee(K)}else if((H&33554432)!==0)this._fulfill(K._value());else if((H&16777216)!==0)this._reject(K._reason());else{var z=new y("late cancellation observer");K._attachExtraTrace(z),this._reject(z)}}},U.prototype._rejectCallback=function(P,B,ee){var K=s.ensureErrorObject(P),H=K===P;if(!H&&!ee&&E.warnings()){var J="a promise was rejected with a non-error: "+s.classString(P);this._warn(J,!0)}this._attachExtraTrace(K,B?H:!1),this._reject(P)},U.prototype._resolveFromExecutor=function(P){var B=this;this._captureStackTrace(),this._pushContext();var ee=!0,K=this._execute(P,function(H){B._resolveCallback(H)},function(H){B._rejectCallback(H,ee)});ee=!1,this._popContext(),K!==void 0&&B._rejectCallback(K,!0)},U.prototype._settlePromiseFromHandler=function(P,B,ee,K){var H=K._bitField;if((H&65536)===0){K._pushContext();var J;B===v?!ee||typeof ee.length!="number"?(J=I,J.e=new b("cannot .spread() a non-array: "+s.classString(ee))):J=F(P).apply(this._boundValue(),ee):J=F(P).call(B,ee);var ie=K._popContext();H=K._bitField,(H&65536)===0&&(J===w?K._reject(ee):J===I?K._rejectCallback(J.e,!1):(E.checkForgottenReturns(J,ie,"",K,this),K._resolveCallback(J)))}},U.prototype._target=function(){for(var P=this;P._isFollowing();)P=P._followee();return P},U.prototype._followee=function(){return this._rejectionHandler0},U.prototype._setFollowee=function(P){this._rejectionHandler0=P},U.prototype._settlePromise=function(P,B,ee,K){var H=P instanceof U,J=this._bitField,ie=(J&134217728)!==0;(J&65536)!==0?(H&&P._invokeInternalOnCancel(),ee instanceof T&&ee.isFinallyHandler()?(ee.cancelPromise=P,F(B).call(ee,K)===I&&P._reject(I.e)):B===t?P._fulfill(t.call(ee)):ee instanceof i?ee._promiseCancelled(P):H||P instanceof _?P._cancel():ee.cancel()):typeof B=="function"?H?(ie&&P._setAsyncGuaranteed(),this._settlePromiseFromHandler(B,ee,K,P)):B.call(ee,K,P):ee instanceof i?ee._isResolved()||((J&33554432)!==0?ee._promiseFulfilled(K,P):ee._promiseRejected(K,P)):H&&(ie&&P._setAsyncGuaranteed(),(J&33554432)!==0?P._fulfill(K):P._reject(K))},U.prototype._settlePromiseLateCancellationObserver=function(P){var B=P.handler,ee=P.promise,K=P.receiver,H=P.value;typeof B=="function"?ee instanceof U?this._settlePromiseFromHandler(B,K,H,ee):B.call(K,H,ee):ee instanceof U&&ee._reject(H)},U.prototype._settlePromiseCtx=function(P){this._settlePromise(P.promise,P.handler,P.receiver,P.value)},U.prototype._settlePromise0=function(P,B,ee){var K=this._promise0,H=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(K,P,H,B)},U.prototype._clearCallbackDataAtIndex=function(P){var B=P*4-4;this[B+2]=this[B+3]=this[B+0]=this[B+1]=void 0},U.prototype._fulfill=function(P){var B=this._bitField;if(!((B&117506048)>>>16)){if(P===this){var ee=e();return this._attachExtraTrace(ee),this._reject(ee)}this._setFulfilled(),this._rejectionHandler0=P,(B&65535)>0&&((B&134217728)!==0?this._settlePromises():h.settlePromises(this))}},U.prototype._reject=function(P){var B=this._bitField;if(!((B&117506048)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=P,this._isFinal())return h.fatalError(P,s.isNode);(B&65535)>0?h.settlePromises(this):this._ensurePossibleRejectionHandled()}},U.prototype._fulfillPromises=function(P,B){for(var ee=1;ee<P;ee++){var K=this._fulfillmentHandlerAt(ee),H=this._promiseAt(ee),J=this._receiverAt(ee);this._clearCallbackDataAtIndex(ee),this._settlePromise(H,K,J,B)}},U.prototype._rejectPromises=function(P,B){for(var ee=1;ee<P;ee++){var K=this._rejectionHandlerAt(ee),H=this._promiseAt(ee),J=this._receiverAt(ee);this._clearCallbackDataAtIndex(ee),this._settlePromise(H,K,J,B)}},U.prototype._settlePromises=function(){var P=this._bitField,B=P&65535;if(B>0){if((P&16842752)!==0){var ee=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,ee,P),this._rejectPromises(B,ee)}else{var K=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,K,P),this._fulfillPromises(B,K)}this._setLength(0)}this._clearCancellationData()},U.prototype._settledValue=function(){var P=this._bitField;if((P&33554432)!==0)return this._rejectionHandler0;if((P&16777216)!==0)return this._fulfillmentHandler0};function W(P){this.promise._resolveCallback(P)}function j(P){this.promise._rejectCallback(P,!1)}U.defer=U.pending=function(){E.deprecated("Promise.defer","new Promise");var P=new U(D);return{promise:P,resolve:W,reject:j}},s.notEnumerableProp(U,"_makeSelfResolutionError",e),UB()(U,D,k,n,E),RB()(U,D,k,E),jB()(U,_,n,E),FB()(U),IB()(U),OB()(U,_,k,D,h,l),U.Promise=U,U.version="3.4.7",MB()(U,_,n,k,D,E),LB()(U),BB()(U,n,k,N,D,E),PB()(U,D,E),zB()(U,n,D,k,i,E),WB()(U),HB()(U,D),qB()(U,_,k,n),VB()(U,D,k,n),XB()(U,_,n,k,D,E),GB()(U,_,E),$B()(U,_,n),YB()(U,D),KB()(U,D),QB()(U),s.toFastProperties(U),s.toFastProperties(U.prototype);function X(P){var B=new U(D);B._fulfillmentHandler0=P,B._rejectionHandler0=P,B._promise0=P,B._receiver0=P}return X({a:1}),X({b:2}),X({c:3}),X(1),X(function(){}),X(void 0),X(!1),X(new U(D)),E.setBounds(d.firstLineError,s.lastLineError),U}})(Gw)),Gw.exports}var RN;function Hc(){if(RN)return oa;RN=1;var r=Cn,e=ZB()();oa.defer=t,oa.when=e.resolve,oa.resolve=e.resolve,oa.all=e.all,oa.props=e.props,oa.reject=e.reject,oa.promisify=e.promisify,oa.mapSeries=e.mapSeries,oa.attempt=e.attempt,oa.nfcall=function(n){var i=Array.prototype.slice.call(arguments,1),a=e.promisify(n);return a.apply(null,i)},e.prototype.fail=e.prototype.caught,e.prototype.also=function(n){return this.then(function(i){var a=r.extend({},i,n(i));return e.props(a)})};function t(){var n,i,a=new e.Promise(function(s,l){n=s,i=l});return{resolve:n,reject:i,promise:a}}return oa}var Mt={},jN;function Bd(){if(jN)return Mt;jN=1;var r=Cn,e=Mt.types={document:"document",paragraph:"paragraph",run:"run",text:"text",tab:"tab",checkbox:"checkbox",hyperlink:"hyperlink",noteReference:"noteReference",image:"image",note:"note",commentReference:"commentReference",comment:"comment",table:"table",tableRow:"tableRow",tableCell:"tableCell",break:"break",bookmarkStart:"bookmarkStart"};function t(T,R){return R=R||{},{type:e.document,children:T,notes:R.notes||new g({}),comments:R.comments||[]}}function n(T,R){R=R||{};var M=R.indent||{};return{type:e.paragraph,children:T,styleId:R.styleId||null,styleName:R.styleName||null,numbering:R.numbering||null,alignment:R.alignment||null,indent:{start:M.start||null,end:M.end||null,firstLine:M.firstLine||null,hanging:M.hanging||null}}}function i(T,R){return R=R||{},{type:e.run,children:T,styleId:R.styleId||null,styleName:R.styleName||null,isBold:!!R.isBold,isUnderline:!!R.isUnderline,isItalic:!!R.isItalic,isStrikethrough:!!R.isStrikethrough,isAllCaps:!!R.isAllCaps,isSmallCaps:!!R.isSmallCaps,verticalAlignment:R.verticalAlignment||a.baseline,font:R.font||null,fontSize:R.fontSize||null,highlight:R.highlight||null}}var a={baseline:"baseline",superscript:"superscript",subscript:"subscript"};function s(T){return{type:e.text,value:T}}function l(){return{type:e.tab}}function u(T){return{type:e.checkbox,checked:T.checked}}function d(T,R){return{type:e.hyperlink,children:T,href:R.href,anchor:R.anchor,targetFrame:R.targetFrame}}function h(T){return{type:e.noteReference,noteType:T.noteType,noteId:T.noteId}}function g(T){this._notes=r.indexBy(T,function(R){return v(R.noteType,R.noteId)})}g.prototype.resolve=function(T){return this.findNoteByKey(v(T.noteType,T.noteId))},g.prototype.findNoteByKey=function(T){return this._notes[T]||null};function b(T){return{type:e.note,noteType:T.noteType,noteId:T.noteId,body:T.body}}function y(T){return{type:e.commentReference,commentId:T.commentId}}function D(T){return{type:e.comment,commentId:T.commentId,body:T.body,authorName:T.authorName,authorInitials:T.authorInitials}}function v(T,R){return T+"-"+R}function w(T){return{type:e.image,read:function(R){return R?T.readImage(R):T.readImage().then(function(M){return Buffer.from(M)})},readAsArrayBuffer:function(){return T.readImage()},readAsBase64String:function(){return T.readImage("base64")},readAsBuffer:function(){return T.readImage().then(function(R){return Buffer.from(R)})},altText:T.altText,contentType:T.contentType}}function k(T,R){return R=R||{},{type:e.table,children:T,styleId:R.styleId||null,styleName:R.styleName||null}}function _(T,R){return R=R||{},{type:e.tableRow,children:T,isHeader:R.isHeader||!1}}function A(T,R){return R=R||{},{type:e.tableCell,children:T,colSpan:R.colSpan==null?1:R.colSpan,rowSpan:R.rowSpan==null?1:R.rowSpan}}function N(T){return{type:e.break,breakType:T}}function E(T){return{type:e.bookmarkStart,name:T.name}}return Mt.document=Mt.Document=t,Mt.paragraph=Mt.Paragraph=n,Mt.run=Mt.Run=i,Mt.text=Mt.Text=s,Mt.tab=Mt.Tab=l,Mt.checkbox=Mt.Checkbox=u,Mt.Hyperlink=d,Mt.noteReference=Mt.NoteReference=h,Mt.Notes=g,Mt.Note=b,Mt.commentReference=y,Mt.comment=D,Mt.Image=w,Mt.Table=k,Mt.TableRow=_,Mt.TableCell=A,Mt.lineBreak=N("line"),Mt.pageBreak=N("page"),Mt.columnBreak=N("column"),Mt.BookmarkStart=E,Mt.verticalAlignment=a,Mt}var Ah={},FN;function rl(){if(FN)return Ah;FN=1;var r=Cn;Ah.Result=e,Ah.success=t,Ah.warning=n,Ah.error=i;function e(u,d){this.value=u,this.messages=d||[]}e.prototype.map=function(u){return new e(u(this.value),this.messages)},e.prototype.flatMap=function(u){var d=u(this.value);return new e(d.value,a([this,d]))},e.prototype.flatMapThen=function(u){var d=this;return u(this.value).then(function(h){return new e(h.value,a([d,h]))})},e.combine=function(u){var d=r.flatten(r.pluck(u,"value")),h=a(u);return new e(d,h)};function t(u){return new e(u,[])}function n(u){return{type:"warning",message:u}}function i(u){return{type:"error",message:u.message,error:u}}function a(u){var d=[];return r.flatten(r.pluck(u,"messages"),!0).forEach(function(h){s(d,h)||d.push(h)}),d}function s(u,d){return r.find(u,l.bind(null,d))!==void 0}function l(u,d){return u.type===d.type&&u.message===d.message}return Ah}var Dg={},_g={},IN;function JB(){if(IN)return _g;IN=1,_g.byteLength=l,_g.toByteArray=d,_g.fromByteArray=b;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=n.length;i<a;++i)r[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function s(y){var D=y.length;if(D%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=y.indexOf("=");v===-1&&(v=D);var w=v===D?0:4-v%4;return[v,w]}function l(y){var D=s(y),v=D[0],w=D[1];return(v+w)*3/4-w}function u(y,D,v){return(D+v)*3/4-v}function d(y){var D,v=s(y),w=v[0],k=v[1],_=new t(u(y,w,k)),A=0,N=k>0?w-4:w,E;for(E=0;E<N;E+=4)D=e[y.charCodeAt(E)]<<18|e[y.charCodeAt(E+1)]<<12|e[y.charCodeAt(E+2)]<<6|e[y.charCodeAt(E+3)],_[A++]=D>>16&255,_[A++]=D>>8&255,_[A++]=D&255;return k===2&&(D=e[y.charCodeAt(E)]<<2|e[y.charCodeAt(E+1)]>>4,_[A++]=D&255),k===1&&(D=e[y.charCodeAt(E)]<<10|e[y.charCodeAt(E+1)]<<4|e[y.charCodeAt(E+2)]>>2,_[A++]=D>>8&255,_[A++]=D&255),_}function h(y){return r[y>>18&63]+r[y>>12&63]+r[y>>6&63]+r[y&63]}function g(y,D,v){for(var w,k=[],_=D;_<v;_+=3)w=(y[_]<<16&16711680)+(y[_+1]<<8&65280)+(y[_+2]&255),k.push(h(w));return k.join("")}function b(y){for(var D,v=y.length,w=v%3,k=[],_=16383,A=0,N=v-w;A<N;A+=_)k.push(g(y,A,A+_>N?N:A+_));return w===1?(D=y[v-1],k.push(r[D>>2]+r[D<<4&63]+"==")):w===2&&(D=(y[v-2]<<8)+y[v-1],k.push(r[D>>10]+r[D>>4&63]+r[D<<2&63]+"=")),k.join("")}return _g}function Rx(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ak={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var ON;function eP(){return ON||(ON=1,(function(r,e){(function(t){r.exports=t()})(function(){return(function t(n,i,a){function s(d,h){if(!i[d]){if(!n[d]){var g=typeof Rx=="function"&&Rx;if(!h&&g)return g(d,!0);if(l)return l(d,!0);var b=new Error("Cannot find module '"+d+"'");throw b.code="MODULE_NOT_FOUND",b}var y=i[d]={exports:{}};n[d][0].call(y.exports,function(D){var v=n[d][1][D];return s(v||D)},y,y.exports,t,n,i,a)}return i[d].exports}for(var l=typeof Rx=="function"&&Rx,u=0;u<a.length;u++)s(a[u]);return s})({1:[function(t,n,i){var a=t("./utils"),s=t("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var d,h,g,b,y,D,v,w=[],k=0,_=u.length,A=_,N=a.getTypeOf(u)!=="string";k<u.length;)A=_-k,g=N?(d=u[k++],h=k<_?u[k++]:0,k<_?u[k++]:0):(d=u.charCodeAt(k++),h=k<_?u.charCodeAt(k++):0,k<_?u.charCodeAt(k++):0),b=d>>2,y=(3&d)<<4|h>>4,D=1<A?(15&h)<<2|g>>6:64,v=2<A?63&g:64,w.push(l.charAt(b)+l.charAt(y)+l.charAt(D)+l.charAt(v));return w.join("")},i.decode=function(u){var d,h,g,b,y,D,v=0,w=0,k="data:";if(u.substr(0,k.length)===k)throw new Error("Invalid base64 input, it looks like a data url.");var _,A=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===l.charAt(64)&&A--,u.charAt(u.length-2)===l.charAt(64)&&A--,A%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=s.uint8array?new Uint8Array(0|A):new Array(0|A);v<u.length;)d=l.indexOf(u.charAt(v++))<<2|(b=l.indexOf(u.charAt(v++)))>>4,h=(15&b)<<4|(y=l.indexOf(u.charAt(v++)))>>2,g=(3&y)<<6|(D=l.indexOf(u.charAt(v++))),_[w++]=d,y!==64&&(_[w++]=h),D!==64&&(_[w++]=g);return _}},{"./support":30,"./utils":32}],2:[function(t,n,i){var a=t("./external"),s=t("./stream/DataWorker"),l=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function d(h,g,b,y,D){this.compressedSize=h,this.uncompressedSize=g,this.crc32=b,this.compression=y,this.compressedContent=D}d.prototype={getContentWorker:function(){var h=new s(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),g=this;return h.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new s(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(h,g,b){return h.pipe(new l).pipe(new u("uncompressedSize")).pipe(g.compressWorker(b)).pipe(new u("compressedSize")).withStreamInfo("compression",g)},n.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,i){var a=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,i){var a=t("./utils"),s=(function(){for(var l,u=[],d=0;d<256;d++){l=d;for(var h=0;h<8;h++)l=1&l?3988292384^l>>>1:l>>>1;u[d]=l}return u})();n.exports=function(l,u){return l!==void 0&&l.length?a.getTypeOf(l)!=="string"?(function(d,h,g,b){var y=s,D=b+g;d^=-1;for(var v=b;v<D;v++)d=d>>>8^y[255&(d^h[v])];return-1^d})(0|u,l,l.length,0):(function(d,h,g,b){var y=s,D=b+g;d^=-1;for(var v=b;v<D;v++)d=d>>>8^y[255&(d^h.charCodeAt(v))];return-1^d})(0|u,l,l.length,0):0}},{"./utils":32}],5:[function(t,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,n,i){var a=null;a=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:a}},{lie:37}],7:[function(t,n,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=t("pako"),l=t("./utils"),u=t("./stream/GenericWorker"),d=a?"uint8array":"array";function h(g,b){u.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=b,this.meta={}}i.magic="\b\0",l.inherits(h,u),h.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(d,g.data),!1)},h.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(b){g.push({data:b,meta:g.meta})}},i.compressWorker=function(g){return new h("Deflate",g)},i.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,i){function a(y,D){var v,w="";for(v=0;v<D;v++)w+=String.fromCharCode(255&y),y>>>=8;return w}function s(y,D,v,w,k,_){var A,N,E=y.file,T=y.compression,R=_!==d.utf8encode,M=l.transformTo("string",_(E.name)),I=l.transformTo("string",d.utf8encode(E.name)),F=E.comment,G=l.transformTo("string",_(F)),U=l.transformTo("string",d.utf8encode(F)),W=I.length!==E.name.length,j=U.length!==F.length,X="",P="",B="",ee=E.dir,K=E.date,H={crc32:0,compressedSize:0,uncompressedSize:0};D&&!v||(H.crc32=y.crc32,H.compressedSize=y.compressedSize,H.uncompressedSize=y.uncompressedSize);var J=0;D&&(J|=8),R||!W&&!j||(J|=2048);var ie=0,z=0;ee&&(ie|=16),k==="UNIX"?(z=798,ie|=(function(ve,je){var Ie=ve;return ve||(Ie=je?16893:33204),(65535&Ie)<<16})(E.unixPermissions,ee)):(z=20,ie|=(function(ve){return 63&(ve||0)})(E.dosPermissions)),A=K.getUTCHours(),A<<=6,A|=K.getUTCMinutes(),A<<=5,A|=K.getUTCSeconds()/2,N=K.getUTCFullYear()-1980,N<<=4,N|=K.getUTCMonth()+1,N<<=5,N|=K.getUTCDate(),W&&(P=a(1,1)+a(h(M),4)+I,X+="up"+a(P.length,2)+P),j&&(B=a(1,1)+a(h(G),4)+U,X+="uc"+a(B.length,2)+B);var ge="";return ge+=`
\0`,ge+=a(J,2),ge+=T.magic,ge+=a(A,2),ge+=a(N,2),ge+=a(H.crc32,4),ge+=a(H.compressedSize,4),ge+=a(H.uncompressedSize,4),ge+=a(M.length,2),ge+=a(X.length,2),{fileRecord:g.LOCAL_FILE_HEADER+ge+M+X,dirRecord:g.CENTRAL_FILE_HEADER+a(z,2)+ge+a(G.length,2)+"\0\0\0\0"+a(ie,4)+a(w,4)+M+X+G}}var l=t("../utils"),u=t("../stream/GenericWorker"),d=t("../utf8"),h=t("../crc32"),g=t("../signature");function b(y,D,v,w){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=D,this.zipPlatform=v,this.encodeFileName=w,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(b,u),b.prototype.push=function(y){var D=y.meta.percent||0,v=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,u.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:v?(D+100*(v-w-1))/v:100}}))},b.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var D=this.streamFiles&&!y.file.dir;if(D){var v=s(y,D,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(y){this.accumulate=!1;var D=this.streamFiles&&!y.file.dir,v=s(y,D,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),D)this.push({data:(function(w){return g.DATA_DESCRIPTOR+a(w.crc32,4)+a(w.compressedSize,4)+a(w.uncompressedSize,4)})(y),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var y=this.bytesWritten,D=0;D<this.dirRecords.length;D++)this.push({data:this.dirRecords[D],meta:{percent:100}});var v=this.bytesWritten-y,w=(function(k,_,A,N,E){var T=l.transformTo("string",E(N));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(k,2)+a(k,2)+a(_,4)+a(A,4)+a(T.length,2)+T})(this.dirRecords.length,v,y,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(y){this._sources.push(y);var D=this;return y.on("data",function(v){D.processChunk(v)}),y.on("end",function(){D.closedSource(D.previous.streamInfo),D._sources.length?D.prepareNextSource():D.end()}),y.on("error",function(v){D.error(v)}),this},b.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(y){var D=this._sources;if(!u.prototype.error.call(this,y))return!1;for(var v=0;v<D.length;v++)try{D[v].error(y)}catch{}return!0},b.prototype.lock=function(){u.prototype.lock.call(this);for(var y=this._sources,D=0;D<y.length;D++)y[D].lock()},n.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,i){var a=t("../compressions"),s=t("./ZipFileWorker");i.generateWorker=function(l,u,d){var h=new s(u.streamFiles,d,u.platform,u.encodeFileName),g=0;try{l.forEach(function(b,y){g++;var D=(function(_,A){var N=_||A,E=a[N];if(!E)throw new Error(N+" is not a valid compression method !");return E})(y.options.compression,u.compression),v=y.options.compressionOptions||u.compressionOptions||{},w=y.dir,k=y.date;y._compressWorker(D,v).withStreamInfo("file",{name:b,dir:w,date:k,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(h)}),h.entriesCount=g}catch(b){h.error(b)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,i){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new a;for(var l in this)typeof this[l]!="function"&&(s[l]=this[l]);return s}}(a.prototype=t("./object")).loadAsync=t("./load"),a.support=t("./support"),a.defaults=t("./defaults"),a.version="3.10.1",a.loadAsync=function(s,l){return new a().loadAsync(s,l)},a.external=t("./external"),n.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,i){var a=t("./utils"),s=t("./external"),l=t("./utf8"),u=t("./zipEntries"),d=t("./stream/Crc32Probe"),h=t("./nodejsUtils");function g(b){return new s.Promise(function(y,D){var v=b.decompressed.getContentWorker().pipe(new d);v.on("error",function(w){D(w)}).on("end",function(){v.streamInfo.crc32!==b.decompressed.crc32?D(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}n.exports=function(b,y){var D=this;return y=a.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),h.isNode&&h.isStream(b)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",b,!0,y.optimizedBinaryString,y.base64).then(function(v){var w=new u(y);return w.load(v),w}).then(function(v){var w=[s.Promise.resolve(v)],k=v.files;if(y.checkCRC32)for(var _=0;_<k.length;_++)w.push(g(k[_]));return s.Promise.all(w)}).then(function(v){for(var w=v.shift(),k=w.files,_=0;_<k.length;_++){var A=k[_],N=A.fileNameStr,E=a.resolve(A.fileNameStr);D.file(E,A.decompressed,{binary:!0,optimizedBinaryString:!0,date:A.date,dir:A.dir,comment:A.fileCommentStr.length?A.fileCommentStr:null,unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions,createFolders:y.createFolders}),A.dir||(D.file(E).unsafeOriginalName=N)}return w.zipComment.length&&(D.comment=w.zipComment),D})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,i){var a=t("../utils"),s=t("../stream/GenericWorker");function l(u,d){s.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(d)}a.inherits(l,s),l.prototype._bindStream=function(u){var d=this;(this._stream=u).pause(),u.on("data",function(h){d.push({data:h,meta:{percent:0}})}).on("error",function(h){d.isPaused?this.generatedError=h:d.error(h)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},l.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,i){var a=t("readable-stream").Readable;function s(l,u,d){a.call(this,u),this._helper=l;var h=this;l.on("data",function(g,b){h.push(g)||h._helper.pause(),d&&d(b)}).on("error",function(g){h.emit("error",g)}).on("end",function(){h.push(null)})}t("../utils").inherits(s,a),s.prototype._read=function(){this._helper.resume()},n.exports=s},{"../utils":32,"readable-stream":16}],14:[function(t,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,s);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,s)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var s=new Buffer(a);return s.fill(0),s},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(t,n,i){function a(E,T,R){var M,I=l.getTypeOf(T),F=l.extend(R||{},h);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(E=k(E)),F.createFolders&&(M=w(E))&&_.call(this,M,!0);var G=I==="string"&&F.binary===!1&&F.base64===!1;R&&R.binary!==void 0||(F.binary=!G),(T instanceof g&&T.uncompressedSize===0||F.dir||!T||T.length===0)&&(F.base64=!1,F.binary=!0,T="",F.compression="STORE",I="string");var U=null;U=T instanceof g||T instanceof u?T:D.isNode&&D.isStream(T)?new v(E,T):l.prepareContent(E,T,F.binary,F.optimizedBinaryString,F.base64);var W=new b(E,U,F);this.files[E]=W}var s=t("./utf8"),l=t("./utils"),u=t("./stream/GenericWorker"),d=t("./stream/StreamHelper"),h=t("./defaults"),g=t("./compressedObject"),b=t("./zipObject"),y=t("./generate"),D=t("./nodejsUtils"),v=t("./nodejs/NodejsStreamInputAdapter"),w=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var T=E.lastIndexOf("/");return 0<T?E.substring(0,T):""},k=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},_=function(E,T){return T=T!==void 0?T:h.createFolders,E=k(E),this.files[E]||a.call(this,E,null,{dir:!0,createFolders:T}),this.files[E]};function A(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var T,R,M;for(T in this.files)M=this.files[T],(R=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&E(R,M)},filter:function(E){var T=[];return this.forEach(function(R,M){E(R,M)&&T.push(M)}),T},file:function(E,T,R){if(arguments.length!==1)return E=this.root+E,a.call(this,E,T,R),this;if(A(E)){var M=E;return this.filter(function(F,G){return!G.dir&&M.test(F)})}var I=this.files[this.root+E];return I&&!I.dir?I:null},folder:function(E){if(!E)return this;if(A(E))return this.filter(function(I,F){return F.dir&&E.test(I)});var T=this.root+E,R=_.call(this,T),M=this.clone();return M.root=R.name,M},remove:function(E){E=this.root+E;var T=this.files[E];if(T||(E.slice(-1)!=="/"&&(E+="/"),T=this.files[E]),T&&!T.dir)delete this.files[E];else for(var R=this.filter(function(I,F){return F.name.slice(0,E.length)===E}),M=0;M<R.length;M++)delete this.files[R[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var T,R={};try{if((R=l.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");l.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var M=R.comment||this.comment||"";T=y.generateWorker(this,R,M)}catch(I){(T=new u("error")).error(I)}return new d(T,R.type||"string",R.mimeType)},generateAsync:function(E,T){return this.generateInternalStream(E).accumulate(T)},generateNodeStream:function(E,T){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(T)}};n.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,i){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,i){var a=t("./DataReader");function s(l){a.call(this,l);for(var u=0;u<this.data.length;u++)l[u]=255&l[u]}t("../utils").inherits(s,a),s.prototype.byteAt=function(l){return this.data[this.zero+l]},s.prototype.lastIndexOfSignature=function(l){for(var u=l.charCodeAt(0),d=l.charCodeAt(1),h=l.charCodeAt(2),g=l.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===u&&this.data[b+1]===d&&this.data[b+2]===h&&this.data[b+3]===g)return b-this.zero;return-1},s.prototype.readAndCheckSignature=function(l){var u=l.charCodeAt(0),d=l.charCodeAt(1),h=l.charCodeAt(2),g=l.charCodeAt(3),b=this.readData(4);return u===b[0]&&d===b[1]&&h===b[2]&&g===b[3]},s.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=s},{"../utils":32,"./DataReader":18}],18:[function(t,n,i){var a=t("../utils");function s(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var u,d=0;for(this.checkOffset(l),u=this.index+l-1;u>=this.index;u--)d=(d<<8)+this.byteAt(u);return this.index+=l,d},readString:function(l){return a.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},n.exports=s},{"../utils":32}],19:[function(t,n,i){var a=t("./Uint8ArrayReader");function s(l){a.call(this,l)}t("../utils").inherits(s,a),s.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,i){var a=t("./DataReader");function s(l){a.call(this,l)}t("../utils").inherits(s,a),s.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},s.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},s.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},s.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=s},{"../utils":32,"./DataReader":18}],21:[function(t,n,i){var a=t("./ArrayReader");function s(l){a.call(this,l)}t("../utils").inherits(s,a),s.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,i){var a=t("../utils"),s=t("../support"),l=t("./ArrayReader"),u=t("./StringReader"),d=t("./NodeBufferReader"),h=t("./Uint8ArrayReader");n.exports=function(g){var b=a.getTypeOf(g);return a.checkSupport(b),b!=="string"||s.uint8array?b==="nodebuffer"?new d(g):s.uint8array?new h(a.transformTo("uint8array",g)):new l(a.transformTo("array",g)):new u(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,i){var a=t("./GenericWorker"),s=t("../utils");function l(u){a.call(this,"ConvertWorker to "+u),this.destType=u}s.inherits(l,a),l.prototype.processChunk=function(u){this.push({data:s.transformTo(this.destType,u.data),meta:u.meta})},n.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,i){var a=t("./GenericWorker"),s=t("../crc32");function l(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(l,a),l.prototype.processChunk=function(u){this.streamInfo.crc32=s(u.data,this.streamInfo.crc32||0),this.push(u)},n.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,i){var a=t("../utils"),s=t("./GenericWorker");function l(u){s.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}a.inherits(l,s),l.prototype.processChunk=function(u){if(u){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+u.data.length}s.prototype.processChunk.call(this,u)},n.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,i){var a=t("../utils"),s=t("./GenericWorker");function l(u){s.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(h){d.dataIsReady=!0,d.data=h,d.max=h&&h.length||0,d.type=a.getTypeOf(h),d.isPaused||d._tickAndRepeat()},function(h){d.error(h)})}a.inherits(l,s),l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,d);break;case"uint8array":u=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":u=this.data.slice(this.index,d)}return this.index=d,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,i){function a(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,l){return this._listeners[s].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,l){if(this._listeners[s])for(var u=0;u<this._listeners[s].length;u++)this._listeners[s][u].call(this,l)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var l=this;return s.on("data",function(u){l.processChunk(u)}),s.on("end",function(){l.end()}),s.on("error",function(u){l.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,l){return this.extraStreamInfo[s]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},n.exports=a},{}],29:[function(t,n,i){var a=t("../utils"),s=t("./ConvertWorker"),l=t("./GenericWorker"),u=t("../base64"),d=t("../support"),h=t("../external"),g=null;if(d.nodestream)try{g=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(D,v){return new h.Promise(function(w,k){var _=[],A=D._internalType,N=D._outputType,E=D._mimeType;D.on("data",function(T,R){_.push(T),v&&v(R)}).on("error",function(T){_=[],k(T)}).on("end",function(){try{var T=(function(R,M,I){switch(R){case"blob":return a.newBlob(a.transformTo("arraybuffer",M),I);case"base64":return u.encode(M);default:return a.transformTo(R,M)}})(N,(function(R,M){var I,F=0,G=null,U=0;for(I=0;I<M.length;I++)U+=M[I].length;switch(R){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(G=new Uint8Array(U),I=0;I<M.length;I++)G.set(M[I],F),F+=M[I].length;return G;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+R+"'")}})(A,_),E);w(T)}catch(R){k(R)}_=[]}).resume()})}function y(D,v,w){var k=v;switch(v){case"blob":case"arraybuffer":k="uint8array";break;case"base64":k="string"}try{this._internalType=k,this._outputType=v,this._mimeType=w,a.checkSupport(k),this._worker=D.pipe(new s(k)),D.lock()}catch(_){this._worker=new l("error"),this._worker.error(_)}}y.prototype={accumulate:function(D){return b(this,D)},on:function(D,v){var w=this;return D==="data"?this._worker.on(D,function(k){v.call(w,k.data,k.meta)}):this._worker.on(D,function(){a.delay(v,arguments,w)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(D){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},D)}},n.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var a=new ArrayBuffer(0);try{i.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(a),i.blob=s.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,i){for(var a=t("./utils"),s=t("./support"),l=t("./nodejsUtils"),u=t("./stream/GenericWorker"),d=new Array(256),h=0;h<256;h++)d[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;d[254]=d[254]=1;function g(){u.call(this,"utf-8 decode"),this.leftOver=null}function b(){u.call(this,"utf-8 encode")}i.utf8encode=function(y){return s.nodebuffer?l.newBufferFrom(y,"utf-8"):(function(D){var v,w,k,_,A,N=D.length,E=0;for(_=0;_<N;_++)(64512&(w=D.charCodeAt(_)))==55296&&_+1<N&&(64512&(k=D.charCodeAt(_+1)))==56320&&(w=65536+(w-55296<<10)+(k-56320),_++),E+=w<128?1:w<2048?2:w<65536?3:4;for(v=s.uint8array?new Uint8Array(E):new Array(E),_=A=0;A<E;_++)(64512&(w=D.charCodeAt(_)))==55296&&_+1<N&&(64512&(k=D.charCodeAt(_+1)))==56320&&(w=65536+(w-55296<<10)+(k-56320),_++),w<128?v[A++]=w:(w<2048?v[A++]=192|w>>>6:(w<65536?v[A++]=224|w>>>12:(v[A++]=240|w>>>18,v[A++]=128|w>>>12&63),v[A++]=128|w>>>6&63),v[A++]=128|63&w);return v})(y)},i.utf8decode=function(y){return s.nodebuffer?a.transformTo("nodebuffer",y).toString("utf-8"):(function(D){var v,w,k,_,A=D.length,N=new Array(2*A);for(v=w=0;v<A;)if((k=D[v++])<128)N[w++]=k;else if(4<(_=d[k]))N[w++]=65533,v+=_-1;else{for(k&=_===2?31:_===3?15:7;1<_&&v<A;)k=k<<6|63&D[v++],_--;1<_?N[w++]=65533:k<65536?N[w++]=k:(k-=65536,N[w++]=55296|k>>10&1023,N[w++]=56320|1023&k)}return N.length!==w&&(N.subarray?N=N.subarray(0,w):N.length=w),a.applyFromCharCode(N)})(y=a.transformTo(s.uint8array?"uint8array":"array",y))},a.inherits(g,u),g.prototype.processChunk=function(y){var D=a.transformTo(s.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var v=D;(D=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),D.set(v,this.leftOver.length)}else D=this.leftOver.concat(D);this.leftOver=null}var w=(function(_,A){var N;for((A=A||_.length)>_.length&&(A=_.length),N=A-1;0<=N&&(192&_[N])==128;)N--;return N<0||N===0?A:N+d[_[N]]>A?N:A})(D),k=D;w!==D.length&&(s.uint8array?(k=D.subarray(0,w),this.leftOver=D.subarray(w,D.length)):(k=D.slice(0,w),this.leftOver=D.slice(w,D.length))),this.push({data:i.utf8decode(k),meta:y.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=g,a.inherits(b,u),b.prototype.processChunk=function(y){this.push({data:i.utf8encode(y.data),meta:y.meta})},i.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,i){var a=t("./support"),s=t("./base64"),l=t("./nodejsUtils"),u=t("./external");function d(v){return v}function h(v,w){for(var k=0;k<v.length;++k)w[k]=255&v.charCodeAt(k);return w}t("setimmediate"),i.newBlob=function(v,w){i.checkSupport("blob");try{return new Blob([v],{type:w})}catch{try{var k=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return k.append(v),k.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(v,w,k){var _=[],A=0,N=v.length;if(N<=k)return String.fromCharCode.apply(null,v);for(;A<N;)w==="array"||w==="nodebuffer"?_.push(String.fromCharCode.apply(null,v.slice(A,Math.min(A+k,N)))):_.push(String.fromCharCode.apply(null,v.subarray(A,Math.min(A+k,N)))),A+=k;return _.join("")},stringifyByChar:function(v){for(var w="",k=0;k<v.length;k++)w+=String.fromCharCode(v[k]);return w},applyCanBeUsed:{uint8array:(function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}})()}};function b(v){var w=65536,k=i.getTypeOf(v),_=!0;if(k==="uint8array"?_=g.applyCanBeUsed.uint8array:k==="nodebuffer"&&(_=g.applyCanBeUsed.nodebuffer),_)for(;1<w;)try{return g.stringifyByChunk(v,k,w)}catch{w=Math.floor(w/2)}return g.stringifyByChar(v)}function y(v,w){for(var k=0;k<v.length;k++)w[k]=v[k];return w}i.applyFromCharCode=b;var D={};D.string={string:d,array:function(v){return h(v,new Array(v.length))},arraybuffer:function(v){return D.string.uint8array(v).buffer},uint8array:function(v){return h(v,new Uint8Array(v.length))},nodebuffer:function(v){return h(v,l.allocBuffer(v.length))}},D.array={string:b,array:d,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return l.newBufferFrom(v)}},D.arraybuffer={string:function(v){return b(new Uint8Array(v))},array:function(v){return y(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:d,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return l.newBufferFrom(new Uint8Array(v))}},D.uint8array={string:b,array:function(v){return y(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:d,nodebuffer:function(v){return l.newBufferFrom(v)}},D.nodebuffer={string:b,array:function(v){return y(v,new Array(v.length))},arraybuffer:function(v){return D.nodebuffer.uint8array(v).buffer},uint8array:function(v){return y(v,new Uint8Array(v.length))},nodebuffer:d},i.transformTo=function(v,w){if(w=w||"",!v)return w;i.checkSupport(v);var k=i.getTypeOf(w);return D[k][v](w)},i.resolve=function(v){for(var w=v.split("/"),k=[],_=0;_<w.length;_++){var A=w[_];A==="."||A===""&&_!==0&&_!==w.length-1||(A===".."?k.pop():k.push(A))}return k.join("/")},i.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":a.nodebuffer&&l.isBuffer(v)?"nodebuffer":a.uint8array&&v instanceof Uint8Array?"uint8array":a.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(v){if(!a[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(v){var w,k,_="";for(k=0;k<(v||"").length;k++)_+="\\x"+((w=v.charCodeAt(k))<16?"0":"")+w.toString(16).toUpperCase();return _},i.delay=function(v,w,k){setImmediate(function(){v.apply(k||null,w||[])})},i.inherits=function(v,w){function k(){}k.prototype=w.prototype,v.prototype=new k},i.extend=function(){var v,w,k={};for(v=0;v<arguments.length;v++)for(w in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],w)&&k[w]===void 0&&(k[w]=arguments[v][w]);return k},i.prepareContent=function(v,w,k,_,A){return u.Promise.resolve(w).then(function(N){return a.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new u.Promise(function(E,T){var R=new FileReader;R.onload=function(M){E(M.target.result)},R.onerror=function(M){T(M.target.error)},R.readAsArrayBuffer(N)}):N}).then(function(N){var E=i.getTypeOf(N);return E?(E==="arraybuffer"?N=i.transformTo("uint8array",N):E==="string"&&(A?N=s.decode(N):k&&_!==!0&&(N=(function(T){return h(T,a.uint8array?new Uint8Array(T.length):new Array(T.length))})(N))),N):u.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,i){var a=t("./reader/readerFor"),s=t("./utils"),l=t("./signature"),u=t("./zipEntry"),d=t("./support");function h(g){this.files=[],this.loadOptions=g}h.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(b)+", expected "+s.pretty(g)+")")}},isSignature:function(g,b){var y=this.reader.index;this.reader.setIndex(g);var D=this.reader.readString(4)===b;return this.reader.setIndex(y),D},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),b=d.uint8array?"uint8array":"array",y=s.transformTo(b,g);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,b,y,D=this.zip64EndOfCentralSize-44;0<D;)g=this.reader.readInt(2),b=this.reader.readInt(4),y=this.reader.readData(b),this.zip64ExtensibleData[g]={id:g,length:b,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,b;for(g=0;g<this.files.length;g++)b=this.files[g],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(g=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var b=g;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var D=b-y;if(0<D)this.isSignature(b,l.CENTRAL_FILE_HEADER)||(this.reader.zero=D);else if(D<0)throw new Error("Corrupted zip: missing "+Math.abs(D)+" bytes.")},prepareReader:function(g){this.reader=a(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,i){var a=t("./reader/readerFor"),s=t("./utils"),l=t("./compressedObject"),u=t("./crc32"),d=t("./utf8"),h=t("./compressions"),g=t("./support");function b(y,D){this.options=y,this.loadOptions=D}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var D,v;if(y.skip(22),this.fileNameLength=y.readInt(2),v=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((D=(function(w){for(var k in h)if(Object.prototype.hasOwnProperty.call(h,k)&&h[k].magic===w)return h[k];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,D,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var D=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(D),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=a(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var D,v,w,k=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<k;)D=y.readInt(2),v=y.readInt(2),w=y.readData(v),this.extraFields[D]={id:D,length:v,value:w};y.setIndex(k)},handleUTF8:function(){var y=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var D=this.findExtraFieldUnicodePath();if(D!==null)this.fileNameStr=D;else{var v=s.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var k=s.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(k)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var D=a(y.value);return D.readInt(1)!==1||u(this.fileName)!==D.readInt(4)?null:d.utf8decode(D.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var D=a(y.value);return D.readInt(1)!==1||u(this.fileComment)!==D.readInt(4)?null:d.utf8decode(D.readData(y.length-5))}return null}},n.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,i){function a(D,v,w){this.name=D,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=v,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var s=t("./stream/StreamHelper"),l=t("./stream/DataWorker"),u=t("./utf8"),d=t("./compressedObject"),h=t("./stream/GenericWorker");a.prototype={internalStream:function(D){var v=null,w="string";try{if(!D)throw new Error("No output type specified.");var k=(w=D.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),v=this._decompressWorker();var _=!this._dataBinary;_&&!k&&(v=v.pipe(new u.Utf8EncodeWorker)),!_&&k&&(v=v.pipe(new u.Utf8DecodeWorker))}catch(A){(v=new h("error")).error(A)}return new s(v,w,"")},async:function(D,v){return this.internalStream(D).accumulate(v)},nodeStream:function(D,v){return this.internalStream(D||"nodebuffer").toNodejsStream(v)},_compressWorker:function(D,v){if(this._data instanceof d&&this._data.compression.magic===D.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new u.Utf8EncodeWorker)),d.createWorkerFrom(w,D,v)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof h?this._data:new l(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<g.length;y++)a.prototype[g[y]]=b;n.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,i){(function(a){var s,l,u=a.MutationObserver||a.WebKitMutationObserver;if(u){var d=0,h=new u(D),g=a.document.createTextNode("");h.observe(g,{characterData:!0}),s=function(){g.data=d=++d%2}}else if(a.setImmediate||a.MessageChannel===void 0)s="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var v=a.document.createElement("script");v.onreadystatechange=function(){D(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},a.document.documentElement.appendChild(v)}:function(){setTimeout(D,0)};else{var b=new a.MessageChannel;b.port1.onmessage=D,s=function(){b.port2.postMessage(0)}}var y=[];function D(){var v,w;l=!0;for(var k=y.length;k;){for(w=y,y=[],v=-1;++v<k;)w[v]();k=y.length}l=!1}n.exports=function(v){y.push(v)!==1||l||s()}}).call(this,typeof Cc<"u"?Cc:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,i){var a=t("immediate");function s(){}var l={},u=["REJECTED"],d=["FULFILLED"],h=["PENDING"];function g(k){if(typeof k!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,k!==s&&v(this,k)}function b(k,_,A){this.promise=k,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}function y(k,_,A){a(function(){var N;try{N=_(A)}catch(E){return l.reject(k,E)}N===k?l.reject(k,new TypeError("Cannot resolve promise with itself")):l.resolve(k,N)})}function D(k){var _=k&&k.then;if(k&&(typeof k=="object"||typeof k=="function")&&typeof _=="function")return function(){_.apply(k,arguments)}}function v(k,_){var A=!1;function N(R){A||(A=!0,l.reject(k,R))}function E(R){A||(A=!0,l.resolve(k,R))}var T=w(function(){_(E,N)});T.status==="error"&&N(T.value)}function w(k,_){var A={};try{A.value=k(_),A.status="success"}catch(N){A.status="error",A.value=N}return A}(n.exports=g).prototype.finally=function(k){if(typeof k!="function")return this;var _=this.constructor;return this.then(function(A){return _.resolve(k()).then(function(){return A})},function(A){return _.resolve(k()).then(function(){throw A})})},g.prototype.catch=function(k){return this.then(null,k)},g.prototype.then=function(k,_){if(typeof k!="function"&&this.state===d||typeof _!="function"&&this.state===u)return this;var A=new this.constructor(s);return this.state!==h?y(A,this.state===d?k:_,this.outcome):this.queue.push(new b(A,k,_)),A},b.prototype.callFulfilled=function(k){l.resolve(this.promise,k)},b.prototype.otherCallFulfilled=function(k){y(this.promise,this.onFulfilled,k)},b.prototype.callRejected=function(k){l.reject(this.promise,k)},b.prototype.otherCallRejected=function(k){y(this.promise,this.onRejected,k)},l.resolve=function(k,_){var A=w(D,_);if(A.status==="error")return l.reject(k,A.value);var N=A.value;if(N)v(k,N);else{k.state=d,k.outcome=_;for(var E=-1,T=k.queue.length;++E<T;)k.queue[E].callFulfilled(_)}return k},l.reject=function(k,_){k.state=u,k.outcome=_;for(var A=-1,N=k.queue.length;++A<N;)k.queue[A].callRejected(_);return k},g.resolve=function(k){return k instanceof this?k:l.resolve(new this(s),k)},g.reject=function(k){var _=new this(s);return l.reject(_,k)},g.all=function(k){var _=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=k.length,N=!1;if(!A)return this.resolve([]);for(var E=new Array(A),T=0,R=-1,M=new this(s);++R<A;)I(k[R],R);return M;function I(F,G){_.resolve(F).then(function(U){E[G]=U,++T!==A||N||(N=!0,l.resolve(M,E))},function(U){N||(N=!0,l.reject(M,U))})}},g.race=function(k){var _=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=k.length,N=!1;if(!A)return this.resolve([]);for(var E=-1,T=new this(s);++E<A;)R=k[E],_.resolve(R).then(function(M){N||(N=!0,l.resolve(T,M))},function(M){N||(N=!0,l.reject(T,M))});var R;return T}},{immediate:36}],38:[function(t,n,i){var a={};(0,t("./lib/utils/common").assign)(a,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,i){var a=t("./zlib/deflate"),s=t("./utils/common"),l=t("./utils/strings"),u=t("./zlib/messages"),d=t("./zlib/zstream"),h=Object.prototype.toString,g=0,b=-1,y=0,D=8;function v(k){if(!(this instanceof v))return new v(k);this.options=s.assign({level:b,method:D,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},k||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var A=a.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(A!==g)throw new Error(u[A]);if(_.header&&a.deflateSetHeader(this.strm,_.header),_.dictionary){var N;if(N=typeof _.dictionary=="string"?l.string2buf(_.dictionary):h.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(A=a.deflateSetDictionary(this.strm,N))!==g)throw new Error(u[A]);this._dict_set=!0}}function w(k,_){var A=new v(_);if(A.push(k,!0),A.err)throw A.msg||u[A.err];return A.result}v.prototype.push=function(k,_){var A,N,E=this.strm,T=this.options.chunkSize;if(this.ended)return!1;N=_===~~_?_:_===!0?4:0,typeof k=="string"?E.input=l.string2buf(k):h.call(k)==="[object ArrayBuffer]"?E.input=new Uint8Array(k):E.input=k,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new s.Buf8(T),E.next_out=0,E.avail_out=T),(A=a.deflate(E,N))!==1&&A!==g)return this.onEnd(A),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(s.shrinkBuf(E.output,E.next_out))):this.onData(s.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&A!==1);return N===4?(A=a.deflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===g):N!==2||(this.onEnd(g),!(E.avail_out=0))},v.prototype.onData=function(k){this.chunks.push(k)},v.prototype.onEnd=function(k){k===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg},i.Deflate=v,i.deflate=w,i.deflateRaw=function(k,_){return(_=_||{}).raw=!0,w(k,_)},i.gzip=function(k,_){return(_=_||{}).gzip=!0,w(k,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,i){var a=t("./zlib/inflate"),s=t("./utils/common"),l=t("./utils/strings"),u=t("./zlib/constants"),d=t("./zlib/messages"),h=t("./zlib/zstream"),g=t("./zlib/gzheader"),b=Object.prototype.toString;function y(v){if(!(this instanceof y))return new y(v);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},v||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||v&&v.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&(15&w.windowBits)==0&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var k=a.inflateInit2(this.strm,w.windowBits);if(k!==u.Z_OK)throw new Error(d[k]);this.header=new g,a.inflateGetHeader(this.strm,this.header)}function D(v,w){var k=new y(w);if(k.push(v,!0),k.err)throw k.msg||d[k.err];return k.result}y.prototype.push=function(v,w){var k,_,A,N,E,T,R=this.strm,M=this.options.chunkSize,I=this.options.dictionary,F=!1;if(this.ended)return!1;_=w===~~w?w:w===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof v=="string"?R.input=l.binstring2buf(v):b.call(v)==="[object ArrayBuffer]"?R.input=new Uint8Array(v):R.input=v,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new s.Buf8(M),R.next_out=0,R.avail_out=M),(k=a.inflate(R,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&I&&(T=typeof I=="string"?l.string2buf(I):b.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,k=a.inflateSetDictionary(this.strm,T)),k===u.Z_BUF_ERROR&&F===!0&&(k=u.Z_OK,F=!1),k!==u.Z_STREAM_END&&k!==u.Z_OK)return this.onEnd(k),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&k!==u.Z_STREAM_END&&(R.avail_in!==0||_!==u.Z_FINISH&&_!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(A=l.utf8border(R.output,R.next_out),N=R.next_out-A,E=l.buf2string(R.output,A),R.next_out=N,R.avail_out=M-N,N&&s.arraySet(R.output,R.output,A,N,0),this.onData(E)):this.onData(s.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(F=!0)}while((0<R.avail_in||R.avail_out===0)&&k!==u.Z_STREAM_END);return k===u.Z_STREAM_END&&(_=u.Z_FINISH),_===u.Z_FINISH?(k=a.inflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===u.Z_OK):_!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(R.avail_out=0))},y.prototype.onData=function(v){this.chunks.push(v)},y.prototype.onEnd=function(v){v===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},i.Inflate=y,i.inflate=D,i.inflateRaw=function(v,w){return(w=w||{}).raw=!0,D(v,w)},i.ungzip=D},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var h=d.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var g in h)h.hasOwnProperty(g)&&(u[g]=h[g])}}return u},i.shrinkBuf=function(u,d){return u.length===d?u:u.subarray?u.subarray(0,d):(u.length=d,u)};var s={arraySet:function(u,d,h,g,b){if(d.subarray&&u.subarray)u.set(d.subarray(h,h+g),b);else for(var y=0;y<g;y++)u[b+y]=d[h+y]},flattenChunks:function(u){var d,h,g,b,y,D;for(d=g=0,h=u.length;d<h;d++)g+=u[d].length;for(D=new Uint8Array(g),d=b=0,h=u.length;d<h;d++)y=u[d],D.set(y,b),b+=y.length;return D}},l={arraySet:function(u,d,h,g,b){for(var y=0;y<g;y++)u[b+y]=d[h+y]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,l))},i.setTyped(a)},{}],42:[function(t,n,i){var a=t("./common"),s=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var u=new a.Buf8(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function h(g,b){if(b<65537&&(g.subarray&&l||!g.subarray&&s))return String.fromCharCode.apply(null,a.shrinkBuf(g,b));for(var y="",D=0;D<b;D++)y+=String.fromCharCode(g[D]);return y}u[254]=u[254]=1,i.string2buf=function(g){var b,y,D,v,w,k=g.length,_=0;for(v=0;v<k;v++)(64512&(y=g.charCodeAt(v)))==55296&&v+1<k&&(64512&(D=g.charCodeAt(v+1)))==56320&&(y=65536+(y-55296<<10)+(D-56320),v++),_+=y<128?1:y<2048?2:y<65536?3:4;for(b=new a.Buf8(_),v=w=0;w<_;v++)(64512&(y=g.charCodeAt(v)))==55296&&v+1<k&&(64512&(D=g.charCodeAt(v+1)))==56320&&(y=65536+(y-55296<<10)+(D-56320),v++),y<128?b[w++]=y:(y<2048?b[w++]=192|y>>>6:(y<65536?b[w++]=224|y>>>12:(b[w++]=240|y>>>18,b[w++]=128|y>>>12&63),b[w++]=128|y>>>6&63),b[w++]=128|63&y);return b},i.buf2binstring=function(g){return h(g,g.length)},i.binstring2buf=function(g){for(var b=new a.Buf8(g.length),y=0,D=b.length;y<D;y++)b[y]=g.charCodeAt(y);return b},i.buf2string=function(g,b){var y,D,v,w,k=b||g.length,_=new Array(2*k);for(y=D=0;y<k;)if((v=g[y++])<128)_[D++]=v;else if(4<(w=u[v]))_[D++]=65533,y+=w-1;else{for(v&=w===2?31:w===3?15:7;1<w&&y<k;)v=v<<6|63&g[y++],w--;1<w?_[D++]=65533:v<65536?_[D++]=v:(v-=65536,_[D++]=55296|v>>10&1023,_[D++]=56320|1023&v)}return h(_,D)},i.utf8border=function(g,b){var y;for((b=b||g.length)>g.length&&(b=g.length),y=b-1;0<=y&&(192&g[y])==128;)y--;return y<0||y===0?b:y+u[g[y]]>b?y:b}},{"./common":41}],43:[function(t,n,i){n.exports=function(a,s,l,u){for(var d=65535&a|0,h=a>>>16&65535|0,g=0;l!==0;){for(l-=g=2e3<l?2e3:l;h=h+(d=d+s[u++]|0)|0,--g;);d%=65521,h%=65521}return d|h<<16|0}},{}],44:[function(t,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,i){var a=(function(){for(var s,l=[],u=0;u<256;u++){s=u;for(var d=0;d<8;d++)s=1&s?3988292384^s>>>1:s>>>1;l[u]=s}return l})();n.exports=function(s,l,u,d){var h=a,g=d+u;s^=-1;for(var b=d;b<g;b++)s=s>>>8^h[255&(s^l[b])];return-1^s}},{}],46:[function(t,n,i){var a,s=t("../utils/common"),l=t("./trees"),u=t("./adler32"),d=t("./crc32"),h=t("./messages"),g=0,b=4,y=0,D=-2,v=-1,w=4,k=2,_=8,A=9,N=286,E=30,T=19,R=2*N+1,M=15,I=3,F=258,G=F+I+1,U=42,W=113,j=1,X=2,P=3,B=4;function ee(O,he){return O.msg=h[he],he}function K(O){return(O<<1)-(4<O?9:0)}function H(O){for(var he=O.length;0<=--he;)O[he]=0}function J(O){var he=O.state,oe=he.pending;oe>O.avail_out&&(oe=O.avail_out),oe!==0&&(s.arraySet(O.output,he.pending_buf,he.pending_out,oe,O.next_out),O.next_out+=oe,he.pending_out+=oe,O.total_out+=oe,O.avail_out-=oe,he.pending-=oe,he.pending===0&&(he.pending_out=0))}function ie(O,he){l._tr_flush_block(O,0<=O.block_start?O.block_start:-1,O.strstart-O.block_start,he),O.block_start=O.strstart,J(O.strm)}function z(O,he){O.pending_buf[O.pending++]=he}function ge(O,he){O.pending_buf[O.pending++]=he>>>8&255,O.pending_buf[O.pending++]=255&he}function ve(O,he){var oe,re,ne=O.max_chain_length,ue=O.strstart,Ce=O.prev_length,Ne=O.nice_match,pe=O.strstart>O.w_size-G?O.strstart-(O.w_size-G):0,se=O.window,de=O.w_mask,xe=O.prev,ae=O.strstart+F,ke=se[ue+Ce-1],Me=se[ue+Ce];O.prev_length>=O.good_match&&(ne>>=2),Ne>O.lookahead&&(Ne=O.lookahead);do if(se[(oe=he)+Ce]===Me&&se[oe+Ce-1]===ke&&se[oe]===se[ue]&&se[++oe]===se[ue+1]){ue+=2,oe++;do;while(se[++ue]===se[++oe]&&se[++ue]===se[++oe]&&se[++ue]===se[++oe]&&se[++ue]===se[++oe]&&se[++ue]===se[++oe]&&se[++ue]===se[++oe]&&se[++ue]===se[++oe]&&se[++ue]===se[++oe]&&ue<ae);if(re=F-(ae-ue),ue=ae-F,Ce<re){if(O.match_start=he,Ne<=(Ce=re))break;ke=se[ue+Ce-1],Me=se[ue+Ce]}}while((he=xe[he&de])>pe&&--ne!=0);return Ce<=O.lookahead?Ce:O.lookahead}function je(O){var he,oe,re,ne,ue,Ce,Ne,pe,se,de,xe=O.w_size;do{if(ne=O.window_size-O.lookahead-O.strstart,O.strstart>=xe+(xe-G)){for(s.arraySet(O.window,O.window,xe,xe,0),O.match_start-=xe,O.strstart-=xe,O.block_start-=xe,he=oe=O.hash_size;re=O.head[--he],O.head[he]=xe<=re?re-xe:0,--oe;);for(he=oe=xe;re=O.prev[--he],O.prev[he]=xe<=re?re-xe:0,--oe;);ne+=xe}if(O.strm.avail_in===0)break;if(Ce=O.strm,Ne=O.window,pe=O.strstart+O.lookahead,se=ne,de=void 0,de=Ce.avail_in,se<de&&(de=se),oe=de===0?0:(Ce.avail_in-=de,s.arraySet(Ne,Ce.input,Ce.next_in,de,pe),Ce.state.wrap===1?Ce.adler=u(Ce.adler,Ne,de,pe):Ce.state.wrap===2&&(Ce.adler=d(Ce.adler,Ne,de,pe)),Ce.next_in+=de,Ce.total_in+=de,de),O.lookahead+=oe,O.lookahead+O.insert>=I)for(ue=O.strstart-O.insert,O.ins_h=O.window[ue],O.ins_h=(O.ins_h<<O.hash_shift^O.window[ue+1])&O.hash_mask;O.insert&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[ue+I-1])&O.hash_mask,O.prev[ue&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=ue,ue++,O.insert--,!(O.lookahead+O.insert<I)););}while(O.lookahead<G&&O.strm.avail_in!==0)}function Ie(O,he){for(var oe,re;;){if(O.lookahead<G){if(je(O),O.lookahead<G&&he===g)return j;if(O.lookahead===0)break}if(oe=0,O.lookahead>=I&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+I-1])&O.hash_mask,oe=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),oe!==0&&O.strstart-oe<=O.w_size-G&&(O.match_length=ve(O,oe)),O.match_length>=I)if(re=l._tr_tally(O,O.strstart-O.match_start,O.match_length-I),O.lookahead-=O.match_length,O.match_length<=O.max_lazy_match&&O.lookahead>=I){for(O.match_length--;O.strstart++,O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+I-1])&O.hash_mask,oe=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart,--O.match_length!=0;);O.strstart++}else O.strstart+=O.match_length,O.match_length=0,O.ins_h=O.window[O.strstart],O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+1])&O.hash_mask;else re=l._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++;if(re&&(ie(O,!1),O.strm.avail_out===0))return j}return O.insert=O.strstart<I-1?O.strstart:I-1,he===b?(ie(O,!0),O.strm.avail_out===0?P:B):O.last_lit&&(ie(O,!1),O.strm.avail_out===0)?j:X}function Pe(O,he){for(var oe,re,ne;;){if(O.lookahead<G){if(je(O),O.lookahead<G&&he===g)return j;if(O.lookahead===0)break}if(oe=0,O.lookahead>=I&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+I-1])&O.hash_mask,oe=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),O.prev_length=O.match_length,O.prev_match=O.match_start,O.match_length=I-1,oe!==0&&O.prev_length<O.max_lazy_match&&O.strstart-oe<=O.w_size-G&&(O.match_length=ve(O,oe),O.match_length<=5&&(O.strategy===1||O.match_length===I&&4096<O.strstart-O.match_start)&&(O.match_length=I-1)),O.prev_length>=I&&O.match_length<=O.prev_length){for(ne=O.strstart+O.lookahead-I,re=l._tr_tally(O,O.strstart-1-O.prev_match,O.prev_length-I),O.lookahead-=O.prev_length-1,O.prev_length-=2;++O.strstart<=ne&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+I-1])&O.hash_mask,oe=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),--O.prev_length!=0;);if(O.match_available=0,O.match_length=I-1,O.strstart++,re&&(ie(O,!1),O.strm.avail_out===0))return j}else if(O.match_available){if((re=l._tr_tally(O,0,O.window[O.strstart-1]))&&ie(O,!1),O.strstart++,O.lookahead--,O.strm.avail_out===0)return j}else O.match_available=1,O.strstart++,O.lookahead--}return O.match_available&&(re=l._tr_tally(O,0,O.window[O.strstart-1]),O.match_available=0),O.insert=O.strstart<I-1?O.strstart:I-1,he===b?(ie(O,!0),O.strm.avail_out===0?P:B):O.last_lit&&(ie(O,!1),O.strm.avail_out===0)?j:X}function fe(O,he,oe,re,ne){this.good_length=O,this.max_lazy=he,this.nice_length=oe,this.max_chain=re,this.func=ne}function Ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*R),this.dyn_dtree=new s.Buf16(2*(2*E+1)),this.bl_tree=new s.Buf16(2*(2*T+1)),H(this.dyn_ltree),H(this.dyn_dtree),H(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(M+1),this.heap=new s.Buf16(2*N+1),H(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*N+1),H(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function be(O){var he;return O&&O.state?(O.total_in=O.total_out=0,O.data_type=k,(he=O.state).pending=0,he.pending_out=0,he.wrap<0&&(he.wrap=-he.wrap),he.status=he.wrap?U:W,O.adler=he.wrap===2?0:1,he.last_flush=g,l._tr_init(he),y):ee(O,D)}function Fe(O){var he=be(O);return he===y&&(function(oe){oe.window_size=2*oe.w_size,H(oe.head),oe.max_lazy_match=a[oe.level].max_lazy,oe.good_match=a[oe.level].good_length,oe.nice_match=a[oe.level].nice_length,oe.max_chain_length=a[oe.level].max_chain,oe.strstart=0,oe.block_start=0,oe.lookahead=0,oe.insert=0,oe.match_length=oe.prev_length=I-1,oe.match_available=0,oe.ins_h=0})(O.state),he}function $e(O,he,oe,re,ne,ue){if(!O)return D;var Ce=1;if(he===v&&(he=6),re<0?(Ce=0,re=-re):15<re&&(Ce=2,re-=16),ne<1||A<ne||oe!==_||re<8||15<re||he<0||9<he||ue<0||w<ue)return ee(O,D);re===8&&(re=9);var Ne=new Ue;return(O.state=Ne).strm=O,Ne.wrap=Ce,Ne.gzhead=null,Ne.w_bits=re,Ne.w_size=1<<Ne.w_bits,Ne.w_mask=Ne.w_size-1,Ne.hash_bits=ne+7,Ne.hash_size=1<<Ne.hash_bits,Ne.hash_mask=Ne.hash_size-1,Ne.hash_shift=~~((Ne.hash_bits+I-1)/I),Ne.window=new s.Buf8(2*Ne.w_size),Ne.head=new s.Buf16(Ne.hash_size),Ne.prev=new s.Buf16(Ne.w_size),Ne.lit_bufsize=1<<ne+6,Ne.pending_buf_size=4*Ne.lit_bufsize,Ne.pending_buf=new s.Buf8(Ne.pending_buf_size),Ne.d_buf=1*Ne.lit_bufsize,Ne.l_buf=3*Ne.lit_bufsize,Ne.level=he,Ne.strategy=ue,Ne.method=oe,Fe(O)}a=[new fe(0,0,0,0,function(O,he){var oe=65535;for(oe>O.pending_buf_size-5&&(oe=O.pending_buf_size-5);;){if(O.lookahead<=1){if(je(O),O.lookahead===0&&he===g)return j;if(O.lookahead===0)break}O.strstart+=O.lookahead,O.lookahead=0;var re=O.block_start+oe;if((O.strstart===0||O.strstart>=re)&&(O.lookahead=O.strstart-re,O.strstart=re,ie(O,!1),O.strm.avail_out===0)||O.strstart-O.block_start>=O.w_size-G&&(ie(O,!1),O.strm.avail_out===0))return j}return O.insert=0,he===b?(ie(O,!0),O.strm.avail_out===0?P:B):(O.strstart>O.block_start&&(ie(O,!1),O.strm.avail_out),j)}),new fe(4,4,8,4,Ie),new fe(4,5,16,8,Ie),new fe(4,6,32,32,Ie),new fe(4,4,16,16,Pe),new fe(8,16,32,32,Pe),new fe(8,16,128,128,Pe),new fe(8,32,128,256,Pe),new fe(32,128,258,1024,Pe),new fe(32,258,258,4096,Pe)],i.deflateInit=function(O,he){return $e(O,he,_,15,8,0)},i.deflateInit2=$e,i.deflateReset=Fe,i.deflateResetKeep=be,i.deflateSetHeader=function(O,he){return O&&O.state?O.state.wrap!==2?D:(O.state.gzhead=he,y):D},i.deflate=function(O,he){var oe,re,ne,ue;if(!O||!O.state||5<he||he<0)return O?ee(O,D):D;if(re=O.state,!O.output||!O.input&&O.avail_in!==0||re.status===666&&he!==b)return ee(O,O.avail_out===0?-5:D);if(re.strm=O,oe=re.last_flush,re.last_flush=he,re.status===U)if(re.wrap===2)O.adler=0,z(re,31),z(re,139),z(re,8),re.gzhead?(z(re,(re.gzhead.text?1:0)+(re.gzhead.hcrc?2:0)+(re.gzhead.extra?4:0)+(re.gzhead.name?8:0)+(re.gzhead.comment?16:0)),z(re,255&re.gzhead.time),z(re,re.gzhead.time>>8&255),z(re,re.gzhead.time>>16&255),z(re,re.gzhead.time>>24&255),z(re,re.level===9?2:2<=re.strategy||re.level<2?4:0),z(re,255&re.gzhead.os),re.gzhead.extra&&re.gzhead.extra.length&&(z(re,255&re.gzhead.extra.length),z(re,re.gzhead.extra.length>>8&255)),re.gzhead.hcrc&&(O.adler=d(O.adler,re.pending_buf,re.pending,0)),re.gzindex=0,re.status=69):(z(re,0),z(re,0),z(re,0),z(re,0),z(re,0),z(re,re.level===9?2:2<=re.strategy||re.level<2?4:0),z(re,3),re.status=W);else{var Ce=_+(re.w_bits-8<<4)<<8;Ce|=(2<=re.strategy||re.level<2?0:re.level<6?1:re.level===6?2:3)<<6,re.strstart!==0&&(Ce|=32),Ce+=31-Ce%31,re.status=W,ge(re,Ce),re.strstart!==0&&(ge(re,O.adler>>>16),ge(re,65535&O.adler)),O.adler=1}if(re.status===69)if(re.gzhead.extra){for(ne=re.pending;re.gzindex<(65535&re.gzhead.extra.length)&&(re.pending!==re.pending_buf_size||(re.gzhead.hcrc&&re.pending>ne&&(O.adler=d(O.adler,re.pending_buf,re.pending-ne,ne)),J(O),ne=re.pending,re.pending!==re.pending_buf_size));)z(re,255&re.gzhead.extra[re.gzindex]),re.gzindex++;re.gzhead.hcrc&&re.pending>ne&&(O.adler=d(O.adler,re.pending_buf,re.pending-ne,ne)),re.gzindex===re.gzhead.extra.length&&(re.gzindex=0,re.status=73)}else re.status=73;if(re.status===73)if(re.gzhead.name){ne=re.pending;do{if(re.pending===re.pending_buf_size&&(re.gzhead.hcrc&&re.pending>ne&&(O.adler=d(O.adler,re.pending_buf,re.pending-ne,ne)),J(O),ne=re.pending,re.pending===re.pending_buf_size)){ue=1;break}ue=re.gzindex<re.gzhead.name.length?255&re.gzhead.name.charCodeAt(re.gzindex++):0,z(re,ue)}while(ue!==0);re.gzhead.hcrc&&re.pending>ne&&(O.adler=d(O.adler,re.pending_buf,re.pending-ne,ne)),ue===0&&(re.gzindex=0,re.status=91)}else re.status=91;if(re.status===91)if(re.gzhead.comment){ne=re.pending;do{if(re.pending===re.pending_buf_size&&(re.gzhead.hcrc&&re.pending>ne&&(O.adler=d(O.adler,re.pending_buf,re.pending-ne,ne)),J(O),ne=re.pending,re.pending===re.pending_buf_size)){ue=1;break}ue=re.gzindex<re.gzhead.comment.length?255&re.gzhead.comment.charCodeAt(re.gzindex++):0,z(re,ue)}while(ue!==0);re.gzhead.hcrc&&re.pending>ne&&(O.adler=d(O.adler,re.pending_buf,re.pending-ne,ne)),ue===0&&(re.status=103)}else re.status=103;if(re.status===103&&(re.gzhead.hcrc?(re.pending+2>re.pending_buf_size&&J(O),re.pending+2<=re.pending_buf_size&&(z(re,255&O.adler),z(re,O.adler>>8&255),O.adler=0,re.status=W)):re.status=W),re.pending!==0){if(J(O),O.avail_out===0)return re.last_flush=-1,y}else if(O.avail_in===0&&K(he)<=K(oe)&&he!==b)return ee(O,-5);if(re.status===666&&O.avail_in!==0)return ee(O,-5);if(O.avail_in!==0||re.lookahead!==0||he!==g&&re.status!==666){var Ne=re.strategy===2?(function(pe,se){for(var de;;){if(pe.lookahead===0&&(je(pe),pe.lookahead===0)){if(se===g)return j;break}if(pe.match_length=0,de=l._tr_tally(pe,0,pe.window[pe.strstart]),pe.lookahead--,pe.strstart++,de&&(ie(pe,!1),pe.strm.avail_out===0))return j}return pe.insert=0,se===b?(ie(pe,!0),pe.strm.avail_out===0?P:B):pe.last_lit&&(ie(pe,!1),pe.strm.avail_out===0)?j:X})(re,he):re.strategy===3?(function(pe,se){for(var de,xe,ae,ke,Me=pe.window;;){if(pe.lookahead<=F){if(je(pe),pe.lookahead<=F&&se===g)return j;if(pe.lookahead===0)break}if(pe.match_length=0,pe.lookahead>=I&&0<pe.strstart&&(xe=Me[ae=pe.strstart-1])===Me[++ae]&&xe===Me[++ae]&&xe===Me[++ae]){ke=pe.strstart+F;do;while(xe===Me[++ae]&&xe===Me[++ae]&&xe===Me[++ae]&&xe===Me[++ae]&&xe===Me[++ae]&&xe===Me[++ae]&&xe===Me[++ae]&&xe===Me[++ae]&&ae<ke);pe.match_length=F-(ke-ae),pe.match_length>pe.lookahead&&(pe.match_length=pe.lookahead)}if(pe.match_length>=I?(de=l._tr_tally(pe,1,pe.match_length-I),pe.lookahead-=pe.match_length,pe.strstart+=pe.match_length,pe.match_length=0):(de=l._tr_tally(pe,0,pe.window[pe.strstart]),pe.lookahead--,pe.strstart++),de&&(ie(pe,!1),pe.strm.avail_out===0))return j}return pe.insert=0,se===b?(ie(pe,!0),pe.strm.avail_out===0?P:B):pe.last_lit&&(ie(pe,!1),pe.strm.avail_out===0)?j:X})(re,he):a[re.level].func(re,he);if(Ne!==P&&Ne!==B||(re.status=666),Ne===j||Ne===P)return O.avail_out===0&&(re.last_flush=-1),y;if(Ne===X&&(he===1?l._tr_align(re):he!==5&&(l._tr_stored_block(re,0,0,!1),he===3&&(H(re.head),re.lookahead===0&&(re.strstart=0,re.block_start=0,re.insert=0))),J(O),O.avail_out===0))return re.last_flush=-1,y}return he!==b?y:re.wrap<=0?1:(re.wrap===2?(z(re,255&O.adler),z(re,O.adler>>8&255),z(re,O.adler>>16&255),z(re,O.adler>>24&255),z(re,255&O.total_in),z(re,O.total_in>>8&255),z(re,O.total_in>>16&255),z(re,O.total_in>>24&255)):(ge(re,O.adler>>>16),ge(re,65535&O.adler)),J(O),0<re.wrap&&(re.wrap=-re.wrap),re.pending!==0?y:1)},i.deflateEnd=function(O){var he;return O&&O.state?(he=O.state.status)!==U&&he!==69&&he!==73&&he!==91&&he!==103&&he!==W&&he!==666?ee(O,D):(O.state=null,he===W?ee(O,-3):y):D},i.deflateSetDictionary=function(O,he){var oe,re,ne,ue,Ce,Ne,pe,se,de=he.length;if(!O||!O.state||(ue=(oe=O.state).wrap)===2||ue===1&&oe.status!==U||oe.lookahead)return D;for(ue===1&&(O.adler=u(O.adler,he,de,0)),oe.wrap=0,de>=oe.w_size&&(ue===0&&(H(oe.head),oe.strstart=0,oe.block_start=0,oe.insert=0),se=new s.Buf8(oe.w_size),s.arraySet(se,he,de-oe.w_size,oe.w_size,0),he=se,de=oe.w_size),Ce=O.avail_in,Ne=O.next_in,pe=O.input,O.avail_in=de,O.next_in=0,O.input=he,je(oe);oe.lookahead>=I;){for(re=oe.strstart,ne=oe.lookahead-(I-1);oe.ins_h=(oe.ins_h<<oe.hash_shift^oe.window[re+I-1])&oe.hash_mask,oe.prev[re&oe.w_mask]=oe.head[oe.ins_h],oe.head[oe.ins_h]=re,re++,--ne;);oe.strstart=re,oe.lookahead=I-1,je(oe)}return oe.strstart+=oe.lookahead,oe.block_start=oe.strstart,oe.insert=oe.lookahead,oe.lookahead=0,oe.match_length=oe.prev_length=I-1,oe.match_available=0,O.next_in=Ne,O.input=pe,O.avail_in=Ce,oe.wrap=ue,y},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,i){n.exports=function(a,s){var l,u,d,h,g,b,y,D,v,w,k,_,A,N,E,T,R,M,I,F,G,U,W,j,X;l=a.state,u=a.next_in,j=a.input,d=u+(a.avail_in-5),h=a.next_out,X=a.output,g=h-(s-a.avail_out),b=h+(a.avail_out-257),y=l.dmax,D=l.wsize,v=l.whave,w=l.wnext,k=l.window,_=l.hold,A=l.bits,N=l.lencode,E=l.distcode,T=(1<<l.lenbits)-1,R=(1<<l.distbits)-1;e:do{A<15&&(_+=j[u++]<<A,A+=8,_+=j[u++]<<A,A+=8),M=N[_&T];t:for(;;){if(_>>>=I=M>>>24,A-=I,(I=M>>>16&255)===0)X[h++]=65535&M;else{if(!(16&I)){if((64&I)==0){M=N[(65535&M)+(_&(1<<I)-1)];continue t}if(32&I){l.mode=12;break e}a.msg="invalid literal/length code",l.mode=30;break e}F=65535&M,(I&=15)&&(A<I&&(_+=j[u++]<<A,A+=8),F+=_&(1<<I)-1,_>>>=I,A-=I),A<15&&(_+=j[u++]<<A,A+=8,_+=j[u++]<<A,A+=8),M=E[_&R];n:for(;;){if(_>>>=I=M>>>24,A-=I,!(16&(I=M>>>16&255))){if((64&I)==0){M=E[(65535&M)+(_&(1<<I)-1)];continue n}a.msg="invalid distance code",l.mode=30;break e}if(G=65535&M,A<(I&=15)&&(_+=j[u++]<<A,(A+=8)<I&&(_+=j[u++]<<A,A+=8)),y<(G+=_&(1<<I)-1)){a.msg="invalid distance too far back",l.mode=30;break e}if(_>>>=I,A-=I,(I=h-g)<G){if(v<(I=G-I)&&l.sane){a.msg="invalid distance too far back",l.mode=30;break e}if(W=k,(U=0)===w){if(U+=D-I,I<F){for(F-=I;X[h++]=k[U++],--I;);U=h-G,W=X}}else if(w<I){if(U+=D+w-I,(I-=w)<F){for(F-=I;X[h++]=k[U++],--I;);if(U=0,w<F){for(F-=I=w;X[h++]=k[U++],--I;);U=h-G,W=X}}}else if(U+=w-I,I<F){for(F-=I;X[h++]=k[U++],--I;);U=h-G,W=X}for(;2<F;)X[h++]=W[U++],X[h++]=W[U++],X[h++]=W[U++],F-=3;F&&(X[h++]=W[U++],1<F&&(X[h++]=W[U++]))}else{for(U=h-G;X[h++]=X[U++],X[h++]=X[U++],X[h++]=X[U++],2<(F-=3););F&&(X[h++]=X[U++],1<F&&(X[h++]=X[U++]))}break}}break}}while(u<d&&h<b);u-=F=A>>3,_&=(1<<(A-=F<<3))-1,a.next_in=u,a.next_out=h,a.avail_in=u<d?d-u+5:5-(u-d),a.avail_out=h<b?b-h+257:257-(h-b),l.hold=_,l.bits=A}},{}],49:[function(t,n,i){var a=t("../utils/common"),s=t("./adler32"),l=t("./crc32"),u=t("./inffast"),d=t("./inftrees"),h=1,g=2,b=0,y=-2,D=1,v=852,w=592;function k(U){return(U>>>24&255)+(U>>>8&65280)+((65280&U)<<8)+((255&U)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function A(U){var W;return U&&U.state?(W=U.state,U.total_in=U.total_out=W.total=0,U.msg="",W.wrap&&(U.adler=1&W.wrap),W.mode=D,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new a.Buf32(v),W.distcode=W.distdyn=new a.Buf32(w),W.sane=1,W.back=-1,b):y}function N(U){var W;return U&&U.state?((W=U.state).wsize=0,W.whave=0,W.wnext=0,A(U)):y}function E(U,W){var j,X;return U&&U.state?(X=U.state,W<0?(j=0,W=-W):(j=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?y:(X.window!==null&&X.wbits!==W&&(X.window=null),X.wrap=j,X.wbits=W,N(U))):y}function T(U,W){var j,X;return U?(X=new _,(U.state=X).window=null,(j=E(U,W))!==b&&(U.state=null),j):y}var R,M,I=!0;function F(U){if(I){var W;for(R=new a.Buf32(512),M=new a.Buf32(32),W=0;W<144;)U.lens[W++]=8;for(;W<256;)U.lens[W++]=9;for(;W<280;)U.lens[W++]=7;for(;W<288;)U.lens[W++]=8;for(d(h,U.lens,0,288,R,0,U.work,{bits:9}),W=0;W<32;)U.lens[W++]=5;d(g,U.lens,0,32,M,0,U.work,{bits:5}),I=!1}U.lencode=R,U.lenbits=9,U.distcode=M,U.distbits=5}function G(U,W,j,X){var P,B=U.state;return B.window===null&&(B.wsize=1<<B.wbits,B.wnext=0,B.whave=0,B.window=new a.Buf8(B.wsize)),X>=B.wsize?(a.arraySet(B.window,W,j-B.wsize,B.wsize,0),B.wnext=0,B.whave=B.wsize):(X<(P=B.wsize-B.wnext)&&(P=X),a.arraySet(B.window,W,j-X,P,B.wnext),(X-=P)?(a.arraySet(B.window,W,j-X,X,0),B.wnext=X,B.whave=B.wsize):(B.wnext+=P,B.wnext===B.wsize&&(B.wnext=0),B.whave<B.wsize&&(B.whave+=P))),0}i.inflateReset=N,i.inflateReset2=E,i.inflateResetKeep=A,i.inflateInit=function(U){return T(U,15)},i.inflateInit2=T,i.inflate=function(U,W){var j,X,P,B,ee,K,H,J,ie,z,ge,ve,je,Ie,Pe,fe,Ue,be,Fe,$e,O,he,oe,re,ne=0,ue=new a.Buf8(4),Ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!U||!U.state||!U.output||!U.input&&U.avail_in!==0)return y;(j=U.state).mode===12&&(j.mode=13),ee=U.next_out,P=U.output,H=U.avail_out,B=U.next_in,X=U.input,K=U.avail_in,J=j.hold,ie=j.bits,z=K,ge=H,he=b;e:for(;;)switch(j.mode){case D:if(j.wrap===0){j.mode=13;break}for(;ie<16;){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}if(2&j.wrap&&J===35615){ue[j.check=0]=255&J,ue[1]=J>>>8&255,j.check=l(j.check,ue,2,0),ie=J=0,j.mode=2;break}if(j.flags=0,j.head&&(j.head.done=!1),!(1&j.wrap)||(((255&J)<<8)+(J>>8))%31){U.msg="incorrect header check",j.mode=30;break}if((15&J)!=8){U.msg="unknown compression method",j.mode=30;break}if(ie-=4,O=8+(15&(J>>>=4)),j.wbits===0)j.wbits=O;else if(O>j.wbits){U.msg="invalid window size",j.mode=30;break}j.dmax=1<<O,U.adler=j.check=1,j.mode=512&J?10:12,ie=J=0;break;case 2:for(;ie<16;){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}if(j.flags=J,(255&j.flags)!=8){U.msg="unknown compression method",j.mode=30;break}if(57344&j.flags){U.msg="unknown header flags set",j.mode=30;break}j.head&&(j.head.text=J>>8&1),512&j.flags&&(ue[0]=255&J,ue[1]=J>>>8&255,j.check=l(j.check,ue,2,0)),ie=J=0,j.mode=3;case 3:for(;ie<32;){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}j.head&&(j.head.time=J),512&j.flags&&(ue[0]=255&J,ue[1]=J>>>8&255,ue[2]=J>>>16&255,ue[3]=J>>>24&255,j.check=l(j.check,ue,4,0)),ie=J=0,j.mode=4;case 4:for(;ie<16;){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}j.head&&(j.head.xflags=255&J,j.head.os=J>>8),512&j.flags&&(ue[0]=255&J,ue[1]=J>>>8&255,j.check=l(j.check,ue,2,0)),ie=J=0,j.mode=5;case 5:if(1024&j.flags){for(;ie<16;){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}j.length=J,j.head&&(j.head.extra_len=J),512&j.flags&&(ue[0]=255&J,ue[1]=J>>>8&255,j.check=l(j.check,ue,2,0)),ie=J=0}else j.head&&(j.head.extra=null);j.mode=6;case 6:if(1024&j.flags&&(K<(ve=j.length)&&(ve=K),ve&&(j.head&&(O=j.head.extra_len-j.length,j.head.extra||(j.head.extra=new Array(j.head.extra_len)),a.arraySet(j.head.extra,X,B,ve,O)),512&j.flags&&(j.check=l(j.check,X,ve,B)),K-=ve,B+=ve,j.length-=ve),j.length))break e;j.length=0,j.mode=7;case 7:if(2048&j.flags){if(K===0)break e;for(ve=0;O=X[B+ve++],j.head&&O&&j.length<65536&&(j.head.name+=String.fromCharCode(O)),O&&ve<K;);if(512&j.flags&&(j.check=l(j.check,X,ve,B)),K-=ve,B+=ve,O)break e}else j.head&&(j.head.name=null);j.length=0,j.mode=8;case 8:if(4096&j.flags){if(K===0)break e;for(ve=0;O=X[B+ve++],j.head&&O&&j.length<65536&&(j.head.comment+=String.fromCharCode(O)),O&&ve<K;);if(512&j.flags&&(j.check=l(j.check,X,ve,B)),K-=ve,B+=ve,O)break e}else j.head&&(j.head.comment=null);j.mode=9;case 9:if(512&j.flags){for(;ie<16;){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}if(J!==(65535&j.check)){U.msg="header crc mismatch",j.mode=30;break}ie=J=0}j.head&&(j.head.hcrc=j.flags>>9&1,j.head.done=!0),U.adler=j.check=0,j.mode=12;break;case 10:for(;ie<32;){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}U.adler=j.check=k(J),ie=J=0,j.mode=11;case 11:if(j.havedict===0)return U.next_out=ee,U.avail_out=H,U.next_in=B,U.avail_in=K,j.hold=J,j.bits=ie,2;U.adler=j.check=1,j.mode=12;case 12:if(W===5||W===6)break e;case 13:if(j.last){J>>>=7&ie,ie-=7&ie,j.mode=27;break}for(;ie<3;){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}switch(j.last=1&J,ie-=1,3&(J>>>=1)){case 0:j.mode=14;break;case 1:if(F(j),j.mode=20,W!==6)break;J>>>=2,ie-=2;break e;case 2:j.mode=17;break;case 3:U.msg="invalid block type",j.mode=30}J>>>=2,ie-=2;break;case 14:for(J>>>=7&ie,ie-=7&ie;ie<32;){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}if((65535&J)!=(J>>>16^65535)){U.msg="invalid stored block lengths",j.mode=30;break}if(j.length=65535&J,ie=J=0,j.mode=15,W===6)break e;case 15:j.mode=16;case 16:if(ve=j.length){if(K<ve&&(ve=K),H<ve&&(ve=H),ve===0)break e;a.arraySet(P,X,B,ve,ee),K-=ve,B+=ve,H-=ve,ee+=ve,j.length-=ve;break}j.mode=12;break;case 17:for(;ie<14;){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}if(j.nlen=257+(31&J),J>>>=5,ie-=5,j.ndist=1+(31&J),J>>>=5,ie-=5,j.ncode=4+(15&J),J>>>=4,ie-=4,286<j.nlen||30<j.ndist){U.msg="too many length or distance symbols",j.mode=30;break}j.have=0,j.mode=18;case 18:for(;j.have<j.ncode;){for(;ie<3;){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}j.lens[Ce[j.have++]]=7&J,J>>>=3,ie-=3}for(;j.have<19;)j.lens[Ce[j.have++]]=0;if(j.lencode=j.lendyn,j.lenbits=7,oe={bits:j.lenbits},he=d(0,j.lens,0,19,j.lencode,0,j.work,oe),j.lenbits=oe.bits,he){U.msg="invalid code lengths set",j.mode=30;break}j.have=0,j.mode=19;case 19:for(;j.have<j.nlen+j.ndist;){for(;fe=(ne=j.lencode[J&(1<<j.lenbits)-1])>>>16&255,Ue=65535&ne,!((Pe=ne>>>24)<=ie);){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}if(Ue<16)J>>>=Pe,ie-=Pe,j.lens[j.have++]=Ue;else{if(Ue===16){for(re=Pe+2;ie<re;){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}if(J>>>=Pe,ie-=Pe,j.have===0){U.msg="invalid bit length repeat",j.mode=30;break}O=j.lens[j.have-1],ve=3+(3&J),J>>>=2,ie-=2}else if(Ue===17){for(re=Pe+3;ie<re;){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}ie-=Pe,O=0,ve=3+(7&(J>>>=Pe)),J>>>=3,ie-=3}else{for(re=Pe+7;ie<re;){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}ie-=Pe,O=0,ve=11+(127&(J>>>=Pe)),J>>>=7,ie-=7}if(j.have+ve>j.nlen+j.ndist){U.msg="invalid bit length repeat",j.mode=30;break}for(;ve--;)j.lens[j.have++]=O}}if(j.mode===30)break;if(j.lens[256]===0){U.msg="invalid code -- missing end-of-block",j.mode=30;break}if(j.lenbits=9,oe={bits:j.lenbits},he=d(h,j.lens,0,j.nlen,j.lencode,0,j.work,oe),j.lenbits=oe.bits,he){U.msg="invalid literal/lengths set",j.mode=30;break}if(j.distbits=6,j.distcode=j.distdyn,oe={bits:j.distbits},he=d(g,j.lens,j.nlen,j.ndist,j.distcode,0,j.work,oe),j.distbits=oe.bits,he){U.msg="invalid distances set",j.mode=30;break}if(j.mode=20,W===6)break e;case 20:j.mode=21;case 21:if(6<=K&&258<=H){U.next_out=ee,U.avail_out=H,U.next_in=B,U.avail_in=K,j.hold=J,j.bits=ie,u(U,ge),ee=U.next_out,P=U.output,H=U.avail_out,B=U.next_in,X=U.input,K=U.avail_in,J=j.hold,ie=j.bits,j.mode===12&&(j.back=-1);break}for(j.back=0;fe=(ne=j.lencode[J&(1<<j.lenbits)-1])>>>16&255,Ue=65535&ne,!((Pe=ne>>>24)<=ie);){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}if(fe&&(240&fe)==0){for(be=Pe,Fe=fe,$e=Ue;fe=(ne=j.lencode[$e+((J&(1<<be+Fe)-1)>>be)])>>>16&255,Ue=65535&ne,!(be+(Pe=ne>>>24)<=ie);){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}J>>>=be,ie-=be,j.back+=be}if(J>>>=Pe,ie-=Pe,j.back+=Pe,j.length=Ue,fe===0){j.mode=26;break}if(32&fe){j.back=-1,j.mode=12;break}if(64&fe){U.msg="invalid literal/length code",j.mode=30;break}j.extra=15&fe,j.mode=22;case 22:if(j.extra){for(re=j.extra;ie<re;){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}j.length+=J&(1<<j.extra)-1,J>>>=j.extra,ie-=j.extra,j.back+=j.extra}j.was=j.length,j.mode=23;case 23:for(;fe=(ne=j.distcode[J&(1<<j.distbits)-1])>>>16&255,Ue=65535&ne,!((Pe=ne>>>24)<=ie);){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}if((240&fe)==0){for(be=Pe,Fe=fe,$e=Ue;fe=(ne=j.distcode[$e+((J&(1<<be+Fe)-1)>>be)])>>>16&255,Ue=65535&ne,!(be+(Pe=ne>>>24)<=ie);){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}J>>>=be,ie-=be,j.back+=be}if(J>>>=Pe,ie-=Pe,j.back+=Pe,64&fe){U.msg="invalid distance code",j.mode=30;break}j.offset=Ue,j.extra=15&fe,j.mode=24;case 24:if(j.extra){for(re=j.extra;ie<re;){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}j.offset+=J&(1<<j.extra)-1,J>>>=j.extra,ie-=j.extra,j.back+=j.extra}if(j.offset>j.dmax){U.msg="invalid distance too far back",j.mode=30;break}j.mode=25;case 25:if(H===0)break e;if(ve=ge-H,j.offset>ve){if((ve=j.offset-ve)>j.whave&&j.sane){U.msg="invalid distance too far back",j.mode=30;break}je=ve>j.wnext?(ve-=j.wnext,j.wsize-ve):j.wnext-ve,ve>j.length&&(ve=j.length),Ie=j.window}else Ie=P,je=ee-j.offset,ve=j.length;for(H<ve&&(ve=H),H-=ve,j.length-=ve;P[ee++]=Ie[je++],--ve;);j.length===0&&(j.mode=21);break;case 26:if(H===0)break e;P[ee++]=j.length,H--,j.mode=21;break;case 27:if(j.wrap){for(;ie<32;){if(K===0)break e;K--,J|=X[B++]<<ie,ie+=8}if(ge-=H,U.total_out+=ge,j.total+=ge,ge&&(U.adler=j.check=j.flags?l(j.check,P,ge,ee-ge):s(j.check,P,ge,ee-ge)),ge=H,(j.flags?J:k(J))!==j.check){U.msg="incorrect data check",j.mode=30;break}ie=J=0}j.mode=28;case 28:if(j.wrap&&j.flags){for(;ie<32;){if(K===0)break e;K--,J+=X[B++]<<ie,ie+=8}if(J!==(4294967295&j.total)){U.msg="incorrect length check",j.mode=30;break}ie=J=0}j.mode=29;case 29:he=1;break e;case 30:he=-3;break e;case 31:return-4;case 32:default:return y}return U.next_out=ee,U.avail_out=H,U.next_in=B,U.avail_in=K,j.hold=J,j.bits=ie,(j.wsize||ge!==U.avail_out&&j.mode<30&&(j.mode<27||W!==4))&&G(U,U.output,U.next_out,ge-U.avail_out)?(j.mode=31,-4):(z-=U.avail_in,ge-=U.avail_out,U.total_in+=z,U.total_out+=ge,j.total+=ge,j.wrap&&ge&&(U.adler=j.check=j.flags?l(j.check,P,ge,U.next_out-ge):s(j.check,P,ge,U.next_out-ge)),U.data_type=j.bits+(j.last?64:0)+(j.mode===12?128:0)+(j.mode===20||j.mode===15?256:0),(z==0&&ge===0||W===4)&&he===b&&(he=-5),he)},i.inflateEnd=function(U){if(!U||!U.state)return y;var W=U.state;return W.window&&(W.window=null),U.state=null,b},i.inflateGetHeader=function(U,W){var j;return U&&U.state?(2&(j=U.state).wrap)==0?y:((j.head=W).done=!1,b):y},i.inflateSetDictionary=function(U,W){var j,X=W.length;return U&&U.state?(j=U.state).wrap!==0&&j.mode!==11?y:j.mode===11&&s(1,W,X,0)!==j.check?-3:G(U,W,X,X)?(j.mode=31,-4):(j.havedict=1,b):y},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,i){var a=t("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(h,g,b,y,D,v,w,k){var _,A,N,E,T,R,M,I,F,G=k.bits,U=0,W=0,j=0,X=0,P=0,B=0,ee=0,K=0,H=0,J=0,ie=null,z=0,ge=new a.Buf16(16),ve=new a.Buf16(16),je=null,Ie=0;for(U=0;U<=15;U++)ge[U]=0;for(W=0;W<y;W++)ge[g[b+W]]++;for(P=G,X=15;1<=X&&ge[X]===0;X--);if(X<P&&(P=X),X===0)return D[v++]=20971520,D[v++]=20971520,k.bits=1,0;for(j=1;j<X&&ge[j]===0;j++);for(P<j&&(P=j),U=K=1;U<=15;U++)if(K<<=1,(K-=ge[U])<0)return-1;if(0<K&&(h===0||X!==1))return-1;for(ve[1]=0,U=1;U<15;U++)ve[U+1]=ve[U]+ge[U];for(W=0;W<y;W++)g[b+W]!==0&&(w[ve[g[b+W]]++]=W);if(R=h===0?(ie=je=w,19):h===1?(ie=s,z-=257,je=l,Ie-=257,256):(ie=u,je=d,-1),U=j,T=v,ee=W=J=0,N=-1,E=(H=1<<(B=P))-1,h===1&&852<H||h===2&&592<H)return 1;for(;;){for(M=U-ee,F=w[W]<R?(I=0,w[W]):w[W]>R?(I=je[Ie+w[W]],ie[z+w[W]]):(I=96,0),_=1<<U-ee,j=A=1<<B;D[T+(J>>ee)+(A-=_)]=M<<24|I<<16|F|0,A!==0;);for(_=1<<U-1;J&_;)_>>=1;if(_!==0?(J&=_-1,J+=_):J=0,W++,--ge[U]==0){if(U===X)break;U=g[b+w[W]]}if(P<U&&(J&E)!==N){for(ee===0&&(ee=P),T+=j,K=1<<(B=U-ee);B+ee<X&&!((K-=ge[B+ee])<=0);)B++,K<<=1;if(H+=1<<B,h===1&&852<H||h===2&&592<H)return 1;D[N=J&E]=P<<24|B<<16|T-v|0}}return J!==0&&(D[T+J]=U-ee<<24|64<<16|0),k.bits=P,0}},{"../utils/common":41}],51:[function(t,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,i){var a=t("../utils/common"),s=0,l=1;function u(ne){for(var ue=ne.length;0<=--ue;)ne[ue]=0}var d=0,h=29,g=256,b=g+1+h,y=30,D=19,v=2*b+1,w=15,k=16,_=7,A=256,N=16,E=17,T=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(2*(b+2));u(G);var U=new Array(2*y);u(U);var W=new Array(512);u(W);var j=new Array(256);u(j);var X=new Array(h);u(X);var P,B,ee,K=new Array(y);function H(ne,ue,Ce,Ne,pe){this.static_tree=ne,this.extra_bits=ue,this.extra_base=Ce,this.elems=Ne,this.max_length=pe,this.has_stree=ne&&ne.length}function J(ne,ue){this.dyn_tree=ne,this.max_code=0,this.stat_desc=ue}function ie(ne){return ne<256?W[ne]:W[256+(ne>>>7)]}function z(ne,ue){ne.pending_buf[ne.pending++]=255&ue,ne.pending_buf[ne.pending++]=ue>>>8&255}function ge(ne,ue,Ce){ne.bi_valid>k-Ce?(ne.bi_buf|=ue<<ne.bi_valid&65535,z(ne,ne.bi_buf),ne.bi_buf=ue>>k-ne.bi_valid,ne.bi_valid+=Ce-k):(ne.bi_buf|=ue<<ne.bi_valid&65535,ne.bi_valid+=Ce)}function ve(ne,ue,Ce){ge(ne,Ce[2*ue],Ce[2*ue+1])}function je(ne,ue){for(var Ce=0;Ce|=1&ne,ne>>>=1,Ce<<=1,0<--ue;);return Ce>>>1}function Ie(ne,ue,Ce){var Ne,pe,se=new Array(w+1),de=0;for(Ne=1;Ne<=w;Ne++)se[Ne]=de=de+Ce[Ne-1]<<1;for(pe=0;pe<=ue;pe++){var xe=ne[2*pe+1];xe!==0&&(ne[2*pe]=je(se[xe]++,xe))}}function Pe(ne){var ue;for(ue=0;ue<b;ue++)ne.dyn_ltree[2*ue]=0;for(ue=0;ue<y;ue++)ne.dyn_dtree[2*ue]=0;for(ue=0;ue<D;ue++)ne.bl_tree[2*ue]=0;ne.dyn_ltree[2*A]=1,ne.opt_len=ne.static_len=0,ne.last_lit=ne.matches=0}function fe(ne){8<ne.bi_valid?z(ne,ne.bi_buf):0<ne.bi_valid&&(ne.pending_buf[ne.pending++]=ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0}function Ue(ne,ue,Ce,Ne){var pe=2*ue,se=2*Ce;return ne[pe]<ne[se]||ne[pe]===ne[se]&&Ne[ue]<=Ne[Ce]}function be(ne,ue,Ce){for(var Ne=ne.heap[Ce],pe=Ce<<1;pe<=ne.heap_len&&(pe<ne.heap_len&&Ue(ue,ne.heap[pe+1],ne.heap[pe],ne.depth)&&pe++,!Ue(ue,Ne,ne.heap[pe],ne.depth));)ne.heap[Ce]=ne.heap[pe],Ce=pe,pe<<=1;ne.heap[Ce]=Ne}function Fe(ne,ue,Ce){var Ne,pe,se,de,xe=0;if(ne.last_lit!==0)for(;Ne=ne.pending_buf[ne.d_buf+2*xe]<<8|ne.pending_buf[ne.d_buf+2*xe+1],pe=ne.pending_buf[ne.l_buf+xe],xe++,Ne===0?ve(ne,pe,ue):(ve(ne,(se=j[pe])+g+1,ue),(de=R[se])!==0&&ge(ne,pe-=X[se],de),ve(ne,se=ie(--Ne),Ce),(de=M[se])!==0&&ge(ne,Ne-=K[se],de)),xe<ne.last_lit;);ve(ne,A,ue)}function $e(ne,ue){var Ce,Ne,pe,se=ue.dyn_tree,de=ue.stat_desc.static_tree,xe=ue.stat_desc.has_stree,ae=ue.stat_desc.elems,ke=-1;for(ne.heap_len=0,ne.heap_max=v,Ce=0;Ce<ae;Ce++)se[2*Ce]!==0?(ne.heap[++ne.heap_len]=ke=Ce,ne.depth[Ce]=0):se[2*Ce+1]=0;for(;ne.heap_len<2;)se[2*(pe=ne.heap[++ne.heap_len]=ke<2?++ke:0)]=1,ne.depth[pe]=0,ne.opt_len--,xe&&(ne.static_len-=de[2*pe+1]);for(ue.max_code=ke,Ce=ne.heap_len>>1;1<=Ce;Ce--)be(ne,se,Ce);for(pe=ae;Ce=ne.heap[1],ne.heap[1]=ne.heap[ne.heap_len--],be(ne,se,1),Ne=ne.heap[1],ne.heap[--ne.heap_max]=Ce,ne.heap[--ne.heap_max]=Ne,se[2*pe]=se[2*Ce]+se[2*Ne],ne.depth[pe]=(ne.depth[Ce]>=ne.depth[Ne]?ne.depth[Ce]:ne.depth[Ne])+1,se[2*Ce+1]=se[2*Ne+1]=pe,ne.heap[1]=pe++,be(ne,se,1),2<=ne.heap_len;);ne.heap[--ne.heap_max]=ne.heap[1],(function(Me,ze){var Xe,at,ye,Re,qe,Ze,Ke=ze.dyn_tree,ft=ze.max_code,xt=ze.stat_desc.static_tree,Zn=ze.stat_desc.has_stree,gi=ze.stat_desc.extra_bits,Yi=ze.stat_desc.extra_base,Y=ze.stat_desc.max_length,te=0;for(Re=0;Re<=w;Re++)Me.bl_count[Re]=0;for(Ke[2*Me.heap[Me.heap_max]+1]=0,Xe=Me.heap_max+1;Xe<v;Xe++)Y<(Re=Ke[2*Ke[2*(at=Me.heap[Xe])+1]+1]+1)&&(Re=Y,te++),Ke[2*at+1]=Re,ft<at||(Me.bl_count[Re]++,qe=0,Yi<=at&&(qe=gi[at-Yi]),Ze=Ke[2*at],Me.opt_len+=Ze*(Re+qe),Zn&&(Me.static_len+=Ze*(xt[2*at+1]+qe)));if(te!==0){do{for(Re=Y-1;Me.bl_count[Re]===0;)Re--;Me.bl_count[Re]--,Me.bl_count[Re+1]+=2,Me.bl_count[Y]--,te-=2}while(0<te);for(Re=Y;Re!==0;Re--)for(at=Me.bl_count[Re];at!==0;)ft<(ye=Me.heap[--Xe])||(Ke[2*ye+1]!==Re&&(Me.opt_len+=(Re-Ke[2*ye+1])*Ke[2*ye],Ke[2*ye+1]=Re),at--)}})(ne,ue),Ie(se,ke,ne.bl_count)}function O(ne,ue,Ce){var Ne,pe,se=-1,de=ue[1],xe=0,ae=7,ke=4;for(de===0&&(ae=138,ke=3),ue[2*(Ce+1)+1]=65535,Ne=0;Ne<=Ce;Ne++)pe=de,de=ue[2*(Ne+1)+1],++xe<ae&&pe===de||(xe<ke?ne.bl_tree[2*pe]+=xe:pe!==0?(pe!==se&&ne.bl_tree[2*pe]++,ne.bl_tree[2*N]++):xe<=10?ne.bl_tree[2*E]++:ne.bl_tree[2*T]++,se=pe,ke=(xe=0)===de?(ae=138,3):pe===de?(ae=6,3):(ae=7,4))}function he(ne,ue,Ce){var Ne,pe,se=-1,de=ue[1],xe=0,ae=7,ke=4;for(de===0&&(ae=138,ke=3),Ne=0;Ne<=Ce;Ne++)if(pe=de,de=ue[2*(Ne+1)+1],!(++xe<ae&&pe===de)){if(xe<ke)for(;ve(ne,pe,ne.bl_tree),--xe!=0;);else pe!==0?(pe!==se&&(ve(ne,pe,ne.bl_tree),xe--),ve(ne,N,ne.bl_tree),ge(ne,xe-3,2)):xe<=10?(ve(ne,E,ne.bl_tree),ge(ne,xe-3,3)):(ve(ne,T,ne.bl_tree),ge(ne,xe-11,7));se=pe,ke=(xe=0)===de?(ae=138,3):pe===de?(ae=6,3):(ae=7,4)}}u(K);var oe=!1;function re(ne,ue,Ce,Ne){ge(ne,(d<<1)+(Ne?1:0),3),(function(pe,se,de,xe){fe(pe),z(pe,de),z(pe,~de),a.arraySet(pe.pending_buf,pe.window,se,de,pe.pending),pe.pending+=de})(ne,ue,Ce)}i._tr_init=function(ne){oe||((function(){var ue,Ce,Ne,pe,se,de=new Array(w+1);for(pe=Ne=0;pe<h-1;pe++)for(X[pe]=Ne,ue=0;ue<1<<R[pe];ue++)j[Ne++]=pe;for(j[Ne-1]=pe,pe=se=0;pe<16;pe++)for(K[pe]=se,ue=0;ue<1<<M[pe];ue++)W[se++]=pe;for(se>>=7;pe<y;pe++)for(K[pe]=se<<7,ue=0;ue<1<<M[pe]-7;ue++)W[256+se++]=pe;for(Ce=0;Ce<=w;Ce++)de[Ce]=0;for(ue=0;ue<=143;)G[2*ue+1]=8,ue++,de[8]++;for(;ue<=255;)G[2*ue+1]=9,ue++,de[9]++;for(;ue<=279;)G[2*ue+1]=7,ue++,de[7]++;for(;ue<=287;)G[2*ue+1]=8,ue++,de[8]++;for(Ie(G,b+1,de),ue=0;ue<y;ue++)U[2*ue+1]=5,U[2*ue]=je(ue,5);P=new H(G,R,g+1,b,w),B=new H(U,M,0,y,w),ee=new H(new Array(0),I,0,D,_)})(),oe=!0),ne.l_desc=new J(ne.dyn_ltree,P),ne.d_desc=new J(ne.dyn_dtree,B),ne.bl_desc=new J(ne.bl_tree,ee),ne.bi_buf=0,ne.bi_valid=0,Pe(ne)},i._tr_stored_block=re,i._tr_flush_block=function(ne,ue,Ce,Ne){var pe,se,de=0;0<ne.level?(ne.strm.data_type===2&&(ne.strm.data_type=(function(xe){var ae,ke=4093624447;for(ae=0;ae<=31;ae++,ke>>>=1)if(1&ke&&xe.dyn_ltree[2*ae]!==0)return s;if(xe.dyn_ltree[18]!==0||xe.dyn_ltree[20]!==0||xe.dyn_ltree[26]!==0)return l;for(ae=32;ae<g;ae++)if(xe.dyn_ltree[2*ae]!==0)return l;return s})(ne)),$e(ne,ne.l_desc),$e(ne,ne.d_desc),de=(function(xe){var ae;for(O(xe,xe.dyn_ltree,xe.l_desc.max_code),O(xe,xe.dyn_dtree,xe.d_desc.max_code),$e(xe,xe.bl_desc),ae=D-1;3<=ae&&xe.bl_tree[2*F[ae]+1]===0;ae--);return xe.opt_len+=3*(ae+1)+5+5+4,ae})(ne),pe=ne.opt_len+3+7>>>3,(se=ne.static_len+3+7>>>3)<=pe&&(pe=se)):pe=se=Ce+5,Ce+4<=pe&&ue!==-1?re(ne,ue,Ce,Ne):ne.strategy===4||se===pe?(ge(ne,2+(Ne?1:0),3),Fe(ne,G,U)):(ge(ne,4+(Ne?1:0),3),(function(xe,ae,ke,Me){var ze;for(ge(xe,ae-257,5),ge(xe,ke-1,5),ge(xe,Me-4,4),ze=0;ze<Me;ze++)ge(xe,xe.bl_tree[2*F[ze]+1],3);he(xe,xe.dyn_ltree,ae-1),he(xe,xe.dyn_dtree,ke-1)})(ne,ne.l_desc.max_code+1,ne.d_desc.max_code+1,de+1),Fe(ne,ne.dyn_ltree,ne.dyn_dtree)),Pe(ne),Ne&&fe(ne)},i._tr_tally=function(ne,ue,Ce){return ne.pending_buf[ne.d_buf+2*ne.last_lit]=ue>>>8&255,ne.pending_buf[ne.d_buf+2*ne.last_lit+1]=255&ue,ne.pending_buf[ne.l_buf+ne.last_lit]=255&Ce,ne.last_lit++,ue===0?ne.dyn_ltree[2*Ce]++:(ne.matches++,ue--,ne.dyn_ltree[2*(j[Ce]+g+1)]++,ne.dyn_dtree[2*ie(ue)]++),ne.last_lit===ne.lit_bufsize-1},i._tr_align=function(ne){ge(ne,2,3),ve(ne,A,G),(function(ue){ue.bi_valid===16?(z(ue,ue.bi_buf),ue.bi_buf=0,ue.bi_valid=0):8<=ue.bi_valid&&(ue.pending_buf[ue.pending++]=255&ue.bi_buf,ue.bi_buf>>=8,ue.bi_valid-=8)})(ne)}},{"../utils/common":41}],53:[function(t,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,i){(function(a){(function(s,l){if(!s.setImmediate){var u,d,h,g,b=1,y={},D=!1,v=s.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(s);w=w&&w.setTimeout?w:s,u={}.toString.call(s.process)==="[object process]"?function(N){process.nextTick(function(){_(N)})}:(function(){if(s.postMessage&&!s.importScripts){var N=!0,E=s.onmessage;return s.onmessage=function(){N=!1},s.postMessage("","*"),s.onmessage=E,N}})()?(g="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",A,!1):s.attachEvent("onmessage",A),function(N){s.postMessage(g+N,"*")}):s.MessageChannel?((h=new MessageChannel).port1.onmessage=function(N){_(N.data)},function(N){h.port2.postMessage(N)}):v&&"onreadystatechange"in v.createElement("script")?(d=v.documentElement,function(N){var E=v.createElement("script");E.onreadystatechange=function(){_(N),E.onreadystatechange=null,d.removeChild(E),E=null},d.appendChild(E)}):function(N){setTimeout(_,0,N)},w.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var E=new Array(arguments.length-1),T=0;T<E.length;T++)E[T]=arguments[T+1];var R={callback:N,args:E};return y[b]=R,u(b),b++},w.clearImmediate=k}function k(N){delete y[N]}function _(N){if(D)setTimeout(_,0,N);else{var E=y[N];if(E){D=!0;try{(function(T){var R=T.callback,M=T.args;switch(M.length){case 0:R();break;case 1:R(M[0]);break;case 2:R(M[0],M[1]);break;case 3:R(M[0],M[1],M[2]);break;default:R.apply(l,M)}})(E)}finally{k(N),D=!1}}}}function A(N){N.source===s&&typeof N.data=="string"&&N.data.indexOf(g)===0&&_(+N.data.slice(g.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof Cc<"u"?Cc:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ak)),Ak.exports}var MN;function Nj(){if(MN)return Dg;MN=1;var r=JB(),e=eP();Dg.openArrayBuffer=t,Dg.splitPath=n,Dg.joinPath=i;function t(a){return e.loadAsync(a).then(function(s){function l(g){return s.file(g)!==null}function u(g,b){return s.file(g).async("uint8array").then(function(y){if(b==="base64")return r.fromByteArray(y);if(b){var D=new TextDecoder(b);return D.decode(y)}else return y})}function d(g,b){s.file(g,b)}function h(){return s.generateAsync({type:"arraybuffer"})}return{exists:l,read:u,write:d,toArrayBuffer:h}})}function n(a){var s=a.lastIndexOf("/");return s===-1?{dirname:"",basename:a}:{dirname:a.substring(0,s),basename:a.substring(s+1)}}function i(){var a=Array.prototype.filter.call(arguments,function(l){return l}),s=[];return a.forEach(function(l){/^\//.test(l)?s=[l]:s.push(l)}),s.join("/")}return Dg}var jx={},Ul={},Sh={},LN;function Uj(){if(LN)return Sh;LN=1;var r=Cn;Sh.Element=t,Sh.element=function(a,s,l){return new t(a,s,l)},Sh.text=function(a){return{type:"text",value:a}};var e=Sh.emptyElement={first:function(){return null},firstOrEmpty:function(){return e},attributes:{},children:[]};function t(a,s,l){this.type="element",this.name=a,this.attributes=s||{},this.children=l||[]}t.prototype.first=function(a){return r.find(this.children,function(s){return s.name===a})},t.prototype.firstOrEmpty=function(a){return this.first(a)||e},t.prototype.getElementsByTagName=function(a){var s=r.filter(this.children,function(l){return l.name===a});return i(s)},t.prototype.text=function(){if(this.children.length===0)return"";if(this.children.length!==1||this.children[0].type!=="text")throw new Error("Not implemented");return this.children[0].value};var n={getElementsByTagName:function(a){return i(r.flatten(this.map(function(s){return s.getElementsByTagName(a)},!0)))}};function i(a){return r.extend(a,n)}return Sh}var Sk={},Fx={},Ag={},no={},cu={},BN;function av(){if(BN)return cu;BN=1;function r(a,s,l){if(l===void 0&&(l=Array.prototype),a&&typeof l.find=="function")return l.find.call(a,s);for(var u=0;u<a.length;u++)if(Object.prototype.hasOwnProperty.call(a,u)){var d=a[u];if(s.call(void 0,d,u,a))return d}}function e(a,s){return s===void 0&&(s=Object),s&&typeof s.freeze=="function"?s.freeze(a):a}function t(a,s){if(a===null||typeof a!="object")throw new TypeError("target is not an object");for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(a[l]=s[l]);return a}var n=e({HTML:"text/html",isHTML:function(a){return a===n.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),i=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(a){return a===i.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return cu.assign=t,cu.find=r,cu.freeze=e,cu.MIME_TYPE=n,cu.NAMESPACE=i,cu}var PN;function aS(){if(PN)return no;PN=1;var r=av(),e=r.find,t=r.NAMESPACE;function n(Y){return Y!==""}function i(Y){return Y?Y.split(/[\t\n\f\r ]+/).filter(n):[]}function a(Y,te){return Y.hasOwnProperty(te)||(Y[te]=!0),Y}function s(Y){if(!Y)return[];var te=i(Y);return Object.keys(te.reduce(a,{}))}function l(Y){return function(te){return Y&&Y.indexOf(te)!==-1}}function u(Y,te){for(var ce in Y)Object.prototype.hasOwnProperty.call(Y,ce)&&(te[ce]=Y[ce])}function d(Y,te){var ce=Y.prototype;if(!(ce instanceof te)){let Ee=function(){};Ee.prototype=te.prototype,Ee=new Ee,u(ce,Ee),Y.prototype=ce=Ee}ce.constructor!=Y&&(typeof Y!="function"&&console.error("unknown Class:"+Y),ce.constructor=Y)}var h={},g=h.ELEMENT_NODE=1,b=h.ATTRIBUTE_NODE=2,y=h.TEXT_NODE=3,D=h.CDATA_SECTION_NODE=4,v=h.ENTITY_REFERENCE_NODE=5,w=h.ENTITY_NODE=6,k=h.PROCESSING_INSTRUCTION_NODE=7,_=h.COMMENT_NODE=8,A=h.DOCUMENT_NODE=9,N=h.DOCUMENT_TYPE_NODE=10,E=h.DOCUMENT_FRAGMENT_NODE=11,T=h.NOTATION_NODE=12,R={},M={};R.INDEX_SIZE_ERR=(M[1]="Index size error",1),R.DOMSTRING_SIZE_ERR=(M[2]="DOMString size error",2);var I=R.HIERARCHY_REQUEST_ERR=(M[3]="Hierarchy request error",3);R.WRONG_DOCUMENT_ERR=(M[4]="Wrong document",4),R.INVALID_CHARACTER_ERR=(M[5]="Invalid character",5),R.NO_DATA_ALLOWED_ERR=(M[6]="No data allowed",6),R.NO_MODIFICATION_ALLOWED_ERR=(M[7]="No modification allowed",7);var F=R.NOT_FOUND_ERR=(M[8]="Not found",8);R.NOT_SUPPORTED_ERR=(M[9]="Not supported",9);var G=R.INUSE_ATTRIBUTE_ERR=(M[10]="Attribute in use",10);R.INVALID_STATE_ERR=(M[11]="Invalid state",11),R.SYNTAX_ERR=(M[12]="Syntax error",12),R.INVALID_MODIFICATION_ERR=(M[13]="Invalid modification",13),R.NAMESPACE_ERR=(M[14]="Invalid namespace",14),R.INVALID_ACCESS_ERR=(M[15]="Invalid access",15);function U(Y,te){if(te instanceof Error)var ce=te;else ce=this,Error.call(this,M[Y]),this.message=M[Y],Error.captureStackTrace&&Error.captureStackTrace(this,U);return ce.code=Y,te&&(this.message=this.message+": "+te),ce}U.prototype=Error.prototype,u(R,U);function W(){}W.prototype={length:0,item:function(Y){return Y>=0&&Y<this.length?this[Y]:null},toString:function(Y,te){for(var ce=[],Ee=0;Ee<this.length;Ee++)xt(this[Ee],ce,Y,te);return ce.join("")},filter:function(Y){return Array.prototype.filter.call(this,Y)},indexOf:function(Y){return Array.prototype.indexOf.call(this,Y)}};function j(Y,te){this._node=Y,this._refresh=te,X(this)}function X(Y){var te=Y._node._inc||Y._node.ownerDocument._inc;if(Y._inc!==te){var ce=Y._refresh(Y._node);if(Yi(Y,"length",ce.length),!Y.$$length||ce.length<Y.$$length)for(var Ee=ce.length;Ee in Y;Ee++)Object.prototype.hasOwnProperty.call(Y,Ee)&&delete Y[Ee];u(ce,Y),Y._inc=te}}j.prototype.item=function(Y){return X(this),this[Y]||null},d(j,W);function P(){}function B(Y,te){for(var ce=Y.length;ce--;)if(Y[ce]===te)return ce}function ee(Y,te,ce,Ee){if(Ee?te[B(te,Ee)]=ce:te[te.length++]=ce,Y){ce.ownerElement=Y;var Ve=Y.ownerDocument;Ve&&(Ee&&je(Ve,Y,Ee),ve(Ve,Y,ce))}}function K(Y,te,ce){var Ee=B(te,ce);if(Ee>=0){for(var Ve=te.length-1;Ee<Ve;)te[Ee]=te[++Ee];if(te.length=Ve,Y){var ot=Y.ownerDocument;ot&&(je(ot,Y,ce),ce.ownerElement=null)}}else throw new U(F,new Error(Y.tagName+"@"+ce))}P.prototype={length:0,item:W.prototype.item,getNamedItem:function(Y){for(var te=this.length;te--;){var ce=this[te];if(ce.nodeName==Y)return ce}},setNamedItem:function(Y){var te=Y.ownerElement;if(te&&te!=this._ownerElement)throw new U(G);var ce=this.getNamedItem(Y.nodeName);return ee(this._ownerElement,this,Y,ce),ce},setNamedItemNS:function(Y){var te=Y.ownerElement,ce;if(te&&te!=this._ownerElement)throw new U(G);return ce=this.getNamedItemNS(Y.namespaceURI,Y.localName),ee(this._ownerElement,this,Y,ce),ce},removeNamedItem:function(Y){var te=this.getNamedItem(Y);return K(this._ownerElement,this,te),te},removeNamedItemNS:function(Y,te){var ce=this.getNamedItemNS(Y,te);return K(this._ownerElement,this,ce),ce},getNamedItemNS:function(Y,te){for(var ce=this.length;ce--;){var Ee=this[ce];if(Ee.localName==te&&Ee.namespaceURI==Y)return Ee}return null}};function H(){}H.prototype={hasFeature:function(Y,te){return!0},createDocument:function(Y,te,ce){var Ee=new ge;if(Ee.implementation=this,Ee.childNodes=new W,Ee.doctype=ce||null,ce&&Ee.appendChild(ce),te){var Ve=Ee.createElementNS(Y,te);Ee.appendChild(Ve)}return Ee},createDocumentType:function(Y,te,ce){var Ee=new Me;return Ee.name=Y,Ee.nodeName=Y,Ee.publicId=te||"",Ee.systemId=ce||"",Ee}};function J(){}J.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(Y,te){return ue(this,Y,te)},replaceChild:function(Y,te){ue(this,Y,te,ne),te&&this.removeChild(te)},removeChild:function(Y){return Pe(this,Y)},appendChild:function(Y){return this.insertBefore(Y,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(Y){return gi(this.ownerDocument||this,this,Y)},normalize:function(){for(var Y=this.firstChild;Y;){var te=Y.nextSibling;te&&te.nodeType==y&&Y.nodeType==y?(this.removeChild(te),Y.appendData(te.data)):(Y.normalize(),Y=te)}},isSupported:function(Y,te){return this.ownerDocument.implementation.hasFeature(Y,te)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(Y){for(var te=this;te;){var ce=te._nsMap;if(ce){for(var Ee in ce)if(Object.prototype.hasOwnProperty.call(ce,Ee)&&ce[Ee]===Y)return Ee}te=te.nodeType==b?te.ownerDocument:te.parentNode}return null},lookupNamespaceURI:function(Y){for(var te=this;te;){var ce=te._nsMap;if(ce&&Object.prototype.hasOwnProperty.call(ce,Y))return ce[Y];te=te.nodeType==b?te.ownerDocument:te.parentNode}return null},isDefaultNamespace:function(Y){var te=this.lookupPrefix(Y);return te==null}};function ie(Y){return Y=="<"&&"&lt;"||Y==">"&&"&gt;"||Y=="&"&&"&amp;"||Y=='"'&&"&quot;"||"&#"+Y.charCodeAt()+";"}u(h,J),u(h,J.prototype);function z(Y,te){if(te(Y))return!0;if(Y=Y.firstChild)do if(z(Y,te))return!0;while(Y=Y.nextSibling)}function ge(){this.ownerDocument=this}function ve(Y,te,ce){Y&&Y._inc++;var Ee=ce.namespaceURI;Ee===t.XMLNS&&(te._nsMap[ce.prefix?ce.localName:""]=ce.value)}function je(Y,te,ce,Ee){Y&&Y._inc++;var Ve=ce.namespaceURI;Ve===t.XMLNS&&delete te._nsMap[ce.prefix?ce.localName:""]}function Ie(Y,te,ce){if(Y&&Y._inc){Y._inc++;var Ee=te.childNodes;if(ce)Ee[Ee.length++]=ce;else{for(var Ve=te.firstChild,ot=0;Ve;)Ee[ot++]=Ve,Ve=Ve.nextSibling;Ee.length=ot,delete Ee[Ee.length]}}}function Pe(Y,te){var ce=te.previousSibling,Ee=te.nextSibling;return ce?ce.nextSibling=Ee:Y.firstChild=Ee,Ee?Ee.previousSibling=ce:Y.lastChild=ce,te.parentNode=null,te.previousSibling=null,te.nextSibling=null,Ie(Y.ownerDocument,Y),te}function fe(Y){return Y&&(Y.nodeType===J.DOCUMENT_NODE||Y.nodeType===J.DOCUMENT_FRAGMENT_NODE||Y.nodeType===J.ELEMENT_NODE)}function Ue(Y){return Y&&(Fe(Y)||$e(Y)||be(Y)||Y.nodeType===J.DOCUMENT_FRAGMENT_NODE||Y.nodeType===J.COMMENT_NODE||Y.nodeType===J.PROCESSING_INSTRUCTION_NODE)}function be(Y){return Y&&Y.nodeType===J.DOCUMENT_TYPE_NODE}function Fe(Y){return Y&&Y.nodeType===J.ELEMENT_NODE}function $e(Y){return Y&&Y.nodeType===J.TEXT_NODE}function O(Y,te){var ce=Y.childNodes||[];if(e(ce,Fe)||be(te))return!1;var Ee=e(ce,be);return!(te&&Ee&&ce.indexOf(Ee)>ce.indexOf(te))}function he(Y,te){var ce=Y.childNodes||[];function Ee(ot){return Fe(ot)&&ot!==te}if(e(ce,Ee))return!1;var Ve=e(ce,be);return!(te&&Ve&&ce.indexOf(Ve)>ce.indexOf(te))}function oe(Y,te,ce){if(!fe(Y))throw new U(I,"Unexpected parent node type "+Y.nodeType);if(ce&&ce.parentNode!==Y)throw new U(F,"child not in parent");if(!Ue(te)||be(te)&&Y.nodeType!==J.DOCUMENT_NODE)throw new U(I,"Unexpected node type "+te.nodeType+" for parent node type "+Y.nodeType)}function re(Y,te,ce){var Ee=Y.childNodes||[],Ve=te.childNodes||[];if(te.nodeType===J.DOCUMENT_FRAGMENT_NODE){var ot=Ve.filter(Fe);if(ot.length>1||e(Ve,$e))throw new U(I,"More than one element or text in fragment");if(ot.length===1&&!O(Y,ce))throw new U(I,"Element in fragment can not be inserted before doctype")}if(Fe(te)&&!O(Y,ce))throw new U(I,"Only one element can be added and only after doctype");if(be(te)){if(e(Ee,be))throw new U(I,"Only one doctype is allowed");var Xt=e(Ee,Fe);if(ce&&Ee.indexOf(Xt)<Ee.indexOf(ce))throw new U(I,"Doctype can only be inserted before an element");if(!ce&&Xt)throw new U(I,"Doctype can not be appended since element is present")}}function ne(Y,te,ce){var Ee=Y.childNodes||[],Ve=te.childNodes||[];if(te.nodeType===J.DOCUMENT_FRAGMENT_NODE){var ot=Ve.filter(Fe);if(ot.length>1||e(Ve,$e))throw new U(I,"More than one element or text in fragment");if(ot.length===1&&!he(Y,ce))throw new U(I,"Element in fragment can not be inserted before doctype")}if(Fe(te)&&!he(Y,ce))throw new U(I,"Only one element can be added and only after doctype");if(be(te)){if(e(Ee,function(Nn){return be(Nn)&&Nn!==ce}))throw new U(I,"Only one doctype is allowed");var Xt=e(Ee,Fe);if(ce&&Ee.indexOf(Xt)<Ee.indexOf(ce))throw new U(I,"Doctype can only be inserted before an element")}}function ue(Y,te,ce,Ee){oe(Y,te,ce),Y.nodeType===J.DOCUMENT_NODE&&(Ee||re)(Y,te,ce);var Ve=te.parentNode;if(Ve&&Ve.removeChild(te),te.nodeType===E){var ot=te.firstChild;if(ot==null)return te;var Xt=te.lastChild}else ot=Xt=te;var Sr=ce?ce.previousSibling:Y.lastChild;ot.previousSibling=Sr,Xt.nextSibling=ce,Sr?Sr.nextSibling=ot:Y.firstChild=ot,ce==null?Y.lastChild=Xt:ce.previousSibling=Xt;do{ot.parentNode=Y;var Nn=Y.ownerDocument||Y;Ce(ot,Nn)}while(ot!==Xt&&(ot=ot.nextSibling));return Ie(Y.ownerDocument||Y,Y),te.nodeType==E&&(te.firstChild=te.lastChild=null),te}function Ce(Y,te){if(Y.ownerDocument!==te){if(Y.ownerDocument=te,Y.nodeType===g&&Y.attributes)for(var ce=0;ce<Y.attributes.length;ce++){var Ee=Y.attributes.item(ce);Ee&&(Ee.ownerDocument=te)}for(var Ve=Y.firstChild;Ve;)Ce(Ve,te),Ve=Ve.nextSibling}}function Ne(Y,te){te.parentNode&&te.parentNode.removeChild(te),te.parentNode=Y,te.previousSibling=Y.lastChild,te.nextSibling=null,te.previousSibling?te.previousSibling.nextSibling=te:Y.firstChild=te,Y.lastChild=te,Ie(Y.ownerDocument,Y,te);var ce=Y.ownerDocument||Y;return Ce(te,ce),te}ge.prototype={nodeName:"#document",nodeType:A,doctype:null,documentElement:null,_inc:1,insertBefore:function(Y,te){if(Y.nodeType==E){for(var ce=Y.firstChild;ce;){var Ee=ce.nextSibling;this.insertBefore(ce,te),ce=Ee}return Y}return ue(this,Y,te),Ce(Y,this),this.documentElement===null&&Y.nodeType===g&&(this.documentElement=Y),Y},removeChild:function(Y){return this.documentElement==Y&&(this.documentElement=null),Pe(this,Y)},replaceChild:function(Y,te){ue(this,Y,te,ne),Ce(Y,this),te&&this.removeChild(te),Fe(Y)&&(this.documentElement=Y)},importNode:function(Y,te){return Zn(this,Y,te)},getElementById:function(Y){var te=null;return z(this.documentElement,function(ce){if(ce.nodeType==g&&ce.getAttribute("id")==Y)return te=ce,!0}),te},getElementsByClassName:function(Y){var te=s(Y);return new j(this,function(ce){var Ee=[];return te.length>0&&z(ce.documentElement,function(Ve){if(Ve!==ce&&Ve.nodeType===g){var ot=Ve.getAttribute("class");if(ot){var Xt=Y===ot;if(!Xt){var Sr=s(ot);Xt=te.every(l(Sr))}Xt&&Ee.push(Ve)}}}),Ee})},createElement:function(Y){var te=new pe;te.ownerDocument=this,te.nodeName=Y,te.tagName=Y,te.localName=Y,te.childNodes=new W;var ce=te.attributes=new P;return ce._ownerElement=te,te},createDocumentFragment:function(){var Y=new ye;return Y.ownerDocument=this,Y.childNodes=new W,Y},createTextNode:function(Y){var te=new xe;return te.ownerDocument=this,te.appendData(Y),te},createComment:function(Y){var te=new ae;return te.ownerDocument=this,te.appendData(Y),te},createCDATASection:function(Y){var te=new ke;return te.ownerDocument=this,te.appendData(Y),te},createProcessingInstruction:function(Y,te){var ce=new Re;return ce.ownerDocument=this,ce.tagName=ce.nodeName=ce.target=Y,ce.nodeValue=ce.data=te,ce},createAttribute:function(Y){var te=new se;return te.ownerDocument=this,te.name=Y,te.nodeName=Y,te.localName=Y,te.specified=!0,te},createEntityReference:function(Y){var te=new at;return te.ownerDocument=this,te.nodeName=Y,te},createElementNS:function(Y,te){var ce=new pe,Ee=te.split(":"),Ve=ce.attributes=new P;return ce.childNodes=new W,ce.ownerDocument=this,ce.nodeName=te,ce.tagName=te,ce.namespaceURI=Y,Ee.length==2?(ce.prefix=Ee[0],ce.localName=Ee[1]):ce.localName=te,Ve._ownerElement=ce,ce},createAttributeNS:function(Y,te){var ce=new se,Ee=te.split(":");return ce.ownerDocument=this,ce.nodeName=te,ce.name=te,ce.namespaceURI=Y,ce.specified=!0,Ee.length==2?(ce.prefix=Ee[0],ce.localName=Ee[1]):ce.localName=te,ce}},d(ge,J);function pe(){this._nsMap={}}pe.prototype={nodeType:g,hasAttribute:function(Y){return this.getAttributeNode(Y)!=null},getAttribute:function(Y){var te=this.getAttributeNode(Y);return te&&te.value||""},getAttributeNode:function(Y){return this.attributes.getNamedItem(Y)},setAttribute:function(Y,te){var ce=this.ownerDocument.createAttribute(Y);ce.value=ce.nodeValue=""+te,this.setAttributeNode(ce)},removeAttribute:function(Y){var te=this.getAttributeNode(Y);te&&this.removeAttributeNode(te)},appendChild:function(Y){return Y.nodeType===E?this.insertBefore(Y,null):Ne(this,Y)},setAttributeNode:function(Y){return this.attributes.setNamedItem(Y)},setAttributeNodeNS:function(Y){return this.attributes.setNamedItemNS(Y)},removeAttributeNode:function(Y){return this.attributes.removeNamedItem(Y.nodeName)},removeAttributeNS:function(Y,te){var ce=this.getAttributeNodeNS(Y,te);ce&&this.removeAttributeNode(ce)},hasAttributeNS:function(Y,te){return this.getAttributeNodeNS(Y,te)!=null},getAttributeNS:function(Y,te){var ce=this.getAttributeNodeNS(Y,te);return ce&&ce.value||""},setAttributeNS:function(Y,te,ce){var Ee=this.ownerDocument.createAttributeNS(Y,te);Ee.value=Ee.nodeValue=""+ce,this.setAttributeNode(Ee)},getAttributeNodeNS:function(Y,te){return this.attributes.getNamedItemNS(Y,te)},getElementsByTagName:function(Y){return new j(this,function(te){var ce=[];return z(te,function(Ee){Ee!==te&&Ee.nodeType==g&&(Y==="*"||Ee.tagName==Y)&&ce.push(Ee)}),ce})},getElementsByTagNameNS:function(Y,te){return new j(this,function(ce){var Ee=[];return z(ce,function(Ve){Ve!==ce&&Ve.nodeType===g&&(Y==="*"||Ve.namespaceURI===Y)&&(te==="*"||Ve.localName==te)&&Ee.push(Ve)}),Ee})}},ge.prototype.getElementsByTagName=pe.prototype.getElementsByTagName,ge.prototype.getElementsByTagNameNS=pe.prototype.getElementsByTagNameNS,d(pe,J);function se(){}se.prototype.nodeType=b,d(se,J);function de(){}de.prototype={data:"",substringData:function(Y,te){return this.data.substring(Y,Y+te)},appendData:function(Y){Y=this.data+Y,this.nodeValue=this.data=Y,this.length=Y.length},insertData:function(Y,te){this.replaceData(Y,0,te)},appendChild:function(Y){throw new Error(M[I])},deleteData:function(Y,te){this.replaceData(Y,te,"")},replaceData:function(Y,te,ce){var Ee=this.data.substring(0,Y),Ve=this.data.substring(Y+te);ce=Ee+ce+Ve,this.nodeValue=this.data=ce,this.length=ce.length}},d(de,J);function xe(){}xe.prototype={nodeName:"#text",nodeType:y,splitText:function(Y){var te=this.data,ce=te.substring(Y);te=te.substring(0,Y),this.data=this.nodeValue=te,this.length=te.length;var Ee=this.ownerDocument.createTextNode(ce);return this.parentNode&&this.parentNode.insertBefore(Ee,this.nextSibling),Ee}},d(xe,de);function ae(){}ae.prototype={nodeName:"#comment",nodeType:_},d(ae,de);function ke(){}ke.prototype={nodeName:"#cdata-section",nodeType:D},d(ke,de);function Me(){}Me.prototype.nodeType=N,d(Me,J);function ze(){}ze.prototype.nodeType=T,d(ze,J);function Xe(){}Xe.prototype.nodeType=w,d(Xe,J);function at(){}at.prototype.nodeType=v,d(at,J);function ye(){}ye.prototype.nodeName="#document-fragment",ye.prototype.nodeType=E,d(ye,J);function Re(){}Re.prototype.nodeType=k,d(Re,J);function qe(){}qe.prototype.serializeToString=function(Y,te,ce){return Ze.call(Y,te,ce)},J.prototype.toString=Ze;function Ze(Y,te){var ce=[],Ee=this.nodeType==9&&this.documentElement||this,Ve=Ee.prefix,ot=Ee.namespaceURI;if(ot&&Ve==null){var Ve=Ee.lookupPrefix(ot);if(Ve==null)var Xt=[{namespace:ot,prefix:null}]}return xt(this,ce,Y,te,Xt),ce.join("")}function Ke(Y,te,ce){var Ee=Y.prefix||"",Ve=Y.namespaceURI;if(!Ve||Ee==="xml"&&Ve===t.XML||Ve===t.XMLNS)return!1;for(var ot=ce.length;ot--;){var Xt=ce[ot];if(Xt.prefix===Ee)return Xt.namespace!==Ve}return!0}function ft(Y,te,ce){Y.push(" ",te,'="',ce.replace(/[<>&"\t\n\r]/g,ie),'"')}function xt(Y,te,ce,Ee,Ve){if(Ve||(Ve=[]),Ee)if(Y=Ee(Y),Y){if(typeof Y=="string"){te.push(Y);return}}else return;switch(Y.nodeType){case g:var ot=Y.attributes,Xt=ot.length,Un=Y.firstChild,Sr=Y.tagName;ce=t.isHTML(Y.namespaceURI)||ce;var Nn=Sr;if(!ce&&!Y.prefix&&Y.namespaceURI){for(var on,un=0;un<ot.length;un++)if(ot.item(un).name==="xmlns"){on=ot.item(un).value;break}if(!on)for(var Zr=Ve.length-1;Zr>=0;Zr--){var Na=Ve[Zr];if(Na.prefix===""&&Na.namespace===Y.namespaceURI){on=Na.namespace;break}}if(on!==Y.namespaceURI)for(var Zr=Ve.length-1;Zr>=0;Zr--){var Na=Ve[Zr];if(Na.namespace===Y.namespaceURI){Na.prefix&&(Nn=Na.prefix+":"+Sr);break}}}te.push("<",Nn);for(var Bs=0;Bs<Xt;Bs++){var Ki=ot.item(Bs);Ki.prefix=="xmlns"?Ve.push({prefix:Ki.localName,namespace:Ki.value}):Ki.nodeName=="xmlns"&&Ve.push({prefix:"",namespace:Ki.value})}for(var Bs=0;Bs<Xt;Bs++){var Ki=ot.item(Bs);if(Ke(Ki,ce,Ve)){var ts=Ki.prefix||"",Ua=Ki.namespaceURI;ft(te,ts?"xmlns:"+ts:"xmlns",Ua),Ve.push({prefix:ts,namespace:Ua})}xt(Ki,te,ce,Ee,Ve)}if(Sr===Nn&&Ke(Y,ce,Ve)){var ts=Y.prefix||"",Ua=Y.namespaceURI;ft(te,ts?"xmlns:"+ts:"xmlns",Ua),Ve.push({prefix:ts,namespace:Ua})}if(Un||ce&&!/^(?:meta|link|img|br|hr|input)$/i.test(Sr)){if(te.push(">"),ce&&/^script$/i.test(Sr))for(;Un;)Un.data?te.push(Un.data):xt(Un,te,ce,Ee,Ve.slice()),Un=Un.nextSibling;else for(;Un;)xt(Un,te,ce,Ee,Ve.slice()),Un=Un.nextSibling;te.push("</",Nn,">")}else te.push("/>");return;case A:case E:for(var Un=Y.firstChild;Un;)xt(Un,te,ce,Ee,Ve.slice()),Un=Un.nextSibling;return;case b:return ft(te,Y.name,Y.value);case y:return te.push(Y.data.replace(/[<&>]/g,ie));case D:return te.push("<![CDATA[",Y.data,"]]>");case _:return te.push("<!--",Y.data,"-->");case N:var Ps=Y.publicId,mi=Y.systemId;if(te.push("<!DOCTYPE ",Y.name),Ps)te.push(" PUBLIC ",Ps),mi&&mi!="."&&te.push(" ",mi),te.push(">");else if(mi&&mi!=".")te.push(" SYSTEM ",mi,">");else{var ol=Y.internalSubset;ol&&te.push(" [",ol,"]"),te.push(">")}return;case k:return te.push("<?",Y.target," ",Y.data,"?>");case v:return te.push("&",Y.nodeName,";");default:te.push("??",Y.nodeName)}}function Zn(Y,te,ce){var Ee;switch(te.nodeType){case g:Ee=te.cloneNode(!1),Ee.ownerDocument=Y;case E:break;case b:ce=!0;break}if(Ee||(Ee=te.cloneNode(!1)),Ee.ownerDocument=Y,Ee.parentNode=null,ce)for(var Ve=te.firstChild;Ve;)Ee.appendChild(Zn(Y,Ve,ce)),Ve=Ve.nextSibling;return Ee}function gi(Y,te,ce){var Ee=new te.constructor;for(var Ve in te)if(Object.prototype.hasOwnProperty.call(te,Ve)){var ot=te[Ve];typeof ot!="object"&&ot!=Ee[Ve]&&(Ee[Ve]=ot)}switch(te.childNodes&&(Ee.childNodes=new W),Ee.ownerDocument=Y,Ee.nodeType){case g:var Xt=te.attributes,Sr=Ee.attributes=new P,Nn=Xt.length;Sr._ownerElement=Ee;for(var on=0;on<Nn;on++)Ee.setAttributeNode(gi(Y,Xt.item(on),!0));break;case b:ce=!0}if(ce)for(var un=te.firstChild;un;)Ee.appendChild(gi(Y,un,ce)),un=un.nextSibling;return Ee}function Yi(Y,te,ce){Y[te]=ce}try{if(Object.defineProperty){let Y=function(te){switch(te.nodeType){case g:case E:var ce=[];for(te=te.firstChild;te;)te.nodeType!==7&&te.nodeType!==8&&ce.push(Y(te)),te=te.nextSibling;return ce.join("");default:return te.nodeValue}};Object.defineProperty(j.prototype,"length",{get:function(){return X(this),this.$$length}}),Object.defineProperty(J.prototype,"textContent",{get:function(){return Y(this)},set:function(te){switch(this.nodeType){case g:case E:for(;this.firstChild;)this.removeChild(this.firstChild);(te||String(te))&&this.appendChild(this.ownerDocument.createTextNode(te));break;default:this.data=te,this.value=te,this.nodeValue=te}}}),Yi=function(te,ce,Ee){te["$$"+ce]=Ee}}}catch{}return no.DocumentType=Me,no.DOMException=U,no.DOMImplementation=H,no.Element=pe,no.Node=J,no.NodeList=W,no.XMLSerializer=qe,no}var Sg={},Ek={},zN;function tP(){return zN||(zN=1,(function(r){var e=av().freeze;r.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),r.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),r.entityMap=r.HTML_ENTITIES})(Ek)),Ek}var Ix={},WN;function nP(){if(WN)return Ix;WN=1;var r=av().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),n=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),i=0,a=1,s=2,l=3,u=4,d=5,h=6,g=7;function b(I,F){this.message=I,this.locator=F,Error.captureStackTrace&&Error.captureStackTrace(this,b)}b.prototype=new Error,b.prototype.name=b.name;function y(){}y.prototype={parse:function(I,F,G){var U=this.domBuilder;U.startDocument(),N(F,F={}),D(I,F,G,U,this.errorHandler),U.endDocument()}};function D(I,F,G,U,W){function j(Ne){if(Ne>65535){Ne-=65536;var pe=55296+(Ne>>10),se=56320+(Ne&1023);return String.fromCharCode(pe,se)}else return String.fromCharCode(Ne)}function X(Ne){var pe=Ne.slice(1,-1);return Object.hasOwnProperty.call(G,pe)?G[pe]:pe.charAt(0)==="#"?j(parseInt(pe.substr(1).replace("x","0x"))):(W.error("entity not found:"+Ne),Ne)}function P(Ne){if(Ne>ge){var pe=I.substring(ge,Ne).replace(/&#?\w+;/g,X);J&&B(ge),U.characters(pe,0,Ne-ge),ge=Ne}}function B(Ne,pe){for(;Ne>=K&&(pe=H.exec(I));)ee=pe.index,K=ee+pe[0].length,J.lineNumber++;J.columnNumber=Ne-ee+1}for(var ee=0,K=0,H=/.*(?:\r\n?|\n)|.*$/g,J=U.locator,ie=[{currentNSMap:F}],z={},ge=0;;){try{var ve=I.indexOf("<",ge);if(ve<0){if(!I.substr(ge).match(/^\s*$/)){var je=U.doc,Ie=je.createTextNode(I.substr(ge));je.appendChild(Ie),U.currentElement=Ie}return}switch(ve>ge&&P(ve),I.charAt(ve+1)){case"/":var oe=I.indexOf(">",ve+3),Pe=I.substring(ve+2,oe).replace(/[ \t\n\r]+$/g,""),fe=ie.pop();oe<0?(Pe=I.substring(ve+2).replace(/[\s<].*/,""),W.error("end tag name: "+Pe+" is not complete:"+fe.tagName),oe=ve+1+Pe.length):Pe.match(/\s</)&&(Pe=Pe.replace(/[\s<].*/,""),W.error("end tag name: "+Pe+" maybe not complete"),oe=ve+1+Pe.length);var Ue=fe.localNSMap,be=fe.tagName==Pe,Fe=be||fe.tagName&&fe.tagName.toLowerCase()==Pe.toLowerCase();if(Fe){if(U.endElement(fe.uri,fe.localName,Pe),Ue)for(var $e in Ue)Object.prototype.hasOwnProperty.call(Ue,$e)&&U.endPrefixMapping($e);be||W.fatalError("end tag name: "+Pe+" is not match the current start tagName:"+fe.tagName)}else ie.push(fe);oe++;break;case"?":J&&B(ve),oe=T(I,ve,U);break;case"!":J&&B(ve),oe=E(I,ve,U,W);break;default:J&&B(ve);var O=new R,he=ie[ie.length-1].currentNSMap,oe=w(I,ve,O,he,X,W),re=O.length;if(!O.closed&&A(I,oe,O.tagName,z)&&(O.closed=!0,G.nbsp||W.warning("unclosed xml attribute")),J&&re){for(var ne=v(J,{}),ue=0;ue<re;ue++){var Ce=O[ue];B(Ce.offset),Ce.locator=v(J,{})}U.locator=ne,k(O,U,he)&&ie.push(O),U.locator=J}else k(O,U,he)&&ie.push(O);r.isHTML(O.uri)&&!O.closed?oe=_(I,oe,O.tagName,X,U):oe++}}catch(Ne){if(Ne instanceof b)throw Ne;W.error("element parse error: "+Ne),oe=-1}oe>ge?ge=oe:P(Math.max(ve,ge)+1)}}function v(I,F){return F.lineNumber=I.lineNumber,F.columnNumber=I.columnNumber,F}function w(I,F,G,U,W,j){function X(J,ie,z){G.attributeNames.hasOwnProperty(J)&&j.fatalError("Attribute "+J+" redefined"),G.addValue(J,ie.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,W),z)}for(var P,B,ee=++F,K=i;;){var H=I.charAt(ee);switch(H){case"=":if(K===a)P=I.slice(F,ee),K=l;else if(K===s)K=l;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(K===l||K===a)if(K===a&&(j.warning('attribute value must after "="'),P=I.slice(F,ee)),F=ee+1,ee=I.indexOf(H,F),ee>0)B=I.slice(F,ee),X(P,B,F-1),K=d;else throw new Error("attribute value no end '"+H+"' match");else if(K==u)B=I.slice(F,ee),X(P,B,F),j.warning('attribute "'+P+'" missed start quot('+H+")!!"),F=ee+1,K=d;else throw new Error('attribute value must after "="');break;case"/":switch(K){case i:G.setTagName(I.slice(F,ee));case d:case h:case g:K=g,G.closed=!0;case u:case a:break;case s:G.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return j.error("unexpected end of input"),K==i&&G.setTagName(I.slice(F,ee)),ee;case">":switch(K){case i:G.setTagName(I.slice(F,ee));case d:case h:case g:break;case u:case a:B=I.slice(F,ee),B.slice(-1)==="/"&&(G.closed=!0,B=B.slice(0,-1));case s:K===s&&(B=P),K==u?(j.warning('attribute "'+B+'" missed quot(")!'),X(P,B,F)):((!r.isHTML(U[""])||!B.match(/^(?:disabled|checked|selected)$/i))&&j.warning('attribute "'+B+'" missed value!! "'+B+'" instead!!'),X(B,B,F));break;case l:throw new Error("attribute value missed!!")}return ee;case"":H=" ";default:if(H<=" ")switch(K){case i:G.setTagName(I.slice(F,ee)),K=h;break;case a:P=I.slice(F,ee),K=s;break;case u:var B=I.slice(F,ee);j.warning('attribute "'+B+'" missed quot(")!!'),X(P,B,F);case d:K=h;break}else switch(K){case s:G.tagName,(!r.isHTML(U[""])||!P.match(/^(?:disabled|checked|selected)$/i))&&j.warning('attribute "'+P+'" missed value!! "'+P+'" instead2!!'),X(P,P,F),F=ee,K=a;break;case d:j.warning('attribute space is required"'+P+'"!!');case h:K=a,F=ee;break;case l:K=u,F=ee;break;case g:throw new Error("elements closed character '/' and '>' must be connected to")}}ee++}}function k(I,F,G){for(var U=I.tagName,W=null,H=I.length;H--;){var j=I[H],X=j.qName,P=j.value,J=X.indexOf(":");if(J>0)var B=j.prefix=X.slice(0,J),ee=X.slice(J+1),K=B==="xmlns"&&ee;else ee=X,B=null,K=X==="xmlns"&&"";j.localName=ee,K!==!1&&(W==null&&(W={},N(G,G={})),G[K]=W[K]=P,j.uri=r.XMLNS,F.startPrefixMapping(K,P))}for(var H=I.length;H--;){j=I[H];var B=j.prefix;B&&(B==="xml"&&(j.uri=r.XML),B!=="xmlns"&&(j.uri=G[B||""]))}var J=U.indexOf(":");J>0?(B=I.prefix=U.slice(0,J),ee=I.localName=U.slice(J+1)):(B=null,ee=I.localName=U);var ie=I.uri=G[B||""];if(F.startElement(ie,ee,U,I),I.closed){if(F.endElement(ie,ee,U),W)for(B in W)Object.prototype.hasOwnProperty.call(W,B)&&F.endPrefixMapping(B)}else return I.currentNSMap=G,I.localNSMap=W,!0}function _(I,F,G,U,W){if(/^(?:script|textarea)$/i.test(G)){var j=I.indexOf("</"+G+">",F),X=I.substring(F+1,j);if(/[&<]/.test(X))return/^script$/i.test(G)?(W.characters(X,0,X.length),j):(X=X.replace(/&#?\w+;/g,U),W.characters(X,0,X.length),j)}return F+1}function A(I,F,G,U){var W=U[G];return W==null&&(W=I.lastIndexOf("</"+G+">"),W<F&&(W=I.lastIndexOf("</"+G)),U[G]=W),W<F}function N(I,F){for(var G in I)Object.prototype.hasOwnProperty.call(I,G)&&(F[G]=I[G])}function E(I,F,G,U){var W=I.charAt(F+2);switch(W){case"-":if(I.charAt(F+3)==="-"){var j=I.indexOf("-->",F+4);return j>F?(G.comment(I,F+4,j-F-4),j+3):(U.error("Unclosed comment"),-1)}else return-1;default:if(I.substr(F+3,6)=="CDATA["){var j=I.indexOf("]]>",F+9);return G.startCDATA(),G.characters(I,F+9,j-F-9),G.endCDATA(),j+3}var X=M(I,F),P=X.length;if(P>1&&/!doctype/i.test(X[0][0])){var B=X[1][0],ee=!1,K=!1;P>3&&(/^public$/i.test(X[2][0])?(ee=X[3][0],K=P>4&&X[4][0]):/^system$/i.test(X[2][0])&&(K=X[3][0]));var H=X[P-1];return G.startDTD(B,ee,K),G.endDTD(),H.index+H[0].length}}return-1}function T(I,F,G){var U=I.indexOf("?>",F);if(U){var W=I.substring(F,U).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return W?(W[0].length,G.processingInstruction(W[1],W[2]),U+2):-1}return-1}function R(){this.attributeNames={}}R.prototype={setTagName:function(I){if(!n.test(I))throw new Error("invalid tagName:"+I);this.tagName=I},addValue:function(I,F,G){if(!n.test(I))throw new Error("invalid attribute:"+I);this.attributeNames[I]=this.length,this[this.length++]={qName:I,value:F,offset:G}},length:0,getLocalName:function(I){return this[I].localName},getLocator:function(I){return this[I].locator},getQName:function(I){return this[I].qName},getURI:function(I){return this[I].uri},getValue:function(I){return this[I].value}};function M(I,F){var G,U=[],W=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(W.lastIndex=F,W.exec(I);G=W.exec(I);)if(U.push(G),G[1])return U}return Ix.XMLReader=y,Ix.ParseError=b,Ix}var HN;function rP(){if(HN)return Sg;HN=1;var r=av(),e=aS(),t=tP(),n=nP(),i=e.DOMImplementation,a=r.NAMESPACE,s=n.ParseError,l=n.XMLReader;function u(w){return w.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function d(w){this.options=w||{locator:{}}}d.prototype.parseFromString=function(w,k){var _=this.options,A=new l,N=_.domBuilder||new g,E=_.errorHandler,T=_.locator,R=_.xmlns||{},M=/\/x?html?$/.test(k),I=M?t.HTML_ENTITIES:t.XML_ENTITIES;T&&N.setDocumentLocator(T),A.errorHandler=h(E,N,T),A.domBuilder=_.domBuilder||N,M&&(R[""]=a.HTML),R.xml=R.xml||a.XML;var F=_.normalizeLineEndings||u;return w&&typeof w=="string"?A.parse(F(w),R,I):A.errorHandler.error("invalid doc source"),N.doc};function h(w,k,_){if(!w){if(k instanceof g)return k;w=k}var A={},N=w instanceof Function;_=_||{};function E(T){var R=w[T];!R&&N&&(R=w.length==2?function(M){w(T,M)}:w),A[T]=R&&function(M){R("[xmldom "+T+"]	"+M+y(_))}||function(){}}return E("warning"),E("error"),E("fatalError"),A}function g(){this.cdata=!1}function b(w,k){k.lineNumber=w.lineNumber,k.columnNumber=w.columnNumber}g.prototype={startDocument:function(){this.doc=new i().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(w,k,_,A){var N=this.doc,E=N.createElementNS(w,_||k),T=A.length;v(this,E),this.currentElement=E,this.locator&&b(this.locator,E);for(var R=0;R<T;R++){var w=A.getURI(R),M=A.getValue(R),_=A.getQName(R),I=N.createAttributeNS(w,_);this.locator&&b(A.getLocator(R),I),I.value=I.nodeValue=M,E.setAttributeNode(I)}},endElement:function(w,k,_){var A=this.currentElement;A.tagName,this.currentElement=A.parentNode},startPrefixMapping:function(w,k){},endPrefixMapping:function(w){},processingInstruction:function(w,k){var _=this.doc.createProcessingInstruction(w,k);this.locator&&b(this.locator,_),v(this,_)},ignorableWhitespace:function(w,k,_){},characters:function(w,k,_){if(w=D.apply(this,arguments),w){if(this.cdata)var A=this.doc.createCDATASection(w);else var A=this.doc.createTextNode(w);this.currentElement?this.currentElement.appendChild(A):/^\s*$/.test(w)&&this.doc.appendChild(A),this.locator&&b(this.locator,A)}},skippedEntity:function(w){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(w){(this.locator=w)&&(w.lineNumber=0)},comment:function(w,k,_){w=D.apply(this,arguments);var A=this.doc.createComment(w);this.locator&&b(this.locator,A),v(this,A)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(w,k,_){var A=this.doc.implementation;if(A&&A.createDocumentType){var N=A.createDocumentType(w,k,_);this.locator&&b(this.locator,N),v(this,N),this.doc.doctype=N}},warning:function(w){console.warn("[xmldom warning]	"+w,y(this.locator))},error:function(w){console.error("[xmldom error]	"+w,y(this.locator))},fatalError:function(w){throw new s(w,this.locator)}};function y(w){if(w)return`
@`+(w.systemId||"")+"#[line:"+w.lineNumber+",col:"+w.columnNumber+"]"}function D(w,k,_){return typeof w=="string"?w.substr(k,_):w.length>=k+_||k?new java.lang.String(w,k,_)+"":w}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(w){g.prototype[w]=function(){return null}});function v(w,k){w.currentElement?w.currentElement.appendChild(k):w.doc.appendChild(k)}return Sg.__DOMHandler=g,Sg.normalizeLineEndings=u,Sg.DOMParser=d,Sg}var qN;function iP(){if(qN)return Ag;qN=1;var r=aS();return Ag.DOMImplementation=r.DOMImplementation,Ag.XMLSerializer=r.XMLSerializer,Ag.DOMParser=rP().DOMParser,Ag}var VN;function aP(){if(VN)return Fx;VN=1;var r=iP(),e=aS();function t(n){var i=null,a=new r.DOMParser({errorHandler:function(l,u){i={level:l,message:u}}}),s=a.parseFromString(n);if(i===null)return s;throw new Error(i.level+": "+i.message)}return Fx.parseFromString=t,Fx.Node=e.Node,Fx}var XN;function sP(){if(XN)return Sk;XN=1;var r=Hc(),e=Cn,t=aP(),n=Uj(),i=n.Element;Sk.readString=s;var a=t.Node;function s(l,u){u=u||{};try{var d=t.parseFromString(l,"text/xml")}catch(y){return r.reject(y)}if(d.documentElement.tagName==="parsererror")return r.resolve(new Error(d.documentElement.textContent));function h(y){switch(y.nodeType){case a.ELEMENT_NODE:return g(y);case a.TEXT_NODE:return n.text(y.nodeValue)}}function g(y){var D=b(y),v=[];e.forEach(y.childNodes,function(k){var _=h(k);_&&v.push(_)});var w={};return e.forEach(y.attributes,function(k){w[b(k)]=k.value}),new i(D,w,v)}function b(y){if(y.namespaceURI){var D=u[y.namespaceURI],v;return D?v=D+":":v="{"+y.namespaceURI+"}",v+y.localName}else return y.localName}return r.resolve(h(d.documentElement))}return Sk}var Tk={},uu={},os={},GN;function qc(){return GN||(GN=1,(function(){var r,e,t,n,i,a,s,l=[].slice,u={}.hasOwnProperty;r=function(){var d,h,g,b,y,D;if(D=arguments[0],y=2<=arguments.length?l.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(d=0,g=y.length;d<g;d++)if(b=y[d],b!=null)for(h in b)u.call(b,h)&&(D[h]=b[h]);return D},i=function(d){return!!d&&Object.prototype.toString.call(d)==="[object Function]"},a=function(d){var h;return!!d&&((h=typeof d)=="function"||h==="object")},t=function(d){return i(Array.isArray)?Array.isArray(d):Object.prototype.toString.call(d)==="[object Array]"},n=function(d){var h;if(t(d))return!d.length;for(h in d)if(u.call(d,h))return!1;return!0},s=function(d){var h,g;return a(d)&&(g=Object.getPrototypeOf(d))&&(h=g.constructor)&&typeof h=="function"&&h instanceof h&&Function.prototype.toString.call(h)===Function.prototype.toString.call(Object)},e=function(d){return i(d.valueOf)?d.valueOf():d},os.assign=r,os.isFunction=i,os.isObject=a,os.isArray=t,os.isEmpty=n,os.isPlainObject=s,os.getValue=e}).call(os)),os}var n0={exports:{}},r0={exports:{}},i0={exports:{}},a0={exports:{}},oP=a0.exports,$N;function Rj(){return $N||($N=1,(function(){a0.exports=(function(){function r(e,t,n){if(this.options=e.options,this.stringify=e.stringify,this.parent=e,t==null)throw new Error("Missing attribute name. "+this.debugInfo(t));if(n==null)throw new Error("Missing attribute value. "+this.debugInfo(t));this.name=this.stringify.attName(t),this.value=this.stringify.attValue(n)}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.set(e).attribute(this)},r.prototype.debugInfo=function(e){return e=e||this.name,e==null?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"},r})()}).call(oP)),a0.exports}var lP=i0.exports,YN;function sv(){return YN||(YN=1,(function(){var r,e,t,n,i,a,s=function(u,d){for(var h in d)l.call(d,h)&&(u[h]=d[h]);function g(){this.constructor=u}return g.prototype=d.prototype,u.prototype=new g,u.__super__=d.prototype,u},l={}.hasOwnProperty;a=qc(),i=a.isObject,n=a.isFunction,t=a.getValue,e=fi(),r=Rj(),i0.exports=(function(u){s(d,u);function d(h,g,b){if(d.__super__.constructor.call(this,h),g==null)throw new Error("Missing element name. "+this.debugInfo());this.name=this.stringify.eleName(g),this.attributes={},b!=null&&this.attribute(b),h.isDocument&&(this.isRoot=!0,this.documentObject=h,h.rootObject=this)}return d.prototype.clone=function(){var h,g,b,y;b=Object.create(this),b.isRoot&&(b.documentObject=null),b.attributes={},y=this.attributes;for(g in y)l.call(y,g)&&(h=y[g],b.attributes[g]=h.clone());return b.children=[],this.children.forEach(function(D){var v;return v=D.clone(),v.parent=b,b.children.push(v)}),b},d.prototype.attribute=function(h,g){var b,y;if(h!=null&&(h=t(h)),i(h))for(b in h)l.call(h,b)&&(y=h[b],this.attribute(b,y));else n(g)&&(g=g.apply()),(!this.options.skipNullAttributes||g!=null)&&(this.attributes[h]=new r(this,h,g));return this},d.prototype.removeAttribute=function(h){var g,b,y;if(h==null)throw new Error("Missing attribute name. "+this.debugInfo());if(h=t(h),Array.isArray(h))for(b=0,y=h.length;b<y;b++)g=h[b],delete this.attributes[g];else delete this.attributes[h];return this},d.prototype.toString=function(h){return this.options.writer.set(h).element(this)},d.prototype.att=function(h,g){return this.attribute(h,g)},d.prototype.a=function(h,g){return this.attribute(h,g)},d})(e)}).call(lP)),i0.exports}var s0={exports:{}},cP=s0.exports,KN;function ov(){return KN||(KN=1,(function(){var r,e=function(n,i){for(var a in i)t.call(i,a)&&(n[a]=i[a]);function s(){this.constructor=n}return s.prototype=i.prototype,n.prototype=new s,n.__super__=i.prototype,n},t={}.hasOwnProperty;r=fi(),s0.exports=(function(n){e(i,n);function i(a,s){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.text=this.stringify.cdata(s)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).cdata(this)},i})(r)}).call(cP)),s0.exports}var o0={exports:{}},uP=o0.exports,QN;function lv(){return QN||(QN=1,(function(){var r,e=function(n,i){for(var a in i)t.call(i,a)&&(n[a]=i[a]);function s(){this.constructor=n}return s.prototype=i.prototype,n.prototype=new s,n.__super__=i.prototype,n},t={}.hasOwnProperty;r=fi(),o0.exports=(function(n){e(i,n);function i(a,s){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing comment text. "+this.debugInfo());this.text=this.stringify.comment(s)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).comment(this)},i})(r)}).call(uP)),o0.exports}var l0={exports:{}},dP=l0.exports,ZN;function cv(){return ZN||(ZN=1,(function(){var r,e,t=function(i,a){for(var s in a)n.call(a,s)&&(i[s]=a[s]);function l(){this.constructor=i}return l.prototype=a.prototype,i.prototype=new l,i.__super__=a.prototype,i},n={}.hasOwnProperty;e=qc().isObject,r=fi(),l0.exports=(function(i){t(a,i);function a(s,l,u,d){var h;a.__super__.constructor.call(this,s),e(l)&&(h=l,l=h.version,u=h.encoding,d=h.standalone),l||(l="1.0"),this.version=this.stringify.xmlVersion(l),u!=null&&(this.encoding=this.stringify.xmlEncoding(u)),d!=null&&(this.standalone=this.stringify.xmlStandalone(d))}return a.prototype.toString=function(s){return this.options.writer.set(s).declaration(this)},a})(r)}).call(dP)),l0.exports}var c0={exports:{}},u0={exports:{}},hP=u0.exports,JN;function uv(){return JN||(JN=1,(function(){var r,e=function(n,i){for(var a in i)t.call(i,a)&&(n[a]=i[a]);function s(){this.constructor=n}return s.prototype=i.prototype,n.prototype=new s,n.__super__=i.prototype,n},t={}.hasOwnProperty;r=fi(),u0.exports=(function(n){e(i,n);function i(a,s,l,u,d,h){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(l==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(s));if(!u)throw new Error("Missing DTD attribute type. "+this.debugInfo(s));if(!d)throw new Error("Missing DTD attribute default. "+this.debugInfo(s));if(d.indexOf("#")!==0&&(d="#"+d),!d.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(s));if(h&&!d.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(s));this.elementName=this.stringify.eleName(s),this.attributeName=this.stringify.attName(l),this.attributeType=this.stringify.dtdAttType(u),this.defaultValue=this.stringify.dtdAttDefault(h),this.defaultValueType=d}return i.prototype.toString=function(a){return this.options.writer.set(a).dtdAttList(this)},i})(r)}).call(hP)),u0.exports}var d0={exports:{}},fP=d0.exports,eU;function dv(){return eU||(eU=1,(function(){var r,e,t=function(i,a){for(var s in a)n.call(a,s)&&(i[s]=a[s]);function l(){this.constructor=i}return l.prototype=a.prototype,i.prototype=new l,i.__super__=a.prototype,i},n={}.hasOwnProperty;e=qc().isObject,r=fi(),d0.exports=(function(i){t(a,i);function a(s,l,u,d){if(a.__super__.constructor.call(this,s),u==null)throw new Error("Missing DTD entity name. "+this.debugInfo(u));if(d==null)throw new Error("Missing DTD entity value. "+this.debugInfo(u));if(this.pe=!!l,this.name=this.stringify.eleName(u),!e(d))this.value=this.stringify.dtdEntityValue(d);else{if(!d.pubID&&!d.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(u));if(d.pubID&&!d.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(u));if(d.pubID!=null&&(this.pubID=this.stringify.dtdPubID(d.pubID)),d.sysID!=null&&(this.sysID=this.stringify.dtdSysID(d.sysID)),d.nData!=null&&(this.nData=this.stringify.dtdNData(d.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(u))}}return a.prototype.toString=function(s){return this.options.writer.set(s).dtdEntity(this)},a})(r)}).call(fP)),d0.exports}var h0={exports:{}},pP=h0.exports,tU;function hv(){return tU||(tU=1,(function(){var r,e=function(n,i){for(var a in i)t.call(i,a)&&(n[a]=i[a]);function s(){this.constructor=n}return s.prototype=i.prototype,n.prototype=new s,n.__super__=i.prototype,n},t={}.hasOwnProperty;r=fi(),h0.exports=(function(n){e(i,n);function i(a,s,l){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing DTD element name. "+this.debugInfo());l||(l="(#PCDATA)"),Array.isArray(l)&&(l="("+l.join(",")+")"),this.name=this.stringify.eleName(s),this.value=this.stringify.dtdElementValue(l)}return i.prototype.toString=function(a){return this.options.writer.set(a).dtdElement(this)},i})(r)}).call(pP)),h0.exports}var f0={exports:{}},gP=f0.exports,nU;function fv(){return nU||(nU=1,(function(){var r,e=function(n,i){for(var a in i)t.call(i,a)&&(n[a]=i[a]);function s(){this.constructor=n}return s.prototype=i.prototype,n.prototype=new s,n.__super__=i.prototype,n},t={}.hasOwnProperty;r=fi(),f0.exports=(function(n){e(i,n);function i(a,s,l){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing DTD notation name. "+this.debugInfo(s));if(!l.pubID&&!l.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(s));this.name=this.stringify.eleName(s),l.pubID!=null&&(this.pubID=this.stringify.dtdPubID(l.pubID)),l.sysID!=null&&(this.sysID=this.stringify.dtdSysID(l.sysID))}return i.prototype.toString=function(a){return this.options.writer.set(a).dtdNotation(this)},i})(r)}).call(gP)),f0.exports}var mP=c0.exports,rU;function pv(){return rU||(rU=1,(function(){var r,e,t,n,i,a,s=function(u,d){for(var h in d)l.call(d,h)&&(u[h]=d[h]);function g(){this.constructor=u}return g.prototype=d.prototype,u.prototype=new g,u.__super__=d.prototype,u},l={}.hasOwnProperty;a=qc().isObject,i=fi(),r=uv(),t=dv(),e=hv(),n=fv(),c0.exports=(function(u){s(d,u);function d(h,g,b){var y,D;d.__super__.constructor.call(this,h),this.name="!DOCTYPE",this.documentObject=h,a(g)&&(y=g,g=y.pubID,b=y.sysID),b==null&&(D=[g,b],b=D[0],g=D[1]),g!=null&&(this.pubID=this.stringify.dtdPubID(g)),b!=null&&(this.sysID=this.stringify.dtdSysID(b))}return d.prototype.element=function(h,g){var b;return b=new e(this,h,g),this.children.push(b),this},d.prototype.attList=function(h,g,b,y,D){var v;return v=new r(this,h,g,b,y,D),this.children.push(v),this},d.prototype.entity=function(h,g){var b;return b=new t(this,!1,h,g),this.children.push(b),this},d.prototype.pEntity=function(h,g){var b;return b=new t(this,!0,h,g),this.children.push(b),this},d.prototype.notation=function(h,g){var b;return b=new n(this,h,g),this.children.push(b),this},d.prototype.toString=function(h){return this.options.writer.set(h).docType(this)},d.prototype.ele=function(h,g){return this.element(h,g)},d.prototype.att=function(h,g,b,y,D){return this.attList(h,g,b,y,D)},d.prototype.ent=function(h,g){return this.entity(h,g)},d.prototype.pent=function(h,g){return this.pEntity(h,g)},d.prototype.not=function(h,g){return this.notation(h,g)},d.prototype.up=function(){return this.root()||this.documentObject},d})(i)}).call(mP)),c0.exports}var p0={exports:{}},bP=p0.exports,iU;function gv(){return iU||(iU=1,(function(){var r,e=function(n,i){for(var a in i)t.call(i,a)&&(n[a]=i[a]);function s(){this.constructor=n}return s.prototype=i.prototype,n.prototype=new s,n.__super__=i.prototype,n},t={}.hasOwnProperty;r=fi(),p0.exports=(function(n){e(i,n);function i(a,s){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing raw text. "+this.debugInfo());this.value=this.stringify.raw(s)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).raw(this)},i})(r)}).call(bP)),p0.exports}var g0={exports:{}},yP=g0.exports,aU;function mv(){return aU||(aU=1,(function(){var r,e=function(n,i){for(var a in i)t.call(i,a)&&(n[a]=i[a]);function s(){this.constructor=n}return s.prototype=i.prototype,n.prototype=new s,n.__super__=i.prototype,n},t={}.hasOwnProperty;r=fi(),g0.exports=(function(n){e(i,n);function i(a,s){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing element text. "+this.debugInfo());this.value=this.stringify.eleText(s)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).text(this)},i})(r)}).call(yP)),g0.exports}var m0={exports:{}},xP=m0.exports,sU;function bv(){return sU||(sU=1,(function(){var r,e=function(n,i){for(var a in i)t.call(i,a)&&(n[a]=i[a]);function s(){this.constructor=n}return s.prototype=i.prototype,n.prototype=new s,n.__super__=i.prototype,n},t={}.hasOwnProperty;r=fi(),m0.exports=(function(n){e(i,n);function i(a,s,l){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing instruction target. "+this.debugInfo());this.target=this.stringify.insTarget(s),l&&(this.value=this.stringify.insValue(l))}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).processingInstruction(this)},i})(r)}).call(xP)),m0.exports}var b0={exports:{}},vP=b0.exports,oU;function sS(){return oU||(oU=1,(function(){var r,e=function(n,i){for(var a in i)t.call(i,a)&&(n[a]=i[a]);function s(){this.constructor=n}return s.prototype=i.prototype,n.prototype=new s,n.__super__=i.prototype,n},t={}.hasOwnProperty;r=fi(),b0.exports=(function(n){e(i,n);function i(a){i.__super__.constructor.call(this,a),this.isDummy=!0}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return""},i})(r)}).call(vP)),b0.exports}var wP=r0.exports,lU;function fi(){return lU||(lU=1,(function(){var r,e,t,n,i,a,s,l,u,d,h,g,b,y,D={}.hasOwnProperty;y=qc(),b=y.isObject,g=y.isFunction,h=y.isEmpty,d=y.getValue,a=null,r=null,e=null,t=null,n=null,l=null,u=null,s=null,i=null,r0.exports=(function(){function v(w){this.parent=w,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.children=[],a||(a=sv(),r=ov(),e=lv(),t=cv(),n=pv(),l=gv(),u=mv(),s=bv(),i=sS())}return v.prototype.element=function(w,k,_){var A,N,E,T,R,M,I,F,G,U,W;if(M=null,k===null&&_==null&&(G=[{},null],k=G[0],_=G[1]),k==null&&(k={}),k=d(k),b(k)||(U=[k,_],_=U[0],k=U[1]),w!=null&&(w=d(w)),Array.isArray(w))for(E=0,I=w.length;E<I;E++)N=w[E],M=this.element(N);else if(g(w))M=this.element(w.apply());else if(b(w)){for(R in w)if(D.call(w,R))if(W=w[R],g(W)&&(W=W.apply()),b(W)&&h(W)&&(W=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&R.indexOf(this.stringify.convertAttKey)===0)M=this.attribute(R.substr(this.stringify.convertAttKey.length),W);else if(!this.options.separateArrayItems&&Array.isArray(W))for(T=0,F=W.length;T<F;T++)N=W[T],A={},A[R]=N,M=this.element(A);else b(W)?(M=this.element(R),M.element(W)):M=this.element(R,W)}else this.options.skipNullNodes&&_===null?M=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&w.indexOf(this.stringify.convertTextKey)===0?M=this.text(_):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&w.indexOf(this.stringify.convertCDataKey)===0?M=this.cdata(_):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&w.indexOf(this.stringify.convertCommentKey)===0?M=this.comment(_):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&w.indexOf(this.stringify.convertRawKey)===0?M=this.raw(_):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&w.indexOf(this.stringify.convertPIKey)===0?M=this.instruction(w.substr(this.stringify.convertPIKey.length),_):M=this.node(w,k,_);if(M==null)throw new Error("Could not create any elements with: "+w+". "+this.debugInfo());return M},v.prototype.insertBefore=function(w,k,_){var A,N,E;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(w));return N=this.parent.children.indexOf(this),E=this.parent.children.splice(N),A=this.parent.element(w,k,_),Array.prototype.push.apply(this.parent.children,E),A},v.prototype.insertAfter=function(w,k,_){var A,N,E;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(w));return N=this.parent.children.indexOf(this),E=this.parent.children.splice(N+1),A=this.parent.element(w,k,_),Array.prototype.push.apply(this.parent.children,E),A},v.prototype.remove=function(){var w;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return w=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[w,w-w+1].concat([])),this.parent},v.prototype.node=function(w,k,_){var A,N;return w!=null&&(w=d(w)),k||(k={}),k=d(k),b(k)||(N=[k,_],_=N[0],k=N[1]),A=new a(this,w,k),_!=null&&A.text(_),this.children.push(A),A},v.prototype.text=function(w){var k;return k=new u(this,w),this.children.push(k),this},v.prototype.cdata=function(w){var k;return k=new r(this,w),this.children.push(k),this},v.prototype.comment=function(w){var k;return k=new e(this,w),this.children.push(k),this},v.prototype.commentBefore=function(w){var k,_;return k=this.parent.children.indexOf(this),_=this.parent.children.splice(k),this.parent.comment(w),Array.prototype.push.apply(this.parent.children,_),this},v.prototype.commentAfter=function(w){var k,_;return k=this.parent.children.indexOf(this),_=this.parent.children.splice(k+1),this.parent.comment(w),Array.prototype.push.apply(this.parent.children,_),this},v.prototype.raw=function(w){var k;return k=new l(this,w),this.children.push(k),this},v.prototype.dummy=function(){var w;return w=new i(this),this.children.push(w),w},v.prototype.instruction=function(w,k){var _,A,N,E,T;if(w!=null&&(w=d(w)),k!=null&&(k=d(k)),Array.isArray(w))for(E=0,T=w.length;E<T;E++)_=w[E],this.instruction(_);else if(b(w))for(_ in w)D.call(w,_)&&(A=w[_],this.instruction(_,A));else g(k)&&(k=k.apply()),N=new s(this,w,k),this.children.push(N);return this},v.prototype.instructionBefore=function(w,k){var _,A;return _=this.parent.children.indexOf(this),A=this.parent.children.splice(_),this.parent.instruction(w,k),Array.prototype.push.apply(this.parent.children,A),this},v.prototype.instructionAfter=function(w,k){var _,A;return _=this.parent.children.indexOf(this),A=this.parent.children.splice(_+1),this.parent.instruction(w,k),Array.prototype.push.apply(this.parent.children,A),this},v.prototype.declaration=function(w,k,_){var A,N;return A=this.document(),N=new t(A,w,k,_),A.children[0]instanceof t?A.children[0]=N:A.children.unshift(N),A.root()||A},v.prototype.doctype=function(w,k){var _,A,N,E,T,R,M,I,F,G;for(A=this.document(),N=new n(A,w,k),F=A.children,E=T=0,M=F.length;T<M;E=++T)if(_=F[E],_ instanceof n)return A.children[E]=N,N;for(G=A.children,E=R=0,I=G.length;R<I;E=++R)if(_=G[E],_.isRoot)return A.children.splice(E,0,N),N;return A.children.push(N),N},v.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},v.prototype.root=function(){var w;for(w=this;w;){if(w.isDocument)return w.rootObject;if(w.isRoot)return w;w=w.parent}},v.prototype.document=function(){var w;for(w=this;w;){if(w.isDocument)return w;w=w.parent}},v.prototype.end=function(w){return this.document().end(w)},v.prototype.prev=function(){var w;for(w=this.parent.children.indexOf(this);w>0&&this.parent.children[w-1].isDummy;)w=w-1;if(w<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[w-1]},v.prototype.next=function(){var w;for(w=this.parent.children.indexOf(this);w<this.parent.children.length-1&&this.parent.children[w+1].isDummy;)w=w+1;if(w===-1||w===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[w+1]},v.prototype.importDocument=function(w){var k;return k=w.root().clone(),k.parent=this,k.isRoot=!1,this.children.push(k),this},v.prototype.debugInfo=function(w){var k,_;return w=w||this.name,w==null&&!((k=this.parent)!=null&&k.name)?"":w==null?"parent: <"+this.parent.name+">":(_=this.parent)!=null&&_.name?"node: <"+w+">, parent: <"+this.parent.name+">":"node: <"+w+">"},v.prototype.ele=function(w,k,_){return this.element(w,k,_)},v.prototype.nod=function(w,k,_){return this.node(w,k,_)},v.prototype.txt=function(w){return this.text(w)},v.prototype.dat=function(w){return this.cdata(w)},v.prototype.com=function(w){return this.comment(w)},v.prototype.ins=function(w,k){return this.instruction(w,k)},v.prototype.doc=function(){return this.document()},v.prototype.dec=function(w,k,_){return this.declaration(w,k,_)},v.prototype.dtd=function(w,k){return this.doctype(w,k)},v.prototype.e=function(w,k,_){return this.element(w,k,_)},v.prototype.n=function(w,k,_){return this.node(w,k,_)},v.prototype.t=function(w){return this.text(w)},v.prototype.d=function(w){return this.cdata(w)},v.prototype.c=function(w){return this.comment(w)},v.prototype.r=function(w){return this.raw(w)},v.prototype.i=function(w,k){return this.instruction(w,k)},v.prototype.u=function(){return this.up()},v.prototype.importXMLBuilder=function(w){return this.importDocument(w)},v})()}).call(wP)),r0.exports}var y0={exports:{}},kP=y0.exports,cU;function jj(){return cU||(cU=1,(function(){var r=function(t,n){return function(){return t.apply(n,arguments)}},e={}.hasOwnProperty;y0.exports=(function(){function t(n){this.assertLegalChar=r(this.assertLegalChar,this);var i,a,s;n||(n={}),this.noDoubleEncoding=n.noDoubleEncoding,a=n.stringify||{};for(i in a)e.call(a,i)&&(s=a[i],this[i]=s)}return t.prototype.eleName=function(n){return n=""+n||"",this.assertLegalChar(n)},t.prototype.eleText=function(n){return n=""+n||"",this.assertLegalChar(this.elEscape(n))},t.prototype.cdata=function(n){return n=""+n||"",n=n.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(n)},t.prototype.comment=function(n){if(n=""+n||"",n.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+n);return this.assertLegalChar(n)},t.prototype.raw=function(n){return""+n||""},t.prototype.attName=function(n){return n=""+n||""},t.prototype.attValue=function(n){return n=""+n||"",this.attEscape(n)},t.prototype.insTarget=function(n){return""+n||""},t.prototype.insValue=function(n){if(n=""+n||"",n.match(/\?>/))throw new Error("Invalid processing instruction value: "+n);return n},t.prototype.xmlVersion=function(n){if(n=""+n||"",!n.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+n);return n},t.prototype.xmlEncoding=function(n){if(n=""+n||"",!n.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+n);return n},t.prototype.xmlStandalone=function(n){return n?"yes":"no"},t.prototype.dtdPubID=function(n){return""+n||""},t.prototype.dtdSysID=function(n){return""+n||""},t.prototype.dtdElementValue=function(n){return""+n||""},t.prototype.dtdAttType=function(n){return""+n||""},t.prototype.dtdAttDefault=function(n){return n!=null?""+n||"":n},t.prototype.dtdEntityValue=function(n){return""+n||""},t.prototype.dtdNData=function(n){return""+n||""},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.assertLegalChar=function(n){var i;if(i=n.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/),i)throw new Error("Invalid character in string: "+n+" at index "+i.index);return n},t.prototype.elEscape=function(n){var i;return i=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,n.replace(i,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},t.prototype.attEscape=function(n){var i;return i=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,n.replace(i,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},t})()}).call(kP)),y0.exports}var x0={exports:{}},v0={exports:{}},DP=v0.exports,uU;function Fj(){return uU||(uU=1,(function(){var r={}.hasOwnProperty;v0.exports=(function(){function e(t){var n,i,a,s,l,u,d,h,g;t||(t={}),this.pretty=t.pretty||!1,this.allowEmpty=(i=t.allowEmpty)!=null?i:!1,this.pretty?(this.indent=(a=t.indent)!=null?a:"  ",this.newline=(s=t.newline)!=null?s:`
`,this.offset=(l=t.offset)!=null?l:0,this.dontprettytextnodes=(u=t.dontprettytextnodes)!=null?u:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash=(d=t.spacebeforeslash)!=null?d:"",this.spacebeforeslash===!0&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,h=t.writer||{};for(n in h)r.call(h,n)&&(g=h[n],this[n]=g)}return e.prototype.set=function(t){var n,i,a;t||(t={}),"pretty"in t&&(this.pretty=t.pretty),"allowEmpty"in t&&(this.allowEmpty=t.allowEmpty),this.pretty?(this.indent="indent"in t?t.indent:"  ",this.newline="newline"in t?t.newline:`
`,this.offset="offset"in t?t.offset:0,this.dontprettytextnodes="dontprettytextnodes"in t?t.dontprettytextnodes:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash="spacebeforeslash"in t?t.spacebeforeslash:"",this.spacebeforeslash===!0&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,i=t.writer||{};for(n in i)r.call(i,n)&&(a=i[n],this[n]=a);return this},e.prototype.space=function(t){var n;return this.pretty?(n=(t||0)+this.offset+1,n>0?new Array(n).join(this.indent):""):""},e})()}).call(DP)),v0.exports}var _P=x0.exports,dU;function oS(){return dU||(dU=1,(function(){var r,e,t,n,i,a,s,l,u,d,h,g,b,y,D=function(w,k){for(var _ in k)v.call(k,_)&&(w[_]=k[_]);function A(){this.constructor=w}return A.prototype=k.prototype,w.prototype=new A,w.__super__=k.prototype,w},v={}.hasOwnProperty;s=cv(),l=pv(),r=ov(),e=lv(),d=sv(),g=gv(),b=mv(),h=bv(),u=sS(),t=uv(),n=hv(),i=dv(),a=fv(),y=Fj(),x0.exports=(function(w){D(k,w);function k(_){k.__super__.constructor.call(this,_)}return k.prototype.document=function(_){var A,N,E,T,R;for(this.textispresent=!1,T="",R=_.children,N=0,E=R.length;N<E;N++)A=R[N],!(A instanceof u)&&(T+=(function(){switch(!1){case!(A instanceof s):return this.declaration(A);case!(A instanceof l):return this.docType(A);case!(A instanceof e):return this.comment(A);case!(A instanceof h):return this.processingInstruction(A);default:return this.element(A,0)}}).call(this));return this.pretty&&T.slice(-this.newline.length)===this.newline&&(T=T.slice(0,-this.newline.length)),T},k.prototype.attribute=function(_){return" "+_.name+'="'+_.value+'"'},k.prototype.cdata=function(_,A){return this.space(A)+"<![CDATA["+_.text+"]]>"+this.newline},k.prototype.comment=function(_,A){return this.space(A)+"<!-- "+_.text+" -->"+this.newline},k.prototype.declaration=function(_,A){var N;return N=this.space(A),N+='<?xml version="'+_.version+'"',_.encoding!=null&&(N+=' encoding="'+_.encoding+'"'),_.standalone!=null&&(N+=' standalone="'+_.standalone+'"'),N+=this.spacebeforeslash+"?>",N+=this.newline,N},k.prototype.docType=function(_,A){var N,E,T,R,M;if(A||(A=0),R=this.space(A),R+="<!DOCTYPE "+_.root().name,_.pubID&&_.sysID?R+=' PUBLIC "'+_.pubID+'" "'+_.sysID+'"':_.sysID&&(R+=' SYSTEM "'+_.sysID+'"'),_.children.length>0){for(R+=" [",R+=this.newline,M=_.children,E=0,T=M.length;E<T;E++)N=M[E],R+=(function(){switch(!1){case!(N instanceof t):return this.dtdAttList(N,A+1);case!(N instanceof n):return this.dtdElement(N,A+1);case!(N instanceof i):return this.dtdEntity(N,A+1);case!(N instanceof a):return this.dtdNotation(N,A+1);case!(N instanceof r):return this.cdata(N,A+1);case!(N instanceof e):return this.comment(N,A+1);case!(N instanceof h):return this.processingInstruction(N,A+1);default:throw new Error("Unknown DTD node type: "+N.constructor.name)}}).call(this);R+="]"}return R+=this.spacebeforeslash+">",R+=this.newline,R},k.prototype.element=function(_,A){var N,E,T,R,M,I,F,G,U,W,j,X,P;A||(A=0),P=!1,this.textispresent?(this.newline="",this.pretty=!1):(this.newline=this.newlinedefault,this.pretty=this.prettydefault),X=this.space(A),G="",G+=X+"<"+_.name,U=_.attributes;for(F in U)v.call(U,F)&&(N=U[F],G+=this.attribute(N));if(_.children.length===0||_.children.every(function(B){return B.value===""}))this.allowEmpty?G+="></"+_.name+">"+this.newline:G+=this.spacebeforeslash+"/>"+this.newline;else if(this.pretty&&_.children.length===1&&_.children[0].value!=null)G+=">",G+=_.children[0].value,G+="</"+_.name+">"+this.newline;else{if(this.dontprettytextnodes){for(W=_.children,T=0,M=W.length;T<M;T++)if(E=W[T],E.value!=null){this.textispresent++,P=!0;break}}for(this.textispresent&&(this.newline="",this.pretty=!1,X=this.space(A)),G+=">"+this.newline,j=_.children,R=0,I=j.length;R<I;R++)E=j[R],G+=(function(){switch(!1){case!(E instanceof r):return this.cdata(E,A+1);case!(E instanceof e):return this.comment(E,A+1);case!(E instanceof d):return this.element(E,A+1);case!(E instanceof g):return this.raw(E,A+1);case!(E instanceof b):return this.text(E,A+1);case!(E instanceof h):return this.processingInstruction(E,A+1);case!(E instanceof u):return"";default:throw new Error("Unknown XML node type: "+E.constructor.name)}}).call(this);P&&this.textispresent--,this.textispresent||(this.newline=this.newlinedefault,this.pretty=this.prettydefault),G+=X+"</"+_.name+">"+this.newline}return G},k.prototype.processingInstruction=function(_,A){var N;return N=this.space(A)+"<?"+_.target,_.value&&(N+=" "+_.value),N+=this.spacebeforeslash+"?>"+this.newline,N},k.prototype.raw=function(_,A){return this.space(A)+_.value+this.newline},k.prototype.text=function(_,A){return this.space(A)+_.value+this.newline},k.prototype.dtdAttList=function(_,A){var N;return N=this.space(A)+"<!ATTLIST "+_.elementName+" "+_.attributeName+" "+_.attributeType,_.defaultValueType!=="#DEFAULT"&&(N+=" "+_.defaultValueType),_.defaultValue&&(N+=' "'+_.defaultValue+'"'),N+=this.spacebeforeslash+">"+this.newline,N},k.prototype.dtdElement=function(_,A){return this.space(A)+"<!ELEMENT "+_.name+" "+_.value+this.spacebeforeslash+">"+this.newline},k.prototype.dtdEntity=function(_,A){var N;return N=this.space(A)+"<!ENTITY",_.pe&&(N+=" %"),N+=" "+_.name,_.value?N+=' "'+_.value+'"':(_.pubID&&_.sysID?N+=' PUBLIC "'+_.pubID+'" "'+_.sysID+'"':_.sysID&&(N+=' SYSTEM "'+_.sysID+'"'),_.nData&&(N+=" NDATA "+_.nData)),N+=this.spacebeforeslash+">"+this.newline,N},k.prototype.dtdNotation=function(_,A){var N;return N=this.space(A)+"<!NOTATION "+_.name,_.pubID&&_.sysID?N+=' PUBLIC "'+_.pubID+'" "'+_.sysID+'"':_.pubID?N+=' PUBLIC "'+_.pubID+'"':_.sysID&&(N+=' SYSTEM "'+_.sysID+'"'),N+=this.spacebeforeslash+">"+this.newline,N},k.prototype.openNode=function(_,A){var N,E,T,R;if(A||(A=0),_ instanceof d){T=this.space(A)+"<"+_.name,R=_.attributes;for(E in R)v.call(R,E)&&(N=R[E],T+=this.attribute(N));return T+=(_.children?">":"/>")+this.newline,T}else return T=this.space(A)+"<!DOCTYPE "+_.rootNodeName,_.pubID&&_.sysID?T+=' PUBLIC "'+_.pubID+'" "'+_.sysID+'"':_.sysID&&(T+=' SYSTEM "'+_.sysID+'"'),T+=(_.children?" [":">")+this.newline,T},k.prototype.closeNode=function(_,A){switch(A||(A=0),!1){case!(_ instanceof d):return this.space(A)+"</"+_.name+">"+this.newline;case!(_ instanceof l):return this.space(A)+"]>"+this.newline}},k})(y)}).call(_P)),x0.exports}var AP=n0.exports,hU;function SP(){return hU||(hU=1,(function(){var r,e,t,n,i=function(s,l){for(var u in l)a.call(l,u)&&(s[u]=l[u]);function d(){this.constructor=s}return d.prototype=l.prototype,s.prototype=new d,s.__super__=l.prototype,s},a={}.hasOwnProperty;n=qc().isPlainObject,r=fi(),t=jj(),e=oS(),n0.exports=(function(s){i(l,s);function l(u){l.__super__.constructor.call(this,null),this.name="?xml",u||(u={}),u.writer||(u.writer=new e),this.options=u,this.stringify=new t(u),this.isDocument=!0}return l.prototype.end=function(u){var d;return u?n(u)&&(d=u,u=this.options.writer.set(d)):u=this.options.writer,u.document(this)},l.prototype.toString=function(u){return this.options.writer.set(u).document(this)},l})(r)}).call(AP)),n0.exports}var w0={exports:{}},EP=w0.exports,fU;function TP(){return fU||(fU=1,(function(){var r,e,t,n,i,a,s,l,u,d,h,g,b,y,D,v,w,k,_,A,N={}.hasOwnProperty;A=qc(),k=A.isObject,w=A.isFunction,_=A.isPlainObject,v=A.getValue,d=sv(),e=ov(),t=lv(),g=gv(),D=mv(),h=bv(),l=cv(),u=pv(),n=uv(),a=dv(),i=hv(),s=fv(),r=Rj(),y=jj(),b=oS(),w0.exports=(function(){function E(T,R,M){var I;this.name="?xml",T||(T={}),T.writer?_(T.writer)&&(I=T.writer,T.writer=new b(I)):T.writer=new b(T),this.options=T,this.writer=T.writer,this.stringify=new y(T),this.onDataCallback=R||function(){},this.onEndCallback=M||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return E.prototype.node=function(T,R,M){var I,F;if(T==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(T));return this.openCurrent(),T=v(T),R===null&&M==null&&(I=[{},null],R=I[0],M=I[1]),R==null&&(R={}),R=v(R),k(R)||(F=[R,M],M=F[0],R=F[1]),this.currentNode=new d(this,T,R),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,M!=null&&this.text(M),this},E.prototype.element=function(T,R,M){return this.currentNode&&this.currentNode instanceof u?this.dtdElement.apply(this,arguments):this.node(T,R,M)},E.prototype.attribute=function(T,R){var M,I;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(T));if(T!=null&&(T=v(T)),k(T))for(M in T)N.call(T,M)&&(I=T[M],this.attribute(M,I));else w(R)&&(R=R.apply()),(!this.options.skipNullAttributes||R!=null)&&(this.currentNode.attributes[T]=new r(this,T,R));return this},E.prototype.text=function(T){var R;return this.openCurrent(),R=new D(this,T),this.onData(this.writer.text(R,this.currentLevel+1),this.currentLevel+1),this},E.prototype.cdata=function(T){var R;return this.openCurrent(),R=new e(this,T),this.onData(this.writer.cdata(R,this.currentLevel+1),this.currentLevel+1),this},E.prototype.comment=function(T){var R;return this.openCurrent(),R=new t(this,T),this.onData(this.writer.comment(R,this.currentLevel+1),this.currentLevel+1),this},E.prototype.raw=function(T){var R;return this.openCurrent(),R=new g(this,T),this.onData(this.writer.raw(R,this.currentLevel+1),this.currentLevel+1),this},E.prototype.instruction=function(T,R){var M,I,F,G,U;if(this.openCurrent(),T!=null&&(T=v(T)),R!=null&&(R=v(R)),Array.isArray(T))for(M=0,G=T.length;M<G;M++)I=T[M],this.instruction(I);else if(k(T))for(I in T)N.call(T,I)&&(F=T[I],this.instruction(I,F));else w(R)&&(R=R.apply()),U=new h(this,T,R),this.onData(this.writer.processingInstruction(U,this.currentLevel+1),this.currentLevel+1);return this},E.prototype.declaration=function(T,R,M){var I;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return I=new l(this,T,R,M),this.onData(this.writer.declaration(I,this.currentLevel+1),this.currentLevel+1),this},E.prototype.doctype=function(T,R,M){if(this.openCurrent(),T==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new u(this,R,M),this.currentNode.rootNodeName=T,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},E.prototype.dtdElement=function(T,R){var M;return this.openCurrent(),M=new i(this,T,R),this.onData(this.writer.dtdElement(M,this.currentLevel+1),this.currentLevel+1),this},E.prototype.attList=function(T,R,M,I,F){var G;return this.openCurrent(),G=new n(this,T,R,M,I,F),this.onData(this.writer.dtdAttList(G,this.currentLevel+1),this.currentLevel+1),this},E.prototype.entity=function(T,R){var M;return this.openCurrent(),M=new a(this,!1,T,R),this.onData(this.writer.dtdEntity(M,this.currentLevel+1),this.currentLevel+1),this},E.prototype.pEntity=function(T,R){var M;return this.openCurrent(),M=new a(this,!0,T,R),this.onData(this.writer.dtdEntity(M,this.currentLevel+1),this.currentLevel+1),this},E.prototype.notation=function(T,R){var M;return this.openCurrent(),M=new s(this,T,R),this.onData(this.writer.dtdNotation(M,this.currentLevel+1),this.currentLevel+1),this},E.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},E.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},E.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},E.prototype.openNode=function(T){if(!T.isOpen)return!this.root&&this.currentLevel===0&&T instanceof d&&(this.root=T),this.onData(this.writer.openNode(T,this.currentLevel),this.currentLevel),T.isOpen=!0},E.prototype.closeNode=function(T){if(!T.isClosed)return this.onData(this.writer.closeNode(T,this.currentLevel),this.currentLevel),T.isClosed=!0},E.prototype.onData=function(T,R){return this.documentStarted=!0,this.onDataCallback(T,R+1)},E.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},E.prototype.debugInfo=function(T){return T==null?"":"node: <"+T+">"},E.prototype.ele=function(){return this.element.apply(this,arguments)},E.prototype.nod=function(T,R,M){return this.node(T,R,M)},E.prototype.txt=function(T){return this.text(T)},E.prototype.dat=function(T){return this.cdata(T)},E.prototype.com=function(T){return this.comment(T)},E.prototype.ins=function(T,R){return this.instruction(T,R)},E.prototype.dec=function(T,R,M){return this.declaration(T,R,M)},E.prototype.dtd=function(T,R,M){return this.doctype(T,R,M)},E.prototype.e=function(T,R,M){return this.element(T,R,M)},E.prototype.n=function(T,R,M){return this.node(T,R,M)},E.prototype.t=function(T){return this.text(T)},E.prototype.d=function(T){return this.cdata(T)},E.prototype.c=function(T){return this.comment(T)},E.prototype.r=function(T){return this.raw(T)},E.prototype.i=function(T,R){return this.instruction(T,R)},E.prototype.att=function(){return this.currentNode&&this.currentNode instanceof u?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},E.prototype.a=function(){return this.currentNode&&this.currentNode instanceof u?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},E.prototype.ent=function(T,R){return this.entity(T,R)},E.prototype.pent=function(T,R){return this.pEntity(T,R)},E.prototype.not=function(T,R){return this.notation(T,R)},E})()}).call(EP)),w0.exports}var k0={exports:{}},CP=k0.exports,pU;function NP(){return pU||(pU=1,(function(){var r,e,t,n,i,a,s,l,u,d,h,g,b,y,D=function(w,k){for(var _ in k)v.call(k,_)&&(w[_]=k[_]);function A(){this.constructor=w}return A.prototype=k.prototype,w.prototype=new A,w.__super__=k.prototype,w},v={}.hasOwnProperty;s=cv(),l=pv(),r=ov(),e=lv(),d=sv(),g=gv(),b=mv(),h=bv(),u=sS(),t=uv(),n=hv(),i=dv(),a=fv(),y=Fj(),k0.exports=(function(w){D(k,w);function k(_,A){k.__super__.constructor.call(this,A),this.stream=_}return k.prototype.document=function(_){var A,N,E,T,R,M,I,F;for(M=_.children,N=0,T=M.length;N<T;N++)A=M[N],A.isLastRootNode=!1;for(_.children[_.children.length-1].isLastRootNode=!0,I=_.children,F=[],E=0,R=I.length;E<R;E++)if(A=I[E],!(A instanceof u))switch(!1){case!(A instanceof s):F.push(this.declaration(A));break;case!(A instanceof l):F.push(this.docType(A));break;case!(A instanceof e):F.push(this.comment(A));break;case!(A instanceof h):F.push(this.processingInstruction(A));break;default:F.push(this.element(A))}return F},k.prototype.attribute=function(_){return this.stream.write(" "+_.name+'="'+_.value+'"')},k.prototype.cdata=function(_,A){return this.stream.write(this.space(A)+"<![CDATA["+_.text+"]]>"+this.endline(_))},k.prototype.comment=function(_,A){return this.stream.write(this.space(A)+"<!-- "+_.text+" -->"+this.endline(_))},k.prototype.declaration=function(_,A){return this.stream.write(this.space(A)),this.stream.write('<?xml version="'+_.version+'"'),_.encoding!=null&&this.stream.write(' encoding="'+_.encoding+'"'),_.standalone!=null&&this.stream.write(' standalone="'+_.standalone+'"'),this.stream.write(this.spacebeforeslash+"?>"),this.stream.write(this.endline(_))},k.prototype.docType=function(_,A){var N,E,T,R;if(A||(A=0),this.stream.write(this.space(A)),this.stream.write("<!DOCTYPE "+_.root().name),_.pubID&&_.sysID?this.stream.write(' PUBLIC "'+_.pubID+'" "'+_.sysID+'"'):_.sysID&&this.stream.write(' SYSTEM "'+_.sysID+'"'),_.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(_)),R=_.children,E=0,T=R.length;E<T;E++)switch(N=R[E],!1){case!(N instanceof t):this.dtdAttList(N,A+1);break;case!(N instanceof n):this.dtdElement(N,A+1);break;case!(N instanceof i):this.dtdEntity(N,A+1);break;case!(N instanceof a):this.dtdNotation(N,A+1);break;case!(N instanceof r):this.cdata(N,A+1);break;case!(N instanceof e):this.comment(N,A+1);break;case!(N instanceof h):this.processingInstruction(N,A+1);break;default:throw new Error("Unknown DTD node type: "+N.constructor.name)}this.stream.write("]")}return this.stream.write(this.spacebeforeslash+">"),this.stream.write(this.endline(_))},k.prototype.element=function(_,A){var N,E,T,R,M,I,F,G;A||(A=0),G=this.space(A),this.stream.write(G+"<"+_.name),I=_.attributes;for(M in I)v.call(I,M)&&(N=I[M],this.attribute(N));if(_.children.length===0||_.children.every(function(U){return U.value===""}))this.allowEmpty?this.stream.write("></"+_.name+">"):this.stream.write(this.spacebeforeslash+"/>");else if(this.pretty&&_.children.length===1&&_.children[0].value!=null)this.stream.write(">"),this.stream.write(_.children[0].value),this.stream.write("</"+_.name+">");else{for(this.stream.write(">"+this.newline),F=_.children,T=0,R=F.length;T<R;T++)switch(E=F[T],!1){case!(E instanceof r):this.cdata(E,A+1);break;case!(E instanceof e):this.comment(E,A+1);break;case!(E instanceof d):this.element(E,A+1);break;case!(E instanceof g):this.raw(E,A+1);break;case!(E instanceof b):this.text(E,A+1);break;case!(E instanceof h):this.processingInstruction(E,A+1);break;case!(E instanceof u):break;default:throw new Error("Unknown XML node type: "+E.constructor.name)}this.stream.write(G+"</"+_.name+">")}return this.stream.write(this.endline(_))},k.prototype.processingInstruction=function(_,A){return this.stream.write(this.space(A)+"<?"+_.target),_.value&&this.stream.write(" "+_.value),this.stream.write(this.spacebeforeslash+"?>"+this.endline(_))},k.prototype.raw=function(_,A){return this.stream.write(this.space(A)+_.value+this.endline(_))},k.prototype.text=function(_,A){return this.stream.write(this.space(A)+_.value+this.endline(_))},k.prototype.dtdAttList=function(_,A){return this.stream.write(this.space(A)+"<!ATTLIST "+_.elementName+" "+_.attributeName+" "+_.attributeType),_.defaultValueType!=="#DEFAULT"&&this.stream.write(" "+_.defaultValueType),_.defaultValue&&this.stream.write(' "'+_.defaultValue+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(_))},k.prototype.dtdElement=function(_,A){return this.stream.write(this.space(A)+"<!ELEMENT "+_.name+" "+_.value),this.stream.write(this.spacebeforeslash+">"+this.endline(_))},k.prototype.dtdEntity=function(_,A){return this.stream.write(this.space(A)+"<!ENTITY"),_.pe&&this.stream.write(" %"),this.stream.write(" "+_.name),_.value?this.stream.write(' "'+_.value+'"'):(_.pubID&&_.sysID?this.stream.write(' PUBLIC "'+_.pubID+'" "'+_.sysID+'"'):_.sysID&&this.stream.write(' SYSTEM "'+_.sysID+'"'),_.nData&&this.stream.write(" NDATA "+_.nData)),this.stream.write(this.spacebeforeslash+">"+this.endline(_))},k.prototype.dtdNotation=function(_,A){return this.stream.write(this.space(A)+"<!NOTATION "+_.name),_.pubID&&_.sysID?this.stream.write(' PUBLIC "'+_.pubID+'" "'+_.sysID+'"'):_.pubID?this.stream.write(' PUBLIC "'+_.pubID+'"'):_.sysID&&this.stream.write(' SYSTEM "'+_.sysID+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(_))},k.prototype.endline=function(_){return _.isLastRootNode?"":this.newline},k})(y)}).call(CP)),k0.exports}var gU;function UP(){return gU||(gU=1,(function(){var r,e,t,n,i,a,s;s=qc(),i=s.assign,a=s.isFunction,r=SP(),e=TP(),n=oS(),t=NP(),uu.create=function(l,u,d,h){var g,b;if(l==null)throw new Error("Root element needs a name.");return h=i({},u,d,h),g=new r(h),b=g.element(l),h.headless||(g.declaration(h),(h.pubID!=null||h.sysID!=null)&&g.doctype(h)),b},uu.begin=function(l,u,d){var h;return a(l)&&(h=[l,u],u=h[0],d=h[1],l={}),u?new e(l,u,d):new r(l)},uu.stringWriter=function(l){return new n(l)},uu.streamWriter=function(l,u){return new t(l,u)}}).call(uu)),uu}var mU;function RP(){if(mU)return Tk;mU=1;var r=Cn,e=UP();Tk.writeString=t;function t(i,a){var s=r.invert(a),l={element:d,text:n};function u(b,y){return l[y.type](b,y)}function d(b,y){var D=b.element(h(y.name),y.attributes);y.children.forEach(function(v){u(D,v)})}function h(b){var y=/^\{(.*)\}(.*)$/.exec(b);if(y){var D=s[y[1]];return D+(D===""?"":":")+y[2]}else return b}function g(b){var y=e.create(h(b.name),{version:"1.0",encoding:"UTF-8",standalone:!0});return r.forEach(a,function(D,v){var w="xmlns"+(v===""?"":":"+v);y.attribute(w,D)}),b.children.forEach(function(D){u(y,D)}),y.end()}return g(i)}function n(i,a){i.text(a.value)}return Tk}var bU;function lS(){if(bU)return Ul;bU=1;var r=Uj();return Ul.Element=r.Element,Ul.element=r.element,Ul.emptyElement=r.emptyElement,Ul.text=r.text,Ul.readString=sP().readString,Ul.writeString=RP().writeString,Ul}var yU;function jP(){if(yU)return jx;yU=1;var r=Cn,e=Hc(),t=lS();jx.read=i,jx.readXmlFromZipFile=a;var n={"http://schemas.openxmlformats.org/wordprocessingml/2006/main":"w","http://schemas.openxmlformats.org/officeDocument/2006/relationships":"r","http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing":"wp","http://schemas.openxmlformats.org/drawingml/2006/main":"a","http://schemas.openxmlformats.org/drawingml/2006/picture":"pic","http://purl.oclc.org/ooxml/wordprocessingml/main":"w","http://purl.oclc.org/ooxml/officeDocument/relationships":"r","http://purl.oclc.org/ooxml/drawingml/wordprocessingDrawing":"wp","http://purl.oclc.org/ooxml/drawingml/main":"a","http://purl.oclc.org/ooxml/drawingml/picture":"pic","http://schemas.openxmlformats.org/package/2006/content-types":"content-types","http://schemas.openxmlformats.org/package/2006/relationships":"relationships","http://schemas.openxmlformats.org/markup-compatibility/2006":"mc","urn:schemas-microsoft-com:vml":"v","urn:schemas-microsoft-com:office:word":"office-word","http://schemas.microsoft.com/office/word/2010/wordml":"wordml"};function i(u){return t.readString(u,n).then(function(d){return l(d)[0]})}function a(u,d){return u.exists(d)?u.read(d,"utf-8").then(s).then(i):e.resolve(null)}function s(u){return u.replace(/^\uFEFF/g,"")}function l(u){return u.type==="element"?u.name==="mc:AlternateContent"?u.firstOrEmpty("mc:Fallback").children:(u.children=r.flatten(u.children.map(l,!0)),[u]):[u]}return jx}var Ox={},Ia={},Mx={},xU;function FP(){if(xU)return Mx;xU=1,Object.defineProperty(Mx,"__esModule",{value:!0});var r=[{"Typeface name":"Symbol","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Symbol","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"33","Unicode hex":"21"},{"Typeface name":"Symbol","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"8704","Unicode hex":"2200"},{"Typeface name":"Symbol","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"35","Unicode hex":"23"},{"Typeface name":"Symbol","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"8707","Unicode hex":"2203"},{"Typeface name":"Symbol","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"37","Unicode hex":"25"},{"Typeface name":"Symbol","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"38","Unicode hex":"26"},{"Typeface name":"Symbol","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"8717","Unicode hex":"220D"},{"Typeface name":"Symbol","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"40","Unicode hex":"28"},{"Typeface name":"Symbol","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"41","Unicode hex":"29"},{"Typeface name":"Symbol","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"42","Unicode hex":"2A"},{"Typeface name":"Symbol","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"43","Unicode hex":"2B"},{"Typeface name":"Symbol","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"44","Unicode hex":"2C"},{"Typeface name":"Symbol","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"8722","Unicode hex":"2212"},{"Typeface name":"Symbol","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"46","Unicode hex":"2E"},{"Typeface name":"Symbol","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"47","Unicode hex":"2F"},{"Typeface name":"Symbol","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"48","Unicode hex":"30"},{"Typeface name":"Symbol","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"49","Unicode hex":"31"},{"Typeface name":"Symbol","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"50","Unicode hex":"32"},{"Typeface name":"Symbol","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"51","Unicode hex":"33"},{"Typeface name":"Symbol","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"52","Unicode hex":"34"},{"Typeface name":"Symbol","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"53","Unicode hex":"35"},{"Typeface name":"Symbol","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"54","Unicode hex":"36"},{"Typeface name":"Symbol","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"55","Unicode hex":"37"},{"Typeface name":"Symbol","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"56","Unicode hex":"38"},{"Typeface name":"Symbol","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"57","Unicode hex":"39"},{"Typeface name":"Symbol","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"58","Unicode hex":"3A"},{"Typeface name":"Symbol","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"59","Unicode hex":"3B"},{"Typeface name":"Symbol","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"60","Unicode hex":"3C"},{"Typeface name":"Symbol","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"61","Unicode hex":"3D"},{"Typeface name":"Symbol","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"62","Unicode hex":"3E"},{"Typeface name":"Symbol","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"63","Unicode hex":"3F"},{"Typeface name":"Symbol","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"8773","Unicode hex":"2245"},{"Typeface name":"Symbol","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"913","Unicode hex":"391"},{"Typeface name":"Symbol","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"914","Unicode hex":"392"},{"Typeface name":"Symbol","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"935","Unicode hex":"3A7"},{"Typeface name":"Symbol","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"916","Unicode hex":"394"},{"Typeface name":"Symbol","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"917","Unicode hex":"395"},{"Typeface name":"Symbol","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"934","Unicode hex":"3A6"},{"Typeface name":"Symbol","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"915","Unicode hex":"393"},{"Typeface name":"Symbol","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"919","Unicode hex":"397"},{"Typeface name":"Symbol","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"921","Unicode hex":"399"},{"Typeface name":"Symbol","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"977","Unicode hex":"3D1"},{"Typeface name":"Symbol","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"922","Unicode hex":"39A"},{"Typeface name":"Symbol","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"923","Unicode hex":"39B"},{"Typeface name":"Symbol","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"924","Unicode hex":"39C"},{"Typeface name":"Symbol","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"925","Unicode hex":"39D"},{"Typeface name":"Symbol","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"927","Unicode hex":"39F"},{"Typeface name":"Symbol","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"928","Unicode hex":"3A0"},{"Typeface name":"Symbol","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"920","Unicode hex":"398"},{"Typeface name":"Symbol","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"929","Unicode hex":"3A1"},{"Typeface name":"Symbol","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"931","Unicode hex":"3A3"},{"Typeface name":"Symbol","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"932","Unicode hex":"3A4"},{"Typeface name":"Symbol","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"933","Unicode hex":"3A5"},{"Typeface name":"Symbol","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"962","Unicode hex":"3C2"},{"Typeface name":"Symbol","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"937","Unicode hex":"3A9"},{"Typeface name":"Symbol","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"926","Unicode hex":"39E"},{"Typeface name":"Symbol","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"936","Unicode hex":"3A8"},{"Typeface name":"Symbol","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"918","Unicode hex":"396"},{"Typeface name":"Symbol","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"91","Unicode hex":"5B"},{"Typeface name":"Symbol","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"8756","Unicode hex":"2234"},{"Typeface name":"Symbol","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"93","Unicode hex":"5D"},{"Typeface name":"Symbol","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"8869","Unicode hex":"22A5"},{"Typeface name":"Symbol","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"95","Unicode hex":"5F"},{"Typeface name":"Symbol","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"8254","Unicode hex":"203E"},{"Typeface name":"Symbol","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"945","Unicode hex":"3B1"},{"Typeface name":"Symbol","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"946","Unicode hex":"3B2"},{"Typeface name":"Symbol","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"967","Unicode hex":"3C7"},{"Typeface name":"Symbol","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"948","Unicode hex":"3B4"},{"Typeface name":"Symbol","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"949","Unicode hex":"3B5"},{"Typeface name":"Symbol","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"966","Unicode hex":"3C6"},{"Typeface name":"Symbol","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"947","Unicode hex":"3B3"},{"Typeface name":"Symbol","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"951","Unicode hex":"3B7"},{"Typeface name":"Symbol","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"953","Unicode hex":"3B9"},{"Typeface name":"Symbol","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"981","Unicode hex":"3D5"},{"Typeface name":"Symbol","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"954","Unicode hex":"3BA"},{"Typeface name":"Symbol","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"955","Unicode hex":"3BB"},{"Typeface name":"Symbol","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"956","Unicode hex":"3BC"},{"Typeface name":"Symbol","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"957","Unicode hex":"3BD"},{"Typeface name":"Symbol","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"959","Unicode hex":"3BF"},{"Typeface name":"Symbol","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"960","Unicode hex":"3C0"},{"Typeface name":"Symbol","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"952","Unicode hex":"3B8"},{"Typeface name":"Symbol","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"961","Unicode hex":"3C1"},{"Typeface name":"Symbol","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"963","Unicode hex":"3C3"},{"Typeface name":"Symbol","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"964","Unicode hex":"3C4"},{"Typeface name":"Symbol","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"965","Unicode hex":"3C5"},{"Typeface name":"Symbol","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"982","Unicode hex":"3D6"},{"Typeface name":"Symbol","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"969","Unicode hex":"3C9"},{"Typeface name":"Symbol","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"958","Unicode hex":"3BE"},{"Typeface name":"Symbol","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"968","Unicode hex":"3C8"},{"Typeface name":"Symbol","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"950","Unicode hex":"3B6"},{"Typeface name":"Symbol","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"123","Unicode hex":"7B"},{"Typeface name":"Symbol","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"124","Unicode hex":"7C"},{"Typeface name":"Symbol","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"125","Unicode hex":"7D"},{"Typeface name":"Symbol","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"126","Unicode hex":"7E"},{"Typeface name":"Symbol","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"8364","Unicode hex":"20AC"},{"Typeface name":"Symbol","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"978","Unicode hex":"3D2"},{"Typeface name":"Symbol","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"8242","Unicode hex":"2032"},{"Typeface name":"Symbol","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"8804","Unicode hex":"2264"},{"Typeface name":"Symbol","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"8260","Unicode hex":"2044"},{"Typeface name":"Symbol","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"8734","Unicode hex":"221E"},{"Typeface name":"Symbol","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"402","Unicode hex":"192"},{"Typeface name":"Symbol","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"9827","Unicode hex":"2663"},{"Typeface name":"Symbol","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"9830","Unicode hex":"2666"},{"Typeface name":"Symbol","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"9829","Unicode hex":"2665"},{"Typeface name":"Symbol","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"9824","Unicode hex":"2660"},{"Typeface name":"Symbol","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"8596","Unicode hex":"2194"},{"Typeface name":"Symbol","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"8592","Unicode hex":"2190"},{"Typeface name":"Symbol","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"8593","Unicode hex":"2191"},{"Typeface name":"Symbol","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"8594","Unicode hex":"2192"},{"Typeface name":"Symbol","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"8595","Unicode hex":"2193"},{"Typeface name":"Symbol","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"176","Unicode hex":"B0"},{"Typeface name":"Symbol","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"177","Unicode hex":"B1"},{"Typeface name":"Symbol","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"8243","Unicode hex":"2033"},{"Typeface name":"Symbol","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"8805","Unicode hex":"2265"},{"Typeface name":"Symbol","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"215","Unicode hex":"D7"},{"Typeface name":"Symbol","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"8733","Unicode hex":"221D"},{"Typeface name":"Symbol","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"8706","Unicode hex":"2202"},{"Typeface name":"Symbol","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"8226","Unicode hex":"2022"},{"Typeface name":"Symbol","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"247","Unicode hex":"F7"},{"Typeface name":"Symbol","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"8800","Unicode hex":"2260"},{"Typeface name":"Symbol","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"8801","Unicode hex":"2261"},{"Typeface name":"Symbol","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"8776","Unicode hex":"2248"},{"Typeface name":"Symbol","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"8230","Unicode hex":"2026"},{"Typeface name":"Symbol","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"9168","Unicode hex":"23D0"},{"Typeface name":"Symbol","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"9135","Unicode hex":"23AF"},{"Typeface name":"Symbol","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"8629","Unicode hex":"21B5"},{"Typeface name":"Symbol","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"8501","Unicode hex":"2135"},{"Typeface name":"Symbol","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"8465","Unicode hex":"2111"},{"Typeface name":"Symbol","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"8476","Unicode hex":"211C"},{"Typeface name":"Symbol","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"8472","Unicode hex":"2118"},{"Typeface name":"Symbol","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"8855","Unicode hex":"2297"},{"Typeface name":"Symbol","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"8853","Unicode hex":"2295"},{"Typeface name":"Symbol","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"8709","Unicode hex":"2205"},{"Typeface name":"Symbol","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"8745","Unicode hex":"2229"},{"Typeface name":"Symbol","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"8746","Unicode hex":"222A"},{"Typeface name":"Symbol","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"8835","Unicode hex":"2283"},{"Typeface name":"Symbol","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"8839","Unicode hex":"2287"},{"Typeface name":"Symbol","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"8836","Unicode hex":"2284"},{"Typeface name":"Symbol","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"8834","Unicode hex":"2282"},{"Typeface name":"Symbol","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"8838","Unicode hex":"2286"},{"Typeface name":"Symbol","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"8712","Unicode hex":"2208"},{"Typeface name":"Symbol","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"8713","Unicode hex":"2209"},{"Typeface name":"Symbol","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"8736","Unicode hex":"2220"},{"Typeface name":"Symbol","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"8711","Unicode hex":"2207"},{"Typeface name":"Symbol","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"174","Unicode hex":"AE"},{"Typeface name":"Symbol","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"169","Unicode hex":"A9"},{"Typeface name":"Symbol","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"8482","Unicode hex":"2122"},{"Typeface name":"Symbol","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"8719","Unicode hex":"220F"},{"Typeface name":"Symbol","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"8730","Unicode hex":"221A"},{"Typeface name":"Symbol","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"8901","Unicode hex":"22C5"},{"Typeface name":"Symbol","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"172","Unicode hex":"AC"},{"Typeface name":"Symbol","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"8743","Unicode hex":"2227"},{"Typeface name":"Symbol","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"8744","Unicode hex":"2228"},{"Typeface name":"Symbol","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"8660","Unicode hex":"21D4"},{"Typeface name":"Symbol","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"8656","Unicode hex":"21D0"},{"Typeface name":"Symbol","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"8657","Unicode hex":"21D1"},{"Typeface name":"Symbol","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"8658","Unicode hex":"21D2"},{"Typeface name":"Symbol","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"8659","Unicode hex":"21D3"},{"Typeface name":"Symbol","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"9674","Unicode hex":"25CA"},{"Typeface name":"Symbol","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"12296","Unicode hex":"3008"},{"Typeface name":"Symbol","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"174","Unicode hex":"AE"},{"Typeface name":"Symbol","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"169","Unicode hex":"A9"},{"Typeface name":"Symbol","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"8482","Unicode hex":"2122"},{"Typeface name":"Symbol","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"8721","Unicode hex":"2211"},{"Typeface name":"Symbol","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"9115","Unicode hex":"239B"},{"Typeface name":"Symbol","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"9116","Unicode hex":"239C"},{"Typeface name":"Symbol","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"9117","Unicode hex":"239D"},{"Typeface name":"Symbol","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"9121","Unicode hex":"23A1"},{"Typeface name":"Symbol","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"9122","Unicode hex":"23A2"},{"Typeface name":"Symbol","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"9123","Unicode hex":"23A3"},{"Typeface name":"Symbol","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"9127","Unicode hex":"23A7"},{"Typeface name":"Symbol","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"9128","Unicode hex":"23A8"},{"Typeface name":"Symbol","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"9129","Unicode hex":"23A9"},{"Typeface name":"Symbol","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"9130","Unicode hex":"23AA"},{"Typeface name":"Symbol","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"63743","Unicode hex":"F8FF"},{"Typeface name":"Symbol","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"12297","Unicode hex":"3009"},{"Typeface name":"Symbol","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"8747","Unicode hex":"222B"},{"Typeface name":"Symbol","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"8992","Unicode hex":"2320"},{"Typeface name":"Symbol","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"9134","Unicode hex":"23AE"},{"Typeface name":"Symbol","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"8993","Unicode hex":"2321"},{"Typeface name":"Symbol","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"9118","Unicode hex":"239E"},{"Typeface name":"Symbol","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"9119","Unicode hex":"239F"},{"Typeface name":"Symbol","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"9120","Unicode hex":"23A0"},{"Typeface name":"Symbol","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"9124","Unicode hex":"23A4"},{"Typeface name":"Symbol","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"9125","Unicode hex":"23A5"},{"Typeface name":"Symbol","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"9126","Unicode hex":"23A6"},{"Typeface name":"Symbol","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"9131","Unicode hex":"23AB"},{"Typeface name":"Symbol","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"9132","Unicode hex":"23AC"},{"Typeface name":"Symbol","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"9133","Unicode hex":"23AD"},{"Typeface name":"Webdings","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Webdings","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128375","Unicode hex":"1F577"},{"Typeface name":"Webdings","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"128376","Unicode hex":"1F578"},{"Typeface name":"Webdings","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"128370","Unicode hex":"1F572"},{"Typeface name":"Webdings","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128374","Unicode hex":"1F576"},{"Typeface name":"Webdings","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"127942","Unicode hex":"1F3C6"},{"Typeface name":"Webdings","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"127894","Unicode hex":"1F396"},{"Typeface name":"Webdings","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128391","Unicode hex":"1F587"},{"Typeface name":"Webdings","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128488","Unicode hex":"1F5E8"},{"Typeface name":"Webdings","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"128489","Unicode hex":"1F5E9"},{"Typeface name":"Webdings","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128496","Unicode hex":"1F5F0"},{"Typeface name":"Webdings","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128497","Unicode hex":"1F5F1"},{"Typeface name":"Webdings","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"127798","Unicode hex":"1F336"},{"Typeface name":"Webdings","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"127895","Unicode hex":"1F397"},{"Typeface name":"Webdings","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128638","Unicode hex":"1F67E"},{"Typeface name":"Webdings","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128636","Unicode hex":"1F67C"},{"Typeface name":"Webdings","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128469","Unicode hex":"1F5D5"},{"Typeface name":"Webdings","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128470","Unicode hex":"1F5D6"},{"Typeface name":"Webdings","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128471","Unicode hex":"1F5D7"},{"Typeface name":"Webdings","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"9204","Unicode hex":"23F4"},{"Typeface name":"Webdings","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"9205","Unicode hex":"23F5"},{"Typeface name":"Webdings","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"9206","Unicode hex":"23F6"},{"Typeface name":"Webdings","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"9207","Unicode hex":"23F7"},{"Typeface name":"Webdings","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"9194","Unicode hex":"23EA"},{"Typeface name":"Webdings","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"9193","Unicode hex":"23E9"},{"Typeface name":"Webdings","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"9198","Unicode hex":"23EE"},{"Typeface name":"Webdings","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"9197","Unicode hex":"23ED"},{"Typeface name":"Webdings","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"9208","Unicode hex":"23F8"},{"Typeface name":"Webdings","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"9209","Unicode hex":"23F9"},{"Typeface name":"Webdings","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"9210","Unicode hex":"23FA"},{"Typeface name":"Webdings","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"128474","Unicode hex":"1F5DA"},{"Typeface name":"Webdings","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"128499","Unicode hex":"1F5F3"},{"Typeface name":"Webdings","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128736","Unicode hex":"1F6E0"},{"Typeface name":"Webdings","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"127959","Unicode hex":"1F3D7"},{"Typeface name":"Webdings","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"127960","Unicode hex":"1F3D8"},{"Typeface name":"Webdings","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"127961","Unicode hex":"1F3D9"},{"Typeface name":"Webdings","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"127962","Unicode hex":"1F3DA"},{"Typeface name":"Webdings","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"127964","Unicode hex":"1F3DC"},{"Typeface name":"Webdings","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"127981","Unicode hex":"1F3ED"},{"Typeface name":"Webdings","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"127963","Unicode hex":"1F3DB"},{"Typeface name":"Webdings","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"127968","Unicode hex":"1F3E0"},{"Typeface name":"Webdings","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"127958","Unicode hex":"1F3D6"},{"Typeface name":"Webdings","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"127965","Unicode hex":"1F3DD"},{"Typeface name":"Webdings","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128739","Unicode hex":"1F6E3"},{"Typeface name":"Webdings","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"128269","Unicode hex":"1F50D"},{"Typeface name":"Webdings","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"127956","Unicode hex":"1F3D4"},{"Typeface name":"Webdings","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128065","Unicode hex":"1F441"},{"Typeface name":"Webdings","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"128066","Unicode hex":"1F442"},{"Typeface name":"Webdings","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"127966","Unicode hex":"1F3DE"},{"Typeface name":"Webdings","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"127957","Unicode hex":"1F3D5"},{"Typeface name":"Webdings","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"128740","Unicode hex":"1F6E4"},{"Typeface name":"Webdings","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"127967","Unicode hex":"1F3DF"},{"Typeface name":"Webdings","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"128755","Unicode hex":"1F6F3"},{"Typeface name":"Webdings","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"128364","Unicode hex":"1F56C"},{"Typeface name":"Webdings","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"128363","Unicode hex":"1F56B"},{"Typeface name":"Webdings","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128360","Unicode hex":"1F568"},{"Typeface name":"Webdings","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"128264","Unicode hex":"1F508"},{"Typeface name":"Webdings","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"127892","Unicode hex":"1F394"},{"Typeface name":"Webdings","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"127893","Unicode hex":"1F395"},{"Typeface name":"Webdings","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"128492","Unicode hex":"1F5EC"},{"Typeface name":"Webdings","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128637","Unicode hex":"1F67D"},{"Typeface name":"Webdings","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"128493","Unicode hex":"1F5ED"},{"Typeface name":"Webdings","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"128490","Unicode hex":"1F5EA"},{"Typeface name":"Webdings","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"128491","Unicode hex":"1F5EB"},{"Typeface name":"Webdings","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"11156","Unicode hex":"2B94"},{"Typeface name":"Webdings","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"10004","Unicode hex":"2714"},{"Typeface name":"Webdings","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"128690","Unicode hex":"1F6B2"},{"Typeface name":"Webdings","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"11036","Unicode hex":"2B1C"},{"Typeface name":"Webdings","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"128737","Unicode hex":"1F6E1"},{"Typeface name":"Webdings","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"128230","Unicode hex":"1F4E6"},{"Typeface name":"Webdings","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"128753","Unicode hex":"1F6F1"},{"Typeface name":"Webdings","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"11035","Unicode hex":"2B1B"},{"Typeface name":"Webdings","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"128657","Unicode hex":"1F691"},{"Typeface name":"Webdings","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"128712","Unicode hex":"1F6C8"},{"Typeface name":"Webdings","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"128745","Unicode hex":"1F6E9"},{"Typeface name":"Webdings","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"128752","Unicode hex":"1F6F0"},{"Typeface name":"Webdings","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"128968","Unicode hex":"1F7C8"},{"Typeface name":"Webdings","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"128372","Unicode hex":"1F574"},{"Typeface name":"Webdings","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"11044","Unicode hex":"2B24"},{"Typeface name":"Webdings","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"128741","Unicode hex":"1F6E5"},{"Typeface name":"Webdings","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"128660","Unicode hex":"1F694"},{"Typeface name":"Webdings","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"128472","Unicode hex":"1F5D8"},{"Typeface name":"Webdings","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"128473","Unicode hex":"1F5D9"},{"Typeface name":"Webdings","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"10067","Unicode hex":"2753"},{"Typeface name":"Webdings","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"128754","Unicode hex":"1F6F2"},{"Typeface name":"Webdings","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"128647","Unicode hex":"1F687"},{"Typeface name":"Webdings","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"128653","Unicode hex":"1F68D"},{"Typeface name":"Webdings","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"9971","Unicode hex":"26F3"},{"Typeface name":"Webdings","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"10680","Unicode hex":"29B8"},{"Typeface name":"Webdings","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"8854","Unicode hex":"2296"},{"Typeface name":"Webdings","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"128685","Unicode hex":"1F6AD"},{"Typeface name":"Webdings","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"128494","Unicode hex":"1F5EE"},{"Typeface name":"Webdings","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"9168","Unicode hex":"23D0"},{"Typeface name":"Webdings","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128495","Unicode hex":"1F5EF"},{"Typeface name":"Webdings","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128498","Unicode hex":"1F5F2"},{"Typeface name":"Webdings","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"128697","Unicode hex":"1F6B9"},{"Typeface name":"Webdings","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"128698","Unicode hex":"1F6BA"},{"Typeface name":"Webdings","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"128713","Unicode hex":"1F6C9"},{"Typeface name":"Webdings","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"128714","Unicode hex":"1F6CA"},{"Typeface name":"Webdings","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"128700","Unicode hex":"1F6BC"},{"Typeface name":"Webdings","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"128125","Unicode hex":"1F47D"},{"Typeface name":"Webdings","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"127947","Unicode hex":"1F3CB"},{"Typeface name":"Webdings","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"9975","Unicode hex":"26F7"},{"Typeface name":"Webdings","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"127938","Unicode hex":"1F3C2"},{"Typeface name":"Webdings","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"127948","Unicode hex":"1F3CC"},{"Typeface name":"Webdings","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"127946","Unicode hex":"1F3CA"},{"Typeface name":"Webdings","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"127940","Unicode hex":"1F3C4"},{"Typeface name":"Webdings","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"127949","Unicode hex":"1F3CD"},{"Typeface name":"Webdings","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"127950","Unicode hex":"1F3CE"},{"Typeface name":"Webdings","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"128664","Unicode hex":"1F698"},{"Typeface name":"Webdings","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"128480","Unicode hex":"1F5E0"},{"Typeface name":"Webdings","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"128738","Unicode hex":"1F6E2"},{"Typeface name":"Webdings","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"128176","Unicode hex":"1F4B0"},{"Typeface name":"Webdings","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"127991","Unicode hex":"1F3F7"},{"Typeface name":"Webdings","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"128179","Unicode hex":"1F4B3"},{"Typeface name":"Webdings","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"128106","Unicode hex":"1F46A"},{"Typeface name":"Webdings","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"128481","Unicode hex":"1F5E1"},{"Typeface name":"Webdings","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128482","Unicode hex":"1F5E2"},{"Typeface name":"Webdings","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"128483","Unicode hex":"1F5E3"},{"Typeface name":"Webdings","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"10031","Unicode hex":"272F"},{"Typeface name":"Webdings","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"128388","Unicode hex":"1F584"},{"Typeface name":"Webdings","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128389","Unicode hex":"1F585"},{"Typeface name":"Webdings","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128387","Unicode hex":"1F583"},{"Typeface name":"Webdings","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128390","Unicode hex":"1F586"},{"Typeface name":"Webdings","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"128441","Unicode hex":"1F5B9"},{"Typeface name":"Webdings","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"128442","Unicode hex":"1F5BA"},{"Typeface name":"Webdings","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"128443","Unicode hex":"1F5BB"},{"Typeface name":"Webdings","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"128373","Unicode hex":"1F575"},{"Typeface name":"Webdings","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"128368","Unicode hex":"1F570"},{"Typeface name":"Webdings","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"128445","Unicode hex":"1F5BD"},{"Typeface name":"Webdings","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"128446","Unicode hex":"1F5BE"},{"Typeface name":"Webdings","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128203","Unicode hex":"1F4CB"},{"Typeface name":"Webdings","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128466","Unicode hex":"1F5D2"},{"Typeface name":"Webdings","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128467","Unicode hex":"1F5D3"},{"Typeface name":"Webdings","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"128366","Unicode hex":"1F56E"},{"Typeface name":"Webdings","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"128218","Unicode hex":"1F4DA"},{"Typeface name":"Webdings","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128478","Unicode hex":"1F5DE"},{"Typeface name":"Webdings","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128479","Unicode hex":"1F5DF"},{"Typeface name":"Webdings","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"128451","Unicode hex":"1F5C3"},{"Typeface name":"Webdings","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128450","Unicode hex":"1F5C2"},{"Typeface name":"Webdings","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"128444","Unicode hex":"1F5BC"},{"Typeface name":"Webdings","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"127917","Unicode hex":"1F3AD"},{"Typeface name":"Webdings","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"127900","Unicode hex":"1F39C"},{"Typeface name":"Webdings","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"127896","Unicode hex":"1F398"},{"Typeface name":"Webdings","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"127897","Unicode hex":"1F399"},{"Typeface name":"Webdings","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"127911","Unicode hex":"1F3A7"},{"Typeface name":"Webdings","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"128191","Unicode hex":"1F4BF"},{"Typeface name":"Webdings","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"127902","Unicode hex":"1F39E"},{"Typeface name":"Webdings","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"128247","Unicode hex":"1F4F7"},{"Typeface name":"Webdings","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"127903","Unicode hex":"1F39F"},{"Typeface name":"Webdings","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"127916","Unicode hex":"1F3AC"},{"Typeface name":"Webdings","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"128253","Unicode hex":"1F4FD"},{"Typeface name":"Webdings","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128249","Unicode hex":"1F4F9"},{"Typeface name":"Webdings","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"128254","Unicode hex":"1F4FE"},{"Typeface name":"Webdings","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"128251","Unicode hex":"1F4FB"},{"Typeface name":"Webdings","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"127898","Unicode hex":"1F39A"},{"Typeface name":"Webdings","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"127899","Unicode hex":"1F39B"},{"Typeface name":"Webdings","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"128250","Unicode hex":"1F4FA"},{"Typeface name":"Webdings","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"128187","Unicode hex":"1F4BB"},{"Typeface name":"Webdings","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"128421","Unicode hex":"1F5A5"},{"Typeface name":"Webdings","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"128422","Unicode hex":"1F5A6"},{"Typeface name":"Webdings","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"128423","Unicode hex":"1F5A7"},{"Typeface name":"Webdings","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"128377","Unicode hex":"1F579"},{"Typeface name":"Webdings","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"127918","Unicode hex":"1F3AE"},{"Typeface name":"Webdings","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"128379","Unicode hex":"1F57B"},{"Typeface name":"Webdings","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"128380","Unicode hex":"1F57C"},{"Typeface name":"Webdings","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"128223","Unicode hex":"1F4DF"},{"Typeface name":"Webdings","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"128385","Unicode hex":"1F581"},{"Typeface name":"Webdings","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"128384","Unicode hex":"1F580"},{"Typeface name":"Webdings","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"128424","Unicode hex":"1F5A8"},{"Typeface name":"Webdings","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128425","Unicode hex":"1F5A9"},{"Typeface name":"Webdings","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128447","Unicode hex":"1F5BF"},{"Typeface name":"Webdings","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128426","Unicode hex":"1F5AA"},{"Typeface name":"Webdings","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128476","Unicode hex":"1F5DC"},{"Typeface name":"Webdings","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128274","Unicode hex":"1F512"},{"Typeface name":"Webdings","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128275","Unicode hex":"1F513"},{"Typeface name":"Webdings","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128477","Unicode hex":"1F5DD"},{"Typeface name":"Webdings","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128229","Unicode hex":"1F4E5"},{"Typeface name":"Webdings","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128228","Unicode hex":"1F4E4"},{"Typeface name":"Webdings","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128371","Unicode hex":"1F573"},{"Typeface name":"Webdings","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"127779","Unicode hex":"1F323"},{"Typeface name":"Webdings","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"127780","Unicode hex":"1F324"},{"Typeface name":"Webdings","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"127781","Unicode hex":"1F325"},{"Typeface name":"Webdings","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"127782","Unicode hex":"1F326"},{"Typeface name":"Webdings","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"9729","Unicode hex":"2601"},{"Typeface name":"Webdings","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"127784","Unicode hex":"1F328"},{"Typeface name":"Webdings","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"127783","Unicode hex":"1F327"},{"Typeface name":"Webdings","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"127785","Unicode hex":"1F329"},{"Typeface name":"Webdings","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"127786","Unicode hex":"1F32A"},{"Typeface name":"Webdings","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"127788","Unicode hex":"1F32C"},{"Typeface name":"Webdings","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"127787","Unicode hex":"1F32B"},{"Typeface name":"Webdings","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"127772","Unicode hex":"1F31C"},{"Typeface name":"Webdings","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"127777","Unicode hex":"1F321"},{"Typeface name":"Webdings","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"128715","Unicode hex":"1F6CB"},{"Typeface name":"Webdings","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"128719","Unicode hex":"1F6CF"},{"Typeface name":"Webdings","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"127869","Unicode hex":"1F37D"},{"Typeface name":"Webdings","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"127864","Unicode hex":"1F378"},{"Typeface name":"Webdings","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"128718","Unicode hex":"1F6CE"},{"Typeface name":"Webdings","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"128717","Unicode hex":"1F6CD"},{"Typeface name":"Webdings","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"9413","Unicode hex":"24C5"},{"Typeface name":"Webdings","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"9855","Unicode hex":"267F"},{"Typeface name":"Webdings","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"128710","Unicode hex":"1F6C6"},{"Typeface name":"Webdings","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"128392","Unicode hex":"1F588"},{"Typeface name":"Webdings","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"127891","Unicode hex":"1F393"},{"Typeface name":"Webdings","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"128484","Unicode hex":"1F5E4"},{"Typeface name":"Webdings","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"128485","Unicode hex":"1F5E5"},{"Typeface name":"Webdings","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"128486","Unicode hex":"1F5E6"},{"Typeface name":"Webdings","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"128487","Unicode hex":"1F5E7"},{"Typeface name":"Webdings","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"128746","Unicode hex":"1F6EA"},{"Typeface name":"Webdings","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"128063","Unicode hex":"1F43F"},{"Typeface name":"Webdings","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"128038","Unicode hex":"1F426"},{"Typeface name":"Webdings","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"128031","Unicode hex":"1F41F"},{"Typeface name":"Webdings","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"128021","Unicode hex":"1F415"},{"Typeface name":"Webdings","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"128008","Unicode hex":"1F408"},{"Typeface name":"Webdings","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"128620","Unicode hex":"1F66C"},{"Typeface name":"Webdings","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"128622","Unicode hex":"1F66E"},{"Typeface name":"Webdings","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"128621","Unicode hex":"1F66D"},{"Typeface name":"Webdings","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"128623","Unicode hex":"1F66F"},{"Typeface name":"Webdings","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"128506","Unicode hex":"1F5FA"},{"Typeface name":"Webdings","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"127757","Unicode hex":"1F30D"},{"Typeface name":"Webdings","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"127759","Unicode hex":"1F30F"},{"Typeface name":"Webdings","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"127758","Unicode hex":"1F30E"},{"Typeface name":"Webdings","Dingbat dec":"255","Dingbat hex":"FF","Unicode dec":"128330","Unicode hex":"1F54A"},{"Typeface name":"Wingdings","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128393","Unicode hex":"1F589"},{"Typeface name":"Wingdings","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"9986","Unicode hex":"2702"},{"Typeface name":"Wingdings","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"9985","Unicode hex":"2701"},{"Typeface name":"Wingdings","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128083","Unicode hex":"1F453"},{"Typeface name":"Wingdings","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"128365","Unicode hex":"1F56D"},{"Typeface name":"Wingdings","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"128366","Unicode hex":"1F56E"},{"Typeface name":"Wingdings","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128367","Unicode hex":"1F56F"},{"Typeface name":"Wingdings","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128383","Unicode hex":"1F57F"},{"Typeface name":"Wingdings","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"9990","Unicode hex":"2706"},{"Typeface name":"Wingdings","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128386","Unicode hex":"1F582"},{"Typeface name":"Wingdings","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128387","Unicode hex":"1F583"},{"Typeface name":"Wingdings","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"128234","Unicode hex":"1F4EA"},{"Typeface name":"Wingdings","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"128235","Unicode hex":"1F4EB"},{"Typeface name":"Wingdings","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128236","Unicode hex":"1F4EC"},{"Typeface name":"Wingdings","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128237","Unicode hex":"1F4ED"},{"Typeface name":"Wingdings","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128448","Unicode hex":"1F5C0"},{"Typeface name":"Wingdings","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128449","Unicode hex":"1F5C1"},{"Typeface name":"Wingdings","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128462","Unicode hex":"1F5CE"},{"Typeface name":"Wingdings","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"128463","Unicode hex":"1F5CF"},{"Typeface name":"Wingdings","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"128464","Unicode hex":"1F5D0"},{"Typeface name":"Wingdings","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"128452","Unicode hex":"1F5C4"},{"Typeface name":"Wingdings","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"8987","Unicode hex":"231B"},{"Typeface name":"Wingdings","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"128430","Unicode hex":"1F5AE"},{"Typeface name":"Wingdings","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"128432","Unicode hex":"1F5B0"},{"Typeface name":"Wingdings","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"128434","Unicode hex":"1F5B2"},{"Typeface name":"Wingdings","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"128435","Unicode hex":"1F5B3"},{"Typeface name":"Wingdings","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"128436","Unicode hex":"1F5B4"},{"Typeface name":"Wingdings","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"128427","Unicode hex":"1F5AB"},{"Typeface name":"Wingdings","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"128428","Unicode hex":"1F5AC"},{"Typeface name":"Wingdings","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"9991","Unicode hex":"2707"},{"Typeface name":"Wingdings","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"9997","Unicode hex":"270D"},{"Typeface name":"Wingdings","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128398","Unicode hex":"1F58E"},{"Typeface name":"Wingdings","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"9996","Unicode hex":"270C"},{"Typeface name":"Wingdings","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"128399","Unicode hex":"1F58F"},{"Typeface name":"Wingdings","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"128077","Unicode hex":"1F44D"},{"Typeface name":"Wingdings","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"128078","Unicode hex":"1F44E"},{"Typeface name":"Wingdings","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"9756","Unicode hex":"261C"},{"Typeface name":"Wingdings","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"9758","Unicode hex":"261E"},{"Typeface name":"Wingdings","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"9757","Unicode hex":"261D"},{"Typeface name":"Wingdings","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"9759","Unicode hex":"261F"},{"Typeface name":"Wingdings","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"128400","Unicode hex":"1F590"},{"Typeface name":"Wingdings","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"9786","Unicode hex":"263A"},{"Typeface name":"Wingdings","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128528","Unicode hex":"1F610"},{"Typeface name":"Wingdings","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"9785","Unicode hex":"2639"},{"Typeface name":"Wingdings","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"128163","Unicode hex":"1F4A3"},{"Typeface name":"Wingdings","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128369","Unicode hex":"1F571"},{"Typeface name":"Wingdings","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"127987","Unicode hex":"1F3F3"},{"Typeface name":"Wingdings","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"127985","Unicode hex":"1F3F1"},{"Typeface name":"Wingdings","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"9992","Unicode hex":"2708"},{"Typeface name":"Wingdings","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9788","Unicode hex":"263C"},{"Typeface name":"Wingdings","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"127778","Unicode hex":"1F322"},{"Typeface name":"Wingdings","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"10052","Unicode hex":"2744"},{"Typeface name":"Wingdings","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"128326","Unicode hex":"1F546"},{"Typeface name":"Wingdings","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"10014","Unicode hex":"271E"},{"Typeface name":"Wingdings","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128328","Unicode hex":"1F548"},{"Typeface name":"Wingdings","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"10016","Unicode hex":"2720"},{"Typeface name":"Wingdings","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"10017","Unicode hex":"2721"},{"Typeface name":"Wingdings","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"9770","Unicode hex":"262A"},{"Typeface name":"Wingdings","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"9775","Unicode hex":"262F"},{"Typeface name":"Wingdings","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128329","Unicode hex":"1F549"},{"Typeface name":"Wingdings","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"9784","Unicode hex":"2638"},{"Typeface name":"Wingdings","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"9800","Unicode hex":"2648"},{"Typeface name":"Wingdings","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"9801","Unicode hex":"2649"},{"Typeface name":"Wingdings","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"9802","Unicode hex":"264A"},{"Typeface name":"Wingdings","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"9803","Unicode hex":"264B"},{"Typeface name":"Wingdings","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"9804","Unicode hex":"264C"},{"Typeface name":"Wingdings","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"9805","Unicode hex":"264D"},{"Typeface name":"Wingdings","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"9806","Unicode hex":"264E"},{"Typeface name":"Wingdings","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"9807","Unicode hex":"264F"},{"Typeface name":"Wingdings","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"9808","Unicode hex":"2650"},{"Typeface name":"Wingdings","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"9809","Unicode hex":"2651"},{"Typeface name":"Wingdings","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"9810","Unicode hex":"2652"},{"Typeface name":"Wingdings","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"9811","Unicode hex":"2653"},{"Typeface name":"Wingdings","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"128624","Unicode hex":"1F670"},{"Typeface name":"Wingdings","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"128629","Unicode hex":"1F675"},{"Typeface name":"Wingdings","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"9899","Unicode hex":"26AB"},{"Typeface name":"Wingdings","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"128318","Unicode hex":"1F53E"},{"Typeface name":"Wingdings","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"9724","Unicode hex":"25FC"},{"Typeface name":"Wingdings","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"128911","Unicode hex":"1F78F"},{"Typeface name":"Wingdings","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"128912","Unicode hex":"1F790"},{"Typeface name":"Wingdings","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"10065","Unicode hex":"2751"},{"Typeface name":"Wingdings","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"10066","Unicode hex":"2752"},{"Typeface name":"Wingdings","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"128927","Unicode hex":"1F79F"},{"Typeface name":"Wingdings","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"10731","Unicode hex":"29EB"},{"Typeface name":"Wingdings","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"9670","Unicode hex":"25C6"},{"Typeface name":"Wingdings","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"10070","Unicode hex":"2756"},{"Typeface name":"Wingdings","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"11049","Unicode hex":"2B29"},{"Typeface name":"Wingdings","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"8999","Unicode hex":"2327"},{"Typeface name":"Wingdings","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"11193","Unicode hex":"2BB9"},{"Typeface name":"Wingdings","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"8984","Unicode hex":"2318"},{"Typeface name":"Wingdings","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"127989","Unicode hex":"1F3F5"},{"Typeface name":"Wingdings","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"127990","Unicode hex":"1F3F6"},{"Typeface name":"Wingdings","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128630","Unicode hex":"1F676"},{"Typeface name":"Wingdings","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128631","Unicode hex":"1F677"},{"Typeface name":"Wingdings","Dingbat dec":"127","Dingbat hex":"7F","Unicode dec":"9647","Unicode hex":"25AF"},{"Typeface name":"Wingdings","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"127243","Unicode hex":"1F10B"},{"Typeface name":"Wingdings","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"10112","Unicode hex":"2780"},{"Typeface name":"Wingdings","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"10113","Unicode hex":"2781"},{"Typeface name":"Wingdings","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"10114","Unicode hex":"2782"},{"Typeface name":"Wingdings","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"10115","Unicode hex":"2783"},{"Typeface name":"Wingdings","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"10116","Unicode hex":"2784"},{"Typeface name":"Wingdings","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"10117","Unicode hex":"2785"},{"Typeface name":"Wingdings","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"10118","Unicode hex":"2786"},{"Typeface name":"Wingdings","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"10119","Unicode hex":"2787"},{"Typeface name":"Wingdings","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"10120","Unicode hex":"2788"},{"Typeface name":"Wingdings","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"10121","Unicode hex":"2789"},{"Typeface name":"Wingdings","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"127244","Unicode hex":"1F10C"},{"Typeface name":"Wingdings","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"10122","Unicode hex":"278A"},{"Typeface name":"Wingdings","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"10123","Unicode hex":"278B"},{"Typeface name":"Wingdings","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"10124","Unicode hex":"278C"},{"Typeface name":"Wingdings","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"10125","Unicode hex":"278D"},{"Typeface name":"Wingdings","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"10126","Unicode hex":"278E"},{"Typeface name":"Wingdings","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"10127","Unicode hex":"278F"},{"Typeface name":"Wingdings","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"10128","Unicode hex":"2790"},{"Typeface name":"Wingdings","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"10129","Unicode hex":"2791"},{"Typeface name":"Wingdings","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"10130","Unicode hex":"2792"},{"Typeface name":"Wingdings","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"10131","Unicode hex":"2793"},{"Typeface name":"Wingdings","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128610","Unicode hex":"1F662"},{"Typeface name":"Wingdings","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"128608","Unicode hex":"1F660"},{"Typeface name":"Wingdings","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"128609","Unicode hex":"1F661"},{"Typeface name":"Wingdings","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"128611","Unicode hex":"1F663"},{"Typeface name":"Wingdings","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128606","Unicode hex":"1F65E"},{"Typeface name":"Wingdings","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128604","Unicode hex":"1F65C"},{"Typeface name":"Wingdings","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128605","Unicode hex":"1F65D"},{"Typeface name":"Wingdings","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"128607","Unicode hex":"1F65F"},{"Typeface name":"Wingdings","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"8729","Unicode hex":"2219"},{"Typeface name":"Wingdings","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"8226","Unicode hex":"2022"},{"Typeface name":"Wingdings","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"11037","Unicode hex":"2B1D"},{"Typeface name":"Wingdings","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"11096","Unicode hex":"2B58"},{"Typeface name":"Wingdings","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"128902","Unicode hex":"1F786"},{"Typeface name":"Wingdings","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"128904","Unicode hex":"1F788"},{"Typeface name":"Wingdings","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128906","Unicode hex":"1F78A"},{"Typeface name":"Wingdings","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128907","Unicode hex":"1F78B"},{"Typeface name":"Wingdings","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128319","Unicode hex":"1F53F"},{"Typeface name":"Wingdings","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"9642","Unicode hex":"25AA"},{"Typeface name":"Wingdings","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"128910","Unicode hex":"1F78E"},{"Typeface name":"Wingdings","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128961","Unicode hex":"1F7C1"},{"Typeface name":"Wingdings","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128965","Unicode hex":"1F7C5"},{"Typeface name":"Wingdings","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"9733","Unicode hex":"2605"},{"Typeface name":"Wingdings","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128971","Unicode hex":"1F7CB"},{"Typeface name":"Wingdings","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"128975","Unicode hex":"1F7CF"},{"Typeface name":"Wingdings","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"128979","Unicode hex":"1F7D3"},{"Typeface name":"Wingdings","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"128977","Unicode hex":"1F7D1"},{"Typeface name":"Wingdings","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"11216","Unicode hex":"2BD0"},{"Typeface name":"Wingdings","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"8982","Unicode hex":"2316"},{"Typeface name":"Wingdings","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"11214","Unicode hex":"2BCE"},{"Typeface name":"Wingdings","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"11215","Unicode hex":"2BCF"},{"Typeface name":"Wingdings","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"11217","Unicode hex":"2BD1"},{"Typeface name":"Wingdings","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"10026","Unicode hex":"272A"},{"Typeface name":"Wingdings","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"10032","Unicode hex":"2730"},{"Typeface name":"Wingdings","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"128336","Unicode hex":"1F550"},{"Typeface name":"Wingdings","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"128337","Unicode hex":"1F551"},{"Typeface name":"Wingdings","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128338","Unicode hex":"1F552"},{"Typeface name":"Wingdings","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"128339","Unicode hex":"1F553"},{"Typeface name":"Wingdings","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"128340","Unicode hex":"1F554"},{"Typeface name":"Wingdings","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"128341","Unicode hex":"1F555"},{"Typeface name":"Wingdings","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"128342","Unicode hex":"1F556"},{"Typeface name":"Wingdings","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"128343","Unicode hex":"1F557"},{"Typeface name":"Wingdings","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"128344","Unicode hex":"1F558"},{"Typeface name":"Wingdings","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"128345","Unicode hex":"1F559"},{"Typeface name":"Wingdings","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"128346","Unicode hex":"1F55A"},{"Typeface name":"Wingdings","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"128347","Unicode hex":"1F55B"},{"Typeface name":"Wingdings","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"11184","Unicode hex":"2BB0"},{"Typeface name":"Wingdings","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"11185","Unicode hex":"2BB1"},{"Typeface name":"Wingdings","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"11186","Unicode hex":"2BB2"},{"Typeface name":"Wingdings","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"11187","Unicode hex":"2BB3"},{"Typeface name":"Wingdings","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"11188","Unicode hex":"2BB4"},{"Typeface name":"Wingdings","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"11189","Unicode hex":"2BB5"},{"Typeface name":"Wingdings","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"11190","Unicode hex":"2BB6"},{"Typeface name":"Wingdings","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"11191","Unicode hex":"2BB7"},{"Typeface name":"Wingdings","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128618","Unicode hex":"1F66A"},{"Typeface name":"Wingdings","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128619","Unicode hex":"1F66B"},{"Typeface name":"Wingdings","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128597","Unicode hex":"1F655"},{"Typeface name":"Wingdings","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128596","Unicode hex":"1F654"},{"Typeface name":"Wingdings","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128599","Unicode hex":"1F657"},{"Typeface name":"Wingdings","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128598","Unicode hex":"1F656"},{"Typeface name":"Wingdings","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128592","Unicode hex":"1F650"},{"Typeface name":"Wingdings","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128593","Unicode hex":"1F651"},{"Typeface name":"Wingdings","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128594","Unicode hex":"1F652"},{"Typeface name":"Wingdings","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128595","Unicode hex":"1F653"},{"Typeface name":"Wingdings","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"9003","Unicode hex":"232B"},{"Typeface name":"Wingdings","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"8998","Unicode hex":"2326"},{"Typeface name":"Wingdings","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"11160","Unicode hex":"2B98"},{"Typeface name":"Wingdings","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"11162","Unicode hex":"2B9A"},{"Typeface name":"Wingdings","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"11161","Unicode hex":"2B99"},{"Typeface name":"Wingdings","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"11163","Unicode hex":"2B9B"},{"Typeface name":"Wingdings","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"11144","Unicode hex":"2B88"},{"Typeface name":"Wingdings","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"11146","Unicode hex":"2B8A"},{"Typeface name":"Wingdings","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"11145","Unicode hex":"2B89"},{"Typeface name":"Wingdings","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"11147","Unicode hex":"2B8B"},{"Typeface name":"Wingdings","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"129128","Unicode hex":"1F868"},{"Typeface name":"Wingdings","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"129130","Unicode hex":"1F86A"},{"Typeface name":"Wingdings","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"129129","Unicode hex":"1F869"},{"Typeface name":"Wingdings","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"129131","Unicode hex":"1F86B"},{"Typeface name":"Wingdings","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"129132","Unicode hex":"1F86C"},{"Typeface name":"Wingdings","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"129133","Unicode hex":"1F86D"},{"Typeface name":"Wingdings","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"129135","Unicode hex":"1F86F"},{"Typeface name":"Wingdings","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"129134","Unicode hex":"1F86E"},{"Typeface name":"Wingdings","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"129144","Unicode hex":"1F878"},{"Typeface name":"Wingdings","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"129146","Unicode hex":"1F87A"},{"Typeface name":"Wingdings","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"129145","Unicode hex":"1F879"},{"Typeface name":"Wingdings","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"129147","Unicode hex":"1F87B"},{"Typeface name":"Wingdings","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"129148","Unicode hex":"1F87C"},{"Typeface name":"Wingdings","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"129149","Unicode hex":"1F87D"},{"Typeface name":"Wingdings","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"129151","Unicode hex":"1F87F"},{"Typeface name":"Wingdings","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"129150","Unicode hex":"1F87E"},{"Typeface name":"Wingdings","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"8678","Unicode hex":"21E6"},{"Typeface name":"Wingdings","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"8680","Unicode hex":"21E8"},{"Typeface name":"Wingdings","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"8679","Unicode hex":"21E7"},{"Typeface name":"Wingdings","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"8681","Unicode hex":"21E9"},{"Typeface name":"Wingdings","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"11012","Unicode hex":"2B04"},{"Typeface name":"Wingdings","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"8691","Unicode hex":"21F3"},{"Typeface name":"Wingdings","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"11009","Unicode hex":"2B01"},{"Typeface name":"Wingdings","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"11008","Unicode hex":"2B00"},{"Typeface name":"Wingdings","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"11011","Unicode hex":"2B03"},{"Typeface name":"Wingdings","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"11010","Unicode hex":"2B02"},{"Typeface name":"Wingdings","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"129196","Unicode hex":"1F8AC"},{"Typeface name":"Wingdings","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"129197","Unicode hex":"1F8AD"},{"Typeface name":"Wingdings","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"128502","Unicode hex":"1F5F6"},{"Typeface name":"Wingdings","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"10003","Unicode hex":"2713"},{"Typeface name":"Wingdings","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"128503","Unicode hex":"1F5F7"},{"Typeface name":"Wingdings","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"128505","Unicode hex":"1F5F9"},{"Typeface name":"Wingdings 2","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings 2","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128394","Unicode hex":"1F58A"},{"Typeface name":"Wingdings 2","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"128395","Unicode hex":"1F58B"},{"Typeface name":"Wingdings 2","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"128396","Unicode hex":"1F58C"},{"Typeface name":"Wingdings 2","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128397","Unicode hex":"1F58D"},{"Typeface name":"Wingdings 2","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"9988","Unicode hex":"2704"},{"Typeface name":"Wingdings 2","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"9984","Unicode hex":"2700"},{"Typeface name":"Wingdings 2","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128382","Unicode hex":"1F57E"},{"Typeface name":"Wingdings 2","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128381","Unicode hex":"1F57D"},{"Typeface name":"Wingdings 2","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"128453","Unicode hex":"1F5C5"},{"Typeface name":"Wingdings 2","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128454","Unicode hex":"1F5C6"},{"Typeface name":"Wingdings 2","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128455","Unicode hex":"1F5C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"128456","Unicode hex":"1F5C8"},{"Typeface name":"Wingdings 2","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"128457","Unicode hex":"1F5C9"},{"Typeface name":"Wingdings 2","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128458","Unicode hex":"1F5CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128459","Unicode hex":"1F5CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128460","Unicode hex":"1F5CC"},{"Typeface name":"Wingdings 2","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128461","Unicode hex":"1F5CD"},{"Typeface name":"Wingdings 2","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128203","Unicode hex":"1F4CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"128465","Unicode hex":"1F5D1"},{"Typeface name":"Wingdings 2","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"128468","Unicode hex":"1F5D4"},{"Typeface name":"Wingdings 2","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"128437","Unicode hex":"1F5B5"},{"Typeface name":"Wingdings 2","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"128438","Unicode hex":"1F5B6"},{"Typeface name":"Wingdings 2","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"128439","Unicode hex":"1F5B7"},{"Typeface name":"Wingdings 2","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"128440","Unicode hex":"1F5B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"128429","Unicode hex":"1F5AD"},{"Typeface name":"Wingdings 2","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"128431","Unicode hex":"1F5AF"},{"Typeface name":"Wingdings 2","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"128433","Unicode hex":"1F5B1"},{"Typeface name":"Wingdings 2","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"128402","Unicode hex":"1F592"},{"Typeface name":"Wingdings 2","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"128403","Unicode hex":"1F593"},{"Typeface name":"Wingdings 2","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"128408","Unicode hex":"1F598"},{"Typeface name":"Wingdings 2","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"128409","Unicode hex":"1F599"},{"Typeface name":"Wingdings 2","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128410","Unicode hex":"1F59A"},{"Typeface name":"Wingdings 2","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"128411","Unicode hex":"1F59B"},{"Typeface name":"Wingdings 2","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"128072","Unicode hex":"1F448"},{"Typeface name":"Wingdings 2","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"128073","Unicode hex":"1F449"},{"Typeface name":"Wingdings 2","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"128412","Unicode hex":"1F59C"},{"Typeface name":"Wingdings 2","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"128413","Unicode hex":"1F59D"},{"Typeface name":"Wingdings 2","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"128414","Unicode hex":"1F59E"},{"Typeface name":"Wingdings 2","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"128415","Unicode hex":"1F59F"},{"Typeface name":"Wingdings 2","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"128416","Unicode hex":"1F5A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"128417","Unicode hex":"1F5A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"128070","Unicode hex":"1F446"},{"Typeface name":"Wingdings 2","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128071","Unicode hex":"1F447"},{"Typeface name":"Wingdings 2","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"128418","Unicode hex":"1F5A2"},{"Typeface name":"Wingdings 2","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"128419","Unicode hex":"1F5A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128401","Unicode hex":"1F591"},{"Typeface name":"Wingdings 2","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"128500","Unicode hex":"1F5F4"},{"Typeface name":"Wingdings 2","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"128504","Unicode hex":"1F5F8"},{"Typeface name":"Wingdings 2","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"128501","Unicode hex":"1F5F5"},{"Typeface name":"Wingdings 2","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9745","Unicode hex":"2611"},{"Typeface name":"Wingdings 2","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"11197","Unicode hex":"2BBD"},{"Typeface name":"Wingdings 2","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"9746","Unicode hex":"2612"},{"Typeface name":"Wingdings 2","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"11198","Unicode hex":"2BBE"},{"Typeface name":"Wingdings 2","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"11199","Unicode hex":"2BBF"},{"Typeface name":"Wingdings 2","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128711","Unicode hex":"1F6C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"10680","Unicode hex":"29B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"128625","Unicode hex":"1F671"},{"Typeface name":"Wingdings 2","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"128628","Unicode hex":"1F674"},{"Typeface name":"Wingdings 2","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"128626","Unicode hex":"1F672"},{"Typeface name":"Wingdings 2","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128627","Unicode hex":"1F673"},{"Typeface name":"Wingdings 2","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"8253","Unicode hex":"203D"},{"Typeface name":"Wingdings 2","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"128633","Unicode hex":"1F679"},{"Typeface name":"Wingdings 2","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"128634","Unicode hex":"1F67A"},{"Typeface name":"Wingdings 2","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"128635","Unicode hex":"1F67B"},{"Typeface name":"Wingdings 2","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"128614","Unicode hex":"1F666"},{"Typeface name":"Wingdings 2","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"128612","Unicode hex":"1F664"},{"Typeface name":"Wingdings 2","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"128613","Unicode hex":"1F665"},{"Typeface name":"Wingdings 2","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"128615","Unicode hex":"1F667"},{"Typeface name":"Wingdings 2","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"128602","Unicode hex":"1F65A"},{"Typeface name":"Wingdings 2","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"128600","Unicode hex":"1F658"},{"Typeface name":"Wingdings 2","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"128601","Unicode hex":"1F659"},{"Typeface name":"Wingdings 2","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"128603","Unicode hex":"1F65B"},{"Typeface name":"Wingdings 2","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"9450","Unicode hex":"24EA"},{"Typeface name":"Wingdings 2","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"9312","Unicode hex":"2460"},{"Typeface name":"Wingdings 2","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"9313","Unicode hex":"2461"},{"Typeface name":"Wingdings 2","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"9314","Unicode hex":"2462"},{"Typeface name":"Wingdings 2","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"9315","Unicode hex":"2463"},{"Typeface name":"Wingdings 2","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"9316","Unicode hex":"2464"},{"Typeface name":"Wingdings 2","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"9317","Unicode hex":"2465"},{"Typeface name":"Wingdings 2","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"9318","Unicode hex":"2466"},{"Typeface name":"Wingdings 2","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"9319","Unicode hex":"2467"},{"Typeface name":"Wingdings 2","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"9320","Unicode hex":"2468"},{"Typeface name":"Wingdings 2","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"9321","Unicode hex":"2469"},{"Typeface name":"Wingdings 2","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"9471","Unicode hex":"24FF"},{"Typeface name":"Wingdings 2","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"10102","Unicode hex":"2776"},{"Typeface name":"Wingdings 2","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"10103","Unicode hex":"2777"},{"Typeface name":"Wingdings 2","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"10104","Unicode hex":"2778"},{"Typeface name":"Wingdings 2","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"10105","Unicode hex":"2779"},{"Typeface name":"Wingdings 2","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"10106","Unicode hex":"277A"},{"Typeface name":"Wingdings 2","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"10107","Unicode hex":"277B"},{"Typeface name":"Wingdings 2","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"10108","Unicode hex":"277C"},{"Typeface name":"Wingdings 2","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"10109","Unicode hex":"277D"},{"Typeface name":"Wingdings 2","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"10110","Unicode hex":"277E"},{"Typeface name":"Wingdings 2","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"10111","Unicode hex":"277F"},{"Typeface name":"Wingdings 2","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"9737","Unicode hex":"2609"},{"Typeface name":"Wingdings 2","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"127765","Unicode hex":"1F315"},{"Typeface name":"Wingdings 2","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"9789","Unicode hex":"263D"},{"Typeface name":"Wingdings 2","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"9790","Unicode hex":"263E"},{"Typeface name":"Wingdings 2","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"11839","Unicode hex":"2E3F"},{"Typeface name":"Wingdings 2","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"10013","Unicode hex":"271D"},{"Typeface name":"Wingdings 2","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"128327","Unicode hex":"1F547"},{"Typeface name":"Wingdings 2","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"128348","Unicode hex":"1F55C"},{"Typeface name":"Wingdings 2","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"128349","Unicode hex":"1F55D"},{"Typeface name":"Wingdings 2","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"128350","Unicode hex":"1F55E"},{"Typeface name":"Wingdings 2","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"128351","Unicode hex":"1F55F"},{"Typeface name":"Wingdings 2","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"128352","Unicode hex":"1F560"},{"Typeface name":"Wingdings 2","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"128353","Unicode hex":"1F561"},{"Typeface name":"Wingdings 2","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"128354","Unicode hex":"1F562"},{"Typeface name":"Wingdings 2","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"128355","Unicode hex":"1F563"},{"Typeface name":"Wingdings 2","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"128356","Unicode hex":"1F564"},{"Typeface name":"Wingdings 2","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"128357","Unicode hex":"1F565"},{"Typeface name":"Wingdings 2","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"128358","Unicode hex":"1F566"},{"Typeface name":"Wingdings 2","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"128359","Unicode hex":"1F567"},{"Typeface name":"Wingdings 2","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"128616","Unicode hex":"1F668"},{"Typeface name":"Wingdings 2","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"128617","Unicode hex":"1F669"},{"Typeface name":"Wingdings 2","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"8901","Unicode hex":"22C5"},{"Typeface name":"Wingdings 2","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128900","Unicode hex":"1F784"},{"Typeface name":"Wingdings 2","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"10625","Unicode hex":"2981"},{"Typeface name":"Wingdings 2","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"9679","Unicode hex":"25CF"},{"Typeface name":"Wingdings 2","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"9675","Unicode hex":"25CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128901","Unicode hex":"1F785"},{"Typeface name":"Wingdings 2","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128903","Unicode hex":"1F787"},{"Typeface name":"Wingdings 2","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128905","Unicode hex":"1F789"},{"Typeface name":"Wingdings 2","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"8857","Unicode hex":"2299"},{"Typeface name":"Wingdings 2","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"10687","Unicode hex":"29BF"},{"Typeface name":"Wingdings 2","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"128908","Unicode hex":"1F78C"},{"Typeface name":"Wingdings 2","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"128909","Unicode hex":"1F78D"},{"Typeface name":"Wingdings 2","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"9726","Unicode hex":"25FE"},{"Typeface name":"Wingdings 2","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"9632","Unicode hex":"25A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"9633","Unicode hex":"25A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128913","Unicode hex":"1F791"},{"Typeface name":"Wingdings 2","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128914","Unicode hex":"1F792"},{"Typeface name":"Wingdings 2","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128915","Unicode hex":"1F793"},{"Typeface name":"Wingdings 2","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"128916","Unicode hex":"1F794"},{"Typeface name":"Wingdings 2","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"9635","Unicode hex":"25A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128917","Unicode hex":"1F795"},{"Typeface name":"Wingdings 2","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128918","Unicode hex":"1F796"},{"Typeface name":"Wingdings 2","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"128919","Unicode hex":"1F797"},{"Typeface name":"Wingdings 2","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128920","Unicode hex":"1F798"},{"Typeface name":"Wingdings 2","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"11049","Unicode hex":"2B29"},{"Typeface name":"Wingdings 2","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"11045","Unicode hex":"2B25"},{"Typeface name":"Wingdings 2","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"9671","Unicode hex":"25C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"128922","Unicode hex":"1F79A"},{"Typeface name":"Wingdings 2","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"9672","Unicode hex":"25C8"},{"Typeface name":"Wingdings 2","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"128923","Unicode hex":"1F79B"},{"Typeface name":"Wingdings 2","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"128924","Unicode hex":"1F79C"},{"Typeface name":"Wingdings 2","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"128925","Unicode hex":"1F79D"},{"Typeface name":"Wingdings 2","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"128926","Unicode hex":"1F79E"},{"Typeface name":"Wingdings 2","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"11050","Unicode hex":"2B2A"},{"Typeface name":"Wingdings 2","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"11047","Unicode hex":"2B27"},{"Typeface name":"Wingdings 2","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"9674","Unicode hex":"25CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128928","Unicode hex":"1F7A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"9686","Unicode hex":"25D6"},{"Typeface name":"Wingdings 2","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"9687","Unicode hex":"25D7"},{"Typeface name":"Wingdings 2","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"11210","Unicode hex":"2BCA"},{"Typeface name":"Wingdings 2","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"11211","Unicode hex":"2BCB"},{"Typeface name":"Wingdings 2","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"11200","Unicode hex":"2BC0"},{"Typeface name":"Wingdings 2","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"11201","Unicode hex":"2BC1"},{"Typeface name":"Wingdings 2","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"11039","Unicode hex":"2B1F"},{"Typeface name":"Wingdings 2","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"11202","Unicode hex":"2BC2"},{"Typeface name":"Wingdings 2","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"11043","Unicode hex":"2B23"},{"Typeface name":"Wingdings 2","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"11042","Unicode hex":"2B22"},{"Typeface name":"Wingdings 2","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"11203","Unicode hex":"2BC3"},{"Typeface name":"Wingdings 2","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"11204","Unicode hex":"2BC4"},{"Typeface name":"Wingdings 2","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"128929","Unicode hex":"1F7A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"128930","Unicode hex":"1F7A2"},{"Typeface name":"Wingdings 2","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"128931","Unicode hex":"1F7A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"128932","Unicode hex":"1F7A4"},{"Typeface name":"Wingdings 2","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"128933","Unicode hex":"1F7A5"},{"Typeface name":"Wingdings 2","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128934","Unicode hex":"1F7A6"},{"Typeface name":"Wingdings 2","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128935","Unicode hex":"1F7A7"},{"Typeface name":"Wingdings 2","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128936","Unicode hex":"1F7A8"},{"Typeface name":"Wingdings 2","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128937","Unicode hex":"1F7A9"},{"Typeface name":"Wingdings 2","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128938","Unicode hex":"1F7AA"},{"Typeface name":"Wingdings 2","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128939","Unicode hex":"1F7AB"},{"Typeface name":"Wingdings 2","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128940","Unicode hex":"1F7AC"},{"Typeface name":"Wingdings 2","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128941","Unicode hex":"1F7AD"},{"Typeface name":"Wingdings 2","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128942","Unicode hex":"1F7AE"},{"Typeface name":"Wingdings 2","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128943","Unicode hex":"1F7AF"},{"Typeface name":"Wingdings 2","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"128944","Unicode hex":"1F7B0"},{"Typeface name":"Wingdings 2","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"128945","Unicode hex":"1F7B1"},{"Typeface name":"Wingdings 2","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"128946","Unicode hex":"1F7B2"},{"Typeface name":"Wingdings 2","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"128947","Unicode hex":"1F7B3"},{"Typeface name":"Wingdings 2","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"128948","Unicode hex":"1F7B4"},{"Typeface name":"Wingdings 2","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"128949","Unicode hex":"1F7B5"},{"Typeface name":"Wingdings 2","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"128950","Unicode hex":"1F7B6"},{"Typeface name":"Wingdings 2","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"128951","Unicode hex":"1F7B7"},{"Typeface name":"Wingdings 2","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"128952","Unicode hex":"1F7B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"128953","Unicode hex":"1F7B9"},{"Typeface name":"Wingdings 2","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"128954","Unicode hex":"1F7BA"},{"Typeface name":"Wingdings 2","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"128955","Unicode hex":"1F7BB"},{"Typeface name":"Wingdings 2","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"128956","Unicode hex":"1F7BC"},{"Typeface name":"Wingdings 2","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"128957","Unicode hex":"1F7BD"},{"Typeface name":"Wingdings 2","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"128958","Unicode hex":"1F7BE"},{"Typeface name":"Wingdings 2","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"128959","Unicode hex":"1F7BF"},{"Typeface name":"Wingdings 2","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"128960","Unicode hex":"1F7C0"},{"Typeface name":"Wingdings 2","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"128962","Unicode hex":"1F7C2"},{"Typeface name":"Wingdings 2","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"128964","Unicode hex":"1F7C4"},{"Typeface name":"Wingdings 2","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"128966","Unicode hex":"1F7C6"},{"Typeface name":"Wingdings 2","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"128969","Unicode hex":"1F7C9"},{"Typeface name":"Wingdings 2","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"128970","Unicode hex":"1F7CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"10038","Unicode hex":"2736"},{"Typeface name":"Wingdings 2","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"128972","Unicode hex":"1F7CC"},{"Typeface name":"Wingdings 2","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"128974","Unicode hex":"1F7CE"},{"Typeface name":"Wingdings 2","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"128976","Unicode hex":"1F7D0"},{"Typeface name":"Wingdings 2","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"128978","Unicode hex":"1F7D2"},{"Typeface name":"Wingdings 2","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"10041","Unicode hex":"2739"},{"Typeface name":"Wingdings 2","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"128963","Unicode hex":"1F7C3"},{"Typeface name":"Wingdings 2","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"128967","Unicode hex":"1F7C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"10031","Unicode hex":"272F"},{"Typeface name":"Wingdings 2","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"128973","Unicode hex":"1F7CD"},{"Typeface name":"Wingdings 2","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"128980","Unicode hex":"1F7D4"},{"Typeface name":"Wingdings 2","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"11212","Unicode hex":"2BCC"},{"Typeface name":"Wingdings 2","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"11213","Unicode hex":"2BCD"},{"Typeface name":"Wingdings 2","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"8251","Unicode hex":"203B"},{"Typeface name":"Wingdings 2","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"8258","Unicode hex":"2042"},{"Typeface name":"Wingdings 3","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings 3","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"11104","Unicode hex":"2B60"},{"Typeface name":"Wingdings 3","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"11106","Unicode hex":"2B62"},{"Typeface name":"Wingdings 3","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"11105","Unicode hex":"2B61"},{"Typeface name":"Wingdings 3","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"11107","Unicode hex":"2B63"},{"Typeface name":"Wingdings 3","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"11110","Unicode hex":"2B66"},{"Typeface name":"Wingdings 3","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"11111","Unicode hex":"2B67"},{"Typeface name":"Wingdings 3","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"11113","Unicode hex":"2B69"},{"Typeface name":"Wingdings 3","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"11112","Unicode hex":"2B68"},{"Typeface name":"Wingdings 3","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"11120","Unicode hex":"2B70"},{"Typeface name":"Wingdings 3","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"11122","Unicode hex":"2B72"},{"Typeface name":"Wingdings 3","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"11121","Unicode hex":"2B71"},{"Typeface name":"Wingdings 3","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"11123","Unicode hex":"2B73"},{"Typeface name":"Wingdings 3","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"11126","Unicode hex":"2B76"},{"Typeface name":"Wingdings 3","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"11128","Unicode hex":"2B78"},{"Typeface name":"Wingdings 3","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"11131","Unicode hex":"2B7B"},{"Typeface name":"Wingdings 3","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"11133","Unicode hex":"2B7D"},{"Typeface name":"Wingdings 3","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"11108","Unicode hex":"2B64"},{"Typeface name":"Wingdings 3","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"11109","Unicode hex":"2B65"},{"Typeface name":"Wingdings 3","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"11114","Unicode hex":"2B6A"},{"Typeface name":"Wingdings 3","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"11116","Unicode hex":"2B6C"},{"Typeface name":"Wingdings 3","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"11115","Unicode hex":"2B6B"},{"Typeface name":"Wingdings 3","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"11117","Unicode hex":"2B6D"},{"Typeface name":"Wingdings 3","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"11085","Unicode hex":"2B4D"},{"Typeface name":"Wingdings 3","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"11168","Unicode hex":"2BA0"},{"Typeface name":"Wingdings 3","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"11169","Unicode hex":"2BA1"},{"Typeface name":"Wingdings 3","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"11170","Unicode hex":"2BA2"},{"Typeface name":"Wingdings 3","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"11171","Unicode hex":"2BA3"},{"Typeface name":"Wingdings 3","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"11172","Unicode hex":"2BA4"},{"Typeface name":"Wingdings 3","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"11173","Unicode hex":"2BA5"},{"Typeface name":"Wingdings 3","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"11174","Unicode hex":"2BA6"},{"Typeface name":"Wingdings 3","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"11175","Unicode hex":"2BA7"},{"Typeface name":"Wingdings 3","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"11152","Unicode hex":"2B90"},{"Typeface name":"Wingdings 3","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"11153","Unicode hex":"2B91"},{"Typeface name":"Wingdings 3","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"11154","Unicode hex":"2B92"},{"Typeface name":"Wingdings 3","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"11155","Unicode hex":"2B93"},{"Typeface name":"Wingdings 3","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"11136","Unicode hex":"2B80"},{"Typeface name":"Wingdings 3","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"11139","Unicode hex":"2B83"},{"Typeface name":"Wingdings 3","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"11134","Unicode hex":"2B7E"},{"Typeface name":"Wingdings 3","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"11135","Unicode hex":"2B7F"},{"Typeface name":"Wingdings 3","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"11140","Unicode hex":"2B84"},{"Typeface name":"Wingdings 3","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"11142","Unicode hex":"2B86"},{"Typeface name":"Wingdings 3","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"11141","Unicode hex":"2B85"},{"Typeface name":"Wingdings 3","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"11143","Unicode hex":"2B87"},{"Typeface name":"Wingdings 3","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"11151","Unicode hex":"2B8F"},{"Typeface name":"Wingdings 3","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"11149","Unicode hex":"2B8D"},{"Typeface name":"Wingdings 3","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"11150","Unicode hex":"2B8E"},{"Typeface name":"Wingdings 3","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"11148","Unicode hex":"2B8C"},{"Typeface name":"Wingdings 3","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"11118","Unicode hex":"2B6E"},{"Typeface name":"Wingdings 3","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"11119","Unicode hex":"2B6F"},{"Typeface name":"Wingdings 3","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9099","Unicode hex":"238B"},{"Typeface name":"Wingdings 3","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"8996","Unicode hex":"2324"},{"Typeface name":"Wingdings 3","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"8963","Unicode hex":"2303"},{"Typeface name":"Wingdings 3","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"8997","Unicode hex":"2325"},{"Typeface name":"Wingdings 3","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"9251","Unicode hex":"2423"},{"Typeface name":"Wingdings 3","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"9085","Unicode hex":"237D"},{"Typeface name":"Wingdings 3","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"8682","Unicode hex":"21EA"},{"Typeface name":"Wingdings 3","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"11192","Unicode hex":"2BB8"},{"Typeface name":"Wingdings 3","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"129184","Unicode hex":"1F8A0"},{"Typeface name":"Wingdings 3","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"129185","Unicode hex":"1F8A1"},{"Typeface name":"Wingdings 3","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"129186","Unicode hex":"1F8A2"},{"Typeface name":"Wingdings 3","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"129187","Unicode hex":"1F8A3"},{"Typeface name":"Wingdings 3","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"129188","Unicode hex":"1F8A4"},{"Typeface name":"Wingdings 3","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"129189","Unicode hex":"1F8A5"},{"Typeface name":"Wingdings 3","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"129190","Unicode hex":"1F8A6"},{"Typeface name":"Wingdings 3","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"129191","Unicode hex":"1F8A7"},{"Typeface name":"Wingdings 3","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"129192","Unicode hex":"1F8A8"},{"Typeface name":"Wingdings 3","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"129193","Unicode hex":"1F8A9"},{"Typeface name":"Wingdings 3","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"129194","Unicode hex":"1F8AA"},{"Typeface name":"Wingdings 3","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"129195","Unicode hex":"1F8AB"},{"Typeface name":"Wingdings 3","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"129104","Unicode hex":"1F850"},{"Typeface name":"Wingdings 3","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"129106","Unicode hex":"1F852"},{"Typeface name":"Wingdings 3","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"129105","Unicode hex":"1F851"},{"Typeface name":"Wingdings 3","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"129107","Unicode hex":"1F853"},{"Typeface name":"Wingdings 3","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"129108","Unicode hex":"1F854"},{"Typeface name":"Wingdings 3","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"129109","Unicode hex":"1F855"},{"Typeface name":"Wingdings 3","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"129111","Unicode hex":"1F857"},{"Typeface name":"Wingdings 3","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"129110","Unicode hex":"1F856"},{"Typeface name":"Wingdings 3","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"129112","Unicode hex":"1F858"},{"Typeface name":"Wingdings 3","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"129113","Unicode hex":"1F859"},{"Typeface name":"Wingdings 3","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"9650","Unicode hex":"25B2"},{"Typeface name":"Wingdings 3","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"9660","Unicode hex":"25BC"},{"Typeface name":"Wingdings 3","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"9651","Unicode hex":"25B3"},{"Typeface name":"Wingdings 3","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"9661","Unicode hex":"25BD"},{"Typeface name":"Wingdings 3","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"9664","Unicode hex":"25C0"},{"Typeface name":"Wingdings 3","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"9654","Unicode hex":"25B6"},{"Typeface name":"Wingdings 3","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"9665","Unicode hex":"25C1"},{"Typeface name":"Wingdings 3","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"9655","Unicode hex":"25B7"},{"Typeface name":"Wingdings 3","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"9699","Unicode hex":"25E3"},{"Typeface name":"Wingdings 3","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"9698","Unicode hex":"25E2"},{"Typeface name":"Wingdings 3","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"9700","Unicode hex":"25E4"},{"Typeface name":"Wingdings 3","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"9701","Unicode hex":"25E5"},{"Typeface name":"Wingdings 3","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"128896","Unicode hex":"1F780"},{"Typeface name":"Wingdings 3","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128898","Unicode hex":"1F782"},{"Typeface name":"Wingdings 3","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128897","Unicode hex":"1F781"},{"Typeface name":"Wingdings 3","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"128899","Unicode hex":"1F783"},{"Typeface name":"Wingdings 3","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"11205","Unicode hex":"2BC5"},{"Typeface name":"Wingdings 3","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"11206","Unicode hex":"2BC6"},{"Typeface name":"Wingdings 3","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"11207","Unicode hex":"2BC7"},{"Typeface name":"Wingdings 3","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"11208","Unicode hex":"2BC8"},{"Typeface name":"Wingdings 3","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"11164","Unicode hex":"2B9C"},{"Typeface name":"Wingdings 3","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"11166","Unicode hex":"2B9E"},{"Typeface name":"Wingdings 3","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"11165","Unicode hex":"2B9D"},{"Typeface name":"Wingdings 3","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"11167","Unicode hex":"2B9F"},{"Typeface name":"Wingdings 3","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"129040","Unicode hex":"1F810"},{"Typeface name":"Wingdings 3","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"129042","Unicode hex":"1F812"},{"Typeface name":"Wingdings 3","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"129041","Unicode hex":"1F811"},{"Typeface name":"Wingdings 3","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"129043","Unicode hex":"1F813"},{"Typeface name":"Wingdings 3","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"129044","Unicode hex":"1F814"},{"Typeface name":"Wingdings 3","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"129046","Unicode hex":"1F816"},{"Typeface name":"Wingdings 3","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"129045","Unicode hex":"1F815"},{"Typeface name":"Wingdings 3","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"129047","Unicode hex":"1F817"},{"Typeface name":"Wingdings 3","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"129048","Unicode hex":"1F818"},{"Typeface name":"Wingdings 3","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"129050","Unicode hex":"1F81A"},{"Typeface name":"Wingdings 3","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"129049","Unicode hex":"1F819"},{"Typeface name":"Wingdings 3","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"129051","Unicode hex":"1F81B"},{"Typeface name":"Wingdings 3","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"129052","Unicode hex":"1F81C"},{"Typeface name":"Wingdings 3","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"129054","Unicode hex":"1F81E"},{"Typeface name":"Wingdings 3","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"129053","Unicode hex":"1F81D"},{"Typeface name":"Wingdings 3","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"129055","Unicode hex":"1F81F"},{"Typeface name":"Wingdings 3","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"129024","Unicode hex":"1F800"},{"Typeface name":"Wingdings 3","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"129026","Unicode hex":"1F802"},{"Typeface name":"Wingdings 3","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"129025","Unicode hex":"1F801"},{"Typeface name":"Wingdings 3","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"129027","Unicode hex":"1F803"},{"Typeface name":"Wingdings 3","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"129028","Unicode hex":"1F804"},{"Typeface name":"Wingdings 3","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"129030","Unicode hex":"1F806"},{"Typeface name":"Wingdings 3","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"129029","Unicode hex":"1F805"},{"Typeface name":"Wingdings 3","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"129031","Unicode hex":"1F807"},{"Typeface name":"Wingdings 3","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"129032","Unicode hex":"1F808"},{"Typeface name":"Wingdings 3","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"129034","Unicode hex":"1F80A"},{"Typeface name":"Wingdings 3","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"129033","Unicode hex":"1F809"},{"Typeface name":"Wingdings 3","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"129035","Unicode hex":"1F80B"},{"Typeface name":"Wingdings 3","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"129056","Unicode hex":"1F820"},{"Typeface name":"Wingdings 3","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"129058","Unicode hex":"1F822"},{"Typeface name":"Wingdings 3","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"129060","Unicode hex":"1F824"},{"Typeface name":"Wingdings 3","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"129062","Unicode hex":"1F826"},{"Typeface name":"Wingdings 3","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"129064","Unicode hex":"1F828"},{"Typeface name":"Wingdings 3","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"129066","Unicode hex":"1F82A"},{"Typeface name":"Wingdings 3","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"129068","Unicode hex":"1F82C"},{"Typeface name":"Wingdings 3","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"129180","Unicode hex":"1F89C"},{"Typeface name":"Wingdings 3","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"129181","Unicode hex":"1F89D"},{"Typeface name":"Wingdings 3","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"129182","Unicode hex":"1F89E"},{"Typeface name":"Wingdings 3","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"129183","Unicode hex":"1F89F"},{"Typeface name":"Wingdings 3","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"129070","Unicode hex":"1F82E"},{"Typeface name":"Wingdings 3","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"129072","Unicode hex":"1F830"},{"Typeface name":"Wingdings 3","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"129074","Unicode hex":"1F832"},{"Typeface name":"Wingdings 3","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"129076","Unicode hex":"1F834"},{"Typeface name":"Wingdings 3","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"129078","Unicode hex":"1F836"},{"Typeface name":"Wingdings 3","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"129080","Unicode hex":"1F838"},{"Typeface name":"Wingdings 3","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"129082","Unicode hex":"1F83A"},{"Typeface name":"Wingdings 3","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"129081","Unicode hex":"1F839"},{"Typeface name":"Wingdings 3","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"129083","Unicode hex":"1F83B"},{"Typeface name":"Wingdings 3","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"129176","Unicode hex":"1F898"},{"Typeface name":"Wingdings 3","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"129178","Unicode hex":"1F89A"},{"Typeface name":"Wingdings 3","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"129177","Unicode hex":"1F899"},{"Typeface name":"Wingdings 3","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"129179","Unicode hex":"1F89B"},{"Typeface name":"Wingdings 3","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"129084","Unicode hex":"1F83C"},{"Typeface name":"Wingdings 3","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"129086","Unicode hex":"1F83E"},{"Typeface name":"Wingdings 3","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"129085","Unicode hex":"1F83D"},{"Typeface name":"Wingdings 3","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"129087","Unicode hex":"1F83F"},{"Typeface name":"Wingdings 3","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"129088","Unicode hex":"1F840"},{"Typeface name":"Wingdings 3","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"129090","Unicode hex":"1F842"},{"Typeface name":"Wingdings 3","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"129089","Unicode hex":"1F841"},{"Typeface name":"Wingdings 3","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"129091","Unicode hex":"1F843"},{"Typeface name":"Wingdings 3","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"129092","Unicode hex":"1F844"},{"Typeface name":"Wingdings 3","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"129094","Unicode hex":"1F846"},{"Typeface name":"Wingdings 3","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"129093","Unicode hex":"1F845"},{"Typeface name":"Wingdings 3","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"129095","Unicode hex":"1F847"},{"Typeface name":"Wingdings 3","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"11176","Unicode hex":"2BA8"},{"Typeface name":"Wingdings 3","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"11177","Unicode hex":"2BA9"},{"Typeface name":"Wingdings 3","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"11178","Unicode hex":"2BAA"},{"Typeface name":"Wingdings 3","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"11179","Unicode hex":"2BAB"},{"Typeface name":"Wingdings 3","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"11180","Unicode hex":"2BAC"},{"Typeface name":"Wingdings 3","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"11181","Unicode hex":"2BAD"},{"Typeface name":"Wingdings 3","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"11182","Unicode hex":"2BAE"},{"Typeface name":"Wingdings 3","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"11183","Unicode hex":"2BAF"},{"Typeface name":"Wingdings 3","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"129120","Unicode hex":"1F860"},{"Typeface name":"Wingdings 3","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"129122","Unicode hex":"1F862"},{"Typeface name":"Wingdings 3","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"129121","Unicode hex":"1F861"},{"Typeface name":"Wingdings 3","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"129123","Unicode hex":"1F863"},{"Typeface name":"Wingdings 3","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"129124","Unicode hex":"1F864"},{"Typeface name":"Wingdings 3","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"129125","Unicode hex":"1F865"},{"Typeface name":"Wingdings 3","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"129127","Unicode hex":"1F867"},{"Typeface name":"Wingdings 3","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"129126","Unicode hex":"1F866"},{"Typeface name":"Wingdings 3","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"129136","Unicode hex":"1F870"},{"Typeface name":"Wingdings 3","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"129138","Unicode hex":"1F872"},{"Typeface name":"Wingdings 3","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"129137","Unicode hex":"1F871"},{"Typeface name":"Wingdings 3","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"129139","Unicode hex":"1F873"},{"Typeface name":"Wingdings 3","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"129140","Unicode hex":"1F874"},{"Typeface name":"Wingdings 3","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"129141","Unicode hex":"1F875"},{"Typeface name":"Wingdings 3","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"129143","Unicode hex":"1F877"},{"Typeface name":"Wingdings 3","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"129142","Unicode hex":"1F876"},{"Typeface name":"Wingdings 3","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"129152","Unicode hex":"1F880"},{"Typeface name":"Wingdings 3","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"129154","Unicode hex":"1F882"},{"Typeface name":"Wingdings 3","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"129153","Unicode hex":"1F881"},{"Typeface name":"Wingdings 3","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"129155","Unicode hex":"1F883"},{"Typeface name":"Wingdings 3","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"129156","Unicode hex":"1F884"},{"Typeface name":"Wingdings 3","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"129157","Unicode hex":"1F885"},{"Typeface name":"Wingdings 3","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"129159","Unicode hex":"1F887"},{"Typeface name":"Wingdings 3","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"129158","Unicode hex":"1F886"},{"Typeface name":"Wingdings 3","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"129168","Unicode hex":"1F890"},{"Typeface name":"Wingdings 3","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"129170","Unicode hex":"1F892"},{"Typeface name":"Wingdings 3","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"129169","Unicode hex":"1F891"},{"Typeface name":"Wingdings 3","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"129171","Unicode hex":"1F893"},{"Typeface name":"Wingdings 3","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"129172","Unicode hex":"1F894"},{"Typeface name":"Wingdings 3","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"129174","Unicode hex":"1F896"},{"Typeface name":"Wingdings 3","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"129173","Unicode hex":"1F895"},{"Typeface name":"Wingdings 3","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"129175","Unicode hex":"1F897"}];return Mx.default=r,Mx}var vU;function IP(){if(vU)return Ia;vU=1;var r=Ia&&Ia.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.hex=Ia.dec=Ia.codePoint=void 0;for(var e=r(FP()),t={},n=String.fromCodePoint?String.fromCodePoint:b,i=0,a=e.default;i<a.length;i++){var s=a[i],l=parseInt(s["Unicode dec"],10),u={codePoint:l,string:n(l)};t[s["Typeface name"].toUpperCase()+"_"+s["Dingbat dec"]]=u}function d(y,D){return t[y.toUpperCase()+"_"+D]}Ia.codePoint=d;function h(y,D){return d(y,parseInt(D,10))}Ia.dec=h;function g(y,D){return d(y,parseInt(D,16))}Ia.hex=g;function b(y){if(y<=65535)return String.fromCharCode(y);var D=Math.floor((y-65536)/1024)+55296,v=(y-65536)%1024+56320;return String.fromCharCode(D,v)}return Ia}var Rl={},wU;function Ij(){if(wU)return Rl;wU=1;var r=Cn;Rl.paragraph=e,Rl.run=t,Rl._elements=i,Rl._elementsOfType=n,Rl.getDescendantsOfType=a,Rl.getDescendants=s;function e(u){return n("paragraph",u)}function t(u){return n("run",u)}function n(u,d){return i(function(h){return h.type===u?d(h):h})}function i(u){return function d(h){if(h.children){var g=r.map(h.children,d);h=r.extend(h,{children:g})}return u(h)}}function a(u,d){return s(u).filter(function(h){return h.type===d})}function s(u){var d=[];return l(u,function(h){d.push(h)}),d}function l(u,d){u.children&&u.children.forEach(function(h){l(h,d),d(h)})}return Rl}var Lx={},kU;function OP(){if(kU)return Lx;kU=1,Lx.uriToZipEntryName=r,Lx.replaceFragment=e;function r(t,n){return n.charAt(0)==="/"?n.substr(1):t+"/"+n}function e(t,n){var i=t.indexOf("#");return i!==-1&&(t=t.substring(0,i)),t+"#"+n}return Lx}var DU;function MP(){if(DU)return Ox;DU=1,Ox.createBodyReader=u,Ox._readNumberingProperties=h;var r=IP(),e=Cn,t=Bd(),n=rl().Result,i=rl().warning,a=lS(),s=Ij(),l=OP();function u(E){return{readXmlElement:function(T){return new d(E).readXmlElement(T)},readXmlElements:function(T){return new d(E).readXmlElements(T)}}}function d(E){var T=[],R=[],M=[],I=E.relationships,F=E.contentTypes,G=E.docxFile,U=E.files,W=E.numbering,j=E.styles;function X(ye){var Re=ye.map(P);return _(Re)}function P(ye){if(ye.type==="element"){var Re=re[ye.name];if(Re)return Re(ye);if(!Object.prototype.hasOwnProperty.call(b,ye.name)){var qe=i("An unrecognised element was ignored: "+ye.name);return y([qe])}}return D()}function B(ye){return ge(ye).map(function(Re){return{type:"paragraphProperties",styleId:Re.styleId,styleName:Re.name,alignment:ye.firstOrEmpty("w:jc").attributes["w:val"],numbering:h(Re.styleId,ye.firstOrEmpty("w:numPr"),W),indent:ee(ye.firstOrEmpty("w:ind"))}})}function ee(ye){return{start:ye.attributes["w:start"]||ye.attributes["w:left"],end:ye.attributes["w:end"]||ye.attributes["w:right"],firstLine:ye.attributes["w:firstLine"],hanging:ye.attributes["w:hanging"]}}function K(ye){return ve(ye).map(function(Re){var qe=ye.firstOrEmpty("w:sz").attributes["w:val"],Ze=/^[0-9]+$/.test(qe)?parseInt(qe,10)/2:null;return{type:"runProperties",styleId:Re.styleId,styleName:Re.name,verticalAlignment:ye.firstOrEmpty("w:vertAlign").attributes["w:val"],font:ye.firstOrEmpty("w:rFonts").attributes["w:ascii"],fontSize:Ze,isBold:J(ye.first("w:b")),isUnderline:H(ye.first("w:u")),isItalic:J(ye.first("w:i")),isStrikethrough:J(ye.first("w:strike")),isAllCaps:J(ye.first("w:caps")),isSmallCaps:J(ye.first("w:smallCaps")),highlight:z(ye.firstOrEmpty("w:highlight").attributes["w:val"])}})}function H(ye){if(ye){var Re=ye.attributes["w:val"];return Re!==void 0&&Re!=="false"&&Re!=="0"&&Re!=="none"}else return!1}function J(ye){if(ye){var Re=ye.attributes["w:val"];return Re!=="false"&&Re!=="0"}else return!1}function ie(ye){return ye!=="false"&&ye!=="0"}function z(ye){return!ye||ye==="none"?null:ye}function ge(ye){return Ie(ye,"w:pStyle","Paragraph",j.findParagraphStyleById)}function ve(ye){return Ie(ye,"w:rStyle","Run",j.findCharacterStyleById)}function je(ye){return Ie(ye,"w:tblStyle","Table",j.findTableStyleById)}function Ie(ye,Re,qe,Ze){var Ke=[],ft=ye.first(Re),xt=null,Zn=null;if(ft&&(xt=ft.attributes["w:val"],xt)){var gi=Ze(xt);gi?Zn=gi.name:Ke.push(at(qe,xt))}return w({styleId:xt,name:Zn},Ke)}function Pe(ye){var Re=ye.attributes["w:fldCharType"];if(Re==="begin")T.push({type:"begin",fldChar:ye}),R=[];else if(Re==="end"){var qe=T.pop();if(qe.type==="begin"&&(qe=Ue(qe)),qe.type==="checkbox")return v(t.checkbox({checked:qe.checked}))}else if(Re==="separate"){var Ze=T.pop(),Ke=Ue(Ze);T.push(Ke)}return D()}function fe(){var ye=e.last(T.filter(function(Re){return Re.type==="hyperlink"}));return ye?ye.options:null}function Ue(ye){return be(R.join(""),ye.type==="begin"?ye.fldChar:a.emptyElement)}function be(ye,Re){var qe=/\s*HYPERLINK "(.*)"/.exec(ye);if(qe)return{type:"hyperlink",options:{href:qe[1]}};var Ze=/\s*HYPERLINK\s+\\l\s+"(.*)"/.exec(ye);if(Ze)return{type:"hyperlink",options:{anchor:Ze[1]}};var Ke=/\s*FORMCHECKBOX\s*/.exec(ye);if(Ke){var ft=Re.firstOrEmpty("w:ffData").firstOrEmpty("w:checkBox"),xt=ft.first("w:checked"),Zn=xt==null?J(ft.first("w:default")):J(xt);return{type:"checkbox",checked:Zn}}return{type:"unknown"}}function Fe(ye){return R.push(ye.text()),D()}function $e(ye){var Re=ye.attributes["w:font"],qe=ye.attributes["w:char"],Ze=r.hex(Re,qe);return Ze==null&&/^F0..$/.test(qe)&&(Ze=r.hex(Re,qe.substring(2))),Ze==null?y([i("A w:sym element with an unsupported character was ignored: char "+qe+" in font "+Re)]):v(new t.Text(Ze.string))}function O(ye){return function(Re){var qe=Re.attributes["w:id"];return v(new t.NoteReference({noteType:ye,noteId:qe}))}}function he(ye){return v(t.commentReference({commentId:ye.attributes["w:id"]}))}function oe(ye){return X(ye.children)}var re={"w:p":function(ye){var Re=ye.firstOrEmpty("w:pPr"),qe=!!Re.firstOrEmpty("w:rPr").first("w:del");if(qe)return ye.children.forEach(function(Ke){M.push(Ke)}),D();var Ze=ye.children;return M.length>0&&(Ze=M.concat(Ze),M=[]),k.map(B(Re),X(Ze),function(Ke,ft){return new t.Paragraph(ft,Ke)}).insertExtra()},"w:r":function(ye){return k.map(K(ye.firstOrEmpty("w:rPr")),X(ye.children),function(Re,qe){var Ze=fe();return Ze!==null&&(qe=[new t.Hyperlink(qe,Ze)]),new t.Run(qe,Re)})},"w:fldChar":Pe,"w:instrText":Fe,"w:t":function(ye){return v(new t.Text(ye.text()))},"w:tab":function(ye){return v(new t.Tab)},"w:noBreakHyphen":function(){return v(new t.Text("‑"))},"w:softHyphen":function(ye){return v(new t.Text("­"))},"w:sym":$e,"w:hyperlink":function(ye){var Re=ye.attributes["r:id"],qe=ye.attributes["w:anchor"];return X(ye.children).map(function(Ze){function Ke(xt){var Zn=ye.attributes["w:tgtFrame"]||null;return new t.Hyperlink(Ze,e.extend({targetFrame:Zn},xt))}if(Re){var ft=I.findTargetByRelationshipId(Re);return qe&&(ft=l.replaceFragment(ft,qe)),Ke({href:ft})}else return qe?Ke({anchor:qe}):Ze})},"w:tbl":ne,"w:tr":Ce,"w:tc":Ne,"w:footnoteReference":O("footnote"),"w:endnoteReference":O("endnote"),"w:commentReference":he,"w:br":function(ye){var Re=ye.attributes["w:type"];return Re==null||Re==="textWrapping"?v(t.lineBreak):Re==="page"?v(t.pageBreak):Re==="column"?v(t.columnBreak):y([i("Unsupported break type: "+Re)])},"w:bookmarkStart":function(ye){var Re=ye.attributes["w:name"];return Re==="_GoBack"?D():v(new t.BookmarkStart({name:Re}))},"mc:AlternateContent":function(ye){return oe(ye.firstOrEmpty("mc:Fallback"))},"w:sdt":function(ye){var Re=X(ye.firstOrEmpty("w:sdtContent").children);return Re.map(function(qe){var Ze=ye.firstOrEmpty("w:sdtPr").first("wordml:checkbox");if(Ze){var Ke=Ze.first("wordml:checked"),ft=!!Ke&&ie(Ke.attributes["wordml:val"]),xt=t.checkbox({checked:ft}),Zn=!1,gi=qe.map(s._elementsOfType(t.types.text,function(Yi){return Yi.value.length>0&&!Zn?(Zn=!0,xt):Yi}));return Zn?gi:xt}else return qe})},"w:ins":oe,"w:object":oe,"w:smartTag":oe,"w:drawing":oe,"w:pict":function(ye){return oe(ye).toExtra()},"v:roundrect":oe,"v:shape":oe,"v:textbox":oe,"w:txbxContent":oe,"wp:inline":de,"wp:anchor":de,"v:imagedata":Me,"v:group":oe,"v:rect":oe};return{readXmlElement:P,readXmlElements:X};function ne(ye){var Re=ue(ye.firstOrEmpty("w:tblPr"));return X(ye.children).flatMap(se).flatMap(function(qe){return Re.map(function(Ze){return t.Table(qe,Ze)})})}function ue(ye){return je(ye).map(function(Re){return{styleId:Re.styleId,styleName:Re.name}})}function Ce(ye){var Re=ye.firstOrEmpty("w:trPr"),qe=!!Re.first("w:del");if(qe)return D();var Ze=!!Re.first("w:tblHeader");return X(ye.children).map(function(Ke){return t.TableRow(Ke,{isHeader:Ze})})}function Ne(ye){return X(ye.children).map(function(Re){var qe=ye.firstOrEmpty("w:tcPr"),Ze=qe.firstOrEmpty("w:gridSpan").attributes["w:val"],Ke=Ze?parseInt(Ze,10):1,ft=t.TableCell(Re,{colSpan:Ke});return ft._vMerge=pe(qe),ft})}function pe(ye){var Re=ye.first("w:vMerge");if(Re){var qe=Re.attributes["w:val"];return qe==="continue"||!qe}else return null}function se(ye){var Re=e.any(ye,function(Ke){return Ke.type!==t.types.tableRow});if(Re)return w(ye,[i("unexpected non-row element in table, cell merging may be incorrect")]);var qe=e.any(ye,function(Ke){return e.any(Ke.children,function(ft){return ft.type!==t.types.tableCell})});if(qe)return w(ye,[i("unexpected non-cell element in table row, cell merging may be incorrect")]);var Ze={};return ye.forEach(function(Ke){var ft=0;Ke.children.forEach(function(xt){xt._vMerge&&Ze[ft]?Ze[ft].rowSpan++:(Ze[ft]=xt,xt._vMerge=!1),ft+=xt.colSpan})}),ye.forEach(function(Ke){Ke.children=Ke.children.filter(function(ft){return!ft._vMerge}),Ke.children.forEach(function(ft){delete ft._vMerge})}),v(ye)}function de(ye){var Re=ye.getElementsByTagName("a:graphic").getElementsByTagName("a:graphicData").getElementsByTagName("pic:pic").getElementsByTagName("pic:blipFill").getElementsByTagName("a:blip");return _(Re.map(xe.bind(null,ye)))}function xe(ye,Re){var qe=ye.first("wp:docPr").attributes,Ze=ae(qe.descr)?qe.title:qe.descr,Ke=ke(Re);return Ke===null?y([i("Could not find image file for a:blip element")]):Xe(Ke,Ze)}function ae(ye){return ye==null||/^\s*$/.test(ye)}function ke(ye){var Re=ye.attributes["r:embed"],qe=ye.attributes["r:link"];if(Re)return ze(Re);if(qe){var Ze=I.findTargetByRelationshipId(qe);return{path:Ze,read:U.read.bind(U,Ze)}}else return null}function Me(ye){var Re=ye.attributes["r:id"];return Re?Xe(ze(Re),ye.attributes["o:title"]):y([i("A v:imagedata element without a relationship ID was ignored")])}function ze(ye){var Re=l.uriToZipEntryName("word",I.findTargetByRelationshipId(ye));return{path:Re,read:G.read.bind(G,Re)}}function Xe(ye,Re){var qe=F.findContentType(ye.path),Ze=t.Image({readImage:ye.read,altText:Re,contentType:qe}),Ke=g[qe]?[]:i("Image of type "+qe+" is unlikely to display in web browsers");return w(Ze,Ke)}function at(ye,Re){return i(ye+" style with ID "+Re+" was referenced but not defined in the document")}}function h(E,T,R){var M=T.firstOrEmpty("w:ilvl").attributes["w:val"],I=T.firstOrEmpty("w:numId").attributes["w:val"];if(M!==void 0&&I!==void 0)return R.findLevel(I,M);if(E!=null){var F=R.findLevelByParagraphStyleId(E);if(F!=null)return F}return null}var g={"image/png":!0,"image/gif":!0,"image/jpeg":!0,"image/svg+xml":!0,"image/tiff":!0},b={"office-word:wrap":!0,"v:shadow":!0,"v:shapetype":!0,"w:annotationRef":!0,"w:bookmarkEnd":!0,"w:sectPr":!0,"w:proofErr":!0,"w:lastRenderedPageBreak":!0,"w:commentRangeStart":!0,"w:commentRangeEnd":!0,"w:del":!0,"w:footnoteRef":!0,"w:endnoteRef":!0,"w:pPr":!0,"w:rPr":!0,"w:tblPr":!0,"w:tblGrid":!0,"w:trPr":!0,"w:tcPr":!0};function y(E){return new k(null,null,E)}function D(){return new k(null)}function v(E){return new k(E)}function w(E,T){return new k(E,null,T)}function k(E,T,R){this.value=E||[],this.extra=T||[],this._result=new n({element:this.value,extra:T},R),this.messages=this._result.messages}k.prototype.toExtra=function(){return new k(null,A(this.extra,this.value),this.messages)},k.prototype.insertExtra=function(){var E=this.extra;return E&&E.length?new k(A(this.value,E),null,this.messages):this},k.prototype.map=function(E){var T=this._result.map(function(R){return E(R.element)});return new k(T.value,this.extra,T.messages)},k.prototype.flatMap=function(E){var T=this._result.flatMap(function(R){return E(R.element)._result});return new k(T.value.element,A(this.extra,T.value.extra),T.messages)},k.map=function(E,T,R){return new k(R(E.value,T.value),A(E.extra,T.extra),E.messages.concat(T.messages))};function _(E){var T=n.combine(e.pluck(E,"_result"));return new k(e.flatten(e.pluck(T.value,"element")),e.filter(e.flatten(e.pluck(T.value,"extra")),N),T.messages)}function A(E,T){return e.flatten([E,T])}function N(E){return E}return Ox}var Ck={},_U;function LP(){if(_U)return Ck;_U=1,Ck.DocumentXmlReader=t;var r=Bd(),e=rl().Result;function t(n){var i=n.bodyReader;function a(s){var l=s.first("w:body");if(l==null)throw new Error("Could not find the body element: are you sure this is a docx file?");var u=i.readXmlElements(l.children).map(function(d){return new r.Document(d,{notes:n.notes,comments:n.comments})});return new e(u.value,u.messages)}return{convertXmlToDocument:a}}return Ck}var Eg={},AU;function BP(){if(AU)return Eg;AU=1,Eg.readRelationships=r,Eg.defaultValue=new e([]),Eg.Relationships=e;function r(t){var n=[];return t.children.forEach(function(i){if(i.name==="relationships:Relationship"){var a={relationshipId:i.attributes.Id,target:i.attributes.Target,type:i.attributes.Type};n.push(a)}}),new e(n)}function e(t){var n={};t.forEach(function(a){n[a.relationshipId]=a.target});var i={};return t.forEach(function(a){i[a.type]||(i[a.type]=[]),i[a.type].push(a.target)}),{findTargetByRelationshipId:function(a){return n[a]},findTargetsByType:function(a){return i[a]||[]}}}return Eg}var Bx={},SU;function PP(){if(SU)return Bx;SU=1,Bx.readContentTypesFromXml=e;var r={png:"png",gif:"gif",jpeg:"jpeg",jpg:"jpeg",tif:"tiff",tiff:"tiff",bmp:"bmp"};Bx.defaultContentTypes=t({},{});function e(n){var i={},a={};return n.children.forEach(function(s){if(s.name==="content-types:Default"&&(i[s.attributes.Extension]=s.attributes.ContentType),s.name==="content-types:Override"){var l=s.attributes.PartName;l.charAt(0)==="/"&&(l=l.substring(1)),a[l]=s.attributes.ContentType}}),t(a,i)}function t(n,i){return{findContentType:function(a){var s=n[a];if(s)return s;var l=a.split("."),u=l[l.length-1];if(i.hasOwnProperty(u))return i[u];var d=r[u.toLowerCase()];return d?"image/"+d:null}}}return Bx}var Tg={},EU;function zP(){if(EU)return Tg;EU=1;var r=Cn;Tg.readNumberingXml=t,Tg.Numbering=e,Tg.defaultNumbering=new e({},{});function e(s,l,u){var d=r.flatten(r.values(l).map(function(y){return r.values(y.levels)})),h=r.indexBy(d.filter(function(y){return y.paragraphStyleId!=null}),"paragraphStyleId");function g(y,D){var v=s[y];if(v){var w=l[v.abstractNumId];if(w){if(w.numStyleLink==null)return l[v.abstractNumId].levels[D];var k=u.findNumberingStyleById(w.numStyleLink);return g(k.numId,D)}else return null}else return null}function b(y){return h[y]||null}return{findLevel:g,findLevelByParagraphStyleId:b}}function t(s,l){if(!l||!l.styles)throw new Error("styles is missing");var u=n(s),d=a(s);return new e(d,u,l.styles)}function n(s){var l={};return s.getElementsByTagName("w:abstractNum").forEach(function(u){var d=u.attributes["w:abstractNumId"];l[d]=i(u)}),l}function i(s){var l={};s.getElementsByTagName("w:lvl").forEach(function(d){var h=d.attributes["w:ilvl"],g=d.firstOrEmpty("w:numFmt").attributes["w:val"],b=d.firstOrEmpty("w:pStyle").attributes["w:val"];l[h]={isOrdered:g!=="bullet",level:h,paragraphStyleId:b}});var u=s.firstOrEmpty("w:numStyleLink").attributes["w:val"];return{levels:l,numStyleLink:u}}function a(s){var l={};return s.getElementsByTagName("w:num").forEach(function(u){var d=u.attributes["w:numId"],h=u.first("w:abstractNumId").attributes["w:val"];l[d]={abstractNumId:h}}),l}return Tg}var Cg={},TU;function WP(){if(TU)return Cg;TU=1,Cg.readStylesXml=e,Cg.Styles=r,Cg.defaultStyles=new r({},{});function r(a,s,l,u){return{findParagraphStyleById:function(d){return a[d]},findCharacterStyleById:function(d){return s[d]},findTableStyleById:function(d){return l[d]},findNumberingStyleById:function(d){return u[d]}}}r.EMPTY=new r({},{},{},{});function e(a){var s={},l={},u={},d={},h={paragraph:s,character:l,table:u};return a.getElementsByTagName("w:style").forEach(function(g){var b=t(g);if(b.type==="numbering")d[b.styleId]=i(g);else{var y=h[b.type];y&&(y[b.styleId]=b)}}),new r(s,l,u,d)}function t(a){var s=a.attributes["w:type"],l=a.attributes["w:styleId"],u=n(a);return{type:s,styleId:l,name:u}}function n(a){var s=a.first("w:name");return s?s.attributes["w:val"]:null}function i(a){var s=a.firstOrEmpty("w:pPr").firstOrEmpty("w:numPr").firstOrEmpty("w:numId").attributes["w:val"];return{numId:s}}return Cg}var Eh={},CU;function HP(){if(CU)return Eh;CU=1;var r=Bd(),e=rl().Result;Eh.createFootnotesReader=t.bind(Eh,"footnote"),Eh.createEndnotesReader=t.bind(Eh,"endnote");function t(n,i){function a(u){return e.combine(u.getElementsByTagName("w:"+n).filter(s).map(l))}function s(u){var d=u.attributes["w:type"];return d!=="continuationSeparator"&&d!=="separator"}function l(u){var d=u.attributes["w:id"];return i.readXmlElements(u.children).map(function(h){return r.Note({noteType:n,noteId:d,body:h})})}return a}return Eh}var Nk={},NU;function qP(){if(NU)return Nk;NU=1;var r=Bd(),e=rl().Result;function t(n){function i(s){return e.combine(s.getElementsByTagName("w:comment").map(a))}function a(s){var l=s.attributes["w:id"];function u(d){return(s.attributes[d]||"").trim()||null}return n.readXmlElements(s.children).map(function(d){return r.comment({commentId:l,body:d,authorName:u("w:author"),authorInitials:u("w:initials")})})}return i}return Nk.createCommentsReader=t,Nk}var Uk={},UU;function VP(){if(UU)return Uk;UU=1;var r=Hc();Uk.Files=e;function e(){function t(n){return r.reject(new Error("could not open external image: '"+n+`'
cannot open linked files from a web browser`))}return{read:t}}return Uk}var RU;function XP(){if(RU)return Cx;RU=1,Cx.read=D,Cx._findPartPaths=v;var r=Hc(),e=Bd(),t=rl().Result,n=Nj(),i=jP().readXmlFromZipFile,a=MP().createBodyReader,s=LP().DocumentXmlReader,l=BP(),u=PP(),d=zP(),h=WP(),g=HP(),b=qP(),y=VP().Files;function D(I,F){return F=F||{},r.props({contentTypes:E(I),partPaths:v(I),docxFile:I,files:F.path?y.relativeToFile(F.path):new y(null)}).also(function(G){return{styles:R(I,G.partPaths.styles)}}).also(function(G){return{numbering:T(I,G.partPaths.numbering,G.styles)}}).also(function(G){return{footnotes:A(G.partPaths.footnotes,G,function(U,W){return W?g.createFootnotesReader(U)(W):new t([])}),endnotes:A(G.partPaths.endnotes,G,function(U,W){return W?g.createEndnotesReader(U)(W):new t([])}),comments:A(G.partPaths.comments,G,function(U,W){return W?b.createCommentsReader(U)(W):new t([])})}}).also(function(G){return{notes:G.footnotes.flatMap(function(U){return G.endnotes.map(function(W){return new e.Notes(U.concat(W))})})}}).then(function(G){return A(G.partPaths.mainDocument,G,function(U,W){return G.notes.flatMap(function(j){return G.comments.flatMap(function(X){var P=new s({bodyReader:U,notes:j,comments:X});return P.convertXmlToDocument(W)})})})})}function v(I){return M(I).then(function(F){var G=w({docxFile:I,relationships:F,relationshipType:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",basePath:"",fallbackPath:"word/document.xml"});if(!I.exists(G))throw new Error("Could not find main document part. Are you sure this is a valid .docx file?");return _({filename:N(G),readElement:l.readRelationships,defaultValue:l.defaultValue})(I).then(function(U){function W(j){return w({docxFile:I,relationships:U,relationshipType:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/"+j,basePath:n.splitPath(G).dirname,fallbackPath:"word/"+j+".xml"})}return{mainDocument:G,comments:W("comments"),endnotes:W("endnotes"),footnotes:W("footnotes"),numbering:W("numbering"),styles:W("styles")}})})}function w(I){var F=I.docxFile,G=I.relationships,U=I.relationshipType,W=I.basePath,j=I.fallbackPath,X=G.findTargetsByType(U),P=X.map(function(ee){return k(n.joinPath(W,ee),"/")}),B=P.filter(function(ee){return F.exists(ee)});return B.length===0?j:B[0]}function k(I,F){return I.substring(0,F.length)===F?I.substring(F.length):I}function _(I){return function(F){return i(F,I.filename).then(function(G){return G?I.readElement(G):I.defaultValue})}}function A(I,F,G){var U=_({filename:N(I),readElement:l.readRelationships,defaultValue:l.defaultValue});return U(F.docxFile).then(function(W){var j=new a({relationships:W,contentTypes:F.contentTypes,docxFile:F.docxFile,numbering:F.numbering,styles:F.styles,files:F.files});return i(F.docxFile,I).then(function(X){return G(j,X)})})}function N(I){var F=n.splitPath(I);return n.joinPath(F.dirname,"_rels",F.basename+".rels")}var E=_({filename:"[Content_Types].xml",readElement:u.readContentTypesFromXml,defaultValue:u.defaultContentTypes});function T(I,F,G){return _({filename:F,readElement:function(U){return d.readNumberingXml(U,{styles:G})},defaultValue:d.defaultNumbering})(I)}function R(I,F){return _({filename:F,readElement:h.readStylesXml,defaultValue:h.defaultStyles})(I)}var M=_({filename:"_rels/.rels",readElement:l.readRelationships,defaultValue:l.defaultValue});return Cx}var Px={},jU;function GP(){if(jU)return Px;jU=1;var r=Cn,e=Hc(),t=lS();Px.writeStyleMap=s,Px.readStyleMap=h;var n="http://schemas.zwobble.org/mammoth/style-map",i="mammoth/style-map",a="/"+i;function s(g,b){return g.write(i,b),l(g).then(function(){return u(g)})}function l(g){var b="word/_rels/document.xml.rels",y="http://schemas.openxmlformats.org/package/2006/relationships",D="{"+y+"}Relationship";return g.read(b,"utf8").then(t.readString).then(function(v){var w=v.children;d(w,D,"Id",{Id:"rMammothStyleMap",Type:n,Target:a});var k={"":y};return g.write(b,t.writeString(v,k))})}function u(g){var b="[Content_Types].xml",y="http://schemas.openxmlformats.org/package/2006/content-types",D="{"+y+"}Override";return g.read(b,"utf8").then(t.readString).then(function(v){var w=v.children;d(w,D,"PartName",{PartName:a,ContentType:"text/prs.mammoth.style-map"});var k={"":y};return g.write(b,t.writeString(v,k))})}function d(g,b,y,D){var v=r.find(g,function(w){return w.name===b&&w.attributes[y]===D[y]});v?v.attributes=D:g.push(t.element(b,D))}function h(g){return g.exists(i)?g.read(i,"utf8"):e.resolve(null)}return Px}var zx={},du={},ro={},jl={},FU;function Oj(){if(FU)return jl;FU=1;var r=xv();function e(u,d,h){return n(r.element(u,d,{fresh:!1}),h)}function t(u,d,h){var g=r.element(u,d,{fresh:!0});return n(g,h)}function n(u,d){return{type:"element",tag:u,children:d||[]}}function i(u){return{type:"text",value:u}}var a={type:"forceWrite"};jl.freshElement=t,jl.nonFreshElement=e,jl.elementWithTag=n,jl.text=i,jl.forceWrite=a;var s={br:!0,hr:!0,img:!0,input:!0};function l(u){return u.children.length===0&&s[u.tag.tagName]}return jl.isVoidElement=l,jl}var Rk,IU;function $P(){if(IU)return Rk;IU=1;var r=Cn,e=Oj();function t(v){return n(d(v))}function n(v){var w=[];return v.map(i).forEach(function(k){u(w,k)}),w}function i(v){return a[v.type](v)}var a={element:s,text:l,forceWrite:l};function s(v){return e.elementWithTag(v.tag,n(v.children))}function l(v){return v}function u(v,w){var k=v[v.length-1];w.type==="element"&&!w.tag.fresh&&k&&k.type==="element"&&w.tag.matchesElement(k.tag)?(w.tag.separator&&u(k.children,e.text(w.tag.separator)),w.children.forEach(function(_){u(k.children,_)})):v.push(w)}function d(v){return h(v,function(w){return g[w.type](w)})}function h(v,w){return r.flatten(r.map(v,w),!0)}var g={element:y,text:D,forceWrite:b};function b(v){return[v]}function y(v){var w=d(v.children);return w.length===0&&!e.isVoidElement(v)?[]:[e.elementWithTag(v.tag,w)]}function D(v){return v.value.length===0?[]:[v]}return Rk=t,Rk}var OU;function yv(){if(OU)return ro;OU=1;var r=Oj();ro.freshElement=r.freshElement,ro.nonFreshElement=r.nonFreshElement,ro.elementWithTag=r.elementWithTag,ro.text=r.text,ro.forceWrite=r.forceWrite,ro.simplify=$P();function e(s,l){l.forEach(function(u){t(s,u)})}function t(s,l){n[l.type](s,l)}var n={element:i,text:a,forceWrite:function(){}};function i(s,l){r.isVoidElement(l)?s.selfClosing(l.tag.tagName,l.tag.attributes):(s.open(l.tag.tagName,l.tag.attributes),e(s,l.children),s.close(l.tag.tagName))}function a(s,l){s.text(l.value)}return ro.write=e,ro}var MU;function xv(){if(MU)return du;MU=1;var r=Cn,e=yv();du.topLevelElement=t,du.elements=n,du.element=a;function t(l,u){return n([a(l,u,{fresh:!0})])}function n(l){return new i(l.map(function(u){return r.isString(u)?a(u):u}))}function i(l){this._elements=l}i.prototype.wrap=function(u){for(var d=u(),h=this._elements.length-1;h>=0;h--)d=this._elements[h].wrapNodes(d);return d};function a(l,u,d){return d=d||{},new s(l,u,d)}function s(l,u,d){var h={};r.isArray(l)?(l.forEach(function(g){h[g]=!0}),l=l[0]):h[l]=!0,this.tagName=l,this.tagNames=h,this.attributes=u||{},this.fresh=d.fresh,this.separator=d.separator}return s.prototype.matchesElement=function(l){return this.tagNames[l.tagName]&&r.isEqual(this.attributes||{},l.attributes||{})},s.prototype.wrap=function(u){return this.wrapNodes(u())},s.prototype.wrapNodes=function(u){return[e.elementWithTag(this,u)]},du.empty=n([]),du.ignore={wrap:function(){return[]}},du}var jk={},LU;function Mj(){return LU||(LU=1,(function(r){var e=Cn,t=Hc(),n=yv();r.imgElement=i;function i(a){return function(s,l){return t.when(a(s)).then(function(u){var d={};return s.altText&&(d.alt=s.altText),e.extend(d,u),[n.freshElement("img",d)]})}}r.inline=r.imgElement,r.dataUri=i(function(a){return a.readAsBase64String().then(function(s){return{src:"data:"+a.contentType+";base64,"+s}})})})(jk)),jk}var Fk={},Ik={},BU;function YP(){if(BU)return Ik;BU=1;var r=Cn;Ik.writer=e;function e(l){return l=l||{},l.prettyPrint?n():i()}var t={div:!0,p:!0,ul:!0,li:!0};function n(){var l=0,u="  ",d=[],h=!0,g=!1,b=i();function y(E,T){t[E]&&A(),d.push(E),b.open(E,T),t[E]&&l++,h=!1}function D(E){t[E]&&(l--,A()),d.pop(),b.close(E)}function v(E){_();var T=N()?E:E.replace(`
`,`
`+u);b.text(T)}function w(E,T){A(),b.selfClosing(E,T)}function k(){return d.length===0||t[d[d.length-1]]}function _(){g||(A(),g=!0)}function A(){if(g=!1,!h&&k()&&!N()){b._append(`
`);for(var E=0;E<l;E++)b._append(u)}}function N(){return r.some(d,function(E){return E==="pre"})}return{asString:b.asString,open:y,close:D,text:v,selfClosing:w}}function i(){var l=[];function u(v,w){var k=g(w);l.push("<"+v+k+">")}function d(v){l.push("</"+v+">")}function h(v,w){var k=g(w);l.push("<"+v+k+" />")}function g(v){return r.map(v,function(w,k){return" "+k+'="'+s(w)+'"'}).join("")}function b(v){l.push(a(v))}function y(v){l.push(v)}function D(){return l.join("")}return{asString:D,open:u,close:d,text:b,selfClosing:h,_append:y}}function a(l){return l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function s(l){return l.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return Ik}var Ok={},PU;function KP(){if(PU)return Ok;PU=1;var r=Cn;function e(g){return t(g,g)}function t(g,b){return function(){return{start:g,end:b}}}function n(g){var b=g.href||"";return b?{start:"[",end:"]("+b+")",anchorPosition:"before"}:{}}function i(g){var b=g.src||"",y=g.alt||"";return b||y?{start:"!["+y+"]("+b+")"}:{}}function a(g){return function(b,y){return{start:y?`
`:"",end:y?"":`
`,list:{isOrdered:g.isOrdered,indent:y?y.indent+1:0,count:0}}}}function s(g,b,y){b=b||{indent:0,isOrdered:!1,count:0},b.count++,y.hasClosed=!1;var D=b.isOrdered?b.count+".":"-",v=u("	",b.indent)+D+" ";return{start:v,end:function(){if(!y.hasClosed)return y.hasClosed=!0,`
`}}}var l={p:t("",`

`),br:t("",`  
`),ul:a({isOrdered:!1}),ol:a({isOrdered:!0}),li:s,strong:e("__"),em:e("*"),a:n,img:i};(function(){for(var g=1;g<=6;g++)l["h"+g]=t(u("#",g)+" ",`

`)})();function u(g,b){return new Array(b+1).join(g)}function d(){var g=[],b=[],y=null,D={};function v(E,T){T=T||{};var R=l[E]||function(){return{}},M=R(T,y,D);b.push({end:M.end,list:y}),M.list&&(y=M.list);var I=M.anchorPosition==="before";I&&w(T),g.push(M.start||""),I||w(T)}function w(E){E.id&&g.push('<a id="'+E.id+'"></a>')}function k(E){var T=b.pop();y=T.list;var R=r.isFunction(T.end)?T.end():T.end;g.push(R||"")}function _(E,T){v(E,T),k()}function A(E){g.push(h(E))}function N(){return g.join("")}return{asString:N,open:v,close:k,text:A,selfClosing:_}}Ok.writer=d;function h(g){return g.replace(/\\/g,"\\\\").replace(/([\`\*_\{\}\[\]\(\)\#\+\-\.\!])/g,"\\$1")}return Ok}var zU;function QP(){if(zU)return Fk;zU=1;var r=YP(),e=KP();Fk.writer=t;function t(n){return n=n||{},n.outputFormat==="markdown"?e.writer():r.writer(n)}return Fk}var WU;function ZP(){if(WU)return zx;WU=1;var r=Cn,e=Hc(),t=Bd(),n=xv(),i=rl(),a=Mj(),s=yv(),l=QP();zx.DocumentConverter=u;function u(w){return{convertToHtml:function(k){var _=r.indexBy(k.type===t.types.document?k.comments:[],"commentId"),A=new d(w,_);return A.convertToHtml(k)}}}function d(w,k){var _=1,A=[],N=[];w=r.extend({ignoreEmptyParagraphs:!0},w);var E=w.idPrefix===void 0?"":w.idPrefix,T=w.ignoreEmptyParagraphs,R=n.topLevelElement("p"),M=w.styleMap||[];function I(O){var he=[],oe=G(O,he,{}),re=[];D(oe,function(ue){ue.type==="deferred"&&re.push(ue)});var ne={};return e.mapSeries(re,function(ue){return ue.value().then(function(Ce){ne[ue.id]=Ce})}).then(function(){function ue(Ne){return y(Ne,function(pe){return pe.type==="deferred"?ne[pe.id]:pe.children?[r.extend({},pe,{children:ue(pe.children)})]:[pe]})}var Ce=l.writer({prettyPrint:w.prettyPrint,outputFormat:w.outputFormat});return s.write(Ce,s.simplify(ue(oe))),new i.Result(Ce.asString(),he)})}function F(O,he,oe){return y(O,function(re){return G(re,he,oe)})}function G(O,he,oe){if(!oe)throw new Error("options not set");var re=$e[O.type];return re?re(O,he,oe):[]}function U(O,he,oe){return W(O,he).wrap(function(){var re=F(O.children,he,oe);return T?re:[s.forceWrite].concat(re)})}function W(O,he){var oe=B(O);return oe?oe.to:(O.styleId&&he.push(b("paragraph",O)),R)}function j(O,he,oe){var re=function(){return F(O.children,he,oe)},ne=[];if(O.highlight!==null){var ue=P({type:"highlight",color:O.highlight});ue&&ne.push(ue)}O.isSmallCaps&&ne.push(X("smallCaps")),O.isAllCaps&&ne.push(X("allCaps")),O.isStrikethrough&&ne.push(X("strikethrough","s")),O.isUnderline&&ne.push(X("underline")),O.verticalAlignment===t.verticalAlignment.subscript&&ne.push(n.element("sub",{},{fresh:!1})),O.verticalAlignment===t.verticalAlignment.superscript&&ne.push(n.element("sup",{},{fresh:!1})),O.isItalic&&ne.push(X("italic","em")),O.isBold&&ne.push(X("bold","strong"));var Ce=n.empty,Ne=B(O);return Ne?Ce=Ne.to:O.styleId&&he.push(b("run",O)),ne.push(Ce),ne.forEach(function(pe){re=pe.wrap.bind(pe,re)}),re()}function X(O,he){var oe=P({type:O});return oe||(he?n.element(he,{},{fresh:!1}):n.empty)}function P(O,he){var oe=B(O);return oe?oe.to:he}function B(O){for(var he=0;he<M.length;he++)if(M[he].from.matches(O))return M[he]}function ee(O){return function(he,oe){return e.attempt(function(){return O(he,oe)}).caught(function(re){return oe.push(i.error(re)),[]})}}function K(O){return J(O.noteType,O.noteId)}function H(O){return ie(O.noteType,O.noteId)}function J(O,he){return z(O+"-"+he)}function ie(O,he){return z(O+"-ref-"+he)}function z(O){return E+O}var ge=n.elements([n.element("table",{},{fresh:!0})]);function ve(O,he,oe){return P(O,ge).wrap(function(){return je(O,he,oe)})}function je(O,he,oe){var re=r.findIndex(O.children,function(Ne){return!Ne.type===t.types.tableRow||!Ne.isHeader});re===-1&&(re=O.children.length);var ne;if(re===0)ne=F(O.children,he,r.extend({},oe,{isTableHeader:!1}));else{var ue=F(O.children.slice(0,re),he,r.extend({},oe,{isTableHeader:!0})),Ce=F(O.children.slice(re),he,r.extend({},oe,{isTableHeader:!1}));ne=[s.freshElement("thead",{},ue),s.freshElement("tbody",{},Ce)]}return[s.forceWrite].concat(ne)}function Ie(O,he,oe){var re=F(O.children,he,oe);return[s.freshElement("tr",{},[s.forceWrite].concat(re))]}function Pe(O,he,oe){var re=oe.isTableHeader?"th":"td",ne=F(O.children,he,oe),ue={};return O.colSpan!==1&&(ue.colspan=O.colSpan.toString()),O.rowSpan!==1&&(ue.rowspan=O.rowSpan.toString()),[s.freshElement(re,ue,[s.forceWrite].concat(ne))]}function fe(O,he,oe){return P(O,n.ignore).wrap(function(){var re=k[O.commentId],ne=N.length+1,ue="["+v(re)+ne+"]";return N.push({label:ue,comment:re}),[s.freshElement("a",{href:"#"+J("comment",O.commentId),id:ie("comment",O.commentId)},[s.text(ue)])]})}function Ue(O,he,oe){var re=O.label,ne=O.comment,ue=F(ne.body,he,oe).concat([s.nonFreshElement("p",{},[s.text(" "),s.freshElement("a",{href:"#"+ie("comment",ne.commentId)},[s.text("↑")])])]);return[s.freshElement("dt",{id:J("comment",ne.commentId)},[s.text("Comment "+re)]),s.freshElement("dd",{},ue)]}function be(O,he,oe){return Fe(O).wrap(function(){return[]})}function Fe(O){var he=B(O);return he?he.to:O.breakType==="line"?n.topLevelElement("br"):n.empty}var $e={document:function(O,he,oe){var re=F(O.children,he,oe),ne=A.map(function(Ce){return O.notes.resolve(Ce)}),ue=F(ne,he,oe);return re.concat([s.freshElement("ol",{},ue),s.freshElement("dl",{},y(N,function(Ce){return Ue(Ce,he,oe)}))])},paragraph:U,run:j,text:function(O,he,oe){return[s.text(O.value)]},tab:function(O,he,oe){return[s.text("	")]},hyperlink:function(O,he,oe){var re=O.anchor?"#"+z(O.anchor):O.href,ne={href:re};O.targetFrame!=null&&(ne.target=O.targetFrame);var ue=F(O.children,he,oe);return[s.nonFreshElement("a",ne,ue)]},checkbox:function(O){var he={type:"checkbox"};return O.checked&&(he.checked="checked"),[s.freshElement("input",he)]},bookmarkStart:function(O,he,oe){var re=s.freshElement("a",{id:z(O.name)},[s.forceWrite]);return[re]},noteReference:function(O,he,oe){A.push(O);var re=s.freshElement("a",{href:"#"+K(O),id:H(O)},[s.text("["+_+++"]")]);return[s.freshElement("sup",{},[re])]},note:function(O,he,oe){var re=F(O.body,he,oe),ne=s.elementWithTag(n.element("p",{},{fresh:!1}),[s.text(" "),s.freshElement("a",{href:"#"+H(O)},[s.text("↑")])]),ue=re.concat([ne]);return s.freshElement("li",{id:K(O)},ue)},commentReference:fe,comment:Ue,image:g(ee(w.convertImage||a.dataUri)),table:ve,tableRow:Ie,tableCell:Pe,break:be};return{convertToHtml:I}}var h=1;function g(w){return function(k,_,A){return[{type:"deferred",id:h++,value:function(){return w(k,_,A)}}]}}function b(w,k){return i.warning("Unrecognised "+w+" style: '"+k.styleName+"' (Style ID: "+k.styleId+")")}function y(w,k){return r.flatten(w.map(k),!0)}function D(w,k){w.forEach(function(_){k(_),_.children&&D(_.children,k)})}var v=zx.commentAuthorLabel=function(k){return k.authorInitials||""};return zx}var Mk={},HU;function JP(){if(HU)return Mk;HU=1;var r=Bd();function e(t){if(t.type==="text")return t.value;if(t.type===r.types.tab)return"	";var n=t.type==="paragraph"?`

`:"";return(t.children||[]).map(e).join("")+n}return Mk.convertElementToRawText=e,Mk}var Ng={},Oa={},Lk={},Bk={exports:{}},qU;function e7(){if(qU)return Bk.exports;qU=1;var r=Bk.exports=function(e,t){this._tokens=e,this._startIndex=t||0};return r.prototype.head=function(){return this._tokens[this._startIndex]},r.prototype.tail=function(e){return new r(this._tokens,this._startIndex+1)},r.prototype.toArray=function(){return this._tokens.slice(this._startIndex)},r.prototype.end=function(){return this._tokens[this._tokens.length-1]},r.prototype.to=function(e){var t=this.head().source,n=e.head()||e.end();return t.to(n.source)},Bk.exports}var VU;function t7(){if(VU)return Lk;VU=1;var r=e7();return Lk.Parser=function(e){var t=function(n,i){return n(new r(i))};return{parseTokens:t}},Lk}var Pk={},zk={},XU;function n7(){return XU||(XU=1,(function(r){r.none=Object.create({value:function(){throw new Error("Called value on none")},isNone:function(){return!0},isSome:function(){return!1},map:function(){return r.none},flatMap:function(){return r.none},filter:function(){return r.none},toArray:function(){return[]},orElse:e,valueOrElse:e});function e(n){return typeof n=="function"?n():n}r.some=function(n){return new t(n)};var t=function(n){this._value=n};t.prototype.value=function(){return this._value},t.prototype.isNone=function(){return!1},t.prototype.isSome=function(){return!0},t.prototype.map=function(n){return new t(n(this._value))},t.prototype.flatMap=function(n){return n(this._value)},t.prototype.filter=function(n){return n(this._value)?this:r.none},t.prototype.toArray=function(){return[this._value]},t.prototype.orElse=function(n){return this},t.prototype.valueOrElse=function(n){return this._value},r.isOption=function(n){return n===r.none||n instanceof t},r.fromNullable=function(n){return n==null?r.none:new t(n)}})(zk)),zk}var Wk,GU;function cS(){if(GU)return Wk;GU=1,Wk={failure:function(e,t){if(e.length<1)throw new Error("Failure must have errors");return new r({status:"failure",remaining:t,errors:e})},error:function(e,t){if(e.length<1)throw new Error("Failure must have errors");return new r({status:"error",remaining:t,errors:e})},success:function(e,t,n){return new r({status:"success",value:e,source:n,remaining:t,errors:[]})},cut:function(e){return new r({status:"cut",remaining:e,errors:[]})}};var r=function(e){this._value=e.value,this._status=e.status,this._hasValue=e.value!==void 0,this._remaining=e.remaining,this._source=e.source,this._errors=e.errors};return r.prototype.map=function(e){return this._hasValue?new r({value:e(this._value,this._source),status:this._status,remaining:this._remaining,source:this._source,errors:this._errors}):this},r.prototype.changeRemaining=function(e){return new r({value:this._value,status:this._status,remaining:e,source:this._source,errors:this._errors})},r.prototype.isSuccess=function(){return this._status==="success"||this._status==="cut"},r.prototype.isFailure=function(){return this._status==="failure"},r.prototype.isError=function(){return this._status==="error"},r.prototype.isCut=function(){return this._status==="cut"},r.prototype.value=function(){return this._value},r.prototype.remaining=function(){return this._remaining},r.prototype.source=function(){return this._source},r.prototype.errors=function(){return this._errors},Wk}var Hk={},$U;function Lj(){if($U)return Hk;$U=1,Hk.error=function(e){return new r(e)};var r=function(e){this.expected=e.expected,this.actual=e.actual,this._location=e.location};return r.prototype.describe=function(){var e=this._location?this._location.describe()+`:
`:"";return e+"Expected "+this.expected+`
but got `+this.actual},r.prototype.lineNumber=function(){return this._location.lineNumber()},r.prototype.characterNumber=function(){return this._location.characterNumber()},Hk}var qk={},YU;function r7(){if(YU)return qk;YU=1,qk.fromArray=function(e){var t=0,n=function(){return t<e.length};return new r({hasNext:n,next:function(){if(n())return e[t++];throw new Error("No more elements")}})};var r=function(e){this._iterator=e};return r.prototype.map=function(e){var t=this._iterator;return new r({hasNext:function(){return t.hasNext()},next:function(){return e(t.next())}})},r.prototype.filter=function(e){var t=this._iterator,n=!1,i=!1,a,s=function(){if(!n)for(n=!0,i=!1;t.hasNext()&&!i;)a=t.next(),i=e(a)};return new r({hasNext:function(){return s(),i},next:function(){s();var l=a;return n=!1,l}})},r.prototype.first=function(){var e=this._iterator;return this._iterator.hasNext()?e.next():null},r.prototype.toArray=function(){for(var e=[];this._iterator.hasNext();)e.push(this._iterator.next());return e},qk}var KU;function Bj(){return KU||(KU=1,(function(r){var e=Cn,t=n7(),n=cS(),i=Lj(),a=r7();r.token=function(b,y){var D=y!==void 0;return function(v){var w=v.head();if(w&&w.name===b&&(!D||w.value===y))return n.success(w.value,v.tail(),w.source);var k=h({name:b,value:y});return g(v,k)}},r.tokenOfType=function(b){return r.token(b)},r.firstOf=function(b,y){return e.isArray(y)||(y=Array.prototype.slice.call(arguments,1)),function(D){return a.fromArray(y).map(function(v){return v(D)}).filter(function(v){return v.isSuccess()||v.isError()}).first()||g(D,b)}},r.then=function(b,y){return function(D){var v=b(D);return v.map||console.log(v),v.map(y)}},r.sequence=function(){var b=Array.prototype.slice.call(arguments,0),y=function(v){var w=e.foldl(b,function(_,A){var N=_.result,E=_.hasCut;if(!N.isSuccess())return{result:N,hasCut:E};var T=A(N.remaining());if(T.isCut())return{result:N,hasCut:!0};if(T.isSuccess()){var R;A.isCaptured?R=N.value().withValue(A,T.value()):R=N.value();var M=T.remaining(),I=v.to(M);return{result:n.success(R,M,I),hasCut:E}}else return E?{result:n.error(T.errors(),T.remaining()),hasCut:E}:{result:T,hasCut:E}},{result:n.success(new s,v),hasCut:!1}).result,k=v.to(w.remaining());return w.map(function(_){return _.withValue(r.sequence.source,k)})};y.head=function(){var v=e.find(b,D);return r.then(y,r.sequence.extract(v))},y.map=function(v){return r.then(y,function(w){return v.apply(this,w.toArray())})};function D(v){return v.isCaptured}return y};var s=function(b,y){this._values=b||{},this._valuesArray=y||[]};s.prototype.withValue=function(b,y){if(b.captureName&&b.captureName in this._values)throw new Error('Cannot add second value for capture "'+b.captureName+'"');var D=e.clone(this._values);D[b.captureName]=y;var v=this._valuesArray.concat([y]);return new s(D,v)},s.prototype.get=function(b){if(b.captureName in this._values)return this._values[b.captureName];throw new Error('No value for capture "'+b.captureName+'"')},s.prototype.toArray=function(){return this._valuesArray},r.sequence.capture=function(b,y){var D=function(){return b.apply(this,arguments)};return D.captureName=y,D.isCaptured=!0,D},r.sequence.extract=function(b){return function(y){return y.get(b)}},r.sequence.applyValues=function(b){var y=Array.prototype.slice.call(arguments,1);return function(D){var v=y.map(function(w){return D.get(w)});return b.apply(this,v)}},r.sequence.source={captureName:"☃source☃"},r.sequence.cut=function(){return function(b){return n.cut(b)}},r.optional=function(b){return function(y){var D=b(y);return D.isSuccess()?D.map(t.some):D.isFailure()?n.success(t.none,y):D}},r.zeroOrMoreWithSeparator=function(b,y){return d(b,y,!1)},r.oneOrMoreWithSeparator=function(b,y){return d(b,y,!0)};var l=r.zeroOrMore=function(b){return function(y){for(var D=[],v;(v=b(y))&&v.isSuccess();)y=v.remaining(),D.push(v.value());return v.isError()?v:n.success(D,y)}};r.oneOrMore=function(b){return r.oneOrMoreWithSeparator(b,u)};function u(b){return n.success(null,b)}var d=function(b,y,D){return function(v){var w=b(v);if(w.isSuccess()){var k=r.sequence.capture(b,"main"),_=l(r.then(r.sequence(y,k),r.sequence.extract(k))),A=_(w.remaining());return n.success([w.value()].concat(A.value()),A.remaining())}else return D||w.isError()?w:n.success([],v)}};r.leftAssociative=function(b,y,D){var v;D?v=[{func:D,rule:y}]:v=y,v=v.map(function(k){return r.then(k.rule,function(_){return function(A,N){return k.func(A,_,N)}})});var w=r.firstOf.apply(null,["rules"].concat(v));return function(k){var _=k,A=b(k);if(!A.isSuccess())return A;for(var N=w(A.remaining());N.isSuccess();){var E=N.remaining(),T=_.to(N.remaining()),R=N.value();A=n.success(R(A.value(),T),E,T),N=w(A.remaining())}return N.isError()?N:A}},r.leftAssociative.firstOf=function(){return Array.prototype.slice.call(arguments,0)},r.nonConsuming=function(b){return function(y){return b(y).changeRemaining(y)}};var h=function(b){return b.value?b.name+' "'+b.value+'"':b.name};function g(b,y){var D,v=b.head();return v?D=i.error({expected:y,actual:h(v),location:v.source}):D=i.error({expected:y,actual:"end of tokens"}),n.failure([D],b)}})(Pk)),Pk}var Vk={exports:{}},QU;function Pj(){if(QU)return Vk.exports;QU=1,Vk.exports=function(e,t){var n={asString:function(){return e},range:function(i,a){return new r(e,t,i,a)}};return n};var r=function(e,t,n,i){this._string=e,this._description=t,this._startIndex=n,this._endIndex=i};return r.prototype.to=function(e){return new r(this._string,this._description,this._startIndex,e._endIndex)},r.prototype.describe=function(){var e=this._position(),t=this._description?this._description+`
`:"";return t+"Line number: "+e.lineNumber+`
Character number: `+e.characterNumber},r.prototype.lineNumber=function(){return this._position().lineNumber},r.prototype.characterNumber=function(){return this._position().characterNumber},r.prototype._position=function(){for(var e=this,t=0,n=function(){return e._string.indexOf(`
`,t)},i=1;n()!==-1&&n()<this._startIndex;)t=n()+1,i+=1;var a=this._startIndex-t+1;return{lineNumber:i,characterNumber:a}},Vk.exports}var Xk,ZU;function zj(){return ZU||(ZU=1,Xk=function(r,e,t){this.name=r,this.value=e,t&&(this.source=t)}),Xk}var Gk={},JU;function i7(){return JU||(JU=1,(function(r){var e=Bj(),t=cS();r.parser=function(a,s,l){var u={rule:b,leftAssociative:y,rightAssociative:D},d=new n(l.map(g)),h=e.firstOf(a,s);function g(k){return{name:k.name,rule:i(k.ruleBuilder.bind(null,u))}}function b(){return v(d)}function y(k){return v(d.untilExclusive(k))}function D(k){return v(d.untilInclusive(k))}function v(k){return w.bind(null,k)}function w(k,_){var A=h(_);return A.isSuccess()?k.apply(A):A}return u};function n(a){function s(g){return new n(a.slice(0,u().indexOf(g)))}function l(g){return new n(a.slice(0,u().indexOf(g)+1))}function u(){return a.map(function(g){return g.name})}function d(g){for(var b,y;;)if(b=h(g.remaining()),b.isSuccess())y=g.source().to(b.source()),g=t.success(b.value()(g.value(),y),b.remaining(),y);else return b.isFailure()?g:b}function h(g){return e.firstOf("infix",a.map(function(b){return b.rule}))(g)}return{apply:d,untilExclusive:s,untilInclusive:l}}r.infix=function(a,s){function l(u){return r.infix(a,function(d){var h=s(d);return function(g){var b=h(g);return b.map(function(y){return function(D,v){return u(D,y,v)}})}})}return{name:a,ruleBuilder:s,map:l}};var i=function(a){var s;return function(l){return s||(s=a()),s(l)}}})(Gk)),Gk}var $k={},e4;function a7(){if(e4)return $k;e4=1;var r=zj(),e=Pj();$k.RegexTokeniser=t;function t(n){n=n.map(function(l){return{name:l.name,regex:new RegExp(l.regex.source,"g")}});function i(l,u){for(var d=new e(l,u),h=0,g=[];h<l.length;){var b=a(l,h,d);h=b.endIndex,g.push(b.token)}return g.push(s(l,d)),g}function a(l,u,d){for(var h=0;h<n.length;h++){var g=n[h].regex;g.lastIndex=u;var b=g.exec(l);if(b){var D=u+b[0].length;if(b.index===u&&D>u){var y=b[1],v=new r(n[h].name,y,d.range(u,D));return{token:v,endIndex:D}}}}var D=u+1,v=new r("unrecognisedCharacter",l.substring(u,D),d.range(u,D));return{token:v,endIndex:D}}function s(l,u){return new r("end",null,u.range(l.length,l.length))}return{tokenise:i}}return $k}var t4;function Wj(){return t4||(t4=1,Oa.Parser=t7().Parser,Oa.rules=Bj(),Oa.errors=Lj(),Oa.results=cS(),Oa.StringSource=Pj(),Oa.Token=zj(),Oa.bottomUp=i7(),Oa.RegexTokeniser=a7().RegexTokeniser,Oa.rule=function(r){var e;return function(t){return e||(e=r()),e(t)}}),Oa}var rr={},n4;function s7(){if(n4)return rr;n4=1,rr.paragraph=r,rr.run=e,rr.table=t,rr.bold=new i("bold"),rr.italic=new i("italic"),rr.underline=new i("underline"),rr.strikethrough=new i("strikethrough"),rr.allCaps=new i("allCaps"),rr.smallCaps=new i("smallCaps"),rr.highlight=n,rr.commentReference=new i("commentReference"),rr.lineBreak=new s({breakType:"line"}),rr.pageBreak=new s({breakType:"page"}),rr.columnBreak=new s({breakType:"column"}),rr.equalTo=u,rr.startsWith=d;function r(b){return new i("paragraph",b)}function e(b){return new i("run",b)}function t(b){return new i("table",b)}function n(b){return new a(b)}function i(b,y){y=y||{},this._elementType=b,this._styleId=y.styleId,this._styleName=y.styleName,y.list&&(this._listIndex=y.list.levelIndex,this._listIsOrdered=y.list.isOrdered)}i.prototype.matches=function(b){return b.type===this._elementType&&(this._styleId===void 0||b.styleId===this._styleId)&&(this._styleName===void 0||b.styleName&&this._styleName.operator(this._styleName.operand,b.styleName))&&(this._listIndex===void 0||l(b,this._listIndex,this._listIsOrdered))&&(this._breakType===void 0||this._breakType===b.breakType)};function a(b){b=b||{},this._color=b.color}a.prototype.matches=function(b){return b.type==="highlight"&&(this._color===void 0||b.color===this._color)};function s(b){b=b||{},this._breakType=b.breakType}s.prototype.matches=function(b){return b.type==="break"&&(this._breakType===void 0||b.breakType===this._breakType)};function l(b,y,D){return b.numbering&&b.numbering.level==y&&b.numbering.isOrdered==D}function u(b){return{operator:h,operand:b}}function d(b){return{operator:g,operand:b}}function h(b,y){return b.toUpperCase()===y.toUpperCase()}function g(b,y){return y.toUpperCase().indexOf(b.toUpperCase())===0}return rr}var Yk={},r4;function o7(){if(r4)return Yk;r4=1;var r=Wj(),e=r.RegexTokeniser;Yk.tokenise=n;var t="'((?:\\\\.|[^'])*)";function n(i){var a="(?:[a-zA-Z\\-_]|\\\\.)",s=new e([{name:"identifier",regex:new RegExp("("+a+"(?:"+a+"|[0-9])*)")},{name:"dot",regex:/\./},{name:"colon",regex:/:/},{name:"gt",regex:/>/},{name:"whitespace",regex:/\s+/},{name:"arrow",regex:/=>/},{name:"equals",regex:/=/},{name:"startsWith",regex:/\^=/},{name:"open-paren",regex:/\(/},{name:"close-paren",regex:/\)/},{name:"open-square-bracket",regex:/\[/},{name:"close-square-bracket",regex:/\]/},{name:"string",regex:new RegExp(t+"'")},{name:"unterminated-string",regex:new RegExp(t)},{name:"integer",regex:/([0-9]+)/},{name:"choice",regex:/\|/},{name:"bang",regex:/(!)/}]);return s.tokenise(i)}return Yk}var i4;function l7(){if(i4)return Ng;i4=1;var r=Cn,e=Wj(),t=s7(),n=xv(),i=o7().tokenise,a=rl();Ng.readHtmlPath=h,Ng.readDocumentMatcher=u,Ng.readStyle=s;function s(M){return N(R,M)}function l(){return e.rules.sequence(e.rules.sequence.capture(d()),e.rules.tokenOfType("whitespace"),e.rules.tokenOfType("arrow"),e.rules.sequence.capture(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("whitespace"),e.rules.sequence.capture(g())).head())),e.rules.tokenOfType("end")).map(function(M,I){return{from:M,to:I.valueOrElse(n.empty)}})}function u(M){return N(d(),M)}function d(){var M=e.rules.sequence,I=function(Ue,be){return e.rules.then(e.rules.token("identifier",Ue),function(){return be})},F=I("p",t.paragraph),G=I("r",t.run),U=e.rules.firstOf("p or r or table",F,G),W=e.rules.sequence(e.rules.tokenOfType("dot"),e.rules.sequence.cut(),e.rules.sequence.capture(b)).map(function(Ue){return{styleId:Ue}}),j=e.rules.firstOf("style name matcher",e.rules.then(e.rules.sequence(e.rules.tokenOfType("equals"),e.rules.sequence.cut(),e.rules.sequence.capture(D)).head(),function(Ue){return{styleName:t.equalTo(Ue)}}),e.rules.then(e.rules.sequence(e.rules.tokenOfType("startsWith"),e.rules.sequence.cut(),e.rules.sequence.capture(D)).head(),function(Ue){return{styleName:t.startsWith(Ue)}})),X=e.rules.sequence(e.rules.tokenOfType("open-square-bracket"),e.rules.sequence.cut(),e.rules.token("identifier","style-name"),e.rules.sequence.capture(j),e.rules.tokenOfType("close-square-bracket")).head(),P=e.rules.firstOf("list type",I("ordered-list",{isOrdered:!0}),I("unordered-list",{isOrdered:!1})),B=M(e.rules.tokenOfType("colon"),M.capture(P),M.cut(),e.rules.tokenOfType("open-paren"),M.capture(y),e.rules.tokenOfType("close-paren")).map(function(Ue,be){return{list:{isOrdered:Ue.isOrdered,levelIndex:be-1}}});function ee(Ue){var be=e.rules.firstOf.apply(e.rules.firstOf,["matcher suffix"].concat(Ue)),Fe=e.rules.zeroOrMore(be);return e.rules.then(Fe,function($e){var O={};return $e.forEach(function(he){r.extend(O,he)}),O})}var K=M(M.capture(U),M.capture(ee([W,X,B]))).map(function(Ue,be){return Ue(be)}),H=M(e.rules.token("identifier","table"),M.capture(ee([W,X]))).map(function(Ue){return t.table(Ue)}),J=I("b",t.bold),ie=I("i",t.italic),z=I("u",t.underline),ge=I("strike",t.strikethrough),ve=I("all-caps",t.allCaps),je=I("small-caps",t.smallCaps),Ie=M(e.rules.token("identifier","highlight"),e.rules.sequence.capture(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("open-square-bracket"),e.rules.sequence.cut(),e.rules.token("identifier","color"),e.rules.tokenOfType("equals"),e.rules.sequence.capture(D),e.rules.tokenOfType("close-square-bracket")).head()))).map(function(Ue){return t.highlight({color:Ue.valueOrElse(void 0)})}),Pe=I("comment-reference",t.commentReference),fe=M(e.rules.token("identifier","br"),M.cut(),e.rules.tokenOfType("open-square-bracket"),e.rules.token("identifier","type"),e.rules.tokenOfType("equals"),M.capture(D),e.rules.tokenOfType("close-square-bracket")).map(function(Ue){switch(Ue){case"line":return t.lineBreak;case"page":return t.pageBreak;case"column":return t.columnBreak}});return e.rules.firstOf("element type",K,H,J,ie,z,ge,ve,je,Ie,Pe,fe)}function h(M){return N(g(),M)}function g(){var M=e.rules.sequence.capture,I=e.rules.tokenOfType("whitespace"),F=e.rules.then(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("colon"),e.rules.token("identifier","fresh"))),function(j){return j.map(function(){return!0}).valueOrElse(!1)}),G=e.rules.then(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("colon"),e.rules.token("identifier","separator"),e.rules.tokenOfType("open-paren"),M(D),e.rules.tokenOfType("close-paren")).head()),function(j){return j.valueOrElse("")}),U=e.rules.oneOrMoreWithSeparator(b,e.rules.tokenOfType("choice")),W=e.rules.sequence(M(U),M(e.rules.zeroOrMore(A)),M(F),M(G)).map(function(j,X,P,B){var ee={},K={};return X.forEach(function(H){H.append&&ee[H.name]?ee[H.name]+=" "+H.value:ee[H.name]=H.value}),P&&(K.fresh=!0),B&&(K.separator=B),n.element(j,ee,K)});return e.rules.firstOf("html path",e.rules.then(e.rules.tokenOfType("bang"),function(){return n.ignore}),e.rules.then(e.rules.zeroOrMoreWithSeparator(W,e.rules.sequence(I,e.rules.tokenOfType("gt"),I)),n.elements))}var b=e.rules.then(e.rules.tokenOfType("identifier"),w),y=e.rules.tokenOfType("integer"),D=e.rules.then(e.rules.tokenOfType("string"),w),v={n:`
`,r:"\r",t:"	"};function w(M){return M.replace(/\\(.)/g,function(I,F){return v[F]||F})}var k=e.rules.sequence(e.rules.tokenOfType("open-square-bracket"),e.rules.sequence.cut(),e.rules.sequence.capture(b),e.rules.tokenOfType("equals"),e.rules.sequence.capture(D),e.rules.tokenOfType("close-square-bracket")).map(function(M,I){return{name:M,value:I,append:!1}}),_=e.rules.sequence(e.rules.tokenOfType("dot"),e.rules.sequence.cut(),e.rules.sequence.capture(b)).map(function(M){return{name:"class",value:M,append:!0}}),A=e.rules.firstOf("attribute or class",k,_);function N(M,I){var F=i(I),G=e.Parser(),U=G.parseTokens(M,F);return U.isSuccess()?a.success(U.value()):new a.Result(null,[a.warning(E(I,U))])}function E(M,I){return"Did not understand this style mapping, so ignored it: "+M+`
`+I.errors().map(T).join(`
`)}function T(M){return"Error was at character number "+M.characterNumber()+": Expected "+M.expected+" but got "+M.actual}var R=l();return Ng}var Ug={},a4;function c7(){if(a4)return Ug;a4=1,Ug.readOptions=n;var r=Cn,e=Ug._defaultStyleMap=["p.Heading1 => h1:fresh","p.Heading2 => h2:fresh","p.Heading3 => h3:fresh","p.Heading4 => h4:fresh","p.Heading5 => h5:fresh","p.Heading6 => h6:fresh","p[style-name='Heading 1'] => h1:fresh","p[style-name='Heading 2'] => h2:fresh","p[style-name='Heading 3'] => h3:fresh","p[style-name='Heading 4'] => h4:fresh","p[style-name='Heading 5'] => h5:fresh","p[style-name='Heading 6'] => h6:fresh","p[style-name='heading 1'] => h1:fresh","p[style-name='heading 2'] => h2:fresh","p[style-name='heading 3'] => h3:fresh","p[style-name='heading 4'] => h4:fresh","p[style-name='heading 5'] => h5:fresh","p[style-name='heading 6'] => h6:fresh","p.Heading => h1:fresh","p[style-name='Heading'] => h1:fresh","r[style-name='Strong'] => strong","p[style-name='footnote text'] => p:fresh","r[style-name='footnote reference'] =>","p[style-name='endnote text'] => p:fresh","r[style-name='endnote reference'] =>","p[style-name='annotation text'] => p:fresh","r[style-name='annotation reference'] =>","p[style-name='Footnote'] => p:fresh","r[style-name='Footnote anchor'] =>","p[style-name='Endnote'] => p:fresh","r[style-name='Endnote anchor'] =>","p:unordered-list(1) => ul > li:fresh","p:unordered-list(2) => ul|ol > li > ul > li:fresh","p:unordered-list(3) => ul|ol > li > ul|ol > li > ul > li:fresh","p:unordered-list(4) => ul|ol > li > ul|ol > li > ul|ol > li > ul > li:fresh","p:unordered-list(5) => ul|ol > li > ul|ol > li > ul|ol > li > ul|ol > li > ul > li:fresh","p:ordered-list(1) => ol > li:fresh","p:ordered-list(2) => ul|ol > li > ol > li:fresh","p:ordered-list(3) => ul|ol > li > ul|ol > li > ol > li:fresh","p:ordered-list(4) => ul|ol > li > ul|ol > li > ul|ol > li > ol > li:fresh","p:ordered-list(5) => ul|ol > li > ul|ol > li > ul|ol > li > ul|ol > li > ol > li:fresh","r[style-name='Hyperlink'] =>","p[style-name='Normal'] => p:fresh","p.Body => p:fresh","p[style-name='Body'] => p:fresh"],t=Ug._standardOptions={transformDocument:a,includeDefaultStyleMap:!0,includeEmbeddedStyleMap:!0};function n(s){return s=s||{},r.extend({},t,s,{customStyleMap:i(s.styleMap),readStyleMap:function(){var l=this.customStyleMap;return this.includeEmbeddedStyleMap&&(l=l.concat(i(this.embeddedStyleMap))),this.includeDefaultStyleMap&&(l=l.concat(e)),l}})}function i(s){return s?r.isString(s)?s.split(`
`).map(function(l){return l.trim()}).filter(function(l){return l!==""&&l.charAt(0)!=="#"}):s:[]}function a(s){return s}return Ug}var Kk={},s4;function u7(){if(s4)return Kk;s4=1;var r=Hc(),e=Nj();Kk.openZip=t;function t(n){return n.arrayBuffer?r.resolve(e.openArrayBuffer(n.arrayBuffer)):r.reject(new Error("Could not find file in options"))}return Kk}var Qk={},o4;function d7(){if(o4)return Qk;o4=1;var r=xv(),e=yv();Qk.element=t;function t(n){return function(i){return e.elementWithTag(r.element(n),[i])}}return Qk}var l4;function h7(){if(l4)return sa;l4=1;var r=Cn,e=XP(),t=GP(),n=ZP().DocumentConverter,i=JP().convertElementToRawText,a=l7().readStyle,s=c7().readOptions,l=u7(),u=rl().Result;sa.convertToHtml=d,sa.convertToMarkdown=h,sa.convert=g,sa.extractRawText=v,sa.images=Mj(),sa.transforms=Ij(),sa.underline=d7(),sa.embedStyleMap=w,sa.readEmbeddedStyleMap=b;function d(k,_){return g(k,_)}function h(k,_){var A=Object.create(_||{});return A.outputFormat="markdown",g(k,A)}function g(k,_){return _=s(_),l.openZip(k).tap(function(A){return t.readStyleMap(A).then(function(N){_.embeddedStyleMap=N})}).then(function(A){return e.read(A,k).then(function(N){return N.map(_.transformDocument)}).then(function(N){return y(N,_)})})}function b(k){return l.openZip(k).then(t.readStyleMap)}function y(k,_){var A=D(_.readStyleMap()),N=r.extend({},_,{styleMap:A.value}),E=new n(N);return k.flatMapThen(function(T){return A.flatMapThen(function(R){return E.convertToHtml(T)})})}function D(k){return u.combine((k||[]).map(a)).map(function(_){return _.filter(function(A){return!!A})})}function v(k){return l.openZip(k).then(e.read).then(function(_){return _.map(i)})}function w(k,_){return l.openZip(k).tap(function(A){return t.writeStyleMap(A,_)}).then(function(A){return A.toArrayBuffer()}).then(function(A){return{toArrayBuffer:function(){return A},toBuffer:function(){return Buffer.from(A)}}})}return sa.styleMapping=function(){throw new Error(`Use a raw string instead of mammoth.styleMapping e.g. "p[style-name='Title'] => h1" instead of mammoth.styleMapping("p[style-name='Title'] => h1")`)},sa}var f7=h7();const p7=ey(f7),Hr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),jD=[.001,0,0,.001,0,0],Zk=1.35,Hi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ol={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Hj="pdfjs_internal_editor_",pt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Nt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},g7={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},pr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},D0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},In={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Rh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},vv={ERRORS:0,WARNINGS:1,INFOS:5},ym={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Wx={moveTo:0,lineTo:1,curveTo:2,closePath:3},m7={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let wv=vv.WARNINGS;function b7(r){Number.isInteger(r)&&(wv=r)}function y7(){return wv}function kv(r){wv>=vv.INFOS&&console.log(`Info: ${r}`)}function gt(r){wv>=vv.WARNINGS&&console.log(`Warning: ${r}`)}function Jt(r){throw new Error(r)}function Ln(r,e){r||Jt(e)}function x7(r){switch(r==null?void 0:r.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function qj(r,e=null,t=null){if(!r)return null;if(t&&typeof r=="string"){if(t.addDefaultProtocol&&r.startsWith("www.")){const i=r.match(/\./g);(i==null?void 0:i.length)>=2&&(r=`http://${r}`)}if(t.tryConvertEncoding)try{r=_7(r)}catch{}}const n=e?URL.parse(r,e):URL.parse(r);return x7(n)?n:null}function Vj(r,e,t=!1){const n=URL.parse(r);return n?(n.hash=e,n.href):t&&qj(r,"http://example.com")?r.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Dt(r,e,t,n=!1){return Object.defineProperty(r,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Pd=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class c4 extends Pd{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Jk extends Pd{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class FD extends Pd{constructor(e){super(e,"InvalidPDFException")}}class l1 extends Pd{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class v7 extends Pd{constructor(e){super(e,"FormatError")}}class Ic extends Pd{constructor(e){super(e,"AbortException")}}function Xj(r){(typeof r!="object"||(r==null?void 0:r.length)===void 0)&&Jt("Invalid argument for bytesToString");const e=r.length,t=8192;if(e<t)return String.fromCharCode.apply(null,r);const n=[];for(let i=0;i<e;i+=t){const a=Math.min(i+t,e),s=r.subarray(i,a);n.push(String.fromCharCode.apply(null,s))}return n.join("")}function ly(r){typeof r!="string"&&Jt("Invalid argument for stringToBytes");const e=r.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=r.charCodeAt(n)&255;return t}function w7(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function k7(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function D7(){try{return new Function(""),!0}catch{return!1}}class Ar{static get isLittleEndian(){return Dt(this,"isLittleEndian",k7())}static get isEvalSupported(){return Dt(this,"isEvalSupported",D7())}static get isOffscreenCanvasSupported(){return Dt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Dt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Dt(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Dt(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const eD=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));var Zo,_0,ID;class tt{static makeHexColor(e,t,n){return`#${eD[e]}${eD[t]}${eD[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const i=e[n],a=e[n+1];e[n]=i*t[0]+a*t[2]+t[4],e[n+1]=i*t[1]+a*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const i=t[0],a=t[1],s=t[2],l=t[3],u=t[4],d=t[5];for(let h=0;h<6;h+=2){const g=e[n+h],b=e[n+h+1];e[n+h]=g*i+b*s+u,e[n+h+1]=g*a+b*l+d}}static applyInverseTransform(e,t){const n=e[0],i=e[1],a=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/a,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/a}static axialAlignedBoundingBox(e,t,n){const i=t[0],a=t[1],s=t[2],l=t[3],u=t[4],d=t[5],h=e[0],g=e[1],b=e[2],y=e[3];let D=i*h+u,v=D,w=i*b+u,k=w,_=l*g+d,A=_,N=l*y+d,E=N;if(a!==0||s!==0){const T=a*h,R=a*b,M=s*g,I=s*y;D+=M,k+=M,w+=I,v+=I,_+=T,E+=T,N+=R,A+=R}n[0]=Math.min(n[0],D,w,v,k),n[1]=Math.min(n[1],_,N,A,E),n[2]=Math.max(n[2],D,w,v,k),n[3]=Math.max(n[3],_,N,A,E)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],i=e[1],a=e[2],s=e[3],l=n**2+i**2,u=n*a+i*s,d=a**2+s**2,h=(l+d)/2,g=Math.sqrt(h**2-(l*d-u**2));t[0]=Math.sqrt(h+g||1),t[1]=Math.sqrt(h-g||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>s?null:[n,a,i,s]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,a){a[0]=Math.min(a[0],e,n),a[1]=Math.min(a[1],t,i),a[2]=Math.max(a[2],e,n),a[3]=Math.max(a[3],t,i)}static bezierBoundingBox(e,t,n,i,a,s,l,u,d){d[0]=Math.min(d[0],e,l),d[1]=Math.min(d[1],t,u),d[2]=Math.max(d[2],e,l),d[3]=Math.max(d[3],t,u),$(this,Zo,ID).call(this,e,n,a,l,t,i,s,u,3*(-e+3*(n-a)+l),6*(e-2*n+a),3*(n-e),d),$(this,Zo,ID).call(this,e,n,a,l,t,i,s,u,3*(-t+3*(i-s)+u),6*(t-2*i+s),3*(i-t),d)}}Zo=new WeakSet,_0=function(e,t,n,i,a,s,l,u,d,h){if(d<=0||d>=1)return;const g=1-d,b=d*d,y=b*d,D=g*(g*(g*e+3*d*t)+3*b*n)+y*i,v=g*(g*(g*a+3*d*s)+3*b*l)+y*u;h[0]=Math.min(h[0],D),h[1]=Math.min(h[1],v),h[2]=Math.max(h[2],D),h[3]=Math.max(h[3],v)},ID=function(e,t,n,i,a,s,l,u,d,h,g,b){if(Math.abs(d)<1e-12){Math.abs(h)>=1e-12&&$(this,Zo,_0).call(this,e,t,n,i,a,s,l,u,-g/h,b);return}const y=h**2-4*g*d;if(y<0)return;const D=Math.sqrt(y),v=2*d;$(this,Zo,_0).call(this,e,t,n,i,a,s,l,u,(-h+D)/v,b),$(this,Zo,_0).call(this,e,t,n,i,a,s,l,u,(-h-D)/v,b)},V(tt,Zo);function _7(r){return decodeURIComponent(escape(r))}let tD=null,u4=null;function A7(r){return tD||(tD=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,u4=new Map([["ﬅ","ſt"]])),r.replaceAll(tD,(e,t,n)=>t?t.normalize("NFKC"):u4.get(n))}function Gj(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),Xj(r)}const uS="pdfjs_internal_id_";function S7(r,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,i,...a]=t;if(!r(n)&&!Number.isInteger(n)||!e(i))return!1;const s=a.length;let l=!0;switch(i.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;l=!1;break;default:return!1}for(const u of a)if(!(typeof u=="number"||l&&u===null))return!1;return!0}function qr(r,e,t){return Math.min(Math.max(r,e),t)}function $j(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(Xj(r))}function E7(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):ly(atob(r))}typeof Promise.try!="function"&&(Promise.try=function(r,...e){return new Promise(t=>{t(r(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((e,t)=>e+t,0)});const io="http://www.w3.org/2000/svg",mu=class mu{};We(mu,"CSS",96),We(mu,"PDF",72),We(mu,"PDF_TO_CSS_UNITS",mu.CSS/mu.PDF);let Oc=mu;async function cy(r,e="text"){if(Pg(r,document.baseURI)){const t=await fetch(r);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const i=new XMLHttpRequest;i.open("GET",r,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class uy{constructor({viewBox:e,userUnit:t,scale:n,rotation:i,offsetX:a=0,offsetY:s=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=i,this.offsetX=a,this.offsetY=s,n*=t;const u=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let h,g,b,y;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,g=0,b=0,y=1;break;case 90:h=0,g=1,b=1,y=0;break;case 270:h=0,g=-1,b=-1,y=0;break;case 0:h=1,g=0,b=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(b=-b,y=-y);let D,v,w,k;h===0?(D=Math.abs(d-e[1])*n+a,v=Math.abs(u-e[0])*n+s,w=(e[3]-e[1])*n,k=(e[2]-e[0])*n):(D=Math.abs(u-e[0])*n+a,v=Math.abs(d-e[1])*n+s,w=(e[2]-e[0])*n,k=(e[3]-e[1])*n),this.transform=[h*n,g*n,b*n,y*n,D-h*n*u-b*n*d,v-g*n*u-y*n*d],this.width=w,this.height=k}get rawDims(){const e=this.viewBox;return Dt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new uy({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:a})}convertToViewportPoint(e,t){const n=[e,t];return tt.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];tt.applyTransform(t,this.transform);const n=[e[2],e[3]];return tt.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return tt.applyInverseTransform(n,this.transform),n}}class dS extends Pd{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Dv(r){const e=r.length;let t=0;for(;t<e&&r[t].trim()==="";)t++;return r.substring(t,t+5).toLowerCase()==="data:"}function hS(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function T7(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function C7(r,e="document.pdf"){if(typeof r!="string")return e;if(Dv(r))return gt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(r);if(!n)return e;const i=l=>{try{let u=decodeURIComponent(l);return u.includes("/")?(u=u.split("/").at(-1),u.test(/^\.pdf$/i)?u:l):u}catch{return l}},a=/\.pdf$/i,s=n.pathname.split("/").at(-1);if(a.test(s))return i(s);if(n.searchParams.size>0){const l=Array.from(n.searchParams.values()).reverse();for(const d of l)if(a.test(d))return i(d);const u=Array.from(n.searchParams.keys()).reverse();for(const d of u)if(a.test(d))return i(d)}if(n.hash){const u=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(u)return i(u[0])}return e}class d4{constructor(){We(this,"started",Object.create(null));We(this,"times",[])}time(e){e in this.started&&gt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||gt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:a}of this.times)e.push(`${n.padEnd(t)} ${a-i}ms
`);return e.join("")}}function Pg(r,e){const t=e?URL.parse(r,e):URL.parse(r);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Sa(r){r.preventDefault()}function Mn(r){r.preventDefault(),r.stopPropagation()}function N7(r){console.log("Deprecated API usage: "+r)}var _m;class c1{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;m(this,_m)||L(this,_m,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=m(this,_m).exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let u=parseInt(t[6],10);u=u>=0&&u<=59?u:0;const d=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,d==="-"?(s+=h,l+=g):d==="+"&&(s-=h,l-=g),new Date(Date.UTC(n,i,a,s,l,u))}}_m=new WeakMap,V(c1,_m);function U7(r,{scale:e=1,rotation:t=0}){const{width:n,height:i}=r.attributes.style,a=[0,0,parseInt(n),parseInt(i)];return new uy({viewBox:a,userUnit:1,scale:e,rotation:t})}function _v(r){if(r.startsWith("#")){const e=parseInt(r.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(e=>parseInt(e)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(gt(`Not a valid color format: "${r}"`),[0,0,0])}function R7(r){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of r.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;r.set(t,_v(n))}e.remove()}function vn(r){const{a:e,b:t,c:n,d:i,e:a,f:s}=r.getTransform();return[e,t,n,i,a,s]}function ls(r){const{a:e,b:t,c:n,d:i,e:a,f:s}=r.getTransform().invertSelf();return[e,t,n,i,a,s]}function Ud(r,e,t=!1,n=!0){if(e instanceof uy){const{pageWidth:i,pageHeight:a}=e.rawDims,{style:s}=r,l=Ar.isCSSRoundSupported,u=`var(--total-scale-factor) * ${i}px`,d=`var(--total-scale-factor) * ${a}px`,h=l?`round(down, ${u}, var(--scale-round-x))`:`calc(${u})`,g=l?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!t||e.rotation%180===0?(s.width=h,s.height=g):(s.width=g,s.height=h)}n&&r.setAttribute("data-main-rotation",e.rotation)}class Is{constructor(){const{pixelRatio:e}=Is;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i,a=-1){let s=1/0,l=1/0,u=1/0;n=Is.capPixels(n,a),n>0&&(s=Math.sqrt(n/(e*t))),i!==-1&&(l=i/e,u=i/t);const d=Math.min(s,l,u);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const OD=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Ml,Ll,ua,uo,Am,Qh,Zh,Sm,_1,Yj,Dr,Kj,Qj,jh,zg;const oo=class oo{constructor(e){V(this,Dr);V(this,Ml,null);V(this,Ll,null);V(this,ua);V(this,uo,null);V(this,Am,null);V(this,Qh,null);V(this,Zh,null);L(this,ua,e),m(oo,Sm)||L(oo,Sm,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=L(this,Ml,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=m(this,ua)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Sa,{signal:t}),e.addEventListener("pointerdown",$(oo,_1,Yj),{signal:t}));const n=L(this,uo,document.createElement("div"));n.className="buttons",e.append(n);const i=m(this,ua).toolbarPosition;if(i){const{style:a}=e,s=m(this,ua)._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return m(this,Ml)}hide(){var e;m(this,Ml).classList.add("hidden"),(e=m(this,Ll))==null||e.hideDropdown()}show(){var e,t;m(this,Ml).classList.remove("hidden"),(e=m(this,Am))==null||e.shown(),(t=m(this,Qh))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=m(this,ua),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",m(oo,Sm)[e]),$(this,Dr,jh).call(this,n)&&n.addEventListener("click",i=>{t.delete()},{signal:t._signal}),m(this,uo).append(n)}async addAltText(e){const t=await e.render();$(this,Dr,jh).call(this,t),m(this,uo).append(t,m(this,Dr,zg)),L(this,Am,e)}addComment(e){if(m(this,Qh))return;const t=e.render();t&&($(this,Dr,jh).call(this,t),m(this,uo).append(t,m(this,Dr,zg)),L(this,Qh,e),e.toolbar=this)}addColorPicker(e){if(m(this,Ll))return;L(this,Ll,e);const t=e.renderButton();$(this,Dr,jh).call(this,t),m(this,uo).append(t,m(this,Dr,zg))}async addEditSignatureButton(e){const t=L(this,Zh,await e.renderEditButton(m(this,ua)));$(this,Dr,jh).call(this,t),m(this,uo).append(t,m(this,Dr,zg))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}updateEditSignatureButton(e){m(this,Zh)&&(m(this,Zh).title=e)}remove(){var e;m(this,Ml).remove(),(e=m(this,Ll))==null||e.destroy(),L(this,Ll,null)}};Ml=new WeakMap,Ll=new WeakMap,ua=new WeakMap,uo=new WeakMap,Am=new WeakMap,Qh=new WeakMap,Zh=new WeakMap,Sm=new WeakMap,_1=new WeakSet,Yj=function(e){e.stopPropagation()},Dr=new WeakSet,Kj=function(e){m(this,ua)._focusEventsAllowed=!1,Mn(e)},Qj=function(e){m(this,ua)._focusEventsAllowed=!0,Mn(e)},jh=function(e){const t=m(this,ua)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",$(this,Dr,Kj).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",$(this,Dr,Qj).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Sa,{signal:t}),!0)},zg=function(){const e=document.createElement("div");return e.className="divider",e},V(oo,_1),V(oo,Sm,null);let MD=oo;var Em,wu,ho,il,Zj,Jj,LD;class j7{constructor(e){V(this,il);V(this,Em,null);V(this,wu,null);V(this,ho);L(this,ho,e)}show(e,t,n){const[i,a]=$(this,il,Jj).call(this,t,n),{style:s}=m(this,wu)||L(this,wu,$(this,il,Zj).call(this));e.append(m(this,wu)),s.insetInlineEnd=`${100*i}%`,s.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){m(this,wu).remove()}}Em=new WeakMap,wu=new WeakMap,ho=new WeakMap,il=new WeakSet,Zj=function(){const e=L(this,wu,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=m(this,ho)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Sa,{signal:t});const n=L(this,Em,document.createElement("div"));return n.className="buttons",e.append(n),m(this,ho).hasCommentManager()&&$(this,il,LD).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{m(this,ho).commentSelection("floating_button")}),$(this,il,LD).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{m(this,ho).highlightSelection("floating_button")}),e},Jj=function(e,t){let n=0,i=0;for(const a of e){const s=a.y+a.height;if(s<n)continue;const l=a.x+(t?a.width:0);if(s>n){i=l,n=s;continue}t?l>i&&(i=l):l<i&&(i=l)}return[t?1-i:i,n]},LD=function(e,t,n,i){const a=document.createElement("button");a.classList.add("basic",e),a.tabIndex=0,a.setAttribute("data-l10n-id",t);const s=document.createElement("span");a.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",n);const l=m(this,ho)._signal;l instanceof AbortSignal&&!l.aborted&&(a.addEventListener("contextmenu",Sa,{signal:l}),a.addEventListener("click",i,{signal:l})),m(this,Em).append(a)};function eF(r,e,t){for(const n of t)e.addEventListener(n,r[n].bind(r))}var A1;class F7{constructor(){V(this,A1,0)}get id(){return`${Hj}${qn(this,A1)._++}`}}A1=new WeakMap;var Jh,Tm,Cr,ef,A0;const LS=class LS{constructor(){V(this,ef);V(this,Jh,Gj());V(this,Tm,0);V(this,Cr,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const a=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Dt(this,"_isSVGFittingCanvas",a)}async getFromFile(e){const{lastModified:t,name:n,size:i,type:a}=e;return $(this,ef,A0).call(this,`${t}_${n}_${i}_${a}`,e)}async getFromUrl(e){return $(this,ef,A0).call(this,e,e)}async getFromBlob(e,t){const n=await t;return $(this,ef,A0).call(this,e,n)}async getFromId(e){m(this,Cr)||L(this,Cr,new Map);const t=m(this,Cr).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){m(this,Cr)||L(this,Cr,new Map);let n=m(this,Cr).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${m(this,Jh)}_${qn(this,Tm)._++}`,refCounter:1,isSvg:!1},m(this,Cr).set(e,n),m(this,Cr).set(n.id,n),n}getSvgUrl(e){const t=m(this,Cr).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;m(this,Cr)||L(this,Cr,new Map);const t=m(this,Cr).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const a=new OffscreenCanvas(n.width,n.height);a.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=a.convertToBlob()}(i=n.close)==null||i.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${m(this,Jh)}_`)}};Jh=new WeakMap,Tm=new WeakMap,Cr=new WeakMap,ef=new WeakSet,A0=async function(e,t){m(this,Cr)||L(this,Cr,new Map);let n=m(this,Cr).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${m(this,Jh)}_${qn(this,Tm)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(n.url=t,i=await cy(t,"blob")):t instanceof File?i=n.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const a=LS._isSVGFittingCanvas,s=new FileReader,l=new Image,u=new Promise((d,h)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,d()},s.onload=async()=>{const g=n.svgUrl=s.result;l.src=await a?`${g}#svgView(preserveAspectRatio(none))`:g},l.onerror=s.onerror=h});s.readAsDataURL(i),await u}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){gt(i),n=null}return m(this,Cr).set(e,n),n&&m(this,Cr).set(n.id,n),n};let BD=LS;var Sn,Bl,Cm,yn;class I7{constructor(e=128){V(this,Sn,[]);V(this,Bl,!1);V(this,Cm);V(this,yn,-1);L(this,Cm,e)}add({cmd:e,undo:t,post:n,mustExec:i,type:a=NaN,overwriteIfSameType:s=!1,keepUndo:l=!1}){if(i&&e(),m(this,Bl))return;const u={cmd:e,undo:t,post:n,type:a};if(m(this,yn)===-1){m(this,Sn).length>0&&(m(this,Sn).length=0),L(this,yn,0),m(this,Sn).push(u);return}if(s&&m(this,Sn)[m(this,yn)].type===a){l&&(u.undo=m(this,Sn)[m(this,yn)].undo),m(this,Sn)[m(this,yn)]=u;return}const d=m(this,yn)+1;d===m(this,Cm)?m(this,Sn).splice(0,1):(L(this,yn,d),d<m(this,Sn).length&&m(this,Sn).splice(d)),m(this,Sn).push(u)}undo(){if(m(this,yn)===-1)return;L(this,Bl,!0);const{undo:e,post:t}=m(this,Sn)[m(this,yn)];e(),t==null||t(),L(this,Bl,!1),L(this,yn,m(this,yn)-1)}redo(){if(m(this,yn)<m(this,Sn).length-1){L(this,yn,m(this,yn)+1),L(this,Bl,!0);const{cmd:e,post:t}=m(this,Sn)[m(this,yn)];e(),t==null||t(),L(this,Bl,!1)}}hasSomethingToUndo(){return m(this,yn)!==-1}hasSomethingToRedo(){return m(this,yn)<m(this,Sn).length-1}cleanType(e){if(m(this,yn)!==-1){for(let t=m(this,yn);t>=0;t--)if(m(this,Sn)[t].type!==e){m(this,Sn).splice(t+1,m(this,yn)-t),L(this,yn,t);return}m(this,Sn).length=0,L(this,yn,-1)}}destroy(){L(this,Sn,null)}}Sn=new WeakMap,Bl=new WeakMap,Cm=new WeakMap,yn=new WeakMap;var S1,tF;class dy{constructor(e){V(this,S1);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Ar.platform;for(const[n,i,a={}]of e)for(const s of n){const l=s.startsWith("mac+");t&&l?(this.callbacks.set(s.slice(4),{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1))):!t&&!l&&(this.callbacks.set(s,{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get($(this,S1,tF).call(this,t));if(!n)return;const{callback:i,options:{bubbles:a=!1,args:s=[],checker:l=null}}=n;l&&!l(e,t)||(i.bind(e,...s,t)(),a||Mn(t))}}S1=new WeakSet,tF=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const E1=class E1{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return R7(e),Dt(this,"_colors",e)}convert(e){const t=_v(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((a,s)=>a===t[s]))return E1._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?tt.makeHexColor(...t):e}};We(E1,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let PD=E1;var tf,Si,nf,Gn,gr,rf,fo,af,da,po,Pl,zl,sf,ku,hs,ha,Du,Nm,Um,of,Rm,fs,Wl,lf,Hl,ps,T1,ql,cf,jm,Vl,_u,uf,Xl,Fm,$n,qt,go,Gl,$l,Im,df,Om,Yl,gs,mo,Mm,Lm,fa,Ye,S0,zD,nF,rF,Wg,iF,aF,sF,WD,oF,HD,qD,lF,Mr,ao,cF,uF,VD,dF,Hg,XD;const qh=class qh{constructor(e,t,n,i,a,s,l,u,d,h,g,b,y,D,v,w){V(this,Ye);V(this,tf,new AbortController);V(this,Si,null);V(this,nf,null);V(this,Gn,new Map);V(this,gr,new Map);V(this,rf,null);V(this,fo,null);V(this,af,null);V(this,da,new I7);V(this,po,null);V(this,Pl,null);V(this,zl,null);V(this,sf,0);V(this,ku,new Set);V(this,hs,null);V(this,ha,null);V(this,Du,new Set);We(this,"_editorUndoBar",null);V(this,Nm,!1);V(this,Um,!1);V(this,of,!1);V(this,Rm,null);V(this,fs,null);V(this,Wl,null);V(this,lf,null);V(this,Hl,!1);V(this,ps,null);V(this,T1,new F7);V(this,ql,!1);V(this,cf,!1);V(this,jm,!1);V(this,Vl,null);V(this,_u,null);V(this,uf,null);V(this,Xl,null);V(this,Fm,null);V(this,$n,pt.NONE);V(this,qt,new Set);V(this,go,null);V(this,Gl,null);V(this,$l,null);V(this,Im,null);V(this,df,null);V(this,Om,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});V(this,Yl,[0,0]);V(this,gs,null);V(this,mo,null);V(this,Mm,null);V(this,Lm,null);V(this,fa,null);const k=this._signal=m(this,tf).signal;L(this,mo,e),L(this,Mm,t),L(this,Lm,n),L(this,rf,i),L(this,po,a),L(this,Gl,s),L(this,df,u),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:k}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:k}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:k}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:k}),l._on("setpreference",this.onSetPreference.bind(this),{signal:k}),l._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:k}),window.addEventListener("pointerdown",()=>{L(this,cf,!0)},{capture:!0,signal:k}),window.addEventListener("pointerup",()=>{L(this,cf,!1)},{capture:!0,signal:k}),$(this,Ye,iF).call(this),$(this,Ye,lF).call(this),$(this,Ye,WD).call(this),L(this,fo,u.annotationStorage),L(this,Rm,u.filterFactory),L(this,$l,d),L(this,lf,h||null),L(this,Nm,g),L(this,Um,b),L(this,of,y),L(this,Fm,D||null),this.viewParameters={realScale:Oc.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=w!==!1}static get _keyboardManager(){const e=qh.prototype,t=s=>m(s,mo).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&s.hasSomethingToControl(),n=(s,{target:l})=>{if(l instanceof HTMLInputElement){const{type:u}=l;return u!=="text"&&u!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Dt(this,"_keyboardManager",new dy([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(s,{target:l})=>!(l instanceof HTMLButtonElement)&&m(s,mo).contains(l)&&!s.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(s,{target:l})=>!(l instanceof HTMLButtonElement)&&m(s,mo).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}destroy(){var e,t,n,i,a,s,l,u,d;(e=m(this,fa))==null||e.resolve(),L(this,fa,null),(t=m(this,tf))==null||t.abort(),L(this,tf,null),this._signal=null;for(const h of m(this,gr).values())h.destroy();m(this,gr).clear(),m(this,Gn).clear(),m(this,Du).clear(),(n=m(this,Xl))==null||n.clear(),L(this,Si,null),m(this,qt).clear(),m(this,da).destroy(),(i=m(this,rf))==null||i.destroy(),(a=m(this,po))==null||a.destroy(),(s=m(this,Gl))==null||s.destroy(),(l=m(this,ps))==null||l.hide(),L(this,ps,null),(u=m(this,uf))==null||u.destroy(),L(this,uf,null),L(this,nf,null),m(this,fs)&&(clearTimeout(m(this,fs)),L(this,fs,null)),m(this,gs)&&(clearTimeout(m(this,gs)),L(this,gs,null)),(d=this._editorUndoBar)==null||d.destroy(),L(this,df,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return m(this,Fm)}get useNewAltTextFlow(){return m(this,Um)}get useNewAltTextWhenAddingImage(){return m(this,of)}get hcmFilter(){return Dt(this,"hcmFilter",m(this,$l)?m(this,Rm).addHCMFilter(m(this,$l).foreground,m(this,$l).background):"none")}get direction(){return Dt(this,"direction",getComputedStyle(m(this,mo)).direction)}get _highlightColors(){return Dt(this,"_highlightColors",m(this,lf)?new Map(m(this,lf).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Dt(this,"highlightColors",null);const t=new Map,n=!!m(this,$l);for(const[i,a]of e){const s=i.endsWith("_HCM");if(n&&s){t.set(i.replace("_HCM",""),a);continue}!n&&!s&&t.set(i,a)}return Dt(this,"highlightColors",t)}get highlightColorNames(){return Dt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),L(this,zl,e)}setMainHighlightColorPicker(e){L(this,uf,e)}editAltText(e,t=!1){var n;(n=m(this,rf))==null||n.editAltText(this,e,t)}hasCommentManager(){return!!m(this,po)}editComment(e,t){var n;(n=m(this,po))==null||n.open(this,e,t)}getSignature(e){var t;(t=m(this,Gl))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return m(this,Gl)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":L(this,of,t);break}}onPageChanging({pageNumber:e}){L(this,sf,e-1)}focusMainContainer(){m(this,mo).focus()}findParent(e,t){for(const n of m(this,gr).values()){const{x:i,y:a,width:s,height:l}=n.div.getBoundingClientRect();if(e>=i&&e<=i+s&&t>=a&&t<=a+l)return n}return null}disableUserSelect(e=!1){m(this,Mm).classList.toggle("noUserSelect",e)}addShouldRescale(e){m(this,Du).add(e)}removeShouldRescale(e){m(this,Du).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Oc.PDF_TO_CSS_UNITS;for(const n of m(this,Du))n.onScaleChanging();(t=m(this,zl))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:l}=n,u=n.toString(),h=$(this,Ye,S0).call(this,n).closest(".textLayer"),g=this.getSelectionBoxes(h);if(!g)return;n.empty();const b=$(this,Ye,zD).call(this,h),y=m(this,$n)===pt.NONE,D=()=>{const v=b==null?void 0:b.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:l,text:u});y&&this.showAllEditors("highlight",!0,!0),t&&(v==null||v.editComment())};if(y){this.switchToMode(pt.HIGHLIGHT,D);return}D()}commentSelection(e=""){this.highlightSelection(e,!0)}addToAnnotationStorage(e){!e.isEmpty()&&m(this,fo)&&!m(this,fo).has(e.id)&&m(this,fo).setValue(e.id,e)}a11yAlert(e,t=null){const n=m(this,Lm);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,m(this,Hl)&&(L(this,Hl,!1),$(this,Ye,Wg).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of m(this,qt))if(t.div.contains(e)){L(this,_u,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!m(this,_u))return;const[e,t]=m(this,_u);L(this,_u,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){$(this,Ye,WD).call(this),$(this,Ye,HD).call(this)}removeEditListeners(){$(this,Ye,oF).call(this),$(this,Ye,qD).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of m(this,ha))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of m(this,ha))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=m(this,Si))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of m(this,qt)){const a=i.serialize(!0);a&&t.push(a)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const s of m(this,ha))if(s.isHandlingMimeForPasting(a.type)){s.paste(a,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){gt(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const u of n){const d=await i.deserialize(u);if(!d)return;a.push(d)}const s=()=>{for(const u of a)$(this,Ye,VD).call(this,u);$(this,Ye,XD).call(this,a)},l=()=>{for(const u of a)u.remove()};this.addCommands({cmd:s,undo:l,mustExec:!0})}catch(a){gt(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),m(this,$n)!==pt.NONE&&!this.isEditorHandlingKeyboard&&qh._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,m(this,Hl)&&(L(this,Hl,!1),$(this,Ye,Wg).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?($(this,Ye,aF).call(this),$(this,Ye,HD).call(this),$(this,Ye,Mr).call(this,{isEditing:m(this,$n)!==pt.NONE,isEmpty:$(this,Ye,Hg).call(this),hasSomethingToUndo:m(this,da).hasSomethingToUndo(),hasSomethingToRedo:m(this,da).hasSomethingToRedo(),hasSelectedEditor:!1})):($(this,Ye,sF).call(this),$(this,Ye,qD).call(this),$(this,Ye,Mr).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!m(this,ha)){L(this,ha,e);for(const t of m(this,ha))$(this,Ye,ao).call(this,t.defaultPropertiesToUpdate)}}getId(){return m(this,T1).id}get currentLayer(){return m(this,gr).get(m(this,sf))}getLayer(e){return m(this,gr).get(e)}get currentPageIndex(){return m(this,sf)}addLayer(e){m(this,gr).set(e.pageIndex,e),m(this,ql)?e.enable():e.disable()}removeLayer(e){m(this,gr).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,i=!1,a=!1){var s,l,u,d,h;if(m(this,$n)!==e&&!(m(this,fa)&&(await m(this,fa).promise,!m(this,fa)))){if(L(this,fa,Promise.withResolvers()),(s=m(this,zl))==null||s.commitOrRemove(),m(this,$n)===pt.POPUP&&((l=m(this,po))==null||l.hideSidebar()),L(this,$n,e),e===pt.NONE){this.setEditingState(!1),$(this,Ye,uF).call(this),(u=this._editorUndoBar)==null||u.hide(),m(this,fa).resolve();return}e===pt.SIGNATURE&&await((d=m(this,Gl))==null?void 0:d.loadSignatures()),e===pt.POPUP&&(m(this,nf)||L(this,nf,await m(this,df).getAnnotationsByType(new Set(m(this,ha).map(g=>g._editorType)))),(h=m(this,po))==null||h.showSidebar(m(this,nf))),this.setEditingState(!0),await $(this,Ye,cF).call(this),this.unselectAll();for(const g of m(this,gr).values())g.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),m(this,fa).resolve();return}for(const g of m(this,Gn).values())g.annotationElementId===t||g.id===t?(this.setSelected(g),a?g.editComment():i&&g.enterInEditMode()):g.unselect();m(this,fa).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==m(this,$n)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(m(this,ha)){switch(e){case Nt.CREATE:this.currentLayer.addNewEditor(t);return;case Nt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(m(this,Im)||L(this,Im,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of m(this,qt))n.updateParams(e,t);else for(const n of m(this,ha))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var a;for(const s of m(this,Gn).values())s.editorType===e&&s.show(t);(((a=m(this,Im))==null?void 0:a.get(Nt.HIGHLIGHT_SHOW_ALL))??!0)!==t&&$(this,Ye,ao).call(this,[[Nt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(m(this,jm)!==e){L(this,jm,e);for(const t of m(this,gr).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of m(this,Gn).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return m(this,Gn).get(e)}addEditor(e){m(this,Gn).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(m(this,fs)&&clearTimeout(m(this,fs)),L(this,fs,setTimeout(()=>{this.focusMainContainer(),L(this,fs,null)},0))),m(this,Gn).delete(e.id),e.annotationElementId&&((t=m(this,Xl))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!m(this,ku).has(e.annotationElementId))&&((n=m(this,fo))==null||n.remove(e.id))}addDeletedAnnotationElement(e){m(this,ku).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return m(this,ku).has(e)}removeDeletedAnnotationElement(e){m(this,ku).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){m(this,Si)!==e&&(L(this,Si,e),e&&$(this,Ye,ao).call(this,e.propertiesToUpdate))}updateUI(e){m(this,Ye,dF)===e&&$(this,Ye,ao).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){$(this,Ye,ao).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(m(this,qt).has(e)){m(this,qt).delete(e),e.unselect(),$(this,Ye,Mr).call(this,{hasSelectedEditor:this.hasSelection});return}m(this,qt).add(e),e.select(),$(this,Ye,ao).call(this,e.propertiesToUpdate),$(this,Ye,Mr).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=m(this,zl))==null||t.commitOrRemove();for(const n of m(this,qt))n!==e&&n.unselect();m(this,qt).clear(),m(this,qt).add(e),e.select(),$(this,Ye,ao).call(this,e.propertiesToUpdate),$(this,Ye,Mr).call(this,{hasSelectedEditor:!0})}isSelected(e){return m(this,qt).has(e)}get firstSelectedEditor(){return m(this,qt).values().next().value}unselect(e){e.unselect(),m(this,qt).delete(e),$(this,Ye,Mr).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return m(this,qt).size!==0}get isEnterHandled(){return m(this,qt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;m(this,da).undo(),$(this,Ye,Mr).call(this,{hasSomethingToUndo:m(this,da).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:$(this,Ye,Hg).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){m(this,da).redo(),$(this,Ye,Mr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:m(this,da).hasSomethingToRedo(),isEmpty:$(this,Ye,Hg).call(this)})}addCommands(e){m(this,da).add(e),$(this,Ye,Mr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:$(this,Ye,Hg).call(this)})}cleanUndoStack(e){m(this,da).cleanType(e)}delete(){var a;this.commitOrRemove();const e=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...m(this,qt)],n=()=>{var s;(s=this._editorUndoBar)==null||s.show(i,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},i=()=>{for(const s of t)$(this,Ye,VD).call(this,s)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=m(this,Si))==null||e.commitOrRemove()}hasSomethingToControl(){return m(this,Si)||this.hasSelection}selectAll(){for(const e of m(this,qt))e.commit();$(this,Ye,XD).call(this,m(this,Gn).values())}unselectAll(){var e;if(!(m(this,Si)&&(m(this,Si).commitOrRemove(),m(this,$n)!==pt.NONE))&&!((e=m(this,zl))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of m(this,qt))t.unselect();m(this,qt).clear(),$(this,Ye,Mr).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;m(this,Yl)[0]+=e,m(this,Yl)[1]+=t;const[i,a]=m(this,Yl),s=[...m(this,qt)],l=1e3;m(this,gs)&&clearTimeout(m(this,gs)),L(this,gs,setTimeout(()=>{L(this,gs,null),m(this,Yl)[0]=m(this,Yl)[1]=0,this.addCommands({cmd:()=>{for(const u of s)m(this,Gn).has(u.id)&&(u.translateInPage(i,a),u.translationDone())},undo:()=>{for(const u of s)m(this,Gn).has(u.id)&&(u.translateInPage(-i,-a),u.translationDone())},mustExec:!1})},l));for(const u of s)u.translateInPage(e,t),u.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),L(this,hs,new Map);for(const e of m(this,qt))m(this,hs).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!m(this,hs))return!1;this.disableUserSelect(!1);const e=m(this,hs);L(this,hs,null);let t=!1;for(const[{x:i,y:a,pageIndex:s},l]of e)l.newX=i,l.newY=a,l.newPageIndex=s,t||(t=i!==l.savedX||a!==l.savedY||s!==l.savedPageIndex);if(!t)return!1;const n=(i,a,s,l)=>{if(m(this,Gn).has(i.id)){const u=m(this,gr).get(l);u?i._setParentAndPosition(u,a,s):(i.pageIndex=l,i.x=a,i.y=s)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:s,newPageIndex:l}]of e)n(i,a,s,l)},undo:()=>{for(const[i,{savedX:a,savedY:s,savedPageIndex:l}]of e)n(i,a,s,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(m(this,hs))for(const n of m(this,hs).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||m(this,qt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return m(this,Si)===e}getActive(){return m(this,Si)}getMode(){return m(this,$n)}get imageManager(){return Dt(this,"imageManager",new BD)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let d=0,h=t.rangeCount;d<h;d++)if(!e.contains(t.getRangeAt(d).commonAncestorContainer))return null;const{x:n,y:i,width:a,height:s}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(d,h,g,b)=>({x:(h-i)/s,y:1-(d+g-n)/a,width:b/s,height:g/a});break;case"180":l=(d,h,g,b)=>({x:1-(d+g-n)/a,y:1-(h+b-i)/s,width:g/a,height:b/s});break;case"270":l=(d,h,g,b)=>({x:1-(h+b-i)/s,y:(d-n)/a,width:b/s,height:g/a});break;default:l=(d,h,g,b)=>({x:(d-n)/a,y:(h-i)/s,width:g/a,height:b/s});break}const u=[];for(let d=0,h=t.rangeCount;d<h;d++){const g=t.getRangeAt(d);if(!g.collapsed)for(const{x:b,y,width:D,height:v}of g.getClientRects())D===0||v===0||u.push(l(b,y,D,v))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:e,id:t}){(m(this,af)||L(this,af,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=m(this,af))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=m(this,af))==null?void 0:i.get(e.data.id);if(!t)return;const n=m(this,fo).getRawValue(t);n&&(m(this,$n)===pt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){var a;const i=(a=m(this,Xl))==null?void 0:a.get(e);i&&(i.setCanvas(t,n),m(this,Xl).delete(e))}addMissingCanvas(e,t){(m(this,Xl)||L(this,Xl,new Map)).set(e,t)}};tf=new WeakMap,Si=new WeakMap,nf=new WeakMap,Gn=new WeakMap,gr=new WeakMap,rf=new WeakMap,fo=new WeakMap,af=new WeakMap,da=new WeakMap,po=new WeakMap,Pl=new WeakMap,zl=new WeakMap,sf=new WeakMap,ku=new WeakMap,hs=new WeakMap,ha=new WeakMap,Du=new WeakMap,Nm=new WeakMap,Um=new WeakMap,of=new WeakMap,Rm=new WeakMap,fs=new WeakMap,Wl=new WeakMap,lf=new WeakMap,Hl=new WeakMap,ps=new WeakMap,T1=new WeakMap,ql=new WeakMap,cf=new WeakMap,jm=new WeakMap,Vl=new WeakMap,_u=new WeakMap,uf=new WeakMap,Xl=new WeakMap,Fm=new WeakMap,$n=new WeakMap,qt=new WeakMap,go=new WeakMap,Gl=new WeakMap,$l=new WeakMap,Im=new WeakMap,df=new WeakMap,Om=new WeakMap,Yl=new WeakMap,gs=new WeakMap,mo=new WeakMap,Mm=new WeakMap,Lm=new WeakMap,fa=new WeakMap,Ye=new WeakSet,S0=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},zD=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of m(this,gr).values())if(n.hasTextLayer(e))return n;return null},nF=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=$(this,Ye,S0).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(m(this,ps)||L(this,ps,new j7(this)),m(this,ps).show(n,i,this.direction==="ltr"))},rF=function(){var a,s,l;const e=document.getSelection();if(!e||e.isCollapsed){m(this,go)&&((a=m(this,ps))==null||a.hide(),L(this,go,null),$(this,Ye,Mr).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===m(this,go))return;const i=$(this,Ye,S0).call(this,e).closest(".textLayer");if(!i){m(this,go)&&((s=m(this,ps))==null||s.hide(),L(this,go,null),$(this,Ye,Mr).call(this,{hasSelectedText:!1}));return}if((l=m(this,ps))==null||l.hide(),L(this,go,t),$(this,Ye,Mr).call(this,{hasSelectedText:!0}),!(m(this,$n)!==pt.HIGHLIGHT&&m(this,$n)!==pt.NONE)&&(m(this,$n)===pt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),L(this,Hl,this.isShiftKeyDown),!this.isShiftKeyDown)){const u=m(this,$n)===pt.HIGHLIGHT?$(this,Ye,zD).call(this,i):null;if(u==null||u.toggleDrawing(),m(this,cf)){const d=new AbortController,h=this.combinedSignal(d),g=b=>{b.type==="pointerup"&&b.button!==0||(d.abort(),u==null||u.toggleDrawing(!0),b.type==="pointerup"&&$(this,Ye,Wg).call(this,"main_toolbar"))};window.addEventListener("pointerup",g,{signal:h}),window.addEventListener("blur",g,{signal:h})}else u==null||u.toggleDrawing(!0),$(this,Ye,Wg).call(this,"main_toolbar")}},Wg=function(e=""){m(this,$n)===pt.HIGHLIGHT?this.highlightSelection(e):m(this,Nm)&&$(this,Ye,nF).call(this)},iF=function(){document.addEventListener("selectionchange",$(this,Ye,rF).bind(this),{signal:this._signal})},aF=function(){if(m(this,Wl))return;L(this,Wl,new AbortController);const e=this.combinedSignal(m(this,Wl));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},sF=function(){var e;(e=m(this,Wl))==null||e.abort(),L(this,Wl,null)},WD=function(){if(m(this,Vl))return;L(this,Vl,new AbortController);const e=this.combinedSignal(m(this,Vl));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},oF=function(){var e;(e=m(this,Vl))==null||e.abort(),L(this,Vl,null)},HD=function(){if(m(this,Pl))return;L(this,Pl,new AbortController);const e=this.combinedSignal(m(this,Pl));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},qD=function(){var e;(e=m(this,Pl))==null||e.abort(),L(this,Pl,null)},lF=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Mr=function(e){Object.entries(e).some(([n,i])=>m(this,Om)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(m(this,Om),e)}),m(this,$n)===pt.HIGHLIGHT&&e.hasSelectedEditor===!1&&$(this,Ye,ao).call(this,[[Nt.HIGHLIGHT_FREE,!0]]))},ao=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},cF=async function(){if(!m(this,ql)){L(this,ql,!0);const e=[];for(const t of m(this,gr).values())e.push(t.enable());await Promise.all(e);for(const t of m(this,Gn).values())t.enable()}},uF=function(){if(this.unselectAll(),m(this,ql)){L(this,ql,!1);for(const e of m(this,gr).values())e.disable();for(const e of m(this,Gn).values())e.disable()}},VD=function(e){const t=m(this,gr).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},dF=function(){let e=null;for(e of m(this,qt));return e},Hg=function(){if(m(this,Gn).size===0)return!0;if(m(this,Gn).size===1)for(const e of m(this,Gn).values())return e.isEmpty();return!1},XD=function(e){for(const t of m(this,qt))t.unselect();m(this,qt).clear();for(const t of e)t.isEmpty()||(m(this,qt).add(t),t.select());$(this,Ye,Mr).call(this,{hasSelectedEditor:this.hasSelection})},We(qh,"TRANSLATE_SMALL",1),We(qh,"TRANSLATE_BIG",10);let Rd=qh;var ar,ms,La,hf,bs,Ei,ff,ys,si,bo,Au,xs,Kl,$a,qg,E0;const Lr=class Lr{constructor(e){V(this,$a);V(this,ar,null);V(this,ms,!1);V(this,La,null);V(this,hf,null);V(this,bs,null);V(this,Ei,null);V(this,ff,!1);V(this,ys,null);V(this,si,null);V(this,bo,null);V(this,Au,null);V(this,xs,!1);L(this,si,e),L(this,xs,e._uiManager.useNewAltTextFlow),m(Lr,Kl)||L(Lr,Kl,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Lr._l10n??(Lr._l10n=e)}async render(){const e=L(this,La,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=L(this,hf,document.createElement("span"));e.append(t),m(this,xs)?(e.classList.add("new"),e.setAttribute("data-l10n-id",m(Lr,Kl).missing),t.setAttribute("data-l10n-id",m(Lr,Kl)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=m(this,si)._uiManager._signal;e.addEventListener("contextmenu",Sa,{signal:n}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const i=a=>{a.preventDefault(),m(this,si)._uiManager.editAltText(m(this,si)),m(this,xs)&&m(this,si)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:m(this,$a,qg)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(L(this,ff,!0),i(a))},{signal:n}),await $(this,$a,E0).call(this),e}finish(){m(this,La)&&(m(this,La).focus({focusVisible:m(this,ff)}),L(this,ff,!1))}isEmpty(){return m(this,xs)?m(this,ar)===null:!m(this,ar)&&!m(this,ms)}hasData(){return m(this,xs)?m(this,ar)!==null||!!m(this,bo):this.isEmpty()}get guessedText(){return m(this,bo)}async setGuessedText(e){m(this,ar)===null&&(L(this,bo,e),L(this,Au,await Lr._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),$(this,$a,E0).call(this))}toggleAltTextBadge(e=!1){var t;if(!m(this,xs)||m(this,ar)){(t=m(this,ys))==null||t.remove(),L(this,ys,null);return}if(!m(this,ys)){const n=L(this,ys,document.createElement("div"));n.className="noAltTextBadge",m(this,si).div.append(n)}m(this,ys).classList.toggle("hidden",!e)}serialize(e){let t=m(this,ar);return!e&&m(this,bo)===t&&(t=m(this,Au)),{altText:t,decorative:m(this,ms),guessedText:m(this,bo),textWithDisclaimer:m(this,Au)}}get data(){return{altText:m(this,ar),decorative:m(this,ms)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:i,cancel:a=!1}){n&&(L(this,bo,n),L(this,Au,i)),!(m(this,ar)===e&&m(this,ms)===t)&&(a||(L(this,ar,e),L(this,ms,t)),$(this,$a,E0).call(this))}toggle(e=!1){m(this,La)&&(!e&&m(this,Ei)&&(clearTimeout(m(this,Ei)),L(this,Ei,null)),m(this,La).disabled=!e)}shown(){m(this,si)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:m(this,$a,qg)}})}destroy(){var e,t;(e=m(this,La))==null||e.remove(),L(this,La,null),L(this,hf,null),L(this,bs,null),(t=m(this,ys))==null||t.remove(),L(this,ys,null)}};ar=new WeakMap,ms=new WeakMap,La=new WeakMap,hf=new WeakMap,bs=new WeakMap,Ei=new WeakMap,ff=new WeakMap,ys=new WeakMap,si=new WeakMap,bo=new WeakMap,Au=new WeakMap,xs=new WeakMap,Kl=new WeakMap,$a=new WeakSet,qg=function(){return m(this,ar)&&"added"||m(this,ar)===null&&this.guessedText&&"review"||"missing"},E0=async function(){var i,a,s;const e=m(this,La);if(!e)return;if(m(this,xs)){if(e.classList.toggle("done",!!m(this,ar)),e.setAttribute("data-l10n-id",m(Lr,Kl)[m(this,$a,qg)]),(i=m(this,hf))==null||i.setAttribute("data-l10n-id",m(Lr,Kl)[`${m(this,$a,qg)}-label`]),!m(this,ar)){(a=m(this,bs))==null||a.remove();return}}else{if(!m(this,ar)&&!m(this,ms)){e.classList.remove("done"),(s=m(this,bs))==null||s.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=m(this,bs);if(!t){L(this,bs,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${m(this,si).id}`;const l=100,u=m(this,si)._uiManager._signal;u.addEventListener("abort",()=>{clearTimeout(m(this,Ei)),L(this,Ei,null)},{once:!0}),e.addEventListener("mouseenter",()=>{L(this,Ei,setTimeout(()=>{L(this,Ei,null),m(this,bs).classList.add("show"),m(this,si)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:u}),e.addEventListener("mouseleave",()=>{var d;m(this,Ei)&&(clearTimeout(m(this,Ei)),L(this,Ei,null)),(d=m(this,bs))==null||d.classList.remove("show")},{signal:u})}m(this,ms)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=m(this,ar)),t.parentNode||e.append(t);const n=m(this,si).getElementForAltText();n==null||n.setAttribute("aria-describedby",t.id)},V(Lr,Kl,null),We(Lr,"_l10n",null);let u1=Lr;var vs,Su,Ba,Bm,yo,pf,Ql;class Hx{constructor(e){V(this,vs,null);V(this,Su,!1);V(this,Ba,null);V(this,Bm,null);V(this,yo,null);V(this,pf,null);V(this,Ql,!1);L(this,Ba,e),this.toolbar=null}render(){if(!m(this,Ba)._uiManager.hasCommentManager())return null;const e=L(this,vs,document.createElement("button"));e.className="comment",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const t=m(this,Ba)._uiManager._signal;if(!(t instanceof AbortSignal)||t.aborted)return e;e.addEventListener("contextmenu",Sa,{signal:t}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:t});const n=i=>{i.preventDefault(),this.edit()};return e.addEventListener("click",n,{capture:!0,signal:t}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(L(this,Su,!0),n(i))},{signal:t}),e}edit(){const{bottom:e,left:t,right:n}=m(this,Ba).getClientDimensions(),i={top:e};m(this,Ba)._uiManager.direction==="ltr"?i.right=n:i.left=t,m(this,Ba)._uiManager.editComment(m(this,Ba),i)}finish(){m(this,vs)&&(m(this,vs).focus({focusVisible:m(this,Su)}),L(this,Su,!1))}isDeleted(){return m(this,Ql)||m(this,yo)===""}hasBeenEdited(){return this.isDeleted()||m(this,yo)!==m(this,Bm)}serialize(){return this.data}get data(){return{text:m(this,yo),date:m(this,pf),deleted:m(this,Ql)}}set data(e){if(e===null){L(this,yo,""),L(this,Ql,!0);return}L(this,yo,e),L(this,pf,new Date),L(this,Ql,!1)}setInitialText(e){L(this,Bm,e),this.data=e}toggle(e=!1){m(this,vs)&&(m(this,vs).disabled=!e)}shown(){}destroy(){var e;(e=m(this,vs))==null||e.remove(),L(this,vs,null),L(this,yo,""),L(this,pf,null),L(this,Ba,null),L(this,Su,!1),L(this,Ql,!1)}}vs=new WeakMap,Su=new WeakMap,Ba=new WeakMap,Bm=new WeakMap,yo=new WeakMap,pf=new WeakMap,Ql=new WeakMap;var gf,Eu,Pm,zm,Wm,Hm,qm,xo,Tu,vo,Cu,wo,Mc,hF,fF,pF;const BS=class BS{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:s=null,signal:l}){V(this,Mc);V(this,gf);V(this,Eu,!1);V(this,Pm,null);V(this,zm);V(this,Wm);V(this,Hm);V(this,qm);V(this,xo,null);V(this,Tu);V(this,vo,null);V(this,Cu);V(this,wo,null);L(this,gf,e),L(this,Pm,n),L(this,zm,t),L(this,Wm,i),L(this,Hm,a),L(this,qm,s),L(this,Cu,new AbortController),L(this,Tu,AbortSignal.any([l,m(this,Cu).signal])),e.addEventListener("touchstart",$(this,Mc,hF).bind(this),{passive:!1,signal:m(this,Tu)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Is.pixelRatio}destroy(){var e,t;(e=m(this,Cu))==null||e.abort(),L(this,Cu,null),(t=m(this,xo))==null||t.abort(),L(this,xo,null)}};gf=new WeakMap,Eu=new WeakMap,Pm=new WeakMap,zm=new WeakMap,Wm=new WeakMap,Hm=new WeakMap,qm=new WeakMap,xo=new WeakMap,Tu=new WeakMap,vo=new WeakMap,Cu=new WeakMap,wo=new WeakMap,Mc=new WeakSet,hF=function(e){var i,a,s;if((i=m(this,zm))!=null&&i.call(this))return;if(e.touches.length===1){if(m(this,xo))return;const l=L(this,xo,new AbortController),u=AbortSignal.any([m(this,Tu),l.signal]),d=m(this,gf),h={capture:!0,signal:u,passive:!1},g=b=>{var y;b.pointerType==="touch"&&((y=m(this,xo))==null||y.abort(),L(this,xo,null))};d.addEventListener("pointerdown",b=>{b.pointerType==="touch"&&(Mn(b),g(b))},h),d.addEventListener("pointerup",g,h),d.addEventListener("pointercancel",g,h);return}if(!m(this,wo)){L(this,wo,new AbortController);const l=AbortSignal.any([m(this,Tu),m(this,wo).signal]),u=m(this,gf),d={signal:l,capture:!1,passive:!1};u.addEventListener("touchmove",$(this,Mc,fF).bind(this),d);const h=$(this,Mc,pF).bind(this);u.addEventListener("touchend",h,d),u.addEventListener("touchcancel",h,d),d.capture=!0,u.addEventListener("pointerdown",Mn,d),u.addEventListener("pointermove",Mn,d),u.addEventListener("pointercancel",Mn,d),u.addEventListener("pointerup",Mn,d),(a=m(this,Wm))==null||a.call(this)}if(Mn(e),e.touches.length!==2||(s=m(this,Pm))!=null&&s.call(this)){L(this,vo,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),L(this,vo,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},fF=function(e){var N;if(!m(this,vo)||e.touches.length!==2)return;Mn(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:i,screenY:a}=t,{screenX:s,screenY:l}=n,u=m(this,vo),{touch0X:d,touch0Y:h,touch1X:g,touch1Y:b}=u,y=g-d,D=b-h,v=s-i,w=l-a,k=Math.hypot(v,w)||1,_=Math.hypot(y,D)||1;if(!m(this,Eu)&&Math.abs(_-k)<=BS.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(u.touch0X=i,u.touch0Y=a,u.touch1X=s,u.touch1Y=l,!m(this,Eu)){L(this,Eu,!0);return}const A=[(i+s)/2,(a+l)/2];(N=m(this,Hm))==null||N.call(this,A,_,k)},pF=function(e){var t;e.touches.length>=2||(m(this,wo)&&(m(this,wo).abort(),L(this,wo,null),(t=m(this,qm))==null||t.call(this)),m(this,vo)&&(Mn(e),L(this,vo,null),L(this,Eu,!1)))};let d1=BS;var Nu,Pa,fn,mr,mf,Zl,Vm,Uu,br,Ru,ko,Jl,Xm,ju,Ti,Gm,Fu,Do,ws,bf,yf,pa,Iu,$m,C1,ct,GD,Ym,$D,T0,gF,mF,YD,C0,KD,bF,yF,xF,QD,vF,ZD,wF,kF,DF,JD,Vg;const yt=class yt{constructor(e){V(this,ct);V(this,Nu,null);V(this,Pa,null);V(this,fn,null);V(this,mr,null);V(this,mf,!1);V(this,Zl,null);V(this,Vm,"");V(this,Uu,!1);V(this,br,null);V(this,Ru,null);V(this,ko,null);V(this,Jl,null);V(this,Xm,"");V(this,ju,!1);V(this,Ti,null);V(this,Gm,!1);V(this,Fu,!1);V(this,Do,!1);V(this,ws,null);V(this,bf,0);V(this,yf,0);V(this,pa,null);V(this,Iu,null);We(this,"isSelected",!1);We(this,"_isCopy",!1);We(this,"_editToolbar",null);We(this,"_initialOptions",Object.create(null));We(this,"_initialData",null);We(this,"_isVisible",!0);We(this,"_uiManager",null);We(this,"_focusEventsAllowed",!0);V(this,$m,!1);V(this,C1,yt._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[a,s];const[l,u]=this.parentDimensions;this.x=e.x/l,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=yt.prototype._resizeWithKeyboard,t=Rd.TRANSLATE_SMALL,n=Rd.TRANSLATE_BIG;return Dt(this,"_resizerKeyboardManager",new dy([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],yt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Dt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new O7({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(yt._l10n??(yt._l10n=e),yt._l10nResizer||(yt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),yt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);yt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Jt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return m(this,$m)}set _isDraggable(e){var t;L(this,$m,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=m(this,C1)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):$(this,ct,Vg).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(m(this,ju)?L(this,ju,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[a,s]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/a,this.y=(t+i)/s,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}translate(e,t){$(this,ct,GD).call(this,this.parentDimensions,e,t)}translateInPage(e,t){m(this,Ti)||L(this,Ti,[this.x,this.y,this.width,this.height]),$(this,ct,GD).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){m(this,Ti)||L(this,Ti,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=t/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:l}=this;const[u,d]=this.getBaseTranslation();s+=u,l+=d;const{style:h}=n;h.left=`${(100*s).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(s,l),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!m(this,Ti)&&(m(this,Ti)[0]!==this.x||m(this,Ti)[1]!==this.y)}get _hasBeenResized(){return!!m(this,Ti)&&(m(this,Ti)[2]!==this.width||m(this,Ti)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=yt,i=n/e,a=n/t;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,i]}=this;let{x:a,y:s,width:l,height:u}=this;if(l*=n,u*=i,a*=n,s*=i,this._mustFixPosition)switch(e){case 0:a=qr(a,0,n-l),s=qr(s,0,i-u);break;case 90:a=qr(a,0,n-u),s=qr(s,l,i);break;case 180:a=qr(a,l,n),s=qr(s,u,i);break;case 270:a=qr(a,u,n),s=qr(s,0,i-l);break}this.x=a/=n,this.y=s/=i;const[d,h]=this.getBaseTranslation();a+=d,s+=h,t.left=`${(100*a).toFixed(2)}%`,t.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return $(n=yt,Ym,$D).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return $(n=yt,Ym,$D).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,i]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*e/n).toFixed(2)}%`,m(this,Uu)||(a.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,i=n.endsWith("%"),a=!m(this,Uu)&&t.endsWith("%");if(i&&a)return;const[s,l]=this.parentDimensions;i||(e.width=`${(100*parseFloat(n)/s).toFixed(2)}%`),!m(this,Uu)&&!a&&(e.height=`${(100*parseFloat(t)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=m(this,fn))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||m(this,Fu))return this._editToolbar;this._editToolbar=new MD(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=m(this,fn))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return m(this,fn)||(u1.initialize(yt._l10n),L(this,fn,new u1(this)),m(this,Nu)&&(m(this,fn).data=m(this,Nu),L(this,Nu,null))),m(this,fn)}get altTextData(){var e;return(e=m(this,fn))==null?void 0:e.data}set altTextData(e){m(this,fn)&&(m(this,fn).data=e)}get guessedAltText(){var e;return(e=m(this,fn))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=m(this,fn))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=m(this,fn))==null?void 0:t.serialize(e)}hasAltText(){return!!m(this,fn)&&!m(this,fn).isEmpty()}hasAltTextData(){var e;return((e=m(this,fn))==null?void 0:e.hasData())??!1}addCommentButton(){return m(this,mr)?m(this,mr):L(this,mr,new Hx(this))}get commentColor(){return null}get comment(){const e=m(this,mr);return{text:e.data.text,date:e.data.date,deleted:e.isDeleted(),color:this.commentColor}}set comment(e){m(this,mr)||L(this,mr,new Hx(this)),m(this,mr).data=e}setCommentData(e){m(this,mr)||L(this,mr,new Hx(this)),m(this,mr).setInitialText(e)}get hasEditedComment(){var e;return(e=m(this,mr))==null?void 0:e.hasBeenEdited()}async editComment(){m(this,mr)||L(this,mr,new Hx(this)),m(this,mr).edit()}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[a]=this.pageDimensions,[s]=this.pageTranslation,l=s+a+1,u=i-100,d=l+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,u,d,i]}}}render(){var s;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=m(this,mf)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),$(this,ct,ZD).call(this);const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),eF(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(m(this,Iu)||L(this,Iu,new d1({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:$(this,ct,bF).bind(this),onPinching:$(this,ct,yF).bind(this),onPinchEnd:$(this,ct,xF).bind(this),signal:this._uiManager._signal}))),(s=this._uiManager._editorUndoBar)==null||s.hide(),e}pointerdown(e){const{isMac:t}=Ar.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(L(this,ju,!0),this._isDraggable){$(this,ct,vF).call(this,e);return}$(this,ct,QD).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){m(this,ws)&&clearTimeout(m(this,ws)),L(this,ws,setTimeout(()=>{var e;L(this,ws,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const i=this.parentScale,[a,s]=this.pageDimensions,[l,u]=this.pageTranslation,d=e/i,h=t/i,g=this.x*a,b=this.y*s,y=this.width*a,D=this.height*s;switch(n){case 0:return[g+d+l,s-b-h-D+u,g+d+y+l,s-b-h+u];case 90:return[g+h+l,s-b+d+u,g+h+D+l,s-b+d+y+u];case 180:return[g-d-y+l,s-b+h+u,g-d+l,s-b+h+D+u];case 270:return[g-h-D+l,s-b-d-y+u,g-h+l,s-b-d+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,a,s]=e,l=a-n,u=s-i;switch(this.rotation){case 0:return[n,t-s,l,u];case 90:return[n,t-i,u,l];case 180:return[a,t-i,l,u];case 270:return[a,t-s,u,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),L(this,Fu,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),L(this,Fu,!1),!0):!1}isInEditMode(){return m(this,Fu)}shouldGetKeyboardEvents(){return m(this,Do)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:s}=window;return t<s&&i>0&&e<a&&n>0}rebuild(){$(this,ct,ZD).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Jt("An editor must be serializable")}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId});i.rotation=e.rotation,L(i,Nu,e.accessibilityData),i._isCopy=e.isCopy||!1;const[a,s]=i.pageDimensions,[l,u,d,h]=i.getRectInCurrentCoords(e.rect,s);return i.x=l/a,i.y=u/s,i.width=d/a,i.height=h/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=m(this,Jl))==null||e.abort(),L(this,Jl,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),m(this,ws)&&(clearTimeout(m(this,ws)),L(this,ws,null)),$(this,ct,Vg).call(this),this.removeEditToolbar(),m(this,pa)){for(const n of m(this,pa).values())clearTimeout(n);L(this,pa,null)}this.parent=null,(t=m(this,Iu))==null||t.destroy(),L(this,Iu,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&($(this,ct,gF).call(this),m(this,br).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),L(this,ko,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=m(this,br).children;if(!m(this,Pa)){L(this,Pa,Array.from(t));const s=$(this,ct,wF).bind(this),l=$(this,ct,kF).bind(this),u=this._uiManager._signal;for(const d of m(this,Pa)){const h=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",s,{signal:u}),d.addEventListener("blur",l,{signal:u}),d.addEventListener("focus",$(this,ct,DF).bind(this,h),{signal:u}),d.setAttribute("data-l10n-id",yt._l10nResizer[h])}}const n=m(this,Pa)[0];let i=0;for(const s of t){if(s===n)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(m(this,Pa).length/4);if(a!==i){if(a<i)for(let l=0;l<i-a;l++)m(this,br).append(m(this,br).firstChild);else if(a>i)for(let l=0;l<a-i;l++)m(this,br).firstChild.before(m(this,br).lastChild);let s=0;for(const l of t){const d=m(this,Pa)[s++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",yt._l10nResizer[d])}}$(this,ct,JD).call(this,0),L(this,Do,!0),m(this,br).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){m(this,Do)&&$(this,ct,KD).call(this,m(this,Xm),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){$(this,ct,Vg).call(this),this.div.focus()}select(){var e,t,n;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,a;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(t=this._editToolbar)==null||t.show(),(n=m(this,fn))==null||n.toggleAltTextBadge(!1)}}unselect(){var e,t,n,i,a;this.isSelected&&(this.isSelected=!1,(e=m(this,br))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(a=m(this,fn))==null||a.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return m(this,Gm)}set isEditing(e){L(this,Gm,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){L(this,Uu,!0);const n=e/t,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){m(this,pa)||L(this,pa,new Map);const{action:n}=e;let i=m(this,pa).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),m(this,pa).delete(n),m(this,pa).size===0&&L(this,pa,null)},yt._telemetryTimeout),m(this,pa).set(n,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),L(this,mf,!1)}disable(){this.div&&(this.div.tabIndex=-1),L(this,mf,!0)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Nu=new WeakMap,Pa=new WeakMap,fn=new WeakMap,mr=new WeakMap,mf=new WeakMap,Zl=new WeakMap,Vm=new WeakMap,Uu=new WeakMap,br=new WeakMap,Ru=new WeakMap,ko=new WeakMap,Jl=new WeakMap,Xm=new WeakMap,ju=new WeakMap,Ti=new WeakMap,Gm=new WeakMap,Fu=new WeakMap,Do=new WeakMap,ws=new WeakMap,bf=new WeakMap,yf=new WeakMap,pa=new WeakMap,Iu=new WeakMap,$m=new WeakMap,C1=new WeakMap,ct=new WeakSet,GD=function([e,t],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Ym=new WeakSet,$D=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},T0=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},gF=function(){if(m(this,br))return;L(this,br,document.createElement("div")),m(this,br).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const i=document.createElement("div");m(this,br).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",$(this,ct,mF).bind(this,n),{signal:t}),i.addEventListener("contextmenu",Sa,{signal:t}),i.tabIndex=-1}this.div.prepend(m(this,br))},mF=function(e,t){var h;t.preventDefault();const{isMac:n}=Ar.platform;if(t.button!==0||t.ctrlKey&&n)return;(h=m(this,fn))==null||h.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,L(this,Ru,[t.screenX,t.screenY]);const a=new AbortController,s=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",$(this,ct,KD).bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",Mn,{passive:!1,signal:s}),window.addEventListener("contextmenu",Sa,{signal:s}),L(this,ko,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const d=()=>{var g;a.abort(),this.parent.togglePointerEvents(!0),(g=m(this,fn))==null||g.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=l,this.div.style.cursor=u,$(this,ct,C0).call(this)};window.addEventListener("pointerup",d,{signal:s}),window.addEventListener("blur",d,{signal:s})},YD=function(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t;const[a,s]=this.parentDimensions;this.setDims(a*n,s*i),this.fixAndSetPosition(),this._onResized()},C0=function(){if(!m(this,ko))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=m(this,ko);L(this,ko,null);const a=this.x,s=this.y,l=this.width,u=this.height;a===e&&s===t&&l===n&&u===i||this.addCommands({cmd:$(this,ct,YD).bind(this,a,s,l,u),undo:$(this,ct,YD).bind(this,e,t,n,i),mustExec:!0})},KD=function(e,t){const[n,i]=this.parentDimensions,a=this.x,s=this.y,l=this.width,u=this.height,d=yt.MIN_SIZE/n,h=yt.MIN_SIZE/i,g=$(this,ct,T0).call(this,this.rotation),b=(P,B)=>[g[0]*P+g[2]*B,g[1]*P+g[3]*B],y=$(this,ct,T0).call(this,360-this.rotation),D=(P,B)=>[y[0]*P+y[2]*B,y[1]*P+y[3]*B];let v,w,k=!1,_=!1;switch(e){case"topLeft":k=!0,v=(P,B)=>[0,0],w=(P,B)=>[P,B];break;case"topMiddle":v=(P,B)=>[P/2,0],w=(P,B)=>[P/2,B];break;case"topRight":k=!0,v=(P,B)=>[P,0],w=(P,B)=>[0,B];break;case"middleRight":_=!0,v=(P,B)=>[P,B/2],w=(P,B)=>[0,B/2];break;case"bottomRight":k=!0,v=(P,B)=>[P,B],w=(P,B)=>[0,0];break;case"bottomMiddle":v=(P,B)=>[P/2,B],w=(P,B)=>[P/2,0];break;case"bottomLeft":k=!0,v=(P,B)=>[0,B],w=(P,B)=>[P,0];break;case"middleLeft":_=!0,v=(P,B)=>[0,B/2],w=(P,B)=>[P,B/2];break}const A=v(l,u),N=w(l,u);let E=b(...N);const T=yt._round(a+E[0]),R=yt._round(s+E[1]);let M=1,I=1,F,G;if(t.fromKeyboard)({deltaX:F,deltaY:G}=t);else{const{screenX:P,screenY:B}=t,[ee,K]=m(this,Ru);[F,G]=this.screenToPageTranslation(P-ee,B-K),m(this,Ru)[0]=P,m(this,Ru)[1]=B}if([F,G]=D(F/n,G/i),k){const P=Math.hypot(l,u);M=I=Math.max(Math.min(Math.hypot(N[0]-A[0]-F,N[1]-A[1]-G)/P,1/l,1/u),d/l,h/u)}else _?M=qr(Math.abs(N[0]-A[0]-F),d,1)/l:I=qr(Math.abs(N[1]-A[1]-G),h,1)/u;const U=yt._round(l*M),W=yt._round(u*I);E=b(...w(U,W));const j=T-E[0],X=R-E[1];m(this,Ti)||L(this,Ti,[this.x,this.y,this.width,this.height]),this.width=U,this.height=W,this.x=j,this.y=X,this.setDims(n*U,i*W),this.fixAndSetPosition(),this._onResizing()},bF=function(){var e;L(this,ko,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=m(this,fn))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},yF=function(e,t,n){let a=.7*(n/t)+1-.7;if(a===1)return;const s=$(this,ct,T0).call(this,this.rotation),l=(T,R)=>[s[0]*T+s[2]*R,s[1]*T+s[3]*R],[u,d]=this.parentDimensions,h=this.x,g=this.y,b=this.width,y=this.height,D=yt.MIN_SIZE/u,v=yt.MIN_SIZE/d;a=Math.max(Math.min(a,1/b,1/y),D/b,v/y);const w=yt._round(b*a),k=yt._round(y*a);if(w===b&&k===y)return;m(this,Ti)||L(this,Ti,[h,g,b,y]);const _=l(b/2,y/2),A=yt._round(h+_[0]),N=yt._round(g+_[1]),E=l(w/2,k/2);this.x=A-E[0],this.y=N-E[1],this.width=w,this.height=k,this.setDims(u*w,d*k),this.fixAndSetPosition(),this._onResizing()},xF=function(){var e;(e=m(this,fn))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),$(this,ct,C0).call(this)},QD=function(e){const{isMac:t}=Ar.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},vF=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:a},l=d=>{i.abort(),L(this,Zl,null),L(this,ju,!1),this._uiManager.endDragSession()||$(this,ct,QD).call(this,d),n&&this._onStopDragging()};t&&(L(this,bf,e.clientX),L(this,yf,e.clientY),L(this,Zl,e.pointerId),L(this,Vm,e.pointerType),window.addEventListener("pointermove",d=>{n||(n=!0,this._onStartDragging());const{clientX:h,clientY:g,pointerId:b}=d;if(b!==m(this,Zl)){Mn(d);return}const[y,D]=this.screenToPageTranslation(h-m(this,bf),g-m(this,yf));L(this,bf,h),L(this,yf,g),this._uiManager.dragSelectedEditors(y,D)},s),window.addEventListener("touchmove",Mn,s),window.addEventListener("pointerdown",d=>{d.pointerType===m(this,Vm)&&(m(this,Iu)||d.isPrimary)&&l(d),Mn(d)},s));const u=d=>{if(!m(this,Zl)||m(this,Zl)===d.pointerId){l(d);return}Mn(d)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})},ZD=function(){if(m(this,Jl)||!this.div)return;L(this,Jl,new AbortController);const e=this._uiManager.combinedSignal(m(this,Jl));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},wF=function(e){yt._resizerKeyboardManager.exec(this,e)},kF=function(e){var t;m(this,Do)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==m(this,br)&&$(this,ct,Vg).call(this)},DF=function(e){L(this,Xm,m(this,Do)?e:"")},JD=function(e){if(m(this,Pa))for(const t of m(this,Pa))t.tabIndex=e},Vg=function(){L(this,Do,!1),$(this,ct,JD).call(this,-1),$(this,ct,C0).call(this)},V(yt,Ym),We(yt,"_l10n",null),We(yt,"_l10nResizer",null),We(yt,"_borderLineWidth",-1),We(yt,"_colorManager",new PD),We(yt,"_zIndex",1),We(yt,"_telemetryTimeout",1e3);let an=yt;class O7 extends an{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const h4=3285377520,la=4294901760,cs=65535;class _F{constructor(e){this.h1=e?e&4294967295:h4,this.h2=e?e&4294967295:h4}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let v=0,w=e.length;v<w;v++){const k=e.charCodeAt(v);k<=255?t[n++]=k:(t[n++]=k>>>8,t[n++]=k&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,a=n-i*4,s=new Uint32Array(t.buffer,0,i);let l=0,u=0,d=this.h1,h=this.h2;const g=3432918353,b=461845907,y=g&cs,D=b&cs;for(let v=0;v<i;v++)v&1?(l=s[v],l=l*g&la|l*y&cs,l=l<<15|l>>>17,l=l*b&la|l*D&cs,d^=l,d=d<<13|d>>>19,d=d*5+3864292196):(u=s[v],u=u*g&la|u*y&cs,u=u<<15|u>>>17,u=u*b&la|u*D&cs,h^=u,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,a){case 3:l^=t[i*4+2]<<16;case 2:l^=t[i*4+1]<<8;case 1:l^=t[i*4],l=l*g&la|l*y&cs,l=l<<15|l>>>17,l=l*b&la|l*D&cs,i&1?d^=l:h^=l}this.h1=d,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&la|e*36045&cs,t=t*4283543511&la|((t<<16|e>>>16)*2950163797&la)>>>16,e^=t>>>1,e=e*444984403&la|e*60499&cs,t=t*3301882366&la|((t<<16|e>>>16)*3120437893&la)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const e_=Object.freeze({map:null,hash:"",transfer:void 0});var Ou,Mu,yr,N1,AF;class fS{constructor(){V(this,N1);V(this,Ou,!1);V(this,Mu,null);V(this,yr,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=m(this,yr).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return m(this,yr).get(e)}remove(e){if(m(this,yr).delete(e),m(this,yr).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of m(this,yr).values())if(t instanceof an)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=m(this,yr).get(e);let i=!1;if(n!==void 0)for(const[a,s]of Object.entries(t))n[a]!==s&&(i=!0,n[a]=s);else i=!0,m(this,yr).set(e,t);i&&$(this,N1,AF).call(this),t instanceof an&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return m(this,yr).has(e)}get size(){return m(this,yr).size}resetModified(){m(this,Ou)&&(L(this,Ou,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new SF(this)}get serializable(){if(m(this,yr).size===0)return e_;const e=new Map,t=new _F,n=[],i=Object.create(null);let a=!1;for(const[s,l]of m(this,yr)){const u=l instanceof an?l.serialize(!1,i):l;u&&(e.set(s,u),t.update(`${s}:${JSON.stringify(u)}`),a||(a=!!u.bitmap))}if(a)for(const s of e.values())s.bitmap&&n.push(s.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:e_}get editorStats(){let e=null;const t=new Map;for(const n of m(this,yr).values()){if(!(n instanceof an))continue;const i=n.telemetryFinalData;if(!i)continue;const{type:a}=i;t.has(a)||t.set(a,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const s=e[a]||(e[a]=new Map);for(const[l,u]of Object.entries(i)){if(l==="type")continue;let d=s.get(l);d||(d=new Map,s.set(l,d));const h=d.get(u)??0;d.set(u,h+1)}}for(const[n,i]of t)e[n]=i.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){L(this,Mu,null)}get modifiedIds(){if(m(this,Mu))return m(this,Mu);const e=[];for(const t of m(this,yr).values())!(t instanceof an)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return L(this,Mu,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return m(this,yr).entries()}}Ou=new WeakMap,Mu=new WeakMap,yr=new WeakMap,N1=new WeakSet,AF=function(){m(this,Ou)||(L(this,Ou,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Km;class SF extends fS{constructor(t){super();V(this,Km);const{map:n,hash:i,transfer:a}=t.serializable,s=structuredClone(n,a?{transfer:a}:null);L(this,Km,{map:s,hash:i,transfer:a})}get print(){Jt("Should not call PrintAnnotationStorage.print")}get serializable(){return m(this,Km)}get modifiedIds(){return Dt(this,"modifiedIds",{ids:new Set,hash:""})}}Km=new WeakMap;var xf;class M7{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){V(this,xf,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),m(this,xf).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||m(this,xf).has(e.loadedName))){if(Ln(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:s}=e,l=new FontFace(i,a,s);this.addNativeFontFace(l);try{await l.load(),m(this,xf).add(i),n==null||n(e)}catch{gt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}Jt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw gt(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Dt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Dt(this,"isSyncFontLoadingSupported",Hr||Ar.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Ln(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:t,callback:e};return n.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Dt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(N,E){return N.charCodeAt(E)<<24|N.charCodeAt(E+1)<<16|N.charCodeAt(E+2)<<8|N.charCodeAt(E+3)&255}function i(N,E,T,R){const M=N.substring(0,E),I=N.substring(E+T);return M+R+I}let a,s;const l=this._document.createElement("canvas");l.width=1,l.height=1;const u=l.getContext("2d");let d=0;function h(N,E){if(++d>30){gt("Load test font never loaded."),E();return}if(u.font="30px "+N,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){E();return}setTimeout(h.bind(null,N,E))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=i(b,976,g.length,g);const D=16,v=1482184792;let w=n(b,D);for(a=0,s=g.length-3;a<s;a+=4)w=w-v+n(g,a)|0;a<g.length&&(w=w-v+n(g+"XXX",a)|0),b=i(b,D,4,w7(w));const k=`url(data:font/opentype;base64,${btoa(b)});`,_=`@font-face {font-family:"${g}";src:${k}}`;this.insertRule(_);const A=this._document.createElement("div");A.style.visibility="hidden",A.style.width=A.style.height="10px",A.style.position="absolute",A.style.top=A.style.left="0px";for(const N of[e.loadedName,g]){const E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=N,A.append(E)}this._document.body.append(A),h(g,()=>{A.remove(),t.complete()})}}xf=new WeakMap;class L7{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const n in e)this[n]=e[n];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${$j(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(s){gt(`getPathGenerator - ignoring character: "${s}".`)}const a=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=a}}function B7(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(Hr)return r;const e=URL.parse(r,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function P7(r){if(Hr&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return ly(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r==null?void 0:r.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function qx(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const t_=r=>typeof r=="object"&&Number.isInteger(r==null?void 0:r.num)&&r.num>=0&&Number.isInteger(r==null?void 0:r.gen)&&r.gen>=0,z7=r=>typeof r=="object"&&typeof(r==null?void 0:r.name)=="string",W7=S7.bind(null,t_,z7);var _o,U1;class H7{constructor(){V(this,_o,new Map);V(this,U1,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};m(this,U1).then(()=>{for(const[i]of m(this,_o))i.call(this,n)})}addEventListener(e,t,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:a}=n;if(a.aborted){gt("LoopbackPort - cannot use an `aborted` signal.");return}const s=()=>this.removeEventListener(e,t);i=()=>a.removeEventListener("abort",s),a.addEventListener("abort",s)}m(this,_o).set(t,i)}removeEventListener(e,t){const n=m(this,_o).get(t);n==null||n(),m(this,_o).delete(t)}terminate(){for(const[,e]of m(this,_o))e==null||e();m(this,_o).clear()}}_o=new WeakMap,U1=new WeakMap;const Vx={DATA:1,ERROR:2},Fn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function f4(){}function ii(r){if(r instanceof Ic||r instanceof FD||r instanceof c4||r instanceof l1||r instanceof Jk)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||Jt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Ic(r.message);case"InvalidPDFException":return new FD(r.message);case"PasswordException":return new c4(r.message,r.code);case"ResponseException":return new l1(r.message,r.status,r.missing);case"UnknownErrorException":return new Jk(r.message,r.details)}return new Jk(r.message,r.toString())}var vf,Da,EF,TF,CF,N0;class Xg{constructor(e,t,n){V(this,Da);V(this,vf,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",$(this,Da,EF).bind(this),{signal:m(this,vf).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(s){a.reject(s)}return a.promise}sendWithStream(e,t,n,i){const a=this.streamId++,s=this.sourceName,l=this.targetName,u=this.comObj;return new ReadableStream({start:d=>{const h=Promise.withResolvers();return this.streamControllers[a]={controller:d,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:s,targetName:l,action:e,streamId:a,data:t,desiredSize:d.desiredSize},i),h.promise},pull:d=>{const h=Promise.withResolvers();return this.streamControllers[a].pullCall=h,u.postMessage({sourceName:s,targetName:l,stream:Fn.PULL,streamId:a,desiredSize:d.desiredSize}),h.promise},cancel:d=>{Ln(d instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[a].cancelCall=h,this.streamControllers[a].isClosed=!0,u.postMessage({sourceName:s,targetName:l,stream:Fn.CANCEL,streamId:a,reason:ii(d)}),h.promise}},n)}destroy(){var e;(e=m(this,vf))==null||e.abort(),L(this,vf,null)}}vf=new WeakMap,Da=new WeakSet,EF=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){$(this,Da,CF).call(this,e);return}if(e.callback){const n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Vx.DATA)i.resolve(e.data);else if(e.callback===Vx.ERROR)i.reject(ii(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,i=e.sourceName,a=this.comObj;Promise.try(t,e.data).then(function(s){a.postMessage({sourceName:n,targetName:i,callback:Vx.DATA,callbackId:e.callbackId,data:s})},function(s){a.postMessage({sourceName:n,targetName:i,callback:Vx.ERROR,callbackId:e.callbackId,reason:ii(s)})});return}if(e.streamId){$(this,Da,TF).call(this,e);return}t(e.data)},TF=function(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,s=this,l=this.actionHandler[e.action],u={enqueue(d,h=1,g){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=h,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:i,stream:Fn.ENQUEUE,streamId:t,chunk:d},g)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:Fn.CLOSE,streamId:t}),delete s.streamSinks[t])},error(d){Ln(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:Fn.ERROR,streamId:t,reason:ii(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,Promise.try(l,e.data,u).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Fn.START_COMPLETE,streamId:t,success:!0})},function(d){a.postMessage({sourceName:n,targetName:i,stream:Fn.START_COMPLETE,streamId:t,reason:ii(d)})})},CF=function(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,s=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case Fn.START_COMPLETE:e.success?s.startCall.resolve():s.startCall.reject(ii(e.reason));break;case Fn.PULL_COMPLETE:e.success?s.pullCall.resolve():s.pullCall.reject(ii(e.reason));break;case Fn.PULL:if(!l){a.postMessage({sourceName:n,targetName:i,stream:Fn.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||f4).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Fn.PULL_COMPLETE,streamId:t,success:!0})},function(d){a.postMessage({sourceName:n,targetName:i,stream:Fn.PULL_COMPLETE,streamId:t,reason:ii(d)})});break;case Fn.ENQUEUE:if(Ln(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case Fn.CLOSE:if(Ln(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),$(this,Da,N0).call(this,s,t);break;case Fn.ERROR:Ln(s,"error should have stream controller"),s.controller.error(ii(e.reason)),$(this,Da,N0).call(this,s,t);break;case Fn.CANCEL_COMPLETE:e.success?s.cancelCall.resolve():s.cancelCall.reject(ii(e.reason)),$(this,Da,N0).call(this,s,t);break;case Fn.CANCEL:if(!l)break;const u=ii(e.reason);Promise.try(l.onCancel||f4,u).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Fn.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){a.postMessage({sourceName:n,targetName:i,stream:Fn.CANCEL_COMPLETE,streamId:t,reason:ii(d)})}),l.sinkCapability.reject(u),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},N0=async function(e,t){var n,i,a;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(i=e.pullCall)==null?void 0:i.promise,(a=e.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[t]};var Qm;class NF{constructor({enableHWA:e=!1}){V(this,Qm,!1);L(this,Qm,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!m(this,Qm)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Jt("Abstract method `_createCanvas` called.")}}Qm=new WeakMap;class q7 extends NF{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class UF{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Jt("Abstract method `_fetch` called.")}}class p4 extends UF{async _fetch(e){const t=await cy(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):ly(t)}}class RF{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,a){return"none"}destroy(e=!1){}}var Lu,wf,Ao,So,Nr,Bu,Pu,Qe,Tr,Gg,Fh,U0,Ih,jF,n_,Oh,$g,Yg,r_,Kg;class V7 extends RF{constructor({docId:t,ownerDocument:n=globalThis.document}){super();V(this,Qe);V(this,Lu);V(this,wf);V(this,Ao);V(this,So);V(this,Nr);V(this,Bu);V(this,Pu,0);L(this,So,t),L(this,Nr,n)}addFilter(t){if(!t)return"none";let n=m(this,Qe,Tr).get(t);if(n)return n;const[i,a,s]=$(this,Qe,U0).call(this,t),l=t.length===1?i:`${i}${a}${s}`;if(n=m(this,Qe,Tr).get(l),n)return m(this,Qe,Tr).set(t,n),n;const u=`g_${m(this,So)}_transfer_map_${qn(this,Pu)._++}`,d=$(this,Qe,Ih).call(this,u);m(this,Qe,Tr).set(t,d),m(this,Qe,Tr).set(l,d);const h=$(this,Qe,Oh).call(this,u);return $(this,Qe,Yg).call(this,i,a,s,h),d}addHCMFilter(t,n){var D;const i=`${t}-${n}`,a="base";let s=m(this,Qe,Gg).get(a);if((s==null?void 0:s.key)===i||(s?((D=s.filter)==null||D.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},m(this,Qe,Gg).set(a,s)),!t||!n))return s.url;const l=$(this,Qe,Kg).call(this,t);t=tt.makeHexColor(...l);const u=$(this,Qe,Kg).call(this,n);if(n=tt.makeHexColor(...u),m(this,Qe,Fh).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return s.url;const d=new Array(256);for(let v=0;v<=255;v++){const w=v/255;d[v]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const h=d.join(","),g=`g_${m(this,So)}_hcm_filter`,b=s.filter=$(this,Qe,Oh).call(this,g);$(this,Qe,Yg).call(this,h,h,h,b),$(this,Qe,n_).call(this,b);const y=(v,w)=>{const k=l[v]/255,_=u[v]/255,A=new Array(w+1);for(let N=0;N<=w;N++)A[N]=k+N/w*(_-k);return A.join(",")};return $(this,Qe,Yg).call(this,y(0,5),y(1,5),y(2,5),b),s.url=$(this,Qe,Ih).call(this,g),s.url}addAlphaFilter(t){let n=m(this,Qe,Tr).get(t);if(n)return n;const[i]=$(this,Qe,U0).call(this,[t]),a=`alpha_${i}`;if(n=m(this,Qe,Tr).get(a),n)return m(this,Qe,Tr).set(t,n),n;const s=`g_${m(this,So)}_alpha_map_${qn(this,Pu)._++}`,l=$(this,Qe,Ih).call(this,s);m(this,Qe,Tr).set(t,l),m(this,Qe,Tr).set(a,l);const u=$(this,Qe,Oh).call(this,s);return $(this,Qe,r_).call(this,i,u),l}addLuminosityFilter(t){let n=m(this,Qe,Tr).get(t||"luminosity");if(n)return n;let i,a;if(t?([i]=$(this,Qe,U0).call(this,[t]),a=`luminosity_${i}`):a="luminosity",n=m(this,Qe,Tr).get(a),n)return m(this,Qe,Tr).set(t,n),n;const s=`g_${m(this,So)}_luminosity_map_${qn(this,Pu)._++}`,l=$(this,Qe,Ih).call(this,s);m(this,Qe,Tr).set(t,l),m(this,Qe,Tr).set(a,l);const u=$(this,Qe,Oh).call(this,s);return $(this,Qe,jF).call(this,u),t&&$(this,Qe,r_).call(this,i,u),l}addHighlightHCMFilter(t,n,i,a,s){var _;const l=`${n}-${i}-${a}-${s}`;let u=m(this,Qe,Gg).get(t);if((u==null?void 0:u.key)===l||(u?((_=u.filter)==null||_.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},m(this,Qe,Gg).set(t,u)),!n||!i))return u.url;const[d,h]=[n,i].map($(this,Qe,Kg).bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),b=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[y,D]=[a,s].map($(this,Qe,Kg).bind(this));b<g&&([g,b,y,D]=[b,g,D,y]),m(this,Qe,Fh).style.color="";const v=(A,N,E)=>{const T=new Array(256),R=(b-g)/E,M=A/255,I=(N-A)/(255*E);let F=0;for(let G=0;G<=E;G++){const U=Math.round(g+G*R),W=M+G*I;for(let j=F;j<=U;j++)T[j]=W;F=U+1}for(let G=F;G<256;G++)T[G]=T[F-1];return T.join(",")},w=`g_${m(this,So)}_hcm_${t}_filter`,k=u.filter=$(this,Qe,Oh).call(this,w);return $(this,Qe,n_).call(this,k),$(this,Qe,Yg).call(this,v(y[0],D[0],5),v(y[1],D[1],5),v(y[2],D[2],5),k),u.url=$(this,Qe,Ih).call(this,w),u.url}destroy(t=!1){var n,i,a,s;t&&((n=m(this,Bu))!=null&&n.size)||((i=m(this,Ao))==null||i.parentNode.parentNode.remove(),L(this,Ao,null),(a=m(this,wf))==null||a.clear(),L(this,wf,null),(s=m(this,Bu))==null||s.clear(),L(this,Bu,null),L(this,Pu,0))}}Lu=new WeakMap,wf=new WeakMap,Ao=new WeakMap,So=new WeakMap,Nr=new WeakMap,Bu=new WeakMap,Pu=new WeakMap,Qe=new WeakSet,Tr=function(){return m(this,wf)||L(this,wf,new Map)},Gg=function(){return m(this,Bu)||L(this,Bu,new Map)},Fh=function(){if(!m(this,Ao)){const t=m(this,Nr).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=m(this,Nr).createElementNS(io,"svg");i.setAttribute("width",0),i.setAttribute("height",0),L(this,Ao,m(this,Nr).createElementNS(io,"defs")),t.append(i),i.append(m(this,Ao)),m(this,Nr).body.append(t)}return m(this,Ao)},U0=function(t){if(t.length===1){const d=t[0],h=new Array(256);for(let b=0;b<256;b++)h[b]=d[b]/255;const g=h.join(",");return[g,g,g]}const[n,i,a]=t,s=new Array(256),l=new Array(256),u=new Array(256);for(let d=0;d<256;d++)s[d]=n[d]/255,l[d]=i[d]/255,u[d]=a[d]/255;return[s.join(","),l.join(","),u.join(",")]},Ih=function(t){if(m(this,Lu)===void 0){L(this,Lu,"");const n=m(this,Nr).URL;n!==m(this,Nr).baseURI&&(Dv(n)?gt('#createUrl: ignore "data:"-URL for performance reasons.'):L(this,Lu,Vj(n,"")))}return`url(${m(this,Lu)}#${t})`},jF=function(t){const n=m(this,Nr).createElementNS(io,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},n_=function(t){const n=m(this,Nr).createElementNS(io,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Oh=function(t){const n=m(this,Nr).createElementNS(io,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),m(this,Qe,Fh).append(n),n},$g=function(t,n,i){const a=m(this,Nr).createElementNS(io,n);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),t.append(a)},Yg=function(t,n,i,a){const s=m(this,Nr).createElementNS(io,"feComponentTransfer");a.append(s),$(this,Qe,$g).call(this,s,"feFuncR",t),$(this,Qe,$g).call(this,s,"feFuncG",n),$(this,Qe,$g).call(this,s,"feFuncB",i)},r_=function(t,n){const i=m(this,Nr).createElementNS(io,"feComponentTransfer");n.append(i),$(this,Qe,$g).call(this,i,"feFuncA",t)},Kg=function(t){return m(this,Qe,Fh).style.color=t,_v(getComputedStyle(m(this,Qe,Fh)).getPropertyValue("color"))};class FF{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Jt("Abstract method `_fetch` called.")}}class g4 extends FF{async _fetch(e){const t=await cy(e,"arraybuffer");return new Uint8Array(t)}}class IF{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Jt("Abstract method `_fetch` called.")}}class m4 extends IF{async _fetch(e){const t=await cy(e,"arraybuffer");return new Uint8Array(t)}}Hr&&gt("Please use the `legacy` build in Node.js environments.");async function pS(r){const t=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(t)}class X7 extends RF{}class G7 extends NF{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class $7 extends UF{async _fetch(e){return pS(e)}}class Y7 extends FF{async _fetch(e){return pS(e)}}class K7 extends IF{async _fetch(e){return pS(e)}}const Th="__forcedDependency";var Ci,Br,kf,ks,Df,Eo,Vt,Kt,To,Ni,ec,_f,tc,nc;class Q7{constructor(e){V(this,Ci,{__proto__:null});V(this,Br,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Th]:[]});V(this,kf,new Map);V(this,ks,[]);V(this,Df,[]);V(this,Eo,[[1,0,0,1,0,0]]);V(this,Vt,[-1/0,-1/0,1/0,1/0]);V(this,Kt,new Float64Array([1/0,1/0,-1/0,-1/0]));V(this,To,-1);V(this,Ni,new Set);V(this,ec,new Map);V(this,_f,new Map);V(this,tc);V(this,nc);L(this,tc,e.width),L(this,nc,e.height)}save(e){return L(this,Ci,{__proto__:m(this,Ci)}),L(this,Br,{__proto__:m(this,Br),transform:{__proto__:m(this,Br).transform},moveText:{__proto__:m(this,Br).moveText},sameLineText:{__proto__:m(this,Br).sameLineText},[Th]:{__proto__:m(this,Br)[Th]}}),L(this,Vt,{__proto__:m(this,Vt)}),m(this,ks).push([e,null]),this}restore(e){const t=Object.getPrototypeOf(m(this,Ci));if(t===null)return this;L(this,Ci,t),L(this,Br,Object.getPrototypeOf(m(this,Br))),L(this,Vt,Object.getPrototypeOf(m(this,Vt)));const n=m(this,ks).pop();return n!==void 0&&(n[1]=e),this}recordOpenMarker(e){return m(this,ks).push([e,null]),this}getOpenMarker(){return m(this,ks).length===0?null:m(this,ks).at(-1)[0]}recordCloseMarker(e){const t=m(this,ks).pop();return t!==void 0&&(t[1]=e),this}beginMarkedContent(e){return m(this,Df).push([e,null]),this}endMarkedContent(e){const t=m(this,Df).pop();return t!==void 0&&(t[1]=e),this}pushBaseTransform(e){return m(this,Eo).push(tt.multiplyByDOMMatrix(m(this,Eo).at(-1),e.getTransform())),this}popBaseTransform(){return m(this,Eo).length>1&&m(this,Eo).pop(),this}recordSimpleData(e,t){return m(this,Ci)[e]=t,this}recordIncrementalData(e,t){return m(this,Br)[e].push(t),this}resetIncrementalData(e,t){return m(this,Br)[e].length=0,this}recordNamedData(e,t){return m(this,kf).set(e,t),this}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Th,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in m(this,Ci)&&this.recordFutureForcedDependency(t,m(this,Ci)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of m(this,Ni))this.recordFutureForcedDependency(Th,e);return this}resetBBox(e){return L(this,To,e),m(this,Kt)[0]=1/0,m(this,Kt)[1]=1/0,m(this,Kt)[2]=-1/0,m(this,Kt)[3]=-1/0,this}get hasPendingBBox(){return m(this,To)!==-1}recordClipBox(e,t,n,i,a,s){const l=tt.multiplyByDOMMatrix(m(this,Eo).at(-1),t.getTransform()),u=[1/0,1/0,-1/0,-1/0];tt.axialAlignedBoundingBox([n,a,i,s],l,u);const d=tt.intersect(m(this,Vt),u);return d?(m(this,Vt)[0]=d[0],m(this,Vt)[1]=d[1],m(this,Vt)[2]=d[2],m(this,Vt)[3]=d[3]):(m(this,Vt)[0]=m(this,Vt)[1]=1/0,m(this,Vt)[2]=m(this,Vt)[3]=-1/0),this}recordBBox(e,t,n,i,a,s){const l=m(this,Vt);if(l[0]===1/0)return this;const u=tt.multiplyByDOMMatrix(m(this,Eo).at(-1),t.getTransform());if(l[0]===-1/0)return tt.axialAlignedBoundingBox([n,a,i,s],u,m(this,Kt)),this;const d=[1/0,1/0,-1/0,-1/0];return tt.axialAlignedBoundingBox([n,a,i,s],u,d),m(this,Kt)[0]=Math.min(m(this,Kt)[0],Math.max(d[0],l[0])),m(this,Kt)[1]=Math.min(m(this,Kt)[1],Math.max(d[1],l[1])),m(this,Kt)[2]=Math.max(m(this,Kt)[2],Math.min(d[2],l[2])),m(this,Kt)[3]=Math.max(m(this,Kt)[3],Math.min(d[3],l[3])),this}recordCharacterBBox(e,t,n,i=1,a=0,s=0,l){const u=n.bbox;let d,h;if(u&&(d=u[2]!==u[0]&&u[3]!==u[1]&&m(this,_f).get(n),d!==!1&&(h=[0,0,0,0],tt.axialAlignedBoundingBox(u,n.fontMatrix,h),(i!==1||a!==0||s!==0)&&tt.scaleMinMax([i,0,0,-i,a,s],h),d)))return this.recordBBox(e,t,h[0],h[2],h[1],h[3]);if(!l)return this.recordFullPageBBox(e);const g=l();return u&&h&&d===void 0&&(d=h[0]<=a-g.actualBoundingBoxLeft&&h[2]>=a+g.actualBoundingBoxRight&&h[1]<=s-g.actualBoundingBoxAscent&&h[3]>=s+g.actualBoundingBoxDescent,m(this,_f).set(n,d),d)?this.recordBBox(e,t,h[0],h[2],h[1],h[3]):this.recordBBox(e,t,a-g.actualBoundingBoxLeft,a+g.actualBoundingBoxRight,s-g.actualBoundingBoxAscent,s+g.actualBoundingBoxDescent)}recordFullPageBBox(e){return m(this,Kt)[0]=Math.max(0,m(this,Vt)[0]),m(this,Kt)[1]=Math.max(0,m(this,Vt)[1]),m(this,Kt)[2]=Math.min(m(this,tc),m(this,Vt)[2]),m(this,Kt)[3]=Math.min(m(this,nc),m(this,Vt)[3]),this}getSimpleIndex(e){return m(this,Ci)[e]}recordDependencies(e,t){const n=m(this,Ni),i=m(this,Ci),a=m(this,Br);for(const s of t)s in m(this,Ci)?n.add(i[s]):s in a&&a[s].forEach(n.add,n);return this}copyDependenciesFromIncrementalOperation(e,t){const n=m(this,ec),i=m(this,Ni);for(const a of m(this,Br)[t])n.get(a).dependencies.forEach(i.add,i.add(a));return this}recordNamedDependency(e,t){return m(this,kf).has(t)&&m(this,Ni).add(m(this,kf).get(t)),this}recordOperation(e,t=!1){this.recordDependencies(e,[Th]);const n=new Set(m(this,Ni)),i=m(this,ks).concat(m(this,Df)),a=m(this,To)===e?{minX:m(this,Kt)[0],minY:m(this,Kt)[1],maxX:m(this,Kt)[2],maxY:m(this,Kt)[3]}:null;return m(this,ec).set(e,{bbox:a,pairs:i,dependencies:n}),t||L(this,To,-1),m(this,Ni).clear(),this}bboxToClipBoxDropOperation(e){return m(this,To)!==-1&&(L(this,To,-1),m(this,Vt)[0]=Math.max(m(this,Vt)[0],m(this,Kt)[0]),m(this,Vt)[1]=Math.max(m(this,Vt)[1],m(this,Kt)[1]),m(this,Vt)[2]=Math.min(m(this,Vt)[2],m(this,Kt)[2]),m(this,Vt)[3]=Math.min(m(this,Vt)[3],m(this,Kt)[3])),m(this,Ni).clear(),this}_takePendingDependencies(){const e=m(this,Ni);return L(this,Ni,new Set),e}_extractOperation(e){const t=m(this,ec).get(e);return m(this,ec).delete(e),t}_pushPendingDependencies(e){for(const t of e)m(this,Ni).add(t)}take(){return m(this,_f).clear(),Array.from(m(this,ec),([e,{bbox:t,pairs:n,dependencies:i}])=>(n.forEach(a=>a.forEach(i.add,i)),i.delete(e),{minX:((t==null?void 0:t.minX)??0)/m(this,tc),maxX:((t==null?void 0:t.maxX)??m(this,tc))/m(this,tc),minY:((t==null?void 0:t.minY)??0)/m(this,nc),maxY:((t==null?void 0:t.maxY)??m(this,nc))/m(this,nc),dependencies:Array.from(i).sort((a,s)=>a-s),idx:e}))}}Ci=new WeakMap,Br=new WeakMap,kf=new WeakMap,ks=new WeakMap,Df=new WeakMap,Eo=new WeakMap,Vt=new WeakMap,Kt=new WeakMap,To=new WeakMap,Ni=new WeakMap,ec=new WeakMap,_f=new WeakMap,tc=new WeakMap,nc=new WeakMap;var Bt,xn,Af,rc,Sf;const PS=class PS{constructor(e,t){V(this,Bt);V(this,xn);V(this,Af,0);V(this,rc);V(this,Sf,0);if(e instanceof PS)return e;L(this,Bt,e),L(this,rc,e._takePendingDependencies()),L(this,xn,t)}save(e){return qn(this,Sf)._++,m(this,Bt).save(m(this,xn)),this}restore(e){return m(this,Sf)>0&&(m(this,Bt).restore(m(this,xn)),qn(this,Sf)._--),this}recordOpenMarker(e){return qn(this,Af)._++,this}getOpenMarker(){return m(this,Af)>0?m(this,xn):m(this,Bt).getOpenMarker()}recordCloseMarker(e){return qn(this,Af)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return m(this,Bt).pushBaseTransform(e),this}popBaseTransform(){return m(this,Bt).popBaseTransform(),this}recordSimpleData(e,t){return m(this,Bt).recordSimpleData(e,m(this,xn)),this}recordIncrementalData(e,t){return m(this,Bt).recordIncrementalData(e,m(this,xn)),this}resetIncrementalData(e,t){return m(this,Bt).resetIncrementalData(e,m(this,xn)),this}recordNamedData(e,t){return this}recordFutureForcedDependency(e,t){return m(this,Bt).recordFutureForcedDependency(e,m(this,xn)),this}inheritSimpleDataAsFutureForcedDependencies(e){return m(this,Bt).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return m(this,Bt).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return m(this,Bt).hasPendingBBox||m(this,Bt).resetBBox(m(this,xn)),this}get hasPendingBBox(){return m(this,Bt).hasPendingBBox}recordClipBox(e,t,n,i,a,s){return m(this,Bt).recordClipBox(m(this,xn),t,n,i,a,s),this}recordBBox(e,t,n,i,a,s){return m(this,Bt).recordBBox(m(this,xn),t,n,i,a,s),this}recordCharacterBBox(e,t,n,i,a,s,l){return m(this,Bt).recordCharacterBBox(m(this,xn),t,n,i,a,s,l),this}recordFullPageBBox(e){return m(this,Bt).recordFullPageBBox(m(this,xn)),this}getSimpleIndex(e){return m(this,Bt).getSimpleIndex(e)}recordDependencies(e,t){return m(this,Bt).recordDependencies(m(this,xn),t),this}copyDependenciesFromIncrementalOperation(e,t){return m(this,Bt).copyDependenciesFromIncrementalOperation(m(this,xn),t),this}recordNamedDependency(e,t){return m(this,Bt).recordNamedDependency(m(this,xn),t),this}recordOperation(e){m(this,Bt).recordOperation(m(this,xn),!0);const t=m(this,Bt)._extractOperation(m(this,xn));for(const n of t.dependencies)m(this,rc).add(n);return m(this,rc).delete(m(this,xn)),m(this,rc).delete(null),this}bboxToClipBoxDropOperation(e){return m(this,Bt).bboxToClipBoxDropOperation(m(this,xn)),this}recordNestedDependencies(){m(this,Bt)._pushPendingDependencies(m(this,rc))}take(){throw new Error("Unreachable")}};Bt=new WeakMap,xn=new WeakMap,Af=new WeakMap,rc=new WeakMap,Sf=new WeakMap;let h1=PS;const ca={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation"],transform:["transform"],transformAndFill:["transform","fillColor"]},wr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function i_(r,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,n),r.clip(i)}class gS{isModifyingCurrentTransform(){return!1}getPattern(){Jt("Abstract method `getPattern` called.")}}class Z7 extends gS{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let a;if(i===wr.STROKE||i===wr.FILL){const s=t.current.getClippedPathBoundingBox(i,vn(e))||[0,0,0,0],l=Math.ceil(s[2]-s[0])||1,u=Math.ceil(s[3]-s[1])||1,d=t.cachedCanvases.getCanvas("pattern",l,u),h=d.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-s[0],-s[1]),n=tt.transform(n,[1,0,0,1,s[0],s[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),i_(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),a=e.createPattern(d.canvas,"no-repeat");const g=new DOMMatrix(n);a.setTransform(g)}else i_(e,this._bbox),a=this._createGradient(e);return a}}function nD(r,e,t,n,i,a,s,l){const u=e.coords,d=e.colors,h=r.data,g=r.width*4;let b;u[t+1]>u[n+1]&&(b=t,t=n,n=b,b=a,a=s,s=b),u[n+1]>u[i+1]&&(b=n,n=i,i=b,b=s,s=l,l=b),u[t+1]>u[n+1]&&(b=t,t=n,n=b,b=a,a=s,s=b);const y=(u[t]+e.offsetX)*e.scaleX,D=(u[t+1]+e.offsetY)*e.scaleY,v=(u[n]+e.offsetX)*e.scaleX,w=(u[n+1]+e.offsetY)*e.scaleY,k=(u[i]+e.offsetX)*e.scaleX,_=(u[i+1]+e.offsetY)*e.scaleY;if(D>=_)return;const A=d[a],N=d[a+1],E=d[a+2],T=d[s],R=d[s+1],M=d[s+2],I=d[l],F=d[l+1],G=d[l+2],U=Math.round(D),W=Math.round(_);let j,X,P,B,ee,K,H,J;for(let ie=U;ie<=W;ie++){if(ie<w){const Ie=ie<D?0:(D-ie)/(D-w);j=y-(y-v)*Ie,X=A-(A-T)*Ie,P=N-(N-R)*Ie,B=E-(E-M)*Ie}else{let Ie;ie>_?Ie=1:w===_?Ie=0:Ie=(w-ie)/(w-_),j=v-(v-k)*Ie,X=T-(T-I)*Ie,P=R-(R-F)*Ie,B=M-(M-G)*Ie}let z;ie<D?z=0:ie>_?z=1:z=(D-ie)/(D-_),ee=y-(y-k)*z,K=A-(A-I)*z,H=N-(N-F)*z,J=E-(E-G)*z;const ge=Math.round(Math.min(j,ee)),ve=Math.round(Math.max(j,ee));let je=g*ie+ge*4;for(let Ie=ge;Ie<=ve;Ie++)z=(j-Ie)/(j-ee),z<0?z=0:z>1&&(z=1),h[je++]=X-(X-K)*z|0,h[je++]=P-(P-H)*z|0,h[je++]=B-(B-J)*z|0,h[je++]=255}}function J7(r,e,t){const n=e.coords,i=e.colors;let a,s;switch(e.type){case"lattice":const l=e.verticesPerRow,u=Math.floor(n.length/l)-1,d=l-1;for(a=0;a<u;a++){let h=a*l;for(let g=0;g<d;g++,h++)nD(r,t,n[h],n[h+1],n[h+l],i[h],i[h+1],i[h+l]),nD(r,t,n[h+l+1],n[h+1],n[h+l],i[h+l+1],i[h+1],i[h+l])}break;case"triangles":for(a=0,s=n.length;a<s;a+=3)nD(r,t,n[a],n[a+1],n[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class ez extends gS{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const l=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-u,g=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),y=d/g,D=h/b,v={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-u,scaleX:1/y,scaleY:1/D},w=g+4,k=b+4,_=n.getCanvas("mesh",w,k),A=_.context,N=A.createImageData(g,b);if(t){const T=N.data;for(let R=0,M=T.length;R<M;R+=4)T[R]=t[0],T[R+1]=t[1],T[R+2]=t[2],T[R+3]=255}for(const T of this._figures)J7(N,T,v);return A.putImageData(N,2,2),{canvas:_.canvas,offsetX:l-2*y,offsetY:u-2*D,scaleX:y,scaleY:D}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){i_(e,this._bbox);const a=new Float32Array(2);if(i===wr.SHADING)tt.singularValueDecompose2dScale(vn(e),a);else if(this.matrix){tt.singularValueDecompose2dScale(this.matrix,a);const[l,u]=a;tt.singularValueDecompose2dScale(t.baseTransform,a),a[0]*=l,a[1]*=u}else tt.singularValueDecompose2dScale(t.baseTransform,a);const s=this._createMeshCanvas(a,i===wr.SHADING?null:this._background,t.cachedCanvases);return i!==wr.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}}class tz extends gS{getPattern(){return"hotpink"}}function nz(r){switch(r[0]){case"RadialAxial":return new Z7(r);case"Mesh":return new ez(r);case"Dummy":return new tz}throw new Error(`Unknown IR type: ${r[0]}`)}const b4={COLORED:1,UNCOLORED:2},R1=class R1{constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e){var ee,K,H,J;const{bbox:t,operatorList:n,paintType:i,tilingType:a,color:s,canvasGraphicsFactory:l}=this;let{xstep:u,ystep:d}=this;u=Math.abs(u),d=Math.abs(d),kv("TilingType: "+a);const h=t[0],g=t[1],b=t[2],y=t[3],D=b-h,v=y-g,w=new Float32Array(2);tt.singularValueDecompose2dScale(this.matrix,w);const[k,_]=w;tt.singularValueDecompose2dScale(this.baseTransform,w);const A=k*w[0],N=_*w[1];let E=D,T=v,R=!1,M=!1;const I=Math.ceil(u*A),F=Math.ceil(d*N),G=Math.ceil(D*A),U=Math.ceil(v*N);I>=G?E=u:R=!0,F>=U?T=d:M=!0;const W=this.getSizeAndScale(E,this.ctx.canvas.width,A),j=this.getSizeAndScale(T,this.ctx.canvas.height,N),X=e.cachedCanvases.getCanvas("pattern",W.size,j.size),P=X.context,B=l.createCanvasGraphics(P);if(B.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(B,i,s),P.translate(-W.scale*h,-j.scale*g),B.transform(0,W.scale,0,0,j.scale,0,0),P.save(),(ee=B.dependencyTracker)==null||ee.save(),this.clipBbox(B,h,g,b,y),B.baseTransform=vn(B.ctx),B.executeOperatorList(n),B.endDrawing(),(J=(K=B.dependencyTracker)==null?void 0:(H=K.restore()).recordNestedDependencies)==null||J.call(H),P.restore(),R||M){const ie=X.canvas;R&&(E=u),M&&(T=d);const z=this.getSizeAndScale(E,this.ctx.canvas.width,A),ge=this.getSizeAndScale(T,this.ctx.canvas.height,N),ve=z.size,je=ge.size,Ie=e.cachedCanvases.getCanvas("pattern-workaround",ve,je),Pe=Ie.context,fe=R?Math.floor(D/u):0,Ue=M?Math.floor(v/d):0;for(let be=0;be<=fe;be++)for(let Fe=0;Fe<=Ue;Fe++)Pe.drawImage(ie,ve*be,je*Fe,ve,je,0,0,ve,je);return{canvas:Ie.canvas,scaleX:z.scale,scaleY:ge.scale,offsetX:h,offsetY:g}}return{canvas:X.canvas,scaleX:W.scale,scaleY:j.scale,offsetX:h,offsetY:g}}getSizeAndScale(e,t,n){const i=Math.max(R1.MAX_PATTERN_SIZE,t);let a=Math.ceil(e*n);return a>=i?a=i:n=a/e,{scale:n,size:a}}clipBbox(e,t,n,i,a){const s=i-t,l=a-n;e.ctx.rect(t,n,s,l),tt.axialAlignedBoundingBox([t,n,i,a],vn(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,a=e.current;switch(t){case b4.COLORED:const{fillStyle:s,strokeStyle:l}=this.ctx;i.fillStyle=a.fillColor=s,i.strokeStyle=a.strokeColor=l;break;case b4.UNCOLORED:i.fillStyle=i.strokeStyle=n,a.fillColor=a.strokeColor=n;break;default:throw new v7(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i){let a=n;i!==wr.SHADING&&(a=tt.transform(a,t.baseTransform),this.matrix&&(a=tt.transform(a,this.matrix)));const s=this.createPatternCanvas(t);let l=new DOMMatrix(a);l=l.translate(s.offsetX,s.offsetY),l=l.scale(1/s.scaleX,1/s.scaleY);const u=e.createPattern(s.canvas,"repeat");return u.setTransform(l),u}};We(R1,"MAX_PATTERN_SIZE",3e3);let a_=R1;function rz({src:r,srcPos:e=0,dest:t,width:n,height:i,nonBlackColor:a=4294967295,inverseDecode:s=!1}){const l=Ar.isLittleEndian?4278190080:255,[u,d]=s?[a,l]:[l,a],h=n>>3,g=n&7,b=r.length;t=new Uint32Array(t.buffer);let y=0;for(let D=0;D<i;D++){for(const w=e+h;e<w;e++){const k=e<b?r[e]:255;t[y++]=k&128?d:u,t[y++]=k&64?d:u,t[y++]=k&32?d:u,t[y++]=k&16?d:u,t[y++]=k&8?d:u,t[y++]=k&4?d:u,t[y++]=k&2?d:u,t[y++]=k&1?d:u}if(g===0)continue;const v=e<b?r[e++]:255;for(let w=0;w<g;w++)t[y++]=v&1<<7-w?d:u}return{srcPos:e,destPos:y}}const y4=16,x4=100,iz=15,v4=10,ci=16,rD=new DOMMatrix,qi=new Float32Array(2),Hh=new Float32Array([1/0,1/0,-1/0,-1/0]);function az(r,e){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){e.save(),this.__originalSave()},r.restore=function(){e.restore(),this.__originalRestore()},r.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},r.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},r.transform=function(t,n,i,a,s,l){e.transform(t,n,i,a,s,l),this.__originalTransform(t,n,i,a,s,l)},r.setTransform=function(t,n,i,a,s,l){e.setTransform(t,n,i,a,s,l),this.__originalSetTransform(t,n,i,a,s,l)},r.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},r.rotate=function(t){e.rotate(t),this.__originalRotate(t)},r.clip=function(t){e.clip(t),this.__originalClip(t)},r.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},r.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},r.bezierCurveTo=function(t,n,i,a,s,l){e.bezierCurveTo(t,n,i,a,s,l),this.__originalBezierCurveTo(t,n,i,a,s,l)},r.rect=function(t,n,i,a){e.rect(t,n,i,a),this.__originalRect(t,n,i,a)},r.closePath=function(){e.closePath(),this.__originalClosePath()},r.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class sz{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Xx(r,e,t,n,i,a,s,l,u,d){const[h,g,b,y,D,v]=vn(r);if(g===0&&b===0){const _=s*h+D,A=Math.round(_),N=l*y+v,E=Math.round(N),T=(s+u)*h+D,R=Math.abs(Math.round(T)-A)||1,M=(l+d)*y+v,I=Math.abs(Math.round(M)-E)||1;return r.setTransform(Math.sign(h),0,0,Math.sign(y),A,E),r.drawImage(e,t,n,i,a,0,0,R,I),r.setTransform(h,g,b,y,D,v),[R,I]}if(h===0&&y===0){const _=l*b+D,A=Math.round(_),N=s*g+v,E=Math.round(N),T=(l+d)*b+D,R=Math.abs(Math.round(T)-A)||1,M=(s+u)*g+v,I=Math.abs(Math.round(M)-E)||1;return r.setTransform(0,Math.sign(g),Math.sign(b),0,A,E),r.drawImage(e,t,n,i,a,0,0,I,R),r.setTransform(h,g,b,y,D,v),[I,R]}r.drawImage(e,t,n,i,a,s,l,u,d);const w=Math.hypot(h,g),k=Math.hypot(b,y);return[w*u,k*d]}class w4{constructor(e,t,n){We(this,"alphaIsShape",!1);We(this,"fontSize",0);We(this,"fontSizeScale",1);We(this,"textMatrix",null);We(this,"textMatrixScale",1);We(this,"fontMatrix",jD);We(this,"leading",0);We(this,"x",0);We(this,"y",0);We(this,"lineX",0);We(this,"lineY",0);We(this,"charSpacing",0);We(this,"wordSpacing",0);We(this,"textHScale",1);We(this,"textRenderingMode",pr.FILL);We(this,"textRise",0);We(this,"fillColor","#000000");We(this,"strokeColor","#000000");We(this,"patternFill",!1);We(this,"patternStroke",!1);We(this,"fillAlpha",1);We(this,"strokeAlpha",1);We(this,"lineWidth",1);We(this,"activeSMask",null);We(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Hh.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=wr.FILL,t=null){const n=this.minMax.slice();if(e===wr.STROKE){t||Jt("Stroke bounding box must include transform."),tt.singularValueDecompose2dScale(t,qi);const i=qi[0]*this.lineWidth/2,a=qi[1]*this.lineWidth/2;n[0]-=i,n[1]-=a,n[2]+=i,n[3]+=a}return n}updateClipFromPath(){const e=tt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Hh,0)}getClippedPathBoundingBox(e=wr.FILL,t=null){return tt.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function k4(r,e){if(e instanceof ImageData){r.putImageData(e,0,0);return}const t=e.height,n=e.width,i=t%ci,a=(t-i)/ci,s=i===0?a:a+1,l=r.createImageData(n,ci);let u=0,d;const h=e.data,g=l.data;let b,y,D,v;if(e.kind===D0.GRAYSCALE_1BPP){const w=h.byteLength,k=new Uint32Array(g.buffer,0,g.byteLength>>2),_=k.length,A=n+7>>3,N=4294967295,E=Ar.isLittleEndian?4278190080:255;for(b=0;b<s;b++){for(D=b<a?ci:i,d=0,y=0;y<D;y++){const T=w-u;let R=0;const M=T>A?n:T*8-7,I=M&-8;let F=0,G=0;for(;R<I;R+=8)G=h[u++],k[d++]=G&128?N:E,k[d++]=G&64?N:E,k[d++]=G&32?N:E,k[d++]=G&16?N:E,k[d++]=G&8?N:E,k[d++]=G&4?N:E,k[d++]=G&2?N:E,k[d++]=G&1?N:E;for(;R<M;R++)F===0&&(G=h[u++],F=128),k[d++]=G&F?N:E,F>>=1}for(;d<_;)k[d++]=0;r.putImageData(l,0,b*ci)}}else if(e.kind===D0.RGBA_32BPP){for(y=0,v=n*ci*4,b=0;b<a;b++)g.set(h.subarray(u,u+v)),u+=v,r.putImageData(l,0,y),y+=ci;b<s&&(v=n*i*4,g.set(h.subarray(u,u+v)),r.putImageData(l,0,y))}else if(e.kind===D0.RGB_24BPP)for(D=ci,v=n*D,b=0;b<s;b++){for(b>=a&&(D=i,v=n*D),d=0,y=v;y--;)g[d++]=h[u++],g[d++]=h[u++],g[d++]=h[u++],g[d++]=255;r.putImageData(l,0,b*ci)}else throw new Error(`bad image kind: ${e.kind}`)}function D4(r,e){if(e.bitmap){r.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,i=t%ci,a=(t-i)/ci,s=i===0?a:a+1,l=r.createImageData(n,ci);let u=0;const d=e.data,h=l.data;for(let g=0;g<s;g++){const b=g<a?ci:i;({srcPos:u}=rz({src:d,srcPos:u,dest:h,width:n,height:b,nonBlackColor:0})),r.putImageData(l,0,g*ci)}}function Rg(r,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)r[n]!==void 0&&(e[n]=r[n]);r.setLineDash!==void 0&&(e.setLineDash(r.getLineDash()),e.lineDashOffset=r.lineDashOffset)}function Gx(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:e}=r;e!=="none"&&e!==""&&(r.filter="none")}function _4(r,e){if(e)return!0;tt.singularValueDecompose2dScale(r,qi);const t=Math.fround(Is.pixelRatio*Oc.PDF_TO_CSS_UNITS);return qi[0]<=t&&qi[1]<=t}const oz=["butt","round","square"],lz=["miter","round","bevel"],cz={},A4={};var Ja,s_,o_,l_;const zS=class zS{constructor(e,t,n,i,a,{optionalContentConfig:s,markedContentStack:l=null},u,d,h){V(this,Ja);this.ctx=e,this.current=new w4(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=s,this.cachedCanvases=new sz(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(e,t,n=null){var i;return typeof t=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:i=null}){const a=this.ctx.canvas.width,s=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,s),this.ctx.fillStyle=l,n){const u=this.cachedCanvases.getCanvas("transparent",a,s);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...vn(this.compositeCtx))}this.ctx.save(),Gx(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=vn(this.ctx)}executeOperatorList(e,t,n,i,a){var k;const s=e.argsArray,l=e.fnArray;let u=t||0;const d=s.length;if(d===u)return u;const h=d-u>v4&&typeof n=="function",g=h?Date.now()+iz:0;let b=0;const y=this.commonObjs,D=this.objs;let v,w;for(;;){if(i!==void 0&&u===i.nextBreakPoint)return i.breakIt(u,n),u;if(!a||a.has(u))if(v=l[u],w=s[u]??null,v!==ym.dependency)w===null?this[v](u):this[v](u,...w);else for(const _ of w){(k=this.dependencyTracker)==null||k.recordNamedData(_,u);const A=_.startsWith("g_")?y:D;if(!A.has(_))return A.get(_,n),u}if(u++,u===d)return u;if(h&&++b>v4){if(Date.now()>g)return n(),u;b=0}}}endDrawing(){$(this,Ja,s_).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),$(this,Ja,o_).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,i=e.height??e.displayHeight;let a=Math.max(Math.hypot(t[0],t[1]),1),s=Math.max(Math.hypot(t[2],t[3]),1),l=n,u=i,d="prescale1",h,g;for(;a>2&&l>1||s>2&&u>1;){let b=l,y=u;a>2&&l>1&&(b=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),a/=l/b),s>2&&u>1&&(y=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,s/=u/y),h=this.cachedCanvases.getCanvas(d,b,y),g=h.context,g.clearRect(0,0,b,y),g.drawImage(e,0,0,l,u,0,0,b,y),e=h.canvas,l=b,u=y,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:u}}_createMaskCanvas(e,t){var F,G;const n=this.ctx,{width:i,height:a}=t,s=this.current.fillColor,l=this.current.patternFill,u=vn(n);let d,h,g,b;if((t.bitmap||t.data)&&t.count>1){const U=t.bitmap||t.data.buffer;h=JSON.stringify(l?u:[u.slice(0,4),s]),d=this._cachedBitmapsMap.get(U),d||(d=new Map,this._cachedBitmapsMap.set(U,d));const W=d.get(h);if(W&&!l){const j=Math.round(Math.min(u[0],u[2])+u[4]),X=Math.round(Math.min(u[1],u[3])+u[5]);return(F=this.dependencyTracker)==null||F.recordDependencies(e,ca.transformAndFill),{canvas:W,offsetX:j,offsetY:X}}g=W}g||(b=this.cachedCanvases.getCanvas("maskCanvas",i,a),D4(b.context,t));let y=tt.transform(u,[1/i,0,0,-1/a,0,0]);y=tt.transform(y,[1,0,0,1,0,-a]);const D=Hh.slice();tt.axialAlignedBoundingBox([0,0,i,a],y,D);const[v,w,k,_]=D,A=Math.round(k-v)||1,N=Math.round(_-w)||1,E=this.cachedCanvases.getCanvas("fillCanvas",A,N),T=E.context,R=v,M=w;T.translate(-R,-M),T.transform(...y),g||(g=this._scaleImage(b.canvas,ls(T)),g=g.img,d&&l&&d.set(h,g)),T.imageSmoothingEnabled=_4(vn(T),t.interpolate),Xx(T,g,0,0,g.width,g.height,0,0,i,a),T.globalCompositeOperation="source-in";const I=tt.transform(ls(T),[1,0,0,1,-R,-M]);return T.fillStyle=l?s.getPattern(n,this,I,wr.FILL):s,T.fillRect(0,0,i,a),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(h,E.canvas)),(G=this.dependencyTracker)==null||G.recordDependencies(e,ca.transformAndFill),{canvas:E.canvas,offsetX:Math.round(R),offsetY:Math.round(M)}}setLineWidth(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",e),this.ctx.lineCap=oz[t]}setLineJoin(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=lz[t]}setMiterLimit(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,i,a,s,l;for(const[u,d]of t)switch(u){case"LW":this.setLineWidth(e,d);break;case"LC":this.setLineCap(e,d);break;case"LJ":this.setLineJoin(e,d);break;case"ML":this.setMiterLimit(e,d);break;case"D":this.setDash(e,d[0],d[1]);break;case"RI":this.setRenderingIntent(e,d);break;case"FL":this.setFlatness(e,d);break;case"Font":this.setFont(e,d[0],d[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=d;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=d;break;case"BM":(a=this.dependencyTracker)==null||a.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=d;break;case"SMask":(s=this.dependencyTracker)==null||s.recordSimpleData("SMask",e),this.current.activeSMask=d?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(l=this.dependencyTracker)==null||l.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(d);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,t,n);this.suspendedCtx=this.ctx;const s=this.ctx=a.context;s.setTransform(this.suspendedCtx.getTransform()),Rg(this.suspendedCtx,s),az(s,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Rg(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const a=i[0],s=i[1],l=i[2]-a,u=i[3]-s;l===0||u===0||(this.genericComposeSMask(t.context,n,l,u,t.subtype,t.backdrop,t.transferMap,a,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,a,s,l,u,d,h,g){let b=e.canvas,y=u-h,D=d-g;if(s)if(y<0||D<0||y+n>b.width||D+i>b.height){const w=this.cachedCanvases.getCanvas("maskExtension",n,i),k=w.context;k.drawImage(b,-y,-D),k.globalCompositeOperation="destination-atop",k.fillStyle=s,k.fillRect(0,0,n,i),k.globalCompositeOperation="source-over",b=w.canvas,y=D=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(y,D,n,i),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(y,D,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),a==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):a==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const v=new Path2D;v.rect(u,d,n,i),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(b,y,D,n,i,u,d,n,i),t.restore()}save(e){var n;this.inSMaskMode&&Rg(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(n=this.dependencyTracker)==null||n.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Rg(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,i,a,s,l){var u;(u=this.dependencyTracker)==null||u.recordIncrementalData("transform",e),this.ctx.transform(t,n,i,a,s,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,i){let[a]=n;if(!i){a||(a=n[0]=new Path2D),this[t](e,a);return}if(this.dependencyTracker!==null){const s=t===ym.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-s,i[2]+s,i[1]-s,i[3]+s).recordDependencies(e,["transform"])}if(!(a instanceof Path2D)){const s=n[0]=new Path2D;for(let l=0,u=a.length;l<u;)switch(a[l++]){case Wx.moveTo:s.moveTo(a[l++],a[l++]);break;case Wx.lineTo:s.lineTo(a[l++],a[l++]);break;case Wx.curveTo:s.bezierCurveTo(a[l++],a[l++],a[l++],a[l++],a[l++],a[l++]);break;case Wx.closePath:s.closePath();break;default:gt(`Unrecognized drawing path operator: ${a[l-1]}`);break}a=s}tt.axialAlignedBoundingBox(i,vn(this.ctx),this.current.minMax),this[t](e,a),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){var s;const i=this.ctx,a=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&(a!=null&&a.getPattern)){const l=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=a.getPattern(i,this,ls(i),wr.STROKE),l){const u=new Path2D;u.addPath(t,i.getTransform().invertSelf().multiplySelf(l)),t=u}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);(s=this.dependencyTracker)==null||s.recordDependencies(e,ca.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(wr.STROKE,vn(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){var d,h,g;const i=this.ctx,a=this.current.fillColor,s=this.current.patternFill;let l=!1;if(s){const b=a.isModifyingCurrentTransform()?i.getTransform():null;if((d=this.dependencyTracker)==null||d.save(e),i.save(),i.fillStyle=a.getPattern(i,this,ls(i),wr.FILL),b){const y=new Path2D;y.addPath(t,i.getTransform().invertSelf().multiplySelf(b)),t=y}l=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),(h=this.dependencyTracker)==null||h.recordDependencies(e,ca.fill),l&&(i.restore(),(g=this.dependencyTracker)==null||g.restore(e)),n&&this.consumePath(e,t,u)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),(n=this.dependencyTracker)==null||n.recordDependencies(e,ca.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=cz}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=A4}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,a=n.getTransform().invertSelf();for(const{transform:s,x:l,y:u,fontSize:d,path:h}of t)h&&i.addPath(h,new DOMMatrix(s).preMultiplySelf(a).translate(l,u).scale(d,-d));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var g,b;(g=this.dependencyTracker)==null||g.recordSimpleData("font",e).recordNamedDependency(e,t);const i=this.commonObjs.get(t),a=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=i.fontMatrix||jD,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&gt("Invalid font matrix for font "+t),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const s=i.loadedName||"sans-serif",l=((b=i.systemFontInfo)==null?void 0:b.css)||`"${s}", ${i.fallbackName}`;let u="normal";i.black?u="900":i.bold&&(u="bold");const d=i.italic?"italic":"normal";let h=n;n<y4?h=y4:n>x4&&(h=x4),this.current.fontSizeScale=n/h,this.ctx.font=`${d} ${u} ${h}px ${l}`}setTextRenderingMode(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,i,a,s){var k,_,A,N;const l=this.ctx,u=this.current,d=u.font,h=u.textRenderingMode,g=u.fontSize/u.fontSizeScale,b=h&pr.FILL_STROKE_MASK,y=!!(h&pr.ADD_TO_PATH_FLAG),D=u.patternFill&&!d.missingFile,v=u.patternStroke&&!d.missingFile;let w;if((d.disableFontFace||y||D||v)&&!d.missingFile&&(w=d.getPathGenerator(this.commonObjs,t)),w&&(d.disableFontFace||D||v)){l.save(),l.translate(n,i),l.scale(g,-g),(k=this.dependencyTracker)==null||k.recordCharacterBBox(e,l,d);let E;if(b===pr.FILL||b===pr.FILL_STROKE)if(a){E=l.getTransform(),l.setTransform(...a);const T=$(this,Ja,l_).call(this,w,E,a);l.fill(T)}else l.fill(w);if(b===pr.STROKE||b===pr.FILL_STROKE)if(s){E||(E=l.getTransform()),l.setTransform(...s);const{a:T,b:R,c:M,d:I}=E,F=tt.inverseTransform(s),G=tt.transform([T,R,M,I,0,0],F);tt.singularValueDecompose2dScale(G,qi),l.lineWidth*=Math.max(qi[0],qi[1])/g,l.stroke($(this,Ja,l_).call(this,w,E,s))}else l.lineWidth/=g,l.stroke(w);l.restore()}else(b===pr.FILL||b===pr.FILL_STROKE)&&(l.fillText(t,n,i),(_=this.dependencyTracker)==null||_.recordCharacterBBox(e,l,d,g,n,i,()=>l.measureText(t))),(b===pr.STROKE||b===pr.FILL_STROKE)&&(this.dependencyTracker&&((A=this.dependencyTracker)==null||A.recordCharacterBBox(e,l,d,g,n,i,()=>l.measureText(t)).recordDependencies(e,ca.stroke)),l.strokeText(t,n,i));y&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:vn(l),x:n,y:i,fontSize:g,path:w}),(N=this.dependencyTracker)==null||N.recordCharacterBBox(e,l,d,g,n,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return Dt(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var M,I,F,G;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,ca.showText).copyDependenciesFromIncrementalOperation(e,"sameLineText").resetBBox(e),this.current.textRenderingMode&pr.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(e,t),(M=this.dependencyTracker)==null||M.recordOperation(e).recordIncrementalData("sameLineText",e);return}const a=n.fontSize;if(a===0){(I=this.dependencyTracker)==null||I.recordOperation(e);return}const s=this.ctx,l=n.fontSizeScale,u=n.charSpacing,d=n.wordSpacing,h=n.fontDirection,g=n.textHScale*h,b=t.length,y=i.vertical,D=y?1:-1,v=i.defaultVMetrics,w=a*n.fontMatrix[0],k=n.textRenderingMode===pr.FILL&&!i.disableFontFace&&!n.patternFill;s.save(),n.textMatrix&&s.transform(...n.textMatrix),s.translate(n.x,n.y+n.textRise),h>0?s.scale(g,-1):s.scale(g,1);let _,A;if(n.patternFill){s.save();const U=n.fillColor.getPattern(s,this,ls(s),wr.FILL);_=vn(s),s.restore(),s.fillStyle=U}if(n.patternStroke){s.save();const U=n.strokeColor.getPattern(s,this,ls(s),wr.STROKE);A=vn(s),s.restore(),s.strokeStyle=U}let N=n.lineWidth;const E=n.textMatrixScale;if(E===0||N===0){const U=n.textRenderingMode&pr.FILL_STROKE_MASK;(U===pr.STROKE||U===pr.FILL_STROKE)&&(N=this.getSinglePixelWidth())}else N/=E;if(l!==1&&(s.scale(l,l),N/=l),s.lineWidth=N,i.isInvalidPDFjsFont){const U=[];let W=0;for(const X of t)U.push(X.unicode),W+=X.width;const j=U.join("");if(s.fillText(j,0,0),this.dependencyTracker!==null){const X=s.measureText(j);this.dependencyTracker.recordBBox(e,this.ctx,-X.actualBoundingBoxLeft,X.actualBoundingBoxRight,-X.actualBoundingBoxAscent,X.actualBoundingBoxDescent).recordOperation(e).recordIncrementalData("sameLineText",e)}n.x+=W*w*g,s.restore(),this.compose();return}let T=0,R;for(R=0;R<b;++R){const U=t[R];if(typeof U=="number"){T+=D*U*a/1e3;continue}let W=!1;const j=(U.isSpace?d:0)+u,X=U.fontChar,P=U.accent;let B,ee,K=U.width;if(y){const ie=U.vmetric||v,z=-(U.vmetric?ie[1]:K*.5)*w,ge=ie[2]*w;K=ie?-ie[0]:K,B=z/l,ee=(T+ge)/l}else B=T/l,ee=0;let H;if(i.remeasure&&K>0){H=s.measureText(X);const ie=H.width*1e3/a*l;if(K<ie&&this.isFontSubpixelAAEnabled){const z=K/ie;W=!0,s.save(),s.scale(z,1),B/=z}else K!==ie&&(B+=(K-ie)/2e3*a/l)}if(this.contentVisible&&(U.isInFont||i.missingFile)){if(k&&!P)s.fillText(X,B,ee),(F=this.dependencyTracker)==null||F.recordCharacterBBox(e,s,H?{bbox:null}:i,a/l,B,ee,()=>H??s.measureText(X));else if(this.paintChar(e,X,B,ee,_,A),P){const ie=B+a*P.offset.x/l,z=ee-a*P.offset.y/l;this.paintChar(e,P.fontChar,ie,z,_,A)}}const J=y?K*w-j*h:K*w+j*h;T+=J,W&&s.restore()}y?n.y-=T:n.x+=T*g,s.restore(),this.compose(),(G=this.dependencyTracker)==null||G.recordOperation(e).recordIncrementalData("sameLineText",e)}showType3Text(e,t){const n=this.ctx,i=this.current,a=i.font,s=i.fontSize,l=i.fontDirection,u=a.vertical?1:-1,d=i.charSpacing,h=i.wordSpacing,g=i.textHScale*l,b=i.fontMatrix||jD,y=t.length,D=i.textRenderingMode===pr.INVISIBLE;let v,w,k,_;if(D||s===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(g,l);const A=this.dependencyTracker;for(this.dependencyTracker=A?new h1(A,e):null,v=0;v<y;++v){if(w=t[v],typeof w=="number"){_=u*w*s/1e3,this.ctx.translate(_,0),i.x+=_*g;continue}const N=(w.isSpace?h:0)+d,E=a.charProcOperatorList[w.operatorListId];E?this.contentVisible&&(this.save(),n.scale(s,s),n.transform(...b),this.executeOperatorList(E),this.restore()):gt(`Type3 character "${w.operatorListId}" is not available.`);const T=[w.width,0];tt.applyTransform(T,b),k=T[0]*s+N,n.translate(k,0),i.x+=k*g}n.restore(),A&&(this.dependencyTracker.recordNestedDependencies(),this.dependencyTracker=A)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,i,a,s,l){var d;const u=new Path2D;u.rect(i,a,s-i,l-a),this.ctx.clip(u),(d=this.dependencyTracker)==null||d.recordBBox(e,this.ctx,i,s,a,l).recordClipBox(e,this.ctx,i,s,a,l),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const i=this.baseTransform||vn(this.ctx),a={createCanvasGraphics:s=>new zS(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new h1(this.dependencyTracker,e):null)};n=new a_(t,this.ctx,a,i)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=nz(this.getObject(e,t)),this.cachedPatterns.set(t,i)),n&&(i.matrix=n),i}shadingFill(e,t){var s;if(!this.contentVisible)return;const n=this.ctx;this.save(e);const i=this._getPattern(e,t);n.fillStyle=i.getPattern(n,this,ls(n),wr.SHADING);const a=ls(n);if(a){const{width:l,height:u}=n.canvas,d=Hh.slice();tt.axialAlignedBoundingBox([0,0,l,u],a,d);const[h,g,b,y]=d;this.ctx.fillRect(h,g,b-h,y-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(s=this.dependencyTracker)==null||s.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,ca.transform).recordDependencies(e,ca.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Jt("Should not call beginInlineImage")}beginImageData(){Jt("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){var i;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=vn(this.ctx),n)){tt.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[a,s,l,u]=n,d=new Path2D;d.rect(a,s,l-a,u-s),this.ctx.clip(d),(i=this.dependencyTracker)==null||i.recordClipBox(e,this.ctx,a,l,s,u),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var A;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||kv("TODO: Support non-isolated groups."),t.knockout&&gt("Knockout groups not supported.");const i=vn(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=Hh.slice();tt.axialAlignedBoundingBox(t.bbox,vn(n),a);const s=[0,0,n.canvas.width,n.canvas.height];a=tt.intersect(a,s)||[0,0,0,0];const l=Math.floor(a[0]),u=Math.floor(a[1]),d=Math.max(Math.ceil(a[2])-l,1),h=Math.max(Math.ceil(a[3])-u,1);this.current.startNewPathAndClipBox([0,0,d,h]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(g,d,h),y=b.context;y.translate(-l,-u),y.transform(...i);let D=new Path2D;const[v,w,k,_]=t.bbox;if(D.rect(v,w,k-v,_-w),t.matrix){const N=new Path2D;N.addPath(D,new DOMMatrix(t.matrix)),D=N}y.clip(D),t.smask&&this.smaskStack.push({canvas:b.canvas,context:y,offsetX:l,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(l,u),n.save()),Rg(n,y),this.ctx=y,(A=this.dependencyTracker)==null||A.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){var a;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(a=this.dependencyTracker)==null||a.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const s=vn(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...s);const l=Hh.slice();tt.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],s,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,n,i,a,s){if($(this,Ja,s_).call(this),Gx(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const l=n[2]-n[0],u=n[3]-n[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=l,n[3]=u,tt.singularValueDecompose2dScale(vn(this.ctx),qi);const{viewportScale:d}=this,h=Math.ceil(l*this.outputScaleX*d),g=Math.ceil(u*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(h,g);const{canvas:b,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(t,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(qi[0],0,0,-qi[1],0,u*qi[1]),Gx(this.ctx)}else{Gx(this.ctx),this.endPath(e);const d=new Path2D;d.rect(n[0],n[1],l,u),this.ctx.clip(d)}}this.current=new w4(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...a)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),$(this,Ja,o_).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var l;if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const i=this.ctx,a=this._createMaskCanvas(e,t),s=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,a.offsetX,a.offsetY),(l=this.dependencyTracker)==null||l.resetBBox(e).recordBBox(e,this.ctx,a.offsetX,a.offsetX+s.width,a.offsetY,a.offsetY+s.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,i=0,a=0,s,l){var g,b,y;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const u=this.ctx;u.save();const d=vn(u);u.transform(n,i,a,s,0,0);const h=this._createMaskCanvas(e,t);u.setTransform(1,0,0,1,h.offsetX-d[4],h.offsetY-d[5]),(g=this.dependencyTracker)==null||g.resetBBox(e);for(let D=0,v=l.length;D<v;D+=2){const w=tt.transform(d,[n,i,a,s,l[D],l[D+1]]);u.drawImage(h.canvas,w[4],w[5]),(b=this.dependencyTracker)==null||b.recordBBox(e,this.ctx,w[4],w[4]+h.canvas.width,w[5],w[5]+h.canvas.height)}u.restore(),this.compose(),(y=this.dependencyTracker)==null||y.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var s,l,u;if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,a=this.current.patternFill;(s=this.dependencyTracker)==null||s.resetBBox(e).recordDependencies(e,ca.transformAndFill);for(const d of t){const{data:h,width:g,height:b,transform:y}=d,D=this.cachedCanvases.getCanvas("maskCanvas",g,b),v=D.context;v.save();const w=this.getObject(e,h,d);D4(v,w),v.globalCompositeOperation="source-in",v.fillStyle=a?i.getPattern(v,this,ls(n),wr.FILL):i,v.fillRect(0,0,g,b),v.restore(),n.save(),n.transform(...y),n.scale(1,-1),Xx(n,D.canvas,0,0,g,b,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,n,0,g,0,b),n.restore()}this.compose(),(u=this.dependencyTracker)==null||u.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){gt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,i,a){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){gt("Dependent image isn't ready yet");return}const l=s.width,u=s.height,d=[];for(let h=0,g=a.length;h<g;h+=2)d.push({transform:[n,0,0,i,a[h],a[h+1]],x:0,y:0,w:l,h:u});this.paintInlineImageXObjectGroup(e,s,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",n,i),s=a.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",a.canvas}paintInlineImageXObject(e,t){var d;if(!this.contentVisible)return;const n=t.width,i=t.height,a=this.ctx;this.save(e);const{filter:s}=a;s!=="none"&&s!==""&&(a.filter="none"),a.scale(1/n,-1/i);let l;if(t.bitmap)l=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)l=t;else{const g=this.cachedCanvases.getCanvas("inlineImage",n,i).context;k4(g,t),l=this.applyTransferMapsToCanvas(g)}const u=this._scaleImage(l,ls(a));a.imageSmoothingEnabled=_4(vn(a),t.interpolate),(d=this.dependencyTracker)==null||d.resetBBox(e).recordBBox(e,a,0,n,-i,0).recordDependencies(e,ca.imageXObject).recordOperation(e),Xx(a,u.img,0,0,u.paintWidth,u.paintHeight,0,-i,n,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var s,l,u;if(!this.contentVisible)return;const i=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const d=t.width,h=t.height,b=this.cachedCanvases.getCanvas("inlineImage",d,h).context;k4(b,t),a=this.applyTransferMapsToCanvas(b)}(s=this.dependencyTracker)==null||s.resetBBox(e);for(const d of n)i.save(),i.transform(...d.transform),i.scale(1,-1),Xx(i,a,d.x,d.y,d.w,d.h,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,i,0,1,-1,0),i.restore();(u=this.dependencyTracker)==null||u.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,ca.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){var s,l;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const a=this.ctx;this.pendingClip?(i||(this.pendingClip===A4?a.clip(t,"evenodd"):a.clip(t)),this.pendingClip=null,(s=this.dependencyTracker)==null||s.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(l=this.dependencyTracker)==null||l.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=vn(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:a}=this.ctx.getTransform();let s,l;if(n===0&&i===0){const u=Math.abs(t),d=Math.abs(a);if(u===d)if(e===0)s=l=1/u;else{const h=u*e;s=l=h<1?1/h:1}else if(e===0)s=1/u,l=1/d;else{const h=u*e,g=d*e;s=h<1?1/h:1,l=g<1?1/g:1}}else{const u=Math.abs(t*a-n*i),d=Math.hypot(t,n),h=Math.hypot(i,a);if(e===0)s=h/u,l=d/u;else{const g=e*u;s=h>g?h/g:1,l=d>g?d/g:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:i}}=this,[a,s]=this.getScaleForStroking();if(a===s){n.lineWidth=(i||1)*a,n.stroke(e);return}const l=n.getLineDash();t&&n.save(),n.scale(a,s),rD.a=1/a,rD.d=1/s;const u=new Path2D;if(u.addPath(e,rD),l.length>0){const d=Math.max(a,s);n.setLineDash(l.map(h=>h/d)),n.lineDashOffset/=d}n.lineWidth=i||1,n.stroke(u),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Ja=new WeakSet,s_=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},o_=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},l_=function(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i};let Yh=zS;for(const r in ym)Yh.prototype[r]!==void 0&&(Yh.prototype[ym[r]]=Yh.prototype[r]);var Zm,Jm;class js{static get workerPort(){return m(this,Zm)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");L(this,Zm,e)}static get workerSrc(){return m(this,Jm)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");L(this,Jm,e)}}Zm=new WeakMap,Jm=new WeakMap,V(js,Zm,null),V(js,Jm,"");var Ef,eb;class uz{constructor({parsedData:e,rawData:t}){V(this,Ef);V(this,eb);L(this,Ef,e),L(this,eb,t)}getRaw(){return m(this,eb)}get(e){return m(this,Ef).get(e)??null}[Symbol.iterator](){return m(this,Ef).entries()}}Ef=new WeakMap,eb=new WeakMap;const Mh=Symbol("INTERNAL");var tb,nb,rb,Tf;class dz{constructor(e,{name:t,intent:n,usage:i,rbGroups:a}){V(this,tb,!1);V(this,nb,!1);V(this,rb,!1);V(this,Tf,!0);L(this,tb,!!(e&Hi.DISPLAY)),L(this,nb,!!(e&Hi.PRINT)),this.name=t,this.intent=n,this.usage=i,this.rbGroups=a}get visible(){if(m(this,rb))return m(this,Tf);if(!m(this,Tf))return!1;const{print:e,view:t}=this.usage;return m(this,tb)?(t==null?void 0:t.viewState)!=="OFF":m(this,nb)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Mh&&Jt("Internal method `_setVisible` called."),L(this,rb,n),L(this,Tf,t)}}tb=new WeakMap,nb=new WeakMap,rb=new WeakMap,Tf=new WeakMap;var ic,Qt,Cf,Nf,ib,c_;class hz{constructor(e,t=Hi.DISPLAY){V(this,ib);V(this,ic,null);V(this,Qt,new Map);V(this,Cf,null);V(this,Nf,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,L(this,Nf,e.order);for(const n of e.groups)m(this,Qt).set(n.id,new dz(t,n));if(e.baseState==="OFF")for(const n of m(this,Qt).values())n._setVisible(Mh,!1);for(const n of e.on)m(this,Qt).get(n)._setVisible(Mh,!0);for(const n of e.off)m(this,Qt).get(n)._setVisible(Mh,!1);L(this,Cf,this.getHash())}}isVisible(e){if(m(this,Qt).size===0)return!0;if(!e)return kv("Optional content group not defined."),!0;if(e.type==="OCG")return m(this,Qt).has(e.id)?m(this,Qt).get(e.id).visible:(gt(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return $(this,ib,c_).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!m(this,Qt).has(t))return gt(`Optional content group not found: ${t}`),!0;if(m(this,Qt).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!m(this,Qt).has(t))return gt(`Optional content group not found: ${t}`),!0;if(!m(this,Qt).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!m(this,Qt).has(t))return gt(`Optional content group not found: ${t}`),!0;if(!m(this,Qt).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!m(this,Qt).has(t))return gt(`Optional content group not found: ${t}`),!0;if(m(this,Qt).get(t).visible)return!1}return!0}return gt(`Unknown optional content policy ${e.policy}.`),!0}return gt(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var a;const i=m(this,Qt).get(e);if(!i){gt(`Optional content group not found: ${e}`);return}if(n&&t&&i.rbGroups.length)for(const s of i.rbGroups)for(const l of s)l!==e&&((a=m(this,Qt).get(l))==null||a._setVisible(Mh,!1,!0));i._setVisible(Mh,!!t,!0),L(this,ic,null)}setOCGState({state:e,preserveRB:t}){let n;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const a=m(this,Qt).get(i);if(a)switch(n){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!a.visible,t);break}}L(this,ic,null)}get hasInitialVisibility(){return m(this,Cf)===null||this.getHash()===m(this,Cf)}getOrder(){return m(this,Qt).size?m(this,Nf)?m(this,Nf).slice():[...m(this,Qt).keys()]:null}getGroup(e){return m(this,Qt).get(e)||null}getHash(){if(m(this,ic)!==null)return m(this,ic);const e=new _F;for(const[t,n]of m(this,Qt))e.update(`${t}:${n.visible}`);return L(this,ic,e.hexdigest())}[Symbol.iterator](){return m(this,Qt).entries()}}ic=new WeakMap,Qt=new WeakMap,Cf=new WeakMap,Nf=new WeakMap,ib=new WeakSet,c_=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const a=e[i];let s;if(Array.isArray(a))s=$(this,ib,c_).call(this,a);else if(m(this,Qt).has(a))s=m(this,Qt).get(a).visible;else return gt(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return n==="And"};class fz{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Ln(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:s,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=l,(a==null?void 0:a.length)>0){const u=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((u,d)=>{this._onReceiveData({begin:u,chunk:d})}),e.addProgressListener((u,d)=>{this._onProgress({loaded:u,total:d})}),e.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(n),!0)});Ln(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,i,a;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(a=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||a.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ln(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new pz(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new gz(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class pz{constructor(e,t,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=hS(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class gz{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function mz(r){let e=!0,t=n("filename\\*","i").exec(r);if(t){t=t[1];let h=l(t);return h=unescape(h),h=u(h),h=d(h),a(h)}if(t=s(r),t){const h=d(t);return a(h)}if(t=n("filename","i").exec(r),t){t=t[1];let h=l(t);return h=d(h),a(h)}function n(h,g){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function i(h,g){if(h){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const b=new TextDecoder(h,{fatal:!0}),y=ly(g);g=b.decode(y),e=!1}catch{}}return g}function a(h){return e&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),e&&(h=i("iso-8859-1",h))),h}function s(h){const g=[];let b;const y=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=y.exec(h))!==null;){let[,v,w,k]=b;if(v=parseInt(v,10),v in g){if(v===0)break;continue}g[v]=[w,k]}const D=[];for(let v=0;v<g.length&&v in g;++v){let[w,k]=g[v];k=l(k),w&&(k=unescape(k),v===0&&(k=u(k))),D.push(k)}return D.join("")}function l(h){if(h.startsWith('"')){const g=h.slice(1).split('\\"');for(let b=0;b<g.length;++b){const y=g[b].indexOf('"');y!==-1&&(g[b]=g[b].slice(0,y),g.length=b+1),g[b]=g[b].replaceAll(/\\(.)/g,"$1")}h=g.join('"')}return h}function u(h){const g=h.indexOf("'");if(g===-1)return h;const b=h.slice(0,g),D=h.slice(g+1).replace(/^[^']*'/,"");return i(b,D)}function d(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,b,y,D){if(y==="q"||y==="Q")return D=D.replaceAll("_"," "),D=D.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,w){return String.fromCharCode(parseInt(w,16))}),i(b,D);try{D=atob(D)}catch{}return i(b,D)})}return""}function OF(r,e){const t=new Headers;if(!r||!e||typeof e!="object")return t;for(const n in e){const i=e[n];i!==void 0&&t.append(n,i)}return t}function Av(r){var e;return((e=URL.parse(r))==null?void 0:e.origin)??null}function MF({responseHeaders:r,isHttp:e,rangeChunkSize:t,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(r.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*t)||n||!e||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function LF(r){const e=r.get("Content-Disposition");if(e){let t=mz(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(hS(t))return t}return null}function hy(r,e){return new l1(`Unexpected server response (${r}) while retrieving PDF "${e}".`,r,r===404||r===0&&e.startsWith("file:"))}function BF(r){return r===200||r===206}function PF(r,e,t){return{method:"GET",headers:r,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function zF(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(gt(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class bz{constructor(e){We(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=OF(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ln(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new yz(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new xz(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class yz{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,PF(n,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=Av(a.url),!BF(a.status))throw hy(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const s=a.headers,{allowRangeRequests:l,suggestedLength:u}=MF({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=u||this._contentLength,this._filename=LF(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ic("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:zF(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class xz{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${t}-${n-1}`);const s=i.url;fetch(s,PF(a,this._withCredentials,this._abortController)).then(l=>{const u=Av(l.url);if(u!==e._responseOrigin)throw new Error(`Expected range response-origin "${u}" to match "${e._responseOrigin}".`);if(!BF(l.status))throw hy(l.status,s);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:zF(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const iD=200,aD=206;function vz(r){const e=r.response;return typeof e!="string"?e:ly(e).buffer}class wz{constructor({url:e,httpHeaders:t,withCredentials:n}){We(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=OF(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[a,s]of this.headers)t.setRequestHeader(a,s);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=aD):i.expectedStatus=iD,t.responseType="arraybuffer",Ln(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var i;const n=this.pendingRequests[e];n&&((i=n.onProgress)==null||i.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}const a=i.status||iD;if(!(a===iD&&n.expectedStatus===aD)&&a!==n.expectedStatus){n.onError(i.status);return}const l=vz(i);if(a===aD){const u=i.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);d?n.onDone({begin:parseInt(d[1],10),chunk:l}):(gt('Missing or invalid "Content-Range" header.'),n.onError(0))}else l?n.onDone({begin:0,chunk:l}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class kz{constructor(e){this._source=e,this._manager=new wz(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ln(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Dz(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new _z(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Dz{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Av(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[u,...d]=l.split(": ");return[u,d.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:s}=MF({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=LF(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=hy(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class _z{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Av((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=hy(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Az=/^[a-z][a-z0-9\-+.]+:/i;function Sz(r){if(Az.test(r))return new URL(r);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(r))}class Ez{constructor(e){this.source=e,this.url=Sz(e.url),Ln(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ln(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Tz(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Cz(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Tz{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=hy(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ic("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Cz{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const jg=Symbol("INITIAL_DATA");var Ui,ab,u_;class WF{constructor(){V(this,ab);V(this,Ui,Object.create(null))}get(e,t=null){if(t){const i=$(this,ab,u_).call(this,e);return i.promise.then(()=>t(i.data)),null}const n=m(this,Ui)[e];if(!n||n.data===jg)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=m(this,Ui)[e];return!!t&&t.data!==jg}delete(e){const t=m(this,Ui)[e];return!t||t.data===jg?!1:(delete m(this,Ui)[e],!0)}resolve(e,t=null){const n=$(this,ab,u_).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in m(this,Ui)){const{data:n}=m(this,Ui)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}L(this,Ui,Object.create(null))}*[Symbol.iterator](){for(const e in m(this,Ui)){const{data:t}=m(this,Ui)[e];t!==jg&&(yield[e,t])}}}Ui=new WeakMap,ab=new WeakSet,u_=function(e){var t;return(t=m(this,Ui))[e]||(t[e]={...Promise.withResolvers(),data:jg})};const Nz=1e5,S4=30;var wR,ac,oi,sb,ob,zu,Co,lb,cb,Wu,Uf,Rf,sc,jf,ub,Ff,Hu,db,hb,If,qu,fb,oc,Of,al,HF,qF,d_,Gi,R0,h_,VF,XF;const Vn=class Vn{constructor({textContentSource:e,container:t,viewport:n}){V(this,al);V(this,ac,Promise.withResolvers());V(this,oi,null);V(this,sb,!1);V(this,ob,!!((wR=globalThis.FontInspector)!=null&&wR.enabled));V(this,zu,null);V(this,Co,null);V(this,lb,0);V(this,cb,0);V(this,Wu,null);V(this,Uf,null);V(this,Rf,0);V(this,sc,0);V(this,jf,Object.create(null));V(this,ub,[]);V(this,Ff,null);V(this,Hu,[]);V(this,db,new WeakMap);V(this,hb,null);var u;if(e instanceof ReadableStream)L(this,Ff,e);else if(typeof e=="object")L(this,Ff,new ReadableStream({start(d){d.enqueue(e),d.close()}}));else throw new Error('No "textContentSource" parameter specified.');L(this,oi,L(this,Uf,t)),L(this,sc,n.scale*Is.pixelRatio),L(this,Rf,n.rotation),L(this,Co,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:a,pageX:s,pageY:l}=n.rawDims;L(this,hb,[1,0,0,-1,-s,l+a]),L(this,cb,i),L(this,lb,a),$(u=Vn,Gi,VF).call(u),Ud(t,n),m(this,ac).promise.finally(()=>{m(Vn,Of).delete(this),L(this,Co,null),L(this,jf,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Ar.platform;return Dt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{m(this,Wu).read().then(({value:t,done:n})=>{if(n){m(this,ac).resolve();return}m(this,zu)??L(this,zu,t.lang),Object.assign(m(this,jf),t.styles),$(this,al,HF).call(this,t.items),e()},m(this,ac).reject)};return L(this,Wu,m(this,Ff).getReader()),m(Vn,Of).add(this),e(),m(this,ac).promise}update({viewport:e,onBefore:t=null}){var a;const n=e.scale*Is.pixelRatio,i=e.rotation;if(i!==m(this,Rf)&&(t==null||t(),L(this,Rf,i),Ud(m(this,Uf),{rotation:i})),n!==m(this,sc)){t==null||t(),L(this,sc,n);const s={div:null,properties:null,ctx:$(a=Vn,Gi,R0).call(a,m(this,zu))};for(const l of m(this,Hu))s.properties=m(this,db).get(l),s.div=l,$(this,al,d_).call(this,s)}}cancel(){var t;const e=new Ic("TextLayer task cancelled.");(t=m(this,Wu))==null||t.cancel(e).catch(()=>{}),L(this,Wu,null),m(this,ac).reject(e)}get textDivs(){return m(this,Hu)}get textContentItemsStr(){return m(this,ub)}static cleanup(){if(!(m(this,Of).size>0)){m(this,If).clear();for(const{canvas:e}of m(this,qu).values())e.remove();m(this,qu).clear()}}};ac=new WeakMap,oi=new WeakMap,sb=new WeakMap,ob=new WeakMap,zu=new WeakMap,Co=new WeakMap,lb=new WeakMap,cb=new WeakMap,Wu=new WeakMap,Uf=new WeakMap,Rf=new WeakMap,sc=new WeakMap,jf=new WeakMap,ub=new WeakMap,Ff=new WeakMap,Hu=new WeakMap,db=new WeakMap,hb=new WeakMap,If=new WeakMap,qu=new WeakMap,fb=new WeakMap,oc=new WeakMap,Of=new WeakMap,al=new WeakSet,HF=function(e){var i,a;if(m(this,sb))return;(a=m(this,Co)).ctx??(a.ctx=$(i=Vn,Gi,R0).call(i,m(this,zu)));const t=m(this,Hu),n=m(this,ub);for(const s of e){if(t.length>Nz){gt("Ignoring additional textDivs for performance reasons."),L(this,sb,!0);return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const l=m(this,oi);L(this,oi,document.createElement("span")),m(this,oi).classList.add("markedContent"),s.id&&m(this,oi).setAttribute("id",`${s.id}`),l.append(m(this,oi))}else s.type==="endMarkedContent"&&L(this,oi,m(this,oi).parentNode);continue}n.push(s.str),$(this,al,qF).call(this,s)}},qF=function(e){var v;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};m(this,Hu).push(t);const i=tt.transform(m(this,hb),e.transform);let a=Math.atan2(i[1],i[0]);const s=m(this,jf)[e.fontName];s.vertical&&(a+=Math.PI/2);let l=m(this,ob)&&s.fontSubstitution||s.fontFamily;l=Vn.fontFamilyMap.get(l)||l;const u=Math.hypot(i[2],i[3]),d=u*$(v=Vn,Gi,XF).call(v,l,s,m(this,zu));let h,g;a===0?(h=i[4],g=i[5]-d):(h=i[4]+d*Math.sin(a),g=i[5]-d*Math.cos(a));const b="calc(var(--total-scale-factor) *",y=t.style;m(this,oi)===m(this,Uf)?(y.left=`${(100*h/m(this,cb)).toFixed(2)}%`,y.top=`${(100*g/m(this,lb)).toFixed(2)}%`):(y.left=`${b}${h.toFixed(2)}px)`,y.top=`${b}${g.toFixed(2)}px)`),y.fontSize=`${b}${(m(Vn,oc)*u).toFixed(2)}px)`,y.fontFamily=l,n.fontSize=u,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,m(this,ob)&&(t.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),a!==0&&(n.angle=a*(180/Math.PI));let D=!1;if(e.str.length>1)D=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),k=Math.abs(e.transform[3]);w!==k&&Math.max(w,k)/Math.min(w,k)>1.5&&(D=!0)}if(D&&(n.canvasWidth=s.vertical?e.height:e.width),m(this,db).set(t,n),m(this,Co).div=t,m(this,Co).properties=n,$(this,al,d_).call(this,m(this,Co)),n.hasText&&m(this,oi).append(t),n.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),m(this,oi).append(w)}},d_=function(e){var l;const{div:t,properties:n,ctx:i}=e,{style:a}=t;let s="";if(m(Vn,oc)>1&&(s=`scale(${1/m(Vn,oc)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=a,{canvasWidth:d,fontSize:h}=n;$(l=Vn,Gi,h_).call(l,i,h*m(this,sc),u);const{width:g}=i.measureText(t.textContent);g>0&&(s=`scaleX(${d*m(this,sc)/g}) ${s}`)}n.angle!==0&&(s=`rotate(${n.angle}deg) ${s}`),s.length>0&&(a.transform=s)},Gi=new WeakSet,R0=function(e=null){let t=m(this,qu).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),m(this,qu).set(e,t),m(this,fb).set(t,{size:0,family:""})}return t},h_=function(e,t,n){const i=m(this,fb).get(e);t===i.size&&n===i.family||(e.font=`${t}px ${n}`,i.size=t,i.family=n)},VF=function(){if(m(this,oc)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),L(this,oc,e.getBoundingClientRect().height),e.remove()},XF=function(e,t,n){const i=m(this,If).get(e);if(i)return i;const a=$(this,Gi,R0).call(this,n);a.canvas.width=a.canvas.height=S4,$(this,Gi,h_).call(this,a,S4,e);const s=a.measureText(""),l=s.fontBoundingBoxAscent,u=Math.abs(s.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let d=.8;return l?d=l/(l+u):(Ar.platform.isFirefox&&gt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?d=t.ascent:t.descent&&(d=1+t.descent)),m(this,If).set(e,d),d},V(Vn,Gi),V(Vn,If,new Map),V(Vn,qu,new Map),V(Vn,fb,new WeakMap),V(Vn,oc,null),V(Vn,Of,new Set);let xm=Vn;class vm{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function i(a){var u;if(!a)return;let s=null;const l=a.name;if(l==="#text")s=a.value;else if(vm.shouldBuildText(l))(u=a==null?void 0:a.attributes)!=null&&u.textContent?s=a.attributes.textContent:a.value&&(s=a.value);else return;if(s!==null&&t.push({str:s}),!!a.children)for(const d of a.children)i(d)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const Uz=100;function GF(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const e=new f_,{docId:t}=e,n=r.url?B7(r.url):null,i=r.data?P7(r.data):null,a=r.httpHeaders||null,s=r.withCredentials===!0,l=r.password??null,u=r.range instanceof $F?r.range:null,d=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let h=r.worker instanceof wm?r.worker:null;const g=r.verbosity,b=typeof r.docBaseUrl=="string"&&!Dv(r.docBaseUrl)?r.docBaseUrl:null,y=qx(r.cMapUrl),D=r.cMapPacked!==!1,v=r.CMapReaderFactory||(Hr?$7:p4),w=qx(r.iccUrl),k=qx(r.standardFontDataUrl),_=r.StandardFontDataFactory||(Hr?Y7:g4),A=qx(r.wasmUrl),N=r.WasmFactory||(Hr?K7:m4),E=r.stopAtErrors!==!0,T=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,R=r.isEvalSupported!==!1,M=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!Hr,I=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!Hr&&(Ar.platform.isFirefox||!globalThis.chrome),F=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,G=typeof r.disableFontFace=="boolean"?r.disableFontFace:Hr,U=r.fontExtraProperties===!0,W=r.enableXfa===!0,j=r.ownerDocument||globalThis.document,X=r.disableRange===!0,P=r.disableStream===!0,B=r.disableAutoFetch===!0,ee=r.pdfBug===!0,K=r.CanvasFactory||(Hr?G7:q7),H=r.FilterFactory||(Hr?X7:V7),J=r.enableHWA===!0,ie=r.useWasm!==!1,z=u?u.length:r.length??NaN,ge=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!Hr&&!G,ve=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(v===p4&&_===g4&&N===m4&&y&&k&&A&&Pg(y,document.baseURI)&&Pg(k,document.baseURI)&&Pg(A,document.baseURI)),je=null;b7(g);const Ie={canvasFactory:new K({ownerDocument:j,enableHWA:J}),filterFactory:new H({docId:t,ownerDocument:j}),cMapReaderFactory:ve?null:new v({baseUrl:y,isCompressed:D}),standardFontDataFactory:ve?null:new _({baseUrl:k}),wasmFactory:ve?null:new N({baseUrl:A})};h||(h=wm.create({verbosity:g,port:js.workerPort}),e._worker=h);const Pe={docId:t,apiVersion:"5.4.149",data:i,password:l,disableAutoFetch:B,rangeChunkSize:d,length:z,docBaseUrl:b,enableXfa:W,evaluatorOptions:{maxImageSize:T,disableFontFace:G,ignoreErrors:E,isEvalSupported:R,isOffscreenCanvasSupported:M,isImageDecoderSupported:I,canvasMaxAreaInBytes:F,fontExtraProperties:U,useSystemFonts:ge,useWasm:ie,useWorkerFetch:ve,cMapUrl:y,iccUrl:w,standardFontDataUrl:k,wasmUrl:A}},fe={ownerDocument:j,pdfBug:ee,styleElement:je,loadingParams:{disableAutoFetch:B,enableXfa:W}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ue=h.messageHandler.sendWithPromise("GetDocRequest",Pe,i?[i.buffer]:null);let be;if(u)be=new fz(u,{disableRange:X,disableStream:P});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Fe=Pg(n)?bz:Hr?Ez:kz;be=new Fe({url:n,length:z,httpHeaders:a,withCredentials:s,rangeChunkSize:d,disableRange:X,disableStream:P})}return Ue.then(Fe=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const $e=new Xg(t,Fe,h.port),O=new Fz($e,e,be,fe,Ie,J);e._transport=O,$e.send("Ready",null)})}).catch(e._capability.reject),e}var j1;const F1=class F1{constructor(){We(this,"_capability",Promise.withResolvers());We(this,"_transport",null);We(this,"_worker",null);We(this,"docId",`d${qn(F1,j1)._++}`);We(this,"destroyed",!1);We(this,"onPassword",null);We(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(a){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,a}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};j1=new WeakMap,V(F1,j1,0);let f_=F1;var Vu,pb,gb,mb,bb;class $F{constructor(e,t,n=!1,i=null){V(this,Vu,Promise.withResolvers());V(this,pb,[]);V(this,gb,[]);V(this,mb,[]);V(this,bb,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){m(this,bb).push(e)}addProgressListener(e){m(this,mb).push(e)}addProgressiveReadListener(e){m(this,gb).push(e)}addProgressiveDoneListener(e){m(this,pb).push(e)}onDataRange(e,t){for(const n of m(this,bb))n(e,t)}onDataProgress(e,t){m(this,Vu).promise.then(()=>{for(const n of m(this,mb))n(e,t)})}onDataProgressiveRead(e){m(this,Vu).promise.then(()=>{for(const t of m(this,gb))t(e)})}onDataProgressiveDone(){m(this,Vu).promise.then(()=>{for(const e of m(this,pb))e()})}transportReady(){m(this,Vu).resolve()}requestDataRange(e,t){Jt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Vu=new WeakMap,pb=new WeakMap,gb=new WeakMap,mb=new WeakMap,bb=new WeakMap;class Rz{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Dt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var No,Xu,Qg;class jz{constructor(e,t,n,i=!1){V(this,Xu);V(this,No,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new d4:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new WF,this._intentStates=new Map,this.destroyed=!1,this.recordedGroups=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:a=!1}={}){return new uy({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Dt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:i="display",annotationMode:a=Ol.ENABLE,transform:s=null,background:l=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:h=null,printAnnotationStorage:g=null,isEditing:b=!1,recordOperations:y=!1,filteredOperationIndexes:D=null}){var M,I,F;(M=this._stats)==null||M.time("Overall");const v=this._transport.getRenderingIntent(i,a,g,b),{renderingIntent:w,cacheKey:k}=v;L(this,No,!1),u||(u=this._transport.getOptionalContentConfig(w));let _=this._intentStates.get(k);_||(_=Object.create(null),this._intentStates.set(k,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);const A=!!(w&Hi.PRINT);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(I=this._stats)==null||I.time("Page Request"),this._pumpOperatorList(v));const N=!this.recordedGroups&&(y||this._pdfBug&&((F=globalThis.StepperManager)==null?void 0:F.enabled)),E=G=>{var U,W,j;if(_.renderTasks.delete(T),N){const X=(U=T.gfx)==null?void 0:U.dependencyTracker.take();X?((W=T.stepper)==null||W.setOperatorGroups(X),y&&(this.recordedGroups=X)):y&&(this.recordedGroups=[])}A&&L(this,No,!0),$(this,Xu,Qg).call(this),G?(T.capability.reject(G),this._abortOperatorList({intentState:_,reason:G instanceof Error?G:new Error(G)})):T.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(j=globalThis.Stats)!=null&&j.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},T=new p_({callback:E,params:{canvas:t,canvasContext:e,dependencyTracker:N?new Q7(t):null,viewport:n,transform:s,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,filteredOperationIndexes:D});(_.renderTasks||(_.renderTasks=new Set)).add(T);const R=T.task;return Promise.all([_.displayReadyCapability.promise,u]).then(([G,U])=>{var W;if(this.destroyed){E();return}if((W=this._stats)==null||W.time("Rendering"),!(U.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");T.initializeGraphics({transparency:G,optionalContentConfig:U}),T.operatorListChanged()}).catch(E),R}getOperatorList({intent:e="display",annotationMode:t=Ol.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var d;function a(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(u))}const s=this._transport.getRenderingIntent(e,t,n,i,!0);let l=this._intentStates.get(s.cacheKey);l||(l=Object.create(null),this._intentStates.set(s.cacheKey,l));let u;return l.opListReadCapability||(u=Object.create(null),u.operatorListChanged=a,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(u),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(s)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>vm.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,i){function a(){s.read().then(function({value:u,done:d}){if(d){n(l);return}l.lang??(l.lang=u.lang),Object.assign(l.styles,u.styles),l.items.push(...u.items),a()},i)}const s=t.getReader(),l={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),L(this,No,!1),Promise.all(e)}cleanup(e=!1){L(this,No,!0);const t=$(this,Xu,Qg).call(this);return e&&t&&this._stats&&(this._stats=new d4),t}_startRenderPage(e,t){var i,a;const n=this._intentStates.get(t);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(a=n.displayReadyCapability)==null||a.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&$(this,Xu,Qg).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:i}){const{map:a,transfer:s}=n,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:a,modifiedIds:i},s).getReader(),d=this._intentStates.get(t);d.streamReader=u;const h=()=>{u.read().then(({value:g,done:b})=>{if(b){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,d),h())},g=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const b of d.renderTasks)b.operatorListChanged();$(this,Xu,Qg).call(this)}if(d.displayReadyCapability)d.displayReadyCapability.reject(g);else if(d.opListReadCapability)d.opListReadCapability.reject(g);else throw g}})};h()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof dS){let i=Uz;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Ic(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}No=new WeakMap,Xu=new WeakSet,Qg=function(){if(!m(this,No)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),L(this,No,!1),!0};var lc,za,Uo,Gu,I1,$u,Yu,Xr,j0,YF,KF,Zg,Mf,F0;const hn=class hn{constructor({name:e=null,port:t=null,verbosity:n=y7()}={}){V(this,Xr);V(this,lc,Promise.withResolvers());V(this,za,null);V(this,Uo,null);V(this,Gu,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(m(hn,Yu).has(t))throw new Error("Cannot use more than one PDFWorker per port.");m(hn,Yu).set(t,this),$(this,Xr,YF).call(this,t)}else $(this,Xr,KF).call(this)}get promise(){return m(this,lc).promise}get port(){return m(this,Uo)}get messageHandler(){return m(this,za)}destroy(){var e,t;this.destroyed=!0,(e=m(this,Gu))==null||e.terminate(),L(this,Gu,null),m(hn,Yu).delete(m(this,Uo)),L(this,Uo,null),(t=m(this,za))==null||t.destroy(),L(this,za,null)}static create(e){const t=m(this,Yu).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new hn(e)}static get workerSrc(){if(js.workerSrc)return js.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Dt(this,"_setupFakeWorkerGlobal",(async()=>m(this,Mf,F0)?m(this,Mf,F0):(await import(this.workerSrc)).WorkerMessageHandler)())}};lc=new WeakMap,za=new WeakMap,Uo=new WeakMap,Gu=new WeakMap,I1=new WeakMap,$u=new WeakMap,Yu=new WeakMap,Xr=new WeakSet,j0=function(){m(this,lc).resolve(),m(this,za).send("configure",{verbosity:this.verbosity})},YF=function(e){L(this,Uo,e),L(this,za,new Xg("main","worker",e)),m(this,za).on("ready",()=>{}),$(this,Xr,j0).call(this)},KF=function(){if(m(hn,$u)||m(hn,Mf,F0)){$(this,Xr,Zg).call(this);return}let{workerSrc:e}=hn;try{hn._isSameOrigin(window.location,e)||(e=hn._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Xg("main","worker",t),i=()=>{a.abort(),n.destroy(),t.terminate(),this.destroyed?m(this,lc).reject(new Error("Worker was destroyed")):$(this,Xr,Zg).call(this)},a=new AbortController;t.addEventListener("error",()=>{m(this,Gu)||i()},{signal:a.signal}),n.on("test",l=>{if(a.abort(),this.destroyed||!l){i();return}L(this,za,n),L(this,Uo,t),L(this,Gu,t),$(this,Xr,j0).call(this)}),n.on("ready",l=>{if(a.abort(),this.destroyed){i();return}try{s()}catch{$(this,Xr,Zg).call(this)}});const s=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};s();return}catch{kv("The worker has been disabled.")}$(this,Xr,Zg).call(this)},Zg=function(){m(hn,$u)||(gt("Setting up fake worker."),L(hn,$u,!0)),hn._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){m(this,lc).reject(new Error("Worker was destroyed"));return}const t=new H7;L(this,Uo,t);const n=`fake${qn(hn,I1)._++}`,i=new Xg(n+"_worker",n,t);e.setup(i,t),L(this,za,new Xg(n,n+"_worker",t)),$(this,Xr,j0).call(this)}).catch(e=>{m(this,lc).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Mf=new WeakSet,F0=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},V(hn,Mf),V(hn,I1,0),V(hn,$u,!1),V(hn,Yu,new WeakMap),Hr&&(L(hn,$u,!0),js.workerSrc||(js.workerSrc="./pdf.worker.mjs")),hn._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const i=new URL(t,n);return n.origin===i.origin},hn._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},hn.fromPort=e=>{if(N7("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return hn.create(e)};let wm=hn;var Ro,Ds,Lf,Bf,jo,Ku,Jg;class Fz{constructor(e,t,n,i,a,s){V(this,Ku);V(this,Ro,new Map);V(this,Ds,new Map);V(this,Lf,new Map);V(this,Bf,new Map);V(this,jo,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new WF,this.fontLoader=new M7({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}get annotationStorage(){return Dt(this,"annotationStorage",new fS)}getRenderingIntent(e,t=Ol.ENABLE,n=null,i=!1,a=!1){let s=Hi.DISPLAY,l=e_;switch(e){case"any":s=Hi.ANY;break;case"display":break;case"print":s=Hi.PRINT;break;default:gt(`getRenderingIntent - invalid intent: ${e}`)}const u=s&Hi.PRINT&&n instanceof SF?n:this.annotationStorage;switch(t){case Ol.DISABLE:s+=Hi.ANNOTATIONS_DISABLE;break;case Ol.ENABLE:break;case Ol.ENABLE_FORMS:s+=Hi.ANNOTATIONS_FORMS;break;case Ol.ENABLE_STORAGE:s+=Hi.ANNOTATIONS_STORAGE,l=u.serializable;break;default:gt(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(s+=Hi.IS_EDITING),a&&(s+=Hi.OPLIST);const{ids:d,hash:h}=u.modifiedIds,g=[s,l.hash,h];return{renderingIntent:s,cacheKey:g.join("_"),annotationStorageSerializable:l,modifiedIds:d}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=m(this,jo))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of m(this,Ds).values())e.push(i._destroy());m(this,Ds).clear(),m(this,Lf).clear(),m(this,Bf).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,a;this.commonObjs.clear(),this.fontLoader.clear(),m(this,Ro).clear(),this.filterFactory.destroy(),xm.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Ic("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,i)=>{Ln(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:s}){if(s){i.close();return}Ln(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",async n=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:s}=this._fullReader;return(!i||!a)&&(this._lastProgress&&((l=t.onProgress)==null||l.call(t,this._lastProgress)),this._fullReader.onProgress=u=>{var d;(d=t.onProgress)==null||d.call(t,{loaded:u.loaded,total:u.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:s}}),e.on("GetRangeReader",(n,i)=>{Ln(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:s,done:l}){if(l){i.close();return}Ln(s instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{a.cancel(s),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new Rz(n,this))}),e.on("DocException",n=>{t._capability.reject(ii(n))}),e.on("PasswordRequest",n=>{L(this,jo,Promise.withResolvers());try{if(!t.onPassword)throw ii(n);const i=a=>{a instanceof Error?m(this,jo).reject(a):m(this,jo).resolve({password:a})};t.onPassword(i,n.code)}catch(i){m(this,jo).reject(i)}return m(this,jo).promise}),e.on("DataLoaded",n=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;m(this,Ds).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,a])=>{var s;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in a){const h=a.error;gt(`Error during font loading: ${h}`),this.commonObjs.resolve(n,h);break}const l=this._params.pdfBug&&((s=globalThis.FontInspector)!=null&&s.enabled)?(h,g)=>globalThis.FontInspector.fontAdded(h,g):null,u=new L7(a,l);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u.fontExtraProperties&&u.data&&(u.data=null),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":const{imageRef:d}=a;Ln(d,"The imageRef must be defined.");for(const h of m(this,Ds).values())for(const[,g]of h.objs)if((g==null?void 0:g.ref)===d)return g.dataLen?(this.commonObjs.resolve(n,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,a,s])=>{var u;if(this.destroyed)return;const l=m(this,Ds).get(i);if(!l.objs.has(n)){if(l._intentStates.size===0){(u=s==null?void 0:s.bitmap)==null||u.close();return}switch(a){case"Image":case"Pattern":l.objs.resolve(n,s);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",n=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&gt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=m(this,Lf).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&m(this,Bf).set(a.refStr,e);const s=new jz(t,a,this,this._params.pdfBug);return m(this,Ds).set(t,s),s});return m(this,Lf).set(t,i),i}getPageIndex(e){return t_(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return $(this,Ku,Jg).call(this,"GetFieldObjects")}hasJSActions(){return $(this,Ku,Jg).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return $(this,Ku,Jg).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return $(this,Ku,Jg).call(this,"GetOptionalContentConfig").then(t=>new hz(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=m(this,Ro).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(i=>{var a,s;return{info:i[0],metadata:i[1]?new uz(i[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((s=this._fullReader)==null?void 0:s.contentLength)??null}});return m(this,Ro).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of m(this,Ds).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),m(this,Ro).clear(),this.filterFactory.destroy(!0),xm.cleanup()}}cachedPageNumber(e){if(!t_(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return m(this,Bf).get(t)??null}}Ro=new WeakMap,Ds=new WeakMap,Lf=new WeakMap,Bf=new WeakMap,jo=new WeakMap,Ku=new WeakSet,Jg=function(e,t=null){const n=m(this,Ro).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return m(this,Ro).set(e,i),i};var cc;class Iz{constructor(e){V(this,cc,null);We(this,"onContinue",null);We(this,"onError",null);L(this,cc,e)}get promise(){return m(this,cc).capability.promise}cancel(e=0){m(this,cc).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=m(this,cc).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=m(this,cc);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}cc=new WeakMap;var uc,Qu;const bu=class bu{constructor({callback:e,params:t,objs:n,commonObjs:i,annotationCanvasMap:a,operatorList:s,pageIndex:l,canvasFactory:u,filterFactory:d,useRequestAnimationFrame:h=!1,pdfBug:g=!1,pageColors:b=null,enableHWA:y=!1,filteredOperationIndexes:D=null}){V(this,uc,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=l,this.canvasFactory=u,this.filterFactory=d,this._pdfBug=g,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Iz(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=y,this._dependencyTracker=t.dependencyTracker,this._filteredOperationIndexes=D}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var u,d;if(this.cancelled)return;if(this._canvas){if(m(bu,Qu).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");m(bu,Qu).add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)!=null&&u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:a,dependencyTracker:s}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Yh(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,s),this.gfx.beginDrawing({transform:i,viewport:n,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var n,i,a;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),m(this,uc)&&(window.cancelAnimationFrame(m(this,uc)),L(this,uc,null)),m(bu,Qu).delete(this._canvas),e||(e=new dS(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(a=(i=this.task).onError)==null||a.call(i,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?L(this,uc,window.requestAnimationFrame(()=>{L(this,uc,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._filteredOperationIndexes),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),m(bu,Qu).delete(this._canvas),this.callback())))}};uc=new WeakMap,Qu=new WeakMap,V(bu,Qu,new WeakSet);let p_=bu;const Oz="5.4.149",Mz="9e2e9e209";var Ri,Zu,Pf,Yn,yb,zf,Fo,xb,dc,Wa,vb,Zt,g_,m_,b_,fu,QF,Il;const ai=class ai{constructor({editor:e=null,uiManager:t=null}){V(this,Zt);V(this,Ri,null);V(this,Zu,null);V(this,Pf);V(this,Yn,null);V(this,yb,!1);V(this,zf,!1);V(this,Fo,null);V(this,xb);V(this,dc,null);V(this,Wa,null);var n,i;e?(L(this,zf,!1),L(this,Fo,e)):L(this,zf,!0),L(this,Wa,(e==null?void 0:e._uiManager)||t),L(this,xb,m(this,Wa)._eventBus),L(this,Pf,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((i=m(this,Wa))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),m(ai,vb)||L(ai,vb,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Dt(this,"_keyboardManager",new dy([[["Escape","mac+Escape"],ai.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ai.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ai.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ai.prototype._moveToPrevious],[["Home","mac+Home"],ai.prototype._moveToBeginning],[["End","mac+End"],ai.prototype._moveToEnd]]))}renderButton(){const e=L(this,Ri,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",m(this,Fo)&&(e.ariaControls=`${m(this,Fo).id}_colorpicker_dropdown`);const t=m(this,Wa)._signal;e.addEventListener("click",$(this,Zt,fu).bind(this),{signal:t}),e.addEventListener("keydown",$(this,Zt,b_).bind(this),{signal:t});const n=L(this,Zu,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=m(this,Pf),e.append(n),e}renderMainDropdown(){const e=L(this,Yn,$(this,Zt,g_).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===m(this,Ri)){$(this,Zt,fu).call(this,e);return}const t=e.target.getAttribute("data-color");t&&$(this,Zt,m_).call(this,t,e)}_moveToNext(e){var t,n;if(!m(this,Zt,Il)){$(this,Zt,fu).call(this,e);return}if(e.target===m(this,Ri)){(t=m(this,Yn).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=m(this,Yn))==null?void 0:t.firstChild)||e.target===m(this,Ri)){m(this,Zt,Il)&&this._hideDropdownFromKeyboard();return}m(this,Zt,Il)||$(this,Zt,fu).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!m(this,Zt,Il)){$(this,Zt,fu).call(this,e);return}(t=m(this,Yn).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!m(this,Zt,Il)){$(this,Zt,fu).call(this,e);return}(t=m(this,Yn).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=m(this,Yn))==null||e.classList.add("hidden"),m(this,Ri).ariaExpanded="false",(t=m(this,dc))==null||t.abort(),L(this,dc,null)}_hideDropdownFromKeyboard(){var e;if(!m(this,zf)){if(!m(this,Zt,Il)){(e=m(this,Fo))==null||e.unselect();return}this.hideDropdown(),m(this,Ri).focus({preventScroll:!0,focusVisible:m(this,yb)})}}updateColor(e){if(m(this,Zu)&&(m(this,Zu).style.backgroundColor=e),!m(this,Yn))return;const t=m(this,Wa).highlightColors.values();for(const n of m(this,Yn).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=m(this,Ri))==null||e.remove(),L(this,Ri,null),L(this,Zu,null),(t=m(this,Yn))==null||t.remove(),L(this,Yn,null)}};Ri=new WeakMap,Zu=new WeakMap,Pf=new WeakMap,Yn=new WeakMap,yb=new WeakMap,zf=new WeakMap,Fo=new WeakMap,xb=new WeakMap,dc=new WeakMap,Wa=new WeakMap,vb=new WeakMap,Zt=new WeakSet,g_=function(){const e=document.createElement("div"),t=m(this,Wa)._signal;e.addEventListener("contextmenu",Sa,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),m(this,Fo)&&(e.id=`${m(this,Fo).id}_colorpicker_dropdown`);for(const[n,i]of m(this,Wa).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=n,a.setAttribute("data-l10n-id",m(ai,vb)[n]);const s=document.createElement("span");a.append(s),s.className="swatch",s.style.backgroundColor=i,a.ariaSelected=i===m(this,Pf),a.addEventListener("click",$(this,Zt,m_).bind(this,i),{signal:t}),e.append(a)}return e.addEventListener("keydown",$(this,Zt,b_).bind(this),{signal:t}),e},m_=function(e,t){t.stopPropagation(),m(this,xb).dispatch("switchannotationeditorparams",{source:this,type:Nt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},b_=function(e){ai._keyboardManager.exec(this,e)},fu=function(e){if(m(this,Zt,Il)){this.hideDropdown();return}if(L(this,yb,e.detail===0),m(this,dc)||(L(this,dc,new AbortController),window.addEventListener("pointerdown",$(this,Zt,QF).bind(this),{signal:m(this,Wa).combinedSignal(m(this,dc))})),m(this,Ri).ariaExpanded="true",m(this,Yn)){m(this,Yn).classList.remove("hidden");return}const t=L(this,Yn,$(this,Zt,g_).call(this));m(this,Ri).append(t)},QF=function(e){var t;(t=m(this,Yn))!=null&&t.contains(e.target)||this.hideDropdown()},Il=function(){return m(this,Yn)&&!m(this,Yn).classList.contains("hidden")},V(ai,vb,null);let f1=ai;var _s,wb,Wf,kb;const yu=class yu{constructor(e){V(this,_s,null);V(this,wb,null);V(this,Wf,null);L(this,wb,e),L(this,Wf,e._uiManager),m(yu,kb)||L(yu,kb,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(m(this,_s))return m(this,_s);const{editorType:e,colorType:t,colorValue:n}=m(this,wb),i=L(this,_s,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",m(yu,kb)[e]),i.addEventListener("input",()=>{m(this,Wf).updateParams(t,i.value)},{signal:m(this,Wf)._signal}),i}update(e){m(this,_s)&&(m(this,_s).value=e)}destroy(){var e;(e=m(this,_s))==null||e.remove(),L(this,_s,null)}hideDropdown(){}};_s=new WeakMap,wb=new WeakMap,Wf=new WeakMap,kb=new WeakMap,V(yu,kb,null);let p1=yu;function E4(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function Fg(r){return Math.max(0,Math.min(255,255*r))}class T4{static CMYK_G([e,t,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Fg(e),[e,e,e]}static G_HTML([e]){const t=E4(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Fg)}static RGB_HTML(e){return`#${e.map(E4).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,n,i]){return[Fg(1-Math.min(1,e+i)),Fg(1-Math.min(1,n+i)),Fg(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const i=1-e,a=1-t,s=1-n,l=Math.min(i,a,s);return["CMYK",i,a,s,l]}}class Lz{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Jt("Abstract method `_createSVG` called.")}}class g1 extends Lz{_createSVG(e){return document.createElementNS(io,e)}}class ZF{static setupStorage(e,t,n,i,a){const s=i.getValue(t,{value:null});switch(n.name){case"textarea":if(s.value!==null&&(e.textContent=s.value),a==="print")break;e.addEventListener("input",l=>{i.setValue(t,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(s.value===n.attributes.xfaOn?e.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",l=>{i.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&e.setAttribute("value",s.value),a==="print")break;e.addEventListener("input",l=>{i.setValue(t,{value:l.target.value})})}break;case"select":if(s.value!==null){e.setAttribute("value",s.value);for(const l of n.children)l.attributes.value===s.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const u=l.target.options,d=u.selectedIndex===-1?"":u[u.selectedIndex].value;i.setValue(t,{value:d})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:i,linkService:a}){const{attributes:s}=t,l=e instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${i}`);for(const[u,d]of Object.entries(s))if(d!=null)switch(u){case"class":d.length&&e.setAttribute(u,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!l||u!=="href"&&u!=="newWindow")&&e.setAttribute(u,d)}l&&a.addLinkAttributes(e,s.href,s.newWindow),n&&s.dataId&&this.setupStorage(e,s.dataId,t,n)}static render(e){var g,b;const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,a=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:a,linkService:n});const l=a!=="richText",u=e.div;if(u.append(s),e.viewport){const y=`matrix(${e.viewport.transform.join(",")})`;u.style.transform=y}l&&u.setAttribute("class","xfaLayer xfaFont");const d=[];if(i.children.length===0){if(i.value){const y=document.createTextNode(i.value);s.append(y),l&&vm.shouldBuildText(i.name)&&d.push(y)}return{textDivs:d}}const h=[[i,-1,s]];for(;h.length>0;){const[y,D,v]=h.at(-1);if(D+1===y.children.length){h.pop();continue}const w=y.children[++h.at(-1)[1]];if(w===null)continue;const{name:k}=w;if(k==="#text"){const A=document.createTextNode(w.value);d.push(A),v.append(A);continue}const _=(g=w==null?void 0:w.attributes)!=null&&g.xmlns?document.createElementNS(w.attributes.xmlns,k):document.createElement(k);if(v.append(_),w.attributes&&this.setAttributes({html:_,element:w,storage:t,intent:a,linkService:n}),((b=w.children)==null?void 0:b.length)>0)h.push([w,-1,_]);else if(w.value){const A=document.createTextNode(w.value);l&&vm.shouldBuildText(k)&&d.push(A),_.append(A)}}for(const y of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Bz=9,jd=new WeakSet,Pz=new Date().getTimezoneOffset()*60*1e3;class C4{static create(e){switch(e.data.annotationType){case In.LINK:return new mS(e);case In.TEXT:return new zz(e);case In.WIDGET:switch(e.data.fieldType){case"Tx":return new Wz(e);case"Btn":return e.data.radioButton?new n8(e):e.data.checkBox?new qz(e):new Vz(e);case"Ch":return new Xz(e);case"Sig":return new Hz(e)}return new zd(e);case In.POPUP:return new x_(e);case In.FREETEXT:return new c8(e);case In.LINE:return new $z(e);case In.SQUARE:return new Yz(e);case In.CIRCLE:return new Kz(e);case In.POLYLINE:return new u8(e);case In.CARET:return new Zz(e);case In.INK:return new bS(e);case In.POLYGON:return new Qz(e);case In.HIGHLIGHT:return new d8(e);case In.UNDERLINE:return new Jz(e);case In.SQUIGGLY:return new eW(e);case In.STRIKEOUT:return new tW(e);case In.STAMP:return new h8(e);case In.FILEATTACHMENT:return new nW(e);default:return new Tn(e)}}}var Ju,Hf,Io,Id,JF,y_;const WS=class WS{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){V(this,Id);V(this,Ju,null);V(this,Hf,!1);V(this,Io,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return WS._hasPopupData(this.data)}get hasCommentButton(){return this.enableComment&&this._isEditable&&this.hasPopupElement}get commentButtonPosition(){const{quadPoints:e,rect:t}=this.data;let n=-1/0,i=-1/0;if((e==null?void 0:e.length)>=8){for(let a=0;a<e.length;a+=8)e[a+1]>i?(i=e[a+1],n=e[a+2]):e[a+1]===i&&(n=Math.max(n,e[a+2]));return[n,i]}return t?[t[2],t[3]]:null}get commentButtonColor(){if(!this.data.color)return null;const[e,t,n]=this.data.color,a=255*(1-(this.data.opacity??1));return $(this,Id,JF).call(this,Math.min(e+a,255),Math.min(t+a,255),Math.min(n+a,255))}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:s}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-a)/n,e[1]=100*(e[1]-s)/i,e}updateEdited(e){var a;if(!this.container)return;e.rect&&(m(this,Ju)||L(this,Ju,{rect:this.data.rect.slice(0)}));const{rect:t,popup:n}=e;t&&$(this,Id,y_).call(this,t);let i=((a=m(this,Io))==null?void 0:a.popup)||this.popup;!i&&(n!=null&&n.text)&&(this._createPopup(n),i=m(this,Io).popup),i&&(i.updateEdited(e),n!=null&&n.deleted&&(i.remove(),L(this,Io,null),this.popup=null))}resetEdited(){var e;m(this,Ju)&&($(this,Id,y_).call(this,m(this,Ju).rect),(e=m(this,Io))==null||e.popup.resetEdited(),L(this,Ju,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),!(this instanceof zd)&&!(this instanceof mS)&&(a.tabIndex=0);const{style:s}=a;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof x_){const{rotation:v}=t;return!t.hasOwnCanvas&&v!==0&&this.setRotation(v,a),a}const{width:l,height:u}=this;if(!e&&t.borderStyle.width>0){s.borderWidth=`${t.borderStyle.width}px`;const v=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(v>0||w>0){const _=`calc(${v}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;s.borderRadius=_}else if(this instanceof n8){const _=`calc(${l}px * var(--total-scale-factor)) / calc(${u}px * var(--total-scale-factor))`;s.borderRadius=_}switch(t.borderStyle.style){case Rh.SOLID:s.borderStyle="solid";break;case Rh.DASHED:s.borderStyle="dashed";break;case Rh.BEVELED:gt("Unimplemented border style: beveled");break;case Rh.INSET:gt("Unimplemented border style: inset");break;case Rh.UNDERLINE:s.borderBottomStyle="solid";break}const k=t.borderColor||null;k?(L(this,Hf,!0),s.borderColor=tt.makeHexColor(k[0]|0,k[1]|0,k[2]|0)):s.borderWidth=0}const d=tt.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:h,pageHeight:g,pageX:b,pageY:y}=i.rawDims;s.left=`${100*(d[0]-b)/h}%`,s.top=`${100*(d[1]-y)/g}%`;const{rotation:D}=t;return t.hasOwnCanvas||D===0?(s.width=`${100*l/h}%`,s.height=`${100*u/g}%`):this.setRotation(D,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:s}=this;e%180!==0&&([a,s]=[s,a]),t.style.width=`${100*a/n}%`,t.style.height=`${100*s/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,i)=>{const a=i.detail[t],s=a[0],l=a.slice(1);i.target.style[n]=T4[`${s}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:T4[`${s}_rgb`](l)})};return Dt(this,"_commonActions",{display:t=>{const{display:n}=t.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail)){const a=e[i]||n[i];a==null||a(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,a]of Object.entries(t)){const s=n[i];if(s){const l={detail:{[i]:a},target:e};s(l),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,a]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,w,k,_]=e.subarray(2,6);if(i===v&&a===w&&t===k&&n===_)return}const{style:s}=this.container;let l;if(m(this,Hf)){const{borderColor:v,borderWidth:w}=s;s.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const u=i-t,d=a-n,{svgFactory:h}=this,g=h.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const b=h.createElement("defs");g.append(b);const y=h.createElement("clipPath"),D=`clippath_${this.data.id}`;y.setAttribute("id",D),y.setAttribute("clipPathUnits","objectBoundingBox"),b.append(y);for(let v=2,w=e.length;v<w;v+=8){const k=e[v],_=e[v+1],A=e[v+2],N=e[v+3],E=h.createElement("rect"),T=(A-t)/u,R=(a-_)/d,M=(k-A)/u,I=(_-N)/d;E.setAttribute("x",T),E.setAttribute("y",R),E.setAttribute("width",M),E.setAttribute("height",I),y.append(E),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${R}" width="${M}" height="${I}"/>`)}m(this,Hf)&&(l.push("</g></svg>')"),s.backgroundImage=l.join("")),this.container.append(g),this.container.style.clipPath=`url(#${D})`}_createPopup(e=null){const{data:t}=this;let n,i;e?(n={str:e.text},i=e.date):(n=t.contentsObj,i=t.modificationDate);const a=L(this,Io,new x_({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent.div.append(a.render())}get hasPopupElement(){return!!(m(this,Io)||this.popup||this.data.popupRef)}render(){Jt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:a,id:s,exportValues:l}of i){if(a===-1||s===t)continue;const u=typeof l=="string"?l:null,d=document.querySelector(`[data-element-id="${s}"]`);if(d&&!jd.has(d)){gt(`_getElementsByName - element not allowed: ${s}`);continue}n.push({id:s,exportValue:u,domElement:d})}return n}for(const i of document.getElementsByName(e)){const{exportValue:a}=i,s=i.getAttribute("data-element-id");s!==t&&jd.has(i)&&n.push({id:s,exportValue:a,domElement:i})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Ju=new WeakMap,Hf=new WeakMap,Io=new WeakMap,Id=new WeakSet,JF=function(e,t,n){e/=255,t/=255,n/=255;const i=Math.max(e,t,n),a=Math.min(e,t,n),s=(i+a)/2,l=((1+Math.sqrt(s))/2*100).toFixed(2);if(i===a)return`hsl(0, 0%, ${l}%)`;const u=i-a;let d;i===e?d=(t-n)/u+(t<n?6:0):i===t?d=(n-e)/u+2:d=(e-t)/u+4,d=(d*60).toFixed(2);const h=(u/(1-Math.abs(2*s-1))*100).toFixed(2);return`hsl(${d}, ${h}%, ${l}%)`},y_=function(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:s,pageX:l,pageY:u}}}}=this;n==null||n.splice(0,4,...e),t.left=`${100*(e[0]-l)/a}%`,t.top=`${100*(s-e[3]+u)/s}%`,i===0?(t.width=`${100*(e[2]-e[0])/a}%`,t.height=`${100*(e[3]-e[1])/s}%`):this.setRotation(i)};let Tn=WS;var Vi,pu,e8,t8;class mS extends Tn{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});V(this,Vi);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let a=!1;return t.url?(n.addLinkAttributes(i,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),a=!0):t.attachment?($(this,Vi,e8).call(this,i,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?($(this,Vi,t8).call(this,i,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),a=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(i),this.container}_bindLink(t,n,i=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&$(this,Vi,pu).call(this),i&&(t.title=i)}_bindNamedAction(t,n,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),i&&(t.title=i),$(this,Vi,pu).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(n.actions)){const s=i.get(a);s&&(t[s]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:a}}),!1})}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),$(this,Vi,pu).call(this)}_bindResetFormAction(t,n){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),$(this,Vi,pu).call(this),!this._fieldObjects){gt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var g;i==null||i();const{fields:a,refs:s,include:l}=n,u=[];if(a.length!==0||s.length!==0){const b=new Set(s);for(const y of a){const D=this._fieldObjects[y]||[];for(const{id:v}of D)b.add(v)}for(const y of Object.values(this._fieldObjects))for(const D of y)b.has(D.id)===l&&u.push(D)}else for(const b of Object.values(this._fieldObjects))u.push(...b);const d=this.annotationStorage,h=[];for(const b of u){const{id:y}=b;switch(h.push(y),b.type){case"text":{const v=b.defaultValue||"";d.setValue(y,{value:v});break}case"checkbox":case"radiobutton":{const v=b.defaultValue===b.exportValues;d.setValue(y,{value:v});break}case"combobox":case"listbox":{const v=b.defaultValue||"";d.setValue(y,{value:v});break}default:continue}const D=document.querySelector(`[data-element-id="${y}"]`);if(D){if(!jd.has(D)){gt(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;D.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Vi=new WeakSet,pu=function(){this.container.setAttribute("data-internal-link","")},e8=function(t,n,i="",a=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:i&&(t.title=i),t.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(n.content,n.filename,a),!1},$(this,Vi,pu).call(this)},t8=function(t,n,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),i&&(t.title=i),$(this,Vi,pu).call(this)};class zz extends Tn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class zd extends Tn{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Ar.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,a){n.includes("mouse")?e.addEventListener(n,s=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s),shift:s.shiftKey,modifier:this._getKeyModifier(s)}})}):e.addEventListener(n,s=>{var l;if(n==="blur"){if(!t.focused||!s.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}a&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s)}}))})}_setEventListeners(e,t,n,i){var a,s,l;for(const[u,d]of n)(d==="Action"||(a=this.data.actions)!=null&&a[d])&&((d==="Focus"||d==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,u,d,i),d==="Focus"&&!((s=this.data.actions)!=null&&s.Blur)?this._setEventListener(e,t,"blur","Blur",null):d==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":tt.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||Bz,a=e.style;let s;const l=2,u=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(d/(Zk*i))||1,g=d/h;s=Math.min(i,u(g/Zk))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l);s=Math.min(i,u(d/Zk))}a.fontSize=`calc(${s}px * var(--total-scale-factor))`,a.color=tt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Wz extends zd{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,i){const a=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=n),a.setValue(s.id,{[i]:n})}render(){var i,a;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const s=e.getValue(t,{value:this.data.fieldValue});let l=s.value||"";const u=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;u&&l.length>u&&(l=l.slice(0,u));let d=s.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;d&&this.data.comb&&(d=d.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:d,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=d??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",d??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),jd.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:g,datetimeType:b,timeStep:y}=this.data,D=!!b&&this.enableScripting;g&&(n.title=g),this._setRequired(n,this.data.required),u&&(n.maxLength=u),n.addEventListener("input",w=>{e.setValue(t,{value:w.target.value}),this.setPropertyOnSiblings(n,"value",w.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",w=>{const k=this.data.defaultFieldValue??"";n.value=h.userValue=k,h.formattedValue=null});let v=w=>{const{formattedValue:k}=h;k!=null&&(w.target.value=k),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",k=>{var A;if(h.focused)return;const{target:_}=k;if(D&&(_.type=b,y&&(_.step=y)),h.userValue){const N=h.userValue;if(D)if(b==="time"){const E=new Date(N),T=[E.getHours(),E.getMinutes(),E.getSeconds()];_.value=T.map(R=>R.toString().padStart(2,"0")).join(":")}else _.value=new Date(N-Pz).toISOString().split(b==="date"?"T":".",1)[0];else _.value=N}h.lastCommittedValue=_.value,h.commitKey=1,(A=this.data.actions)!=null&&A.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",k=>{this.showElementAndHideCanvas(k.target);const _={value(A){h.userValue=A.detail.value??"",D||e.setValue(t,{value:h.userValue.toString()}),A.target.value=h.userValue},formattedValue(A){const{formattedValue:N}=A.detail;h.formattedValue=N,N!=null&&A.target!==document.activeElement&&(A.target.value=N);const E={formattedValue:N};D&&(E.value=N),e.setValue(t,E)},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{var R;const{charLimit:N}=A.detail,{target:E}=A;if(N===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",N);let T=h.userValue;!T||T.length<=N||(T=T.slice(0,N),E.value=h.userValue=T,e.setValue(t,{value:T}),(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(_,k)}),n.addEventListener("keydown",k=>{var N;h.commitKey=1;let _=-1;if(k.key==="Escape"?_=0:k.key==="Enter"&&!this.data.multiLine?_=2:k.key==="Tab"&&(h.commitKey=3),_===-1)return;const{value:A}=k.target;h.lastCommittedValue!==A&&(h.lastCommittedValue=A,h.userValue=A,(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:_,selStart:k.target.selectionStart,selEnd:k.target.selectionEnd}}))});const w=v;v=null,n.addEventListener("blur",k=>{var N,E;if(!h.focused||!k.relatedTarget)return;(N=this.data.actions)!=null&&N.Blur||(h.focused=!1);const{target:_}=k;let{value:A}=_;if(D){if(A&&b==="time"){const T=A.split(":").map(R=>parseInt(R,10));A=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),_.step=""}else A=new Date(A).valueOf();_.type="text"}h.userValue=A,h.lastCommittedValue!==A&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:h.commitKey,selStart:k.target.selectionStart,selEnd:k.target.selectionEnd}})),w(k)}),(a=this.data.actions)!=null&&a.Keystroke&&n.addEventListener("beforeinput",k=>{var I;h.lastCommittedValue=null;const{data:_,target:A}=k,{value:N,selectionStart:E,selectionEnd:T}=A;let R=E,M=T;switch(k.inputType){case"deleteWordBackward":{const F=N.substring(0,E).match(/\w*[^\w]*$/);F&&(R-=F[0].length);break}case"deleteWordForward":{const F=N.substring(E).match(/^[^\w]*\w*/);F&&(M+=F[0].length);break}case"deleteContentBackward":E===T&&(R-=1);break;case"deleteContentForward":E===T&&(M+=1);break}k.preventDefault(),(I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,change:_||"",willCommit:!1,selStart:R,selEnd:M}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],k=>k.target.value)}if(v&&n.addEventListener("blur",v),this.data.comb){const k=(this.data.rect[2]-this.data.rect[0])/u;n.classList.add("comb"),n.style.letterSpacing=`calc(${k}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Hz extends zd{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class qz extends zd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return jd.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=0,a.addEventListener("change",s=>{const{name:l,checked:u}=s.target;for(const d of this._getElementsByName(l,n)){const h=u&&d.exportValue===t.exportValue;d.domElement&&(d.domElement.checked=h),e.setValue(d.id,{value:h})}e.setValue(n,{value:u})}),a.addEventListener("resetform",s=>{const l=t.defaultFieldValue||"Off";s.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",s=>{const l={value(u){u.target.checked=u.detail.value!=="Off",e.setValue(n,{value:u.target.checked})}};this._dispatchEventFromSandbox(l,s)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class n8 extends zd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const s of this._getElementsByName(t.fieldName,n))e.setValue(s.id,{value:!1});const a=document.createElement("input");if(jd.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",s=>{const{name:l,checked:u}=s.target;for(const d of this._getElementsByName(l,n))e.setValue(d.id,{value:!1});e.setValue(n,{value:u})}),a.addEventListener("resetform",s=>{const l=t.defaultFieldValue;s.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const s=t.buttonValue;a.addEventListener("updatefromsandbox",l=>{const u={value:d=>{const h=s===d.detail.value;for(const g of this._getElementsByName(d.target.name)){const b=h&&g.id===n;g.domElement&&(g.domElement.checked=b),e.setValue(g.id,{value:b})}}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Vz extends mS{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class Xz extends zd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");jd.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const g=this.data.defaultFieldValue;for(const b of i.options)b.selected=b.value===g});for(const h of this.data.options){const g=document.createElement("option");g.textContent=h.displayValue,g.value=h.exportValue,n.value.includes(h.exportValue)&&(g.setAttribute("selected",!0),a=!1),i.append(g)}let s=null;if(a){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),s=()=>{h.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}const l=h=>{const g=h?"value":"textContent",{options:b,multiple:y}=i;return y?Array.prototype.filter.call(b,D=>D.selected).map(D=>D[g]):b.selectedIndex===-1?null:b[b.selectedIndex][g]};let u=l(!1);const d=h=>{const g=h.target.options;return Array.prototype.map.call(g,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const g={value(b){s==null||s();const y=b.detail.value,D=new Set(Array.isArray(y)?y:[y]);for(const v of i.options)v.selected=D.has(v.value);e.setValue(t,{value:l(!0)}),u=l(!1)},multipleSelection(b){i.multiple=!0},remove(b){const y=i.options,D=b.detail.remove;y[D].selected=!1,i.remove(D),y.length>0&&Array.prototype.findIndex.call(y,w=>w.selected)===-1&&(y[0].selected=!0),e.setValue(t,{value:l(!0),items:d(b)}),u=l(!1)},clear(b){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),u=l(!1)},insert(b){const{index:y,displayValue:D,exportValue:v}=b.detail.insert,w=i.children[y],k=document.createElement("option");k.textContent=D,k.value=v,w?w.before(k):i.append(k),e.setValue(t,{value:l(!0),items:d(b)}),u=l(!1)},items(b){const{items:y}=b.detail;for(;i.length!==0;)i.remove(0);for(const D of y){const{displayValue:v,exportValue:w}=D,k=document.createElement("option");k.textContent=v,k.value=w,i.append(k)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:l(!0),items:d(b)}),u=l(!1)},indices(b){const y=new Set(b.detail.indices);for(const D of b.target.options)D.selected=y.has(D.index);e.setValue(t,{value:l(!0)}),u=l(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(g,h)}),i.addEventListener("input",h=>{var y;const g=l(!0),b=l(!1);e.setValue(t,{value:g}),h.preventDefault(),(y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,change:b,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class x_ extends Tn{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:Tn._hasPopupData(t)}),this.elements=n,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new Gz({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,eventBus:this.linkService.eventBus}),n=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(i=>`${uS}${i}`).join(",")),this.container}}var ed,O1,M1,td,qf,Dn,Oo,hc,Mo,Db,_b,Vf,As,ji,Lo,Bo,Ab,fc,Xf,Sb,Po,Gf,nd,pc,Ct,I0,r8,i8,O0,v_,a8,s8,o8,l8,M0,L0,w_;class Gz{constructor({container:e,color:t,elements:n,titleObj:i,modificationDate:a,contentsObj:s,richText:l,parent:u,rect:d,parentRect:h,open:g,eventBus:b=null}){V(this,Ct);V(this,ed,$(this,Ct,o8).bind(this));V(this,O1,$(this,Ct,w_).bind(this));V(this,M1,$(this,Ct,L0).bind(this));V(this,td,$(this,Ct,M0).bind(this));V(this,qf,null);V(this,Dn,null);V(this,Oo,null);V(this,hc,null);V(this,Mo,null);V(this,Db,null);V(this,_b,null);V(this,Vf,null);V(this,As,!1);V(this,ji,null);V(this,Lo,null);V(this,Bo,null);V(this,Ab,null);V(this,fc,null);V(this,Xf,null);V(this,Sb,null);V(this,Po,null);V(this,Gf,null);V(this,nd,null);V(this,pc,!1);L(this,Dn,e),L(this,Gf,i),L(this,Oo,s),L(this,Po,l),L(this,_b,u),L(this,qf,t),L(this,Sb,d),L(this,Vf,h),L(this,Mo,n),L(this,Db,b),L(this,hc,c1.toDateObject(a)),this.trigger=n.flatMap(y=>y.getElementsToTriggerPopup()),$(this,Ct,I0).call(this),m(this,Dn).hidden=!0,g&&$(this,Ct,M0).call(this)}render(){var i;if(m(this,ji))return;const e=L(this,ji,document.createElement("div"));if(e.className="popup",m(this,qf)){const a=e.style.outlineColor=tt.makeHexColor(...m(this,qf));e.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`}const t=document.createElement("span");if(t.className="header",(i=m(this,Gf))!=null&&i.str){const a=document.createElement("span");a.className="title",t.append(a),{dir:a.dir,str:a.textContent}=m(this,Gf)}if(e.append(t),m(this,hc)){const a=document.createElement("time");a.className="popupDate",a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:m(this,hc).valueOf()})),a.dateTime=m(this,hc).toISOString(),t.append(a)}const n=m(this,Ct,O0);if(n)ZF.render({xfaHtml:n,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(m(this,Oo));e.append(a)}m(this,Dn).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let a=0,s=i.length;a<s;++a){const l=i[a];n.append(document.createTextNode(l)),a<s-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popup:t,deleted:n}){var i;if(n||t!=null&&t.deleted){this.remove();return}$(this,Ct,I0).call(this),m(this,nd)||L(this,nd,{contentsObj:m(this,Oo),richText:m(this,Po)}),e&&L(this,Bo,null),t&&(L(this,Po,$(this,Ct,s8).call(this,t.text)),L(this,hc,c1.toDateObject(t.date)),L(this,Oo,null)),(i=m(this,ji))==null||i.remove(),L(this,ji,null)}resetEdited(){var e;m(this,nd)&&({contentsObj:qn(this,Oo)._,richText:qn(this,Po)._}=m(this,nd),L(this,nd,null),(e=m(this,ji))==null||e.remove(),L(this,ji,null),L(this,Bo,null))}remove(){var e,t;(e=m(this,Lo))==null||e.abort(),L(this,Lo,null),(t=m(this,ji))==null||t.remove(),L(this,ji,null),L(this,pc,!1),L(this,As,!1);for(const n of this.trigger)n.classList.remove("popupTriggerArea")}forceHide(){L(this,pc,this.isVisible),m(this,pc)&&(m(this,Dn).hidden=!0)}maybeShow(){$(this,Ct,I0).call(this),m(this,pc)&&(m(this,ji)||$(this,Ct,L0).call(this),L(this,pc,!1),m(this,Dn).hidden=!1)}get isVisible(){return m(this,Dn).hidden===!1}}ed=new WeakMap,O1=new WeakMap,M1=new WeakMap,td=new WeakMap,qf=new WeakMap,Dn=new WeakMap,Oo=new WeakMap,hc=new WeakMap,Mo=new WeakMap,Db=new WeakMap,_b=new WeakMap,Vf=new WeakMap,As=new WeakMap,ji=new WeakMap,Lo=new WeakMap,Bo=new WeakMap,Ab=new WeakMap,fc=new WeakMap,Xf=new WeakMap,Sb=new WeakMap,Po=new WeakMap,Gf=new WeakMap,nd=new WeakMap,pc=new WeakMap,Ct=new WeakSet,I0=function(){var t;if(m(this,Lo))return;L(this,Lo,new AbortController);const{signal:e}=m(this,Lo);for(const n of this.trigger)n.addEventListener("click",m(this,td),{signal:e}),n.addEventListener("mouseenter",m(this,M1),{signal:e}),n.addEventListener("mouseleave",m(this,O1),{signal:e}),n.classList.add("popupTriggerArea");for(const n of m(this,Mo))(t=n.container)==null||t.addEventListener("keydown",m(this,ed),{signal:e});$(this,Ct,i8).call(this)},r8=function(){const e=m(this,Mo).find(t=>t.hasCommentButton);e&&(L(this,fc,e._normalizePoint(e.commentButtonPosition)),L(this,Xf,e.commentButtonColor))},i8=function(){if(m(this,Ab)||(m(this,fc)||$(this,Ct,r8).call(this),!m(this,fc)))return;const e=L(this,Ab,document.createElement("button"));e.className="annotationCommentButton";const t=m(this,Mo)[0].container;e.style.zIndex=t.style.zIndex+1,e.tabIndex=0;const{signal:n}=m(this,Lo);e.addEventListener("hover",m(this,td),{signal:n}),e.addEventListener("keydown",m(this,ed),{signal:n}),e.addEventListener("click",()=>{var l;const[{data:{id:a},annotationEditorType:s}]=m(this,Mo);(l=m(this,Db))==null||l.dispatch("switchannotationeditormode",{source:this,editId:a,mode:s,editComment:!0})},{signal:n});const{style:i}=e;i.left=`calc(${m(this,fc)[0]}%)`,i.top=`calc(${m(this,fc)[1]}% - var(--comment-button-dim))`,m(this,Xf)&&(i.backgroundColor=m(this,Xf)),t.after(e)},O0=function(){const e=m(this,Po),t=m(this,Oo);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&m(this,Po).html||null},v_=function(){var e,t,n;return((n=(t=(e=m(this,Ct,O0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},a8=function(){var e,t,n;return((n=(t=(e=m(this,Ct,O0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},s8=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:m(this,Ct,a8),fontSize:m(this,Ct,v_)?`calc(${m(this,Ct,v_)}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))t.push({name:"span",value:a,attributes:i});return n},o8=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&m(this,As))&&$(this,Ct,M0).call(this)},l8=function(){if(m(this,Bo)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:a}}}=m(this,_b);let s=!!m(this,Vf),l=s?m(this,Vf):m(this,Sb);for(const D of m(this,Mo))if(!l||tt.intersect(D.data.rect,l)!==null){l=D.data.rect,s=!0;break}const u=tt.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),h=s?l[2]-l[0]+5:0,g=u[0]+h,b=u[1];L(this,Bo,[100*(g-i)/t,100*(b-a)/n]);const{style:y}=m(this,Dn);y.left=`${m(this,Bo)[0]}%`,y.top=`${m(this,Bo)[1]}%`},M0=function(){L(this,As,!m(this,As)),m(this,As)?($(this,Ct,L0).call(this),m(this,Dn).addEventListener("click",m(this,td)),m(this,Dn).addEventListener("keydown",m(this,ed))):($(this,Ct,w_).call(this),m(this,Dn).removeEventListener("click",m(this,td)),m(this,Dn).removeEventListener("keydown",m(this,ed)))},L0=function(){m(this,ji)||this.render(),this.isVisible?m(this,As)&&m(this,Dn).classList.add("focused"):($(this,Ct,l8).call(this),m(this,Dn).hidden=!1,m(this,Dn).style.zIndex=parseInt(m(this,Dn).style.zIndex)+1e3)},w_=function(){m(this,Dn).classList.remove("focused"),!(m(this,As)||!this.isVisible)&&(m(this,Dn).hidden=!0,m(this,Dn).style.zIndex=parseInt(m(this,Dn).style.zIndex)-1e3)};class c8 extends Tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=pt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Eb;class $z extends Tn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});V(this,Eb,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:i}=this,a=this.svgFactory.create(n,i,!0),s=L(this,Eb,this.svgFactory.createElement("svg:line"));return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),a.append(s),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,Eb)}addHighlightArea(){this.container.classList.add("highlightArea")}}Eb=new WeakMap;var Tb;class Yz extends Tn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});V(this,Tb,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:i}=this,a=this.svgFactory.create(n,i,!0),s=t.borderStyle.width,l=L(this,Tb,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",s/2),l.setAttribute("y",s/2),l.setAttribute("width",n-s),l.setAttribute("height",i-s),l.setAttribute("stroke-width",s||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,Tb)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tb=new WeakMap;var Cb;class Kz extends Tn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});V(this,Cb,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:i}=this,a=this.svgFactory.create(n,i,!0),s=t.borderStyle.width,l=L(this,Cb,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",i/2),l.setAttribute("rx",n/2-s/2),l.setAttribute("ry",i/2-s/2),l.setAttribute("stroke-width",s||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,Cb)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cb=new WeakMap;var Nb;class u8 extends Tn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});V(this,Nb,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:i,popupRef:a},width:s,height:l}=this;if(!n)return this.container;const u=this.svgFactory.create(s,l,!0);let d=[];for(let g=0,b=n.length;g<b;g+=2){const y=n[g]-t[0],D=t[3]-n[g+1];d.push(`${y},${D}`)}d=d.join(" ");const h=L(this,Nb,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",d),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),u.append(h),this.container.append(u),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,Nb)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nb=new WeakMap;class Qz extends u8{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Zz extends Tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Ub,rd,Rb,k_;class bS extends Tn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});V(this,Rb);V(this,Ub,null);V(this,rd,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?pt.HIGHLIGHT:pt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:i,borderStyle:a,popupRef:s}}=this,{transform:l,width:u,height:d}=$(this,Rb,k_).call(this,n,t),h=this.svgFactory.create(u,d,!0),g=L(this,Ub,this.svgFactory.createElement("svg:g"));h.append(g),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",l);for(let b=0,y=i.length;b<y;b++){const D=this.svgFactory.createElement(this.svgElementName);m(this,rd).push(D),D.setAttribute("points",i[b].join(",")),g.append(D)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:i,rect:a}=t,s=m(this,Ub);if(n>=0&&s.setAttribute("stroke-width",n||1),i)for(let l=0,u=m(this,rd).length;l<u;l++)m(this,rd)[l].setAttribute("points",i[l].join(","));if(a){const{transform:l,width:u,height:d}=$(this,Rb,k_).call(this,this.data.rotation,a);s.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),s.setAttribute("transform",l)}}getElementsToTriggerPopup(){return m(this,rd)}addHighlightArea(){this.container.classList.add("highlightArea")}get commentButtonPosition(){const{inkLists:t,rect:n}=this.data;if((t==null?void 0:t.length)>=1){let i=-1/0,a=-1/0;for(const s of t)for(let l=0,u=s.length;l<u;l+=2)s[l+1]>a?(a=s[l+1],i=s[l]):s[l+1]===a&&(i=Math.max(i,s[l]));if(i!==1/0)return[i,a]}return n?[n[2],n[3]]:null}}Ub=new WeakMap,rd=new WeakMap,Rb=new WeakSet,k_=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class d8 extends Tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=pt.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class Jz extends Tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class eW extends Tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class tW extends Tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class h8 extends Tn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=pt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var jb,Fb,D_;class nW extends Tn{constructor(t){var i;super(t,{isRenderable:!0});V(this,Fb);V(this,jb,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",$(this,Fb,D_).bind(this)),L(this,jb,i);const{isMac:a}=Ar.platform;return t.addEventListener("keydown",s=>{s.key==="Enter"&&(a?s.metaKey:s.ctrlKey)&&$(this,Fb,D_).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return m(this,jb)}addHighlightArea(){this.container.classList.add("highlightArea")}}jb=new WeakMap,Fb=new WeakSet,D_=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Ib,id,gc,Ob,Lc,A_,S_;const HS=class HS{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:i,page:a,viewport:s,structTreeLayer:l}){V(this,Lc);V(this,Ib,null);V(this,id,null);V(this,gc,new Map);V(this,Ob,null);this.div=e,L(this,Ib,t),L(this,id,n),L(this,Ob,l||null),this.page=a,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return m(this,gc).size>0}async render(e){var s;const{annotations:t}=e,n=this.div;Ud(n,this.viewport);const i=new Map,a={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new g1,annotationStorage:e.annotationStorage||new fS,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const u=l.annotationType===In.POPUP;if(u){const g=i.get(l.id);if(!g)continue;a.elements=g}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;a.data=l;const d=C4.create(a);if(!d.isRenderable)continue;if(!u&&l.popupRef){const g=i.get(l.popupRef);g?g.push(d):i.set(l.popupRef,[d])}const h=d.render();l.hidden&&(h.style.visibility="hidden"),await $(this,Lc,A_).call(this,h,l.id,a.elements),d._isEditable&&(m(this,gc).set(d.data.id,d),(s=this._annotationEditorUIManager)==null||s.renderAnnotationElement(d))}$(this,Lc,S_).call(this)}async addLinkAnnotations(e,t){const n={data:null,layer:this.div,linkService:t,svgFactory:new g1,parent:this};for(const i of e){i.borderStyle||(i.borderStyle=HS._defaultBorderStyle),n.data=i;const a=C4.create(n);if(!a.isRenderable)continue;const s=a.render();await $(this,Lc,A_).call(this,s,i.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Ud(t,{rotation:e.rotation}),$(this,Lc,S_).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(m(this,gc).values())}getEditableAnnotation(e){return m(this,gc).get(e)}static get _defaultBorderStyle(){return Dt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Rh.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Ib=new WeakMap,id=new WeakMap,gc=new WeakMap,Ob=new WeakMap,Lc=new WeakSet,A_=async function(e,t,n){var l,u;const i=e.firstChild||e,a=i.id=`${uS}${t}`,s=await((l=m(this,Ob))==null?void 0:l.getAriaAttributes(a));if(s)for(const[d,h]of s)i.setAttribute(d,h);n?n.at(-1).container.after(e):(this.div.append(e),(u=m(this,Ib))==null||u.moveElementInDOM(this.div,e,i,!1))},S_=function(){var t;if(!m(this,id))return;const e=this.div;for(const[n,i]of m(this,id)){const a=e.querySelector(`[data-annotation-id="${n}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:s}=a;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):a.append(i);const l=m(this,gc).get(n);l&&(l._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(n,a.id,i),l._hasNoCanvas=!1):l.canvas=i)}m(this,id).clear()};let __=HS;const $x=/\r\n?|\n/g;var ga,Fi,Mb,ad,Ii,zn,f8,p8,g8,B0,Jo,P0,z0,m8,T_,b8;const ln=class ln extends an{constructor(t){super({...t,name:"freeTextEditor"});V(this,zn);V(this,ga);V(this,Fi,"");V(this,Mb,`${this.id}-editor`);V(this,ad,null);V(this,Ii);We(this,"_colorPicker",null);L(this,ga,t.color||ln._defaultColor||an._defaultLineColor),L(this,Ii,t.fontSize||ln._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=ln.prototype,n=s=>s.isEmpty(),i=Rd.TRANSLATE_SMALL,a=Rd.TRANSLATE_BIG;return Dt(this,"_keyboardManager",new dy([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:n}]]))}static initialize(t,n){an.initialize(t,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Nt.FREETEXT_SIZE:ln._defaultFontSize=n;break;case Nt.FREETEXT_COLOR:ln._defaultColor=n;break}}updateParams(t,n){switch(t){case Nt.FREETEXT_SIZE:$(this,zn,f8).call(this,n);break;case Nt.FREETEXT_COLOR:$(this,zn,p8).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Nt.FREETEXT_SIZE,ln._defaultFontSize],[Nt.FREETEXT_COLOR,ln._defaultColor||an._defaultLineColor]]}get propertiesToUpdate(){return[[Nt.FREETEXT_SIZE,m(this,Ii)],[Nt.FREETEXT_COLOR,m(this,ga)]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new p1(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Nt.FREETEXT_COLOR}get colorValue(){return m(this,ga)}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-ln._internalPadding*t,-(ln._internalPadding+m(this,Ii))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),L(this,ad,new AbortController);const t=this._uiManager.combinedSignal(m(this,ad));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",m(this,Mb)),this._isDraggable=!0,(t=m(this,ad))==null||t.abort(),L(this,ad,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=m(this,Fi),n=L(this,Fi,$(this,zn,g8).call(this).trimEnd());if(t===n)return;const i=a=>{if(L(this,Fi,a),!a){this.remove();return}$(this,zn,z0).call(this),this._uiManager.rebuild(this),$(this,zn,B0).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(t)},mustExec:!1}),$(this,zn,B0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ln._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",m(this,Mb)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${m(this,Ii)}px * var(--total-scale-factor))`,i.color=m(this,ga),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,s]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[h,g]=this.pageDimensions,[b,y]=this.pageTranslation;let D,v;switch(this.rotation){case 0:D=t+(l[0]-b)/h,v=n+this.height-(l[1]-y)/g;break;case 90:D=t+(l[0]-b)/h,v=n-(l[1]-y)/g,[u,d]=[d,-u];break;case 180:D=t-this.width+(l[0]-b)/h,v=n-(l[1]-y)/g,[u,d]=[-u,-d];break;case 270:D=t+(l[0]-b-this.height*g)/h,v=n+(l[1]-y-this.width*h)/g,[u,d]=[-d,u];break}this.setAt(D*a,v*s,u,d)}else this._moveAfterPaste(t,n);$(this,zn,z0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var D,v,w;const n=t.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const a=$(D=ln,Jo,T_).call(D,n.getData("text")||"").replaceAll($x,`
`);if(!a)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const l=s.getRangeAt(0);if(!a.includes(`
`)){l.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),s.collapseToStart();return}const{startContainer:u,startOffset:d}=l,h=[],g=[];if(u.nodeType===Node.TEXT_NODE){const k=u.parentElement;if(g.push(u.nodeValue.slice(d).replaceAll($x,"")),k!==this.editorDiv){let _=h;for(const A of this.editorDiv.childNodes){if(A===k){_=g;continue}_.push($(v=ln,Jo,P0).call(v,A))}}h.push(u.nodeValue.slice(0,d).replaceAll($x,""))}else if(u===this.editorDiv){let k=h,_=0;for(const A of this.editorDiv.childNodes)_++===d&&(k=g),k.push($(w=ln,Jo,P0).call(w,A))}L(this,Fi,`${h.join(`
`)}${a}${g.join(`
`)}`),$(this,zn,z0).call(this);const b=new Range;let y=Math.sumPrecise(h.map(k=>k.length));for(const{firstChild:k}of this.editorDiv.childNodes)if(k.nodeType===Node.TEXT_NODE){const _=k.nodeValue.length;if(y<=_){b.setStart(k,y),b.setEnd(k,y);break}y-=_}s.removeAllRanges(),s.addRange(b)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=ln._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,i){var l;let a=null;if(t instanceof c8){const{data:{defaultAppearanceData:{fontSize:u,fontColor:d},rect:h,rotation:g,id:b,popupRef:y,contentsObj:D},textContent:v,textPosition:w,parent:{page:{pageNumber:k}}}=t;if(!v||v.length===0)return null;a=t={annotationType:pt.FREETEXT,color:Array.from(d),fontSize:u,value:v.join(`
`),position:w,pageIndex:k-1,rect:h.slice(0),rotation:g,annotationElementId:b,id:b,deleted:!1,popupRef:y,comment:(D==null?void 0:D.str)||null}}const s=await super.deserialize(t,n,i);return L(s,Ii,t.fontSize),L(s,ga,tt.makeHexColor(...t.color)),L(s,Fi,$(l=ln,Jo,T_).call(l,t.value)),s._initialData=a,t.comment&&s.setCommentData(t.comment),s}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=this.getPDFRect(),i=an._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:m(this,ga)),a={annotationType:pt.FREETEXT,color:i,fontSize:m(this,Ii),value:$(this,zn,m8).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(a),t?(a.isCopy=!0,a):this.annotationElementId&&!$(this,zn,b8).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(!n)return null;const{style:i}=n;i.fontSize=`calc(${m(this,Ii)}px * var(--total-scale-factor))`,i.color=m(this,ga),n.replaceChildren();for(const s of m(this,Fi).split(`
`)){const l=document.createElement("div");l.append(s?document.createTextNode(s):document.createElement("br")),n.append(l)}const a={rect:this.getPDFRect()};return a.popup=this.hasEditedComment?this.comment:{text:m(this,Fi)},t.updateEdited(a),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};ga=new WeakMap,Fi=new WeakMap,Mb=new WeakMap,ad=new WeakMap,Ii=new WeakMap,zn=new WeakSet,f8=function(t){const n=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-m(this,Ii))*this.parentScale),L(this,Ii,a),$(this,zn,B0).call(this)},i=m(this,Ii);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},p8=function(t){const n=a=>{var s;L(this,ga,this.editorDiv.style.color=a),(s=this._colorPicker)==null||s.update(a)},i=m(this,ga);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},g8=function(){var i;const t=[];this.editorDiv.normalize();let n=null;for(const a of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(t.push($(i=ln,Jo,P0).call(i,a)),n=a);return t.join(`
`)},B0=function(){const[t,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:s}=this,l=s.style.display,u=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",a.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=l,s.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/n):(this.width=i.height/t,this.height=i.width/n),this.fixAndSetPosition()},Jo=new WeakSet,P0=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll($x,"")},z0=function(){if(this.editorDiv.replaceChildren(),!!m(this,Fi))for(const t of m(this,Fi).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},m8=function(){return m(this,Fi).replaceAll(" "," ")},T_=function(t){return t.replaceAll(" "," ")},b8=function(t){const{value:n,fontSize:i,color:a,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==i||t.color.some((l,u)=>l!==a[u])||t.pageIndex!==s},V(ln,Jo),We(ln,"_freeTextDefaultContent",""),We(ln,"_internalPadding",0),We(ln,"_defaultColor",null),We(ln,"_defaultFontSize",10),We(ln,"_type","freetext"),We(ln,"_editorType",pt.FREETEXT);let E_=ln;class Je{toSVGPath(){Jt("Abstract method `toSVGPath` must be implemented.")}get box(){Jt("Abstract getter `box` must be implemented.")}serialize(e,t){Jt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,a,s){s||(s=new Float32Array(e.length));for(let l=0,u=e.length;l<u;l+=2)s[l]=t+e[l]*i,s[l+1]=n+e[l+1]*a;return s}static _rescaleAndSwap(e,t,n,i,a,s){s||(s=new Float32Array(e.length));for(let l=0,u=e.length;l<u;l+=2)s[l]=t+e[l+1]*i,s[l+1]=n+e[l]*a;return s}static _translate(e,t,n,i){i||(i=new Float32Array(e.length));for(let a=0,s=e.length;a<s;a+=2)i[a]=t+e[a],i[a+1]=n+e[a+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,i,a){switch(a){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,a,s){return[(e+5*n)/6,(t+5*i)/6,(5*n+a)/6,(5*i+s)/6,(n+a)/2,(i+s)/2]}}We(Je,"PRECISION",1e-4);var Oi,Ha,$f,Yf,Ss,kt,sd,od,Lb,Bb,Kf,Qf,mc,Pb,L1,B1,Kn,em,y8,x8,v8,w8,k8,D8;const lo=class lo{constructor({x:e,y:t},n,i,a,s,l=0){V(this,Kn);V(this,Oi);V(this,Ha,[]);V(this,$f);V(this,Yf);V(this,Ss,[]);V(this,kt,new Float32Array(18));V(this,sd);V(this,od);V(this,Lb);V(this,Bb);V(this,Kf);V(this,Qf);V(this,mc,[]);L(this,Oi,n),L(this,Qf,a*i),L(this,Yf,s),m(this,kt).set([NaN,NaN,NaN,NaN,e,t],6),L(this,$f,l),L(this,Bb,m(lo,Pb)*i),L(this,Lb,m(lo,B1)*i),L(this,Kf,i),m(this,mc).push(e,t)}isEmpty(){return isNaN(m(this,kt)[8])}add({x:e,y:t}){var I;L(this,sd,e),L(this,od,t);const[n,i,a,s]=m(this,Oi);let[l,u,d,h]=m(this,kt).subarray(8,12);const g=e-d,b=t-h,y=Math.hypot(g,b);if(y<m(this,Lb))return!1;const D=y-m(this,Bb),v=D/y,w=v*g,k=v*b;let _=l,A=u;l=d,u=h,d+=w,h+=k,(I=m(this,mc))==null||I.push(e,t);const N=-k/D,E=w/D,T=N*m(this,Qf),R=E*m(this,Qf);return m(this,kt).set(m(this,kt).subarray(2,8),0),m(this,kt).set([d+T,h+R],4),m(this,kt).set(m(this,kt).subarray(14,18),12),m(this,kt).set([d-T,h-R],16),isNaN(m(this,kt)[6])?(m(this,Ss).length===0&&(m(this,kt).set([l+T,u+R],2),m(this,Ss).push(NaN,NaN,NaN,NaN,(l+T-n)/a,(u+R-i)/s),m(this,kt).set([l-T,u-R],14),m(this,Ha).push(NaN,NaN,NaN,NaN,(l-T-n)/a,(u-R-i)/s)),m(this,kt).set([_,A,l,u,d,h],6),!this.isEmpty()):(m(this,kt).set([_,A,l,u,d,h],6),Math.abs(Math.atan2(A-u,_-l)-Math.atan2(k,w))<Math.PI/2?([l,u,d,h]=m(this,kt).subarray(2,6),m(this,Ss).push(NaN,NaN,NaN,NaN,((l+d)/2-n)/a,((u+h)/2-i)/s),[l,u,_,A]=m(this,kt).subarray(14,18),m(this,Ha).push(NaN,NaN,NaN,NaN,((_+l)/2-n)/a,((A+u)/2-i)/s),!0):([_,A,l,u,d,h]=m(this,kt).subarray(0,6),m(this,Ss).push(((_+5*l)/6-n)/a,((A+5*u)/6-i)/s,((5*l+d)/6-n)/a,((5*u+h)/6-i)/s,((l+d)/2-n)/a,((u+h)/2-i)/s),[d,h,l,u,_,A]=m(this,kt).subarray(12,18),m(this,Ha).push(((_+5*l)/6-n)/a,((A+5*u)/6-i)/s,((5*l+d)/6-n)/a,((5*u+h)/6-i)/s,((l+d)/2-n)/a,((u+h)/2-i)/s),!0))}toSVGPath(){if(this.isEmpty())return"";const e=m(this,Ss),t=m(this,Ha);if(isNaN(m(this,kt)[6])&&!this.isEmpty())return $(this,Kn,y8).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);$(this,Kn,v8).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return $(this,Kn,x8).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,a,s){return new _8(e,t,n,i,a,s)}getOutlines(){var g;const e=m(this,Ss),t=m(this,Ha),n=m(this,kt),[i,a,s,l]=m(this,Oi),u=new Float32Array((((g=m(this,mc))==null?void 0:g.length)??0)+2);for(let b=0,y=u.length-2;b<y;b+=2)u[b]=(m(this,mc)[b]-i)/s,u[b+1]=(m(this,mc)[b+1]-a)/l;if(u[u.length-2]=(m(this,sd)-i)/s,u[u.length-1]=(m(this,od)-a)/l,isNaN(n[6])&&!this.isEmpty())return $(this,Kn,w8).call(this,u);const d=new Float32Array(m(this,Ss).length+24+m(this,Ha).length);let h=e.length;for(let b=0;b<h;b+=2){if(isNaN(e[b])){d[b]=d[b+1]=NaN;continue}d[b]=e[b],d[b+1]=e[b+1]}h=$(this,Kn,D8).call(this,d,h);for(let b=t.length-6;b>=6;b-=6)for(let y=0;y<6;y+=2){if(isNaN(t[b+y])){d[h]=d[h+1]=NaN,h+=2;continue}d[h]=t[b+y],d[h+1]=t[b+y+1],h+=2}return $(this,Kn,k8).call(this,d,h),this.newFreeDrawOutline(d,u,m(this,Oi),m(this,Kf),m(this,$f),m(this,Yf))}};Oi=new WeakMap,Ha=new WeakMap,$f=new WeakMap,Yf=new WeakMap,Ss=new WeakMap,kt=new WeakMap,sd=new WeakMap,od=new WeakMap,Lb=new WeakMap,Bb=new WeakMap,Kf=new WeakMap,Qf=new WeakMap,mc=new WeakMap,Pb=new WeakMap,L1=new WeakMap,B1=new WeakMap,Kn=new WeakSet,em=function(){const e=m(this,kt).subarray(4,6),t=m(this,kt).subarray(16,18),[n,i,a,s]=m(this,Oi);return[(m(this,sd)+(e[0]-t[0])/2-n)/a,(m(this,od)+(e[1]-t[1])/2-i)/s,(m(this,sd)+(t[0]-e[0])/2-n)/a,(m(this,od)+(t[1]-e[1])/2-i)/s]},y8=function(){const[e,t,n,i]=m(this,Oi),[a,s,l,u]=$(this,Kn,em).call(this);return`M${(m(this,kt)[2]-e)/n} ${(m(this,kt)[3]-t)/i} L${(m(this,kt)[4]-e)/n} ${(m(this,kt)[5]-t)/i} L${a} ${s} L${l} ${u} L${(m(this,kt)[16]-e)/n} ${(m(this,kt)[17]-t)/i} L${(m(this,kt)[14]-e)/n} ${(m(this,kt)[15]-t)/i} Z`},x8=function(e){const t=m(this,Ha);e.push(`L${t[4]} ${t[5]} Z`)},v8=function(e){const[t,n,i,a]=m(this,Oi),s=m(this,kt).subarray(4,6),l=m(this,kt).subarray(16,18),[u,d,h,g]=$(this,Kn,em).call(this);e.push(`L${(s[0]-t)/i} ${(s[1]-n)/a} L${u} ${d} L${h} ${g} L${(l[0]-t)/i} ${(l[1]-n)/a}`)},w8=function(e){const t=m(this,kt),[n,i,a,s]=m(this,Oi),[l,u,d,h]=$(this,Kn,em).call(this),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-n)/a,(t[3]-i)/s,NaN,NaN,NaN,NaN,(t[4]-n)/a,(t[5]-i)/s,NaN,NaN,NaN,NaN,l,u,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(t[16]-n)/a,(t[17]-i)/s,NaN,NaN,NaN,NaN,(t[14]-n)/a,(t[15]-i)/s],0),this.newFreeDrawOutline(g,e,m(this,Oi),m(this,Kf),m(this,$f),m(this,Yf))},k8=function(e,t){const n=m(this,Ha);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},D8=function(e,t){const n=m(this,kt).subarray(4,6),i=m(this,kt).subarray(16,18),[a,s,l,u]=m(this,Oi),[d,h,g,b]=$(this,Kn,em).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-a)/l,(n[1]-s)/u,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,g,b,NaN,NaN,NaN,NaN,(i[0]-a)/l,(i[1]-s)/u],t),t+=24},V(lo,Pb,8),V(lo,L1,2),V(lo,B1,m(lo,Pb)+m(lo,L1));let m1=lo;var Zf,ld,zo,zb,Mi,Wb,En,P1,A8;class _8 extends Je{constructor(t,n,i,a,s,l){super();V(this,P1);V(this,Zf);V(this,ld,new Float32Array(4));V(this,zo);V(this,zb);V(this,Mi);V(this,Wb);V(this,En);L(this,En,t),L(this,Mi,n),L(this,Zf,i),L(this,Wb,a),L(this,zo,s),L(this,zb,l),this.lastPoint=[NaN,NaN],$(this,P1,A8).call(this,l);const[u,d,h,g]=m(this,ld);for(let b=0,y=t.length;b<y;b+=2)t[b]=(t[b]-u)/h,t[b+1]=(t[b+1]-d)/g;for(let b=0,y=n.length;b<y;b+=2)n[b]=(n[b]-u)/h,n[b+1]=(n[b+1]-d)/g}toSVGPath(){const t=[`M${m(this,En)[4]} ${m(this,En)[5]}`];for(let n=6,i=m(this,En).length;n<i;n+=6){if(isNaN(m(this,En)[n])){t.push(`L${m(this,En)[n+4]} ${m(this,En)[n+5]}`);continue}t.push(`C${m(this,En)[n]} ${m(this,En)[n+1]} ${m(this,En)[n+2]} ${m(this,En)[n+3]} ${m(this,En)[n+4]} ${m(this,En)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,i,a],s){const l=i-t,u=a-n;let d,h;switch(s){case 0:d=Je._rescale(m(this,En),t,a,l,-u),h=Je._rescale(m(this,Mi),t,a,l,-u);break;case 90:d=Je._rescaleAndSwap(m(this,En),t,n,l,u),h=Je._rescaleAndSwap(m(this,Mi),t,n,l,u);break;case 180:d=Je._rescale(m(this,En),i,n,-l,u),h=Je._rescale(m(this,Mi),i,n,-l,u);break;case 270:d=Je._rescaleAndSwap(m(this,En),i,a,-l,-u),h=Je._rescaleAndSwap(m(this,Mi),i,a,-l,-u);break}return{outline:Array.from(d),points:[Array.from(h)]}}get box(){return m(this,ld)}newOutliner(t,n,i,a,s,l=0){return new m1(t,n,i,a,s,l)}getNewOutline(t,n){const[i,a,s,l]=m(this,ld),[u,d,h,g]=m(this,Zf),b=s*h,y=l*g,D=i*h+u,v=a*g+d,w=this.newOutliner({x:m(this,Mi)[0]*b+D,y:m(this,Mi)[1]*y+v},m(this,Zf),m(this,Wb),t,m(this,zb),n??m(this,zo));for(let k=2;k<m(this,Mi).length;k+=2)w.add({x:m(this,Mi)[k]*b+D,y:m(this,Mi)[k+1]*y+v});return w.getOutlines()}}Zf=new WeakMap,ld=new WeakMap,zo=new WeakMap,zb=new WeakMap,Mi=new WeakMap,Wb=new WeakMap,En=new WeakMap,P1=new WeakSet,A8=function(t){const n=m(this,En);let i=n[4],a=n[5];const s=[i,a,i,a];let l=i,u=a;const d=t?Math.max:Math.min;for(let g=6,b=n.length;g<b;g+=6){const y=n[g+4],D=n[g+5];if(isNaN(n[g]))tt.pointBoundingBox(y,D,s),u<D?(l=y,u=D):u===D&&(l=d(l,y));else{const v=[1/0,1/0,-1/0,-1/0];tt.bezierBoundingBox(i,a,...n.slice(g,g+6),v),tt.rectBoundingBox(...v,s),u<v[3]?(l=v[2],u=v[3]):u===v[3]&&(l=d(l,v[2]))}i=y,a=D}const h=m(this,ld);h[0]=s[0]-m(this,zo),h[1]=s[1]-m(this,zo),h[2]=s[2]-s[0]+2*m(this,zo),h[3]=s[3]-s[1]+2*m(this,zo),this.lastPoint=[l,u]};var Hb,qb,bc,qa,$r,S8,W0,E8,T8,N_;class C_{constructor(e,t=0,n=0,i=!0){V(this,$r);V(this,Hb);V(this,qb);V(this,bc,[]);V(this,qa,[]);const a=[1/0,1/0,-1/0,-1/0],s=10**-4;for(const{x:y,y:D,width:v,height:w}of e){const k=Math.floor((y-t)/s)*s,_=Math.ceil((y+v+t)/s)*s,A=Math.floor((D-t)/s)*s,N=Math.ceil((D+w+t)/s)*s,E=[k,A,N,!0],T=[_,A,N,!1];m(this,bc).push(E,T),tt.rectBoundingBox(k,A,_,N,a)}const l=a[2]-a[0]+2*n,u=a[3]-a[1]+2*n,d=a[0]-n,h=a[1]-n,g=m(this,bc).at(i?-1:-2),b=[g[0],g[2]];for(const y of m(this,bc)){const[D,v,w]=y;y[0]=(D-d)/l,y[1]=(v-h)/u,y[2]=(w-h)/u}L(this,Hb,new Float32Array([d,h,l,u])),L(this,qb,b)}getOutlines(){m(this,bc).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of m(this,bc))t[3]?(e.push(...$(this,$r,N_).call(this,t)),$(this,$r,E8).call(this,t)):($(this,$r,T8).call(this,t),e.push(...$(this,$r,N_).call(this,t)));return $(this,$r,S8).call(this,e)}}Hb=new WeakMap,qb=new WeakMap,bc=new WeakMap,qa=new WeakMap,$r=new WeakSet,S8=function(e){const t=[],n=new Set;for(const s of e){const[l,u,d]=s;t.push([l,u,s],[l,d,s])}t.sort((s,l)=>s[1]-l[1]||s[0]-l[0]);for(let s=0,l=t.length;s<l;s+=2){const u=t[s][2],d=t[s+1][2];u.push(d),d.push(u),n.add(u),n.add(d)}const i=[];let a;for(;n.size>0;){const s=n.values().next().value;let[l,u,d,h,g]=s;n.delete(s);let b=l,y=u;for(a=[l,d],i.push(a);;){let D;if(n.has(h))D=h;else if(n.has(g))D=g;else break;n.delete(D),[l,u,d,h,g]=D,b!==l&&(a.push(b,y,l,y===u?u:d),b=l),y=y===u?d:u}a.push(b,y)}return new rW(i,m(this,Hb),m(this,qb))},W0=function(e){const t=m(this,qa);let n=0,i=t.length-1;for(;n<=i;){const a=n+i>>1,s=t[a][0];if(s===e)return a;s<e?n=a+1:i=a-1}return i+1},E8=function([,e,t]){const n=$(this,$r,W0).call(this,e);m(this,qa).splice(n,0,[e,t])},T8=function([,e,t]){const n=$(this,$r,W0).call(this,e);for(let i=n;i<m(this,qa).length;i++){const[a,s]=m(this,qa)[i];if(a!==e)break;if(a===e&&s===t){m(this,qa).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[a,s]=m(this,qa)[i];if(a!==e)break;if(a===e&&s===t){m(this,qa).splice(i,1);return}}},N_=function(e){const[t,n,i]=e,a=[[t,n,i]],s=$(this,$r,W0).call(this,i);for(let l=0;l<s;l++){const[u,d]=m(this,qa)[l];for(let h=0,g=a.length;h<g;h++){const[,b,y]=a[h];if(!(d<=b||y<=u)){if(b>=u){if(y>d)a[h][1]=d;else{if(g===1)return[];a.splice(h,1),h--,g--}continue}a[h][2]=u,y>d&&a.push([t,d,y])}}}return a};var Vb,Jf;class rW extends Je{constructor(t,n,i){super();V(this,Vb);V(this,Jf);L(this,Jf,t),L(this,Vb,n),this.lastPoint=i}toSVGPath(){const t=[];for(const n of m(this,Jf)){let[i,a]=n;t.push(`M${i} ${a}`);for(let s=2;s<n.length;s+=2){const l=n[s],u=n[s+1];l===i?(t.push(`V${u}`),a=u):u===a&&(t.push(`H${l}`),i=l)}t.push("Z")}return t.join(" ")}serialize([t,n,i,a],s){const l=[],u=i-t,d=a-n;for(const h of m(this,Jf)){const g=new Array(h.length);for(let b=0;b<h.length;b+=2)g[b]=t+h[b]*u,g[b+1]=a-h[b+1]*d;l.push(g)}return l}get box(){return m(this,Vb)}get classNamesForOutlining(){return["highlightOutline"]}}Vb=new WeakMap,Jf=new WeakMap;class U_ extends m1{newFreeDrawOutline(e,t,n,i,a,s){return new iW(e,t,n,i,a,s)}}class iW extends _8{newOutliner(e,t,n,i,a,s=0){return new U_(e,t,n,i,a,s)}}var ep,Xb,Wo,cd,Gb,li,$b,Yb,ud,ma,Li,xr,tp,Ho,Ur,np,ba,Kb,mt,R_,H0,C8,N8,U8,j_,gu,va,Lh,R8,q0,tm,j8,F8,I8,O8,M8;const Lt=class Lt extends an{constructor(t){super({...t,name:"highlightEditor"});V(this,mt);V(this,ep,null);V(this,Xb,0);V(this,Wo);V(this,cd,null);V(this,Gb,null);V(this,li,null);V(this,$b,null);V(this,Yb,0);V(this,ud,null);V(this,ma,null);V(this,Li,null);V(this,xr,!1);V(this,tp,null);V(this,Ho);V(this,Ur,null);V(this,np,"");V(this,ba);V(this,Kb,"");this.color=t.color||Lt._defaultColor,L(this,ba,t.thickness||Lt._defaultThickness),L(this,Ho,t.opacity||Lt._defaultOpacity),L(this,Wo,t.boxes||null),L(this,Kb,t.methodOfCreation||""),L(this,np,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(L(this,xr,!0),$(this,mt,H0).call(this,t),$(this,mt,gu).call(this)):m(this,Wo)&&(L(this,ep,t.anchorNode),L(this,Xb,t.anchorOffset),L(this,$b,t.focusNode),L(this,Yb,t.focusOffset),$(this,mt,R_).call(this),$(this,mt,gu).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Lt.prototype;return Dt(this,"_keyboardManager",new dy([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:m(this,xr)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:m(this,ba),methodOfCreation:m(this,Kb)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var i;an.initialize(t,n),Lt._defaultColor||(Lt._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Nt.HIGHLIGHT_COLOR:Lt._defaultColor=n;break;case Nt.HIGHLIGHT_THICKNESS:Lt._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return m(this,tp)}updateParams(t,n){switch(t){case Nt.HIGHLIGHT_COLOR:$(this,mt,C8).call(this,n);break;case Nt.HIGHLIGHT_THICKNESS:$(this,mt,N8).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Nt.HIGHLIGHT_COLOR,Lt._defaultColor],[Nt.HIGHLIGHT_THICKNESS,Lt._defaultThickness]]}get propertiesToUpdate(){return[[Nt.HIGHLIGHT_COLOR,this.color||Lt._defaultColor],[Nt.HIGHLIGHT_THICKNESS,m(this,ba)||Lt._defaultThickness],[Nt.HIGHLIGHT_FREE,m(this,xr)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",L(this,Gb,new f1({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition($(this,mt,tm).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,$(this,mt,tm).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){$(this,mt,j_).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&($(this,mt,gu).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let n=!1;this.parent&&!t?$(this,mt,j_).call(this):t&&($(this,mt,gu).call(this,t),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var a,s,l;const{drawLayer:n}=this.parent;let i;m(this,xr)?(t=(t-this.rotation+360)%360,i=$(a=Lt,va,Lh).call(a,m(this,ma).box,t)):i=$(s=Lt,va,Lh).call(s,[this.x,this.y,this.width,this.height],t),n.updateProperties(m(this,Li),{bbox:i,root:{"data-main-rotation":t}}),n.updateProperties(m(this,Ur),{bbox:$(l=Lt,va,Lh).call(l,m(this,li).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();m(this,np)&&(t.setAttribute("aria-label",m(this,np)),t.setAttribute("role","mark")),m(this,xr)?t.classList.add("free"):this.div.addEventListener("keydown",$(this,mt,R8).bind(this),{signal:this._uiManager._signal});const n=L(this,ud,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=m(this,cd);const[i,a]=this.parentDimensions;return this.setDims(this.width*i,this.height*a),eF(this,m(this,ud),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(m(this,Ur),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(m(this,Ur),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:$(this,mt,q0).call(this,!0);break;case 1:case 3:$(this,mt,q0).call(this,!1);break}}select(){var t;super.select(),m(this,Ur)&&((t=this.parent)==null||t.drawLayer.updateProperties(m(this,Ur),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),m(this,Ur)&&((t=this.parent)==null||t.drawLayer.updateProperties(m(this,Ur),{rootClass:{selected:!1}}),m(this,xr)||$(this,mt,q0).call(this,!1))}get _mustFixPosition(){return!m(this,xr)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(m(this,Li),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(m(this,Ur),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:i,x:a,y:s}){const{x:l,y:u,width:d,height:h}=i.getBoundingClientRect(),g=new AbortController,b=t.combinedSignal(g),y=D=>{g.abort(),$(this,va,O8).call(this,t,D)};window.addEventListener("blur",y,{signal:b}),window.addEventListener("pointerup",y,{signal:b}),window.addEventListener("pointerdown",Mn,{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",Sa,{signal:b}),i.addEventListener("pointermove",$(this,va,I8).bind(this,t),{signal:b}),this._freeHighlight=new U_({x:a,y:s},[l,u,d,h],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,i){var v,w,k,_;let a=null;if(t instanceof d8){const{data:{quadPoints:A,rect:N,rotation:E,id:T,color:R,opacity:M,popupRef:I,contentsObj:F},parent:{page:{pageNumber:G}}}=t;a=t={annotationType:pt.HIGHLIGHT,color:Array.from(R),opacity:M,quadPoints:A,boxes:null,pageIndex:G-1,rect:N.slice(0),rotation:E,annotationElementId:T,id:T,deleted:!1,popupRef:I,comment:(F==null?void 0:F.str)||null}}else if(t instanceof bS){const{data:{inkLists:A,rect:N,rotation:E,id:T,color:R,borderStyle:{rawWidth:M},popupRef:I,contentsObj:F},parent:{page:{pageNumber:G}}}=t;a=t={annotationType:pt.HIGHLIGHT,color:Array.from(R),thickness:M,inkLists:A,boxes:null,pageIndex:G-1,rect:N.slice(0),rotation:E,annotationElementId:T,id:T,deleted:!1,popupRef:I,comment:(F==null?void 0:F.str)||null}}const{color:s,quadPoints:l,inkLists:u,opacity:d}=t,h=await super.deserialize(t,n,i);h.color=tt.makeHexColor(...s),L(h,Ho,d||1),u&&L(h,ba,t.thickness),h._initialData=a,t.comment&&h.setCommentData(t.comment);const[g,b]=h.pageDimensions,[y,D]=h.pageTranslation;if(l){const A=L(h,Wo,[]);for(let N=0;N<l.length;N+=8)A.push({x:(l[N]-y)/g,y:1-(l[N+1]-D)/b,width:(l[N+2]-l[N])/g,height:(l[N+1]-l[N+5])/b});$(v=h,mt,R_).call(v),$(w=h,mt,gu).call(w),h.rotate(h.rotation)}else if(u){L(h,xr,!0);const A=u[0],N={x:A[0]-y,y:b-(A[1]-D)},E=new U_(N,[0,0,g,b],1,m(h,ba)/2,!0,.001);for(let M=0,I=A.length;M<I;M+=2)N.x=A[M]-y,N.y=b-(A[M+1]-D),E.add(N);const{id:T,clipPathId:R}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);$(k=h,mt,H0).call(k,{highlightOutlines:E.getOutlines(),highlightId:T,clipPathId:R}),$(_=h,mt,gu).call(_),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getPDFRect(),i=an._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),a={annotationType:pt.HIGHLIGHT,color:i,opacity:m(this,Ho),thickness:m(this,ba),quadPoints:$(this,mt,j8).call(this),outlines:$(this,mt,F8).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:$(this,mt,tm).call(this),structTreeParentId:this._structTreeParentId};return this.addComment(a),this.annotationElementId&&!$(this,mt,M8).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const n={rect:this.getPDFRect()};return this.hasEditedComment&&(n.popup=this.comment),t.updateEdited(n),null}static canCreateNewEmptyEditor(){return!1}};ep=new WeakMap,Xb=new WeakMap,Wo=new WeakMap,cd=new WeakMap,Gb=new WeakMap,li=new WeakMap,$b=new WeakMap,Yb=new WeakMap,ud=new WeakMap,ma=new WeakMap,Li=new WeakMap,xr=new WeakMap,tp=new WeakMap,Ho=new WeakMap,Ur=new WeakMap,np=new WeakMap,ba=new WeakMap,Kb=new WeakMap,mt=new WeakSet,R_=function(){const t=new C_(m(this,Wo),.001);L(this,ma,t.getOutlines()),[this.x,this.y,this.width,this.height]=m(this,ma).box;const n=new C_(m(this,Wo),.0025,.001,this._uiManager.direction==="ltr");L(this,li,n.getOutlines());const{lastPoint:i}=m(this,li);L(this,tp,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},H0=function({highlightOutlines:t,highlightId:n,clipPathId:i}){var g,b;if(L(this,ma,t),L(this,li,t.getNewOutline(m(this,ba)/2+1.5,.0025)),n>=0)L(this,Li,n),L(this,cd,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),L(this,Ur,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:m(this,li).box,path:{d:m(this,li).toSVGPath()}},!0));else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(m(this,Li),{bbox:$(g=Lt,va,Lh).call(g,m(this,ma).box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(m(this,Ur),{bbox:$(b=Lt,va,Lh).call(b,m(this,li).box,y),path:{d:m(this,li).toSVGPath()}})}const[s,l,u,d]=t.box;switch(this.rotation){case 0:this.x=s,this.y=l,this.width=u,this.height=d;break;case 90:{const[y,D]=this.parentDimensions;this.x=l,this.y=1-s,this.width=u*D/y,this.height=d*y/D;break}case 180:this.x=1-s,this.y=1-l,this.width=u,this.height=d;break;case 270:{const[y,D]=this.parentDimensions;this.x=1-l,this.y=s,this.width=u*D/y,this.height=d*y/D;break}}const{lastPoint:h}=m(this,li);L(this,tp,[(h[0]-s)/u,(h[1]-l)/d])},C8=function(t){const n=(s,l)=>{var u,d;this.color=s,L(this,Ho,l),(u=this.parent)==null||u.drawLayer.updateProperties(m(this,Li),{root:{fill:s,"fill-opacity":l}}),(d=m(this,Gb))==null||d.updateColor(s)},i=this.color,a=m(this,Ho);this.addCommands({cmd:n.bind(this,t,Lt._defaultOpacity),undo:n.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},N8=function(t){const n=m(this,ba),i=a=>{L(this,ba,a),$(this,mt,U8).call(this,a)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},U8=function(t){if(!m(this,xr))return;$(this,mt,H0).call(this,{highlightOutlines:m(this,ma).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)},j_=function(){m(this,Li)===null||!this.parent||(this.parent.drawLayer.remove(m(this,Li)),L(this,Li,null),this.parent.drawLayer.remove(m(this,Ur)),L(this,Ur,null))},gu=function(t=this.parent){m(this,Li)===null&&({id:qn(this,Li)._,clipPathId:qn(this,cd)._}=t.drawLayer.draw({bbox:m(this,ma).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":m(this,Ho)},rootClass:{highlight:!0,free:m(this,xr)},path:{d:m(this,ma).toSVGPath()}},!1,!0),L(this,Ur,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:m(this,xr)},bbox:m(this,li).box,path:{d:m(this,li).toSVGPath()}},m(this,xr))),m(this,ud)&&(m(this,ud).style.clipPath=m(this,cd)))},va=new WeakSet,Lh=function([t,n,i,a],s){switch(s){case 90:return[1-n-a,t,a,i];case 180:return[1-t-i,1-n-a,i,a];case 270:return[n,1-t-i,a,i]}return[t,n,i,a]},R8=function(t){Lt._keyboardManager.exec(this,t)},q0=function(t){if(!m(this,ep))return;const n=window.getSelection();t?n.setPosition(m(this,ep),m(this,Xb)):n.setPosition(m(this,$b),m(this,Yb))},tm=function(){return m(this,xr)?this.rotation:0},j8=function(){if(m(this,xr))return null;const[t,n]=this.pageDimensions,[i,a]=this.pageTranslation,s=m(this,Wo),l=new Float32Array(s.length*8);let u=0;for(const{x:d,y:h,width:g,height:b}of s){const y=d*t+i,D=(1-h)*n+a;l[u]=l[u+4]=y,l[u+1]=l[u+3]=D,l[u+2]=l[u+6]=y+g*t,l[u+5]=l[u+7]=D-b*n,u+=8}return l},F8=function(t){return m(this,ma).serialize(t,$(this,mt,tm).call(this))},I8=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},O8=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},M8=function(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((i,a)=>i!==n[a])},V(Lt,va),We(Lt,"_defaultColor",null),We(Lt,"_defaultOpacity",1),We(Lt,"_defaultThickness",12),We(Lt,"_type","highlight"),We(Lt,"_editorType",pt.HIGHLIGHT),We(Lt,"_freeHighlightId",-1),We(Lt,"_freeHighlight",null),We(Lt,"_freeHighlightClipId","");let b1=Lt;var dd;class L8{constructor(){V(this,dd,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){m(this,dd)[e]=t}toSVGProperties(){const e=m(this,dd);return L(this,dd,Object.create(null)),{root:e}}reset(){L(this,dd,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Jt("Not implemented")}}dd=new WeakMap;var Bi,rp,sr,hd,fd,yc,xc,vc,pd,jt,F_,I_,O_,nm,B8,V0,rm,Bh;const et=class et extends an{constructor(t){super(t);V(this,jt);V(this,Bi,null);V(this,rp);We(this,"_colorPicker",null);We(this,"_drawId",null);L(this,rp,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&($(this,jt,F_).call(this,t),$(this,jt,nm).call(this))}static _mergeSVGProperties(t,n){const i=new Set(Object.keys(t));for(const[a,s]of Object.entries(n))i.has(a)?Object.assign(t[a],s):t[a]=s;return t}static getDefaultDrawingOptions(t){Jt("Not implemented")}static get typesMap(){Jt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(m(et,sr).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)t.push([i,n[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[i,a]of this.constructor.typesMap)t.push([i,n[a]]);return t}_updateProperty(t,n,i){const a=this._drawingOptions,s=a[n],l=u=>{var h,g;a.updateProperty(n,u);const d=m(this,Bi).updateProperty(n,u);d&&$(this,jt,rm).call(this,d),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&((g=this._colorPicker)==null||g.update(u))};this.addCommands({cmd:l.bind(this,i),undo:l.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,et._mergeSVGProperties(m(this,Bi).getPathResizingSVGProperties($(this,jt,V0).call(this)),{bbox:$(this,jt,Bh).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,et._mergeSVGProperties(m(this,Bi).getPathResizedSVGProperties($(this,jt,V0).call(this)),{bbox:$(this,jt,Bh).call(this)}))}_onTranslating(t,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:$(this,jt,Bh).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,et._mergeSVGProperties(m(this,Bi).getPathTranslatedSVGProperties($(this,jt,V0).call(this),this.parentDimensions),{bbox:$(this,jt,Bh).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,m(this,rp)&&(L(this,rp,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){$(this,jt,O_).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&($(this,jt,nm).call(this),$(this,jt,rm).call(this,m(this,Bi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),$(this,jt,O_).call(this)):t&&(this._uiManager.addShouldRescale(this),$(this,jt,nm).call(this,t),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,et._mergeSVGProperties({bbox:$(this,jt,Bh).call(this)},m(this,Bi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&$(this,jt,rm).call(this,m(this,Bi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal";const[s,l]=this.parentDimensions;return this.setDims(this.width*s,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),i}static createDrawerInstance(t,n,i,a,s){Jt("Not implemented")}static startDrawing(t,n,i,a){var w;const{target:s,offsetX:l,offsetY:u,pointerId:d,pointerType:h}=a;if(m(et,xc)&&m(et,xc)!==h)return;const{viewport:{rotation:g}}=t,{width:b,height:y}=s.getBoundingClientRect(),D=L(et,hd,new AbortController),v=t.combinedSignal(D);if(m(et,yc)||L(et,yc,d),m(et,xc)??L(et,xc,h),window.addEventListener("pointerup",k=>{var _;m(et,yc)===k.pointerId?this._endDraw(k):(_=m(et,vc))==null||_.delete(k.pointerId)},{signal:v}),window.addEventListener("pointercancel",k=>{var _;m(et,yc)===k.pointerId?this._currentParent.endDrawingSession():(_=m(et,vc))==null||_.delete(k.pointerId)},{signal:v}),window.addEventListener("pointerdown",k=>{m(et,xc)===k.pointerType&&((m(et,vc)||L(et,vc,new Set)).add(k.pointerId),m(et,sr).isCancellable()&&(m(et,sr).removeLastElement(),m(et,sr).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Sa,{signal:v}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),s.addEventListener("touchmove",k=>{k.timeStamp===m(et,pd)&&Mn(k)},{signal:v}),t.toggleDrawing(),(w=n._editorUndoBar)==null||w.hide(),m(et,sr)){t.drawLayer.updateProperties(this._currentDrawId,m(et,sr).startNew(l,u,b,y,g));return}n.updateUIForDefaultProperties(this),L(et,sr,this.createDrawerInstance(l,u,b,y,g)),L(et,fd,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(m(et,fd).toSVGProperties(),m(et,sr).defaultSVGProperties),!0,!1)}static _drawMove(t){var s;if(L(et,pd,-1),!m(et,sr))return;const{offsetX:n,offsetY:i,pointerId:a}=t;if(m(et,yc)===a){if(((s=m(et,vc))==null?void 0:s.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,m(et,sr).add(n,i)),L(et,pd,t.timeStamp),Mn(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,L(et,sr,null),L(et,fd,null),L(et,xc,null),L(et,pd,NaN)),m(et,hd)&&(m(et,hd).abort(),L(et,hd,null),L(et,yc,NaN),L(et,vc,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,m(et,sr).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=m(et,sr),a=this._currentDrawId,s=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(a,i.setLastElement(s))},undo:()=>{n.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:Nt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Nt.DRAW_STEP),!m(et,sr).isEmpty()){const{pageDimensions:[i,a],scale:s}=n,l=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:m(et,sr).getOutlines(i*s,a*s,s,this._INNER_MARGIN),drawingOptions:m(et,fd),mustBeCommitted:!t});return this._cleanup(!0),l}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,i,a,s,l){Jt("Not implemented")}static async deserialize(t,n,i){var g,b;const{rawDims:{pageWidth:a,pageHeight:s,pageX:l,pageY:u}}=n.viewport,d=this.deserializeDraw(l,u,a,s,this._INNER_MARGIN,t),h=await super.deserialize(t,n,i);return h.createDrawingOptions(t),$(g=h,jt,F_).call(g,{drawOutlines:d}),$(b=h,jt,nm).call(b),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[n,i]=this.pageTranslation,[a,s]=this.pageDimensions;return m(this,Bi).serialize([n,i,a,s],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Bi=new WeakMap,rp=new WeakMap,sr=new WeakMap,hd=new WeakMap,fd=new WeakMap,yc=new WeakMap,xc=new WeakMap,vc=new WeakMap,pd=new WeakMap,jt=new WeakSet,F_=function({drawOutlines:t,drawId:n,drawingOptions:i}){L(this,Bi,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=$(this,jt,I_).call(this,t,this.parent),$(this,jt,rm).call(this,t.box)},I_=function(t,n){const{id:i}=n.drawLayer.draw(et._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},O_=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},nm=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=$(this,jt,I_).call(this,m(this,Bi),t)}},B8=function([t,n,i,a]){const{parentDimensions:[s,l],rotation:u}=this;switch(u){case 90:return[n,1-t,i*(l/s),a*(s/l)];case 180:return[1-t,1-n,i,a];case 270:return[1-n,t,i*(l/s),a*(s/l)];default:return[t,n,i,a]}},V0=function(){const{x:t,y:n,width:i,height:a,parentDimensions:[s,l],rotation:u}=this;switch(u){case 90:return[1-n,t,i*(s/l),a*(l/s)];case 180:return[1-t,1-n,i,a];case 270:return[n,1-t,i*(s/l),a*(l/s)];default:return[t,n,i,a]}},rm=function(t){if([this.x,this.y,this.width,this.height]=$(this,jt,B8).call(this,t),this.div){this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)}this._onResized()},Bh=function(){const{x:t,y:n,width:i,height:a,rotation:s,parentRotation:l,parentDimensions:[u,d]}=this;switch((s*4+l)/90){case 1:return[1-n-a,t,a,i];case 2:return[1-t-i,1-n-a,i,a];case 3:return[n,1-t-i,a,i];case 4:return[t,n-i*(u/d),a*(d/u),i*(u/d)];case 5:return[1-n,t,i*(u/d),a*(d/u)];case 6:return[1-t-a*(d/u),1-n,a*(d/u),i*(u/d)];case 7:return[n-i*(u/d),1-t-a*(d/u),i*(u/d),a*(d/u)];case 8:return[t-i,n-a,i,a];case 9:return[1-n,t-i,a,i];case 10:return[1-t,1-n,i,a];case 11:return[n-a,1-t,a,i];case 12:return[t-a*(d/u),n,a*(d/u),i*(u/d)];case 13:return[1-n-i*(u/d),t-a*(d/u),i*(u/d),a*(d/u)];case 14:return[1-t,1-n-i*(u/d),a*(d/u),i*(u/d)];case 15:return[n,1-t,i*(u/d),a*(d/u)];default:return[t,n,i,a]}},We(et,"_currentDrawId",-1),We(et,"_currentParent",null),V(et,sr,null),V(et,hd,null),V(et,fd,null),V(et,yc,NaN),V(et,xc,null),V(et,vc,null),V(et,pd,NaN),We(et,"_INNER_MARGIN",3);let y1=et;var Es,or,lr,gd,ip,Pr,vr,ya,md,bd,yd,ap,X0;class aW{constructor(e,t,n,i,a,s){V(this,ap);V(this,Es,new Float64Array(6));V(this,or);V(this,lr);V(this,gd);V(this,ip);V(this,Pr);V(this,vr,"");V(this,ya,0);V(this,md,new fy);V(this,bd);V(this,yd);L(this,bd,n),L(this,yd,i),L(this,gd,a),L(this,ip,s),[e,t]=$(this,ap,X0).call(this,e,t);const l=L(this,or,[NaN,NaN,NaN,NaN,e,t]);L(this,Pr,[e,t]),L(this,lr,[{line:l,points:m(this,Pr)}]),m(this,Es).set(l,0)}updateProperty(e,t){e==="stroke-width"&&L(this,ip,t)}isEmpty(){return!m(this,lr)||m(this,lr).length===0}isCancellable(){return m(this,Pr).length<=10}add(e,t){[e,t]=$(this,ap,X0).call(this,e,t);const[n,i,a,s]=m(this,Es).subarray(2,6),l=e-a,u=t-s;return Math.hypot(m(this,bd)*l,m(this,yd)*u)<=2?null:(m(this,Pr).push(e,t),isNaN(n)?(m(this,Es).set([a,s,e,t],2),m(this,or).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(m(this,Es)[0])&&m(this,or).splice(6,6),m(this,Es).set([n,i,a,s,e,t],0),m(this,or).push(...Je.createBezierPoints(n,i,a,s,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(m(this,Pr).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,a){L(this,bd,n),L(this,yd,i),L(this,gd,a),[e,t]=$(this,ap,X0).call(this,e,t);const s=L(this,or,[NaN,NaN,NaN,NaN,e,t]);L(this,Pr,[e,t]);const l=m(this,lr).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),m(this,lr).push({line:s,points:m(this,Pr)}),m(this,Es).set(s,0),L(this,ya,0),this.toSVGPath(),null}getLastElement(){return m(this,lr).at(-1)}setLastElement(e){return m(this,lr)?(m(this,lr).push(e),L(this,or,e.line),L(this,Pr,e.points),L(this,ya,0),{path:{d:this.toSVGPath()}}):m(this,md).setLastElement(e)}removeLastElement(){if(!m(this,lr))return m(this,md).removeLastElement();m(this,lr).pop(),L(this,vr,"");for(let e=0,t=m(this,lr).length;e<t;e++){const{line:n,points:i}=m(this,lr)[e];L(this,or,n),L(this,Pr,i),L(this,ya,0),this.toSVGPath()}return{path:{d:m(this,vr)}}}toSVGPath(){const e=Je.svgRound(m(this,or)[4]),t=Je.svgRound(m(this,or)[5]);if(m(this,Pr).length===2)return L(this,vr,`${m(this,vr)} M ${e} ${t} Z`),m(this,vr);if(m(this,Pr).length<=6){const i=m(this,vr).lastIndexOf("M");L(this,vr,`${m(this,vr).slice(0,i)} M ${e} ${t}`),L(this,ya,6)}if(m(this,Pr).length===4){const i=Je.svgRound(m(this,or)[10]),a=Je.svgRound(m(this,or)[11]);return L(this,vr,`${m(this,vr)} L ${i} ${a}`),L(this,ya,12),m(this,vr)}const n=[];m(this,ya)===0&&(n.push(`M ${e} ${t}`),L(this,ya,6));for(let i=m(this,ya),a=m(this,or).length;i<a;i+=6){const[s,l,u,d,h,g]=m(this,or).slice(i,i+6).map(Je.svgRound);n.push(`C${s} ${l} ${u} ${d} ${h} ${g}`)}return L(this,vr,m(this,vr)+n.join(" ")),L(this,ya,m(this,or).length),m(this,vr)}getOutlines(e,t,n,i){const a=m(this,lr).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),m(this,md).build(m(this,lr),e,t,n,m(this,gd),m(this,ip),i),L(this,Es,null),L(this,or,null),L(this,lr,null),L(this,vr,null),m(this,md)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Es=new WeakMap,or=new WeakMap,lr=new WeakMap,gd=new WeakMap,ip=new WeakMap,Pr=new WeakMap,vr=new WeakMap,ya=new WeakMap,md=new WeakMap,bd=new WeakMap,yd=new WeakMap,ap=new WeakSet,X0=function(e,t){return Je._normalizePoint(e,t,m(this,bd),m(this,yd),m(this,gd))};var zr,Qb,Zb,Pi,Ts,Cs,sp,op,xd,kr,so,P8,z8,W8;class fy extends Je{constructor(){super(...arguments);V(this,kr);V(this,zr);V(this,Qb,0);V(this,Zb);V(this,Pi);V(this,Ts);V(this,Cs);V(this,sp);V(this,op);V(this,xd)}build(t,n,i,a,s,l,u){L(this,Ts,n),L(this,Cs,i),L(this,sp,a),L(this,op,s),L(this,xd,l),L(this,Zb,u??0),L(this,Pi,t),$(this,kr,z8).call(this)}get thickness(){return m(this,xd)}setLastElement(t){return m(this,Pi).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return m(this,Pi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of m(this,Pi)){if(t.push(`M${Je.svgRound(n[4])} ${Je.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${Je.svgRound(n[10])} ${Je.svgRound(n[11])}`);continue}for(let i=6,a=n.length;i<a;i+=6){const[s,l,u,d,h,g]=n.subarray(i,i+6).map(Je.svgRound);t.push(`C${s} ${l} ${u} ${d} ${h} ${g}`)}}return t.join("")}serialize([t,n,i,a],s){const l=[],u=[],[d,h,g,b]=$(this,kr,P8).call(this);let y,D,v,w,k,_,A,N,E;switch(m(this,op)){case 0:E=Je._rescale,y=t,D=n+a,v=i,w=-a,k=t+d*i,_=n+(1-h-b)*a,A=t+(d+g)*i,N=n+(1-h)*a;break;case 90:E=Je._rescaleAndSwap,y=t,D=n,v=i,w=a,k=t+h*i,_=n+d*a,A=t+(h+b)*i,N=n+(d+g)*a;break;case 180:E=Je._rescale,y=t+i,D=n,v=-i,w=a,k=t+(1-d-g)*i,_=n+h*a,A=t+(1-d)*i,N=n+(h+b)*a;break;case 270:E=Je._rescaleAndSwap,y=t+i,D=n+a,v=-i,w=-a,k=t+(1-h-b)*i,_=n+(1-d-g)*a,A=t+(1-h)*i,N=n+(1-d)*a;break}for(const{line:T,points:R}of m(this,Pi))l.push(E(T,y,D,v,w,s?new Array(T.length):null)),u.push(E(R,y,D,v,w,s?new Array(R.length):null));return{lines:l,points:u,rect:[k,_,A,N]}}static deserialize(t,n,i,a,s,{paths:{lines:l,points:u},rotation:d,thickness:h}){const g=[];let b,y,D,v,w;switch(d){case 0:w=Je._rescale,b=-t/i,y=n/a+1,D=1/i,v=-1/a;break;case 90:w=Je._rescaleAndSwap,b=-n/a,y=-t/i,D=1/a,v=1/i;break;case 180:w=Je._rescale,b=t/i+1,y=-n/a,D=-1/i,v=1/a;break;case 270:w=Je._rescaleAndSwap,b=n/a+1,y=t/i+1,D=-1/a,v=-1/i;break}if(!l){l=[];for(const _ of u){const A=_.length;if(A===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1]]));continue}if(A===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1],NaN,NaN,NaN,NaN,_[2],_[3]]));continue}const N=new Float32Array(3*(A-2));l.push(N);let[E,T,R,M]=_.subarray(0,4);N.set([NaN,NaN,NaN,NaN,E,T],0);for(let I=4;I<A;I+=2){const F=_[I],G=_[I+1];N.set(Je.createBezierPoints(E,T,R,M,F,G),(I-2)*3),[E,T,R,M]=[R,M,F,G]}}}for(let _=0,A=l.length;_<A;_++)g.push({line:w(l[_].map(N=>N??NaN),b,y,D,v),points:w(u[_].map(N=>N??NaN),b,y,D,v)});const k=new this.prototype.constructor;return k.build(g,i,a,1,d,h,s),k}get box(){return m(this,zr)}updateProperty(t,n){return t==="stroke-width"?$(this,kr,W8).call(this,n):null}updateParentDimensions([t,n],i){const[a,s]=$(this,kr,so).call(this);L(this,Ts,t),L(this,Cs,n),L(this,sp,i);const[l,u]=$(this,kr,so).call(this),d=l-a,h=u-s,g=m(this,zr);return g[0]-=d,g[1]-=h,g[2]+=2*d,g[3]+=2*h,g}updateRotation(t){return L(this,Qb,t),{path:{transform:this.rotationTransform}}}get viewBox(){return m(this,zr).map(Je.svgRound).join(" ")}get defaultProperties(){const[t,n]=m(this,zr);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Je.svgRound(t)} ${Je.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=m(this,zr);let i=0,a=0,s=0,l=0,u=0,d=0;switch(m(this,Qb)){case 90:a=n/t,s=-t/n,u=t;break;case 180:i=-1,l=-1,u=t,d=n;break;case 270:a=-n/t,s=t/n,d=n;break;default:return""}return`matrix(${i} ${a} ${s} ${l} ${Je.svgRound(u)} ${Je.svgRound(d)})`}getPathResizingSVGProperties([t,n,i,a]){const[s,l]=$(this,kr,so).call(this),[u,d,h,g]=m(this,zr);if(Math.abs(h-s)<=Je.PRECISION||Math.abs(g-l)<=Je.PRECISION){const w=t+i/2-(u+h/2),k=n+a/2-(d+g/2);return{path:{"transform-origin":`${Je.svgRound(t)} ${Je.svgRound(n)}`,transform:`${this.rotationTransform} translate(${w} ${k})`}}}const b=(i-2*s)/(h-2*s),y=(a-2*l)/(g-2*l),D=h/i,v=g/a;return{path:{"transform-origin":`${Je.svgRound(u)} ${Je.svgRound(d)}`,transform:`${this.rotationTransform} scale(${D} ${v}) translate(${Je.svgRound(s)} ${Je.svgRound(l)}) scale(${b} ${y}) translate(${Je.svgRound(-s)} ${Je.svgRound(-l)})`}}}getPathResizedSVGProperties([t,n,i,a]){const[s,l]=$(this,kr,so).call(this),u=m(this,zr),[d,h,g,b]=u;if(u[0]=t,u[1]=n,u[2]=i,u[3]=a,Math.abs(g-s)<=Je.PRECISION||Math.abs(b-l)<=Je.PRECISION){const k=t+i/2-(d+g/2),_=n+a/2-(h+b/2);for(const{line:A,points:N}of m(this,Pi))Je._translate(A,k,_,A),Je._translate(N,k,_,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Je.svgRound(t)} ${Je.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(i-2*s)/(g-2*s),D=(a-2*l)/(b-2*l),v=-y*(d+s)+t+s,w=-D*(h+l)+n+l;if(y!==1||D!==1||v!==0||w!==0)for(const{line:k,points:_}of m(this,Pi))Je._rescale(k,v,w,y,D,k),Je._rescale(_,v,w,y,D,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Je.svgRound(t)} ${Je.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],i){const[a,s]=i,l=m(this,zr),u=t-l[0],d=n-l[1];if(m(this,Ts)===a&&m(this,Cs)===s)for(const{line:h,points:g}of m(this,Pi))Je._translate(h,u,d,h),Je._translate(g,u,d,g);else{const h=m(this,Ts)/a,g=m(this,Cs)/s;L(this,Ts,a),L(this,Cs,s);for(const{line:b,points:y}of m(this,Pi))Je._rescale(b,u,d,h,g,b),Je._rescale(y,u,d,h,g,y);l[2]*=h,l[3]*=g}return l[0]=t,l[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Je.svgRound(t)} ${Je.svgRound(n)}`}}}get defaultSVGProperties(){const t=m(this,zr);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Je.svgRound(t[0])} ${Je.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}zr=new WeakMap,Qb=new WeakMap,Zb=new WeakMap,Pi=new WeakMap,Ts=new WeakMap,Cs=new WeakMap,sp=new WeakMap,op=new WeakMap,xd=new WeakMap,kr=new WeakSet,so=function(t=m(this,xd)){const n=m(this,Zb)+t/2*m(this,sp);return m(this,op)%180===0?[n/m(this,Ts),n/m(this,Cs)]:[n/m(this,Cs),n/m(this,Ts)]},P8=function(){const[t,n,i,a]=m(this,zr),[s,l]=$(this,kr,so).call(this,0);return[t+s,n+l,i-2*s,a-2*l]},z8=function(){const t=L(this,zr,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of m(this,Pi)){if(a.length<=12){for(let u=4,d=a.length;u<d;u+=6)tt.pointBoundingBox(a[u],a[u+1],t);continue}let s=a[4],l=a[5];for(let u=6,d=a.length;u<d;u+=6){const[h,g,b,y,D,v]=a.subarray(u,u+6);tt.bezierBoundingBox(s,l,h,g,b,y,D,v,t),s=D,l=v}}const[n,i]=$(this,kr,so).call(this);t[0]=qr(t[0]-n,0,1),t[1]=qr(t[1]-i,0,1),t[2]=qr(t[2]+n,0,1),t[3]=qr(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},W8=function(t){const[n,i]=$(this,kr,so).call(this);L(this,xd,t);const[a,s]=$(this,kr,so).call(this),[l,u]=[a-n,s-i],d=m(this,zr);return d[0]-=l,d[1]-=u,d[2]+=2*l,d[3]+=2*u,d};class Sv extends L8{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:an._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Sv(this._viewParameters);return e.updateAll(this),e}}var z1,H8;const Vh=class Vh extends y1{constructor(t){super({...t,name:"inkEditor"});V(this,z1);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){an.initialize(t,n),this._defaultDrawingOptions=new Sv(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Dt(this,"typesMap",new Map([[Nt.INK_THICKNESS,"stroke-width"],[Nt.INK_COLOR,"stroke"],[Nt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,i,a,s){return new aW(t,n,i,a,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,i,a,s,l){return fy.deserialize(t,n,i,a,s,l)}static async deserialize(t,n,i){let a=null;if(t instanceof bS){const{data:{inkLists:l,rect:u,rotation:d,id:h,color:g,opacity:b,borderStyle:{rawWidth:y},popupRef:D,contentsObj:v},parent:{page:{pageNumber:w}}}=t;a=t={annotationType:pt.INK,color:Array.from(g),thickness:y,opacity:b,paths:{points:l},boxes:null,pageIndex:w-1,rect:u.slice(0),rotation:d,annotationElementId:h,id:h,deleted:!1,popupRef:D,comment:(v==null?void 0:v.str)||null}}const s=await super.deserialize(t,n,i);return s._initialData=a,t.comment&&s.setCommentData(t.comment),s}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new p1(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Nt.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:i}){this._drawingOptions=Vh.getDefaultDrawingOptions({stroke:tt.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i,rect:a}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":l,"stroke-width":u}}=this,d={annotationType:pt.INK,color:an._colorManager.convert(s),opacity:l,thickness:u,paths:{lines:n,points:i},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(d),t?(d.isCopy=!0,d):this.annotationElementId&&!$(this,z1,H8).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:n,rect:i}=this.serializeDraw(!1),a={rect:i,thickness:this._drawingOptions["stroke-width"],points:n};return this.hasEditedComment&&(a.popup=this.comment),t.updateEdited(a),null}};z1=new WeakSet,H8=function(t){const{color:n,thickness:i,opacity:a,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,u)=>l!==n[u])||t.thickness!==i||t.opacity!==a||t.pageIndex!==s},We(Vh,"_type","ink"),We(Vh,"_editorType",pt.INK),We(Vh,"_defaultDrawingOptions",null);let M_=Vh;class L_ extends fy{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Yx=8,Ig=3;var vd,zt,B_,Va,q8,V8,P_,G0,X8,G8,$8,z_,W_,Y8;class Yo{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:i},a,s,l,u){let d=new OffscreenCanvas(1,1),h=d.getContext("2d",{alpha:!1});const g=200,b=h.font=`${n} ${i} ${g}px ${t}`,{actualBoundingBoxLeft:y,actualBoundingBoxRight:D,actualBoundingBoxAscent:v,actualBoundingBoxDescent:w,fontBoundingBoxAscent:k,fontBoundingBoxDescent:_,width:A}=h.measureText(e),N=1.5,E=Math.ceil(Math.max(Math.abs(y)+Math.abs(D)||0,A)*N),T=Math.ceil(Math.max(Math.abs(v)+Math.abs(w)||g,Math.abs(k)+Math.abs(_)||g)*N);d=new OffscreenCanvas(E,T),h=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=b,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,E,T),h.fillStyle="black",h.fillText(e,E*(N-1)/2,T*(3-N)/2);const R=$(this,zt,z_).call(this,h.getImageData(0,0,E,T).data),M=$(this,zt,$8).call(this,R),I=$(this,zt,W_).call(this,M),F=$(this,zt,P_).call(this,R,E,T,I);return this.processDrawnLines({lines:{curves:F,width:E,height:T},pageWidth:a,pageHeight:s,rotation:l,innerMargin:u,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,a){const[s,l,u]=$(this,zt,Y8).call(this,e),[d,h]=$(this,zt,G8).call(this,s,l,u,Math.hypot(l,u)*m(this,vd).sigmaSFactor,m(this,vd).sigmaR,m(this,vd).kernelSize),g=$(this,zt,W_).call(this,h),b=$(this,zt,P_).call(this,d,l,u,g);return this.processDrawnLines({lines:{curves:b,width:l,height:u},pageWidth:t,pageHeight:n,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:a,mustSmooth:s,areContours:l}){i%180!==0&&([t,n]=[n,t]);const{curves:u,width:d,height:h}=e,g=e.thickness??0,b=[],y=Math.min(t/d,n/h),D=y/t,v=y/n,w=[];for(const{points:_}of u){const A=s?$(this,zt,X8).call(this,_):_;if(!A)continue;w.push(A);const N=A.length,E=new Float32Array(N),T=new Float32Array(3*(N===2?2:N-2));if(b.push({line:T,points:E}),N===2){E[0]=A[0]*D,E[1]=A[1]*v,T.set([NaN,NaN,NaN,NaN,E[0],E[1]],0);continue}let[R,M,I,F]=A;R*=D,M*=v,I*=D,F*=v,E.set([R,M,I,F],0),T.set([NaN,NaN,NaN,NaN,R,M],0);for(let G=4;G<N;G+=2){const U=E[G]=A[G]*D,W=E[G+1]=A[G+1]*v;T.set(Je.createBezierPoints(R,M,I,F,U,W),(G-2)*3),[R,M,I,F]=[I,F,U,W]}}if(b.length===0)return null;const k=l?new L_:new fy;return k.build(b,t,n,1,i,l?0:g,a),{outline:k,newCurves:w,areContours:l,thickness:g,width:d,height:h}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:i,height:a}){let s=1/0,l=-1/0,u=0;for(const A of e){u+=A.length;for(let N=2,E=A.length;N<E;N++){const T=A[N]-A[N-2];s=Math.min(s,T),l=Math.max(l,T)}}let d;s>=-128&&l<=127?d=Int8Array:s>=-32768&&l<=32767?d=Int16Array:d=Int32Array;const h=e.length,g=Yx+Ig*h,b=new Uint32Array(g);let y=0;b[y++]=g*Uint32Array.BYTES_PER_ELEMENT+(u-2*h)*d.BYTES_PER_ELEMENT,b[y++]=0,b[y++]=i,b[y++]=a,b[y++]=t?0:1,b[y++]=Math.max(0,Math.floor(n??0)),b[y++]=h,b[y++]=d.BYTES_PER_ELEMENT;for(const A of e)b[y++]=A.length-2,b[y++]=A[0],b[y++]=A[1];const D=new CompressionStream("deflate-raw"),v=D.writable.getWriter();await v.ready,v.write(b);const w=d.prototype.constructor;for(const A of e){const N=new w(A.length-2);for(let E=2,T=A.length;E<T;E++)N[E-2]=A[E]-A[E-2];v.write(N)}v.close();const k=await new Response(D.readable).arrayBuffer(),_=new Uint8Array(k);return $j(_)}static async decompressSignature(e){try{const t=E7(e),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(t).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let s=null,l=0;for await(const A of n)s||(s=new Uint8Array(new Uint32Array(A.buffer,0,4)[0])),s.set(A,l),l+=A.length;const u=new Uint32Array(s.buffer,0,s.length>>2),d=u[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const h=u[2],g=u[3],b=u[4]===0,y=u[5],D=u[6],v=u[7],w=[],k=(Yx+Ig*D)*Uint32Array.BYTES_PER_ELEMENT;let _;switch(v){case Int8Array.BYTES_PER_ELEMENT:_=new Int8Array(s.buffer,k);break;case Int16Array.BYTES_PER_ELEMENT:_=new Int16Array(s.buffer,k);break;case Int32Array.BYTES_PER_ELEMENT:_=new Int32Array(s.buffer,k);break}l=0;for(let A=0;A<D;A++){const N=u[Ig*A+Yx],E=new Float32Array(N+2);w.push(E);for(let T=0;T<Ig-1;T++)E[T]=u[Ig*A+Yx+T+1];for(let T=0;T<N;T++)E[T+2]=E[T]+_[l++]}return{areContours:b,thickness:y,outlines:w,width:h,height:g}}catch(t){return gt(`decompressSignature: ${t}`),null}}}vd=new WeakMap,zt=new WeakSet,B_=function(e,t,n,i){return n-=e,i-=t,n===0?i>0?0:4:n===1?i+6:2-i},Va=new WeakMap,q8=function(e,t,n,i,a,s,l){const u=$(this,zt,B_).call(this,n,i,a,s);for(let d=0;d<8;d++){const h=(-d+u-l+16)%8,g=m(this,Va)[2*h],b=m(this,Va)[2*h+1];if(e[(n+g)*t+(i+b)]!==0)return h}return-1},V8=function(e,t,n,i,a,s,l){const u=$(this,zt,B_).call(this,n,i,a,s);for(let d=0;d<8;d++){const h=(d+u+l+16)%8,g=m(this,Va)[2*h],b=m(this,Va)[2*h+1];if(e[(n+g)*t+(i+b)]!==0)return h}return-1},P_=function(e,t,n,i){const a=e.length,s=new Int32Array(a);for(let h=0;h<a;h++)s[h]=e[h]<=i?1:0;for(let h=1;h<n-1;h++)s[h*t]=s[h*t+t-1]=0;for(let h=0;h<t;h++)s[h]=s[t*n-1-h]=0;let l=1,u;const d=[];for(let h=1;h<n-1;h++){u=1;for(let g=1;g<t-1;g++){const b=h*t+g,y=s[b];if(y===0)continue;let D=h,v=g;if(y===1&&s[b-1]===0)l+=1,v-=1;else if(y>=1&&s[b+1]===0)l+=1,v+=1,y>1&&(u=y);else{y!==1&&(u=Math.abs(y));continue}const w=[g,h],k=v===g+1,_={isHole:k,points:w,id:l,parent:0};d.push(_);let A;for(const G of d)if(G.id===u){A=G;break}A?A.isHole?_.parent=k?A.parent:u:_.parent=k?u:A.parent:_.parent=k?u:0;const N=$(this,zt,q8).call(this,s,t,h,g,D,v,0);if(N===-1){s[b]=-l,s[b]!==1&&(u=Math.abs(s[b]));continue}let E=m(this,Va)[2*N],T=m(this,Va)[2*N+1];const R=h+E,M=g+T;D=R,v=M;let I=h,F=g;for(;;){const G=$(this,zt,V8).call(this,s,t,I,F,D,v,1);E=m(this,Va)[2*G],T=m(this,Va)[2*G+1];const U=I+E,W=F+T;w.push(W,U);const j=I*t+F;if(s[j+1]===0?s[j]=-l:s[j]===1&&(s[j]=l),U===h&&W===g&&I===R&&F===M){s[b]!==1&&(u=Math.abs(s[b]));break}else D=I,v=F,I=U,F=W}}}return d},G0=function(e,t,n,i){if(n-t<=4){for(let R=t;R<n-2;R+=2)i.push(e[R],e[R+1]);return}const a=e[t],s=e[t+1],l=e[n-4]-a,u=e[n-3]-s,d=Math.hypot(l,u),h=l/d,g=u/d,b=h*s-g*a,y=u/l,D=1/d,v=Math.atan(y),w=Math.cos(v),k=Math.sin(v),_=D*(Math.abs(w)+Math.abs(k)),A=D*(1-_+_**2),N=Math.max(Math.atan(Math.abs(k+w)*A),Math.atan(Math.abs(k-w)*A));let E=0,T=t;for(let R=t+2;R<n-2;R+=2){const M=Math.abs(b-h*e[R+1]+g*e[R]);M>E&&(T=R,E=M)}E>(d*N)**2?($(this,zt,G0).call(this,e,t,T+2,i),$(this,zt,G0).call(this,e,T,n,i)):i.push(a,s)},X8=function(e){const t=[],n=e.length;return $(this,zt,G0).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},G8=function(e,t,n,i,a,s){const l=new Float32Array(s**2),u=-2*i**2,d=s>>1;for(let v=0;v<s;v++){const w=(v-d)**2;for(let k=0;k<s;k++)l[v*s+k]=Math.exp((w+(k-d)**2)/u)}const h=new Float32Array(256),g=-2*a**2;for(let v=0;v<256;v++)h[v]=Math.exp(v**2/g);const b=e.length,y=new Uint8Array(b),D=new Uint32Array(256);for(let v=0;v<n;v++)for(let w=0;w<t;w++){const k=v*t+w,_=e[k];let A=0,N=0;for(let T=0;T<s;T++){const R=v+T-d;if(!(R<0||R>=n))for(let M=0;M<s;M++){const I=w+M-d;if(I<0||I>=t)continue;const F=e[R*t+I],G=l[T*s+M]*h[Math.abs(F-_)];A+=F*G,N+=G}}const E=y[k]=Math.round(A/N);D[E]++}return[y,D]},$8=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},z_=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let i=-1/0,a=1/0;for(let l=0,u=n.length;l<u;l++){const d=n[l]=e[l<<2];i=Math.max(i,d),a=Math.min(a,d)}const s=255/(i-a);for(let l=0,u=n.length;l<u;l++)n[l]=(n[l]-a)*s;return n},W_=function(e){let t,n=-1/0,i=-1/0;const a=e.findIndex(u=>u!==0);let s=a,l=a;for(t=a;t<256;t++){const u=e[t];u>n&&(t-s>i&&(i=t-s,l=t-1),n=u,s=t)}for(t=l-1;t>=0&&!(e[t]>e[t+1]);t--);return t},Y8=function(e){const t=e,{width:n,height:i}=e,{maxDim:a}=m(this,vd);let s=n,l=i;if(n>a||i>a){let b=n,y=i,D=Math.log2(Math.max(n,i)/a);const v=Math.floor(D);D=D===v?v-1:v;for(let k=0;k<D;k++){s=Math.ceil(b/2),l=Math.ceil(y/2);const _=new OffscreenCanvas(s,l);_.getContext("2d").drawImage(e,0,0,b,y,0,0,s,l),b=s,y=l,e!==t&&e.close(),e=_.transferToImageBitmap()}const w=Math.min(a/s,a/l);s=Math.round(s*w),l=Math.round(l*w)}const d=new OffscreenCanvas(s,l).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,s,l),d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,s,l);const h=d.getImageData(0,0,s,l).data;return[$(this,zt,z_).call(this,h),s,l]},V(Yo,zt),V(Yo,vd,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),V(Yo,Va,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class yS extends L8{constructor(){super(),super.updateProperties({fill:an._defaultLineColor,"stroke-width":0})}clone(){const e=new yS;return e.updateAll(this),e}}class xS extends Sv{constructor(e){super(e),super.updateProperties({stroke:an._defaultLineColor,"stroke-width":1})}clone(){const e=new xS(this._viewParameters);return e.updateAll(this),e}}var wc,Ns,kc,wd;const Ai=class Ai extends y1{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});V(this,wc,!1);V(this,Ns,null);V(this,kc,null);V(this,wd,null);this._willKeepAspectRatio=!0,L(this,kc,t.signatureData||null),L(this,Ns,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){an.initialize(t,n),this._defaultDrawingOptions=new yS,this._defaultDrawnSignatureOptions=new xS(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Dt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!m(this,Ns)}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(m(this,kc)){const{lines:a,mustSmooth:s,areContours:l,description:u,uuid:d,heightInPage:h}=m(this,kc),{rawDims:{pageWidth:g,pageHeight:b},rotation:y}=this.parent.viewport,D=Yo.processDrawnLines({lines:a,pageWidth:g,pageHeight:b,rotation:y,innerMargin:Ai._INNER_MARGIN,mustSmooth:s,areContours:l});this.addSignature(D,h,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:m(this,Ns)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){L(this,wd,t),this.addEditToolbar()}getUuid(){return m(this,wd)}get description(){return m(this,Ns)}set description(t){L(this,Ns,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:i,width:a,height:s}=m(this,kc),l=Math.max(a,s),u=Yo.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:i,width:a,height:s},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,i,a){const{x:s,y:l}=this,{outline:u}=L(this,kc,t);L(this,wc,u instanceof L_),this.description=i;let d;m(this,wc)?d=Ai.getDefaultDrawingOptions():(d=Ai._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[h,g]=this.parentDimensions,[,b]=this.pageDimensions;let y=n/b;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(h*this.width,g*this.height),this.x=s,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:a}=this.parent.viewport;return Yo.process(t,n,i,a,Ai._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:i,pageHeight:a},rotation:s}=this.parent.viewport;return Yo.extractContoursFromText(t,n,i,a,s,Ai._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:a}=this.parent.viewport;return Yo.processDrawnLines({lines:t,pageWidth:n,pageHeight:i,rotation:a,innerMargin:Ai._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Ai.getDefaultDrawingOptions():(this._drawingOptions=Ai._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:i,rect:a}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":s}}=this,l={annotationType:pt.SIGNATURE,isSignature:!0,areContours:m(this,wc),color:[0,0,0],thickness:m(this,wc)?0:s,pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(l),t?(l.paths={lines:n,points:i},l.uuid=m(this,wd),l.isCopy=!0):l.lines=n,m(this,Ns)&&(l.accessibilityData={type:"Figure",alt:m(this,Ns)}),l}static deserializeDraw(t,n,i,a,s,l){return l.areContours?L_.deserialize(t,n,i,a,s,l):fy.deserialize(t,n,i,a,s,l)}static async deserialize(t,n,i){var s;const a=await super.deserialize(t,n,i);return L(a,wc,t.areContours),a.description=((s=t.accessibilityData)==null?void 0:s.alt)||"",L(a,wd,t.uuid),a}};wc=new WeakMap,Ns=new WeakMap,kc=new WeakMap,wd=new WeakMap,We(Ai,"_type","signature"),We(Ai,"_editorType",pt.SIGNATURE),We(Ai,"_defaultDrawingOptions",null);let H_=Ai;var pn,cr,Dc,qo,_c,lp,Vo,kd,Us,zi,cp,Ft,im,am,$0,Y0,K0,V_,Q0,K8;class q_ extends an{constructor(t){super({...t,name:"stampEditor"});V(this,Ft);V(this,pn,null);V(this,cr,null);V(this,Dc,null);V(this,qo,null);V(this,_c,null);V(this,lp,"");V(this,Vo,null);V(this,kd,!1);V(this,Us,null);V(this,zi,!1);V(this,cp,!1);L(this,qo,t.bitmapUrl),L(this,_c,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){an.initialize(t,n)}static isHandlingMimeForPasting(t){return OD.includes(t)}static paste(t,n){n.pasteEditor({mode:pt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:s,height:l}=t||this.copyCanvas(null,null,!0).imageData,u=await i.guess({name:"altText",request:{data:a,width:s,height:l,channels:a.length/(s*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),n&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}remove(){var t;m(this,cr)&&(L(this,pn,null),this._uiManager.imageManager.deleteId(m(this,cr)),(t=m(this,Vo))==null||t.remove(),L(this,Vo,null),m(this,Us)&&(clearTimeout(m(this,Us)),L(this,Us,null))),super.remove()}rebuild(){if(!this.parent){m(this,cr)&&$(this,Ft,$0).call(this);return}super.rebuild(),this.div!==null&&(m(this,cr)&&m(this,Vo)===null&&$(this,Ft,$0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(m(this,Dc)||m(this,pn)||m(this,qo)||m(this,_c)||m(this,cr)||m(this,kd))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),m(this,kd)||(m(this,pn)?$(this,Ft,Y0).call(this):$(this,Ft,$0).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(L(this,cr,i),a&&L(this,pn,a),L(this,kd,!1),$(this,Ft,Y0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;m(this,Us)!==null&&clearTimeout(m(this,Us)),L(this,Us,setTimeout(()=>{L(this,Us,null),$(this,Ft,V_).call(this)},200))}copyCanvas(t,n,i=!1){var y;t||(t=224);const{width:a,height:s}=m(this,pn),l=new Is;let u=m(this,pn),d=a,h=s,g=null;if(n){if(a>n||s>n){const M=Math.min(n/a,n/s);d=Math.floor(a*M),h=Math.floor(s*M)}g=document.createElement("canvas");const D=g.width=Math.ceil(d*l.sx),v=g.height=Math.ceil(h*l.sy);m(this,zi)||(u=$(this,Ft,K0).call(this,D,v));const w=g.getContext("2d");w.filter=this._uiManager.hcmFilter;let k="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":(y=window.matchMedia)!=null&&y.call(window,"(prefers-color-scheme: dark)").matches&&(k="#8f8f9d",_="#42414d");const A=15,N=A*l.sx,E=A*l.sy,T=new OffscreenCanvas(N*2,E*2),R=T.getContext("2d");R.fillStyle=k,R.fillRect(0,0,N*2,E*2),R.fillStyle=_,R.fillRect(0,0,N,E),R.fillRect(N,E,N,E),w.fillStyle=w.createPattern(T,"repeat"),w.fillRect(0,0,D,v),w.drawImage(u,0,0,u.width,u.height,0,0,D,v)}let b=null;if(i){let D,v;if(l.symmetric&&u.width<t&&u.height<t)D=u.width,v=u.height;else if(u=m(this,pn),a>t||s>t){const _=Math.min(t/a,t/s);D=Math.floor(a*_),v=Math.floor(s*_),m(this,zi)||(u=$(this,Ft,K0).call(this,D,v))}const k=new OffscreenCanvas(D,v).getContext("2d",{willReadFrequently:!0});k.drawImage(u,0,0,u.width,u.height,0,0,D,v),b={width:D,height:v,data:k.getImageData(0,0,D,v).data}}return{canvas:g,width:d,height:h,imageData:b}}static async deserialize(t,n,i){var w;let a=null,s=!1;if(t instanceof h8){const{data:{rect:k,rotation:_,id:A,structParent:N,popupRef:E,contentsObj:T},container:R,parent:{page:{pageNumber:M}},canvas:I}=t;let F,G;I?(delete t.canvas,{id:F,bitmap:G}=i.imageManager.getFromCanvas(R.id,I),I.remove()):(s=!0,t._hasNoCanvas=!0);const U=((w=await n._structTree.getAriaAttributes(`${uS}${A}`))==null?void 0:w.get("aria-label"))||"";a=t={annotationType:pt.STAMP,bitmapId:F,bitmap:G,pageIndex:M-1,rect:k.slice(0),rotation:_,annotationElementId:A,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:U},isSvg:!1,structParent:N,popupRef:E,comment:(T==null?void 0:T.str)||null}}const l=await super.deserialize(t,n,i),{rect:u,bitmap:d,bitmapUrl:h,bitmapId:g,isSvg:b,accessibilityData:y}=t;s?(i.addMissingCanvas(t.id,l),L(l,kd,!0)):g&&i.imageManager.isValidId(g)?(L(l,cr,g),d&&L(l,pn,d)):L(l,qo,h),L(l,zi,b);const[D,v]=l.pageDimensions;return l.width=(u[2]-u[0])/D,l.height=(u[3]-u[1])/v,y&&(l.altTextData=y),l._initialData=a,t.comment&&l.setCommentData(t.comment),L(l,cp,!!a),l}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:pt.STAMP,bitmapId:m(this,cr),pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,isSvg:m(this,zi),structTreeParentId:this._structTreeParentId};if(this.addComment(i),t)return i.bitmapUrl=$(this,Ft,Q0).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:s}=this.serializeAltText(!1);if(!a&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const u=$(this,Ft,K8).call(this,i);if(u.isSame)return null;u.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,n===null)return i;n.stamps||(n.stamps=new Map);const l=m(this,zi)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(m(this,cr)))n.stamps.set(m(this,cr),{area:l,serialized:i}),i.bitmap=$(this,Ft,Q0).call(this,!1);else if(m(this,zi)){const u=n.stamps.get(m(this,cr));l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=$(this,Ft,Q0).call(this,!1))}return i}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const n={rect:this.getPDFRect()};return this.hasEditedComment&&(n.popup=this.comment),t.updateEdited(n),null}}pn=new WeakMap,cr=new WeakMap,Dc=new WeakMap,qo=new WeakMap,_c=new WeakMap,lp=new WeakMap,Vo=new WeakMap,kd=new WeakMap,Us=new WeakMap,zi=new WeakMap,cp=new WeakMap,Ft=new WeakSet,im=function(t,n=!1){if(!t){this.remove();return}L(this,pn,t.bitmap),n||(L(this,cr,t.id),L(this,zi,t.isSvg)),t.file&&L(this,lp,t.file.name),$(this,Ft,Y0).call(this)},am=function(){if(L(this,Dc,null),this._uiManager.enableWaiting(!1),!!m(this,Vo)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&m(this,pn)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&m(this,pn)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},$0=function(){if(m(this,cr)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(m(this,cr)).then(i=>$(this,Ft,im).call(this,i,!0)).finally(()=>$(this,Ft,am).call(this));return}if(m(this,qo)){const i=m(this,qo);L(this,qo,null),this._uiManager.enableWaiting(!0),L(this,Dc,this._uiManager.imageManager.getFromUrl(i).then(a=>$(this,Ft,im).call(this,a)).finally(()=>$(this,Ft,am).call(this)));return}if(m(this,_c)){const i=m(this,_c);L(this,_c,null),this._uiManager.enableWaiting(!0),L(this,Dc,this._uiManager.imageManager.getFromFile(i).then(a=>$(this,Ft,im).call(this,a)).finally(()=>$(this,Ft,am).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=OD.join(",");const n=this._uiManager._signal;L(this,Dc,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),$(this,Ft,im).call(this,a)}i()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>$(this,Ft,am).call(this))),t.click()},Y0=function(){var g;const{div:t}=this;let{width:n,height:i}=m(this,pn);const[a,s]=this.pageDimensions,l=.75;if(this.width)n=this.width*a,i=this.height*s;else if(n>l*a||i>l*s){const b=Math.min(l*a/n,l*s/i);n*=b,i*=b}const[u,d]=this.parentDimensions;this.setDims(n*u/a,i*d/s),this._uiManager.enableWaiting(!1);const h=L(this,Vo,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=n/a,this.height=i/s,(g=this._initialOptions)!=null&&g.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),$(this,Ft,V_).call(this),m(this,cp)||(this.parent.addUndoableEditor(this),L(this,cp,!0)),this._reportTelemetry({action:"inserted_image"}),m(this,lp)&&this.div.setAttribute("aria-description",m(this,lp)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},K0=function(t,n){const{width:i,height:a}=m(this,pn);let s=i,l=a,u=m(this,pn);for(;s>2*t||l>2*n;){const d=s,h=l;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const g=new OffscreenCanvas(s,l);g.getContext("2d").drawImage(u,0,0,d,h,0,0,s,l),u=g.transferToImageBitmap()}return u},V_=function(){const[t,n]=this.parentDimensions,{width:i,height:a}=this,s=new Is,l=Math.ceil(i*t*s.sx),u=Math.ceil(a*n*s.sy),d=m(this,Vo);if(!d||d.width===l&&d.height===u)return;d.width=l,d.height=u;const h=m(this,zi)?m(this,pn):$(this,Ft,K0).call(this,l,u),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(h,0,0,h.width,h.height,0,0,l,u)},Q0=function(t){if(t){if(m(this,zi)){const a=this._uiManager.imageManager.getSvgUrl(m(this,cr));if(a)return a}const n=document.createElement("canvas");return{width:n.width,height:n.height}=m(this,pn),n.getContext("2d").drawImage(m(this,pn),0,0),n.toDataURL()}if(m(this,zi)){const[n,i]=this.pageDimensions,a=Math.round(this.width*n*Oc.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*Oc.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(a,s);return l.getContext("2d").drawImage(m(this,pn),0,0,m(this,pn).width,m(this,pn).height,0,0,a,s),l.transferToImageBitmap()}return structuredClone(m(this,pn))},K8=function(t){var l;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,a=t.pageIndex===n,s=(((l=t.accessibilityData)==null?void 0:l.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&s,isSameAltText:s}},We(q_,"_type","stamp"),We(q_,"_editorType",pt.STAMP);var Dd,up,Rs,Ac,Xo,Wi,Sc,dp,_d,Xa,Go,ur,$o,Ec,hp,rt,Tc,gn,Q8,us,G_,$_,Z0;const Ma=class Ma{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:i,accessibilityManager:a,annotationLayer:s,drawLayer:l,textLayer:u,viewport:d,l10n:h}){V(this,gn);V(this,Dd);V(this,up,!1);V(this,Rs,null);V(this,Ac,null);V(this,Xo,null);V(this,Wi,new Map);V(this,Sc,!1);V(this,dp,!1);V(this,_d,!1);V(this,Xa,null);V(this,Go,null);V(this,ur,null);V(this,$o,null);V(this,Ec,null);V(this,hp,-1);V(this,rt);const g=[...m(Ma,Tc).values()];if(!Ma._initialized){Ma._initialized=!0;for(const b of g)b.initialize(h,e)}e.registerEditorTypes(g),L(this,rt,e),this.pageIndex=t,this.div=n,L(this,Dd,a),L(this,Rs,s),this.viewport=d,L(this,ur,u),this.drawLayer=l,this._structTree=i,m(this,rt).addLayer(this)}get isEmpty(){return m(this,Wi).size===0}get isInvisible(){return this.isEmpty&&m(this,rt).getMode()===pt.NONE}updateToolbar(e){m(this,rt).updateToolbar(e)}updateMode(e=m(this,rt).getMode()){switch($(this,gn,Z0).call(this),e){case pt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case pt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case pt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of m(Ma,Tc).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=m(this,ur))==null?void 0:t.div)}setEditingState(e){m(this,rt).setEditingState(e)}addCommands(e){m(this,rt).addCommands(e)}cleanUndoStack(e){m(this,rt).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=m(this,Rs))==null||t.div.classList.toggle("disabled",!e)}async enable(){var n;L(this,_d,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(n=m(this,Ec))==null||n.abort(),L(this,Ec,null);const e=new Set;for(const i of m(this,Wi).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(m(this,rt).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!m(this,Rs)){L(this,_d,!1);return}const t=m(this,Rs).getEditableAnnotations();for(const i of t){if(i.hide(),m(this,rt).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}L(this,_d,!1)}disable(){var i;if(L(this,dp,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),m(this,ur)&&!m(this,Ec)){L(this,Ec,new AbortController);const a=m(this,rt).combinedSignal(m(this,Ec));m(this,ur).div.addEventListener("pointerdown",s=>{const{clientX:u,clientY:d,timeStamp:h}=s,g=m(this,hp);if(h-g>500){L(this,hp,h);return}L(this,hp,-1);const{classList:b}=this.div;b.toggle("getElements",!0);const y=document.elementsFromPoint(u,d);if(b.toggle("getElements",!1),!this.div.contains(y[0]))return;let D;const v=new RegExp(`^${Hj}[0-9]+$`);for(const k of y)if(v.test(k.id)){D=k.id;break}if(!D)return;const w=m(this,Wi).get(D);(w==null?void 0:w.annotationElementId)===null&&(s.stopPropagation(),s.preventDefault(),w.dblclick())},{signal:a,capture:!0})}const e=new Map,t=new Map;for(const a of m(this,Wi).values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){e.set(a.annotationElementId,a);continue}else t.set(a.annotationElementId,a);(i=this.getEditableAnnotation(a.annotationElementId))==null||i.show(),a.remove()}if(m(this,Rs)){const a=m(this,Rs).getEditableAnnotations();for(const s of a){const{id:l}=s.data;if(m(this,rt).isDeletedAnnotationElement(l)){s.updateEdited({deleted:!0});continue}let u=t.get(l);if(u){u.resetAnnotationElement(s),u.show(!1),s.show();continue}u=e.get(l),u&&(m(this,rt).addChangedExistingAnnotation(u),u.renderAnnotationElement(s)&&u.show(!1)),s.show()}}$(this,gn,Z0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const a of m(Ma,Tc).values())n.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),L(this,dp,!1)}getEditableAnnotation(e){var t;return((t=m(this,Rs))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){m(this,rt).getActive()!==e&&m(this,rt).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=m(this,ur))!=null&&e.div&&!m(this,$o)){L(this,$o,new AbortController);const t=m(this,rt).combinedSignal(m(this,$o));m(this,ur).div.addEventListener("pointerdown",$(this,gn,Q8).bind(this),{signal:t}),m(this,ur).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=m(this,ur))!=null&&e.div&&m(this,$o)&&(m(this,$o).abort(),L(this,$o,null),m(this,ur).div.classList.remove("highlighting"))}enableClick(){if(m(this,Ac))return;L(this,Ac,new AbortController);const e=m(this,rt).combinedSignal(m(this,Ac));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=m(this,Ac))==null||e.abort(),L(this,Ac,null)}attach(e){m(this,Wi).set(e.id,e);const{annotationElementId:t}=e;t&&m(this,rt).isDeletedAnnotationElement(t)&&m(this,rt).removeDeletedAnnotationElement(e)}detach(e){var t;m(this,Wi).delete(e.id),(t=m(this,Dd))==null||t.removePointerInTextLayer(e.contentDiv),!m(this,dp)&&e.annotationElementId&&m(this,rt).addDeletedAnnotationElement(e)}remove(e){this.detach(e),m(this,rt).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(m(this,rt).addDeletedAnnotationElement(e.annotationElementId),an.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),m(this,rt).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!m(this,_d)),m(this,rt).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!m(this,Xo)&&(e._focusEventsAllowed=!1,L(this,Xo,setTimeout(()=>{L(this,Xo,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:m(this,rt)._signal}),t.focus())},0))),e._structTreeParentId=(n=m(this,Dd))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return m(this,rt).getId()}combinedSignal(e){return m(this,rt).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=m(this,gn,us))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await m(this,rt).updateMode(e.mode);const{offsetX:n,offsetY:i}=$(this,gn,$_).call(this),a=this.getNextId(),s=$(this,gn,G_).call(this,{parent:this,id:a,x:n,y:i,uiManager:m(this,rt),isCentered:!0,...t});s&&this.add(s)}async deserialize(e){var t;return await((t=m(Ma,Tc).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,m(this,rt)))||null}createAndAddNewEditor(e,t,n={}){const i=this.getNextId(),a=$(this,gn,G_).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:m(this,rt),isCentered:t,...n});return a&&this.add(a),a}addNewEditor(e={}){this.createAndAddNewEditor($(this,gn,$_).call(this),!0,e)}setSelected(e){m(this,rt).setSelected(e)}toggleSelected(e){m(this,rt).toggleSelected(e)}unselect(e){m(this,rt).unselect(e)}pointerup(e){var i;const{isMac:t}=Ar.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!m(this,Sc)||(L(this,Sc,!1),(i=m(this,gn,us))!=null&&i.isDrawer&&m(this,gn,us).supportMultipleDrawings))return;if(!m(this,up)){L(this,up,!0);return}const n=m(this,rt).getMode();if(n===pt.STAMP||n===pt.SIGNATURE){m(this,rt).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(m(this,rt).getMode()===pt.HIGHLIGHT&&this.enableTextSelection(),m(this,Sc)){L(this,Sc,!1);return}const{isMac:t}=Ar.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(L(this,Sc,!0),(i=m(this,gn,us))!=null&&i.isDrawer){this.startDrawingSession(e);return}const n=m(this,rt).getActive();L(this,up,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),m(this,Xa)){m(this,gn,us).startDrawing(this,m(this,rt),!1,e);return}m(this,rt).setCurrentDrawingSession(this),L(this,Xa,new AbortController);const t=m(this,rt).combinedSignal(m(this,Xa));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(L(this,Go,null),this.commitOrRemove())},{signal:t}),m(this,gn,us).startDrawing(this,m(this,rt),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&L(this,Go,t);return}m(this,Go)&&setTimeout(()=>{var t;(t=m(this,Go))==null||t.focus(),L(this,Go,null)},0)}endDrawingSession(e=!1){return m(this,Xa)?(m(this,rt).setCurrentDrawingSession(null),m(this,Xa).abort(),L(this,Xa,null),L(this,Go,null),m(this,gn,us).endDrawing(e)):null}findNewParent(e,t,n){const i=m(this,rt).findParent(t,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return m(this,Xa)?(this.endDrawingSession(),!0):!1}onScaleChanging(){m(this,Xa)&&m(this,gn,us).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=m(this,rt).getActive())==null?void 0:e.parent)===this&&(m(this,rt).commitOrRemove(),m(this,rt).setActiveEditor(null)),m(this,Xo)&&(clearTimeout(m(this,Xo)),L(this,Xo,null));for(const n of m(this,Wi).values())(t=m(this,Dd))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,m(this,Wi).clear(),m(this,rt).removeLayer(this)}render({viewport:e}){this.viewport=e,Ud(this.div,e);for(const t of m(this,rt).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){m(this,rt).commitOrRemove(),$(this,gn,Z0).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Ud(this.div,{rotation:n}),t!==n)for(const i of m(this,Wi).values())i.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return m(this,rt).viewParameters.realScale}};Dd=new WeakMap,up=new WeakMap,Rs=new WeakMap,Ac=new WeakMap,Xo=new WeakMap,Wi=new WeakMap,Sc=new WeakMap,dp=new WeakMap,_d=new WeakMap,Xa=new WeakMap,Go=new WeakMap,ur=new WeakMap,$o=new WeakMap,Ec=new WeakMap,hp=new WeakMap,rt=new WeakMap,Tc=new WeakMap,gn=new WeakSet,Q8=function(e){m(this,rt).unselectAll();const{target:t}=e;if(t===m(this,ur).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&m(this,ur).div.contains(t)){const{isMac:n}=Ar.platform;if(e.button!==0||e.ctrlKey&&n)return;m(this,rt).showAllEditors("highlight",!0,!0),m(this,ur).div.classList.add("free"),this.toggleDrawing(),b1.startHighlighting(this,m(this,rt).direction==="ltr",{target:m(this,ur).div,x:e.x,y:e.y}),m(this,ur).div.addEventListener("pointerup",()=>{m(this,ur).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:m(this,rt)._signal}),e.preventDefault()}},us=function(){return m(Ma,Tc).get(m(this,rt).getMode())},G_=function(e){const t=m(this,gn,us);return t?new t.prototype.constructor(e):null},$_=function(){const{x:e,y:t,width:n,height:i}=this.div.getBoundingClientRect(),a=Math.max(0,e),s=Math.max(0,t),l=Math.min(window.innerWidth,e+n),u=Math.min(window.innerHeight,t+i),d=(a+l)/2-e,h=(s+u)/2-t,[g,b]=this.viewport.rotation%180===0?[d,h]:[h,d];return{offsetX:g,offsetY:b}},Z0=function(){for(const e of m(this,Wi).values())e.isEmpty()&&e.remove()},We(Ma,"_initialized",!1),V(Ma,Tc,new Map([E_,M_,q_,b1,H_].map(e=>[e._editorType,e])));let X_=Ma;var Ga,Wr,Ad,Jb,W1,Z8,Os,K_,J8,Q_;const Xn=class Xn{constructor({pageIndex:e}){V(this,Os);V(this,Ga,null);V(this,Wr,new Map);V(this,Ad,new Map);this.pageIndex=e}setParent(e){if(!m(this,Ga)){L(this,Ga,e);return}if(m(this,Ga)!==e){if(m(this,Wr).size>0)for(const t of m(this,Wr).values())t.remove(),e.append(t);L(this,Ga,e)}}static get _svgFactory(){return Dt(this,"_svgFactory",new g1)}draw(e,t=!1,n=!1){const i=qn(Xn,Jb)._++,a=$(this,Os,K_).call(this),s=Xn._svgFactory.createElement("defs");a.append(s);const l=Xn._svgFactory.createElement("path");s.append(l);const u=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke"),t&&m(this,Ad).set(i,l);const d=n?$(this,Os,J8).call(this,s,u):null,h=Xn._svgFactory.createElement("use");return a.append(h),h.setAttribute("href",`#${u}`),this.updateProperties(a,e),m(this,Wr).set(i,a),{id:i,clipPathId:`url(#${d})`}}drawOutline(e,t){const n=qn(Xn,Jb)._++,i=$(this,Os,K_).call(this),a=Xn._svgFactory.createElement("defs");i.append(a);const s=Xn._svgFactory.createElement("path");a.append(s);const l=`path_p${this.pageIndex}_${n}`;s.setAttribute("id",l),s.setAttribute("vector-effect","non-scaling-stroke");let u;if(t){const g=Xn._svgFactory.createElement("mask");a.append(g),u=`mask_p${this.pageIndex}_${n}`,g.setAttribute("id",u),g.setAttribute("maskUnits","objectBoundingBox");const b=Xn._svgFactory.createElement("rect");g.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const y=Xn._svgFactory.createElement("use");g.append(y),y.setAttribute("href",`#${l}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const d=Xn._svgFactory.createElement("use");i.append(d),d.setAttribute("href",`#${l}`),u&&d.setAttribute("mask",`url(#${u})`);const h=d.cloneNode();return i.append(h),d.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(i,e),m(this,Wr).set(n,i),n}finalizeDraw(e,t){m(this,Ad).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var u;if(!t)return;const{root:n,bbox:i,rootClass:a,path:s}=t,l=typeof e=="number"?m(this,Wr).get(e):e;if(l){if(n&&$(this,Os,Q_).call(this,l,n),i&&$(u=Xn,W1,Z8).call(u,l,i),a){const{classList:d}=l;for(const[h,g]of Object.entries(a))d.toggle(h,g)}if(s){const h=l.firstChild.firstChild;$(this,Os,Q_).call(this,h,s)}}}updateParent(e,t){if(t===this)return;const n=m(this,Wr).get(e);n&&(m(t,Ga).append(n),m(this,Wr).delete(e),m(t,Wr).set(e,n))}remove(e){m(this,Ad).delete(e),m(this,Ga)!==null&&(m(this,Wr).get(e).remove(),m(this,Wr).delete(e))}destroy(){L(this,Ga,null);for(const e of m(this,Wr).values())e.remove();m(this,Wr).clear(),m(this,Ad).clear()}};Ga=new WeakMap,Wr=new WeakMap,Ad=new WeakMap,Jb=new WeakMap,W1=new WeakSet,Z8=function(e,[t,n,i,a]){const{style:s}=e;s.top=`${100*n}%`,s.left=`${100*t}%`,s.width=`${100*i}%`,s.height=`${100*a}%`},Os=new WeakSet,K_=function(){const e=Xn._svgFactory.create(1,1,!0);return m(this,Ga).append(e),e.setAttribute("aria-hidden",!0),e},J8=function(e,t){const n=Xn._svgFactory.createElement("clipPath");e.append(n);const i=`clip_${t}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const a=Xn._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),i},Q_=function(e,t){for(const[n,i]of Object.entries(t))i===null?e.removeAttribute(n):e.setAttribute(n,i)},V(Xn,W1),V(Xn,Jb,0);let Y_=Xn;globalThis._pdfjsTestingUtils={HighlightOutliner:C_};globalThis.pdfjsLib={AbortException:Ic,AnnotationEditorLayer:X_,AnnotationEditorParamsType:Nt,AnnotationEditorType:pt,AnnotationEditorUIManager:Rd,AnnotationLayer:__,AnnotationMode:Ol,AnnotationType:In,build:Mz,ColorPicker:f1,createValidAbsoluteUrl:qj,DOMSVGFactory:g1,DrawLayer:Y_,FeatureTest:Ar,fetchData:cy,getDocument:GF,getFilenameFromUrl:T7,getPdfFilenameFromUrl:C7,getRGB:_v,getUuid:Gj,getXfaPageViewport:U7,GlobalWorkerOptions:js,ImageKind:D0,InvalidPDFException:FD,isDataScheme:Dv,isPdfFile:hS,isValidExplicitDest:W7,MathClamp:qr,noContextMenu:Sa,normalizeUnicode:A7,OPS:ym,OutputScale:Is,PasswordResponses:m7,PDFDataRangeTransport:$F,PDFDateString:c1,PDFWorker:wm,PermissionFlag:g7,PixelsPerInch:Oc,RenderingCancelledException:dS,ResponseException:l1,setLayerDimensions:Ud,shadow:Dt,SignatureExtractor:Yo,stopEvent:Mn,SupportedImageMimeTypes:OD,TextLayer:xm,TouchManager:d1,updateUrlHash:Vj,Util:tt,VerbosityLevel:vv,version:Oz,XfaLayer:ZF};class Uc{constructor(){this.MAX_FILE_SIZE=10*1024*1024,this.ALLOWED_TYPES=["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/markdown","application/msword","application/octet-stream"]}static getInstance(){return Uc.instance||(Uc.instance=new Uc),Uc.instance}validateFile(e){return e.size>this.MAX_FILE_SIZE?{isValid:!1,error:`File size exceeds ${this.MAX_FILE_SIZE/1024/1024}MB limit`}:this.ALLOWED_TYPES.includes(e.type)?{isValid:!0}:{isValid:!1,error:"File type not supported. Please use PDF, DOCX, TXT, or MD files."}}async uploadKnowledgeBaseFile(e,t){try{const n=this.validateFile(e);if(!n.isValid)throw new Error(n.error);const i=e.name.split(".").pop(),a=`${t}/${Date.now()}-${crypto.randomUUID()}.${i}`,{data:s,error:l}=await Ge.storage.from("knowledge-base").upload(a,e,{cacheControl:"3600",upsert:!1});if(l)throw l;const u=await this.extractTextFromFile(e),{data:d,error:h}=await Ge.from("knowledge_base_files").insert({user_id:t,filename:a,original_filename:e.name,file_path:s.path,file_size:e.size,mime_type:e.type,processed_content:u,processing_status:u?"completed":"failed"}).select("id").single();if(h)throw await Ge.storage.from("knowledge-base").remove([a]),h;return{success:!0,data:{fileId:d.id,filePath:s.path,processedContent:u}}}catch(n){return{success:!1,error:n.message}}}async extractTextFromFile(e){switch(e.type){case"text/plain":case"text/markdown":case"application/octet-stream":return this.extractTextFile(e);case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return this.extractDocxFile(e);case"application/pdf":return this.extractPdfFile(e);default:return De.warn("Unsupported file type for content extraction",{fileName:e.name,fileType:e.type}),`[Content from ${e.name} - File type not supported for content extraction]`}}async extractTextFile(e){return e.text()}async extractDocxFile(e){const t=await e.arrayBuffer();return(await p7.extractRawText({arrayBuffer:t})).value}async extractPdfFile(e){js.workerSrc="/pdf.worker.min.mjs";const t=await e.arrayBuffer(),n=await GF({data:t}).promise;let i="";for(let a=1;a<=n.numPages;a++){const l=await(await n.getPage(a)).getTextContent();i+=l.items.map(u=>u.str).join(" ")+`
`}return i}}function sW(r,e){const t={};return(r[r.length-1]===""?[...r,""]:r).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const oW=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,lW=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,cW={};function N4(r,e){return(cW.jsx?lW:oW).test(r)}const uW=/[ \t\n\f\r]/g;function dW(r){return typeof r=="object"?r.type==="text"?U4(r.value):!1:U4(r)}function U4(r){return r.replace(uW,"")===""}class py{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}py.prototype.normal={};py.prototype.property={};py.prototype.space=void 0;function e6(r,e){const t={},n={};for(const i of r)Object.assign(t,i.property),Object.assign(n,i.normal);return new py(t,n,e)}function Z_(r){return r.toLowerCase()}class pi{constructor(e,t){this.attribute=t,this.property=e}}pi.prototype.attribute="";pi.prototype.booleanish=!1;pi.prototype.boolean=!1;pi.prototype.commaOrSpaceSeparated=!1;pi.prototype.commaSeparated=!1;pi.prototype.defined=!1;pi.prototype.mustUseProperty=!1;pi.prototype.number=!1;pi.prototype.overloadedBoolean=!1;pi.prototype.property="";pi.prototype.spaceSeparated=!1;pi.prototype.space=void 0;let hW=0;const bt=Wd(),On=Wd(),J_=Wd(),He=Wd(),rn=Wd(),Kh=Wd(),_i=Wd();function Wd(){return 2**++hW}const eA=Object.freeze(Object.defineProperty({__proto__:null,boolean:bt,booleanish:On,commaOrSpaceSeparated:_i,commaSeparated:Kh,number:He,overloadedBoolean:J_,spaceSeparated:rn},Symbol.toStringTag,{value:"Module"})),sD=Object.keys(eA);class vS extends pi{constructor(e,t,n,i){let a=-1;if(super(e,t),R4(this,"space",i),typeof n=="number")for(;++a<sD.length;){const s=sD[a];R4(this,sD[a],(n&eA[s])===eA[s])}}}vS.prototype.defined=!0;function R4(r,e,t){t&&(r[e]=t)}function _p(r){const e={},t={};for(const[n,i]of Object.entries(r.properties)){const a=new vS(n,r.transform(r.attributes||{},n),i,r.space);r.mustUseProperty&&r.mustUseProperty.includes(n)&&(a.mustUseProperty=!0),e[n]=a,t[Z_(n)]=n,t[Z_(a.attribute)]=n}return new py(e,t,r.space)}const t6=_p({properties:{ariaActiveDescendant:null,ariaAtomic:On,ariaAutoComplete:null,ariaBusy:On,ariaChecked:On,ariaColCount:He,ariaColIndex:He,ariaColSpan:He,ariaControls:rn,ariaCurrent:null,ariaDescribedBy:rn,ariaDetails:null,ariaDisabled:On,ariaDropEffect:rn,ariaErrorMessage:null,ariaExpanded:On,ariaFlowTo:rn,ariaGrabbed:On,ariaHasPopup:null,ariaHidden:On,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:rn,ariaLevel:He,ariaLive:null,ariaModal:On,ariaMultiLine:On,ariaMultiSelectable:On,ariaOrientation:null,ariaOwns:rn,ariaPlaceholder:null,ariaPosInSet:He,ariaPressed:On,ariaReadOnly:On,ariaRelevant:null,ariaRequired:On,ariaRoleDescription:rn,ariaRowCount:He,ariaRowIndex:He,ariaRowSpan:He,ariaSelected:On,ariaSetSize:He,ariaSort:null,ariaValueMax:He,ariaValueMin:He,ariaValueNow:He,ariaValueText:null,role:null},transform(r,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function n6(r,e){return e in r?r[e]:e}function r6(r,e){return n6(r,e.toLowerCase())}const fW=_p({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Kh,acceptCharset:rn,accessKey:rn,action:null,allow:null,allowFullScreen:bt,allowPaymentRequest:bt,allowUserMedia:bt,alt:null,as:null,async:bt,autoCapitalize:null,autoComplete:rn,autoFocus:bt,autoPlay:bt,blocking:rn,capture:null,charSet:null,checked:bt,cite:null,className:rn,cols:He,colSpan:null,content:null,contentEditable:On,controls:bt,controlsList:rn,coords:He|Kh,crossOrigin:null,data:null,dateTime:null,decoding:null,default:bt,defer:bt,dir:null,dirName:null,disabled:bt,download:J_,draggable:On,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:bt,formTarget:null,headers:rn,height:He,hidden:J_,high:He,href:null,hrefLang:null,htmlFor:rn,httpEquiv:rn,id:null,imageSizes:null,imageSrcSet:null,inert:bt,inputMode:null,integrity:null,is:null,isMap:bt,itemId:null,itemProp:rn,itemRef:rn,itemScope:bt,itemType:rn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:bt,low:He,manifest:null,max:null,maxLength:He,media:null,method:null,min:null,minLength:He,multiple:bt,muted:bt,name:null,nonce:null,noModule:bt,noValidate:bt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:bt,optimum:He,pattern:null,ping:rn,placeholder:null,playsInline:bt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:bt,referrerPolicy:null,rel:rn,required:bt,reversed:bt,rows:He,rowSpan:He,sandbox:rn,scope:null,scoped:bt,seamless:bt,selected:bt,shadowRootClonable:bt,shadowRootDelegatesFocus:bt,shadowRootMode:null,shape:null,size:He,sizes:null,slot:null,span:He,spellCheck:On,src:null,srcDoc:null,srcLang:null,srcSet:null,start:He,step:null,style:null,tabIndex:He,target:null,title:null,translate:null,type:null,typeMustMatch:bt,useMap:null,value:On,width:He,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:rn,axis:null,background:null,bgColor:null,border:He,borderColor:null,bottomMargin:He,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:bt,declare:bt,event:null,face:null,frame:null,frameBorder:null,hSpace:He,leftMargin:He,link:null,longDesc:null,lowSrc:null,marginHeight:He,marginWidth:He,noResize:bt,noHref:bt,noShade:bt,noWrap:bt,object:null,profile:null,prompt:null,rev:null,rightMargin:He,rules:null,scheme:null,scrolling:On,standby:null,summary:null,text:null,topMargin:He,valueType:null,version:null,vAlign:null,vLink:null,vSpace:He,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:bt,disableRemotePlayback:bt,prefix:null,property:null,results:He,security:null,unselectable:null},space:"html",transform:r6}),pW=_p({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:_i,accentHeight:He,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:He,amplitude:He,arabicForm:null,ascent:He,attributeName:null,attributeType:null,azimuth:He,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:He,by:null,calcMode:null,capHeight:He,className:rn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:He,diffuseConstant:He,direction:null,display:null,dur:null,divisor:He,dominantBaseline:null,download:bt,dx:null,dy:null,edgeMode:null,editable:null,elevation:He,enableBackground:null,end:null,event:null,exponent:He,externalResourcesRequired:null,fill:null,fillOpacity:He,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Kh,g2:Kh,glyphName:Kh,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:He,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:He,horizOriginX:He,horizOriginY:He,id:null,ideographic:He,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:He,k:He,k1:He,k2:He,k3:He,k4:He,kernelMatrix:_i,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:He,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:He,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:He,overlineThickness:He,paintOrder:null,panose1:null,path:null,pathLength:He,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:rn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:He,pointsAtY:He,pointsAtZ:He,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:_i,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:_i,rev:_i,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:_i,requiredFeatures:_i,requiredFonts:_i,requiredFormats:_i,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:He,specularExponent:He,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:He,strikethroughThickness:He,string:null,stroke:null,strokeDashArray:_i,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:He,strokeOpacity:He,strokeWidth:null,style:null,surfaceScale:He,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:_i,tabIndex:He,tableValues:null,target:null,targetX:He,targetY:He,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:_i,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:He,underlineThickness:He,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:He,values:null,vAlphabetic:He,vMathematical:He,vectorEffect:null,vHanging:He,vIdeographic:He,version:null,vertAdvY:He,vertOriginX:He,vertOriginY:He,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:He,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:n6}),i6=_p({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(r,e){return"xlink:"+e.slice(5).toLowerCase()}}),a6=_p({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:r6}),s6=_p({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(r,e){return"xml:"+e.slice(3).toLowerCase()}}),gW={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},mW=/[A-Z]/g,j4=/-[a-z]/g,bW=/^data[-\w.:]+$/i;function yW(r,e){const t=Z_(e);let n=e,i=pi;if(t in r.normal)return r.property[r.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&bW.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(j4,vW);n="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!j4.test(a)){let s=a.replace(mW,xW);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}i=vS}return new i(n,e)}function xW(r){return"-"+r.toLowerCase()}function vW(r){return r.charAt(1).toUpperCase()}const wW=e6([t6,fW,i6,a6,s6],"html"),wS=e6([t6,pW,i6,a6,s6],"svg");function kW(r){return r.join(" ").trim()}var Ch={},oD,F4;function DW(){if(F4)return oD;F4=1;var r=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,n=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,l=/^\s+|\s+$/g,u=`
`,d="/",h="*",g="",b="comment",y="declaration";oD=function(v,w){if(typeof v!="string")throw new TypeError("First argument must be a string");if(!v)return[];w=w||{};var k=1,_=1;function A(W){var j=W.match(e);j&&(k+=j.length);var X=W.lastIndexOf(u);_=~X?W.length-X:_+W.length}function N(){var W={line:k,column:_};return function(j){return j.position=new E(W),M(),j}}function E(W){this.start=W,this.end={line:k,column:_},this.source=w.source}E.prototype.content=v;function T(W){var j=new Error(w.source+":"+k+":"+_+": "+W);if(j.reason=W,j.filename=w.source,j.line=k,j.column=_,j.source=v,!w.silent)throw j}function R(W){var j=W.exec(v);if(j){var X=j[0];return A(X),v=v.slice(X.length),j}}function M(){R(t)}function I(W){var j;for(W=W||[];j=F();)j!==!1&&W.push(j);return W}function F(){var W=N();if(!(d!=v.charAt(0)||h!=v.charAt(1))){for(var j=2;g!=v.charAt(j)&&(h!=v.charAt(j)||d!=v.charAt(j+1));)++j;if(j+=2,g===v.charAt(j-1))return T("End of comment missing");var X=v.slice(2,j-2);return _+=2,A(X),v=v.slice(j),_+=2,W({type:b,comment:X})}}function G(){var W=N(),j=R(n);if(j){if(F(),!R(i))return T("property missing ':'");var X=R(a),P=W({type:y,property:D(j[0].replace(r,g)),value:X?D(X[0].replace(r,g)):g});return R(s),P}}function U(){var W=[];I(W);for(var j;j=G();)j!==!1&&(W.push(j),I(W));return W}return M(),U()};function D(v){return v?v.replace(l,g):g}return oD}var I4;function _W(){if(I4)return Ch;I4=1;var r=Ch&&Ch.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ch,"__esModule",{value:!0}),Ch.default=t;var e=r(DW());function t(n,i){var a=null;if(!n||typeof n!="string")return a;var s=(0,e.default)(n),l=typeof i=="function";return s.forEach(function(u){if(u.type==="declaration"){var d=u.property,h=u.value;l?i(d,h,u):h&&(a=a||{},a[d]=h)}}),a}return Ch}var Og={},O4;function AW(){if(O4)return Og;O4=1,Object.defineProperty(Og,"__esModule",{value:!0}),Og.camelCase=void 0;var r=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,n=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,a=function(d){return!d||t.test(d)||r.test(d)},s=function(d,h){return h.toUpperCase()},l=function(d,h){return"".concat(h,"-")},u=function(d,h){return h===void 0&&(h={}),a(d)?d:(d=d.toLowerCase(),h.reactCompat?d=d.replace(i,l):d=d.replace(n,l),d.replace(e,s))};return Og.camelCase=u,Og}var Mg,M4;function SW(){if(M4)return Mg;M4=1;var r=Mg&&Mg.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=r(_W()),t=AW();function n(i,a){var s={};return!i||typeof i!="string"||(0,e.default)(i,function(l,u){l&&u&&(s[(0,t.camelCase)(l,a)]=u)}),s}return n.default=n,Mg=n,Mg}var EW=SW();const TW=ey(EW),o6=l6("end"),kS=l6("start");function l6(r){return e;function e(t){const n=t&&t.position&&t.position[r]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function CW(r){const e=kS(r),t=o6(r);if(e&&t)return{start:e,end:t}}function sm(r){return!r||typeof r!="object"?"":"position"in r||"type"in r?L4(r.position):"start"in r||"end"in r?L4(r):"line"in r||"column"in r?tA(r):""}function tA(r){return B4(r&&r.line)+":"+B4(r&&r.column)}function L4(r){return tA(r&&r.start)+"-"+tA(r&&r.end)}function B4(r){return r&&typeof r=="number"?r:1}class Ir extends Error{constructor(e,t,n){super(),typeof t=="string"&&(n=t,t=void 0);let i="",a={},s=!1;if(t&&("line"in t&&"column"in t?a={place:t}:"start"in t&&"end"in t?a={place:t}:"type"in t?a={ancestors:[t],place:t.position}:a={...t}),typeof e=="string"?i=e:!a.cause&&e&&(s=!0,i=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof n=="string"){const u=n.indexOf(":");u===-1?a.ruleId=n:(a.source=n.slice(0,u),a.ruleId=n.slice(u+1))}if(!a.place&&a.ancestors&&a.ancestors){const u=a.ancestors[a.ancestors.length-1];u&&(a.place=u.position)}const l=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=l?l.line:void 0,this.name=sm(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=s&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ir.prototype.file="";Ir.prototype.name="";Ir.prototype.reason="";Ir.prototype.message="";Ir.prototype.stack="";Ir.prototype.column=void 0;Ir.prototype.line=void 0;Ir.prototype.ancestors=void 0;Ir.prototype.cause=void 0;Ir.prototype.fatal=void 0;Ir.prototype.place=void 0;Ir.prototype.ruleId=void 0;Ir.prototype.source=void 0;const DS={}.hasOwnProperty,NW=new Map,UW=/[A-Z]/g,RW=new Set(["table","tbody","thead","tfoot","tr"]),jW=new Set(["td","th"]),c6="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function FW(r,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let n;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=WW(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=zW(t,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:n,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?wS:wW,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=u6(i,r,void 0);return a&&typeof a!="string"?a:i.create(r,i.Fragment,{children:a||void 0},void 0)}function u6(r,e,t){if(e.type==="element")return IW(r,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return OW(r,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return LW(r,e,t);if(e.type==="mdxjsEsm")return MW(r,e);if(e.type==="root")return BW(r,e,t);if(e.type==="text")return PW(r,e)}function IW(r,e,t){const n=r.schema;let i=n;e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(i=wS,r.schema=i),r.ancestors.push(e);const a=h6(r,e.tagName,!1),s=HW(r,e);let l=AS(r,e);return RW.has(e.tagName)&&(l=l.filter(function(u){return typeof u=="string"?!dW(u):!0})),d6(r,s,a,e),_S(s,l),r.ancestors.pop(),r.schema=n,r.create(e,a,s,t)}function OW(r,e){if(e.data&&e.data.estree&&r.evaluater){const n=e.data.estree.body[0];return n.type,r.evaluater.evaluateExpression(n.expression)}km(r,e.position)}function MW(r,e){if(e.data&&e.data.estree&&r.evaluater)return r.evaluater.evaluateProgram(e.data.estree);km(r,e.position)}function LW(r,e,t){const n=r.schema;let i=n;e.name==="svg"&&n.space==="html"&&(i=wS,r.schema=i),r.ancestors.push(e);const a=e.name===null?r.Fragment:h6(r,e.name,!0),s=qW(r,e),l=AS(r,e);return d6(r,s,a,e),_S(s,l),r.ancestors.pop(),r.schema=n,r.create(e,a,s,t)}function BW(r,e,t){const n={};return _S(n,AS(r,e)),r.create(e,r.Fragment,n,t)}function PW(r,e){return e.value}function d6(r,e,t,n){typeof t!="string"&&t!==r.Fragment&&r.passNode&&(e.node=n)}function _S(r,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(r.children=t)}}function zW(r,e,t){return n;function n(i,a,s,l){const d=Array.isArray(s.children)?t:e;return l?d(a,s,l):d(a,s)}}function WW(r,e){return t;function t(n,i,a,s){const l=Array.isArray(a.children),u=kS(n);return e(i,a,s,l,{columnNumber:u?u.column-1:void 0,fileName:r,lineNumber:u?u.line:void 0},void 0)}}function HW(r,e){const t={};let n,i;for(i in e.properties)if(i!=="children"&&DS.call(e.properties,i)){const a=VW(r,i,e.properties[i]);if(a){const[s,l]=a;r.tableCellAlignToStyle&&s==="align"&&typeof l=="string"&&jW.has(e.tagName)?n=l:t[s]=l}}if(n){const a=t.style||(t.style={});a[r.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return t}function qW(r,e){const t={};for(const n of e.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&r.evaluater){const a=n.data.estree.body[0];a.type;const s=a.expression;s.type;const l=s.properties[0];l.type,Object.assign(t,r.evaluater.evaluateExpression(l.argument))}else km(r,e.position);else{const i=n.name;let a;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&r.evaluater){const l=n.value.data.estree.body[0];l.type,a=r.evaluater.evaluateExpression(l.expression)}else km(r,e.position);else a=n.value===null?!0:n.value;t[i]=a}return t}function AS(r,e){const t=[];let n=-1;const i=r.passKeys?new Map:NW;for(;++n<e.children.length;){const a=e.children[n];let s;if(r.passKeys){const u=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(u){const d=i.get(u)||0;s=u+"-"+d,i.set(u,d+1)}}const l=u6(r,a,s);l!==void 0&&t.push(l)}return t}function VW(r,e,t){const n=yW(r.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=n.commaSeparated?sW(t):kW(t)),n.property==="style"){let i=typeof t=="object"?t:XW(r,String(t));return r.stylePropertyNameCase==="css"&&(i=GW(i)),["style",i]}return[r.elementAttributeNameCase==="react"&&n.space?gW[n.property]||n.property:n.attribute,t]}}function XW(r,e){try{return TW(e,{reactCompat:!0})}catch(t){if(r.ignoreInvalidStyle)return{};const n=t,i=new Ir("Cannot parse `style` attribute",{ancestors:r.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=r.filePath||void 0,i.url=c6+"#cannot-parse-style-attribute",i}}function h6(r,e,t){let n;if(!t)n={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let a=-1,s;for(;++a<i.length;){const l=N4(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};s=s?{type:"MemberExpression",object:s,property:l,computed:!!(a&&l.type==="Literal"),optional:!1}:l}n=s}else n=N4(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(n.type==="Literal"){const i=n.value;return DS.call(r.components,i)?r.components[i]:i}if(r.evaluater)return r.evaluater.evaluateExpression(n);km(r)}function km(r,e){const t=new Ir("Cannot handle MDX estrees without `createEvaluater`",{ancestors:r.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=r.filePath||void 0,t.url=c6+"#cannot-handle-mdx-estrees-without-createevaluater",t}function GW(r){const e={};let t;for(t in r)DS.call(r,t)&&(e[$W(t)]=r[t]);return e}function $W(r){let e=r.replace(UW,YW);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function YW(r){return"-"+r.toLowerCase()}const lD={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},KW={};function SS(r,e){const t=KW,n=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,i=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return f6(r,n,i)}function f6(r,e,t){if(QW(r)){if("value"in r)return r.type==="html"&&!t?"":r.value;if(e&&"alt"in r&&r.alt)return r.alt;if("children"in r)return P4(r.children,e,t)}return Array.isArray(r)?P4(r,e,t):""}function P4(r,e,t){const n=[];let i=-1;for(;++i<r.length;)n[i]=f6(r[i],e,t);return n.join("")}function QW(r){return!!(r&&typeof r=="object")}const z4=document.createElement("i");function ES(r){const e="&"+r+";";z4.innerHTML=e;const t=z4.textContent;return t.charCodeAt(t.length-1)===59&&r!=="semi"||t===e?!1:t}function Xi(r,e,t,n){const i=r.length;let a=0,s;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,t=t>0?t:0,n.length<1e4)s=Array.from(n),s.unshift(e,t),r.splice(...s);else for(t&&r.splice(e,t);a<n.length;)s=n.slice(a,a+1e4),s.unshift(e,0),r.splice(...s),a+=1e4,e+=1e4}function xa(r,e){return r.length>0?(Xi(r,r.length,0,e),r):e}const W4={}.hasOwnProperty;function p6(r){const e={};let t=-1;for(;++t<r.length;)ZW(e,r[t]);return e}function ZW(r,e){let t;for(t in e){const i=(W4.call(r,t)?r[t]:void 0)||(r[t]={}),a=e[t];let s;if(a)for(s in a){W4.call(i,s)||(i[s]=[]);const l=a[s];JW(i[s],Array.isArray(l)?l:l?[l]:[])}}}function JW(r,e){let t=-1;const n=[];for(;++t<e.length;)(e[t].add==="after"?r:n).push(e[t]);Xi(r,0,0,n)}function g6(r,e){const t=Number.parseInt(r,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"�":String.fromCodePoint(t)}function Ya(r){return r.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Vr=Vc(/[A-Za-z]/),Rr=Vc(/[\dA-Za-z]/),eH=Vc(/[#-'*+\--9=?A-Z^-~]/);function x1(r){return r!==null&&(r<32||r===127)}const nA=Vc(/\d/),tH=Vc(/[\dA-Fa-f]/),nH=Vc(/[!-/:-@[-`{-~]/);function st(r){return r!==null&&r<-2}function tn(r){return r!==null&&(r<0||r===32)}function Et(r){return r===-2||r===-1||r===32}const Ev=Vc(new RegExp("\\p{P}|\\p{S}","u")),Fd=Vc(/\s/);function Vc(r){return e;function e(t){return t!==null&&t>-1&&r.test(String.fromCharCode(t))}}function Ap(r){const e=[];let t=-1,n=0,i=0;for(;++t<r.length;){const a=r.charCodeAt(t);let s="";if(a===37&&Rr(r.charCodeAt(t+1))&&Rr(r.charCodeAt(t+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(s=String.fromCharCode(a));else if(a>55295&&a<57344){const l=r.charCodeAt(t+1);a<56320&&l>56319&&l<57344?(s=String.fromCharCode(a,l),i=1):s="�"}else s=String.fromCharCode(a);s&&(e.push(r.slice(n,t),encodeURIComponent(s)),n=t+i+1,s=""),i&&(t+=i,i=0)}return e.join("")+r.slice(n)}function Rt(r,e,t,n){const i=n?n-1:Number.POSITIVE_INFINITY;let a=0;return s;function s(u){return Et(u)?(r.enter(t),l(u)):e(u)}function l(u){return Et(u)&&a++<i?(r.consume(u),l):(r.exit(t),e(u))}}const rH={tokenize:iH};function iH(r){const e=r.attempt(this.parser.constructs.contentInitial,n,i);let t;return e;function n(l){if(l===null){r.consume(l);return}return r.enter("lineEnding"),r.consume(l),r.exit("lineEnding"),Rt(r,e,"linePrefix")}function i(l){return r.enter("paragraph"),a(l)}function a(l){const u=r.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=u),t=u,s(l)}function s(l){if(l===null){r.exit("chunkText"),r.exit("paragraph"),r.consume(l);return}return st(l)?(r.consume(l),r.exit("chunkText"),a):(r.consume(l),s)}}const aH={tokenize:sH},H4={tokenize:oH};function sH(r){const e=this,t=[];let n=0,i,a,s;return l;function l(A){if(n<t.length){const N=t[n];return e.containerState=N[1],r.attempt(N[0].continuation,u,d)(A)}return d(A)}function u(A){if(n++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&_();const N=e.events.length;let E=N,T;for(;E--;)if(e.events[E][0]==="exit"&&e.events[E][1].type==="chunkFlow"){T=e.events[E][1].end;break}k(n);let R=N;for(;R<e.events.length;)e.events[R][1].end={...T},R++;return Xi(e.events,E+1,0,e.events.slice(N)),e.events.length=R,d(A)}return l(A)}function d(A){if(n===t.length){if(!i)return b(A);if(i.currentConstruct&&i.currentConstruct.concrete)return D(A);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},r.check(H4,h,g)(A)}function h(A){return i&&_(),k(n),b(A)}function g(A){return e.parser.lazy[e.now().line]=n!==t.length,s=e.now().offset,D(A)}function b(A){return e.containerState={},r.attempt(H4,y,D)(A)}function y(A){return n++,t.push([e.currentConstruct,e.containerState]),b(A)}function D(A){if(A===null){i&&_(),k(0),r.consume(A);return}return i=i||e.parser.flow(e.now()),r.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),v(A)}function v(A){if(A===null){w(r.exit("chunkFlow"),!0),k(0),r.consume(A);return}return st(A)?(r.consume(A),w(r.exit("chunkFlow")),n=0,e.interrupt=void 0,l):(r.consume(A),v)}function w(A,N){const E=e.sliceStream(A);if(N&&E.push(null),A.previous=a,a&&(a.next=A),a=A,i.defineSkip(A.start),i.write(E),e.parser.lazy[A.start.line]){let T=i.events.length;for(;T--;)if(i.events[T][1].start.offset<s&&(!i.events[T][1].end||i.events[T][1].end.offset>s))return;const R=e.events.length;let M=R,I,F;for(;M--;)if(e.events[M][0]==="exit"&&e.events[M][1].type==="chunkFlow"){if(I){F=e.events[M][1].end;break}I=!0}for(k(n),T=R;T<e.events.length;)e.events[T][1].end={...F},T++;Xi(e.events,M+1,0,e.events.slice(R)),e.events.length=T}}function k(A){let N=t.length;for(;N-- >A;){const E=t[N];e.containerState=E[1],E[0].exit.call(e,r)}t.length=A}function _(){i.write([null]),a=void 0,i=void 0,e.containerState._closeFlow=void 0}}function oH(r,e,t){return Rt(r,r.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function gp(r){if(r===null||tn(r)||Fd(r))return 1;if(Ev(r))return 2}function Tv(r,e,t){const n=[];let i=-1;for(;++i<r.length;){const a=r[i].resolveAll;a&&!n.includes(a)&&(e=a(e,t),n.push(a))}return e}const rA={name:"attention",resolveAll:lH,tokenize:cH};function lH(r,e){let t=-1,n,i,a,s,l,u,d,h;for(;++t<r.length;)if(r[t][0]==="enter"&&r[t][1].type==="attentionSequence"&&r[t][1]._close){for(n=t;n--;)if(r[n][0]==="exit"&&r[n][1].type==="attentionSequence"&&r[n][1]._open&&e.sliceSerialize(r[n][1]).charCodeAt(0)===e.sliceSerialize(r[t][1]).charCodeAt(0)){if((r[n][1]._close||r[t][1]._open)&&(r[t][1].end.offset-r[t][1].start.offset)%3&&!((r[n][1].end.offset-r[n][1].start.offset+r[t][1].end.offset-r[t][1].start.offset)%3))continue;u=r[n][1].end.offset-r[n][1].start.offset>1&&r[t][1].end.offset-r[t][1].start.offset>1?2:1;const g={...r[n][1].end},b={...r[t][1].start};q4(g,-u),q4(b,u),s={type:u>1?"strongSequence":"emphasisSequence",start:g,end:{...r[n][1].end}},l={type:u>1?"strongSequence":"emphasisSequence",start:{...r[t][1].start},end:b},a={type:u>1?"strongText":"emphasisText",start:{...r[n][1].end},end:{...r[t][1].start}},i={type:u>1?"strong":"emphasis",start:{...s.start},end:{...l.end}},r[n][1].end={...s.start},r[t][1].start={...l.end},d=[],r[n][1].end.offset-r[n][1].start.offset&&(d=xa(d,[["enter",r[n][1],e],["exit",r[n][1],e]])),d=xa(d,[["enter",i,e],["enter",s,e],["exit",s,e],["enter",a,e]]),d=xa(d,Tv(e.parser.constructs.insideSpan.null,r.slice(n+1,t),e)),d=xa(d,[["exit",a,e],["enter",l,e],["exit",l,e],["exit",i,e]]),r[t][1].end.offset-r[t][1].start.offset?(h=2,d=xa(d,[["enter",r[t][1],e],["exit",r[t][1],e]])):h=0,Xi(r,n-1,t-n+3,d),t=n+d.length-h-2;break}}for(t=-1;++t<r.length;)r[t][1].type==="attentionSequence"&&(r[t][1].type="data");return r}function cH(r,e){const t=this.parser.constructs.attentionMarkers.null,n=this.previous,i=gp(n);let a;return s;function s(u){return a=u,r.enter("attentionSequence"),l(u)}function l(u){if(u===a)return r.consume(u),l;const d=r.exit("attentionSequence"),h=gp(u),g=!h||h===2&&i||t.includes(u),b=!i||i===2&&h||t.includes(n);return d._open=!!(a===42?g:g&&(i||!b)),d._close=!!(a===42?b:b&&(h||!g)),e(u)}}function q4(r,e){r.column+=e,r.offset+=e,r._bufferIndex+=e}const uH={name:"autolink",tokenize:dH};function dH(r,e,t){let n=0;return i;function i(y){return r.enter("autolink"),r.enter("autolinkMarker"),r.consume(y),r.exit("autolinkMarker"),r.enter("autolinkProtocol"),a}function a(y){return Vr(y)?(r.consume(y),s):y===64?t(y):d(y)}function s(y){return y===43||y===45||y===46||Rr(y)?(n=1,l(y)):d(y)}function l(y){return y===58?(r.consume(y),n=0,u):(y===43||y===45||y===46||Rr(y))&&n++<32?(r.consume(y),l):(n=0,d(y))}function u(y){return y===62?(r.exit("autolinkProtocol"),r.enter("autolinkMarker"),r.consume(y),r.exit("autolinkMarker"),r.exit("autolink"),e):y===null||y===32||y===60||x1(y)?t(y):(r.consume(y),u)}function d(y){return y===64?(r.consume(y),h):eH(y)?(r.consume(y),d):t(y)}function h(y){return Rr(y)?g(y):t(y)}function g(y){return y===46?(r.consume(y),n=0,h):y===62?(r.exit("autolinkProtocol").type="autolinkEmail",r.enter("autolinkMarker"),r.consume(y),r.exit("autolinkMarker"),r.exit("autolink"),e):b(y)}function b(y){if((y===45||Rr(y))&&n++<63){const D=y===45?b:g;return r.consume(y),D}return t(y)}}const gy={partial:!0,tokenize:hH};function hH(r,e,t){return n;function n(a){return Et(a)?Rt(r,i,"linePrefix")(a):i(a)}function i(a){return a===null||st(a)?e(a):t(a)}}const m6={continuation:{tokenize:pH},exit:gH,name:"blockQuote",tokenize:fH};function fH(r,e,t){const n=this;return i;function i(s){if(s===62){const l=n.containerState;return l.open||(r.enter("blockQuote",{_container:!0}),l.open=!0),r.enter("blockQuotePrefix"),r.enter("blockQuoteMarker"),r.consume(s),r.exit("blockQuoteMarker"),a}return t(s)}function a(s){return Et(s)?(r.enter("blockQuotePrefixWhitespace"),r.consume(s),r.exit("blockQuotePrefixWhitespace"),r.exit("blockQuotePrefix"),e):(r.exit("blockQuotePrefix"),e(s))}}function pH(r,e,t){const n=this;return i;function i(s){return Et(s)?Rt(r,a,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):a(s)}function a(s){return r.attempt(m6,e,t)(s)}}function gH(r){r.exit("blockQuote")}const b6={name:"characterEscape",tokenize:mH};function mH(r,e,t){return n;function n(a){return r.enter("characterEscape"),r.enter("escapeMarker"),r.consume(a),r.exit("escapeMarker"),i}function i(a){return nH(a)?(r.enter("characterEscapeValue"),r.consume(a),r.exit("characterEscapeValue"),r.exit("characterEscape"),e):t(a)}}const y6={name:"characterReference",tokenize:bH};function bH(r,e,t){const n=this;let i=0,a,s;return l;function l(g){return r.enter("characterReference"),r.enter("characterReferenceMarker"),r.consume(g),r.exit("characterReferenceMarker"),u}function u(g){return g===35?(r.enter("characterReferenceMarkerNumeric"),r.consume(g),r.exit("characterReferenceMarkerNumeric"),d):(r.enter("characterReferenceValue"),a=31,s=Rr,h(g))}function d(g){return g===88||g===120?(r.enter("characterReferenceMarkerHexadecimal"),r.consume(g),r.exit("characterReferenceMarkerHexadecimal"),r.enter("characterReferenceValue"),a=6,s=tH,h):(r.enter("characterReferenceValue"),a=7,s=nA,h(g))}function h(g){if(g===59&&i){const b=r.exit("characterReferenceValue");return s===Rr&&!ES(n.sliceSerialize(b))?t(g):(r.enter("characterReferenceMarker"),r.consume(g),r.exit("characterReferenceMarker"),r.exit("characterReference"),e)}return s(g)&&i++<a?(r.consume(g),h):t(g)}}const V4={partial:!0,tokenize:xH},X4={concrete:!0,name:"codeFenced",tokenize:yH};function yH(r,e,t){const n=this,i={partial:!0,tokenize:E};let a=0,s=0,l;return u;function u(T){return d(T)}function d(T){const R=n.events[n.events.length-1];return a=R&&R[1].type==="linePrefix"?R[2].sliceSerialize(R[1],!0).length:0,l=T,r.enter("codeFenced"),r.enter("codeFencedFence"),r.enter("codeFencedFenceSequence"),h(T)}function h(T){return T===l?(s++,r.consume(T),h):s<3?t(T):(r.exit("codeFencedFenceSequence"),Et(T)?Rt(r,g,"whitespace")(T):g(T))}function g(T){return T===null||st(T)?(r.exit("codeFencedFence"),n.interrupt?e(T):r.check(V4,v,N)(T)):(r.enter("codeFencedFenceInfo"),r.enter("chunkString",{contentType:"string"}),b(T))}function b(T){return T===null||st(T)?(r.exit("chunkString"),r.exit("codeFencedFenceInfo"),g(T)):Et(T)?(r.exit("chunkString"),r.exit("codeFencedFenceInfo"),Rt(r,y,"whitespace")(T)):T===96&&T===l?t(T):(r.consume(T),b)}function y(T){return T===null||st(T)?g(T):(r.enter("codeFencedFenceMeta"),r.enter("chunkString",{contentType:"string"}),D(T))}function D(T){return T===null||st(T)?(r.exit("chunkString"),r.exit("codeFencedFenceMeta"),g(T)):T===96&&T===l?t(T):(r.consume(T),D)}function v(T){return r.attempt(i,N,w)(T)}function w(T){return r.enter("lineEnding"),r.consume(T),r.exit("lineEnding"),k}function k(T){return a>0&&Et(T)?Rt(r,_,"linePrefix",a+1)(T):_(T)}function _(T){return T===null||st(T)?r.check(V4,v,N)(T):(r.enter("codeFlowValue"),A(T))}function A(T){return T===null||st(T)?(r.exit("codeFlowValue"),_(T)):(r.consume(T),A)}function N(T){return r.exit("codeFenced"),e(T)}function E(T,R,M){let I=0;return F;function F(X){return T.enter("lineEnding"),T.consume(X),T.exit("lineEnding"),G}function G(X){return T.enter("codeFencedFence"),Et(X)?Rt(T,U,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(X):U(X)}function U(X){return X===l?(T.enter("codeFencedFenceSequence"),W(X)):M(X)}function W(X){return X===l?(I++,T.consume(X),W):I>=s?(T.exit("codeFencedFenceSequence"),Et(X)?Rt(T,j,"whitespace")(X):j(X)):M(X)}function j(X){return X===null||st(X)?(T.exit("codeFencedFence"),R(X)):M(X)}}}function xH(r,e,t){const n=this;return i;function i(s){return s===null?t(s):(r.enter("lineEnding"),r.consume(s),r.exit("lineEnding"),a)}function a(s){return n.parser.lazy[n.now().line]?t(s):e(s)}}const cD={name:"codeIndented",tokenize:wH},vH={partial:!0,tokenize:kH};function wH(r,e,t){const n=this;return i;function i(d){return r.enter("codeIndented"),Rt(r,a,"linePrefix",5)(d)}function a(d){const h=n.events[n.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?s(d):t(d)}function s(d){return d===null?u(d):st(d)?r.attempt(vH,s,u)(d):(r.enter("codeFlowValue"),l(d))}function l(d){return d===null||st(d)?(r.exit("codeFlowValue"),s(d)):(r.consume(d),l)}function u(d){return r.exit("codeIndented"),e(d)}}function kH(r,e,t){const n=this;return i;function i(s){return n.parser.lazy[n.now().line]?t(s):st(s)?(r.enter("lineEnding"),r.consume(s),r.exit("lineEnding"),i):Rt(r,a,"linePrefix",5)(s)}function a(s){const l=n.events[n.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(s):st(s)?i(s):t(s)}}const DH={name:"codeText",previous:AH,resolve:_H,tokenize:SH};function _H(r){let e=r.length-4,t=3,n,i;if((r[t][1].type==="lineEnding"||r[t][1].type==="space")&&(r[e][1].type==="lineEnding"||r[e][1].type==="space")){for(n=t;++n<e;)if(r[n][1].type==="codeTextData"){r[t][1].type="codeTextPadding",r[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(n=t-1,e++;++n<=e;)i===void 0?n!==e&&r[n][1].type!=="lineEnding"&&(i=n):(n===e||r[n][1].type==="lineEnding")&&(r[i][1].type="codeTextData",n!==i+2&&(r[i][1].end=r[n-1][1].end,r.splice(i+2,n-i-2),e-=n-i-2,n=i+2),i=void 0);return r}function AH(r){return r!==96||this.events[this.events.length-1][1].type==="characterEscape"}function SH(r,e,t){let n=0,i,a;return s;function s(g){return r.enter("codeText"),r.enter("codeTextSequence"),l(g)}function l(g){return g===96?(r.consume(g),n++,l):(r.exit("codeTextSequence"),u(g))}function u(g){return g===null?t(g):g===32?(r.enter("space"),r.consume(g),r.exit("space"),u):g===96?(a=r.enter("codeTextSequence"),i=0,h(g)):st(g)?(r.enter("lineEnding"),r.consume(g),r.exit("lineEnding"),u):(r.enter("codeTextData"),d(g))}function d(g){return g===null||g===32||g===96||st(g)?(r.exit("codeTextData"),u(g)):(r.consume(g),d)}function h(g){return g===96?(r.consume(g),i++,h):i===n?(r.exit("codeTextSequence"),r.exit("codeText"),e(g)):(a.type="codeTextData",d(g))}}class EH{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=t??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const i=t||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return n&&Lg(this.left,n),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Lg(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Lg(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);Lg(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Lg(this.left,t.reverse())}}}function Lg(r,e){let t=0;if(e.length<1e4)r.push(...e);else for(;t<e.length;)r.push(...e.slice(t,t+1e4)),t+=1e4}function x6(r){const e={};let t=-1,n,i,a,s,l,u,d;const h=new EH(r);for(;++t<h.length;){for(;t in e;)t=e[t];if(n=h.get(t),t&&n[1].type==="chunkFlow"&&h.get(t-1)[1].type==="listItemPrefix"&&(u=n[1]._tokenizer.events,a=0,a<u.length&&u[a][1].type==="lineEndingBlank"&&(a+=2),a<u.length&&u[a][1].type==="content"))for(;++a<u.length&&u[a][1].type!=="content";)u[a][1].type==="chunkText"&&(u[a][1]._isInFirstContentOfListItem=!0,a++);if(n[0]==="enter")n[1].contentType&&(Object.assign(e,TH(h,t)),t=e[t],d=!0);else if(n[1]._container){for(a=t,i=void 0;a--;)if(s=h.get(a),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(i&&(h.get(i)[1].type="lineEndingBlank"),s[1].type="lineEnding",i=a);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;i&&(n[1].end={...h.get(i)[1].start},l=h.slice(i,t),l.unshift(n),h.splice(i,t-i+1,l))}}return Xi(r,0,Number.POSITIVE_INFINITY,h.slice(0)),!d}function TH(r,e){const t=r.get(e)[1],n=r.get(e)[2];let i=e-1;const a=[];let s=t._tokenizer;s||(s=n.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const l=s.events,u=[],d={};let h,g,b=-1,y=t,D=0,v=0;const w=[v];for(;y;){for(;r.get(++i)[1]!==y;);a.push(i),y._tokenizer||(h=n.sliceStream(y),y.next||h.push(null),g&&s.defineSkip(y.start),y._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(h),y._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),g=y,y=y.next}for(y=t;++b<l.length;)l[b][0]==="exit"&&l[b-1][0]==="enter"&&l[b][1].type===l[b-1][1].type&&l[b][1].start.line!==l[b][1].end.line&&(v=b+1,w.push(v),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(s.events=[],y?(y._tokenizer=void 0,y.previous=void 0):w.pop(),b=w.length;b--;){const k=l.slice(w[b],w[b+1]),_=a.pop();u.push([_,_+k.length-1]),r.splice(_,2,k)}for(u.reverse(),b=-1;++b<u.length;)d[D+u[b][0]]=D+u[b][1],D+=u[b][1]-u[b][0]-1;return d}const CH={resolve:UH,tokenize:RH},NH={partial:!0,tokenize:jH};function UH(r){return x6(r),r}function RH(r,e){let t;return n;function n(l){return r.enter("content"),t=r.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?a(l):st(l)?r.check(NH,s,a)(l):(r.consume(l),i)}function a(l){return r.exit("chunkContent"),r.exit("content"),e(l)}function s(l){return r.consume(l),r.exit("chunkContent"),t.next=r.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function jH(r,e,t){const n=this;return i;function i(s){return r.exit("chunkContent"),r.enter("lineEnding"),r.consume(s),r.exit("lineEnding"),Rt(r,a,"linePrefix")}function a(s){if(s===null||st(s))return t(s);const l=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(s):r.interrupt(n.parser.constructs.flow,t,e)(s)}}function v6(r,e,t,n,i,a,s,l,u){const d=u||Number.POSITIVE_INFINITY;let h=0;return g;function g(k){return k===60?(r.enter(n),r.enter(i),r.enter(a),r.consume(k),r.exit(a),b):k===null||k===32||k===41||x1(k)?t(k):(r.enter(n),r.enter(s),r.enter(l),r.enter("chunkString",{contentType:"string"}),v(k))}function b(k){return k===62?(r.enter(a),r.consume(k),r.exit(a),r.exit(i),r.exit(n),e):(r.enter(l),r.enter("chunkString",{contentType:"string"}),y(k))}function y(k){return k===62?(r.exit("chunkString"),r.exit(l),b(k)):k===null||k===60||st(k)?t(k):(r.consume(k),k===92?D:y)}function D(k){return k===60||k===62||k===92?(r.consume(k),y):y(k)}function v(k){return!h&&(k===null||k===41||tn(k))?(r.exit("chunkString"),r.exit(l),r.exit(s),r.exit(n),e(k)):h<d&&k===40?(r.consume(k),h++,v):k===41?(r.consume(k),h--,v):k===null||k===32||k===40||x1(k)?t(k):(r.consume(k),k===92?w:v)}function w(k){return k===40||k===41||k===92?(r.consume(k),v):v(k)}}function w6(r,e,t,n,i,a){const s=this;let l=0,u;return d;function d(y){return r.enter(n),r.enter(i),r.consume(y),r.exit(i),r.enter(a),h}function h(y){return l>999||y===null||y===91||y===93&&!u||y===94&&!l&&"_hiddenFootnoteSupport"in s.parser.constructs?t(y):y===93?(r.exit(a),r.enter(i),r.consume(y),r.exit(i),r.exit(n),e):st(y)?(r.enter("lineEnding"),r.consume(y),r.exit("lineEnding"),h):(r.enter("chunkString",{contentType:"string"}),g(y))}function g(y){return y===null||y===91||y===93||st(y)||l++>999?(r.exit("chunkString"),h(y)):(r.consume(y),u||(u=!Et(y)),y===92?b:g)}function b(y){return y===91||y===92||y===93?(r.consume(y),l++,g):g(y)}}function k6(r,e,t,n,i,a){let s;return l;function l(b){return b===34||b===39||b===40?(r.enter(n),r.enter(i),r.consume(b),r.exit(i),s=b===40?41:b,u):t(b)}function u(b){return b===s?(r.enter(i),r.consume(b),r.exit(i),r.exit(n),e):(r.enter(a),d(b))}function d(b){return b===s?(r.exit(a),u(s)):b===null?t(b):st(b)?(r.enter("lineEnding"),r.consume(b),r.exit("lineEnding"),Rt(r,d,"linePrefix")):(r.enter("chunkString",{contentType:"string"}),h(b))}function h(b){return b===s||b===null||st(b)?(r.exit("chunkString"),d(b)):(r.consume(b),b===92?g:h)}function g(b){return b===s||b===92?(r.consume(b),h):h(b)}}function om(r,e){let t;return n;function n(i){return st(i)?(r.enter("lineEnding"),r.consume(i),r.exit("lineEnding"),t=!0,n):Et(i)?Rt(r,n,t?"linePrefix":"lineSuffix")(i):e(i)}}const FH={name:"definition",tokenize:OH},IH={partial:!0,tokenize:MH};function OH(r,e,t){const n=this;let i;return a;function a(y){return r.enter("definition"),s(y)}function s(y){return w6.call(n,r,l,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function l(y){return i=Ya(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),y===58?(r.enter("definitionMarker"),r.consume(y),r.exit("definitionMarker"),u):t(y)}function u(y){return tn(y)?om(r,d)(y):d(y)}function d(y){return v6(r,h,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function h(y){return r.attempt(IH,g,g)(y)}function g(y){return Et(y)?Rt(r,b,"whitespace")(y):b(y)}function b(y){return y===null||st(y)?(r.exit("definition"),n.parser.defined.push(i),e(y)):t(y)}}function MH(r,e,t){return n;function n(l){return tn(l)?om(r,i)(l):t(l)}function i(l){return k6(r,a,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function a(l){return Et(l)?Rt(r,s,"whitespace")(l):s(l)}function s(l){return l===null||st(l)?e(l):t(l)}}const LH={name:"hardBreakEscape",tokenize:BH};function BH(r,e,t){return n;function n(a){return r.enter("hardBreakEscape"),r.consume(a),i}function i(a){return st(a)?(r.exit("hardBreakEscape"),e(a)):t(a)}}const PH={name:"headingAtx",resolve:zH,tokenize:WH};function zH(r,e){let t=r.length-2,n=3,i,a;return r[n][1].type==="whitespace"&&(n+=2),t-2>n&&r[t][1].type==="whitespace"&&(t-=2),r[t][1].type==="atxHeadingSequence"&&(n===t-1||t-4>n&&r[t-2][1].type==="whitespace")&&(t-=n+1===t?2:4),t>n&&(i={type:"atxHeadingText",start:r[n][1].start,end:r[t][1].end},a={type:"chunkText",start:r[n][1].start,end:r[t][1].end,contentType:"text"},Xi(r,n,t-n+1,[["enter",i,e],["enter",a,e],["exit",a,e],["exit",i,e]])),r}function WH(r,e,t){let n=0;return i;function i(h){return r.enter("atxHeading"),a(h)}function a(h){return r.enter("atxHeadingSequence"),s(h)}function s(h){return h===35&&n++<6?(r.consume(h),s):h===null||tn(h)?(r.exit("atxHeadingSequence"),l(h)):t(h)}function l(h){return h===35?(r.enter("atxHeadingSequence"),u(h)):h===null||st(h)?(r.exit("atxHeading"),e(h)):Et(h)?Rt(r,l,"whitespace")(h):(r.enter("atxHeadingText"),d(h))}function u(h){return h===35?(r.consume(h),u):(r.exit("atxHeadingSequence"),l(h))}function d(h){return h===null||h===35||tn(h)?(r.exit("atxHeadingText"),l(h)):(r.consume(h),d)}}const HH=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],G4=["pre","script","style","textarea"],qH={concrete:!0,name:"htmlFlow",resolveTo:GH,tokenize:$H},VH={partial:!0,tokenize:KH},XH={partial:!0,tokenize:YH};function GH(r){let e=r.length;for(;e--&&!(r[e][0]==="enter"&&r[e][1].type==="htmlFlow"););return e>1&&r[e-2][1].type==="linePrefix"&&(r[e][1].start=r[e-2][1].start,r[e+1][1].start=r[e-2][1].start,r.splice(e-2,2)),r}function $H(r,e,t){const n=this;let i,a,s,l,u;return d;function d(z){return h(z)}function h(z){return r.enter("htmlFlow"),r.enter("htmlFlowData"),r.consume(z),g}function g(z){return z===33?(r.consume(z),b):z===47?(r.consume(z),a=!0,v):z===63?(r.consume(z),i=3,n.interrupt?e:H):Vr(z)?(r.consume(z),s=String.fromCharCode(z),w):t(z)}function b(z){return z===45?(r.consume(z),i=2,y):z===91?(r.consume(z),i=5,l=0,D):Vr(z)?(r.consume(z),i=4,n.interrupt?e:H):t(z)}function y(z){return z===45?(r.consume(z),n.interrupt?e:H):t(z)}function D(z){const ge="CDATA[";return z===ge.charCodeAt(l++)?(r.consume(z),l===ge.length?n.interrupt?e:U:D):t(z)}function v(z){return Vr(z)?(r.consume(z),s=String.fromCharCode(z),w):t(z)}function w(z){if(z===null||z===47||z===62||tn(z)){const ge=z===47,ve=s.toLowerCase();return!ge&&!a&&G4.includes(ve)?(i=1,n.interrupt?e(z):U(z)):HH.includes(s.toLowerCase())?(i=6,ge?(r.consume(z),k):n.interrupt?e(z):U(z)):(i=7,n.interrupt&&!n.parser.lazy[n.now().line]?t(z):a?_(z):A(z))}return z===45||Rr(z)?(r.consume(z),s+=String.fromCharCode(z),w):t(z)}function k(z){return z===62?(r.consume(z),n.interrupt?e:U):t(z)}function _(z){return Et(z)?(r.consume(z),_):F(z)}function A(z){return z===47?(r.consume(z),F):z===58||z===95||Vr(z)?(r.consume(z),N):Et(z)?(r.consume(z),A):F(z)}function N(z){return z===45||z===46||z===58||z===95||Rr(z)?(r.consume(z),N):E(z)}function E(z){return z===61?(r.consume(z),T):Et(z)?(r.consume(z),E):A(z)}function T(z){return z===null||z===60||z===61||z===62||z===96?t(z):z===34||z===39?(r.consume(z),u=z,R):Et(z)?(r.consume(z),T):M(z)}function R(z){return z===u?(r.consume(z),u=null,I):z===null||st(z)?t(z):(r.consume(z),R)}function M(z){return z===null||z===34||z===39||z===47||z===60||z===61||z===62||z===96||tn(z)?E(z):(r.consume(z),M)}function I(z){return z===47||z===62||Et(z)?A(z):t(z)}function F(z){return z===62?(r.consume(z),G):t(z)}function G(z){return z===null||st(z)?U(z):Et(z)?(r.consume(z),G):t(z)}function U(z){return z===45&&i===2?(r.consume(z),P):z===60&&i===1?(r.consume(z),B):z===62&&i===4?(r.consume(z),J):z===63&&i===3?(r.consume(z),H):z===93&&i===5?(r.consume(z),K):st(z)&&(i===6||i===7)?(r.exit("htmlFlowData"),r.check(VH,ie,W)(z)):z===null||st(z)?(r.exit("htmlFlowData"),W(z)):(r.consume(z),U)}function W(z){return r.check(XH,j,ie)(z)}function j(z){return r.enter("lineEnding"),r.consume(z),r.exit("lineEnding"),X}function X(z){return z===null||st(z)?W(z):(r.enter("htmlFlowData"),U(z))}function P(z){return z===45?(r.consume(z),H):U(z)}function B(z){return z===47?(r.consume(z),s="",ee):U(z)}function ee(z){if(z===62){const ge=s.toLowerCase();return G4.includes(ge)?(r.consume(z),J):U(z)}return Vr(z)&&s.length<8?(r.consume(z),s+=String.fromCharCode(z),ee):U(z)}function K(z){return z===93?(r.consume(z),H):U(z)}function H(z){return z===62?(r.consume(z),J):z===45&&i===2?(r.consume(z),H):U(z)}function J(z){return z===null||st(z)?(r.exit("htmlFlowData"),ie(z)):(r.consume(z),J)}function ie(z){return r.exit("htmlFlow"),e(z)}}function YH(r,e,t){const n=this;return i;function i(s){return st(s)?(r.enter("lineEnding"),r.consume(s),r.exit("lineEnding"),a):t(s)}function a(s){return n.parser.lazy[n.now().line]?t(s):e(s)}}function KH(r,e,t){return n;function n(i){return r.enter("lineEnding"),r.consume(i),r.exit("lineEnding"),r.attempt(gy,e,t)}}const QH={name:"htmlText",tokenize:ZH};function ZH(r,e,t){const n=this;let i,a,s;return l;function l(H){return r.enter("htmlText"),r.enter("htmlTextData"),r.consume(H),u}function u(H){return H===33?(r.consume(H),d):H===47?(r.consume(H),E):H===63?(r.consume(H),A):Vr(H)?(r.consume(H),M):t(H)}function d(H){return H===45?(r.consume(H),h):H===91?(r.consume(H),a=0,D):Vr(H)?(r.consume(H),_):t(H)}function h(H){return H===45?(r.consume(H),y):t(H)}function g(H){return H===null?t(H):H===45?(r.consume(H),b):st(H)?(s=g,B(H)):(r.consume(H),g)}function b(H){return H===45?(r.consume(H),y):g(H)}function y(H){return H===62?P(H):H===45?b(H):g(H)}function D(H){const J="CDATA[";return H===J.charCodeAt(a++)?(r.consume(H),a===J.length?v:D):t(H)}function v(H){return H===null?t(H):H===93?(r.consume(H),w):st(H)?(s=v,B(H)):(r.consume(H),v)}function w(H){return H===93?(r.consume(H),k):v(H)}function k(H){return H===62?P(H):H===93?(r.consume(H),k):v(H)}function _(H){return H===null||H===62?P(H):st(H)?(s=_,B(H)):(r.consume(H),_)}function A(H){return H===null?t(H):H===63?(r.consume(H),N):st(H)?(s=A,B(H)):(r.consume(H),A)}function N(H){return H===62?P(H):A(H)}function E(H){return Vr(H)?(r.consume(H),T):t(H)}function T(H){return H===45||Rr(H)?(r.consume(H),T):R(H)}function R(H){return st(H)?(s=R,B(H)):Et(H)?(r.consume(H),R):P(H)}function M(H){return H===45||Rr(H)?(r.consume(H),M):H===47||H===62||tn(H)?I(H):t(H)}function I(H){return H===47?(r.consume(H),P):H===58||H===95||Vr(H)?(r.consume(H),F):st(H)?(s=I,B(H)):Et(H)?(r.consume(H),I):P(H)}function F(H){return H===45||H===46||H===58||H===95||Rr(H)?(r.consume(H),F):G(H)}function G(H){return H===61?(r.consume(H),U):st(H)?(s=G,B(H)):Et(H)?(r.consume(H),G):I(H)}function U(H){return H===null||H===60||H===61||H===62||H===96?t(H):H===34||H===39?(r.consume(H),i=H,W):st(H)?(s=U,B(H)):Et(H)?(r.consume(H),U):(r.consume(H),j)}function W(H){return H===i?(r.consume(H),i=void 0,X):H===null?t(H):st(H)?(s=W,B(H)):(r.consume(H),W)}function j(H){return H===null||H===34||H===39||H===60||H===61||H===96?t(H):H===47||H===62||tn(H)?I(H):(r.consume(H),j)}function X(H){return H===47||H===62||tn(H)?I(H):t(H)}function P(H){return H===62?(r.consume(H),r.exit("htmlTextData"),r.exit("htmlText"),e):t(H)}function B(H){return r.exit("htmlTextData"),r.enter("lineEnding"),r.consume(H),r.exit("lineEnding"),ee}function ee(H){return Et(H)?Rt(r,K,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):K(H)}function K(H){return r.enter("htmlTextData"),s(H)}}const TS={name:"labelEnd",resolveAll:nq,resolveTo:rq,tokenize:iq},JH={tokenize:aq},eq={tokenize:sq},tq={tokenize:oq};function nq(r){let e=-1;const t=[];for(;++e<r.length;){const n=r[e][1];if(t.push(r[e]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const i=n.type==="labelImage"?4:2;n.type="data",e+=i}}return r.length!==t.length&&Xi(r,0,r.length,t),r}function rq(r,e){let t=r.length,n=0,i,a,s,l;for(;t--;)if(i=r[t][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;r[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(s){if(r[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=t,i.type!=="labelLink")){n=2;break}}else i.type==="labelEnd"&&(s=t);const u={type:r[a][1].type==="labelLink"?"link":"image",start:{...r[a][1].start},end:{...r[r.length-1][1].end}},d={type:"label",start:{...r[a][1].start},end:{...r[s][1].end}},h={type:"labelText",start:{...r[a+n+2][1].end},end:{...r[s-2][1].start}};return l=[["enter",u,e],["enter",d,e]],l=xa(l,r.slice(a+1,a+n+3)),l=xa(l,[["enter",h,e]]),l=xa(l,Tv(e.parser.constructs.insideSpan.null,r.slice(a+n+4,s-3),e)),l=xa(l,[["exit",h,e],r[s-2],r[s-1],["exit",d,e]]),l=xa(l,r.slice(s+1)),l=xa(l,[["exit",u,e]]),Xi(r,a,r.length,l),r}function iq(r,e,t){const n=this;let i=n.events.length,a,s;for(;i--;)if((n.events[i][1].type==="labelImage"||n.events[i][1].type==="labelLink")&&!n.events[i][1]._balanced){a=n.events[i][1];break}return l;function l(b){return a?a._inactive?g(b):(s=n.parser.defined.includes(Ya(n.sliceSerialize({start:a.end,end:n.now()}))),r.enter("labelEnd"),r.enter("labelMarker"),r.consume(b),r.exit("labelMarker"),r.exit("labelEnd"),u):t(b)}function u(b){return b===40?r.attempt(JH,h,s?h:g)(b):b===91?r.attempt(eq,h,s?d:g)(b):s?h(b):g(b)}function d(b){return r.attempt(tq,h,g)(b)}function h(b){return e(b)}function g(b){return a._balanced=!0,t(b)}}function aq(r,e,t){return n;function n(g){return r.enter("resource"),r.enter("resourceMarker"),r.consume(g),r.exit("resourceMarker"),i}function i(g){return tn(g)?om(r,a)(g):a(g)}function a(g){return g===41?h(g):v6(r,s,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function s(g){return tn(g)?om(r,u)(g):h(g)}function l(g){return t(g)}function u(g){return g===34||g===39||g===40?k6(r,d,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):h(g)}function d(g){return tn(g)?om(r,h)(g):h(g)}function h(g){return g===41?(r.enter("resourceMarker"),r.consume(g),r.exit("resourceMarker"),r.exit("resource"),e):t(g)}}function sq(r,e,t){const n=this;return i;function i(l){return w6.call(n,r,a,s,"reference","referenceMarker","referenceString")(l)}function a(l){return n.parser.defined.includes(Ya(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?e(l):t(l)}function s(l){return t(l)}}function oq(r,e,t){return n;function n(a){return r.enter("reference"),r.enter("referenceMarker"),r.consume(a),r.exit("referenceMarker"),i}function i(a){return a===93?(r.enter("referenceMarker"),r.consume(a),r.exit("referenceMarker"),r.exit("reference"),e):t(a)}}const lq={name:"labelStartImage",resolveAll:TS.resolveAll,tokenize:cq};function cq(r,e,t){const n=this;return i;function i(l){return r.enter("labelImage"),r.enter("labelImageMarker"),r.consume(l),r.exit("labelImageMarker"),a}function a(l){return l===91?(r.enter("labelMarker"),r.consume(l),r.exit("labelMarker"),r.exit("labelImage"),s):t(l)}function s(l){return l===94&&"_hiddenFootnoteSupport"in n.parser.constructs?t(l):e(l)}}const uq={name:"labelStartLink",resolveAll:TS.resolveAll,tokenize:dq};function dq(r,e,t){const n=this;return i;function i(s){return r.enter("labelLink"),r.enter("labelMarker"),r.consume(s),r.exit("labelMarker"),r.exit("labelLink"),a}function a(s){return s===94&&"_hiddenFootnoteSupport"in n.parser.constructs?t(s):e(s)}}const uD={name:"lineEnding",tokenize:hq};function hq(r,e){return t;function t(n){return r.enter("lineEnding"),r.consume(n),r.exit("lineEnding"),Rt(r,e,"linePrefix")}}const J0={name:"thematicBreak",tokenize:fq};function fq(r,e,t){let n=0,i;return a;function a(d){return r.enter("thematicBreak"),s(d)}function s(d){return i=d,l(d)}function l(d){return d===i?(r.enter("thematicBreakSequence"),u(d)):n>=3&&(d===null||st(d))?(r.exit("thematicBreak"),e(d)):t(d)}function u(d){return d===i?(r.consume(d),n++,u):(r.exit("thematicBreakSequence"),Et(d)?Rt(r,l,"whitespace")(d):l(d))}}const ri={continuation:{tokenize:bq},exit:xq,name:"list",tokenize:mq},pq={partial:!0,tokenize:vq},gq={partial:!0,tokenize:yq};function mq(r,e,t){const n=this,i=n.events[n.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,s=0;return l;function l(y){const D=n.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(D==="listUnordered"?!n.containerState.marker||y===n.containerState.marker:nA(y)){if(n.containerState.type||(n.containerState.type=D,r.enter(D,{_container:!0})),D==="listUnordered")return r.enter("listItemPrefix"),y===42||y===45?r.check(J0,t,d)(y):d(y);if(!n.interrupt||y===49)return r.enter("listItemPrefix"),r.enter("listItemValue"),u(y)}return t(y)}function u(y){return nA(y)&&++s<10?(r.consume(y),u):(!n.interrupt||s<2)&&(n.containerState.marker?y===n.containerState.marker:y===41||y===46)?(r.exit("listItemValue"),d(y)):t(y)}function d(y){return r.enter("listItemMarker"),r.consume(y),r.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||y,r.check(gy,n.interrupt?t:h,r.attempt(pq,b,g))}function h(y){return n.containerState.initialBlankLine=!0,a++,b(y)}function g(y){return Et(y)?(r.enter("listItemPrefixWhitespace"),r.consume(y),r.exit("listItemPrefixWhitespace"),b):t(y)}function b(y){return n.containerState.size=a+n.sliceSerialize(r.exit("listItemPrefix"),!0).length,e(y)}}function bq(r,e,t){const n=this;return n.containerState._closeFlow=void 0,r.check(gy,i,a);function i(l){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,Rt(r,e,"listItemIndent",n.containerState.size+1)(l)}function a(l){return n.containerState.furtherBlankLines||!Et(l)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,s(l)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,r.attempt(gq,e,s)(l))}function s(l){return n.containerState._closeFlow=!0,n.interrupt=void 0,Rt(r,r.attempt(ri,e,t),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function yq(r,e,t){const n=this;return Rt(r,i,"listItemIndent",n.containerState.size+1);function i(a){const s=n.events[n.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===n.containerState.size?e(a):t(a)}}function xq(r){r.exit(this.containerState.type)}function vq(r,e,t){const n=this;return Rt(r,i,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const s=n.events[n.events.length-1];return!Et(a)&&s&&s[1].type==="listItemPrefixWhitespace"?e(a):t(a)}}const $4={name:"setextUnderline",resolveTo:wq,tokenize:kq};function wq(r,e){let t=r.length,n,i,a;for(;t--;)if(r[t][0]==="enter"){if(r[t][1].type==="content"){n=t;break}r[t][1].type==="paragraph"&&(i=t)}else r[t][1].type==="content"&&r.splice(t,1),!a&&r[t][1].type==="definition"&&(a=t);const s={type:"setextHeading",start:{...r[n][1].start},end:{...r[r.length-1][1].end}};return r[i][1].type="setextHeadingText",a?(r.splice(i,0,["enter",s,e]),r.splice(a+1,0,["exit",r[n][1],e]),r[n][1].end={...r[a][1].end}):r[n][1]=s,r.push(["exit",s,e]),r}function kq(r,e,t){const n=this;let i;return a;function a(d){let h=n.events.length,g;for(;h--;)if(n.events[h][1].type!=="lineEnding"&&n.events[h][1].type!=="linePrefix"&&n.events[h][1].type!=="content"){g=n.events[h][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||g)?(r.enter("setextHeadingLine"),i=d,s(d)):t(d)}function s(d){return r.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===i?(r.consume(d),l):(r.exit("setextHeadingLineSequence"),Et(d)?Rt(r,u,"lineSuffix")(d):u(d))}function u(d){return d===null||st(d)?(r.exit("setextHeadingLine"),e(d)):t(d)}}const Dq={tokenize:_q};function _q(r){const e=this,t=r.attempt(gy,n,r.attempt(this.parser.constructs.flowInitial,i,Rt(r,r.attempt(this.parser.constructs.flow,i,r.attempt(CH,i)),"linePrefix")));return t;function n(a){if(a===null){r.consume(a);return}return r.enter("lineEndingBlank"),r.consume(a),r.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function i(a){if(a===null){r.consume(a);return}return r.enter("lineEnding"),r.consume(a),r.exit("lineEnding"),e.currentConstruct=void 0,t}}const Aq={resolveAll:_6()},Sq=D6("string"),Eq=D6("text");function D6(r){return{resolveAll:_6(r==="text"?Tq:void 0),tokenize:e};function e(t){const n=this,i=this.parser.constructs[r],a=t.attempt(i,s,l);return s;function s(h){return d(h)?a(h):l(h)}function l(h){if(h===null){t.consume(h);return}return t.enter("data"),t.consume(h),u}function u(h){return d(h)?(t.exit("data"),a(h)):(t.consume(h),u)}function d(h){if(h===null)return!0;const g=i[h];let b=-1;if(g)for(;++b<g.length;){const y=g[b];if(!y.previous||y.previous.call(n,n.previous))return!0}return!1}}}function _6(r){return e;function e(t,n){let i=-1,a;for(;++i<=t.length;)a===void 0?t[i]&&t[i][1].type==="data"&&(a=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==a+2&&(t[a][1].end=t[i-1][1].end,t.splice(a+2,i-a-2),i=a+2),a=void 0);return r?r(t,n):t}}function Tq(r,e){let t=0;for(;++t<=r.length;)if((t===r.length||r[t][1].type==="lineEnding")&&r[t-1][1].type==="data"){const n=r[t-1][1],i=e.sliceStream(n);let a=i.length,s=-1,l=0,u;for(;a--;){const d=i[a];if(typeof d=="string"){for(s=d.length;d.charCodeAt(s-1)===32;)l++,s--;if(s)break;s=-1}else if(d===-2)u=!0,l++;else if(d!==-1){a++;break}}if(e._contentTypeTextTrailing&&t===r.length&&(l=0),l){const d={type:t===r.length||u||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?s:n.start._bufferIndex+s,_index:n.start._index+a,line:n.end.line,column:n.end.column-l,offset:n.end.offset-l},end:{...n.end}};n.end={...d.start},n.start.offset===n.end.offset?Object.assign(n,d):(r.splice(t,0,["enter",d,e],["exit",d,e]),t+=2)}t++}return r}const Cq={42:ri,43:ri,45:ri,48:ri,49:ri,50:ri,51:ri,52:ri,53:ri,54:ri,55:ri,56:ri,57:ri,62:m6},Nq={91:FH},Uq={[-2]:cD,[-1]:cD,32:cD},Rq={35:PH,42:J0,45:[$4,J0],60:qH,61:$4,95:J0,96:X4,126:X4},jq={38:y6,92:b6},Fq={[-5]:uD,[-4]:uD,[-3]:uD,33:lq,38:y6,42:rA,60:[uH,QH],91:uq,92:[LH,b6],93:TS,95:rA,96:DH},Iq={null:[rA,Aq]},Oq={null:[42,95]},Mq={null:[]},Lq=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Oq,contentInitial:Nq,disable:Mq,document:Cq,flow:Rq,flowInitial:Uq,insideSpan:Iq,string:jq,text:Fq},Symbol.toStringTag,{value:"Module"}));function Bq(r,e,t){let n={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const i={},a=[];let s=[],l=[];const u={attempt:R(E),check:R(T),consume:_,enter:A,exit:N,interrupt:R(T,{interrupt:!0})},d={code:null,containerState:{},defineSkip:v,events:[],now:D,parser:r,previous:null,sliceSerialize:b,sliceStream:y,write:g};let h=e.tokenize.call(d,u);return e.resolveAll&&a.push(e),d;function g(G){return s=xa(s,G),w(),s[s.length-1]!==null?[]:(M(e,0),d.events=Tv(a,d.events,d),d.events)}function b(G,U){return zq(y(G),U)}function y(G){return Pq(s,G)}function D(){const{_bufferIndex:G,_index:U,line:W,column:j,offset:X}=n;return{_bufferIndex:G,_index:U,line:W,column:j,offset:X}}function v(G){i[G.line]=G.column,F()}function w(){let G;for(;n._index<s.length;){const U=s[n._index];if(typeof U=="string")for(G=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===G&&n._bufferIndex<U.length;)k(U.charCodeAt(n._bufferIndex));else k(U)}}function k(G){h=h(G)}function _(G){st(G)?(n.line++,n.column=1,n.offset+=G===-3?2:1,F()):G!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===s[n._index].length&&(n._bufferIndex=-1,n._index++)),d.previous=G}function A(G,U){const W=U||{};return W.type=G,W.start=D(),d.events.push(["enter",W,d]),l.push(W),W}function N(G){const U=l.pop();return U.end=D(),d.events.push(["exit",U,d]),U}function E(G,U){M(G,U.from)}function T(G,U){U.restore()}function R(G,U){return W;function W(j,X,P){let B,ee,K,H;return Array.isArray(j)?ie(j):"tokenize"in j?ie([j]):J(j);function J(je){return Ie;function Ie(Pe){const fe=Pe!==null&&je[Pe],Ue=Pe!==null&&je.null,be=[...Array.isArray(fe)?fe:fe?[fe]:[],...Array.isArray(Ue)?Ue:Ue?[Ue]:[]];return ie(be)(Pe)}}function ie(je){return B=je,ee=0,je.length===0?P:z(je[ee])}function z(je){return Ie;function Ie(Pe){return H=I(),K=je,je.partial||(d.currentConstruct=je),je.name&&d.parser.constructs.disable.null.includes(je.name)?ve():je.tokenize.call(U?Object.assign(Object.create(d),U):d,u,ge,ve)(Pe)}}function ge(je){return G(K,H),X}function ve(je){return H.restore(),++ee<B.length?z(B[ee]):P}}}function M(G,U){G.resolveAll&&!a.includes(G)&&a.push(G),G.resolve&&Xi(d.events,U,d.events.length-U,G.resolve(d.events.slice(U),d)),G.resolveTo&&(d.events=G.resolveTo(d.events,d))}function I(){const G=D(),U=d.previous,W=d.currentConstruct,j=d.events.length,X=Array.from(l);return{from:j,restore:P};function P(){n=G,d.previous=U,d.currentConstruct=W,d.events.length=j,l=X,F()}}function F(){n.line in i&&n.column<2&&(n.column=i[n.line],n.offset+=i[n.line]-1)}}function Pq(r,e){const t=e.start._index,n=e.start._bufferIndex,i=e.end._index,a=e.end._bufferIndex;let s;if(t===i)s=[r[t].slice(n,a)];else{if(s=r.slice(t,i),n>-1){const l=s[0];typeof l=="string"?s[0]=l.slice(n):s.shift()}a>0&&s.push(r[i].slice(0,a))}return s}function zq(r,e){let t=-1;const n=[];let i;for(;++t<r.length;){const a=r[t];let s;if(typeof a=="string")s=a;else switch(a){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=e?" ":"	";break}case-1:{if(!e&&i)continue;s=" ";break}default:s=String.fromCharCode(a)}i=a===-2,n.push(s)}return n.join("")}function Wq(r){const n={constructs:p6([Lq,...(r||{}).extensions||[]]),content:i(rH),defined:[],document:i(aH),flow:i(Dq),lazy:{},string:i(Sq),text:i(Eq)};return n;function i(a){return s;function s(l){return Bq(n,a,l)}}}function Hq(r){for(;!x6(r););return r}const Y4=/[\0\t\n\r]/g;function qq(){let r=1,e="",t=!0,n;return i;function i(a,s,l){const u=[];let d,h,g,b,y;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(s||void 0).decode(a)),g=0,e="",t&&(a.charCodeAt(0)===65279&&g++,t=void 0);g<a.length;){if(Y4.lastIndex=g,d=Y4.exec(a),b=d&&d.index!==void 0?d.index:a.length,y=a.charCodeAt(b),!d){e=a.slice(g);break}if(y===10&&g===b&&n)u.push(-3),n=void 0;else switch(n&&(u.push(-5),n=void 0),g<b&&(u.push(a.slice(g,b)),r+=b-g),y){case 0:{u.push(65533),r++;break}case 9:{for(h=Math.ceil(r/4)*4,u.push(-2);r++<h;)u.push(-1);break}case 10:{u.push(-4),r=1;break}default:n=!0,r=1}g=b+1}return l&&(n&&u.push(-5),e&&u.push(e),u.push(null)),u}}const Vq=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Xq(r){return r.replace(Vq,Gq)}function Gq(r,e,t){if(e)return e;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),a=i===120||i===88;return g6(t.slice(a?2:1),a?16:10)}return ES(t)||r}const A6={}.hasOwnProperty;function $q(r,e,t){return typeof e!="string"&&(t=e,e=void 0),Yq(t)(Hq(Wq(t).document().write(qq()(r,e,!0))))}function Yq(r){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(ue),autolinkProtocol:I,autolinkEmail:I,atxHeading:a(he),blockQuote:a(Ue),characterEscape:I,characterReference:I,codeFenced:a(be),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:a(be,s),codeText:a(Fe,s),codeTextData:I,data:I,codeFlowValue:I,definition:a($e),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:a(O),hardBreakEscape:a(oe),hardBreakTrailing:a(oe),htmlFlow:a(re,s),htmlFlowData:I,htmlText:a(re,s),htmlTextData:I,image:a(ne),label:s,link:a(ue),listItem:a(Ne),listItemValue:b,listOrdered:a(Ce,g),listUnordered:a(Ce),paragraph:a(pe),reference:z,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:a(he),strong:a(se),thematicBreak:a(xe)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:fe,autolinkProtocol:Pe,blockQuote:u(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:ve,characterReferenceMarkerNumeric:ve,characterReferenceValue:je,characterReference:Ie,codeFenced:u(w),codeFencedFence:v,codeFencedFenceInfo:y,codeFencedFenceMeta:D,codeFlowValue:F,codeIndented:u(k),codeText:u(X),codeTextData:F,data:F,definition:u(),definitionDestinationString:N,definitionLabelString:_,definitionTitleString:A,emphasis:u(),hardBreakEscape:u(U),hardBreakTrailing:u(U),htmlFlow:u(W),htmlFlowData:F,htmlText:u(j),htmlTextData:F,image:u(B),label:K,labelText:ee,lineEnding:G,link:u(P),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:ge,resourceDestinationString:H,resourceTitleString:J,resource:ie,setextHeading:u(M),setextHeadingLineSequence:R,setextHeadingText:T,strong:u(),thematicBreak:u()}};S6(e,(r||{}).mdastExtensions||[]);const t={};return n;function n(ae){let ke={type:"root",children:[]};const Me={stack:[ke],tokenStack:[],config:e,enter:l,exit:d,buffer:s,resume:h,data:t},ze=[];let Xe=-1;for(;++Xe<ae.length;)if(ae[Xe][1].type==="listOrdered"||ae[Xe][1].type==="listUnordered")if(ae[Xe][0]==="enter")ze.push(Xe);else{const at=ze.pop();Xe=i(ae,at,Xe)}for(Xe=-1;++Xe<ae.length;){const at=e[ae[Xe][0]];A6.call(at,ae[Xe][1].type)&&at[ae[Xe][1].type].call(Object.assign({sliceSerialize:ae[Xe][2].sliceSerialize},Me),ae[Xe][1])}if(Me.tokenStack.length>0){const at=Me.tokenStack[Me.tokenStack.length-1];(at[1]||K4).call(Me,void 0,at[0])}for(ke.position={start:Fl(ae.length>0?ae[0][1].start:{line:1,column:1,offset:0}),end:Fl(ae.length>0?ae[ae.length-2][1].end:{line:1,column:1,offset:0})},Xe=-1;++Xe<e.transforms.length;)ke=e.transforms[Xe](ke)||ke;return ke}function i(ae,ke,Me){let ze=ke-1,Xe=-1,at=!1,ye,Re,qe,Ze;for(;++ze<=Me;){const Ke=ae[ze];switch(Ke[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ke[0]==="enter"?Xe++:Xe--,Ze=void 0;break}case"lineEndingBlank":{Ke[0]==="enter"&&(ye&&!Ze&&!Xe&&!qe&&(qe=ze),Ze=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ze=void 0}if(!Xe&&Ke[0]==="enter"&&Ke[1].type==="listItemPrefix"||Xe===-1&&Ke[0]==="exit"&&(Ke[1].type==="listUnordered"||Ke[1].type==="listOrdered")){if(ye){let ft=ze;for(Re=void 0;ft--;){const xt=ae[ft];if(xt[1].type==="lineEnding"||xt[1].type==="lineEndingBlank"){if(xt[0]==="exit")continue;Re&&(ae[Re][1].type="lineEndingBlank",at=!0),xt[1].type="lineEnding",Re=ft}else if(!(xt[1].type==="linePrefix"||xt[1].type==="blockQuotePrefix"||xt[1].type==="blockQuotePrefixWhitespace"||xt[1].type==="blockQuoteMarker"||xt[1].type==="listItemIndent"))break}qe&&(!Re||qe<Re)&&(ye._spread=!0),ye.end=Object.assign({},Re?ae[Re][1].start:Ke[1].end),ae.splice(Re||ze,0,["exit",ye,Ke[2]]),ze++,Me++}if(Ke[1].type==="listItemPrefix"){const ft={type:"listItem",_spread:!1,start:Object.assign({},Ke[1].start),end:void 0};ye=ft,ae.splice(ze,0,["enter",ft,Ke[2]]),ze++,Me++,qe=void 0,Ze=!0}}}return ae[ke][1]._spread=at,Me}function a(ae,ke){return Me;function Me(ze){l.call(this,ae(ze),ze),ke&&ke.call(this,ze)}}function s(){this.stack.push({type:"fragment",children:[]})}function l(ae,ke,Me){this.stack[this.stack.length-1].children.push(ae),this.stack.push(ae),this.tokenStack.push([ke,Me||void 0]),ae.position={start:Fl(ke.start),end:void 0}}function u(ae){return ke;function ke(Me){ae&&ae.call(this,Me),d.call(this,Me)}}function d(ae,ke){const Me=this.stack.pop(),ze=this.tokenStack.pop();if(ze)ze[0].type!==ae.type&&(ke?ke.call(this,ae,ze[0]):(ze[1]||K4).call(this,ae,ze[0]));else throw new Error("Cannot close `"+ae.type+"` ("+sm({start:ae.start,end:ae.end})+"): it’s not open");Me.position.end=Fl(ae.end)}function h(){return SS(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function b(ae){if(this.data.expectingFirstListItemValue){const ke=this.stack[this.stack.length-2];ke.start=Number.parseInt(this.sliceSerialize(ae),10),this.data.expectingFirstListItemValue=void 0}}function y(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.lang=ae}function D(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.meta=ae}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ae.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ae.replace(/(\r?\n|\r)$/g,"")}function _(ae){const ke=this.resume(),Me=this.stack[this.stack.length-1];Me.label=ke,Me.identifier=Ya(this.sliceSerialize(ae)).toLowerCase()}function A(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.title=ae}function N(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.url=ae}function E(ae){const ke=this.stack[this.stack.length-1];if(!ke.depth){const Me=this.sliceSerialize(ae).length;ke.depth=Me}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function R(ae){const ke=this.stack[this.stack.length-1];ke.depth=this.sliceSerialize(ae).codePointAt(0)===61?1:2}function M(){this.data.setextHeadingSlurpLineEnding=void 0}function I(ae){const Me=this.stack[this.stack.length-1].children;let ze=Me[Me.length-1];(!ze||ze.type!=="text")&&(ze=de(),ze.position={start:Fl(ae.start),end:void 0},Me.push(ze)),this.stack.push(ze)}function F(ae){const ke=this.stack.pop();ke.value+=this.sliceSerialize(ae),ke.position.end=Fl(ae.end)}function G(ae){const ke=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Me=ke.children[ke.children.length-1];Me.position.end=Fl(ae.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ke.type)&&(I.call(this,ae),F.call(this,ae))}function U(){this.data.atHardBreak=!0}function W(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ae}function j(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ae}function X(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ae}function P(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const ke=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=ke,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function B(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const ke=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=ke,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function ee(ae){const ke=this.sliceSerialize(ae),Me=this.stack[this.stack.length-2];Me.label=Xq(ke),Me.identifier=Ya(ke).toLowerCase()}function K(){const ae=this.stack[this.stack.length-1],ke=this.resume(),Me=this.stack[this.stack.length-1];if(this.data.inReference=!0,Me.type==="link"){const ze=ae.children;Me.children=ze}else Me.alt=ke}function H(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.url=ae}function J(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.title=ae}function ie(){this.data.inReference=void 0}function z(){this.data.referenceType="collapsed"}function ge(ae){const ke=this.resume(),Me=this.stack[this.stack.length-1];Me.label=ke,Me.identifier=Ya(this.sliceSerialize(ae)).toLowerCase(),this.data.referenceType="full"}function ve(ae){this.data.characterReferenceType=ae.type}function je(ae){const ke=this.sliceSerialize(ae),Me=this.data.characterReferenceType;let ze;Me?(ze=g6(ke,Me==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ze=ES(ke);const Xe=this.stack[this.stack.length-1];Xe.value+=ze}function Ie(ae){const ke=this.stack.pop();ke.position.end=Fl(ae.end)}function Pe(ae){F.call(this,ae);const ke=this.stack[this.stack.length-1];ke.url=this.sliceSerialize(ae)}function fe(ae){F.call(this,ae);const ke=this.stack[this.stack.length-1];ke.url="mailto:"+this.sliceSerialize(ae)}function Ue(){return{type:"blockquote",children:[]}}function be(){return{type:"code",lang:null,meta:null,value:""}}function Fe(){return{type:"inlineCode",value:""}}function $e(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function O(){return{type:"emphasis",children:[]}}function he(){return{type:"heading",depth:0,children:[]}}function oe(){return{type:"break"}}function re(){return{type:"html",value:""}}function ne(){return{type:"image",title:null,url:"",alt:null}}function ue(){return{type:"link",title:null,url:"",children:[]}}function Ce(ae){return{type:"list",ordered:ae.type==="listOrdered",start:null,spread:ae._spread,children:[]}}function Ne(ae){return{type:"listItem",spread:ae._spread,checked:null,children:[]}}function pe(){return{type:"paragraph",children:[]}}function se(){return{type:"strong",children:[]}}function de(){return{type:"text",value:""}}function xe(){return{type:"thematicBreak"}}}function Fl(r){return{line:r.line,column:r.column,offset:r.offset}}function S6(r,e){let t=-1;for(;++t<e.length;){const n=e[t];Array.isArray(n)?S6(r,n):Kq(r,n)}}function Kq(r,e){let t;for(t in e)if(A6.call(e,t))switch(t){case"canContainEols":{const n=e[t];n&&r[t].push(...n);break}case"transforms":{const n=e[t];n&&r[t].push(...n);break}case"enter":case"exit":{const n=e[t];n&&Object.assign(r[t],n);break}}}function K4(r,e){throw r?new Error("Cannot close `"+r.type+"` ("+sm({start:r.start,end:r.end})+"): a different token (`"+e.type+"`, "+sm({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+sm({start:e.start,end:e.end})+") is still open")}function Qq(r){const e=this;e.parser=t;function t(n){return $q(n,{...e.data("settings"),...r,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function Zq(r,e){const t={type:"element",tagName:"blockquote",properties:{},children:r.wrap(r.all(e),!0)};return r.patch(e,t),r.applyData(e,t)}function Jq(r,e){const t={type:"element",tagName:"br",properties:{},children:[]};return r.patch(e,t),[r.applyData(e,t),{type:"text",value:`
`}]}function eV(r,e){const t=e.value?e.value+`
`:"",n={};e.lang&&(n.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:n,children:[{type:"text",value:t}]};return e.meta&&(i.data={meta:e.meta}),r.patch(e,i),i=r.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},r.patch(e,i),i}function tV(r,e){const t={type:"element",tagName:"del",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}function nV(r,e){const t={type:"element",tagName:"em",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}function rV(r,e){const t=typeof r.options.clobberPrefix=="string"?r.options.clobberPrefix:"user-content-",n=String(e.identifier).toUpperCase(),i=Ap(n.toLowerCase()),a=r.footnoteOrder.indexOf(n);let s,l=r.footnoteCounts.get(n);l===void 0?(l=0,r.footnoteOrder.push(n),s=r.footnoteOrder.length):s=a+1,l+=1,r.footnoteCounts.set(n,l);const u={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+i,id:t+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};r.patch(e,u);const d={type:"element",tagName:"sup",properties:{},children:[u]};return r.patch(e,d),r.applyData(e,d)}function iV(r,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}function aV(r,e){if(r.options.allowDangerousHtml){const t={type:"raw",value:e.value};return r.patch(e,t),r.applyData(e,t)}}function E6(r,e){const t=e.referenceType;let n="]";if(t==="collapsed"?n+="[]":t==="full"&&(n+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+n}];const i=r.all(e),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const s=i[i.length-1];return s&&s.type==="text"?s.value+=n:i.push({type:"text",value:n}),i}function sV(r,e){const t=String(e.identifier).toUpperCase(),n=r.definitionById.get(t);if(!n)return E6(r,e);const i={src:Ap(n.url||""),alt:e.alt};n.title!==null&&n.title!==void 0&&(i.title=n.title);const a={type:"element",tagName:"img",properties:i,children:[]};return r.patch(e,a),r.applyData(e,a)}function oV(r,e){const t={src:Ap(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const n={type:"element",tagName:"img",properties:t,children:[]};return r.patch(e,n),r.applyData(e,n)}function lV(r,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};r.patch(e,t);const n={type:"element",tagName:"code",properties:{},children:[t]};return r.patch(e,n),r.applyData(e,n)}function cV(r,e){const t=String(e.identifier).toUpperCase(),n=r.definitionById.get(t);if(!n)return E6(r,e);const i={href:Ap(n.url||"")};n.title!==null&&n.title!==void 0&&(i.title=n.title);const a={type:"element",tagName:"a",properties:i,children:r.all(e)};return r.patch(e,a),r.applyData(e,a)}function uV(r,e){const t={href:Ap(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const n={type:"element",tagName:"a",properties:t,children:r.all(e)};return r.patch(e,n),r.applyData(e,n)}function dV(r,e,t){const n=r.all(e),i=t?hV(t):T6(e),a={},s=[];if(typeof e.checked=="boolean"){const h=n[0];let g;h&&h.type==="element"&&h.tagName==="p"?g=h:(g={type:"element",tagName:"p",properties:{},children:[]},n.unshift(g)),g.children.length>0&&g.children.unshift({type:"text",value:" "}),g.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let l=-1;for(;++l<n.length;){const h=n[l];(i||l!==0||h.type!=="element"||h.tagName!=="p")&&s.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!i?s.push(...h.children):s.push(h)}const u=n[n.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&s.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:s};return r.patch(e,d),r.applyData(e,d)}function hV(r){let e=!1;if(r.type==="list"){e=r.spread||!1;const t=r.children;let n=-1;for(;!e&&++n<t.length;)e=T6(t[n])}return e}function T6(r){const e=r.spread;return e??r.children.length>1}function fV(r,e){const t={},n=r.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++i<n.length;){const s=n[i];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:r.wrap(n,!0)};return r.patch(e,a),r.applyData(e,a)}function pV(r,e){const t={type:"element",tagName:"p",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}function gV(r,e){const t={type:"root",children:r.wrap(r.all(e))};return r.patch(e,t),r.applyData(e,t)}function mV(r,e){const t={type:"element",tagName:"strong",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}function bV(r,e){const t=r.all(e),n=t.shift(),i=[];if(n){const s={type:"element",tagName:"thead",properties:{},children:r.wrap([n],!0)};r.patch(e.children[0],s),i.push(s)}if(t.length>0){const s={type:"element",tagName:"tbody",properties:{},children:r.wrap(t,!0)},l=kS(e.children[1]),u=o6(e.children[e.children.length-1]);l&&u&&(s.position={start:l,end:u}),i.push(s)}const a={type:"element",tagName:"table",properties:{},children:r.wrap(i,!0)};return r.patch(e,a),r.applyData(e,a)}function yV(r,e,t){const n=t?t.children:void 0,a=(n?n.indexOf(e):1)===0?"th":"td",s=t&&t.type==="table"?t.align:void 0,l=s?s.length:e.children.length;let u=-1;const d=[];for(;++u<l;){const g=e.children[u],b={},y=s?s[u]:void 0;y&&(b.align=y);let D={type:"element",tagName:a,properties:b,children:[]};g&&(D.children=r.all(g),r.patch(g,D),D=r.applyData(g,D)),d.push(D)}const h={type:"element",tagName:"tr",properties:{},children:r.wrap(d,!0)};return r.patch(e,h),r.applyData(e,h)}function xV(r,e){const t={type:"element",tagName:"td",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}const Q4=9,Z4=32;function vV(r){const e=String(r),t=/\r?\n|\r/g;let n=t.exec(e),i=0;const a=[];for(;n;)a.push(J4(e.slice(i,n.index),i>0,!0),n[0]),i=n.index+n[0].length,n=t.exec(e);return a.push(J4(e.slice(i),i>0,!1)),a.join("")}function J4(r,e,t){let n=0,i=r.length;if(e){let a=r.codePointAt(n);for(;a===Q4||a===Z4;)n++,a=r.codePointAt(n)}if(t){let a=r.codePointAt(i-1);for(;a===Q4||a===Z4;)i--,a=r.codePointAt(i-1)}return i>n?r.slice(n,i):""}function wV(r,e){const t={type:"text",value:vV(String(e.value))};return r.patch(e,t),r.applyData(e,t)}function kV(r,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return r.patch(e,t),r.applyData(e,t)}const DV={blockquote:Zq,break:Jq,code:eV,delete:tV,emphasis:nV,footnoteReference:rV,heading:iV,html:aV,imageReference:sV,image:oV,inlineCode:lV,linkReference:cV,link:uV,listItem:dV,list:fV,paragraph:pV,root:gV,strong:mV,table:bV,tableCell:xV,tableRow:yV,text:wV,thematicBreak:kV,toml:Kx,yaml:Kx,definition:Kx,footnoteDefinition:Kx};function Kx(){}const C6=-1,Cv=0,lm=1,v1=2,CS=3,NS=4,US=5,RS=6,N6=7,U6=8,eR=typeof self=="object"?self:globalThis,_V=(r,e)=>{const t=(i,a)=>(r.set(a,i),i),n=i=>{if(r.has(i))return r.get(i);const[a,s]=e[i];switch(a){case Cv:case C6:return t(s,i);case lm:{const l=t([],i);for(const u of s)l.push(n(u));return l}case v1:{const l=t({},i);for(const[u,d]of s)l[n(u)]=n(d);return l}case CS:return t(new Date(s),i);case NS:{const{source:l,flags:u}=s;return t(new RegExp(l,u),i)}case US:{const l=t(new Map,i);for(const[u,d]of s)l.set(n(u),n(d));return l}case RS:{const l=t(new Set,i);for(const u of s)l.add(n(u));return l}case N6:{const{name:l,message:u}=s;return t(new eR[l](u),i)}case U6:return t(BigInt(s),i);case"BigInt":return t(Object(BigInt(s)),i);case"ArrayBuffer":return t(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:l}=new Uint8Array(s);return t(new DataView(l),s)}}return t(new eR[a](s),i)};return n},tR=r=>_V(new Map,r)(0),Nh="",{toString:AV}={},{keys:SV}=Object,Bg=r=>{const e=typeof r;if(e!=="object"||!r)return[Cv,e];const t=AV.call(r).slice(8,-1);switch(t){case"Array":return[lm,Nh];case"Object":return[v1,Nh];case"Date":return[CS,Nh];case"RegExp":return[NS,Nh];case"Map":return[US,Nh];case"Set":return[RS,Nh];case"DataView":return[lm,t]}return t.includes("Array")?[lm,t]:t.includes("Error")?[N6,t]:[v1,t]},Qx=([r,e])=>r===Cv&&(e==="function"||e==="symbol"),EV=(r,e,t,n)=>{const i=(s,l)=>{const u=n.push(s)-1;return t.set(l,u),u},a=s=>{if(t.has(s))return t.get(s);let[l,u]=Bg(s);switch(l){case Cv:{let h=s;switch(u){case"bigint":l=U6,h=s.toString();break;case"function":case"symbol":if(r)throw new TypeError("unable to serialize "+u);h=null;break;case"undefined":return i([C6],s)}return i([l,h],s)}case lm:{if(u){let b=s;return u==="DataView"?b=new Uint8Array(s.buffer):u==="ArrayBuffer"&&(b=new Uint8Array(s)),i([u,[...b]],s)}const h=[],g=i([l,h],s);for(const b of s)h.push(a(b));return g}case v1:{if(u)switch(u){case"BigInt":return i([u,s.toString()],s);case"Boolean":case"Number":case"String":return i([u,s.valueOf()],s)}if(e&&"toJSON"in s)return a(s.toJSON());const h=[],g=i([l,h],s);for(const b of SV(s))(r||!Qx(Bg(s[b])))&&h.push([a(b),a(s[b])]);return g}case CS:return i([l,s.toISOString()],s);case NS:{const{source:h,flags:g}=s;return i([l,{source:h,flags:g}],s)}case US:{const h=[],g=i([l,h],s);for(const[b,y]of s)(r||!(Qx(Bg(b))||Qx(Bg(y))))&&h.push([a(b),a(y)]);return g}case RS:{const h=[],g=i([l,h],s);for(const b of s)(r||!Qx(Bg(b)))&&h.push(a(b));return g}}const{message:d}=s;return i([l,{name:u,message:d}],s)};return a},nR=(r,{json:e,lossy:t}={})=>{const n=[];return EV(!(e||t),!!e,new Map,n)(r),n},w1=typeof structuredClone=="function"?(r,e)=>e&&("json"in e||"lossy"in e)?tR(nR(r,e)):structuredClone(r):(r,e)=>tR(nR(r,e));function TV(r,e){const t=[{type:"text",value:"↩"}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function CV(r,e){return"Back to reference "+(r+1)+(e>1?"-"+e:"")}function NV(r){const e=typeof r.options.clobberPrefix=="string"?r.options.clobberPrefix:"user-content-",t=r.options.footnoteBackContent||TV,n=r.options.footnoteBackLabel||CV,i=r.options.footnoteLabel||"Footnotes",a=r.options.footnoteLabelTagName||"h2",s=r.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let u=-1;for(;++u<r.footnoteOrder.length;){const d=r.footnoteById.get(r.footnoteOrder[u]);if(!d)continue;const h=r.all(d),g=String(d.identifier).toUpperCase(),b=Ap(g.toLowerCase());let y=0;const D=[],v=r.footnoteCounts.get(g);for(;v!==void 0&&++y<=v;){D.length>0&&D.push({type:"text",value:" "});let _=typeof t=="string"?t:t(u,y);typeof _=="string"&&(_={type:"text",value:_}),D.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+b+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(u,y),className:["data-footnote-backref"]},children:Array.isArray(_)?_:[_]})}const w=h[h.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const _=w.children[w.children.length-1];_&&_.type==="text"?_.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...D)}else h.push(...D);const k={type:"element",tagName:"li",properties:{id:e+"fn-"+b},children:r.wrap(h,!0)};r.patch(d,k),l.push(k)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...w1(s),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:r.wrap(l,!0)},{type:"text",value:`
`}]}}const Nv=(function(r){if(r==null)return FV;if(typeof r=="function")return Uv(r);if(typeof r=="object")return Array.isArray(r)?UV(r):RV(r);if(typeof r=="string")return jV(r);throw new Error("Expected function, string, or object as test")});function UV(r){const e=[];let t=-1;for(;++t<r.length;)e[t]=Nv(r[t]);return Uv(n);function n(...i){let a=-1;for(;++a<e.length;)if(e[a].apply(this,i))return!0;return!1}}function RV(r){const e=r;return Uv(t);function t(n){const i=n;let a;for(a in r)if(i[a]!==e[a])return!1;return!0}}function jV(r){return Uv(e);function e(t){return t&&t.type===r}}function Uv(r){return e;function e(t,n,i){return!!(IV(t)&&r.call(this,t,typeof n=="number"?n:void 0,i||void 0))}}function FV(){return!0}function IV(r){return r!==null&&typeof r=="object"&&"type"in r}const R6=[],OV=!0,iA=!1,MV="skip";function j6(r,e,t,n){let i;typeof e=="function"&&typeof t!="function"?(n=t,t=e):i=e;const a=Nv(i),s=n?-1:1;l(r,void 0,[])();function l(u,d,h){const g=u&&typeof u=="object"?u:{};if(typeof g.type=="string"){const y=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(u.type+(y?"<"+y+">":""))+")"})}return b;function b(){let y=R6,D,v,w;if((!e||a(u,d,h[h.length-1]||void 0))&&(y=LV(t(u,h)),y[0]===iA))return y;if("children"in u&&u.children){const k=u;if(k.children&&y[0]!==MV)for(v=(n?k.children.length:-1)+s,w=h.concat(k);v>-1&&v<k.children.length;){const _=k.children[v];if(D=l(_,v,w)(),D[0]===iA)return D;v=typeof D[1]=="number"?D[1]:v+s}}return y}}}function LV(r){return Array.isArray(r)?r:typeof r=="number"?[OV,r]:r==null?R6:[r]}function jS(r,e,t,n){let i,a,s;typeof e=="function"&&typeof t!="function"?(a=void 0,s=e,i=t):(a=e,s=t,i=n),j6(r,a,l,i);function l(u,d){const h=d[d.length-1],g=h?h.children.indexOf(u):void 0;return s(u,g,h)}}const aA={}.hasOwnProperty,BV={};function PV(r,e){const t=e||BV,n=new Map,i=new Map,a=new Map,s={...DV,...t.handlers},l={all:d,applyData:WV,definitionById:n,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:s,one:u,options:t,patch:zV,wrap:qV};return jS(r,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const g=h.type==="definition"?n:i,b=String(h.identifier).toUpperCase();g.has(b)||g.set(b,h)}}),l;function u(h,g){const b=h.type,y=l.handlers[b];if(aA.call(l.handlers,b)&&y)return y(l,h,g);if(l.options.passThrough&&l.options.passThrough.includes(b)){if("children"in h){const{children:v,...w}=h,k=w1(w);return k.children=l.all(h),k}return w1(h)}return(l.options.unknownHandler||HV)(l,h,g)}function d(h){const g=[];if("children"in h){const b=h.children;let y=-1;for(;++y<b.length;){const D=l.one(b[y],h);if(D){if(y&&b[y-1].type==="break"&&(!Array.isArray(D)&&D.type==="text"&&(D.value=rR(D.value)),!Array.isArray(D)&&D.type==="element")){const v=D.children[0];v&&v.type==="text"&&(v.value=rR(v.value))}Array.isArray(D)?g.push(...D):g.push(D)}}}return g}}function zV(r,e){r.position&&(e.position=CW(r))}function WV(r,e){let t=e;if(r&&r.data){const n=r.data.hName,i=r.data.hChildren,a=r.data.hProperties;if(typeof n=="string")if(t.type==="element")t.tagName=n;else{const s="children"in t?t.children:[t];t={type:"element",tagName:n,properties:{},children:s}}t.type==="element"&&a&&Object.assign(t.properties,w1(a)),"children"in t&&t.children&&i!==null&&i!==void 0&&(t.children=i)}return t}function HV(r,e){const t=e.data||{},n="value"in e&&!(aA.call(t,"hProperties")||aA.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:r.all(e)};return r.patch(e,n),r.applyData(e,n)}function qV(r,e){const t=[];let n=-1;for(e&&t.push({type:"text",value:`
`});++n<r.length;)n&&t.push({type:"text",value:`
`}),t.push(r[n]);return e&&r.length>0&&t.push({type:"text",value:`
`}),t}function rR(r){let e=0,t=r.charCodeAt(e);for(;t===9||t===32;)e++,t=r.charCodeAt(e);return r.slice(e)}function iR(r,e){const t=PV(r,e),n=t.one(r,void 0),i=NV(t),a=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function VV(r,e){return r&&"run"in r?async function(t,n){const i=iR(t,{file:n,...e});await r.run(i,n)}:function(t,n){return iR(t,{file:n,...r||e})}}function aR(r){if(r)throw r}var dD,sR;function XV(){if(sR)return dD;sR=1;var r=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},a=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var h=r.call(d,"constructor"),g=d.constructor&&d.constructor.prototype&&r.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!h&&!g)return!1;var b;for(b in d);return typeof b>"u"||r.call(d,b)},s=function(d,h){t&&h.name==="__proto__"?t(d,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):d[h.name]=h.newValue},l=function(d,h){if(h==="__proto__")if(r.call(d,h)){if(n)return n(d,h).value}else return;return d[h]};return dD=function u(){var d,h,g,b,y,D,v=arguments[0],w=1,k=arguments.length,_=!1;for(typeof v=="boolean"&&(_=v,v=arguments[1]||{},w=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});w<k;++w)if(d=arguments[w],d!=null)for(h in d)g=l(v,h),b=l(d,h),v!==b&&(_&&b&&(a(b)||(y=i(b)))?(y?(y=!1,D=g&&i(g)?g:[]):D=g&&a(g)?g:{},s(v,{name:h,newValue:u(_,D,b)})):typeof b<"u"&&s(v,{name:h,newValue:b}));return v},dD}var GV=XV();const hD=ey(GV);function sA(r){if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function $V(){const r=[],e={run:t,use:n};return e;function t(...i){let a=-1;const s=i.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);l(null,...i);function l(u,...d){const h=r[++a];let g=-1;if(u){s(u);return}for(;++g<i.length;)(d[g]===null||d[g]===void 0)&&(d[g]=i[g]);i=d,h?YV(h,l)(...d):s(null,...d)}}function n(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return r.push(i),e}}function YV(r,e){let t;return n;function n(...s){const l=r.length>s.length;let u;l&&s.push(i);try{u=r.apply(this,s)}catch(d){const h=d;if(l&&t)throw h;return i(h)}l||(u&&u.then&&typeof u.then=="function"?u.then(a,i):u instanceof Error?i(u):a(u))}function i(s,...l){t||(t=!0,e(s,...l))}function a(s){i(null,s)}}const ds={basename:KV,dirname:QV,extname:ZV,join:JV,sep:"/"};function KV(r,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');my(r);let t=0,n=-1,i=r.length,a;if(e===void 0||e.length===0||e.length>r.length){for(;i--;)if(r.codePointAt(i)===47){if(a){t=i+1;break}}else n<0&&(a=!0,n=i+1);return n<0?"":r.slice(t,n)}if(e===r)return"";let s=-1,l=e.length-1;for(;i--;)if(r.codePointAt(i)===47){if(a){t=i+1;break}}else s<0&&(a=!0,s=i+1),l>-1&&(r.codePointAt(i)===e.codePointAt(l--)?l<0&&(n=i):(l=-1,n=s));return t===n?n=s:n<0&&(n=r.length),r.slice(t,n)}function QV(r){if(my(r),r.length===0)return".";let e=-1,t=r.length,n;for(;--t;)if(r.codePointAt(t)===47){if(n){e=t;break}}else n||(n=!0);return e<0?r.codePointAt(0)===47?"/":".":e===1&&r.codePointAt(0)===47?"//":r.slice(0,e)}function ZV(r){my(r);let e=r.length,t=-1,n=0,i=-1,a=0,s;for(;e--;){const l=r.codePointAt(e);if(l===47){if(s){n=e+1;break}continue}t<0&&(s=!0,t=e+1),l===46?i<0?i=e:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||t<0||a===0||a===1&&i===t-1&&i===n+1?"":r.slice(i,t)}function JV(...r){let e=-1,t;for(;++e<r.length;)my(r[e]),r[e]&&(t=t===void 0?r[e]:t+"/"+r[e]);return t===void 0?".":eX(t)}function eX(r){my(r);const e=r.codePointAt(0)===47;let t=tX(r,!e);return t.length===0&&!e&&(t="."),t.length>0&&r.codePointAt(r.length-1)===47&&(t+="/"),e?"/"+t:t}function tX(r,e){let t="",n=0,i=-1,a=0,s=-1,l,u;for(;++s<=r.length;){if(s<r.length)l=r.codePointAt(s);else{if(l===47)break;l=47}if(l===47){if(!(i===s-1||a===1))if(i!==s-1&&a===2){if(t.length<2||n!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(u=t.lastIndexOf("/"),u!==t.length-1){u<0?(t="",n=0):(t=t.slice(0,u),n=t.length-1-t.lastIndexOf("/")),i=s,a=0;continue}}else if(t.length>0){t="",n=0,i=s,a=0;continue}}e&&(t=t.length>0?t+"/..":"..",n=2)}else t.length>0?t+="/"+r.slice(i+1,s):t=r.slice(i+1,s),n=s-i-1;i=s,a=0}else l===46&&a>-1?a++:a=-1}return t}function my(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}const nX={cwd:rX};function rX(){return"/"}function oA(r){return!!(r!==null&&typeof r=="object"&&"href"in r&&r.href&&"protocol"in r&&r.protocol&&r.auth===void 0)}function iX(r){if(typeof r=="string")r=new URL(r);else if(!oA(r)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+r+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(r.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return aX(r)}function aX(r){if(r.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const e=r.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const n=e.codePointAt(t+2);if(n===70||n===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const fD=["history","path","basename","stem","extname","dirname"];class F6{constructor(e){let t;e?oA(e)?t={path:e}:typeof e=="string"||sX(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":nX.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<fD.length;){const a=fD[n];a in t&&t[a]!==void 0&&t[a]!==null&&(this[a]=a==="history"?[...t[a]]:t[a])}let i;for(i in t)fD.includes(i)||(this[i]=t[i])}get basename(){return typeof this.path=="string"?ds.basename(this.path):void 0}set basename(e){gD(e,"basename"),pD(e,"basename"),this.path=ds.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?ds.dirname(this.path):void 0}set dirname(e){oR(this.basename,"dirname"),this.path=ds.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?ds.extname(this.path):void 0}set extname(e){if(pD(e,"extname"),oR(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ds.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){oA(e)&&(e=iX(e)),gD(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?ds.basename(this.path,this.extname):void 0}set stem(e){gD(e,"stem"),pD(e,"stem"),this.path=ds.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const i=this.message(e,t,n);throw i.fatal=!0,i}info(e,t,n){const i=this.message(e,t,n);return i.fatal=void 0,i}message(e,t,n){const i=new Ir(e,t,n);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function pD(r,e){if(r&&r.includes(ds.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+ds.sep+"`")}function gD(r,e){if(!r)throw new Error("`"+e+"` cannot be empty")}function oR(r,e){if(!r)throw new Error("Setting `"+e+"` requires `path` to be set too")}function sX(r){return!!(r&&typeof r=="object"&&"byteLength"in r&&"byteOffset"in r)}const oX=(function(r){const n=this.constructor.prototype,i=n[r],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,n),a}),lX={}.hasOwnProperty;class FS extends oX{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=$V()}copy(){const e=new FS;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(hD(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(yD("data",this.frozen),this.namespace[e]=t,this):lX.call(this.namespace,e)&&this.namespace[e]||void 0:e?(yD("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const i=t.call(e,...n);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=Zx(e),n=this.parser||this.Parser;return mD("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),mD("process",this.parser||this.Parser),bD("process",this.compiler||this.Compiler),t?i(void 0,t):new Promise(i);function i(a,s){const l=Zx(e),u=n.parse(l);n.run(u,l,function(h,g,b){if(h||!g||!b)return d(h);const y=g,D=n.stringify(y,b);dX(D)?b.value=D:b.result=D,d(h,b)});function d(h,g){h||!g?s(h):a?a(g):t(void 0,g)}}}processSync(e){let t=!1,n;return this.freeze(),mD("processSync",this.parser||this.Parser),bD("processSync",this.compiler||this.Compiler),this.process(e,i),cR("processSync","process",t),n;function i(a,s){t=!0,aR(a),n=s}}run(e,t,n){lR(e),this.freeze();const i=this.transformers;return!n&&typeof t=="function"&&(n=t,t=void 0),n?a(void 0,n):new Promise(a);function a(s,l){const u=Zx(t);i.run(e,u,d);function d(h,g,b){const y=g||e;h?l(h):s?s(y):n(void 0,y,b)}}}runSync(e,t){let n=!1,i;return this.run(e,t,a),cR("runSync","run",n),i;function a(s,l){aR(s),i=l,n=!0}}stringify(e,t){this.freeze();const n=Zx(t),i=this.compiler||this.Compiler;return bD("stringify",i),lR(e),i(e,n)}use(e,...t){const n=this.attachers,i=this.namespace;if(yD("use",this.frozen),e!=null)if(typeof e=="function")u(e,t);else if(typeof e=="object")Array.isArray(e)?l(e):s(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(d){if(typeof d=="function")u(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[h,...g]=d;u(h,g)}else s(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function s(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(i.settings=hD(!0,i.settings,d.settings))}function l(d){let h=-1;if(d!=null)if(Array.isArray(d))for(;++h<d.length;){const g=d[h];a(g)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function u(d,h){let g=-1,b=-1;for(;++g<n.length;)if(n[g][0]===d){b=g;break}if(b===-1)n.push([d,...h]);else if(h.length>0){let[y,...D]=h;const v=n[b][1];sA(v)&&sA(y)&&(y=hD(!0,v,y)),n[b]=[d,y,...D]}}}}const cX=new FS().freeze();function mD(r,e){if(typeof e!="function")throw new TypeError("Cannot `"+r+"` without `parser`")}function bD(r,e){if(typeof e!="function")throw new TypeError("Cannot `"+r+"` without `compiler`")}function yD(r,e){if(e)throw new Error("Cannot call `"+r+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function lR(r){if(!sA(r)||typeof r.type!="string")throw new TypeError("Expected node, got `"+r+"`")}function cR(r,e,t){if(!t)throw new Error("`"+r+"` finished async. Use `"+e+"` instead")}function Zx(r){return uX(r)?r:new F6(r)}function uX(r){return!!(r&&typeof r=="object"&&"message"in r&&"messages"in r)}function dX(r){return typeof r=="string"||hX(r)}function hX(r){return!!(r&&typeof r=="object"&&"byteLength"in r&&"byteOffset"in r)}const fX="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",uR=[],dR={allowDangerousHtml:!0},pX=/^(https?|ircs?|mailto|xmpp)$/i,gX=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function I6(r){const e=r.allowedElements,t=r.allowElement,n=r.children||"",i=r.className,a=r.components,s=r.disallowedElements,l=r.rehypePlugins||uR,u=r.remarkPlugins||uR,d=r.remarkRehypeOptions?{...r.remarkRehypeOptions,...dR}:dR,h=r.skipHtml,g=r.unwrapDisallowed,b=r.urlTransform||mX,y=cX().use(Qq).use(u).use(VV,d).use(l),D=new F6;typeof n=="string"&&(D.value=n);for(const _ of gX)Object.hasOwn(r,_.from)&&(""+_.from+(_.to?"use `"+_.to+"` instead":"remove it")+fX+_.id,void 0);const v=y.parse(D);let w=y.runSync(v,D);return i&&(w={type:"element",tagName:"div",properties:{className:i},children:w.type==="root"?w.children:[w]}),jS(w,k),FW(w,{Fragment:p.Fragment,components:a,ignoreInvalidStyle:!0,jsx:p.jsx,jsxs:p.jsxs,passKeys:!0,passNode:!0});function k(_,A,N){if(_.type==="raw"&&N&&typeof A=="number")return h?N.children.splice(A,1):N.children[A]={type:"text",value:_.value},A;if(_.type==="element"){let E;for(E in lD)if(Object.hasOwn(lD,E)&&Object.hasOwn(_.properties,E)){const T=_.properties[E],R=lD[E];(R===null||R.includes(_.tagName))&&(_.properties[E]=b(String(T||""),E,_))}}if(_.type==="element"){let E=e?!e.includes(_.tagName):s?s.includes(_.tagName):!1;if(!E&&t&&typeof A=="number"&&(E=!t(_,A,N)),E&&N&&typeof A=="number")return g&&_.children?N.children.splice(A,1,..._.children):N.children.splice(A,1),A}}}function mX(r){const e=r.indexOf(":"),t=r.indexOf("?"),n=r.indexOf("#"),i=r.indexOf("/");return e<0||i>-1&&e>i||t>-1&&e>t||n>-1&&e>n||pX.test(r.slice(0,e))?r:""}function hR(r,e){const t=String(r);if(typeof e!="string")throw new TypeError("Expected character");let n=0,i=t.indexOf(e);for(;i!==-1;)n++,i=t.indexOf(e,i+e.length);return n}function bX(r){if(typeof r!="string")throw new TypeError("Expected a string");return r.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function yX(r,e,t){const i=Nv((t||{}).ignore||[]),a=xX(e);let s=-1;for(;++s<a.length;)j6(r,"text",l);function l(d,h){let g=-1,b;for(;++g<h.length;){const y=h[g],D=b?b.children:void 0;if(i(y,D?D.indexOf(y):void 0,b))return;b=y}if(b)return u(d,h)}function u(d,h){const g=h[h.length-1],b=a[s][0],y=a[s][1];let D=0;const w=g.children.indexOf(d);let k=!1,_=[];b.lastIndex=0;let A=b.exec(d.value);for(;A;){const N=A.index,E={index:A.index,input:A.input,stack:[...h,d]};let T=y(...A,E);if(typeof T=="string"&&(T=T.length>0?{type:"text",value:T}:void 0),T===!1?b.lastIndex=N+1:(D!==N&&_.push({type:"text",value:d.value.slice(D,N)}),Array.isArray(T)?_.push(...T):T&&_.push(T),D=N+A[0].length,k=!0),!b.global)break;A=b.exec(d.value)}return k?(D<d.value.length&&_.push({type:"text",value:d.value.slice(D)}),g.children.splice(w,1,..._)):_=[d],w+_.length}}function xX(r){const e=[];if(!Array.isArray(r))throw new TypeError("Expected find and replace tuple or list of tuples");const t=!r[0]||Array.isArray(r[0])?r:[r];let n=-1;for(;++n<t.length;){const i=t[n];e.push([vX(i[0]),wX(i[1])])}return e}function vX(r){return typeof r=="string"?new RegExp(bX(r),"g"):r}function wX(r){return typeof r=="function"?r:function(){return r}}const xD="phrasing",vD=["autolink","link","image","label"];function kX(){return{transforms:[CX],enter:{literalAutolink:_X,literalAutolinkEmail:wD,literalAutolinkHttp:wD,literalAutolinkWww:wD},exit:{literalAutolink:TX,literalAutolinkEmail:EX,literalAutolinkHttp:AX,literalAutolinkWww:SX}}}function DX(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:xD,notInConstruct:vD},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:xD,notInConstruct:vD},{character:":",before:"[ps]",after:"\\/",inConstruct:xD,notInConstruct:vD}]}}function _X(r){this.enter({type:"link",title:null,url:"",children:[]},r)}function wD(r){this.config.enter.autolinkProtocol.call(this,r)}function AX(r){this.config.exit.autolinkProtocol.call(this,r)}function SX(r){this.config.exit.data.call(this,r);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(r)}function EX(r){this.config.exit.autolinkEmail.call(this,r)}function TX(r){this.exit(r)}function CX(r){yX(r,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,NX],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),UX]],{ignore:["link","linkReference"]})}function NX(r,e,t,n,i){let a="";if(!O6(i)||(/^w/i.test(e)&&(t=e+t,e="",a="http://"),!RX(t)))return!1;const s=jX(t+n);if(!s[0])return!1;const l={type:"link",title:null,url:a+e+s[0],children:[{type:"text",value:e+s[0]}]};return s[1]?[l,{type:"text",value:s[1]}]:l}function UX(r,e,t,n){return!O6(n,!0)||/[-\d_]$/.test(t)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+t,children:[{type:"text",value:e+"@"+t}]}}function RX(r){const e=r.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function jX(r){const e=/[!"&'),.:;<>?\]}]+$/.exec(r);if(!e)return[r,void 0];r=r.slice(0,e.index);let t=e[0],n=t.indexOf(")");const i=hR(r,"(");let a=hR(r,")");for(;n!==-1&&i>a;)r+=t.slice(0,n+1),t=t.slice(n+1),n=t.indexOf(")"),a++;return[r,t]}function O6(r,e){const t=r.input.charCodeAt(r.index-1);return(r.index===0||Fd(t)||Ev(t))&&(!e||t!==47)}M6.peek=WX;function FX(){this.buffer()}function IX(r){this.enter({type:"footnoteReference",identifier:"",label:""},r)}function OX(){this.buffer()}function MX(r){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},r)}function LX(r){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=Ya(this.sliceSerialize(r)).toLowerCase(),t.label=e}function BX(r){this.exit(r)}function PX(r){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=Ya(this.sliceSerialize(r)).toLowerCase(),t.label=e}function zX(r){this.exit(r)}function WX(){return"["}function M6(r,e,t,n){const i=t.createTracker(n);let a=i.move("[^");const s=t.enter("footnoteReference"),l=t.enter("reference");return a+=i.move(t.safe(t.associationId(r),{after:"]",before:a})),l(),s(),a+=i.move("]"),a}function HX(){return{enter:{gfmFootnoteCallString:FX,gfmFootnoteCall:IX,gfmFootnoteDefinitionLabelString:OX,gfmFootnoteDefinition:MX},exit:{gfmFootnoteCallString:LX,gfmFootnoteCall:BX,gfmFootnoteDefinitionLabelString:PX,gfmFootnoteDefinition:zX}}}function qX(r){let e=!1;return r&&r.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:t,footnoteReference:M6},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function t(n,i,a,s){const l=a.createTracker(s);let u=l.move("[^");const d=a.enter("footnoteDefinition"),h=a.enter("label");return u+=l.move(a.safe(a.associationId(n),{before:u,after:"]"})),h(),u+=l.move("]:"),n.children&&n.children.length>0&&(l.shift(4),u+=l.move((e?`
`:" ")+a.indentLines(a.containerFlow(n,l.current()),e?L6:VX))),d(),u}}function VX(r,e,t){return e===0?r:L6(r,e,t)}function L6(r,e,t){return(t?"":"    ")+r}const XX=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];B6.peek=QX;function GX(){return{canContainEols:["delete"],enter:{strikethrough:YX},exit:{strikethrough:KX}}}function $X(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:XX}],handlers:{delete:B6}}}function YX(r){this.enter({type:"delete",children:[]},r)}function KX(r){this.exit(r)}function B6(r,e,t,n){const i=t.createTracker(n),a=t.enter("strikethrough");let s=i.move("~~");return s+=t.containerPhrasing(r,{...i.current(),before:s,after:"~"}),s+=i.move("~~"),a(),s}function QX(){return"~"}function ZX(r){return r.length}function JX(r,e){const t=e||{},n=(t.align||[]).concat(),i=t.stringLength||ZX,a=[],s=[],l=[],u=[];let d=0,h=-1;for(;++h<r.length;){const v=[],w=[];let k=-1;for(r[h].length>d&&(d=r[h].length);++k<r[h].length;){const _=eG(r[h][k]);if(t.alignDelimiters!==!1){const A=i(_);w[k]=A,(u[k]===void 0||A>u[k])&&(u[k]=A)}v.push(_)}s[h]=v,l[h]=w}let g=-1;if(typeof n=="object"&&"length"in n)for(;++g<d;)a[g]=fR(n[g]);else{const v=fR(n);for(;++g<d;)a[g]=v}g=-1;const b=[],y=[];for(;++g<d;){const v=a[g];let w="",k="";v===99?(w=":",k=":"):v===108?w=":":v===114&&(k=":");let _=t.alignDelimiters===!1?1:Math.max(1,u[g]-w.length-k.length);const A=w+"-".repeat(_)+k;t.alignDelimiters!==!1&&(_=w.length+_+k.length,_>u[g]&&(u[g]=_),y[g]=_),b[g]=A}s.splice(1,0,b),l.splice(1,0,y),h=-1;const D=[];for(;++h<s.length;){const v=s[h],w=l[h];g=-1;const k=[];for(;++g<d;){const _=v[g]||"";let A="",N="";if(t.alignDelimiters!==!1){const E=u[g]-(w[g]||0),T=a[g];T===114?A=" ".repeat(E):T===99?E%2?(A=" ".repeat(E/2+.5),N=" ".repeat(E/2-.5)):(A=" ".repeat(E/2),N=A):N=" ".repeat(E)}t.delimiterStart!==!1&&!g&&k.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&_==="")&&(t.delimiterStart!==!1||g)&&k.push(" "),t.alignDelimiters!==!1&&k.push(A),k.push(_),t.alignDelimiters!==!1&&k.push(N),t.padding!==!1&&k.push(" "),(t.delimiterEnd!==!1||g!==d-1)&&k.push("|")}D.push(t.delimiterEnd===!1?k.join("").replace(/ +$/,""):k.join(""))}return D.join(`
`)}function eG(r){return r==null?"":String(r)}function fR(r){const e=typeof r=="string"?r.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function tG(r,e,t,n){const i=t.enter("blockquote"),a=t.createTracker(n);a.move("> "),a.shift(2);const s=t.indentLines(t.containerFlow(r,a.current()),nG);return i(),s}function nG(r,e,t){return">"+(t?"":" ")+r}function rG(r,e){return pR(r,e.inConstruct,!0)&&!pR(r,e.notInConstruct,!1)}function pR(r,e,t){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return t;let n=-1;for(;++n<e.length;)if(r.includes(e[n]))return!0;return!1}function gR(r,e,t,n){let i=-1;for(;++i<t.unsafe.length;)if(t.unsafe[i].character===`
`&&rG(t.stack,t.unsafe[i]))return/[ \t]/.test(n.before)?"":" ";return`\\
`}function iG(r,e){const t=String(r);let n=t.indexOf(e),i=n,a=0,s=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;n!==-1;)n===i?++a>s&&(s=a):a=1,i=n+e.length,n=t.indexOf(e,i);return s}function aG(r,e){return!!(e.options.fences===!1&&r.value&&!r.lang&&/[^ \r\n]/.test(r.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(r.value))}function sG(r){const e=r.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function oG(r,e,t,n){const i=sG(t),a=r.value||"",s=i==="`"?"GraveAccent":"Tilde";if(aG(r,t)){const g=t.enter("codeIndented"),b=t.indentLines(a,lG);return g(),b}const l=t.createTracker(n),u=i.repeat(Math.max(iG(a,i)+1,3)),d=t.enter("codeFenced");let h=l.move(u);if(r.lang){const g=t.enter(`codeFencedLang${s}`);h+=l.move(t.safe(r.lang,{before:h,after:" ",encode:["`"],...l.current()})),g()}if(r.lang&&r.meta){const g=t.enter(`codeFencedMeta${s}`);h+=l.move(" "),h+=l.move(t.safe(r.meta,{before:h,after:`
`,encode:["`"],...l.current()})),g()}return h+=l.move(`
`),a&&(h+=l.move(a+`
`)),h+=l.move(u),d(),h}function lG(r,e,t){return(t?"":"    ")+r}function IS(r){const e=r.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function cG(r,e,t,n){const i=IS(t),a=i==='"'?"Quote":"Apostrophe",s=t.enter("definition");let l=t.enter("label");const u=t.createTracker(n);let d=u.move("[");return d+=u.move(t.safe(t.associationId(r),{before:d,after:"]",...u.current()})),d+=u.move("]: "),l(),!r.url||/[\0- \u007F]/.test(r.url)?(l=t.enter("destinationLiteral"),d+=u.move("<"),d+=u.move(t.safe(r.url,{before:d,after:">",...u.current()})),d+=u.move(">")):(l=t.enter("destinationRaw"),d+=u.move(t.safe(r.url,{before:d,after:r.title?" ":`
`,...u.current()}))),l(),r.title&&(l=t.enter(`title${a}`),d+=u.move(" "+i),d+=u.move(t.safe(r.title,{before:d,after:i,...u.current()})),d+=u.move(i),l()),s(),d}function uG(r){const e=r.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Dm(r){return"&#x"+r.toString(16).toUpperCase()+";"}function k1(r,e,t){const n=gp(r),i=gp(e);return n===void 0?i===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:n===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}P6.peek=dG;function P6(r,e,t,n){const i=uG(t),a=t.enter("emphasis"),s=t.createTracker(n),l=s.move(i);let u=s.move(t.containerPhrasing(r,{after:i,before:l,...s.current()}));const d=u.charCodeAt(0),h=k1(n.before.charCodeAt(n.before.length-1),d,i);h.inside&&(u=Dm(d)+u.slice(1));const g=u.charCodeAt(u.length-1),b=k1(n.after.charCodeAt(0),g,i);b.inside&&(u=u.slice(0,-1)+Dm(g));const y=s.move(i);return a(),t.attentionEncodeSurroundingInfo={after:b.outside,before:h.outside},l+u+y}function dG(r,e,t){return t.options.emphasis||"*"}function hG(r,e){let t=!1;return jS(r,function(n){if("value"in n&&/\r?\n|\r/.test(n.value)||n.type==="break")return t=!0,iA}),!!((!r.depth||r.depth<3)&&SS(r)&&(e.options.setext||t))}function fG(r,e,t,n){const i=Math.max(Math.min(6,r.depth||1),1),a=t.createTracker(n);if(hG(r,t)){const h=t.enter("headingSetext"),g=t.enter("phrasing"),b=t.containerPhrasing(r,{...a.current(),before:`
`,after:`
`});return g(),h(),b+`
`+(i===1?"=":"-").repeat(b.length-(Math.max(b.lastIndexOf("\r"),b.lastIndexOf(`
`))+1))}const s="#".repeat(i),l=t.enter("headingAtx"),u=t.enter("phrasing");a.move(s+" ");let d=t.containerPhrasing(r,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(d)&&(d=Dm(d.charCodeAt(0))+d.slice(1)),d=d?s+" "+d:s,t.options.closeAtx&&(d+=" "+s),u(),l(),d}z6.peek=pG;function z6(r){return r.value||""}function pG(){return"<"}W6.peek=gG;function W6(r,e,t,n){const i=IS(t),a=i==='"'?"Quote":"Apostrophe",s=t.enter("image");let l=t.enter("label");const u=t.createTracker(n);let d=u.move("![");return d+=u.move(t.safe(r.alt,{before:d,after:"]",...u.current()})),d+=u.move("]("),l(),!r.url&&r.title||/[\0- \u007F]/.test(r.url)?(l=t.enter("destinationLiteral"),d+=u.move("<"),d+=u.move(t.safe(r.url,{before:d,after:">",...u.current()})),d+=u.move(">")):(l=t.enter("destinationRaw"),d+=u.move(t.safe(r.url,{before:d,after:r.title?" ":")",...u.current()}))),l(),r.title&&(l=t.enter(`title${a}`),d+=u.move(" "+i),d+=u.move(t.safe(r.title,{before:d,after:i,...u.current()})),d+=u.move(i),l()),d+=u.move(")"),s(),d}function gG(){return"!"}H6.peek=mG;function H6(r,e,t,n){const i=r.referenceType,a=t.enter("imageReference");let s=t.enter("label");const l=t.createTracker(n);let u=l.move("![");const d=t.safe(r.alt,{before:u,after:"]",...l.current()});u+=l.move(d+"]["),s();const h=t.stack;t.stack=[],s=t.enter("reference");const g=t.safe(t.associationId(r),{before:u,after:"]",...l.current()});return s(),t.stack=h,a(),i==="full"||!d||d!==g?u+=l.move(g+"]"):i==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function mG(){return"!"}q6.peek=bG;function q6(r,e,t){let n=r.value||"",i="`",a=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(n);)i+="`";for(/[^ \r\n]/.test(n)&&(/^[ \r\n]/.test(n)&&/[ \r\n]$/.test(n)||/^`|`$/.test(n))&&(n=" "+n+" ");++a<t.unsafe.length;){const s=t.unsafe[a],l=t.compilePattern(s);let u;if(s.atBreak)for(;u=l.exec(n);){let d=u.index;n.charCodeAt(d)===10&&n.charCodeAt(d-1)===13&&d--,n=n.slice(0,d)+" "+n.slice(u.index+1)}}return i+n+i}function bG(){return"`"}function V6(r,e){const t=SS(r);return!!(!e.options.resourceLink&&r.url&&!r.title&&r.children&&r.children.length===1&&r.children[0].type==="text"&&(t===r.url||"mailto:"+t===r.url)&&/^[a-z][a-z+.-]+:/i.test(r.url)&&!/[\0- <>\u007F]/.test(r.url))}X6.peek=yG;function X6(r,e,t,n){const i=IS(t),a=i==='"'?"Quote":"Apostrophe",s=t.createTracker(n);let l,u;if(V6(r,t)){const h=t.stack;t.stack=[],l=t.enter("autolink");let g=s.move("<");return g+=s.move(t.containerPhrasing(r,{before:g,after:">",...s.current()})),g+=s.move(">"),l(),t.stack=h,g}l=t.enter("link"),u=t.enter("label");let d=s.move("[");return d+=s.move(t.containerPhrasing(r,{before:d,after:"](",...s.current()})),d+=s.move("]("),u(),!r.url&&r.title||/[\0- \u007F]/.test(r.url)?(u=t.enter("destinationLiteral"),d+=s.move("<"),d+=s.move(t.safe(r.url,{before:d,after:">",...s.current()})),d+=s.move(">")):(u=t.enter("destinationRaw"),d+=s.move(t.safe(r.url,{before:d,after:r.title?" ":")",...s.current()}))),u(),r.title&&(u=t.enter(`title${a}`),d+=s.move(" "+i),d+=s.move(t.safe(r.title,{before:d,after:i,...s.current()})),d+=s.move(i),u()),d+=s.move(")"),l(),d}function yG(r,e,t){return V6(r,t)?"<":"["}G6.peek=xG;function G6(r,e,t,n){const i=r.referenceType,a=t.enter("linkReference");let s=t.enter("label");const l=t.createTracker(n);let u=l.move("[");const d=t.containerPhrasing(r,{before:u,after:"]",...l.current()});u+=l.move(d+"]["),s();const h=t.stack;t.stack=[],s=t.enter("reference");const g=t.safe(t.associationId(r),{before:u,after:"]",...l.current()});return s(),t.stack=h,a(),i==="full"||!d||d!==g?u+=l.move(g+"]"):i==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function xG(){return"["}function OS(r){const e=r.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function vG(r){const e=OS(r),t=r.options.bulletOther;if(!t)return e==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+t+"`) to be different");return t}function wG(r){const e=r.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function $6(r){const e=r.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function kG(r,e,t,n){const i=t.enter("list"),a=t.bulletCurrent;let s=r.ordered?wG(t):OS(t);const l=r.ordered?s==="."?")":".":vG(t);let u=e&&t.bulletLastUsed?s===t.bulletLastUsed:!1;if(!r.ordered){const h=r.children?r.children[0]:void 0;if((s==="*"||s==="-")&&h&&(!h.children||!h.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(u=!0),$6(t)===s&&h){let g=-1;for(;++g<r.children.length;){const b=r.children[g];if(b&&b.type==="listItem"&&b.children&&b.children[0]&&b.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(s=l),t.bulletCurrent=s;const d=t.containerFlow(r,n);return t.bulletLastUsed=s,t.bulletCurrent=a,i(),d}function DG(r){const e=r.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function _G(r,e,t,n){const i=DG(t);let a=t.bulletCurrent||OS(t);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(t.options.incrementListMarker===!1?0:e.children.indexOf(r))+a);let s=a.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||r.spread))&&(s=Math.ceil(s/4)*4);const l=t.createTracker(n);l.move(a+" ".repeat(s-a.length)),l.shift(s);const u=t.enter("listItem"),d=t.indentLines(t.containerFlow(r,l.current()),h);return u(),d;function h(g,b,y){return b?(y?"":" ".repeat(s))+g:(y?a:a+" ".repeat(s-a.length))+g}}function AG(r,e,t,n){const i=t.enter("paragraph"),a=t.enter("phrasing"),s=t.containerPhrasing(r,n);return a(),i(),s}const SG=Nv(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function EG(r,e,t,n){return(r.children.some(function(s){return SG(s)})?t.containerPhrasing:t.containerFlow).call(t,r,n)}function TG(r){const e=r.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Y6.peek=CG;function Y6(r,e,t,n){const i=TG(t),a=t.enter("strong"),s=t.createTracker(n),l=s.move(i+i);let u=s.move(t.containerPhrasing(r,{after:i,before:l,...s.current()}));const d=u.charCodeAt(0),h=k1(n.before.charCodeAt(n.before.length-1),d,i);h.inside&&(u=Dm(d)+u.slice(1));const g=u.charCodeAt(u.length-1),b=k1(n.after.charCodeAt(0),g,i);b.inside&&(u=u.slice(0,-1)+Dm(g));const y=s.move(i+i);return a(),t.attentionEncodeSurroundingInfo={after:b.outside,before:h.outside},l+u+y}function CG(r,e,t){return t.options.strong||"*"}function NG(r,e,t,n){return t.safe(r.value,n)}function UG(r){const e=r.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function RG(r,e,t){const n=($6(t)+(t.options.ruleSpaces?" ":"")).repeat(UG(t));return t.options.ruleSpaces?n.slice(0,-1):n}const K6={blockquote:tG,break:gR,code:oG,definition:cG,emphasis:P6,hardBreak:gR,heading:fG,html:z6,image:W6,imageReference:H6,inlineCode:q6,link:X6,linkReference:G6,list:kG,listItem:_G,paragraph:AG,root:EG,strong:Y6,text:NG,thematicBreak:RG};function jG(){return{enter:{table:FG,tableData:mR,tableHeader:mR,tableRow:OG},exit:{codeText:MG,table:IG,tableData:kD,tableHeader:kD,tableRow:kD}}}function FG(r){const e=r._align;this.enter({type:"table",align:e.map(function(t){return t==="none"?null:t}),children:[]},r),this.data.inTable=!0}function IG(r){this.exit(r),this.data.inTable=void 0}function OG(r){this.enter({type:"tableRow",children:[]},r)}function kD(r){this.exit(r)}function mR(r){this.enter({type:"tableCell",children:[]},r)}function MG(r){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,LG));const t=this.stack[this.stack.length-1];t.type,t.value=e,this.exit(r)}function LG(r,e){return e==="|"?e:r}function BG(r){const e=r||{},t=e.tableCellPadding,n=e.tablePipeAlign,i=e.stringLength,a=t?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:b,table:s,tableCell:u,tableRow:l}};function s(y,D,v,w){return d(h(y,v,w),y.align)}function l(y,D,v,w){const k=g(y,v,w),_=d([k]);return _.slice(0,_.indexOf(`
`))}function u(y,D,v,w){const k=v.enter("tableCell"),_=v.enter("phrasing"),A=v.containerPhrasing(y,{...w,before:a,after:a});return _(),k(),A}function d(y,D){return JX(y,{align:D,alignDelimiters:n,padding:t,stringLength:i})}function h(y,D,v){const w=y.children;let k=-1;const _=[],A=D.enter("table");for(;++k<w.length;)_[k]=g(w[k],D,v);return A(),_}function g(y,D,v){const w=y.children;let k=-1;const _=[],A=D.enter("tableRow");for(;++k<w.length;)_[k]=u(w[k],y,D,v);return A(),_}function b(y,D,v){let w=K6.inlineCode(y,D,v);return v.stack.includes("tableCell")&&(w=w.replace(/\|/g,"\\$&")),w}}function PG(){return{exit:{taskListCheckValueChecked:bR,taskListCheckValueUnchecked:bR,paragraph:WG}}}function zG(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:HG}}}function bR(r){const e=this.stack[this.stack.length-2];e.type,e.checked=r.type==="taskListCheckValueChecked"}function WG(r){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const t=this.stack[this.stack.length-1];t.type;const n=t.children[0];if(n&&n.type==="text"){const i=e.children;let a=-1,s;for(;++a<i.length;){const l=i[a];if(l.type==="paragraph"){s=l;break}}s===t&&(n.value=n.value.slice(1),n.value.length===0?t.children.shift():t.position&&n.position&&typeof n.position.start.offset=="number"&&(n.position.start.column++,n.position.start.offset++,t.position.start=Object.assign({},n.position.start)))}}this.exit(r)}function HG(r,e,t,n){const i=r.children[0],a=typeof r.checked=="boolean"&&i&&i.type==="paragraph",s="["+(r.checked?"x":" ")+"] ",l=t.createTracker(n);a&&l.move(s);let u=K6.listItem(r,e,t,{...n,...l.current()});return a&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),u;function d(h){return h+s}}function qG(){return[kX(),HX(),GX(),jG(),PG()]}function VG(r){return{extensions:[DX(),qX(r),$X(),BG(r),zG()]}}const XG={tokenize:ZG,partial:!0},Q6={tokenize:JG,partial:!0},Z6={tokenize:e$,partial:!0},J6={tokenize:t$,partial:!0},GG={tokenize:n$,partial:!0},eI={name:"wwwAutolink",tokenize:KG,previous:nI},tI={name:"protocolAutolink",tokenize:QG,previous:rI},sl={name:"emailAutolink",tokenize:YG,previous:iI},Ls={};function $G(){return{text:Ls}}let hu=48;for(;hu<123;)Ls[hu]=sl,hu++,hu===58?hu=65:hu===91&&(hu=97);Ls[43]=sl;Ls[45]=sl;Ls[46]=sl;Ls[95]=sl;Ls[72]=[sl,tI];Ls[104]=[sl,tI];Ls[87]=[sl,eI];Ls[119]=[sl,eI];function YG(r,e,t){const n=this;let i,a;return s;function s(g){return!lA(g)||!iI.call(n,n.previous)||MS(n.events)?t(g):(r.enter("literalAutolink"),r.enter("literalAutolinkEmail"),l(g))}function l(g){return lA(g)?(r.consume(g),l):g===64?(r.consume(g),u):t(g)}function u(g){return g===46?r.check(GG,h,d)(g):g===45||g===95||Rr(g)?(a=!0,r.consume(g),u):h(g)}function d(g){return r.consume(g),i=!0,u}function h(g){return a&&i&&Vr(n.previous)?(r.exit("literalAutolinkEmail"),r.exit("literalAutolink"),e(g)):t(g)}}function KG(r,e,t){const n=this;return i;function i(s){return s!==87&&s!==119||!nI.call(n,n.previous)||MS(n.events)?t(s):(r.enter("literalAutolink"),r.enter("literalAutolinkWww"),r.check(XG,r.attempt(Q6,r.attempt(Z6,a),t),t)(s))}function a(s){return r.exit("literalAutolinkWww"),r.exit("literalAutolink"),e(s)}}function QG(r,e,t){const n=this;let i="",a=!1;return s;function s(g){return(g===72||g===104)&&rI.call(n,n.previous)&&!MS(n.events)?(r.enter("literalAutolink"),r.enter("literalAutolinkHttp"),i+=String.fromCodePoint(g),r.consume(g),l):t(g)}function l(g){if(Vr(g)&&i.length<5)return i+=String.fromCodePoint(g),r.consume(g),l;if(g===58){const b=i.toLowerCase();if(b==="http"||b==="https")return r.consume(g),u}return t(g)}function u(g){return g===47?(r.consume(g),a?d:(a=!0,u)):t(g)}function d(g){return g===null||x1(g)||tn(g)||Fd(g)||Ev(g)?t(g):r.attempt(Q6,r.attempt(Z6,h),t)(g)}function h(g){return r.exit("literalAutolinkHttp"),r.exit("literalAutolink"),e(g)}}function ZG(r,e,t){let n=0;return i;function i(s){return(s===87||s===119)&&n<3?(n++,r.consume(s),i):s===46&&n===3?(r.consume(s),a):t(s)}function a(s){return s===null?t(s):e(s)}}function JG(r,e,t){let n,i,a;return s;function s(d){return d===46||d===95?r.check(J6,u,l)(d):d===null||tn(d)||Fd(d)||d!==45&&Ev(d)?u(d):(a=!0,r.consume(d),s)}function l(d){return d===95?n=!0:(i=n,n=void 0),r.consume(d),s}function u(d){return i||n||!a?t(d):e(d)}}function e$(r,e){let t=0,n=0;return i;function i(s){return s===40?(t++,r.consume(s),i):s===41&&n<t?a(s):s===33||s===34||s===38||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===60||s===63||s===93||s===95||s===126?r.check(J6,e,a)(s):s===null||tn(s)||Fd(s)?e(s):(r.consume(s),i)}function a(s){return s===41&&n++,r.consume(s),i}}function t$(r,e,t){return n;function n(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(r.consume(l),n):l===38?(r.consume(l),a):l===93?(r.consume(l),i):l===60||l===null||tn(l)||Fd(l)?e(l):t(l)}function i(l){return l===null||l===40||l===91||tn(l)||Fd(l)?e(l):n(l)}function a(l){return Vr(l)?s(l):t(l)}function s(l){return l===59?(r.consume(l),n):Vr(l)?(r.consume(l),s):t(l)}}function n$(r,e,t){return n;function n(a){return r.consume(a),i}function i(a){return Rr(a)?t(a):e(a)}}function nI(r){return r===null||r===40||r===42||r===95||r===91||r===93||r===126||tn(r)}function rI(r){return!Vr(r)}function iI(r){return!(r===47||lA(r))}function lA(r){return r===43||r===45||r===46||r===95||Rr(r)}function MS(r){let e=r.length,t=!1;for(;e--;){const n=r[e][1];if((n.type==="labelLink"||n.type==="labelImage")&&!n._balanced){t=!0;break}if(n._gfmAutolinkLiteralWalkedInto){t=!1;break}}return r.length>0&&!t&&(r[r.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),t}const r$={tokenize:d$,partial:!0};function i$(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:l$,continuation:{tokenize:c$},exit:u$}},text:{91:{name:"gfmFootnoteCall",tokenize:o$},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:a$,resolveTo:s$}}}}function a$(r,e,t){const n=this;let i=n.events.length;const a=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let s;for(;i--;){const u=n.events[i][1];if(u.type==="labelImage"){s=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return l;function l(u){if(!s||!s._balanced)return t(u);const d=Ya(n.sliceSerialize({start:s.end,end:n.now()}));return d.codePointAt(0)!==94||!a.includes(d.slice(1))?t(u):(r.enter("gfmFootnoteCallLabelMarker"),r.consume(u),r.exit("gfmFootnoteCallLabelMarker"),e(u))}}function s$(r,e){let t=r.length;for(;t--;)if(r[t][1].type==="labelImage"&&r[t][0]==="enter"){r[t][1];break}r[t+1][1].type="data",r[t+3][1].type="gfmFootnoteCallLabelMarker";const n={type:"gfmFootnoteCall",start:Object.assign({},r[t+3][1].start),end:Object.assign({},r[r.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},r[t+3][1].end),end:Object.assign({},r[t+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},r[r.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},l=[r[t+1],r[t+2],["enter",n,e],r[t+3],r[t+4],["enter",i,e],["exit",i,e],["enter",a,e],["enter",s,e],["exit",s,e],["exit",a,e],r[r.length-2],r[r.length-1],["exit",n,e]];return r.splice(t,r.length-t+1,...l),r}function o$(r,e,t){const n=this,i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let a=0,s;return l;function l(g){return r.enter("gfmFootnoteCall"),r.enter("gfmFootnoteCallLabelMarker"),r.consume(g),r.exit("gfmFootnoteCallLabelMarker"),u}function u(g){return g!==94?t(g):(r.enter("gfmFootnoteCallMarker"),r.consume(g),r.exit("gfmFootnoteCallMarker"),r.enter("gfmFootnoteCallString"),r.enter("chunkString").contentType="string",d)}function d(g){if(a>999||g===93&&!s||g===null||g===91||tn(g))return t(g);if(g===93){r.exit("chunkString");const b=r.exit("gfmFootnoteCallString");return i.includes(Ya(n.sliceSerialize(b)))?(r.enter("gfmFootnoteCallLabelMarker"),r.consume(g),r.exit("gfmFootnoteCallLabelMarker"),r.exit("gfmFootnoteCall"),e):t(g)}return tn(g)||(s=!0),a++,r.consume(g),g===92?h:d}function h(g){return g===91||g===92||g===93?(r.consume(g),a++,d):d(g)}}function l$(r,e,t){const n=this,i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let a,s=0,l;return u;function u(D){return r.enter("gfmFootnoteDefinition")._container=!0,r.enter("gfmFootnoteDefinitionLabel"),r.enter("gfmFootnoteDefinitionLabelMarker"),r.consume(D),r.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(D){return D===94?(r.enter("gfmFootnoteDefinitionMarker"),r.consume(D),r.exit("gfmFootnoteDefinitionMarker"),r.enter("gfmFootnoteDefinitionLabelString"),r.enter("chunkString").contentType="string",h):t(D)}function h(D){if(s>999||D===93&&!l||D===null||D===91||tn(D))return t(D);if(D===93){r.exit("chunkString");const v=r.exit("gfmFootnoteDefinitionLabelString");return a=Ya(n.sliceSerialize(v)),r.enter("gfmFootnoteDefinitionLabelMarker"),r.consume(D),r.exit("gfmFootnoteDefinitionLabelMarker"),r.exit("gfmFootnoteDefinitionLabel"),b}return tn(D)||(l=!0),s++,r.consume(D),D===92?g:h}function g(D){return D===91||D===92||D===93?(r.consume(D),s++,h):h(D)}function b(D){return D===58?(r.enter("definitionMarker"),r.consume(D),r.exit("definitionMarker"),i.includes(a)||i.push(a),Rt(r,y,"gfmFootnoteDefinitionWhitespace")):t(D)}function y(D){return e(D)}}function c$(r,e,t){return r.check(gy,e,r.attempt(r$,e,t))}function u$(r){r.exit("gfmFootnoteDefinition")}function d$(r,e,t){const n=this;return Rt(r,i,"gfmFootnoteDefinitionIndent",5);function i(a){const s=n.events[n.events.length-1];return s&&s[1].type==="gfmFootnoteDefinitionIndent"&&s[2].sliceSerialize(s[1],!0).length===4?e(a):t(a)}}function h$(r){let t=(r||{}).singleTilde;const n={name:"strikethrough",tokenize:a,resolveAll:i};return t==null&&(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function i(s,l){let u=-1;for(;++u<s.length;)if(s[u][0]==="enter"&&s[u][1].type==="strikethroughSequenceTemporary"&&s[u][1]._close){let d=u;for(;d--;)if(s[d][0]==="exit"&&s[d][1].type==="strikethroughSequenceTemporary"&&s[d][1]._open&&s[u][1].end.offset-s[u][1].start.offset===s[d][1].end.offset-s[d][1].start.offset){s[u][1].type="strikethroughSequence",s[d][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},s[d][1].start),end:Object.assign({},s[u][1].end)},g={type:"strikethroughText",start:Object.assign({},s[d][1].end),end:Object.assign({},s[u][1].start)},b=[["enter",h,l],["enter",s[d][1],l],["exit",s[d][1],l],["enter",g,l]],y=l.parser.constructs.insideSpan.null;y&&Xi(b,b.length,0,Tv(y,s.slice(d+1,u),l)),Xi(b,b.length,0,[["exit",g,l],["enter",s[u][1],l],["exit",s[u][1],l],["exit",h,l]]),Xi(s,d-1,u-d+3,b),u=d+b.length-2;break}}for(u=-1;++u<s.length;)s[u][1].type==="strikethroughSequenceTemporary"&&(s[u][1].type="data");return s}function a(s,l,u){const d=this.previous,h=this.events;let g=0;return b;function b(D){return d===126&&h[h.length-1][1].type!=="characterEscape"?u(D):(s.enter("strikethroughSequenceTemporary"),y(D))}function y(D){const v=gp(d);if(D===126)return g>1?u(D):(s.consume(D),g++,y);if(g<2&&!t)return u(D);const w=s.exit("strikethroughSequenceTemporary"),k=gp(D);return w._open=!k||k===2&&!!v,w._close=!v||v===2&&!!k,l(D)}}}class f${constructor(){this.map=[]}add(e,t,n){p$(this,e,t,n)}consume(e){if(this.map.sort(function(a,s){return a[0]-s[0]}),this.map.length===0)return;let t=this.map.length;const n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push(e.slice()),e.length=0;let i=n.pop();for(;i;){for(const a of i)e.push(a);i=n.pop()}this.map.length=0}}function p$(r,e,t,n){let i=0;if(!(t===0&&n.length===0)){for(;i<r.map.length;){if(r.map[i][0]===e){r.map[i][1]+=t,r.map[i][2].push(...n);return}i+=1}r.map.push([e,t,n])}}function g$(r,e){let t=!1;const n=[];for(;e<r.length;){const i=r[e];if(t){if(i[0]==="enter")i[1].type==="tableContent"&&n.push(r[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(r[e-1][1].type==="tableDelimiterMarker"){const a=n.length-1;n[a]=n[a]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(t=!0);e+=1}return n}function m$(){return{flow:{null:{name:"table",tokenize:b$,resolveAll:y$}}}}function b$(r,e,t){const n=this;let i=0,a=0,s;return l;function l(F){let G=n.events.length-1;for(;G>-1;){const j=n.events[G][1].type;if(j==="lineEnding"||j==="linePrefix")G--;else break}const U=G>-1?n.events[G][1].type:null,W=U==="tableHead"||U==="tableRow"?T:u;return W===T&&n.parser.lazy[n.now().line]?t(F):W(F)}function u(F){return r.enter("tableHead"),r.enter("tableRow"),d(F)}function d(F){return F===124||(s=!0,a+=1),h(F)}function h(F){return F===null?t(F):st(F)?a>1?(a=0,n.interrupt=!0,r.exit("tableRow"),r.enter("lineEnding"),r.consume(F),r.exit("lineEnding"),y):t(F):Et(F)?Rt(r,h,"whitespace")(F):(a+=1,s&&(s=!1,i+=1),F===124?(r.enter("tableCellDivider"),r.consume(F),r.exit("tableCellDivider"),s=!0,h):(r.enter("data"),g(F)))}function g(F){return F===null||F===124||tn(F)?(r.exit("data"),h(F)):(r.consume(F),F===92?b:g)}function b(F){return F===92||F===124?(r.consume(F),g):g(F)}function y(F){return n.interrupt=!1,n.parser.lazy[n.now().line]?t(F):(r.enter("tableDelimiterRow"),s=!1,Et(F)?Rt(r,D,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):D(F))}function D(F){return F===45||F===58?w(F):F===124?(s=!0,r.enter("tableCellDivider"),r.consume(F),r.exit("tableCellDivider"),v):E(F)}function v(F){return Et(F)?Rt(r,w,"whitespace")(F):w(F)}function w(F){return F===58?(a+=1,s=!0,r.enter("tableDelimiterMarker"),r.consume(F),r.exit("tableDelimiterMarker"),k):F===45?(a+=1,k(F)):F===null||st(F)?N(F):E(F)}function k(F){return F===45?(r.enter("tableDelimiterFiller"),_(F)):E(F)}function _(F){return F===45?(r.consume(F),_):F===58?(s=!0,r.exit("tableDelimiterFiller"),r.enter("tableDelimiterMarker"),r.consume(F),r.exit("tableDelimiterMarker"),A):(r.exit("tableDelimiterFiller"),A(F))}function A(F){return Et(F)?Rt(r,N,"whitespace")(F):N(F)}function N(F){return F===124?D(F):F===null||st(F)?!s||i!==a?E(F):(r.exit("tableDelimiterRow"),r.exit("tableHead"),e(F)):E(F)}function E(F){return t(F)}function T(F){return r.enter("tableRow"),R(F)}function R(F){return F===124?(r.enter("tableCellDivider"),r.consume(F),r.exit("tableCellDivider"),R):F===null||st(F)?(r.exit("tableRow"),e(F)):Et(F)?Rt(r,R,"whitespace")(F):(r.enter("data"),M(F))}function M(F){return F===null||F===124||tn(F)?(r.exit("data"),R(F)):(r.consume(F),F===92?I:M)}function I(F){return F===92||F===124?(r.consume(F),M):M(F)}}function y$(r,e){let t=-1,n=!0,i=0,a=[0,0,0,0],s=[0,0,0,0],l=!1,u=0,d,h,g;const b=new f$;for(;++t<r.length;){const y=r[t],D=y[1];y[0]==="enter"?D.type==="tableHead"?(l=!1,u!==0&&(yR(b,e,u,d,h),h=void 0,u=0),d={type:"table",start:Object.assign({},D.start),end:Object.assign({},D.end)},b.add(t,0,[["enter",d,e]])):D.type==="tableRow"||D.type==="tableDelimiterRow"?(n=!0,g=void 0,a=[0,0,0,0],s=[0,t+1,0,0],l&&(l=!1,h={type:"tableBody",start:Object.assign({},D.start),end:Object.assign({},D.end)},b.add(t,0,[["enter",h,e]])),i=D.type==="tableDelimiterRow"?2:h?3:1):i&&(D.type==="data"||D.type==="tableDelimiterMarker"||D.type==="tableDelimiterFiller")?(n=!1,s[2]===0&&(a[1]!==0&&(s[0]=s[1],g=Jx(b,e,a,i,void 0,g),a=[0,0,0,0]),s[2]=t)):D.type==="tableCellDivider"&&(n?n=!1:(a[1]!==0&&(s[0]=s[1],g=Jx(b,e,a,i,void 0,g)),a=s,s=[a[1],t,0,0])):D.type==="tableHead"?(l=!0,u=t):D.type==="tableRow"||D.type==="tableDelimiterRow"?(u=t,a[1]!==0?(s[0]=s[1],g=Jx(b,e,a,i,t,g)):s[1]!==0&&(g=Jx(b,e,s,i,t,g)),i=0):i&&(D.type==="data"||D.type==="tableDelimiterMarker"||D.type==="tableDelimiterFiller")&&(s[3]=t)}for(u!==0&&yR(b,e,u,d,h),b.consume(e.events),t=-1;++t<e.events.length;){const y=e.events[t];y[0]==="enter"&&y[1].type==="table"&&(y[1]._align=g$(e.events,t))}return r}function Jx(r,e,t,n,i,a){const s=n===1?"tableHeader":n===2?"tableDelimiter":"tableData",l="tableContent";t[0]!==0&&(a.end=Object.assign({},Ph(e.events,t[0])),r.add(t[0],0,[["exit",a,e]]));const u=Ph(e.events,t[1]);if(a={type:s,start:Object.assign({},u),end:Object.assign({},u)},r.add(t[1],0,[["enter",a,e]]),t[2]!==0){const d=Ph(e.events,t[2]),h=Ph(e.events,t[3]),g={type:l,start:Object.assign({},d),end:Object.assign({},h)};if(r.add(t[2],0,[["enter",g,e]]),n!==2){const b=e.events[t[2]],y=e.events[t[3]];if(b[1].end=Object.assign({},y[1].end),b[1].type="chunkText",b[1].contentType="text",t[3]>t[2]+1){const D=t[2]+1,v=t[3]-t[2]-1;r.add(D,v,[])}}r.add(t[3]+1,0,[["exit",g,e]])}return i!==void 0&&(a.end=Object.assign({},Ph(e.events,i)),r.add(i,0,[["exit",a,e]]),a=void 0),a}function yR(r,e,t,n,i){const a=[],s=Ph(e.events,t);i&&(i.end=Object.assign({},s),a.push(["exit",i,e])),n.end=Object.assign({},s),a.push(["exit",n,e]),r.add(t+1,0,a)}function Ph(r,e){const t=r[e],n=t[0]==="enter"?"start":"end";return t[1][n]}const x$={name:"tasklistCheck",tokenize:w$};function v$(){return{text:{91:x$}}}function w$(r,e,t){const n=this;return i;function i(u){return n.previous!==null||!n._gfmTasklistFirstContentOfListItem?t(u):(r.enter("taskListCheck"),r.enter("taskListCheckMarker"),r.consume(u),r.exit("taskListCheckMarker"),a)}function a(u){return tn(u)?(r.enter("taskListCheckValueUnchecked"),r.consume(u),r.exit("taskListCheckValueUnchecked"),s):u===88||u===120?(r.enter("taskListCheckValueChecked"),r.consume(u),r.exit("taskListCheckValueChecked"),s):t(u)}function s(u){return u===93?(r.enter("taskListCheckMarker"),r.consume(u),r.exit("taskListCheckMarker"),r.exit("taskListCheck"),l):t(u)}function l(u){return st(u)?e(u):Et(u)?r.check({tokenize:k$},e,t)(u):t(u)}}function k$(r,e,t){return Rt(r,n,"whitespace");function n(i){return i===null?t(i):e(i)}}function D$(r){return p6([$G(),i$(),h$(r),m$(),v$()])}const _$={};function aI(r){const e=this,t=r||_$,n=e.data(),i=n.micromarkExtensions||(n.micromarkExtensions=[]),a=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),s=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);i.push(D$(t)),a.push(qG()),s.push(VG(t))}const A$=({node:r,inline:e,className:t,children:n,...i})=>{const[a,s]=Bn.useState(!1),l=/language-(\w+)/.exec(t||""),u=String(n).replace(/\n$/,""),d=()=>{navigator.clipboard.writeText(u),s(!0),setTimeout(()=>s(!1),2e3)};return e?p.jsx("code",{className:"px-1 py-0.5 bg-light-border dark:bg-dark-border rounded font-mono text-sm",...i,children:n}):p.jsxs("div",{className:"my-4 rounded-md bg-dark-bg-page border border-dark-border text-sm",children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-1.5 border-b border-dark-border",children:[p.jsx("span",{className:"text-xs font-sans text-dark-text-tertiary",children:l?l[1]:"code"}),p.jsxs("button",{onClick:d,className:"flex items-center gap-1.5 text-xs text-dark-text-tertiary hover:text-dark-text-primary transition-colors",children:[a?p.jsx(um,{className:"w-4 h-4 text-green-400"}):p.jsx(GR,{className:"w-4 h-4"}),a?"Copied!":"Copy"]})]}),p.jsx("pre",{className:"p-4 overflow-x-auto font-mono",...i,children:n})]})},S$={h1:({node:r,...e})=>p.jsx("h1",{className:"text-2xl font-bold my-4",...e}),h2:({node:r,...e})=>p.jsx("h2",{className:"text-xl font-bold my-3",...e}),h3:({node:r,...e})=>p.jsx("h3",{className:"text-lg font-bold my-3",...e}),p:({node:r,...e})=>p.jsx("p",{className:"my-4 leading-relaxed",...e}),ul:({node:r,...e})=>p.jsx("ul",{className:"list-disc list-inside my-4 pl-4 space-y-2",...e}),ol:({node:r,...e})=>p.jsx("ol",{className:"list-decimal list-inside my-4 pl-4 space-y-2",...e}),li:({node:r,...e})=>p.jsx("li",{className:"pl-2",...e}),blockquote:({node:r,...e})=>p.jsx("blockquote",{className:"border-l-4 border-primary-accent bg-light-bg-sidebar dark:bg-dark-bg-component pl-4 italic my-4 py-2",...e}),code:A$},E$=r=>{if(r===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB","TB"],n=Math.floor(Math.log(r)/Math.log(e));return parseFloat((r/Math.pow(e,n)).toFixed(2))+" "+t[n]},sI=({message:r,onAddToEditor:e})=>{const[t,n]=Bn.useState(!1),i=()=>{navigator.clipboard.writeText(r.text),n(!0),setTimeout(()=>n(!1),2e3)};if(r.sender==="system")return p.jsxs("div",{className:"w-full text-center text-sm text-light-text-tertiary dark:text-dark-text-tertiary py-2 my-2",children:[p.jsx(XR,{className:"w-3 h-3 inline-block mr-1.5"})," ",r.text]});const a=r.sender==="user",s=r.sender==="ai";return p.jsxs("div",{className:`flex items-start gap-3 w-full ${a?"justify-end":""}`,children:[s&&p.jsx(xA,{className:"w-8 h-8 text-primary-accent flex-shrink-0 mt-1"}),p.jsxs("div",{className:`flex flex-col max-w-3xl ${a?"items-end":"w-full items-start"}`,children:[p.jsxs("div",{className:`px-3 py-2 rounded-xl text-left font-sans text-light-text-secondary dark:text-dark-text-secondary ${a?"bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary border border-light-border dark:border-dark-border":""}`,children:[r.file&&p.jsxs("div",{className:"mb-3 p-3 border border-light-border dark:border-dark-border rounded-md flex items-center gap-3 bg-black/5 dark:bg-white/5",children:[p.jsx(Cd,{className:"w-6 h-6 text-light-text-tertiary dark:text-dark-text-tertiary flex-shrink-0"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-sm text-light-text-primary dark:text-dark-text-primary",children:r.file.name}),p.jsx("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:E$(r.file.size)})]})]}),p.jsx(I6,{remarkPlugins:[aI],components:S$,children:r.text})]}),s&&p.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[p.jsx("button",{onClick:i,className:"flex items-center gap-1.5 p-1 rounded-md text-xs font-medium text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-black/5 dark:hover:bg-white/5 transition-colors",title:"Copy text",children:t?p.jsxs(p.Fragment,{children:[p.jsx(um,{className:"w-3.5 h-3.5 text-primary-accent"})," Copied"]}):p.jsxs(p.Fragment,{children:[p.jsx(GR,{className:"w-3.5 h-3.5"})," Copy"]})}),e&&p.jsxs("button",{onClick:()=>e&&e(r.text),className:"flex items-center gap-1.5 p-1 rounded-md text-xs font-medium text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-black/5 dark:hover:bg-white/5 transition-colors",title:"Add to editor",children:[p.jsx(Cd,{className:"w-3.5 h-3.5"})," Add to Editor"]})]})]})]})};function Sp(){const r=ry();return{...r,confirmDelete:async(a,s="item")=>r.confirm({title:`Delete ${s}`,message:`Are you sure you want to delete "${a}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger"}),confirmDestructiveAction:async(a,s,l)=>r.confirm({title:`${a}`,message:`Are you sure you want to ${a.toLowerCase()} "${s}"?${l?` ${l}`:""} This action cannot be undone.`,confirmText:a,cancelText:"Cancel",variant:"danger"}),confirmStatusChange:async(a,s,l)=>r.confirm({title:"Change Status",message:`Are you sure you want to change "${a}" from ${s} to ${l}?`,confirmText:`Change to ${l}`,cancelText:"Cancel",variant:"warning"}),confirmRoleChange:async(a,s,l)=>r.confirm({title:"Change User Role",message:`Are you sure you want to ${l==="admin"?"promote":"demote"} "${a}" ${l==="admin"?"to admin":"to regular user"}? ${l==="admin"?"They will gain administrative privileges.":"They will lose administrative privileges."}`,confirmText:l==="admin"?"Promote to Admin":"Demote to User",cancelText:"Cancel",variant:l==="user"?"danger":"warning"})}}const D1=r=>r.replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/__(.*?)__/g,"$1").replace(/~~(.*?)~~/g,"$1").replace(/`(.*?)`/g,"$1").replace(/```[\s\S]*?```/g,"").replace(/#{1,6}\s/g,"").replace(/^\s*[-*+]\s/gm,"").replace(/^\s*\d+\.\s/gm,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/<[^>]*>/g,"").replace(/\n\s*\n\s*\n/g,`

`).replace(/[ \t]+/g," ").replace(/^\s+|\s+$/g,"").trim(),T$=r=>{const e=r.trim()?r.trim().split(/\s+/).length:0,t=r.length,n=r.replace(/\s/g,"").length;return{words:e,characters:t,charactersNoSpaces:n}},oI=({isOpen:r,onClose:e,content:t,onContentChange:n})=>{const i=Sp(),[a,s]=Q.useState(t),[l,u]=Q.useState([]),[d,h]=Q.useState([]),g=Q.useRef(null),b=T$(a);Q.useEffect(()=>{s(t),u([]),h([])},[t]),Q.useEffect(()=>{r&&g.current&&g.current.focus()},[r]);const y=E=>{a!==E&&(u(T=>[...T.slice(-19),a]),h([])),s(E),n(E)},D=async()=>{try{await navigator.clipboard.writeText(a)}catch(E){console.error("Failed to copy text:",E),g.current&&(g.current.select(),document.execCommand("copy"))}},v=async()=>{try{const E=await navigator.clipboard.readText(),T=D1(E);if(g.current){const R=g.current,M=R.selectionStart,I=R.selectionEnd,F=R.value.substring(0,M)+T+R.value.substring(I);y(F),setTimeout(()=>{R.focus(),R.setSelectionRange(M+T.length,M+T.length)},0)}}catch(E){console.error("Failed to paste text:",E)}},w=E=>{(E.ctrlKey||E.metaKey)&&E.key},k=E=>{E.preventDefault();const T=E.clipboardData.getData("text/plain"),R=D1(T);if(g.current){const M=g.current,I=M.selectionStart,F=M.selectionEnd,G=M.value.substring(0,I)+R+M.value.substring(F);y(G),setTimeout(()=>{M.focus(),M.setSelectionRange(I+R.length,I+R.length)},0)}},_=()=>{const E=/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/gu,T=a.replace(E,"");y(T),setTimeout(()=>{var R;(R=g.current)==null||R.focus()},0)},A=()=>{(async()=>{await i.confirm({title:"Clear All Content",message:"Are you sure you want to clear all content? This action cannot be undone.",confirmText:"Clear All",cancelText:"Cancel",variant:"danger"})&&(y(""),setTimeout(()=>{var R;(R=g.current)==null||R.focus()},0))})()},N=[{label:"Remove Emoji",icon:"🚫",action:_,disabled:!a.trim(),shortcut:""},{label:"Clear All",icon:"🗑️",action:A,disabled:!a.trim(),shortcut:""},{label:"Copy Text",icon:"📋",action:D,disabled:!a.trim(),shortcut:"Ctrl+C"},{label:"Paste Text",icon:"📄",action:v,disabled:!1,shortcut:"Ctrl+V"}];return p.jsxs(p.Fragment,{children:[p.jsx("div",{className:`fixed inset-0 bg-black/20 dark:bg-black/40 backdrop-blur-sm z-[100] transition-opacity duration-300 ${r?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e}),p.jsxs("div",{className:`fixed top-0 right-0 h-full w-full max-w-2xl bg-light-bg-component dark:bg-dark-bg-component border-l border-light-border dark:border-dark-border shadow-2xl z-[101] flex flex-col transition-transform duration-300 ease-in-out ${r?"translate-x-0":"translate-x-full"}`,children:[p.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-light-border dark:border-dark-border",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"text-2xl",children:"📝"}),p.jsx("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Editor"})]}),p.jsx("button",{onClick:e,className:"p-2 rounded-md text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page transition-colors",children:p.jsx(Ms,{className:"w-5 h-5"})})]}),p.jsx("div",{className:"flex-shrink-0 p-4 border-b border-light-border dark:border-dark-border",children:p.jsx("div",{className:"flex gap-2",children:N.map(E=>p.jsxs("button",{onClick:E.action,disabled:E.disabled,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:`${E.label} (${E.shortcut})`,children:[p.jsx("span",{className:"text-base",children:E.icon}),p.jsx("span",{children:E.label})]},E.label))})}),p.jsx("div",{className:"flex-1 p-4 overflow-hidden flex flex-col",children:p.jsx("textarea",{ref:g,value:a,onChange:E=>y(E.target.value),onKeyDown:w,onPaste:k,className:"flex-1 w-full p-4 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none overflow-y-auto font-serif leading-relaxed resize-none",style:{minHeight:"400px"},placeholder:"Start writing or add content from AI messages..."})}),p.jsx("div",{className:"flex-shrink-0 p-4 border-t border-light-border dark:border-dark-border bg-light-bg-sidebar dark:bg-dark-bg-sidebar",children:p.jsxs("div",{className:"flex items-center justify-between text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:[p.jsxs("div",{className:"flex items-center gap-6",children:[p.jsxs("span",{children:["Words: ",p.jsx("span",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:b.words})]}),p.jsxs("span",{children:["Characters: ",p.jsx("span",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:b.characters})]}),p.jsxs("span",{children:["No spaces: ",p.jsx("span",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:b.charactersNoSpaces})]})]}),p.jsx("button",{onClick:()=>y(""),className:"text-xs text-red-600 dark:text-red-400 hover:underline",children:"Clear All"})]})})]})]})},xR=[{patterns:["target audience","audience","who is the audience","target market"],field:"audience",priority:1},{patterns:["tone","voice","tone of voice","writing style","brand voice"],field:"tone",priority:2},{patterns:["language","what language","preferred language"],field:"language",priority:3},{patterns:["client name","company name","brand name","business name"],field:"name",priority:4},{patterns:["sample","example","writing sample","style sample"],field:"sample",priority:5}];function C$(r,e){const t=r.toLowerCase();Logger.info("PREFILL: Attempting to match question to profile field",{component:"clientProfileHelper",questionLabel:r,profileName:e.name,availableFields:Object.keys(e).filter(i=>typeof e[i]=="string"&&e[i])});const n=[...xR].sort((i,a)=>i.priority-a.priority);for(const i of n)if(i.patterns.some(s=>t.includes(s))){const s=e[i.field];if(s&&typeof s=="string"&&s.trim())return Logger.info("PREFILL: Successful question-to-field match found",{component:"clientProfileHelper",questionLabel:r,matchedField:i.field,matchedPattern:i.patterns.find(l=>t.includes(l)),fieldValue:s.substring(0,50)+(s.length>50?"...":""),priority:i.priority}),s.trim()}return Logger.info("PREFILL: No matching profile field found for question",{component:"clientProfileHelper",questionLabel:r,profileName:e.name,checkedPatterns:xR.flatMap(i=>i.patterns)}),null}function N$(r,e){const t={preFilledAnswers:[],preFilledQuestions:[],nextQuestionIndex:0,hasPrefilledData:!1};if(!e||!r||r.length===0)return t;const n=[...r].sort((i,a)=>i.order-a.order);for(let i=0;i<n.length;i++){const a=n[i],s=C$(a.label,e);if(s)t.preFilledAnswers.push(s),t.preFilledQuestions.push(a.label),t.nextQuestionIndex=i+1,t.hasPrefilledData=!0;else break}return t}function U$(r,e,t,n){if(t.length===0)return`Hello! I'm ready to help you with ${r}. Let's get started.`;const i=t.map((a,s)=>`• **${a}**: ${n[s]}`).join(`
`);return`Hello! I'm ready to help you with ${r}.

Based on your selected client profile "${e}", I've automatically filled in the following information:

${i}

This saves you time and ensures consistency with your client's requirements. Let's continue with the remaining questions.`}function R$(r,e){return`Perfect! I have all the information I need from your client profile "${e}". What would you like me to create for ${e}?`}const j$=[],F$=({projects:r,selectedProjectId:e,onSelectProject:t,onNewProject:n})=>{const[i,a]=Q.useState(!1),s=Q.useRef(null),l=r.find(h=>h.id===e);Q.useEffect(()=>{const h=g=>{s.current&&!s.current.contains(g.target)&&a(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const u=h=>{t(h),a(!1)},d=()=>{n(),a(!1)};return p.jsxs("div",{className:"relative",ref:s,children:[p.jsxs("button",{onClick:()=>a(!i),className:"flex items-center gap-2 text-sm font-medium px-3 py-1.5 rounded-md border border-light-border dark:border-dark-border bg-light-bg-component dark:bg-dark-bg-component text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[p.jsx(Gr,{className:"w-4 h-4"}),p.jsx("span",{className:"truncate max-w-[150px]",children:(l==null?void 0:l.name)||"Add chat to project"}),p.jsx(iy,{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`})]}),i&&p.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-md shadow-lg z-20",children:[p.jsx("div",{className:"p-2 max-h-60 overflow-y-auto",children:r.map(h=>p.jsxs("a",{href:"#",onClick:g=>{g.preventDefault(),u(h.id)},className:`flex items-center gap-3 w-full text-left px-3 py-2 text-sm rounded-sm ${e===h.id?"bg-primary-accent/20 text-light-text-primary dark:text-dark-text-primary":"text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page"}`,children:[p.jsx(Gr,{className:"w-4 h-4 flex-shrink-0"}),p.jsx("span",{className:"truncate",children:h.name}),e===h.id&&p.jsx(um,{className:"w-4 h-4 ml-auto text-primary-accent"})]},h.id))}),p.jsx("div",{className:"p-2 border-t border-light-border dark:border-dark-border",children:p.jsxs("a",{href:"#",onClick:h=>{h.preventDefault(),d()},className:"flex items-center gap-3 w-full text-left px-3 py-2 text-sm rounded-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[p.jsx(Ka,{className:"w-4 h-4"}),p.jsx("span",{children:"Create new project"})]})})]})]})},I$=({tool:r,existingChatSession:e,onBack:t,projects:n,onNewProject:i,onStartNewConversation:a})=>{const[s,l]=Q.useState(()=>(e==null?void 0:e.messages)||[]),[u,d]=Q.useState(()=>e!=null&&e.messages?e.messages.filter(Fe=>Fe.sender==="user").length:0),[h,g]=Q.useState(()=>e!=null&&e.messages?e.messages.filter(be=>be.sender==="user").map(be=>be.text):[]),[b,y]=Q.useState(()=>e!=null&&e.messages&&e.messages.length>0?e.messages.filter(Fe=>Fe.sender==="user").length>=r.questions.length||r.questions.length===0:!1),[D,v]=Q.useState(!1),[w,k]=Q.useState(null),[_,A]=Q.useState(()=>{var Fe;const be=sessionStorage.getItem("activeProjectId");return(e==null?void 0:e.projectId)||be||((Fe=n[0])==null?void 0:Fe.id)||null}),[N,E]=Q.useState(()=>e!=null&&e.messages&&e.messages.length>0&&(e.messages.filter(Fe=>Fe.sender==="user").length>=r.questions.length||r.questions.length===0)?"freeform":"structured"),[T,R]=Q.useState(!1),[M,I]=Q.useState(""),[F,G]=Q.useState(null),[U,W]=Q.useState(!1),{getActiveClientProfile:j,setActiveClientProfileId:X}=ht(),P=ht(be=>{var Fe,$e;return(($e=(Fe=be.profile)==null?void 0:Fe.preferences)==null?void 0:$e.clientProfiles)||j$}),[B,ee]=Q.useState(()=>{if(e!=null&&e.clientProfileId){const Fe=P.find($e=>$e.id===e.clientProfileId);if(Fe)return De.info("STATE INIT: Resuming with client profile from chat session",{component:"ToolInterfaceView",profileId:Fe.id,profileName:Fe.name,chatSessionId:e.id}),Fe}const be=j();return be?(De.info("STATE INIT: Using global active client profile",{component:"ToolInterfaceView",profileId:be.id,profileName:be.name}),be):(De.info("STATE INIT: No client profile selected",{component:"ToolInterfaceView"}),null)});Q.useEffect(()=>{const Fe=setTimeout(()=>{sessionStorage.removeItem("activeProjectId"),sessionStorage.removeItem("activeClientProfile")},1e3);return()=>clearTimeout(Fe)},[]);const{user:K}=ht(),H=Pn.getInstance(),J=Uc.getInstance(),ie=Q.useRef(null);e==null||e.id;const z=Q.useMemo(()=>[...r.questions].sort((be,Fe)=>be.order-Fe.order),[r.questions]);Q.useEffect(()=>{if(s.length>0||(e==null?void 0:e.messages.length)>0){De.info("GUARD: Skipping initialization - conversation already in progress",{component:"ToolInterfaceView",toolId:r.id,messageCount:s.length,isExistingSession:!!e,existingMessageCount:(e==null?void 0:e.messages.length)||0});return}De.info("INITIALIZATION: Starting fresh conversation with generic welcome",{component:"ToolInterfaceView",toolId:r.id,toolTitle:r.title,questionCount:z.length,isNewChat:!e,hasExistingMessages:!!(e!=null&&e.messages.length)}),v(!0),setTimeout(()=>{const be=z[0],Fe=be?`Hello! I'm ready to help you with ${r.title}. ${be.label}`:`Hello! I'm ready to help you with ${r.title}. How can I assist you today?`;l([{id:"init-message",sender:"ai",text:Fe}]),z.length===0&&(E("freeform"),y(!0)),v(!1)},1e3)},[r.id,z.length]);const ge=be=>{var Fe;if(De.info("PREFILL: Client profile selection triggered",{component:"ToolInterfaceView",toolId:r.id,profileId:(be==null?void 0:be.id)||null,profileName:(be==null?void 0:be.name)||"None",currentMessageCount:s.length,currentQuestionIndex:u,conversationMode:N,canPrefill:s.length<=1&&z.length>0&&!!be}),s.length<=1&&z.length>0&&be){De.info("PREFILL: Running prefill logic for selected profile",{component:"ToolInterfaceView",toolId:r.id,profileId:be.id,profileName:be.name,questionCount:z.length,currentMessageCount:s.length,willReplacePreviousMessages:s.length>0}),De.info("PREFILL: About to call prefillQuestionsFromClientProfile",{component:"ToolInterfaceView",toolId:r.id,profileId:be.id,profileName:be.name,questionCount:z.length,questions:z.map(O=>({label:O.label.substring(0,50)+(O.label.length>50?"...":""),type:O.type,order:O.order}))});const $e=N$(z,be);if(De.info("PREFILL: prefillQuestionsFromClientProfile completed",{component:"ToolInterfaceView",toolId:r.id,profileId:be.id,profileName:be.name,hasPrefilledData:$e.hasPrefilledData,prefilledCount:$e.preFilledAnswers.length,nextQuestionIndex:$e.nextQuestionIndex,prefilledQuestions:$e.preFilledQuestions.map(O=>O.substring(0,30)+(O.length>30?"...":"")),prefilledAnswers:$e.preFilledAnswers.map(O=>O.substring(0,30)+(O.length>30?"...":""))}),$e.hasPrefilledData){De.info("PREFILL: Creating context-aware welcome message",{component:"ToolInterfaceView",toolId:r.id,profileId:be.id,prefilledCount:$e.preFilledAnswers.length,totalQuestions:z.length});const O=U$(r.title,be.name,$e.preFilledQuestions,$e.preFilledAnswers);g($e.preFilledAnswers),d($e.nextQuestionIndex);let he=[{id:"context-message",sender:"ai",text:O}];if($e.nextQuestionIndex<z.length){De.info("PREFILL: Partial prefill - asking next question",{component:"ToolInterfaceView",toolId:r.id,nextQuestionIndex:$e.nextQuestionIndex,nextQuestionLabel:(Fe=z[$e.nextQuestionIndex])==null?void 0:Fe.label});const oe=z[$e.nextQuestionIndex];he.push({id:"next-question",sender:"ai",text:oe.label})}else{De.info("PREFILL: Complete prefill - entering freeform mode",{component:"ToolInterfaceView",toolId:r.id,allQuestionsAnswered:!0}),E("freeform"),y(!0);const oe=R$(r.title,be.name);he.push({id:"ready-message",sender:"ai",text:oe})}l(he),De.info("PREFILL: Prefill completed successfully",{component:"ToolInterfaceView",toolId:r.id,profileId:be.id,profileName:be.name,finalMessageCount:he.length,finalQuestionIndex:$e.nextQuestionIndex,newConversationMode:$e.nextQuestionIndex>=z.length?"freeform":"structured",replacedPreviousMessages:!0})}else De.info("PREFILL: No prefillable data found in profile",{component:"ToolInterfaceView",toolId:r.id,profileId:be.id,profileName:be.name,questionCount:z.length,reason:"No matching fields found between questions and profile data"})}else De.info("PREFILL: Skipping prefill logic",{component:"ToolInterfaceView",toolId:r.id,profileId:(be==null?void 0:be.id)||null,profileName:(be==null?void 0:be.name)||"None",currentMessageCount:s.length,questionCount:z.length,reason:s.length>1?"Chat already in progress":z.length===0?"Tool has no questions":be?"Unknown":"No profile selected"})},ve=be=>{De.info("HANDLER: Profile selection triggered - updating both local and global state",{component:"ToolInterfaceView",toolId:r.id,newProfileId:(be==null?void 0:be.id)||null,newProfileName:(be==null?void 0:be.name)||"None",previousProfileId:(B==null?void 0:B.id)||null,previousProfileName:(B==null?void 0:B.name)||"None",currentMessageCount:s.length,willTriggerPrefill:s.length<=1&&z.length>0&&!!be}),X((be==null?void 0:be.id)||null),ee(be),ge(be),De.info("HANDLER: Profile selection complete - both states synchronized",{component:"ToolInterfaceView",localProfileId:(be==null?void 0:be.id)||null,globalProfileId:(be==null?void 0:be.id)||null})};Q.useEffect(()=>{ie.current&&s.length>0&&setTimeout(()=>{var be;(be=ie.current)==null||be.scrollIntoView({behavior:"smooth",block:"end"})},100)},[s]);const[je,Ie]=Q.useState(()=>(e==null?void 0:e.id)||null);Q.useEffect(()=>{const Fe=setTimeout(async()=>{if(!K||!s.length||D)return;const $e=s.some(he=>he.sender==="user"),O=s.some(he=>he.sender==="ai");if(!(!$e||!O))try{if(je)(await H.updateChatSession(je,{messages:s,projectId:_||void 0,clientProfileId:(B==null?void 0:B.id)||null})).success&&De.info("Chat auto-saved successfully",{component:"ToolInterfaceView",toolId:r.id,messageCount:s.length,projectId:_});else{const he=s.find(ne=>ne.sender==="user"),oe=(he==null?void 0:he.text.substring(0,50))||r.title,re=await H.saveChatSession({userId:K.id,toolId:r.id,title:oe,messages:s,projectId:_||void 0,clientProfileId:(B==null?void 0:B.id)||null});re.success&&re.data&&(Ie(re.data.id),De.info("New chat session created",{component:"ToolInterfaceView",toolId:r.id,sessionId:re.data.id,messageCount:s.length}))}}catch(he){De.error({message:"Failed to auto-save chat",code:"CHAT_AUTO_SAVE_ERROR",details:he instanceof Error?he.message:"Unknown auto-save error",timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"ToolInterfaceView",severity:"warn"},{toolId:r.id,messageCount:s.length})}},2e3);return()=>clearTimeout(Fe)},[s,K,H,r.id,_,D,je,B]);const Pe=async be=>{var he;De.userAction("send_chat_message",{component:"ToolInterfaceView",toolId:r.id,toolTitle:r.title,messageLength:be.length,hasAttachment:!!w,questionIndex:u,conversationMode:N}),W(!0);let Fe;if(w&&K)try{const oe=await J.uploadKnowledgeBaseFile(w,K.id);if(oe.success&&((he=oe.data)!=null&&he.fileId)){De.info("Knowledge base file uploaded successfully",{component:"ToolInterfaceView",fileId:oe.data.fileId,fileName:w.name}),Fe=oe.data.fileId;const re={id:`system-${Date.now()}`,sender:"system",text:`Knowledge base file "${w.name}" has been processed and added to the conversation context.`};l(ne=>[...ne,re])}else De.warn("File upload may have succeeded but no file ID was returned",{component:"ToolInterfaceView",response:oe})}catch(oe){De.error({message:"Failed to process knowledge base file",code:"FILE_PROCESSING_ERROR",details:oe instanceof Error?oe.message:"Unknown file error",timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"ToolInterfaceView",severity:"warn"},{fileName:w.name,fileSize:w.size})}const $e={id:crypto.randomUUID(),sender:"user",text:be,file:w?{name:w.name,size:w.size}:void 0};l(oe=>[...oe,$e]),k(null);const O=[...h,be];g(O),d(oe=>oe+1),v(!0),W(!1);try{if(N==="structured"&&u+1<z.length)setTimeout(()=>{const oe=z[u+1],re={id:crypto.randomUUID(),sender:"ai",text:oe.label};l(ne=>[...ne,re]),v(!1)},800);else{N==="structured"&&!b&&(E("freeform"),y(!0));const oe=[...s,$e],re=j(),ne=await H.sendChatMessage(r.id,oe,Fe,re||void 0);if(ne.success&&ne.data){const ue={id:crypto.randomUUID(),sender:"ai",text:ne.data};G(ue.id),l(Ce=>[...Ce,ue]),De.info(`Chat response generated successfully (${N} mode)`,{component:"ToolInterfaceView",toolId:r.id,conversationMode:N,responseLength:ne.data.length,hadKnowledgeBase:!!Fe})}else{De.error({message:ne.error||"AI response generation failed",code:"CHAT_AI_RESPONSE_ERROR",timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"ToolInterfaceView",severity:"error"},{toolId:r.id,questionIndex:u});const ue={id:crypto.randomUUID(),sender:"ai",text:"I apologize, but I encountered an error generating your response. Please try again or contact support if the issue persists."};l(Ce=>[...Ce,ue])}v(!1)}}catch(oe){console.error("Error sending message:",oe),De.error({message:"Unexpected error in chat flow",code:"CHAT_FLOW_ERROR",details:oe instanceof Error?oe.message:"Unknown chat error",timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"ToolInterfaceView",severity:"error"},{toolId:r.id,questionIndex:u,hasAttachment:!!w});const re={id:crypto.randomUUID(),sender:"ai",text:"I apologize, but I encountered an error. Please try again."};l(ne=>[...ne,re]),v(!1)}},fe=()=>{G(null)},Ue=be=>{const Fe=D1(be);I($e=>{const O=$e.trim()?`

`:"";return $e+O+Fe}),R(!0)};return p.jsxs("div",{className:"h-full flex flex-col relative bg-light-bg-page dark:bg-[#212121]",children:[p.jsxs("button",{onClick:()=>R(!0),className:"fixed top-1/2 right-0 -translate-y-1/2 bg-primary-accent text-text-on-accent px-3 py-6 rounded-l-lg shadow-lg hover:opacity-85 transition-all duration-200 z-50 flex flex-col items-center gap-2 text-sm font-medium",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:[p.jsx("span",{className:"text-lg",children:"✍️"}),p.jsx("span",{children:"Editor"})]}),p.jsxs("header",{className:"flex-shrink-0 grid grid-cols-3 items-center gap-4 p-4 border-b border-light-border dark:border-gray-600 bg-light-bg-component/90 dark:bg-[rgba(33,33,33,0.9)] backdrop-blur-sm sticky top-0 z-10",children:[p.jsxs("div",{className:"justify-self-start flex items-center gap-4",children:[p.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-sm font-medium text-gray-300 hover:text-white",children:[p.jsx(G1,{className:"w-4 h-4"}),"Back"]}),p.jsx("div",{className:"h-6 w-px bg-light-border dark:bg-gray-600"}),p.jsx(F$,{projects:n,selectedProjectId:_,onSelectProject:A,onNewProject:i}),p.jsx(t5,{selectedProfileId:(B==null?void 0:B.id)||null,onSelectProfile:ve,className:"min-w-[200px]",label:""})]}),p.jsx("div",{className:"justify-self-center",children:p.jsx("h2",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-white truncate",children:r.title})}),p.jsx("div",{className:"justify-self-end",children:a&&p.jsxs("button",{onClick:()=>a(r),className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",title:"Start a fresh conversation with this tool",children:[p.jsx(Ka,{className:"w-4 h-4"}),"New Conversation"]})})]}),p.jsx("div",{className:"flex-grow overflow-y-auto",children:p.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-6 space-y-8",children:[s.map(be=>p.jsx("div",{className:"mb-8 last:mb-4",children:p.jsx(sI,{message:be,onAddToEditor:Ue,isStreaming:F===be.id,onStreamComplete:fe})},be.id)),D&&p.jsx(M$,{conversationMode:N,isProcessingRequest:U}),p.jsx("div",{ref:ie,className:"h-1"})]})}),p.jsx("div",{className:"flex-shrink-0 p-4 bg-light-bg-component dark:bg-[#212121] border-t border-light-border dark:border-gray-600",children:p.jsxs("div",{className:"max-w-3xl mx-auto",children:[N==="structured"&&!b&&p.jsxs("p",{className:"text-center text-sm text-light-text-tertiary dark:text-gray-400 mb-3",children:["Question ",u+1," of ",z.length]}),p.jsx(O$,{onSendMessage:Pe,disabled:D,attachedFile:w,setAttachedFile:k,placeholder:D?"":N==="freeform"?"Ask for revisions, improvements, or continue the conversation...":"Type your answer here...",isProcessingRequest:U}),N==="freeform"&&p.jsx("p",{className:"text-center text-xs text-light-text-tertiary dark:text-gray-400 mt-2 opacity-70",children:"Continue the conversation - ask for revisions, improvements, or new requests"})]})}),p.jsx(oI,{isOpen:T,onClose:()=>R(!1),content:M,onContentChange:I})]})},O$=({onSendMessage:r,disabled:e,attachedFile:t,setAttachedFile:n,placeholder:i="Type your message here...",isProcessingRequest:a=!1})=>{const[s,l]=Q.useState(""),u=Q.useRef(null),d=Q.useRef(null),h=Uc.getInstance();Q.useEffect(()=>{u.current&&(u.current.style.height="auto",u.current.style.height=`${u.current.scrollHeight}px`)},[s]);const g=y=>{if(y.target.files&&y.target.files.length>0){const D=y.target.files[0],v=h.validateFile(D);if(!v.isValid){De.error({message:v.error||"File validation failed",code:"FILE_VALIDATION_ERROR",timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"ChatInput",severity:"warn"},{fileName:D.name,fileSize:D.size,fileType:D.type}),alert(v.error);return}n(D)}},b=async y=>{if(y.preventDefault(),(s.trim()||t)&&!e){const D=s.trim();l(""),r(D)}};return p.jsxs("form",{onSubmit:b,className:"relative",children:[p.jsx("input",{type:"file",ref:d,onChange:g,className:"hidden",accept:".pdf,.docx,.doc,.txt,.md"}),p.jsxs("div",{className:"flex flex-col text-left bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg p-2 shadow-sm dark:shadow-2xl",children:[p.jsxs("div",{className:"flex items-end",children:[p.jsx("button",{type:"button",onClick:()=>{var y;return(y=d.current)==null?void 0:y.click()},className:"p-2 rounded-md hover:bg-black/5 dark:hover:bg-white/5 mr-2",title:"Attach Knowledge Base file (PDF, DOCX, TXT, MD)",children:p.jsx(XR,{className:"w-5 h-5 text-light-text-tertiary dark:text-dark-text-tertiary"})}),p.jsx("textarea",{ref:u,value:s,onChange:y=>l(y.target.value),onKeyDown:y=>{y.key==="Enter"&&!y.shiftKey&&!e&&(y.preventDefault(),b(y))},rows:1,placeholder:e?"":i,className:"prompt-input w-full border-none outline-none bg-transparent p-2 text-base text-light-text-primary dark:text-dark-text-primary font-medium resize-none leading-normal max-h-48 overflow-y-auto",disabled:e}),p.jsx("button",{type:"submit",className:"bg-primary-accent text-text-on-accent border-none rounded-md p-3 cursor-pointer flex items-center justify-center transition-opacity self-end flex-shrink-0 hover:opacity-85 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!s.trim()&&!t||e,children:p.jsx(TD,{className:"w-5 h-5"})})]}),t&&p.jsxs("div",{className:"flex items-center gap-2 p-2 mt-2 ml-12 border-t border-light-border dark:border-dark-border",children:[p.jsx(Cd,{className:"w-4 h-4 text-light-text-tertiary"}),p.jsx("span",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary",children:t.name}),p.jsx("button",{type:"button",onClick:()=>n(null),className:"ml-auto p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:p.jsx(Ms,{className:"w-4 h-4 text-light-text-tertiary"})})]})]})]})},M$=({conversationMode:r,isProcessingRequest:e=!1})=>p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(xA,{className:"w-8 h-8 flex-shrink-0"}),p.jsxs("div",{className:"p-4 rounded-lg bg-light-bg-component dark:bg-dark-bg-component mt-1 border border-primary-accent/20",children:[p.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[p.jsxs("div",{className:"flex space-x-1",children:[p.jsx("div",{className:"w-2.5 h-2.5 bg-primary-accent rounded-full animate-bounce [animation-delay:-0.3s]"}),p.jsx("div",{className:"w-2.5 h-2.5 bg-primary-accent rounded-full animate-bounce [animation-delay:-0.15s]"}),p.jsx("div",{className:"w-2.5 h-2.5 bg-primary-accent rounded-full animate-bounce"})]}),p.jsx("div",{className:"w-8 h-1 bg-gradient-to-r from-primary-accent via-primary-accent/50 to-transparent rounded-full animate-pulse"})]}),p.jsx("p",{className:"text-sm font-medium text-primary-accent",children:e?"Artemo is processing your request...":r==="structured"?"Artemo is crafting your content...":"Artemo is thinking..."})]})]}),L$=()=>p.jsxs("div",{className:"flex h-screen animate-pulse",children:[p.jsxs("div",{className:"w-96 bg-light-bg-sidebar dark:bg-dark-bg-sidebar p-4 space-y-4 border-r border-light-border dark:border-dark-border",children:[p.jsx("div",{className:"h-8 w-3/4 bg-light-bg-component dark:bg-dark-bg-component rounded-md"}),p.jsx("div",{className:"h-20 w-full bg-light-bg-component dark:bg-dark-bg-component rounded-md"}),p.jsx("div",{className:"h-10 w-full bg-light-bg-component dark:bg-dark-bg-component rounded-md"}),p.jsx("div",{className:"h-10 w-full bg-light-bg-component dark:bg-dark-bg-component rounded-md"})]}),p.jsxs("div",{className:"flex-1 p-6 flex flex-col bg-light-bg-page dark:bg-dark-bg-page",children:[p.jsxs("div",{className:"flex-grow space-y-4",children:[p.jsx("div",{className:"h-16 w-3/4 bg-light-bg-component dark:bg-dark-bg-component rounded-md self-start"}),p.jsx("div",{className:"h-20 w-1/2 bg-light-bg-component dark:bg-dark-bg-component rounded-md self-end ml-auto"}),p.jsx("div",{className:"h-12 w-2/3 bg-light-bg-component dark:bg-dark-bg-component rounded-md self-start"})]}),p.jsx("div",{className:"h-12 w-full bg-light-bg-component dark:bg-dark-bg-component rounded-md mt-4"})]})]}),B$=()=>{var g;const{toolId:r}=hA(),e=Kr(),t=Ta(),{tools:n,loading:i,error:a}=tl(),{projects:s}=xp(),{openModal:l}=Ca();if(i)return p.jsx(L$,{});if(a)return p.jsx("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:p.jsxs("div",{className:"text-center py-20 text-red-600 dark:text-red-400",children:[p.jsx("h2",{className:"text-xl font-bold mb-4",children:"Error Loading Tool"}),p.jsx("p",{children:a})]})});const u=n.find(b=>b.id===r),d=(g=t.state)==null?void 0:g.existingChatSession;if(!u)return p.jsx("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:p.jsxs("div",{className:"text-center py-20",children:[p.jsx(Ko,{className:"w-16 h-16 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),p.jsx("h2",{className:"text-2xl font-bold text-light-text-primary dark:text-dark-text-primary mb-4",children:"Tool Not Found"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-6",children:"The tool you're looking for doesn't exist, is inactive, or has been deleted."}),p.jsx("button",{onClick:()=>e("/tools"),className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85",children:"Back to All Tools"})]})});const h=()=>{e(`/tools/${r}`,{replace:!0,state:null})};return p.jsx(I$,{tool:u,existingChatSession:d,onBack:()=>e("/"),projects:s,onNewProject:l,onStartNewConversation:h})},P$=({chatItem:r,onRename:e,onDelete:t,onRemoveFromProject:n})=>{const[i,a]=Q.useState(!1),s=Bn.useRef(null);return Bn.useEffect(()=>{const l=u=>{s.current&&!s.current.contains(u.target)&&a(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]),p.jsxs("div",{className:"relative",ref:s,children:[p.jsx("button",{onClick:l=>{l.stopPropagation(),l.preventDefault(),a(!i)},className:"p-1 rounded-full text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-light-bg-page dark:hover:bg-dark-bg-page opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx($1,{className:"w-4 h-4"})}),i&&p.jsxs("div",{className:"absolute right-0 top-full mt-1 w-40 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-md shadow-lg z-10 py-1",children:[p.jsxs("button",{onClick:l=>{l.stopPropagation(),e(),a(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[p.jsx(di,{className:"w-3.5 h-3.5"})," Rename"]}),p.jsxs("button",{onClick:l=>{l.stopPropagation(),n(),a(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[p.jsx(Gr,{className:"w-3.5 h-3.5"})," Remove from Project"]}),p.jsxs("button",{onClick:l=>{l.stopPropagation(),t(),a(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-red-600 dark:text-red-500 hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[p.jsx(Qa,{className:"w-3.5 h-3.5"})," Delete"]})]})]})},z$=({isOpen:r,onClose:e,projectId:t,project:n})=>{const{tools:i}=tl(),[a,s]=Q.useState(""),[l,u]=Q.useState(!1),[d,h]=Q.useState(null),[g,b]=Q.useState(""),[y,D]=Q.useState(0),[v,w]=Q.useState(!0),k=Pn.getInstance(),_=vu.getInstance(),A=Bn.useRef(null);Bn.useEffect(()=>{A.current&&(A.current.style.height="auto",A.current.style.height=`${A.current.scrollHeight}px`)},[a]);const N=()=>{if(sessionStorage.setItem("activeProjectId",t),n.clientProfileSnapshot){sessionStorage.setItem("activeClientProfile",JSON.stringify(n.clientProfileSnapshot));const{setActiveClientProfileId:I}=ht.getState();I(n.clientProfileSnapshot.id)}window.dispatchEvent(new CustomEvent("recommendedToolSelected",{detail:{tool:d,projectId:t}})),sessionStorage.setItem("selectedProjectId",t),e()},E=async I=>{if(!(!I.trim()||i.length===0)){u(!0),h(null),b(""),D(0);try{if(v){const F=await _.getOptimizedToolRecommendation(I);if(F.success&&F.data){const{recommendedTool:G,analysis:U,tokensSaved:W}=F.data;G?(h(G),b(U),D(W)):b(U)}else console.warn("Vector search failed in project modal, attempting legacy search:",F.error),w(!1),await T(I)}else await T(I)}catch(F){console.error("Failed to analyze prompt:",F),b("Unable to analyze your request at the moment. Please try selecting a tool manually from the categories below, or try again in a few minutes.")}finally{u(!1)}}},T=async I=>{try{const F=`You are an AI assistant that analyzes user requests and recommends the most appropriate copywriting tool from a list of available tools.

Available tools:
${i.map(U=>`- **${U.title}** (${U.category}): ${U.description}`).join(`
`)}

User request: "${I}"

Please analyze the user's request thoroughly and:
1. Identify the specific type of content they want to create
2. Consider the target audience, tone, and purpose implied in their request
3. Match their needs against both the tool titles AND detailed descriptions above
4. Recommend the MOST APPROPRIATE tool that best fits their specific requirements
5. Explain why this tool is the perfect match, referencing specific capabilities from the tool's description
6. Provide actionable insights about their content creation goal

Respond in this format:
RECOMMENDED_TOOL: [exact tool title from the list]
ANALYSIS: [detailed analysis explaining why this tool matches their needs, what specific capabilities make it ideal, and how it will help them achieve their content goals]`,G=await k.sendChatMessage("tool-recommendation",[{id:"1",sender:"user",text:F}]);if(G.success&&G.data){const U=G.data,W=U.match(/RECOMMENDED_TOOL:\s*(.+?)(?:\n|$)/),j=U.match(/ANALYSIS:\s*([\s\S]+)/);if(W&&j){const X=W[1].trim(),P=j[1].trim(),B=i.find(ee=>ee.title.toLowerCase()===X.toLowerCase()||ee.title.includes(X)||X.includes(ee.title));B?(h(B),b(P)):b(U)}else b(U)}else throw new Error(G.error||"AI service temporarily unavailable")}catch(F){console.error("Legacy search failed:",F),b("AI recommendation service is temporarily unavailable. Please browse our tool categories below to find the right tool for your needs, or try again in a few minutes.")}},R=()=>{a.trim()&&E(a.trim())},M=I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),R())};return r?p.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-50 flex items-center justify-center p-4",onClick:e,children:p.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-2xl max-h-[90vh] overflow-hidden",onClick:I=>I.stopPropagation(),children:[p.jsxs("div",{className:"p-6 border-b border-light-border dark:border-dark-border flex justify-between items-center",children:[p.jsx("h3",{className:"font-serif text-2xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"AI Tool Recommendation"}),p.jsx("button",{onClick:e,className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md transition-colors",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-4",children:"Tell me what you want to create and I'll recommend the perfect tool for this project."}),p.jsxs("div",{className:"flex flex-col sm:flex-row items-start text-left bg-light-bg-sidebar dark:bg-dark-bg-page border border-light-border dark:border-dark-border rounded-md p-1 sm:pl-4",children:[p.jsx("span",{className:"text-base sm:text-lg text-primary-accent font-medium pt-3 flex-shrink-0 px-3 sm:px-0",children:"I want to create a "}),p.jsx("textarea",{ref:A,value:a,onChange:I=>s(I.target.value),onKeyDown:M,rows:1,className:"prompt-input flex-grow border-none outline-none bg-transparent p-3 text-base sm:text-lg text-light-text-primary dark:text-dark-text-primary font-medium resize-none leading-normal max-h-60 w-full",placeholder:"persuasive email for a new product launch"}),p.jsx("button",{onClick:R,disabled:l||!a.trim(),className:"bg-primary-accent text-text-on-accent border-none rounded-sm m-1 p-2.5 cursor-pointer flex items-center justify-center transition-opacity self-end sm:self-end flex-shrink-0 hover:opacity-85 disabled:opacity-50 disabled:cursor-not-allowed",children:l?p.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-text-on-accent"}):p.jsx(Aa,{className:"w-5 h-5"})})]})]}),(l||d||g)&&p.jsx("div",{className:"bg-light-bg-sidebar dark:bg-dark-bg-page border border-light-border dark:border-dark-border rounded-lg p-6",children:l?p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-accent mx-auto mb-4"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Analyzing your request and finding the perfect tool..."})]}):p.jsxs("div",{children:[p.jsx("h4",{className:"font-serif text-lg font-bold text-light-text-primary dark:text-dark-text-primary mb-4",children:"AI Recommendation"}),d?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"bg-primary-accent/10 border border-primary-accent/20 rounded-lg p-4",children:[y>0&&p.jsxs("div",{className:"mb-3 text-xs text-green-600 dark:text-green-400 font-medium",children:["⚡ Optimized search saved ~",y," tokens"]}),p.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[p.jsx("div",{className:"w-10 h-10 bg-primary-accent/20 rounded-lg flex items-center justify-center",children:p.jsx(Aa,{className:"w-5 h-5 text-primary-accent"})}),p.jsxs("div",{children:[p.jsxs("h5",{className:"font-semibold text-light-text-primary dark:text-dark-text-primary",children:["Recommended: ",d.title]}),p.jsx("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary",children:d.category})]})]}),p.jsxs("button",{onClick:N,className:"w-full bg-primary-accent text-text-on-accent py-2 px-4 rounded-md hover:opacity-85 transition-opacity",children:["Use ",d.title]})]}),v&&y>0&&p.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsx("span",{className:"text-blue-800 dark:text-blue-200",children:"🎯 Vector search found relevant tools efficiently"}),p.jsx("button",{onClick:()=>w(!1),className:"text-blue-600 dark:text-blue-400 hover:underline text-xs",children:"Try legacy search"})]})}),!v&&p.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsx("span",{className:"text-yellow-800 dark:text-yellow-200",children:"⚠️ Using legacy search (higher token usage)"}),p.jsx("button",{onClick:()=>w(!0),className:"text-yellow-600 dark:text-yellow-400 hover:underline text-xs",children:"Switch to vector search"})]})})]}):g?p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:g}):null]})})]})]})}):null},W$=({clientProfile:r,projectColor:e})=>{const[t,n]=Q.useState(!1),[i,a]=Q.useState({x:0,y:0}),s=Bn.useRef(null),l=d=>{n(!0);const h=d.currentTarget.getBoundingClientRect();a({x:h.left+h.width/2,y:h.top-10})},u=()=>{n(!1)};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{ref:s,onMouseEnter:l,onMouseLeave:u,className:"inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium rounded-full border transition-all duration-200 hover:shadow-sm cursor-help",style:{borderColor:e,color:e,backgroundColor:"transparent"},children:[p.jsx(Ko,{className:"w-3 h-3"}),p.jsx("span",{children:r.name})]}),t&&p.jsxs("div",{className:"fixed z-[1000] bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg shadow-xl p-4 max-w-sm transform -translate-x-1/2 -translate-y-full transition-all duration-200",style:{left:i.x,top:i.y},children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("h5",{className:"font-semibold text-light-text-primary dark:text-dark-text-primary",children:r.name}),p.jsxs("div",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary space-y-1",children:[p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Audience:"})," ",r.audience]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Language:"})," ",r.language]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Tone:"})," ",r.tone]}),r.sample&&p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Sample:"}),' "',r.sample,'"']})]})]}),p.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-light-bg-component dark:border-t-dark-bg-component"})]})]})},H$=({project:r,onBack:e,onViewChatDetail:t,onStartNewChat:n})=>{const i=Sp(),a=Qr(),[s,l]=Q.useState([]),[u,d]=Q.useState(!0),[h,g]=Q.useState(null),[b,y]=Q.useState(!1),[D,v]=Q.useState(null),[w,k]=Q.useState(""),{user:_}=ht(),{updateChatSession:A,deleteChat:N}=wp(),E=Pn.getInstance();Q.useEffect(()=>{(async()=>{if(_){d(!0),g(null);try{const G=await E.getChatSessionsByProjectId(r.id,_.id);G.success&&G.data?l(G.data):G.error&&!G.error.includes("No data")?g(G.error):l([])}catch(G){console.error("Error fetching project chats:",G);const U=G instanceof Error?G.message:"Unknown error";!U.includes("Failed to fetch")&&!U.includes("TypeError")?g("Network error occurred"):l([])}finally{d(!1)}}})()},[r.id,_,E]);const T=async(F,G)=>{if(G.trim())try{await A(F,{title:G.trim()}),l(U=>U.map(W=>W.id===F?{...W,toolTitle:G.trim()}:W)),v(null),k(""),a.success(`Chat renamed to "${G.trim()}" successfully`,"Chat Renamed")}catch(U){console.error("Failed to rename chat:",U),a.error("Failed to rename chat. Please try again.")}},R=async F=>{const G=s.find(W=>W.id===F);if(!(!G||!await i.confirmDelete(G.toolTitle,"chat")))try{N(F),l(W=>W.filter(j=>j.id!==F)),a.success(`Chat "${G.toolTitle}" deleted successfully`,"Chat Deleted")}catch(W){console.error("Failed to delete chat:",W),a.error("Failed to delete chat. Please try again.")}},M=async F=>{const G=s.find(W=>W.id===F);if(!(!G||!await i.confirm({title:"Remove from Project",message:`Are you sure you want to remove "${G.toolTitle}" from this project?`,confirmText:"Remove",cancelText:"Cancel",variant:"warning"})))try{await A(F,{projectId:null}),l(W=>W.filter(j=>j.id!==F)),a.success(`Chat "${G.toolTitle}" removed from project successfully`,"Chat Removed")}catch(W){console.error("Failed to remove chat from project:",W),a.error("Failed to remove chat from project. Please try again.")}},I=F=>{v({id:F.id,name:F.toolTitle}),k(F.toolTitle)};return p.jsxs("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[p.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:[p.jsx(G1,{className:"w-4 h-4"}),"Back"]}),p.jsx("div",{className:"h-6 w-px bg-light-border dark:border-dark-border"}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-xl border-2",style:{borderColor:r.color},children:p.jsx(Gr,{className:"w-8 h-8",style:{color:r.color}})}),p.jsxs("div",{className:"flex-grow",children:[p.jsx("h2",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary mb-3",children:r.name}),r.clientProfileSnapshot&&p.jsx("div",{className:"mb-3",children:p.jsx(W$,{clientProfile:r.clientProfileSnapshot,projectColor:r.color})})]})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsxs("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:["Chat Sessions (",s.length,")"]}),p.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",children:[p.jsx(Aa,{className:"w-4 h-4"}),"Start New Tool"]})]}),u?p.jsx("div",{className:"flex items-center justify-center py-12",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-accent mx-auto mb-4"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading chats..."})]})}):h?p.jsx("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:p.jsxs("p",{children:["Error: ",h]})}):s.length>0?p.jsx("div",{className:"space-y-3",children:s.map(F=>{var G;return p.jsx("div",{className:"group relative w-full text-left p-4 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-md hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page transition-colors cursor-pointer",onClick:()=>t(F),children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(Sd,{className:"w-5 h-5 text-primary-accent flex-shrink-0 mt-0.5"}),p.jsxs("div",{className:"flex-grow min-w-0 pr-8",children:[p.jsx("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary truncate",children:F.toolTitle}),p.jsxs("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary truncate mt-1",children:['"',((G=F.messages.find(U=>U.sender==="user"))==null?void 0:G.text)||"No messages",'"']}),p.jsxs("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary mt-1",children:[new Date(F.timestamp).toLocaleDateString()," at ",new Date(F.timestamp).toLocaleTimeString()]})]}),p.jsx("div",{className:"absolute top-3 right-3",children:p.jsx(P$,{chatItem:F,onRename:()=>I(F),onDelete:()=>R(F.id),onRemoveFromProject:()=>M(F.id)})})]})},F.id)})}):p.jsxs("div",{className:"text-center py-12 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-lg border border-light-border dark:border-dark-border",children:[p.jsx(Sd,{className:"w-12 h-12 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary",children:"No chat sessions yet"}),p.jsx("p",{className:"text-light-text-tertiary dark:text-dark-text-tertiary mt-1",children:"Start using tools and associate them with this project to see chat sessions here."})]})]}),D&&p.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-[1001] flex items-center justify-center p-4",onClick:()=>v(null),children:p.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-md",onClick:F=>F.stopPropagation(),children:[p.jsxs("div",{className:"p-4 border-b border-light-border dark:border-dark-border flex justify-between items-center",children:[p.jsx("h3",{className:"font-serif text-lg font-bold text-light-text-primary dark:text-dark-text-primary",children:"Rename Chat"}),p.jsx("button",{onClick:()=>v(null),className:"text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("div",{className:"p-4",children:[p.jsx("label",{htmlFor:"rename-input",className:"block font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Chat Name"}),p.jsx("input",{id:"rename-input",type:"text",value:w,onChange:F=>k(F.target.value),className:"w-full p-2.5 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-sm text-light-text-primary dark:text-dark-text-primary focus:border-primary-accent focus:ring-2 focus:ring-primary-accent/20 outline-none",onKeyDown:F=>F.key==="Enter"&&T(D.id,w),autoFocus:!0})]}),p.jsxs("div",{className:"p-4 border-t border-light-border dark:border-dark-border flex justify-end gap-3",children:[p.jsx("button",{onClick:()=>v(null),className:"px-4 py-2 rounded-sm bg-light-bg-sidebar dark:bg-dark-bg-component border border-light-border dark:border-dark-border text-light-text-primary dark:text-dark-text-primary hover:opacity-85",children:"Cancel"}),p.jsx("button",{onClick:()=>T(D.id,w),className:"px-4 py-2 rounded-sm bg-primary-accent text-text-on-accent hover:opacity-85",children:"Save"})]})]})}),p.jsx(z$,{isOpen:b,onClose:()=>y(!1),projectId:r.id,project:r})]})},q$=()=>p.jsxs("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full animate-pulse",children:[p.jsx("div",{className:"flex items-center gap-4 mb-8",children:p.jsx("div",{className:"h-6 w-20 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"})}),p.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[p.jsx("div",{className:"w-16 h-16 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-xl"}),p.jsxs("div",{className:"flex-grow space-y-3",children:[p.jsx("div",{className:"h-8 w-1/2 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"}),p.jsx("div",{className:"h-5 w-1/4 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"})]})]}),p.jsx("div",{className:"h-px bg-light-border dark:border-dark-border mb-6"}),p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("div",{className:"h-7 w-1/3 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"}),p.jsx("div",{className:"h-10 w-36 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("div",{className:"h-20 w-full bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"}),p.jsx("div",{className:"h-20 w-full bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"}),p.jsx("div",{className:"h-20 w-full bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"})]})]}),V$=()=>{const{id:r}=hA(),e=Kr(),{projects:t,loading:n,error:i}=xp();if(n)return p.jsx(q$,{});if(i)return p.jsx("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:p.jsxs("div",{className:"text-center py-20 text-red-600 dark:text-red-400",children:[p.jsx("h2",{className:"text-xl font-bold mb-4",children:"Error Loading Project"}),p.jsx("p",{children:i})]})});const a=t.find(u=>u.id===r);if(!a)return p.jsx("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:p.jsxs("div",{className:"text-center py-20",children:[p.jsx(Gr,{className:"w-16 h-16 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),p.jsx("h2",{className:"text-2xl font-bold text-light-text-primary dark:text-dark-text-primary mb-4",children:"Project Not Found"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-6",children:"The project you're looking for doesn't exist or has been deleted."}),p.jsx("button",{onClick:()=>e("/projects"),className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85",children:"Back to All Projects"})]})});const s=u=>{e(`/chat/${u.id}`)},l=(u,d)=>{e(`/tools/${d}`,{state:{projectId:u}})};return p.jsx(H$,{project:a,onBack:()=>e("/projects"),onViewChatDetail:s,onStartNewChat:l})},X$=({onRename:r,onDelete:e})=>{const[t,n]=Q.useState(!1),i=Q.useRef(null);return Q.useEffect(()=>{const a=s=>{i.current&&!i.current.contains(s.target)&&n(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),p.jsxs("div",{className:"relative",ref:i,children:[p.jsx("button",{onClick:a=>{a.stopPropagation(),a.preventDefault(),n(!t)},className:"p-1 rounded-full text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:p.jsx($1,{className:"w-4 h-4"})}),t&&p.jsxs("div",{className:"absolute right-0 top-full mt-1 w-32 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-md shadow-lg z-10 py-1",children:[p.jsxs("button",{onClick:a=>{a.stopPropagation(),r(),n(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[p.jsx(di,{className:"w-3.5 h-3.5"})," Rename"]}),p.jsxs("button",{onClick:a=>{a.stopPropagation(),e(),n(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-red-600 dark:text-red-500 hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[p.jsx(Qa,{className:"w-3.5 h-3.5"})," Delete"]})]})]})},G$=({project:r,onOpenRenameModal:e,onDeleteProject:t,onViewProjectDetail:n})=>p.jsxs("div",{onClick:()=>n(r),className:"group relative bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border p-5 rounded-md no-underline flex flex-col gap-3 transition-all duration-200 hover:-translate-y-0.5 hover:shadow-lg dark:hover:shadow-2xl cursor-pointer",children:[p.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx(X$,{onRename:()=>e(r),onDelete:()=>t(r.id)})}),p.jsx("div",{className:"w-6 h-6 rounded-md flex items-center justify-center",style:{backgroundColor:r.color},children:p.jsx(Gr,{className:"w-4 h-4 text-white"})}),p.jsx("span",{className:"font-serif flex-grow font-bold text-light-text-primary dark:text-dark-text-primary text-lg pr-4",children:r.name}),p.jsx("div",{className:"mt-auto pt-3",children:p.jsx("div",{className:"inline-block w-3 h-3 rounded-full border border-white/20",style:{backgroundColor:r.color},title:"Project color"})})]}),$$=()=>p.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border p-5 rounded-md flex flex-col gap-3 animate-pulse",children:[p.jsx("div",{className:"w-6 h-6 rounded-md bg-light-bg-sidebar dark:bg-dark-bg-page"}),p.jsx("div",{className:"h-6 w-3/4 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md"}),p.jsx("div",{className:"mt-auto pt-3",children:p.jsx("div",{className:"w-3 h-3 rounded-full bg-light-bg-sidebar dark:bg-dark-bg-page"})})]}),Y$=()=>p.jsxs("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8 animate-pulse",children:[p.jsx("div",{className:"h-9 w-48 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"}),p.jsx("div",{className:"h-11 w-36 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"})]}),p.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-4",children:[...Array(6)].map((r,e)=>p.jsx($$,{},e))})]}),K$=({projects:r,loading:e,onNewProject:t,onUpdateProject:n,onDeleteProject:i,onViewProjectDetail:a})=>{const[s,l]=Q.useState(null),[u,d]=Q.useState("");Qr();const h=b=>{l(b),d(b.name)},g=async()=>{if(s&&u.trim())try{await n(s.id,{name:u.trim()}),l(null),d("")}catch{}};return e?p.jsx(Y$,{}):p.jsxs("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsx("h2",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"All Projects"}),p.jsxs("button",{onClick:t,className:"flex items-center justify-center gap-2 px-4 py-2 rounded-sm border-none text-base font-medium cursor-pointer bg-primary-accent text-text-on-accent hover:opacity-85 transition-opacity",children:[p.jsx(Ka,{className:"w-4 h-4"}),p.jsx("span",{children:"New Project"})]})]}),r.length>0?p.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-4",children:r.map(b=>p.jsx(G$,{project:b,onOpenRenameModal:h,onDeleteProject:i,onViewProjectDetail:a},b.id))}):p.jsxs("div",{className:"text-center py-20 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-lg border border-light-border dark:border-dark-border",children:[p.jsx(Gr,{className:"w-12 h-12 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary",children:"No projects yet"}),p.jsx("p",{className:"text-light-text-tertiary dark:text-dark-text-tertiary mt-1",children:'Click "New Project" to get started.'})]}),s&&p.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-[1001] flex items-center justify-center p-4",onClick:()=>l(null),children:p.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-md",onClick:b=>b.stopPropagation(),children:[p.jsxs("div",{className:"p-4 border-b border-light-border dark:border-dark-border flex justify-between items-center",children:[p.jsx("h3",{className:"font-serif text-lg font-bold text-light-text-primary dark:text-dark-text-primary",children:"Rename Project"}),p.jsx("button",{onClick:()=>l(null),className:"text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p.jsxs("div",{className:"p-4",children:[p.jsx("label",{htmlFor:"rename-input",className:"block font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Project Name"}),p.jsx("input",{id:"rename-input",type:"text",value:u,onChange:b=>d(b.target.value),className:"w-full p-2.5 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-sm text-light-text-primary dark:text-dark-text-primary focus:border-primary-accent focus:ring-2 focus:ring-primary-accent/20 outline-none",onKeyDown:b=>b.key==="Enter"&&g(),autoFocus:!0})]}),p.jsxs("div",{className:"p-4 border-t border-light-border dark:border-dark-border flex justify-end gap-3",children:[p.jsx("button",{onClick:()=>l(null),className:"px-4 py-2 rounded-sm bg-light-bg-sidebar dark:bg-dark-bg-component border border-light-border dark:border-dark-border text-light-text-primary dark:text-dark-text-primary hover:opacity-85",children:"Cancel"}),p.jsx("button",{onClick:g,className:"px-4 py-2 rounded-sm bg-primary-accent text-text-on-accent hover:opacity-85",children:"Save"})]})]})})]})},Q$=()=>{const r=Kr(),{projects:e,loading:t,deleteProject:n,updateProject:i}=xp(),{openModal:a}=Ca(),s=u=>{r(`/projects/${u.id}`)},l=()=>{a()};return p.jsx(K$,{projects:e,loading:t,onNewProject:l,onUpdateProject:i,onDeleteProject:n,onViewProjectDetail:s})},Z$=({chatItem:r,onBack:e,onResume:t})=>{const[n,i]=Bn.useState(!1),[a,s]=Bn.useState(""),l=u=>{const d=D1(u);s(h=>{const g=h.trim()?`

`:"";return h+g+d}),i(!0)};return p.jsxs("div",{className:"h-full flex flex-col relative bg-light-bg-page dark:bg-[#212121]",children:[p.jsxs("button",{onClick:()=>i(!0),className:"fixed top-1/2 right-0 -translate-y-1/2 bg-primary-accent text-text-on-accent px-3 py-6 rounded-l-lg shadow-lg hover:opacity-85 transition-all duration-200 z-50 flex flex-col items-center gap-2 text-sm font-medium",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:[p.jsx("span",{className:"text-lg",children:"✍️"}),p.jsx("span",{children:"Editor"})]}),p.jsxs("header",{className:"flex-shrink-0 flex items-center gap-4 p-4 border-b border-light-border dark:border-gray-600 bg-light-bg-component/90 dark:bg-[rgba(33,33,33,0.9)] backdrop-blur-sm sticky top-0 z-10",children:[p.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-sm font-medium text-light-text-secondary dark:text-gray-300 hover:text-light-text-primary dark:hover:text-white",children:[p.jsx(G1,{className:"w-4 h-4"}),"Back"]}),p.jsx("div",{className:"h-6 w-px bg-light-border dark:bg-gray-600"}),p.jsxs("div",{className:"flex-grow",children:[p.jsx("h2",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-white",children:r.toolTitle}),p.jsxs("p",{className:"text-sm text-light-text-tertiary dark:text-gray-400",children:[new Date(r.timestamp).toLocaleDateString()," at ",new Date(r.timestamp).toLocaleTimeString()]})]}),p.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity font-medium",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Continue Conversation"]})]}),p.jsx("div",{className:"flex-grow overflow-y-auto",children:p.jsx("div",{className:"max-w-3xl mx-auto p-4 md:p-6 space-y-8",children:r.messages.length>0?r.messages.map(u=>p.jsx("div",{className:"mb-8 last:mb-4",children:p.jsx(sI,{message:u,onAddToEditor:l})},u.id)):p.jsx("div",{className:"text-center py-12 text-light-text-tertiary dark:text-dark-text-tertiary",children:p.jsx("p",{children:"No messages found in this conversation."})})})}),p.jsx(oI,{isOpen:n,onClose:()=>i(!1),content:a,onContentChange:s})]})},J$=()=>{const{id:r}=hA(),e=Kr(),t=Qr(),{chatHistory:n}=wp(),{tools:i}=tl(),a=n.find(l=>l.id===r);if(!a)return p.jsx("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:p.jsxs("div",{className:"text-center py-20",children:[p.jsx("h2",{className:"text-xl font-bold text-light-text-primary dark:text-dark-text-primary mb-4",children:"Chat Not Found"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-6",children:"The chat session you're looking for doesn't exist or has been deleted."}),p.jsx("button",{onClick:()=>e("/history"),className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85",children:"Back to History"})]})});const s=()=>{const l=i.find(u=>u.id===a.toolId);if(!l){t.error(`The tool "${a.toolTitle}" is no longer available. It may have been deactivated or removed.`,"Tool Not Available");return}e(`/tools/${l.id}`,{state:{existingChatSession:a}})};return p.jsx(Z$,{chatItem:a,onBack:()=>e("/history"),onResume:s})},eY=()=>p.jsxs("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full animate-pulse",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsx("div",{className:"h-9 w-48 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"}),p.jsx("div",{className:"h-9 w-32 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"})]}),p.jsx("div",{className:"space-y-4",children:[...Array(3)].map((r,e)=>p.jsxs("div",{className:"p-5 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg",children:[p.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[p.jsx("div",{className:"w-6 h-6 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md flex-shrink-0 mt-1"}),p.jsxs("div",{className:"flex-grow min-w-0 space-y-2",children:[p.jsx("div",{className:"h-6 w-1/2 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md"}),p.jsx("div",{className:"h-4 w-full bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md"}),p.jsx("div",{className:"h-4 w-3/4 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md"})]})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"h-10 w-28 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md"}),p.jsx("div",{className:"h-10 w-28 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md"})]}),p.jsx("div",{className:"h-8 w-8 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md"})]})]},e))})]}),tY=({onViewChatDetail:r,onResumeChatSession:e})=>{const{chatHistory:t,loading:n,error:i,deleteChat:a,clearHistory:s}=wp();return n?p.jsx(eY,{}):i?p.jsx("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:p.jsx("div",{className:"flex items-center justify-center py-20",children:p.jsxs("div",{className:"text-center",children:[p.jsxs("p",{className:"text-red-600 dark:text-red-400 mb-4",children:["Error loading history: ",i]}),p.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85",children:"Retry"})]})})}):p.jsxs("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(t1,{className:"w-6 h-6 text-primary-accent"}),p.jsx("h2",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Chat History"})]}),t.length>0&&p.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors",children:"Clear All History"})]}),t.length>0?p.jsx("div",{className:"space-y-4",children:t.map(l=>{var u;return p.jsxs("div",{className:"p-5 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg",children:[p.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[p.jsx(Sd,{className:"w-6 h-6 text-primary-accent flex-shrink-0 mt-1"}),p.jsxs("div",{className:"flex-grow min-w-0",children:[p.jsx("h3",{className:"font-serif text-lg font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:l.toolTitle}),p.jsxs("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-2 line-clamp-2",children:['"',((u=l.messages.find(d=>d.sender==="user"))==null?void 0:u.text)||"No messages",'"']}),p.jsxs("div",{className:"flex items-center gap-4 text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:[p.jsx("span",{children:new Date(l.timestamp).toLocaleDateString()}),p.jsxs("span",{children:[l.messages.length," messages"]}),l.projectName&&p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(Gr,{className:"w-3 h-3"}),l.projectName]})]})]})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("button",{onClick:()=>e(l),className:"flex items-center gap-2 px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity font-medium",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Continue"]}),p.jsxs("button",{onClick:()=>r(l),className:"flex items-center gap-2 px-4 py-2 bg-light-bg-sidebar dark:bg-dark-bg-component border border-light-border dark:border-dark-border text-light-text-primary dark:text-dark-text-primary rounded-md hover:bg-light-bg-component dark:hover:bg-dark-bg-page transition-colors",children:[p.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Details"]})]}),p.jsx("button",{onClick:()=>a(l.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors","aria-label":"Delete chat",children:p.jsx(Qa,{className:"w-5 h-5"})})]})]},l.id)})}):p.jsxs("div",{className:"text-center py-20 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-lg border border-light-border dark:border-dark-border",children:[p.jsx(t1,{className:"w-12 h-12 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary",children:"No chat history yet"}),p.jsx("p",{className:"text-light-text-tertiary dark:text-dark-text-tertiary mt-1",children:"Start conversations with AI tools to see your history here."})]})]})},nY=()=>{const r=Kr(),e=Qr(),{tools:t}=tl(),n=s=>{r(`/chat/${s.id}`)},i=s=>{const l=t.find(u=>u.id===s.toolId);if(!l){e.error(`The tool "${s.toolTitle}" is no longer available. It may have been deactivated or removed.`,"Tool Not Available");return}r(`/tools/${l.id}`,{state:{existingChatSession:s}})},a=()=>{};return p.jsx(tY,{onViewChatDetail:n,onClearHistory:a,onResumeChatSession:i})},rY=()=>{const r=Sp(),e=Qr(),{profile:t,saveClientProfile:n,deleteClientProfile:i,setDefaultClientProfile:a,getClientProfiles:s,getDefaultClientProfile:l}=ht(),[u,d]=Q.useState(""),[h,g]=Q.useState(!1),[b,y]=Q.useState(null),[D,v]=Q.useState(!1),[w,k]=Q.useState({name:"",audience:"",language:"English",tone:"",sample:""}),_=s(),A=l(),N=Q.useMemo(()=>{if(!u.trim())return _;const U=u.toLowerCase();return _.filter(W=>W.name.toLowerCase().includes(U)||W.audience.toLowerCase().includes(U)||W.tone.toLowerCase().includes(U)||W.language.toLowerCase().includes(U))},[_,u]),E=()=>{y(null),k({name:"",audience:"",language:"English",tone:"",sample:""}),g(!0)},T=U=>{y(U),k({name:U.name,audience:U.audience,language:U.language,tone:U.tone,sample:U.sample}),g(!0)},R=()=>{g(!1),y(null),k({name:"",audience:"",language:"English",tone:"",sample:""})},M=async()=>{if(!w.name.trim()||!w.audience.trim()||!w.language.trim()||!w.tone.trim()){e.error("Please fill in all required fields");return}v(!0);try{const U={id:(b==null?void 0:b.id)||crypto.randomUUID(),name:w.name.trim(),audience:w.audience.trim(),language:w.language.trim(),tone:w.tone.trim(),sample:w.sample.trim()};await n(U),e.success(`Client profile "${U.name}" ${b?"updated":"created"} successfully`,b?"Profile Updated":"Profile Created"),R()}catch(U){console.error("Failed to save client profile:",U),e.error("Failed to save client profile. Please try again.")}finally{v(!1)}},I=async U=>{const W=_.find(X=>X.id===U);if(!(!W||!await r.confirmDelete(W.name,"client profile")))try{await i(U),e.success(`Client profile "${W.name}" deleted successfully`,"Profile Deleted")}catch(X){console.error("Failed to delete client profile:",X),e.error("Failed to delete client profile. Please try again.")}},F=async U=>{const W=_.find(j=>j.id===U);if(W)try{await a(U),e.success(`"${W.name}" set as default client profile`,"Default Updated")}catch(j){console.error("Failed to set default client profile:",j),e.error("Failed to update default profile. Please try again.")}},G=async()=>{try{await a(null),e.success("Default client profile cleared","Default Cleared")}catch(U){console.error("Failed to clear default client profile:",U),e.error("Failed to clear default profile. Please try again.")}};return p.jsxs("div",{className:"p-4 lg:p-6 max-w-7xl mx-auto w-full relative",children:[h&&p.jsx("div",{className:"fixed inset-0 bg-black/20 dark:bg-black/40 backdrop-blur-sm z-40 transition-opacity duration-300",onClick:R}),p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-primary-accent/20 to-primary-accent/10 rounded-xl border border-primary-accent/20",children:p.jsx(Ko,{className:"w-6 h-6 text-primary-accent"})}),p.jsxs("div",{children:[p.jsx("h2",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Profiles"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Manage different profiles to personalize AI responses for your projects"})]})]}),p.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-6 py-3 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity font-medium shadow-sm",children:[p.jsx(Ka,{className:"w-5 h-5"}),"Create New Profile"]})]}),p.jsx("div",{className:"mb-6",children:p.jsxs("div",{className:"relative max-w-md",children:[p.jsx(Aa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-light-text-tertiary dark:text-dark-text-tertiary"}),p.jsx("input",{type:"text",value:u,onChange:U=>d(U.target.value),placeholder:"Search profiles...",className:"w-full pl-10 pr-4 py-3 text-sm border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none"})]})}),N.length>0?p.jsx("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg overflow-hidden shadow-sm",children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full",children:[p.jsx("thead",{className:"bg-light-bg-sidebar dark:bg-dark-bg-sidebar",children:p.jsxs("tr",{children:[p.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Client Name"}),p.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Target Audience"}),p.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Language"}),p.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Tone"}),p.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Actions"})]})}),p.jsx("tbody",{children:N.map(U=>p.jsxs("tr",{className:"border-t border-light-border dark:border-dark-border hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page transition-colors",children:[p.jsx("td",{className:"p-4",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 bg-primary-accent/10 rounded-lg flex items-center justify-center flex-shrink-0",children:p.jsx(Ko,{className:"w-5 h-5 text-primary-accent"})}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"font-semibold text-light-text-primary dark:text-dark-text-primary",children:U.name}),(A==null?void 0:A.id)===U.id&&p.jsx(co,{className:"w-4 h-4 text-yellow-500",isFilled:!0})]})]})}),p.jsx("td",{className:"p-4",children:p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary line-clamp-2 max-w-xs",children:U.audience})}),p.jsx("td",{className:"p-4",children:p.jsx("span",{className:"px-3 py-1 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-full text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary",children:U.language})}),p.jsx("td",{className:"p-4",children:p.jsx("span",{className:"px-3 py-1 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-full text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary",children:U.tone})}),p.jsx("td",{className:"p-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[(A==null?void 0:A.id)!==U.id&&p.jsx("button",{onClick:()=>F(U.id),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-yellow-500 hover:bg-light-bg-page dark:hover:bg-dark-bg-component rounded-md transition-colors",title:"Set as default",children:p.jsx(co,{className:"w-4 h-4"})}),(A==null?void 0:A.id)===U.id&&p.jsx("button",{onClick:G,className:"p-2 text-yellow-500 hover:text-light-text-tertiary dark:hover:text-dark-text-tertiary hover:bg-light-bg-page dark:hover:bg-dark-bg-component rounded-md transition-colors",title:"Clear default",children:p.jsx(co,{className:"w-4 h-4",isFilled:!0})}),p.jsx("button",{onClick:()=>T(U),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-primary-accent hover:bg-light-bg-page dark:hover:bg-dark-bg-component rounded-md transition-colors",title:"Edit profile",children:p.jsx(di,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>I(U.id),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-red-500 hover:bg-light-bg-page dark:hover:bg-dark-bg-component rounded-md transition-colors",title:"Delete profile",children:p.jsx(Qa,{className:"w-4 h-4"})})]})})]},U.id))})]})})}):u.trim()?p.jsxs("div",{className:"text-center py-20 bg-light-bg-component dark:bg-dark-bg-component rounded-lg border border-light-border dark:border-dark-border",children:[p.jsx(Aa,{className:"w-12 h-12 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary",children:"No profiles found"}),p.jsxs("p",{className:"text-light-text-tertiary dark:text-dark-text-tertiary mt-1",children:['No profiles match "',u,'". Try different keywords.']})]}):p.jsxs("div",{className:"text-center py-20 bg-light-bg-component dark:bg-dark-bg-component rounded-lg border border-light-border dark:border-dark-border",children:[p.jsx("div",{className:"flex items-center justify-center w-24 h-24 bg-gradient-to-br from-primary-accent/20 to-primary-accent/10 rounded-2xl border border-primary-accent/20 mx-auto mb-6",children:p.jsx(Ko,{className:"w-12 h-12 text-primary-accent"})}),p.jsx("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary mb-3",children:"No profiles yet"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-6 max-w-md mx-auto leading-relaxed",children:"Create a profile to personalize AI responses for your target audience. Each profile helps AI understand unique voice and requirements."}),p.jsx("button",{onClick:E,className:"px-6 py-3 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity font-medium",children:"Create Your First Profile"})]}),p.jsxs("div",{className:`fixed top-0 right-0 h-full w-full max-w-2xl bg-light-bg-component dark:bg-dark-bg-component border-l border-light-border dark:border-dark-border shadow-2xl z-50 flex flex-col transition-transform duration-300 ease-in-out ${h?"translate-x-0":"translate-x-full"}`,children:[p.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-light-border dark:border-dark-border bg-light-bg-sidebar dark:bg-dark-bg-sidebar",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 bg-primary-accent/10 rounded-lg flex items-center justify-center",children:p.jsx(Ko,{className:"w-5 h-5 text-primary-accent"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:b?"Edit Profile":"Create New Profile"}),p.jsx("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary",children:b?"Update the profile information below":"Fill in the details to create a new client profile"})]})]}),p.jsx("button",{onClick:R,className:"p-2 rounded-md text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-light-bg-component dark:hover:bg-dark-bg-component transition-colors",children:p.jsx(Ms,{className:"w-6 h-6"})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Profile Name *"}),p.jsx("input",{type:"text",value:w.name,onChange:U=>k(W=>({...W,name:U.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"e.g., Acme Corp, John Smith, Personal Brand",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Language *"}),p.jsxs("select",{value:w.language,onChange:U=>k(W=>({...W,language:U.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",required:!0,children:[p.jsx("option",{value:"",children:"Select language..."}),p.jsx("option",{value:"English",children:"English"}),p.jsx("option",{value:"Spanish",children:"Spanish"}),p.jsx("option",{value:"French",children:"French"}),p.jsx("option",{value:"German",children:"German"}),p.jsx("option",{value:"Italian",children:"Italian"}),p.jsx("option",{value:"Portuguese",children:"Portuguese"}),p.jsx("option",{value:"Dutch",children:"Dutch"}),p.jsx("option",{value:"Japanese",children:"Japanese"}),p.jsx("option",{value:"Chinese",children:"Chinese"}),p.jsx("option",{value:"Korean",children:"Korean"})]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Target Audience *"}),p.jsx("textarea",{value:w.audience,onChange:U=>k(W=>({...W,audience:U.target.value})),rows:3,className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none resize-vertical",placeholder:"e.g., Small business owners aged 25-45 who struggle with digital marketing",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Tone & Voice *"}),p.jsx("input",{type:"text",value:w.tone,onChange:U=>k(W=>({...W,tone:U.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"e.g., Professional, Casual, Witty, Authoritative, Friendly",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Writing Sample"}),p.jsx("textarea",{value:w.sample,onChange:U=>k(W=>({...W,sample:U.target.value})),rows:5,className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none resize-vertical",placeholder:"Paste a short sample of the client's preferred writing style to help AI match their voice..."}),p.jsx("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary mt-2",children:"Optional: Provide a sample to help AI match the client's writing style and preferences"})]}),b&&(A==null?void 0:A.id)===b.id&&p.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(co,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400",isFilled:!0}),p.jsx("span",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"This is your default profile"})]}),p.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1",children:"This profile will be automatically selected for new projects and AI conversations."})]})]})}),p.jsx("div",{className:"p-6 border-t border-light-border dark:border-dark-border bg-light-bg-sidebar dark:bg-dark-bg-sidebar",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[b&&(A==null?void 0:A.id)!==b.id&&p.jsxs("button",{onClick:()=>F(b.id),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-primary-accent border border-primary-accent rounded-md hover:bg-primary-accent/10 transition-colors",children:[p.jsx(co,{className:"w-4 h-4"}),"Set as Default"]}),b&&(A==null?void 0:A.id)===b.id&&p.jsxs("button",{onClick:G,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-light-text-tertiary dark:text-dark-text-tertiary border border-light-border dark:border-dark-border rounded-md hover:bg-light-bg-page dark:hover:bg-dark-bg-component transition-colors",children:[p.jsx(co,{className:"w-4 h-4"}),"Clear Default"]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("button",{onClick:R,disabled:D,className:"px-6 py-2 text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary disabled:opacity-50 transition-colors",children:"Cancel"}),p.jsxs("button",{onClick:M,disabled:D||!w.name.trim()||!w.audience.trim()||!w.language.trim()||!w.tone.trim(),className:"px-8 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 font-medium",children:[D&&p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-text-on-accent"}),D?"Saving...":b?"Save Changes":"Create Profile"]})]})]})})]})]})},iY=()=>p.jsx(rY,{}),aY=({onBack:r})=>{const e=Qr(),{profile:t,updateProfile:n}=ht(),[i,a]=Q.useState("profile"),[s,l]=Q.useState(!1),[u,d]=Q.useState({fullName:(t==null?void 0:t.full_name)||"",organization:(t==null?void 0:t.organization)||""}),[h,g]=Q.useState({emailUpdates:!0,toolRecommendations:!0,weeklyDigest:!1,marketingEmails:!1}),[b,y]=Q.useState({profileVisibility:"private",shareUsageData:!1,allowAnalytics:!0});wa.getInstance();const D=async()=>{l(!0);try{n({full_name:u.fullName,organization:u.organization}),e.success("Profile updated successfully!","Profile Saved")}catch{e.error("Failed to update profile. Please try again.")}finally{l(!1)}},v=async()=>{l(!0);try{n({preferences:{...t==null?void 0:t.preferences,notifications:e}}),e.success("Notification preferences saved!","Preferences Updated")}catch{e.error("Failed to save preferences. Please try again.")}finally{l(!1)}},w=async()=>{l(!0);try{n({preferences:{...t==null?void 0:t.preferences,privacy:b}}),e.success("Privacy settings updated!","Privacy Updated")}catch{e.error("Failed to update privacy settings. Please try again.")}finally{l(!1)}},k=[{id:"profile",label:"Profile",icon:p.jsx(s9,{className:"w-4 h-4"})},{id:"notifications",label:"Notifications",icon:p.jsx(yA,{className:"w-4 h-4"})},{id:"privacy",label:"Privacy",icon:p.jsx($R,{className:"w-4 h-4"})}];return p.jsxs("div",{className:"p-4 lg:p-6 max-w-4xl mx-auto w-full",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[p.jsxs("button",{onClick:r,className:"flex items-center gap-2 text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:[p.jsx(G1,{className:"w-4 h-4"}),"Back"]}),p.jsx("div",{className:"h-6 w-px bg-light-border dark:border-dark-border"}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Bc,{className:"w-6 h-6 text-primary-accent"}),p.jsx("h2",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Settings"})]})]}),p.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[p.jsx("div",{className:"lg:w-64 flex-shrink-0",children:p.jsx("nav",{className:"space-y-1",children:k.map(_=>p.jsxs("button",{onClick:()=>a(_.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-md text-sm font-medium transition-colors ${i===_.id?"bg-primary-accent text-text-on-accent":"text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-component dark:hover:bg-dark-bg-component hover:text-light-text-primary dark:hover:text-dark-text-primary"}`,children:[_.icon,_.label]},_.id))})}),p.jsx("div",{className:"flex-1",children:p.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg p-6",children:[i==="profile"&&p.jsx("div",{className:"space-y-6",children:p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary mb-4",children:"Profile Information"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Full Name"}),p.jsx("input",{type:"text",value:u.fullName,onChange:_=>d(A=>({...A,fullName:_.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Enter your full name"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Organization"}),p.jsx("input",{type:"text",value:u.organization,onChange:_=>d(A=>({...A,organization:_.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Enter your organization (optional)"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Email"}),p.jsx("input",{type:"email",value:(t==null?void 0:t.id)||"Not available",disabled:!0,className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-sidebar dark:bg-dark-bg-sidebar text-light-text-tertiary dark:text-dark-text-tertiary"}),p.jsx("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary mt-1",children:"Email cannot be changed. Contact support if you need to update your email."})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Role"}),p.jsx("input",{type:"text",value:(t==null?void 0:t.role)==="admin"?"Administrator":"User",disabled:!0,className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-sidebar dark:bg-dark-bg-sidebar text-light-text-tertiary dark:text-dark-text-tertiary"})]})]}),p.jsx("div",{className:"flex justify-end mt-6",children:p.jsxs("button",{onClick:D,disabled:s,className:"px-6 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s&&p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-text-on-accent"}),s?"Saving...":"Save Changes"]})})]})}),i==="notifications"&&p.jsx("div",{className:"space-y-6",children:p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary mb-4",children:"Notification Preferences"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between p-4 border border-light-border dark:border-dark-border rounded-md",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:"Email Updates"}),p.jsx("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:"Receive important updates about your account and new features"})]}),p.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:h.emailUpdates,onChange:_=>g(A=>({...A,emailUpdates:_.target.checked})),className:"sr-only peer"}),p.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-accent/20 dark:peer-focus:ring-primary-accent/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-accent"})]})]}),p.jsxs("div",{className:"flex items-center justify-between p-4 border border-light-border dark:border-dark-border rounded-md",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:"Tool Recommendations"}),p.jsx("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:"Get personalized tool suggestions based on your usage"})]}),p.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:h.toolRecommendations,onChange:_=>g(A=>({...A,toolRecommendations:_.target.checked})),className:"sr-only peer"}),p.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-accent/20 dark:peer-focus:ring-primary-accent/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-accent"})]})]})]}),p.jsx("div",{className:"flex justify-end mt-6",children:p.jsxs("button",{onClick:v,disabled:s,className:"px-6 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s&&p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-text-on-accent"}),s?"Saving...":"Save Preferences"]})})]})}),i==="privacy"&&p.jsx("div",{className:"space-y-6",children:p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary mb-4",children:"Privacy & Data"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between p-4 border border-light-border dark:border-dark-border rounded-md",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:"Share Usage Data"}),p.jsx("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:"Help improve Artemo by sharing anonymous usage statistics"})]}),p.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:b.shareUsageData,onChange:_=>y(A=>({...A,shareUsageData:_.target.checked})),className:"sr-only peer"}),p.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-accent/20 dark:peer-focus:ring-primary-accent/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-accent"})]})]}),p.jsxs("div",{className:"flex items-center justify-between p-4 border border-light-border dark:border-dark-border rounded-md",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:"Analytics & Tracking"}),p.jsx("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:"Allow analytics to help us improve your experience"})]}),p.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:b.allowAnalytics,onChange:_=>y(A=>({...A,allowAnalytics:_.target.checked})),className:"sr-only peer"}),p.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-accent/20 dark:peer-focus:ring-primary-accent/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-accent"})]})]})]}),p.jsx("div",{className:"flex justify-end mt-6",children:p.jsxs("button",{onClick:w,disabled:s,className:"px-6 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s&&p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-text-on-accent"}),s?"Saving...":"Save Settings"]})})]})})]})})]})]})},sY=()=>{const r=Kr();return p.jsx(aY,{onBack:()=>r("/")})},oY=({data:r,className:e="w-full h-8",color:t="stroke-primary-accent",height:n=32})=>{if(!r||r.length===0)return null;const i=Math.max(...r),a=Math.min(...r),s=i-a||1,l=r.map((u,d)=>{const h=d/(r.length-1)*100,g=100-(u-a)/s*100;return`${h},${g}`}).join(" ");return p.jsx("svg",{className:e,viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{height:n},children:p.jsx("polyline",{fill:"none",stroke:"currentColor",strokeWidth:"3",points:l,className:t})})},Uh=({title:r,value:e,icon:t,iconColor:n,trend:i,trendColor:a="text-primary-accent",subtitle:s,onClick:l,alertLevel:u="normal"})=>{const d=u==="critical"?"border-red-500":u==="warning"?"border-yellow-500":"border-light-border dark:border-dark-border";return p.jsxs("div",{className:`bg-light-bg-component dark:bg-dark-bg-component border-2 ${d} rounded-lg p-6 transition-all duration-200 ${l?"cursor-pointer hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page hover:shadow-lg":""}`,onClick:l,children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{className:"flex-grow",children:[p.jsx("p",{className:"text-sm font-medium text-light-text-tertiary dark:text-dark-text-tertiary mb-1",children:r}),p.jsx("p",{className:"text-3xl font-bold text-light-text-primary dark:text-dark-text-primary",children:e}),s&&p.jsx("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary mt-2 leading-relaxed",children:s})]}),p.jsx(t,{className:`w-10 h-10 ${n} flex-shrink-0`})]}),i&&i.length>0&&p.jsx("div",{className:"mt-3",children:p.jsx(oY,{data:i,color:a,height:24})})]})},lY=({alerts:r})=>{if(!r||r.length===0)return null;const e=r.filter(n=>n.type==="error"),t=r.filter(n=>n.type==="warning");return p.jsxs("div",{className:"mb-6 space-y-2",children:[e.map(n=>p.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-r-lg shadow-sm",children:[p.jsx(dm,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0"}),p.jsxs("div",{className:"flex-grow",children:[p.jsx("p",{className:"font-semibold text-red-800 dark:text-red-200",children:n.message}),p.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:new Date(n.timestamp).toLocaleString()})]}),p.jsx("button",{className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200",children:p.jsx("span",{className:"text-xs font-medium",children:"INVESTIGATE"})})]},n.id)),t.map(n=>p.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-500 rounded-r-lg shadow-sm",children:[p.jsx(dm,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0"}),p.jsxs("div",{className:"flex-grow",children:[p.jsx("p",{className:"font-semibold text-yellow-800 dark:text-yellow-200",children:n.message}),p.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:new Date(n.timestamp).toLocaleString()})]}),p.jsx("button",{className:"text-yellow-600 dark:text-yellow-400 hover:text-yellow-800 dark:hover:text-yellow-200",children:p.jsx("span",{className:"text-xs font-medium",children:"REVIEW"})})]},n.id))]})},cY=({title:r,icon:e,children:t,defaultExpanded:n=!1,onToggle:i})=>{const[a,s]=Q.useState(n),l=()=>{const u=!a;s(u),i&&i(u)};return p.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg overflow-hidden shadow-sm",children:[p.jsxs("button",{onClick:l,className:"w-full p-4 flex items-center justify-between hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page transition-colors",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[e,p.jsx("h3",{className:"font-serif text-lg font-bold text-light-text-primary dark:text-dark-text-primary",children:r})]}),p.jsx(iy,{className:`w-5 h-5 text-light-text-tertiary dark:text-dark-text-tertiary transition-transform duration-200 ${a?"rotate-180":""}`})]}),a&&p.jsx("div",{className:"border-t border-light-border dark:border-dark-border",children:t})]})},uY=()=>{var j;const[r,e]=Q.useState("24h"),[t,n]=Q.useState(new Date),[i,a]=Q.useState(!0),[s,l]=Q.useState(null),[u,d]=Q.useState(!0),[h,g]=Q.useState({aiGenerations24h:0,dailyActiveUsers:0,newSignups24h:0,aiSuccessRate:0,totalUsers:0,activeTools:0,totalCategories:0}),[b,y]=Q.useState({hourlyPattern:[],totalTokensUsed:0,costEstimate:0,fallbackRate:0}),[D,v]=Q.useState({dauTrend:[],retention7day:0,signupSources:[]}),[w,k]=Q.useState({aiSuccessRateTrend:[],criticalAlerts:[],modelFailures:[]}),[_,A]=Q.useState({toolActions:[],adminLogins:[],systemChanges:[]}),[N,E]=Q.useState(new Set),T=Pn.getInstance(),R=async()=>{try{const X=await T.getDashboardAnalytics(r);X.success&&X.data&&g({aiGenerations24h:X.data.ai_generations_24h||0,dailyActiveUsers:X.data.daily_active_users||0,newSignups24h:X.data.new_signups_24h||0,aiSuccessRate:X.data.ai_success_rate||100,totalUsers:X.data.total_users||0,activeTools:X.data.active_tools||0,totalCategories:X.data.total_categories||0})}catch(X){console.error("Failed to fetch dashboard metrics:",X)}},M=async()=>{if(!N.has("ai-usage"))try{const X=await T.getAIUsageMetrics(r);X.success&&X.data&&(y({hourlyPattern:X.data.hourly_pattern||[],totalTokensUsed:X.data.total_tokens_used||0,costEstimate:X.data.cost_estimate||0,fallbackRate:X.data.fallback_rate||0}),E(P=>new Set([...P,"ai-usage"])))}catch(X){console.error("Failed to fetch AI usage metrics:",X)}},I=async()=>{if(!N.has("user-engagement"))try{const X=await T.getUserEngagementMetrics(r);X.success&&X.data&&(v({dauTrend:X.data.dau_trend||[],retention7day:X.data.retention_7day||0,signupSources:X.data.signup_sources||[]}),E(P=>new Set([...P,"user-engagement"])))}catch(X){console.error("Failed to fetch user engagement metrics:",X)}},F=async()=>{if(!N.has("system-health"))try{const X=await T.getSystemHealthMetrics();X.success&&X.data&&(k({aiSuccessRateTrend:X.data.ai_success_rate_trend||[],criticalAlerts:X.data.critical_alerts||[],modelFailures:X.data.model_failures||[]}),E(P=>new Set([...P,"system-health"])))}catch(X){console.error("Failed to fetch system health metrics:",X)}},G=async()=>{if(!N.has("admin-activity"))try{const X=await T.getAdminActivityLog(20);X.success&&X.data&&(A({toolActions:X.data.tool_actions||[],adminLogins:X.data.admin_logins||[],systemChanges:X.data.system_changes||[]}),E(P=>new Set([...P,"admin-activity"])))}catch(X){console.error("Failed to fetch admin activity log:",X)}};Q.useEffect(()=>{(async()=>{a(!0),l(null);try{await R(),await F(),n(new Date)}catch(P){l("Failed to load dashboard data"),console.error("Dashboard loading error:",P)}finally{a(!1)}})()},[r]),Q.useEffect(()=>{if(!u)return;const X=setInterval(async()=>{await R(),N.has("system-health")&&await F(),n(new Date)},6e4);return()=>clearInterval(X)},[u,N,r]);const U=async()=>{a(!0);try{await R(),N.has("ai-usage")&&(E(X=>{const P=new Set(X);return P.delete("ai-usage"),P}),await M()),N.has("user-engagement")&&(E(X=>{const P=new Set(X);return P.delete("user-engagement"),P}),await I()),N.has("system-health")&&(E(X=>{const P=new Set(X);return P.delete("system-health"),P}),await F()),N.has("admin-activity")&&(E(X=>{const P=new Set(X);return P.delete("admin-activity"),P}),await G()),n(new Date)}catch{l("Failed to refresh dashboard data")}finally{a(!1)}},W=(X,P)=>{if(P)switch(X){case"ai-usage":M();break;case"user-engagement":I();break;case"system-health":F();break;case"admin-activity":G();break}};return i&&!h.aiGenerations24h?p.jsx("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-accent mx-auto mb-4"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading strategic dashboard..."})]})}):p.jsxs("div",{className:"p-6 space-y-6 max-w-7xl mx-auto",children:[p.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-8",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:"Strategic Command Center"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Real-time insights for data-driven business decisions"})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[p.jsx("input",{type:"checkbox",checked:u,onChange:X=>d(X.target.checked),className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),p.jsx("span",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Auto-refresh"})]}),p.jsxs("select",{value:r,onChange:X=>e(X.target.value),className:"px-3 py-2 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none text-sm",children:[p.jsx("option",{value:"1h",children:"Last Hour"}),p.jsx("option",{value:"24h",children:"Last 24 Hours"}),p.jsx("option",{value:"7d",children:"Last 7 Days"}),p.jsx("option",{value:"30d",children:"Last 30 Days"})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("button",{onClick:U,disabled:i,className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm font-medium",children:[i?p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-text-on-accent"}):p.jsx(Ed,{className:"w-4 h-4"}),i?"Refreshing...":"Refresh"]}),p.jsxs("div",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:["Updated: ",t.toLocaleTimeString()]})]})]})]}),s&&p.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[p.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200",children:["Error: ",s]}),p.jsx("button",{onClick:U,className:"mt-2 text-sm text-red-600 dark:text-red-400 hover:underline",children:"Retry"})]}),p.jsx(lY,{alerts:w.criticalAlerts}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h2",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary flex items-center gap-2",children:[p.jsx(B3,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"AI Operations Overview"]}),p.jsx(Uh,{title:"AI Generations (24h)",value:h.aiGenerations24h.toLocaleString(),icon:B3,iconColor:"text-blue-600 dark:text-blue-400",trend:b.hourlyPattern,trendColor:"text-blue-500",subtitle:`${b.totalTokensUsed.toLocaleString()} total interactions`,onClick:()=>W("ai-usage",!0)})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h2",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary flex items-center gap-2",children:[p.jsx(Fs,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),"User Growth & Engagement Analytics"]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsx(Uh,{title:"Daily Active Users",value:h.dailyActiveUsers,icon:Fs,iconColor:"text-green-600 dark:text-green-400",trend:D.dauTrend,trendColor:"text-green-500",subtitle:"Click for engagement breakdown",onClick:()=>W("user-engagement",!0)}),p.jsx(Uh,{title:"New Signups (24h)",value:h.newSignups24h,icon:Fs,iconColor:"text-purple-600 dark:text-purple-400",subtitle:D.signupSources.length>0?D.signupSources.map(X=>`${X.source}: ${X.count}`).join(" • "):"No recent signups"}),p.jsx(Uh,{title:"7-Day Retention",value:`${D.retention7day}%`,icon:Ed,iconColor:"text-orange-600 dark:text-orange-400",alertLevel:D.retention7day<50?"critical":D.retention7day<70?"warning":"normal",subtitle:"User retention rate"})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h2",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary flex items-center gap-2",children:[p.jsx(n1,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),"AI Performance & Service Health"]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsx(Uh,{title:"AI Success Rate",value:`${h.aiSuccessRate}%`,icon:n1,iconColor:h.aiSuccessRate>=95?"text-green-600 dark:text-green-400":h.aiSuccessRate>=90?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",trend:w.aiSuccessRateTrend,trendColor:h.aiSuccessRate>=95?"text-green-500":h.aiSuccessRate>=90?"text-yellow-500":"text-red-500",subtitle:"24-hour performance trend",alertLevel:h.aiSuccessRate<90?"critical":h.aiSuccessRate<95?"warning":"normal"}),p.jsx(Uh,{title:"Model Fallback Rate",value:`${b.fallbackRate.toFixed(1)}%`,icon:dm,iconColor:b.fallbackRate<=5?"text-green-600 dark:text-green-400":b.fallbackRate<=10?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",subtitle:b.fallbackRate>10?"⚠️ Above threshold":"Within normal range",alertLevel:b.fallbackRate>10?"critical":b.fallbackRate>5?"warning":"normal"})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h2",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary flex items-center gap-2",children:[p.jsx(_r,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),"Platform Inventory Overview"]}),p.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg p-6",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-4xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:h.totalUsers.toLocaleString()}),p.jsx("p",{className:"text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary",children:"Total Users"}),p.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["+",h.newSignups24h," today"]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-4xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:h.activeTools}),p.jsx("p",{className:"text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary",children:"Active AI Tools"}),p.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Operational"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-4xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:h.totalCategories}),p.jsx("p",{className:"text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary",children:"Tool Categories"}),p.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:"Organized"})]})]}),p.jsxs("div",{className:"mt-6 text-center",children:[p.jsx("p",{className:"text-4xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:((j=h.total_interactions)==null?void 0:j.toLocaleString())||"0"}),p.jsx("p",{className:"text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary",children:"Total AI Interactions"})]})]})]}),p.jsx(cY,{title:"Administrative Activity Monitor",icon:p.jsx(Ed,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),defaultExpanded:!1,onToggle:X=>W("admin-activity",X),children:p.jsx("div",{className:"p-4",children:p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{children:[p.jsxs("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary mb-3 flex items-center gap-2",children:[p.jsx(_r,{className:"w-4 h-4 text-blue-600"}),"Recent Tool Actions"]}),p.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:_.toolActions.length>0?_.toolActions.map((X,P)=>p.jsxs("div",{className:"p-3 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md border-l-2 border-blue-500",children:[p.jsx("p",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:X.action}),p.jsx("p",{className:"text-xs text-light-text-secondary dark:text-dark-text-secondary",children:X.toolName}),p.jsxs("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:["by ",X.adminName," • ",X.timestamp]})]},P)):p.jsx("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary italic",children:"No recent tool actions"})})]}),p.jsxs("div",{children:[p.jsxs("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary mb-3 flex items-center gap-2",children:[p.jsx(Fs,{className:"w-4 h-4 text-green-600"}),"Admin Login History"]}),p.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:_.adminLogins.length>0?_.adminLogins.map((X,P)=>p.jsxs("div",{className:"p-3 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md border-l-2 border-green-500",children:[p.jsx("p",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:X.adminName}),p.jsx("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:X.timestamp}),X.ipAddress&&p.jsxs("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:["IP: ",X.ipAddress]})]},P)):p.jsx("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary italic",children:"No recent admin logins"})})]}),p.jsxs("div",{children:[p.jsxs("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary mb-3 flex items-center gap-2",children:[p.jsx(Bc,{className:"w-4 h-4 text-purple-600"}),"System Changes"]}),p.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:_.systemChanges.length>0?_.systemChanges.map((X,P)=>p.jsxs("div",{className:"p-3 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md border-l-2 border-purple-500",children:[p.jsx("p",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:X.change}),p.jsx("p",{className:"text-xs text-light-text-secondary dark:text-dark-text-secondary",children:X.details}),p.jsx("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:X.timestamp})]},P)):p.jsx("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary italic",children:"No recent system changes"})})]})]})})})]})},dY=()=>p.jsx(uY,{}),hY=({value:r,onChange:e,placeholder:t="Enter markdown content...",rows:n=6,className:i="",disabled:a=!1})=>{const[s,l]=Q.useState("write"),u=d=>{l(d)};return p.jsxs("div",{className:`border border-light-border dark:border-dark-border rounded-md overflow-hidden ${i}`,children:[p.jsxs("div",{className:"flex items-center justify-between bg-light-bg-sidebar dark:bg-dark-bg-sidebar border-b border-light-border dark:border-dark-border px-3 py-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("button",{type:"button",onClick:()=>u("write"),className:`flex items-center gap-2 px-3 py-1 text-sm font-medium rounded-sm transition-colors ${s==="write"?"bg-primary-accent text-text-on-accent":"text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-component dark:hover:bg-dark-bg-component"}`,children:[p.jsx(di,{className:"w-4 h-4"}),"Write"]}),p.jsxs("button",{type:"button",onClick:()=>u("preview"),className:`flex items-center gap-2 px-3 py-1 text-sm font-medium rounded-sm transition-colors ${s==="preview"?"bg-primary-accent text-text-on-accent":"text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-component dark:hover:bg-dark-bg-component"}`,children:[p.jsx($R,{className:"w-4 h-4"}),"Preview"]})]}),p.jsx("div",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:"Markdown supported"})]}),p.jsx("div",{className:"relative",children:s==="write"?p.jsx("textarea",{value:r,onChange:d=>e(d.target.value),placeholder:t,rows:n,disabled:a,className:"w-full p-4 bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none resize-vertical border-none font-mono text-sm leading-relaxed",style:{minHeight:`${n*1.5}rem`}}):p.jsx("div",{className:"p-4 bg-light-bg-component dark:bg-dark-bg-component min-h-[200px] overflow-y-auto",children:r.trim()?p.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none prose-headings:text-light-text-primary dark:prose-headings:text-dark-text-primary prose-p:text-light-text-secondary dark:prose-p:text-dark-text-secondary prose-strong:text-light-text-primary dark:prose-strong:text-dark-text-primary prose-code:text-primary-accent prose-code:bg-light-bg-sidebar dark:prose-code:bg-dark-bg-sidebar prose-pre:bg-light-bg-sidebar dark:prose-pre:bg-dark-bg-sidebar prose-blockquote:border-primary-accent prose-blockquote:text-light-text-secondary dark:prose-blockquote:text-dark-text-secondary",children:p.jsx(I6,{remarkPlugins:[aI],children:r})}):p.jsx("div",{className:"text-light-text-tertiary dark:text-dark-text-tertiary italic",children:"No content to preview. Switch to Write mode to add content."})})}),s==="write"&&p.jsx("div",{className:"bg-light-bg-sidebar dark:bg-dark-bg-sidebar border-t border-light-border dark:border-dark-border px-3 py-2",children:p.jsxs("div",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:[p.jsx("span",{className:"font-medium",children:"Markdown tips:"})," Use **bold**, *italic*, `code`, # headers, - lists, > quotes"]})})]})},fY=({description:r,maxLength:e=100})=>{const[t,n]=Q.useState(!1);return r.length<=e?p.jsx("span",{children:r}):p.jsxs("div",{children:[p.jsx("span",{children:t?r:`${r.substring(0,e)}...`}),p.jsx("button",{onClick:i=>{i.stopPropagation(),n(!t)},className:"ml-2 text-xs text-primary-accent hover:underline",children:t?"Show less":"Show more"})]})},pY=()=>{const r=Sp(),e=Qr(),{allTools:t,createTool:n,updateTool:i,deleteTool:a,loading:s}=tl(),{allCategories:l}=vp(),[u,d]=Q.useState(!1),[h,g]=Q.useState(null),[b,y]=Q.useState(1),[D,v]=Q.useState(!1),[w,k]=Q.useState(!1),[_,A]=Q.useState(null),[N,E]=Q.useState(null),[T,R]=Q.useState(!1),[M,I]=Q.useState(""),[F,G]=Q.useState("title"),[U,W]=Q.useState("asc"),[j,X]=Q.useState({title:"",description:"",category:"",active:!0,featured:!1,is_pro:!1,primaryModel:"Claude",fallbackModels:[],promptInstructions:"",questions:[]}),P=["Claude","OpenAI","Grok","Gemini"],B=()=>{var fe;g(null),X({title:"",description:"",category:((fe=l[0])==null?void 0:fe.name)||"",active:!0,featured:!1,is_pro:!1,primaryModel:"Claude",fallbackModels:["OpenAI"],promptInstructions:"",questions:[]}),y(1),d(!0)},ee=fe=>{g(fe),X({title:fe.title,description:fe.description,category:fe.category,active:fe.active,featured:fe.featured,is_pro:fe.is_pro||!1,primaryModel:fe.primaryModel,fallbackModels:fe.fallbackModels,promptInstructions:fe.promptInstructions,questions:fe.questions}),y(1),d(!0)},K=()=>{const fe={id:Date.now().toString(),label:"",type:"input",required:!0,order:j.questions.length+1};X(Ue=>({...Ue,questions:[...Ue.questions,fe]}))},H=(fe,Ue)=>{X(be=>({...be,questions:be.questions.map(Fe=>Fe.id===fe?{...Fe,...Ue}:Fe)}))},J=fe=>{X(Ue=>({...Ue,questions:Ue.questions.filter(be=>be.id!==fe).map((be,Fe)=>({...be,order:Fe+1}))}))},ie=fe=>fe.replace(/[\u200B-\u200D\uFEFF]/g,"").replace(/[\u2000-\u206F]/g," ").replace(/[\u2070-\u209F]/g,"").replace(/[\u20A0-\u20CF]/g,"").replace(/[\u2100-\u214F]/g,"").replace(/[\u2190-\u21FF]/g,"").replace(/[\u2200-\u22FF]/g,"").replace(/[\u2300-\u23FF]/g,"").replace(/[\u2400-\u243F]/g,"").replace(/[\u2440-\u245F]/g,"").replace(/[\u2460-\u24FF]/g,"").replace(/[\u25A0-\u25FF]/g,"").replace(/[\u2600-\u26FF]/g,"").replace(/[\u2700-\u27BF]/g,"").replace(/[\uE000-\uF8FF]/g,"").replace(/[\uFB00-\uFB4F]/g,"").replace(/[\uFE00-\uFE0F]/g,"").replace(/[\uFE20-\uFE2F]/g,"").replace(/[\uFE30-\uFE4F]/g,"").replace(/[\uFE50-\uFE6F]/g,"").replace(/[\uFF00-\uFFEF]/g,"").replace(/\s+/g," ").trim(),z=async fe=>{if(!fe)return null;R(!0);try{const{user:Ue}=ht.getState();if(!Ue)throw new Error("User not authenticated");const Fe=await Uc.getInstance().uploadKnowledgeBaseFile(fe,Ue.id);if(Fe.success&&Fe.data)return console.log("Knowledge base file uploaded successfully:",Fe.data.fileId),console.log("✅ Extracted text content:",Fe.data.processedContent),Fe.data.fileId;throw new Error(Fe.error||"Failed to upload file")}catch(Ue){return console.error("Failed to upload knowledge base file:",Ue),A("Failed to upload knowledge base file. Please try again."),null}finally{R(!1)}},ge=async()=>{const fe=ie(j.title);if(!fe){A("Tool title is required");return}const Ue=ie(j.description);if(!Ue){A("Tool description is required");return}const be=ie(j.promptInstructions);if(!be){A("Prompt instructions are required");return}if(!j.category){A("Please select a category");return}k(!0),A(null);try{let Fe=null;if(N&&(Fe=await z(N),!Fe))return;console.log("AdminTools: Attempting to save tool with data sizes:",{titleLength:fe.length,descriptionLength:Ue.length,promptLength:be.length,questionCount:j.questions.length,hasKnowledgeBase:!!Fe});const $e=j.questions.map(re=>{var ne;return{...re,label:ie(re.label),placeholder:re.placeholder?ie(re.placeholder):re.placeholder,options:(ne=re.options)==null?void 0:ne.map(ue=>ie(ue))}}),O={title:fe,description:Ue,category:j.category,active:j.active,featured:j.featured,is_pro:j.is_pro,primaryModel:j.primaryModel,fallbackModels:j.fallbackModels,promptInstructions:j.promptInstructions,questions:$e,knowledgeBaseFileId:Fe},he=h?i(h.id,O):n(O),oe=new Promise((re,ne)=>setTimeout(()=>ne(new Error("Save operation timed out after 120 seconds")),12e4));await Promise.race([he,oe]),console.log("AdminTools: Tool saved successfully"),d(!1),E(null),e.success(`Tool "${fe}" ${h?"updated":"created"} successfully`,h?"Tool Updated":"Tool Created")}catch(Fe){console.error("Failed to save tool:",Fe),Fe instanceof Error?Fe.message.includes("timeout")?A("Save operation timed out. This may be due to large content size. Please try with shorter content or contact support."):Fe.message.includes("network")||Fe.message.includes("fetch")?A("Network error. Please check your connection and try again."):A(Fe.message):A("Failed to save tool. Please try again.")}finally{k(!1)}},ve=async fe=>{const Ue=t.find(Fe=>Fe.id===fe);if(!(!Ue||!await r.confirmDelete(Ue.title,"tool")))try{await a(fe),e.success(`Tool "${Ue.title}" deleted successfully`,"Tool Deleted")}catch(Fe){console.error("Failed to delete tool:",Fe),e.error("Failed to delete tool. Please try again.")}},je=fe=>{F===fe?W(U==="asc"?"desc":"asc"):(G(fe),W("asc"))},Ie=({field:fe})=>p.jsx("svg",{className:`w-3 h-3 inline ml-1 transition-colors ${F===fe?"text-red-500":"text-light-text-tertiary dark:text-dark-text-tertiary"}`,fill:"currentColor",viewBox:"0 0 16 16",style:{transform:F===fe&&U==="desc"?"rotate(180deg)":"none"},children:p.jsx("path",{d:"M8 3l4 5H4z"})}),Pe=t.filter(fe=>{if(!M.trim())return!0;const Ue=M.toLowerCase();return fe.title.toLowerCase().includes(Ue)||fe.description.toLowerCase().includes(Ue)||fe.category.toLowerCase().includes(Ue)||fe.primaryModel.toLowerCase().includes(Ue)}).sort((fe,Ue)=>{let be=0;return F==="title"?be=fe.title.localeCompare(Ue.title):F==="category"?be=fe.category.localeCompare(Ue.category):F==="primaryModel"?be=fe.primaryModel.localeCompare(Ue.primaryModel):F==="active"&&(be=fe.active===Ue.active?0:fe.active?-1:1),U==="asc"?be:-be});return s?p.jsx("div",{className:"p-6 flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-accent mx-auto mb-4"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading tools..."})]})}):p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:"Tools"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Manage AI tools and their configurations"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Aa,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-light-text-tertiary dark:text-dark-text-tertiary"}),p.jsx("input",{type:"text",value:M,onChange:fe=>I(fe.target.value),placeholder:"Search tools...",className:"pl-10 pr-4 py-2 w-64 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary placeholder-light-text-tertiary dark:placeholder-dark-text-tertiary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none"})]}),p.jsxs("button",{onClick:B,disabled:l.length===0,className:"flex items-center gap-2 px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",title:l.length===0?"Create categories first":"Add new tool",children:[p.jsx(Ka,{className:"w-4 h-4"}),"Add Tool"]})]})]}),l.length===0?p.jsxs("div",{className:"text-center py-20 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-lg border border-light-border dark:border-dark-border",children:[p.jsx(_r,{className:"w-12 h-12 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),p.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary",children:"No categories available"}),p.jsx("p",{className:"text-light-text-tertiary dark:text-dark-text-tertiary mt-1",children:"Create categories first before adding tools."})]}):p.jsx("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg overflow-hidden",children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full",children:[p.jsx("thead",{className:"bg-light-bg-sidebar dark:bg-dark-bg-sidebar",children:p.jsxs("tr",{children:[p.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>je("title"),children:["Tool",p.jsx(Ie,{field:"title"})]}),p.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>je("category"),children:["Category",p.jsx(Ie,{field:"category"})]}),p.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>je("primaryModel"),children:["Model",p.jsx(Ie,{field:"primaryModel"})]}),p.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>je("active"),children:["Status",p.jsx(Ie,{field:"active"})]}),p.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Actions"})]})}),p.jsx("tbody",{children:Pe.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:5,className:"p-8 text-center text-light-text-tertiary dark:text-dark-text-tertiary",children:M.trim()?p.jsxs(p.Fragment,{children:["No tools found matching ",p.jsxs("span",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:['"',M,'"']})]}):'No tools created yet. Click "Add Tool" to create your first tool.'})}):Pe.map(fe=>p.jsxs("tr",{className:"border-t border-light-border dark:border-dark-border",children:[p.jsx("td",{className:"p-4",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(_r,{className:"w-5 h-5 text-primary-accent"}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:fe.title}),fe.featured&&p.jsx(co,{className:"w-4 h-4 text-yellow-500",isFilled:!0}),fe.is_pro&&p.jsx("span",{className:"text-xs font-bold text-accent-dark-blue dark:text-accent-light-blue bg-accent-light-blue/50 dark:bg-accent-dark-blue/20 py-0.5 px-2 rounded-full",children:"PRO"})]}),p.jsx("div",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:p.jsx(fY,{description:fe.description,maxLength:80})})]})]})}),p.jsx("td",{className:"p-4",children:p.jsx("span",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:fe.category})}),p.jsx("td",{className:"p-4",children:p.jsxs("div",{children:[p.jsx("span",{className:"text-light-text-primary dark:text-dark-text-primary font-medium",children:fe.primaryModel}),fe.fallbackModels.length>0&&p.jsxs("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:["Fallback: ",fe.fallbackModels.join(", ")]})]})}),p.jsx("td",{className:"p-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${fe.active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:fe.active?"Active":"Inactive"}),!fe.active&&p.jsx("button",{onClick:()=>i(fe.id,{active:!0}),className:"px-2 py-1 text-xs rounded-md bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors",title:"Reactivate tool",children:"Reactivate"})]})}),p.jsx("td",{className:"p-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>ee(fe),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-primary-accent hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md",children:p.jsx(di,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>ve(fe.id),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-red-500 hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md",children:p.jsx(Qa,{className:"w-4 h-4"})})]})})]},fe.id))})]})})}),u&&p.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:`bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg transition-all duration-300 ${D?"w-[98vw] h-[98vh] max-w-none max-h-none":"w-full max-w-2xl max-h-[90vh]"} flex flex-col overflow-hidden`,children:[p.jsx("div",{className:"p-6 border-b border-light-border dark:border-dark-border",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:[h?"Edit Tool":"Create Tool"," - Step ",b," of 3"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>v(!D),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md transition-colors",title:D?"Minimize":"Maximize",children:D?p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 9V4.5M9 9H4.5M9 9L3.5 3.5M15 15v4.5M15 15h4.5M15 15l5.5 5.5"})}):p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),p.jsx("button",{onClick:()=>{d(!1),v(!1)},className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md transition-colors",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}),p.jsxs("div",{className:`p-6 flex-1 overflow-y-auto ${D?"min-h-0 flex-grow":""}`,children:[_&&p.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:p.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:_})}),b===1&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Title"}),p.jsx("input",{type:"text",value:j.title,onChange:fe=>X(Ue=>({...Ue,title:ie(fe.target.value)})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Tool name"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Description"}),p.jsx("textarea",{value:j.description,onChange:fe=>X(Ue=>({...Ue,description:ie(fe.target.value)})),rows:3,className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Describe what this tool does"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Category"}),l.length===0?p.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md",children:p.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"No categories available. Create categories first."})}):p.jsx("select",{value:j.category,onChange:fe=>X(Ue=>({...Ue,category:fe.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",children:l.map(fe=>p.jsx("option",{value:fe.name,children:fe.name},fe.id))})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("label",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",checked:j.active,onChange:fe=>X(Ue=>({...Ue,active:fe.target.checked})),className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),p.jsx("span",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:"Active"})]}),p.jsxs("label",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",checked:j.featured,onChange:fe=>X(Ue=>({...Ue,featured:fe.target.checked})),className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),p.jsx("span",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:"Featured"})]}),p.jsxs("label",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",checked:j.is_pro,onChange:fe=>X(Ue=>({...Ue,is_pro:fe.target.checked})),className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),p.jsx("span",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:"Pro Tool"})]})]}),p.jsx("div",{className:"pt-4 border-t border-light-border dark:border-dark-border",children:p.jsxs("button",{type:"button",onClick:()=>{X(fe=>({...fe,title:ie(fe.title),description:ie(fe.description)}))},className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors text-sm",title:"Remove formatting from title and description",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Clean Text Fields"]})})]}),b===2&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Primary Model"}),p.jsx("select",{value:j.primaryModel,onChange:fe=>X(Ue=>({...Ue,primaryModel:fe.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",children:P.map(fe=>p.jsx("option",{value:fe,children:fe},fe))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Fallback Models"}),p.jsx("div",{className:"space-y-2",children:P.filter(fe=>fe!==j.primaryModel).map(fe=>p.jsxs("label",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",checked:j.fallbackModels.includes(fe),onChange:Ue=>{Ue.target.checked?X(be=>({...be,fallbackModels:[...be.fallbackModels,fe]})):X(be=>({...be,fallbackModels:be.fallbackModels.filter(Fe=>Fe!==fe)}))},className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),p.jsx("span",{className:"text-sm text-light-text-primary dark:text-dark-text-primary",children:fe})]},fe))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Prompt Instructions"}),p.jsx("div",{className:"border border-light-border dark:border-dark-border rounded-md",children:p.jsx(hY,{value:j.promptInstructions,onChange:fe=>X(Ue=>({...Ue,promptInstructions:fe})),rows:D?25:8,placeholder:"You are an expert copywriter..."})})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Knowledge Base File (Optional)"}),p.jsx("div",{className:"border-2 border-dashed border-light-border dark:border-dark-border rounded-md p-4",children:N?p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("svg",{className:"w-6 h-6 text-primary-accent",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:N.name}),p.jsxs("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:[(N.size/1024/1024).toFixed(2)," MB"]})]})]}),p.jsx("button",{type:"button",onClick:()=>E(null),className:"text-red-500 hover:text-red-700",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):p.jsxs("div",{className:"text-center",children:[p.jsx("svg",{className:"w-8 h-8 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),p.jsx("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary mb-2",children:"Upload a knowledge base file to provide context for this tool"}),p.jsx("input",{type:"file",accept:".pdf,.docx,.doc,.txt,.md",onChange:fe=>{fe.target.files&&fe.target.files[0]&&E(fe.target.files[0])},className:"hidden",id:"knowledge-base-upload"}),p.jsx("label",{htmlFor:"knowledge-base-upload",className:"inline-flex items-center px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity cursor-pointer",children:"Choose File"}),p.jsx("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary mt-2",children:"Supports PDF, DOCX, TXT, and MD files (max 10MB)"})]})})]}),p.jsx("div",{className:"pt-4 border-t border-light-border dark:border-dark-border",children:p.jsxs("button",{type:"button",onClick:()=>{X(fe=>({...fe,title:ie(fe.title),description:ie(fe.description)}))},className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors text-sm",title:"Remove formatting from title and description (preserves markdown in prompt instructions)",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Clean Text Fields"]})})]}),b===3&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:"Questions"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("button",{type:"button",onClick:()=>{X(fe=>({...fe,questions:fe.questions.map(Ue=>{var be;return{...Ue,label:ie(Ue.label),placeholder:Ue.placeholder?ie(Ue.placeholder):Ue.placeholder,options:(be=Ue.options)==null?void 0:be.map(Fe=>ie(Fe))}})}))},className:"flex items-center gap-2 px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors text-sm",title:"Remove formatting from question text fields",children:[p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Clean Questions"]}),p.jsxs("button",{onClick:K,className:"flex items-center gap-2 px-3 py-1 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity text-sm",children:[p.jsx(Ka,{className:"w-4 h-4"}),"Add Question"]})]})]}),p.jsx("div",{className:`space-y-3 ${D?"max-h-[calc(98vh-300px)]":"max-h-96"} overflow-y-auto`,children:j.questions.length===0?p.jsx("div",{className:"text-center py-8 text-light-text-tertiary dark:text-dark-text-tertiary",children:p.jsx("p",{children:'No questions added yet. Click "Add Question" to create the conversation flow.'})}):j.questions.map((fe,Ue)=>{var be;return p.jsxs("div",{className:"border border-light-border dark:border-dark-border rounded-md p-4",children:[p.jsxs("div",{className:"flex justify-between items-start mb-3",children:[p.jsxs("span",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:["Question ",Ue+1]}),p.jsx("button",{onClick:()=>J(fe.id),className:"text-red-500 hover:text-red-700",children:p.jsx(Qa,{className:"w-4 h-4"})})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("textarea",{value:fe.label,onChange:Fe=>H(fe.id,{label:ie(Fe.target.value)}),placeholder:"Question text",className:"w-full p-2 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none text-sm resize-none overflow-hidden min-h-[40px]",rows:1,style:{height:"auto"},onInput:Fe=>{const $e=Fe.target;$e.style.height="auto",$e.style.height=$e.scrollHeight+"px"}}),p.jsxs("div",{className:"flex gap-4",children:[p.jsxs("select",{value:fe.type,onChange:Fe=>H(fe.id,{type:Fe.target.value}),className:"p-2 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none text-sm",children:[p.jsx("option",{value:"input",children:"Input"}),p.jsx("option",{value:"textarea",children:"Textarea"}),p.jsx("option",{value:"select",children:"Select"})]}),p.jsxs("label",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",checked:fe.required,onChange:Fe=>H(fe.id,{required:Fe.target.checked}),className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),p.jsx("span",{className:"text-sm text-light-text-primary dark:text-dark-text-primary",children:"Required"})]})]}),fe.type==="select"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-light-text-primary dark:text-dark-text-primary mb-1",children:"Options (one per line)"}),p.jsx("textarea",{value:((be=fe.options)==null?void 0:be.join(`
`))||"",onChange:Fe=>H(fe.id,{options:Fe.target.value.split(`
`).map($e=>ie($e)).filter($e=>$e.trim())}),placeholder:`Option 1
Option 2
Option 3`,className:"w-full p-2 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none text-sm",rows:3})]})]})]},fe.id)})})]})]}),p.jsxs("div",{className:"p-6 border-t border-light-border dark:border-dark-border flex justify-between flex-shrink-0",children:[p.jsx("div",{children:b>1&&p.jsx("button",{onClick:()=>y(fe=>fe-1),className:"px-4 py-2 text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:"Previous"})}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:"Cancel"}),b<3?p.jsx("button",{onClick:()=>y(fe=>fe+1),disabled:b===1&&l.length===0,className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"}):p.jsxs("button",{onClick:ge,disabled:w,className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[w&&p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-text-on-accent"}),w?"Saving...":h?"Update":"Create"]})]})]})]})})]})},gY=()=>p.jsx(pY,{}),DD=[{name:"Settings",icon:Bc,color:"text-blue-600"},{name:"Box",icon:_r,color:"text-green-600"},{name:"Edit",icon:di,color:"text-purple-600"},{name:"Mail",icon:V1,color:"text-red-600"},{name:"File",icon:Cd,color:"text-yellow-600"},{name:"Mic",icon:X1,color:"text-pink-600"},{name:"Activity",icon:Ed,color:"text-indigo-600"},{name:"Users",icon:Fs,color:"text-orange-600"}],mY=()=>{const r=Sp(),e=Qr(),{allCategories:t,createCategory:n,updateCategory:i,deleteCategory:a,loading:s}=vp(),[l,u]=Q.useState(!1),[d,h]=Q.useState(null),[g,b]=Q.useState({name:"",active:!0,iconName:"Settings",iconColor:"text-blue-600"}),[y,D]=Q.useState(null),[v,w]=Q.useState(null),[k,_]=Q.useState(""),[A,N]=Q.useState("displayOrder"),[E,T]=Q.useState("asc"),R=()=>{h(null),b({name:"",active:!0,icon:"Settings",color:"text-blue-600"}),w(null),u(!0)},M=K=>{h(K),b({name:K.name,active:K.active,iconName:K.iconName||"Settings",iconColor:K.iconColor||"text-blue-600"}),w(null),u(!0)},I=async()=>{if(!g.name.trim()){w("Category name is required");return}w(null);try{d?await i(d.id,{name:g.name,active:g.active,iconName:g.iconName,iconColor:g.iconColor}):await n({name:g.name,displayOrder:t.length+1,active:g.active,iconName:g.iconName,iconColor:g.iconColor}),u(!1),e.success(`Category "${g.name}" ${d?"updated":"created"} successfully`,d?"Category Updated":"Category Created")}catch(K){console.error("Failed to save category:",K),K&&typeof K=="object"&&"message"in K?w(K.message):w("Failed to save category. Please try again.")}},F=async K=>{const H=t.find(ie=>ie.id===K);if(!(!H||!await r.confirmDelete(H.name,"category")))try{await a(K),e.success(`Category "${H.name}" deleted successfully`,"Category Deleted")}catch(ie){console.error("Failed to delete category:",ie),e.error("Failed to delete category. Please try again.")}},G=(K,H)=>{D(H),K.dataTransfer.effectAllowed="move"},U=K=>{K.preventDefault(),K.dataTransfer.dropEffect="move"},W=async(K,H)=>{if(K.preventDefault(),!y||y===H){D(null);return}const J=[...t].sort((ge,ve)=>ge.displayOrder-ve.displayOrder),ie=J.findIndex(ge=>ge.id===y),z=J.findIndex(ge=>ge.id===H);if(ie===-1||z===-1){D(null);return}try{const ge=[...J],[ve]=ge.splice(ie,1);ge.splice(z,0,ve);const je=ge.map((Ie,Pe)=>i(Ie.id,{displayOrder:Pe+1}));await Promise.all(je),e.success("Categories reordered successfully")}catch(ge){console.error("Failed to reorder categories:",ge),e.error("Failed to reorder categories. Please try again.")}finally{D(null)}},j=async(K,H)=>{const J=[...t].sort((je,Ie)=>je.displayOrder-Ie.displayOrder),ie=J.findIndex(je=>je.id===K);if(H==="up"&&ie===0||H==="down"&&ie===J.length-1)return;const z=H==="up"?ie-1:ie+1,ge=J[ie],ve=J[z];try{await i(ge.id,{displayOrder:ve.displayOrder}),await i(ve.id,{displayOrder:ge.displayOrder}),e.success("Category moved successfully")}catch(je){console.error("Failed to reorder categories:",je),e.error("Failed to reorder categories. Please try again.")}},X=K=>DD.find(J=>J.name===K)||DD[0],P=K=>{A===K?T(E==="asc"?"desc":"asc"):(N(K),T("asc"))},B=({field:K})=>p.jsx("svg",{className:`w-3 h-3 inline ml-1 transition-colors ${A===K?"text-red-500":"text-light-text-tertiary dark:text-dark-text-tertiary"}`,fill:"currentColor",viewBox:"0 0 16 16",style:{transform:A===K&&E==="desc"?"rotate(180deg)":"none"},children:p.jsx("path",{d:"M8 3l4 5H4z"})}),ee=t.filter(K=>{if(!k.trim())return!0;const H=k.toLowerCase();return K.name.toLowerCase().includes(H)}).sort((K,H)=>{let J=0;return A==="name"?J=K.name.localeCompare(H.name):A==="displayOrder"?J=K.displayOrder-H.displayOrder:A==="active"&&(J=K.active===H.active?0:K.active?-1:1),E==="asc"?J:-J});return s?p.jsx("div",{className:"p-6 flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-accent mx-auto mb-4"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading categories..."})]})}):p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:"Categories"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Manage tool categories and their display order"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Aa,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-light-text-tertiary dark:text-dark-text-tertiary"}),p.jsx("input",{type:"text",value:k,onChange:K=>_(K.target.value),placeholder:"Search categories...",className:"pl-10 pr-4 py-2 w-64 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary placeholder-light-text-tertiary dark:placeholder-dark-text-tertiary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none"})]}),p.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",children:[p.jsx(Ka,{className:"w-4 h-4"}),"Add Category"]})]})]}),p.jsx("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg overflow-hidden",children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full",children:[p.jsx("thead",{className:"bg-light-bg-sidebar dark:bg-dark-bg-sidebar",children:p.jsxs("tr",{children:[p.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>P("displayOrder"),children:["Order",p.jsx(B,{field:"displayOrder"})]}),p.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>P("name"),children:["Name",p.jsx(B,{field:"name"})]}),p.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>P("active"),children:["Status",p.jsx(B,{field:"active"})]}),p.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Actions"})]})}),p.jsx("tbody",{children:ee.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:4,className:"p-8 text-center text-light-text-tertiary dark:text-dark-text-tertiary",children:k.trim()?p.jsxs(p.Fragment,{children:["No categories found matching ",p.jsxs("span",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:['"',k,'"']})]}):'No categories created yet. Click "Add Category" to create your first category.'})}):ee.map(K=>p.jsxs("tr",{className:`border-t border-light-border dark:border-dark-border transition-colors ${y===K.id?"opacity-50":"hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page"}`,draggable:!0,onDragStart:H=>G(H,K.id),onDragOver:U,onDrop:H=>W(H,K.id),children:[p.jsx("td",{className:"p-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-light-text-primary dark:text-dark-text-primary font-medium",children:K.displayOrder}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("button",{onClick:()=>j(K.id,"up"),className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary hover:text-primary-accent p-1 rounded hover:bg-light-bg-page dark:hover:bg-dark-bg-component",disabled:K.displayOrder===1,children:"↑"}),p.jsx("button",{onClick:()=>j(K.id,"down"),className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary hover:text-primary-accent p-1 rounded hover:bg-light-bg-page dark:hover:bg-dark-bg-component",disabled:K.displayOrder===t.length,children:"↓"})]}),p.jsx("div",{className:"ml-2 text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:"Drag to reorder"})]})}),p.jsx("td",{className:"p-4",children:p.jsxs("div",{className:"flex items-center gap-3",children:[Bn.createElement(X(K.iconName||"Settings").icon,{className:`w-5 h-5 ${K.iconColor||"text-blue-600"}`}),p.jsx("span",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:K.name})]})}),p.jsx("td",{className:"p-4",children:p.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${K.active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:K.active?"Active":"Inactive"})}),p.jsx("td",{className:"p-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>M(K),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-primary-accent hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md",title:"Edit category",children:p.jsx(di,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>F(K.id),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-red-500 hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md",title:"Delete category",children:p.jsx(Qa,{className:"w-4 h-4"})})]})})]},K.id))})]})})}),l&&p.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-md",children:[p.jsx("div",{className:"p-6 border-b border-light-border dark:border-dark-border",children:p.jsx("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:d?"Edit Category":"Create Category"})}),p.jsxs("div",{className:"p-6 space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Name"}),p.jsx("input",{type:"text",value:g.name,onChange:K=>b(H=>({...H,name:K.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Category name"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Icon & Color"}),p.jsx("div",{className:"grid grid-cols-4 gap-2",children:DD.map(K=>p.jsxs("button",{type:"button",onClick:()=>b(H=>({...H,iconName:K.name,iconColor:K.color})),className:`p-3 border rounded-md flex flex-col items-center gap-1 transition-colors ${g.iconName===K.name?"border-primary-accent bg-primary-accent/10":"border-light-border dark:border-dark-border hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page"}`,children:[Bn.createElement(K.icon,{className:`w-5 h-5 ${K.color}`}),p.jsx("span",{className:"text-xs text-light-text-secondary dark:text-dark-text-secondary",children:K.name})]},K.name))})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",id:"active",checked:g.active,onChange:K=>b(H=>({...H,active:K.target.checked})),className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),p.jsx("label",{htmlFor:"active",className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:"Active"})]}),v&&p.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:p.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:v})})]}),p.jsxs("div",{className:"p-6 border-t border-light-border dark:border-dark-border flex justify-end gap-3",children:[p.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:"Cancel"}),p.jsx("button",{onClick:I,className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",children:d?"Update":"Create"})]})]})})]})},bY=()=>p.jsx(mY,{}),yY=()=>{const r=Sp(),e=Qr(),[t,n]=Q.useState([]),[i,a]=Q.useState(!0),[s,l]=Q.useState(null),[u,d]=Q.useState(null),[h,g]=Q.useState(""),[b,y]=Q.useState("createdAt"),[D,v]=Q.useState("desc"),[w,k]=Q.useState(!1),[_,A]=Q.useState(null),[N,E]=Q.useState({fullName:"",email:"",role:"user",active:!0}),T=Pn.getInstance();Q.useEffect(()=>{R()},[]);const R=async()=>{a(!0),l(null);try{const B=await T.getUsers();B.success&&B.data?n(B.data):l(B.error||"Failed to fetch users")}catch{l("Network error occurred")}finally{a(!1)}},M=B=>{b===B?v(D==="asc"?"desc":"asc"):(y(B),v("asc"))},I=({field:B})=>p.jsx("svg",{className:`w-3 h-3 inline ml-1 transition-colors ${b===B?"text-red-500":"text-light-text-tertiary dark:text-dark-text-tertiary"}`,fill:"currentColor",viewBox:"0 0 16 16",style:{transform:b===B&&D==="desc"?"rotate(180deg)":"none"},children:p.jsx("path",{d:"M8 3l4 5H4z"})}),F=t.filter(B=>{if(!h.trim())return!0;const ee=h.toLowerCase();return B.fullName.toLowerCase().includes(ee)||B.email.toLowerCase().includes(ee)||B.role.toLowerCase().includes(ee)}).sort((B,ee)=>{let K=0;return b==="fullName"?K=B.fullName.localeCompare(ee.fullName):b==="email"?K=B.email.localeCompare(ee.email):b==="role"?K=B.role.localeCompare(ee.role):b==="active"?K=B.active===ee.active?0:B.active?-1:1:b==="createdAt"&&(K=new Date(B.createdAt).getTime()-new Date(ee.createdAt).getTime()),D==="asc"?K:-K}),G=()=>{A(null),E({fullName:"",email:"",role:"user",active:!0}),k(!0)},U=B=>{A(B),E({fullName:B.fullName,email:B.email,role:B.role,active:B.active}),k(!0)},W=async()=>{if(!N.fullName.trim()||!N.email.trim()){e.error("Please fill in all required fields");return}try{if(_){const B=await T.updateUserRole(_.id,N.role);if(B.success)n(ee=>ee.map(K=>K.id===_.id?{...K,...N}:K)),e.success("User updated successfully");else throw new Error(B.error||"Failed to update user")}else{const B=await T.inviteUser(N.email,N.fullName,N.role);if(B.success)await R(),e.success("User invitation sent successfully","Invitation Sent");else throw new Error(B.error||"Failed to invite user")}k(!1)}catch(B){console.error("Failed to save user:",B),e.error("Failed to save user. Please try again.")}},j=async B=>{const ee=t.find(H=>H.id===B);if(!(!ee||!await r.confirmDelete(ee.fullName,"user"))){d(B);try{const H=await T.deleteUser(B,"User deleted by admin");if(H.success){n(ie=>ie.filter(z=>z.id!==B));const J=H.data;J!=null&&J.hasWarnings?e.warning(`User deleted with warnings: ${J.message}. Some data cleanup may have failed.`,"Deletion Completed with Warnings"):e.success("User and all associated data permanently deleted successfully.","User Deleted")}else throw new Error(H.error||"Failed to delete user")}catch(H){console.error("Failed to delete user:",H),e.error("Failed to delete user. Please try again.")}finally{d(null)}}},X=async B=>{const ee=t.find(J=>J.id===B);if(!ee)return;const K=ee.active?"inactive":"active";if(await r.confirmStatusChange(ee.fullName,ee.active?"active":"inactive",K)){d(B);try{const J=await T.updateUserStatus(B,!ee.active,"Status updated by admin");if(J.success)n(ie=>ie.map(z=>z.id===B?{...z,active:!z.active,status:z.active?"inactive":"active"}:z)),e.success(`User ${ee.active?"disabled":"enabled"} successfully`);else throw new Error(J.error||"Failed to update user status")}catch(J){console.error("Failed to toggle user status:",J),e.error(`Failed to ${ee.active?"disable":"enable"} user. Please try again.`)}finally{d(null)}}},P=async(B,ee)=>{const K=t.find(J=>J.id===B);if(!(!K||K.role===ee||!await r.confirmRoleChange(K.fullName,K.role,ee))){d(B);try{const J=await T.updateUserRole(B,ee,`Role changed to ${ee} by admin`);if(J.success)n(ie=>ie.map(z=>z.id===B?{...z,role:ee}:z)),e.success(`User role updated to ${ee} successfully`);else throw new Error(J.error||"Failed to update user role")}catch(J){console.error("Failed to update user role:",J),e.error(`Failed to update user role to ${ee}. Please try again.`)}finally{d(null)}}};return i?p.jsx("div",{className:"p-6 flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-accent mx-auto mb-4"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading users..."})]})}):p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:"Users"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Manage user accounts and permissions"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Aa,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-light-text-tertiary dark:text-dark-text-tertiary"}),p.jsx("input",{type:"text",value:h,onChange:B=>g(B.target.value),placeholder:"Search users...",className:"pl-10 pr-4 py-2 w-64 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary placeholder-light-text-tertiary dark:placeholder-dark-text-tertiary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none"})]}),p.jsxs("button",{onClick:G,className:"flex items-center gap-2 px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",children:[p.jsx(a9,{className:"w-4 h-4"}),"Invite User"]})]})]}),s&&p.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:p.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200",children:["Error: ",s]})}),p.jsx("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg overflow-hidden",children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full",children:[p.jsx("thead",{className:"bg-light-bg-sidebar dark:bg-dark-bg-sidebar",children:p.jsxs("tr",{children:[p.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>M("fullName"),children:["User",p.jsx(I,{field:"fullName"})]}),p.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>M("role"),children:["Role",p.jsx(I,{field:"role"})]}),p.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>M("active"),children:["Status",p.jsx(I,{field:"active"})]}),p.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>M("createdAt"),children:["Created",p.jsx(I,{field:"createdAt"})]}),p.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Actions"})]})}),p.jsx("tbody",{children:F.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:5,className:"p-8 text-center text-light-text-tertiary dark:text-dark-text-tertiary",children:h.trim()?p.jsxs(p.Fragment,{children:["No users found matching ",p.jsxs("span",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:['"',h,'"']})]}):"No users found. Users will appear here when they register."})}):F.map(B=>p.jsxs("tr",{className:"border-t border-light-border dark:border-dark-border",children:[p.jsx("td",{className:"p-4",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-accent text-text-on-accent flex items-center justify-center font-semibold text-sm",children:B.fullName.split(" ").map(ee=>ee[0]).join("").toUpperCase()}),p.jsxs("div",{children:[p.jsx("div",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:B.fullName||"Unknown User"}),p.jsx("div",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:B.email})]})]})}),p.jsx("td",{className:"p-4",children:p.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium capitalize ${B.role==="admin"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300":B.role==="pro"?"bg-accent-light-blue text-accent-dark-blue dark:bg-accent-dark-blue/30 dark:text-accent-light-blue":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:B.role})}),p.jsx("td",{className:"p-4",children:p.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${B.active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:B.active?"Active":"Inactive"})}),p.jsx("td",{className:"p-4",children:p.jsx("span",{className:"text-light-text-secondary dark:text-dark-text-secondary text-sm",children:new Date(B.createdAt).toLocaleDateString()})}),p.jsx("td",{className:"p-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>X(B.id),disabled:u===B.id,className:"px-2 py-1 text-xs rounded-md bg-light-bg-sidebar dark:bg-dark-bg-page text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary disabled:opacity-50 disabled:cursor-not-allowed",children:u===B.id?"Loading...":B.active?"Disable":"Enable"}),p.jsx("div",{className:"relative",children:p.jsxs("select",{value:B.role,onChange:ee=>P(B.id,ee.target.value),disabled:u===B.id,className:"pl-2 pr-6 py-1 text-xs rounded-md bg-light-bg-sidebar dark:bg-dark-bg-page text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary disabled:opacity-50 disabled:cursor-not-allowed appearance-none",children:[p.jsx("option",{value:"user",children:"User"}),p.jsx("option",{value:"pro",children:"Pro"}),p.jsx("option",{value:"admin",children:"Admin"})]})}),p.jsx("button",{onClick:()=>U(B),disabled:u===B.id,className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-primary-accent hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md",children:p.jsx(di,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>j(B.id),disabled:u===B.id,className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-red-500 hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md",children:p.jsx(Qa,{className:"w-4 h-4"})})]})})]},B.id))})]})})}),w&&p.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-md",children:[p.jsx("div",{className:"p-6 border-b border-light-border dark:border-dark-border",children:p.jsx("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:_?"Edit User":"Invite User"})}),p.jsxs("div",{className:"p-6 space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Full Name"}),p.jsx("input",{type:"text",value:N.fullName,onChange:B=>E(ee=>({...ee,fullName:B.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Full name"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Email"}),p.jsx("input",{type:"email",value:N.email,onChange:B=>E(ee=>({...ee,email:B.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"user@example.com"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Role"}),p.jsxs("select",{value:N.role,onChange:B=>E(ee=>({...ee,role:B.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",children:[p.jsx("option",{value:"user",children:"User"}),p.jsx("option",{value:"pro",children:"Pro"}),p.jsx("option",{value:"admin",children:"Admin"})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",id:"active",checked:N.active,onChange:B=>E(ee=>({...ee,active:B.target.checked})),className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),p.jsx("label",{htmlFor:"active",className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:"Active"})]})]}),p.jsxs("div",{className:"p-6 border-t border-light-border dark:border-dark-border flex justify-end gap-3",children:[p.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:"Cancel"}),p.jsx("button",{onClick:W,className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",children:_?"Update":"Invite"})]})]})})]})},xY=()=>p.jsx(yY,{}),vY=()=>{const r=ry(),e=Qr(),[t,n]=Q.useState([]),[i,a]=Q.useState(!0),[s,l]=Q.useState(null),[u,d]=Q.useState(!1),[h,g]=Q.useState(null),[b,y]=Q.useState(!1),[D,v]=Q.useState({title:"",content:"",active:!0,showOnLogin:!1}),w=Pn.getInstance();Q.useEffect(()=>{k()},[]);const k=async()=>{a(!0),l(null);try{console.log("AdminAnnouncements: Fetching announcements from API");const M=await w.getAnnouncements();M.success&&M.data?(console.log("AdminAnnouncements: Announcements fetched successfully:",M.data.length),n(M.data)):(console.error("AdminAnnouncements: Failed to fetch announcements:",M.error),l(M.error||"Failed to fetch announcements"))}catch(M){console.error("AdminAnnouncements: Network error:",M),l("Network error occurred"),console.error("Failed to fetch announcements:",M)}finally{a(!1)}},_=()=>{g(null),v({title:"",content:"",active:!0,showOnLogin:!1}),d(!0)},A=M=>{g(M),v({title:M.title,content:M.content,active:M.active,showOnLogin:M.showOnLogin}),d(!0)},N=async()=>{if(!D.title.trim()||!D.content.trim()){e.error("Please fill in all required fields");return}y(!0);try{if(h){console.log("AdminAnnouncements: Updating announcement:",h.id);const M=await w.updateAnnouncement(h.id,D);if(M.success&&M.data)n(I=>I.map(F=>F.id===h.id?M.data:F)),console.log("AdminAnnouncements: Announcement updated successfully");else throw new Error(M.error||"Failed to update announcement")}else{console.log("AdminAnnouncements: Creating new announcement");const M=await w.createAnnouncement(D);if(M.success&&M.data)n(I=>[M.data,...I]),console.log("AdminAnnouncements: Announcement created successfully");else throw new Error(M.error||"Failed to create announcement")}d(!1),e.success(`Announcement "${D.title}" ${h?"updated":"created"} successfully`,h?"Announcement Updated":"Announcement Created")}catch(M){console.error("Failed to save announcement:",M),e.error("Failed to save announcement. Please try again.")}finally{y(!1)}},E=async M=>{if(await r.confirm({title:"Delete Announcement",message:"Are you sure you want to delete this announcement?",confirmText:"Delete",cancelText:"Cancel",variant:"danger"}))try{console.log("AdminAnnouncements: Deleting announcement:",M);const F=await w.deleteAnnouncement(M);if(F.success)n(G=>G.filter(U=>U.id!==M)),console.log("AdminAnnouncements: Announcement deleted successfully"),e.success("Announcement deleted successfully","Announcement Deleted");else throw new Error(F.error||"Failed to delete announcement")}catch(F){console.error("Failed to delete announcement:",F),e.error("Failed to delete announcement. Please try again.")}},T=async M=>{const I=t.find(F=>F.id===M);if(I)try{const F=await w.updateAnnouncement(M,{active:!I.active});if(F.success&&F.data)n(G=>G.map(U=>U.id===M?F.data:U)),e.success(`Announcement ${I.active?"deactivated":"activated"} successfully`);else throw new Error(F.error||"Failed to update announcement")}catch(F){console.error("Failed to toggle announcement status:",F),e.error("Failed to update announcement. Please try again.")}},R=async M=>{const I=t.find(F=>F.id===M);if(I)try{const F=await w.updateAnnouncement(M,{showOnLogin:!I.showOnLogin});if(F.success&&F.data)n(G=>G.map(U=>U.id===M?F.data:U)),e.success(`Login popup ${I.showOnLogin?"disabled":"enabled"} successfully`);else throw new Error(F.error||"Failed to update announcement")}catch(F){console.error("Failed to toggle login popup:",F),e.error("Failed to update announcement. Please try again.")}};return i?p.jsx("div",{className:"p-6 flex items-center justify-center",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-accent mx-auto mb-4"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading announcements..."})]})}):p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:"Announcements"}),p.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Manage announcements and login popups for users"})]}),p.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",children:[p.jsx(Ka,{className:"w-4 h-4"}),"Add Announcement"]})]}),s&&p.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[p.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200",children:["Error: ",s]}),p.jsx("button",{onClick:k,className:"mt-2 text-sm text-red-600 dark:text-red-400 hover:underline",children:"Retry"})]}),p.jsx("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg overflow-hidden",children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full",children:[p.jsx("thead",{className:"bg-light-bg-sidebar dark:bg-dark-bg-sidebar",children:p.jsxs("tr",{children:[p.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Announcement"}),p.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Status"}),p.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Login Popup"}),p.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Created"}),p.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Actions"})]})}),p.jsx("tbody",{children:t.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:5,className:"p-8 text-center text-light-text-tertiary dark:text-dark-text-tertiary",children:i?"Loading announcements...":'No announcements created yet. Click "Add Announcement" to create your first announcement.'})}):t.map(M=>p.jsxs("tr",{className:"border-t border-light-border dark:border-dark-border",children:[p.jsx("td",{className:"p-4",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(yA,{className:"w-5 h-5 text-primary-accent"}),p.jsxs("div",{children:[p.jsx("div",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:M.title}),p.jsx("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary line-clamp-2",children:M.content})]})]})}),p.jsx("td",{className:"p-4",children:p.jsx("button",{onClick:()=>T(M.id),className:`px-2 py-1 rounded-full text-xs font-medium cursor-pointer transition-colors ${M.active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/50":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-900/50"}`,children:M.active?"Active":"Inactive"})}),p.jsx("td",{className:"p-4",children:p.jsx("button",{onClick:()=>R(M.id),className:`px-2 py-1 rounded-full text-xs font-medium cursor-pointer transition-colors ${M.showOnLogin?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-900/50":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-900/50"}`,children:M.showOnLogin?"Enabled":"Disabled"})}),p.jsx("td",{className:"p-4",children:p.jsx("span",{className:"text-light-text-secondary dark:text-dark-text-secondary text-sm",children:new Date(M.createdAt).toLocaleDateString()})}),p.jsx("td",{className:"p-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>A(M),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-primary-accent hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md transition-colors",children:p.jsx(di,{className:"w-4 h-4"})}),p.jsx("button",{onClick:()=>E(M.id),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-red-500 hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md transition-colors",children:p.jsx(Qa,{className:"w-4 h-4"})})]})})]},M.id))})]})})}),u&&p.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-50 flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-2xl",children:[p.jsx("div",{className:"p-6 border-b border-light-border dark:border-dark-border",children:p.jsx("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:h?"Edit Announcement":"Create Announcement"})}),p.jsxs("div",{className:"p-6 space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Title *"}),p.jsx("input",{type:"text",value:D.title,onChange:M=>v(I=>({...I,title:M.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Announcement title",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Content *"}),p.jsx("textarea",{value:D.content,onChange:M=>v(I=>({...I,content:M.target.value})),rows:6,className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none resize-vertical",placeholder:"Announcement content (supports markdown)",required:!0})]}),p.jsxs("div",{className:"flex items-center gap-6",children:[p.jsxs("label",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",checked:D.active,onChange:M=>v(I=>({...I,active:M.target.checked})),className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),p.jsx("span",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:"Active"})]}),p.jsxs("label",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",checked:D.showOnLogin,onChange:M=>v(I=>({...I,showOnLogin:M.target.checked})),className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),p.jsx("span",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:"Show as login popup"})]})]})]}),p.jsxs("div",{className:"p-6 border-t border-light-border dark:border-dark-border flex justify-end gap-3",children:[p.jsx("button",{onClick:()=>d(!1),disabled:b,className:"px-4 py-2 text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary disabled:opacity-50",children:"Cancel"}),p.jsxs("button",{onClick:N,disabled:b||!D.title.trim()||!D.content.trim(),className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[b&&p.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-text-on-accent"}),b?"Saving...":h?"Update":"Create"]})]})]})})]})},wY=()=>p.jsx(vY,{}),vR=({children:r,requireAdmin:e=!1})=>{const{isAuthenticated:t,isAdmin:n}=ht();return t?e&&!n?p.jsx(AD,{to:"/",replace:!0}):p.jsx(p.Fragment,{children:r}):p.jsx(AD,{to:"/login",replace:!0})},kY=()=>{const{theme:r}=Ca();return Q.useEffect(()=>{const e=window.document.documentElement;r==="dark"?e.classList.add("dark"):e.classList.remove("dark")},[r]),p.jsx(KR,{children:p.jsx(k9,{children:p.jsxs(D9,{children:[p.jsx(_9,{}),p.jsxs(kL,{children:[p.jsxs(ir,{path:"/",element:p.jsx(vR,{children:p.jsx(P9,{})}),children:[p.jsx(ir,{index:!0,element:p.jsx(V9,{})}),p.jsx(ir,{path:"tools",element:p.jsx($9,{})}),p.jsx(ir,{path:"tools/:toolId",element:p.jsx(B$,{})}),p.jsx(ir,{path:"projects",element:p.jsx(Q$,{})}),p.jsx(ir,{path:"projects/:id",element:p.jsx(V$,{})}),p.jsx(ir,{path:"chat/:id",element:p.jsx(J$,{})}),p.jsx(ir,{path:"history",element:p.jsx(nY,{})}),p.jsx(ir,{path:"profiles",element:p.jsx(iY,{})}),p.jsx(ir,{path:"settings",element:p.jsx(sY,{})})]}),p.jsxs(ir,{path:"/admin",element:p.jsx(vR,{requireAdmin:!0,children:p.jsx(W9,{})}),children:[p.jsx(ir,{index:!0,element:p.jsx(dY,{})}),p.jsx(ir,{path:"tools",element:p.jsx(gY,{})}),p.jsx(ir,{path:"categories",element:p.jsx(bY,{})}),p.jsx(ir,{path:"users",element:p.jsx(xY,{})}),p.jsx(ir,{path:"announcements",element:p.jsx(wY,{})})]}),p.jsx(ir,{path:"*",element:p.jsx(AD,{to:"/",replace:!0})})]})]})})})};window.addEventListener("error",r=>{var t,n;if((t=r.message)!=null&&t.includes("ResizeObserver loop completed with undelivered notifications"))return;const e={message:r.message||"An unhandled error occurred",code:"UNHANDLED_FRONTEND_ERROR",details:((n=r.error)==null?void 0:n.stack)||`${r.filename}:${r.lineno}:${r.colno}`,timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"Global",severity:"critical",userId:window.BOLT_USER_ID,sessionId:window.BOLT_SESSION_ID,userAgent:navigator.userAgent};De.critical(e,{filename:r.filename,lineno:r.lineno,colno:r.colno}),r.preventDefault()});window.addEventListener("unhandledrejection",r=>{var t,n,i,a;if((n=(t=r.reason)==null?void 0:t.message)!=null&&n.includes("ResizeObserver loop completed with undelivered notifications"))return;const e={message:((i=r.reason)==null?void 0:i.message)||"An unhandled promise rejection occurred",code:"UNHANDLED_PROMISE_REJECTION",details:((a=r.reason)==null?void 0:a.stack)||JSON.stringify(r.reason),timestamp:new Date().toISOString(),correlationId:De.getCorrelationId(),component:"Global",severity:"critical",userId:window.BOLT_USER_ID,sessionId:window.BOLT_SESSION_ID,userAgent:navigator.userAgent};De.critical(e,{reason:r.reason}),r.preventDefault()});De.info("Application starting",{component:"Bootstrap",userAgent:navigator.userAgent,url:window.location.href,timestamp:new Date().toISOString()});console.log("🔧 AUTH DIAGNOSTIC: Application bootstrap started",{timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,tabVisible:!document.hidden,pageVisibility:document.visibilityState});window.addEventListener("beforeunload",()=>{console.log("🔧 AUTH DIAGNOSTIC: Page beforeunload event",{timestamp:new Date().toISOString(),currentAuthState:window.localStorage.getItem("artemo-auth-storage")})});window.addEventListener("pagehide",()=>{console.log("🔧 AUTH DIAGNOSTIC: Page pagehide event",{timestamp:new Date().toISOString()})});window.addEventListener("pageshow",r=>{console.log("🔧 AUTH DIAGNOSTIC: Page pageshow event",{timestamp:new Date().toISOString(),persisted:r.persisted})});const lI=document.getElementById("root");if(!lI){const r={message:"Critical application error: Root element not found",code:"MISSING_ROOT_ELEMENT",details:'Could not find root element with id="root" to mount React application',timestamp:new Date().toISOString(),component:"Bootstrap",severity:"critical"};throw De.critical(r),new Error("Could not find root element to mount to")}const DY=NM.createRoot(lI);DY.render(p.jsx(Bn.StrictMode,{children:p.jsx(XL,{children:p.jsx(u9,{children:p.jsx(i9,{children:p.jsx(kY,{})})})})}));
