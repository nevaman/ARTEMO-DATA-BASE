var vM=Object.defineProperty;var NN=r=>{throw TypeError(r)};var wM=(r,e,t)=>e in r?vM(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var We=(r,e,t)=>wM(r,typeof e!="symbol"?e+"":e,t),Pw=(r,e,t)=>e.has(r)||NN("Cannot "+t);var m=(r,e,t)=>(Pw(r,e,"read from private field"),t?t.call(r):e.get(r)),V=(r,e,t)=>e.has(r)?NN("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),L=(r,e,t,n)=>(Pw(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),$=(r,e,t)=>(Pw(r,e,"access private method"),t);var Hn=(r,e,t,n)=>({set _(i){L(r,e,i,t)},get _(){return m(r,e,n)}});import{r as AR,a as nx,b as kM,g as DM,c as Tc}from"./vendor-leHF9zIx.js";import{_ as _M,c as AM}from"./supabase-DCn-0kkW.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var zw={exports:{}},wg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UN;function SM(){if(UN)return wg;UN=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:r,type:n,key:s,ref:i!==void 0?i:null,props:a}}return wg.Fragment=e,wg.jsx=t,wg.jsxs=t,wg}var RN;function EM(){return RN||(RN=1,zw.exports=SM()),zw.exports}var f=EM(),Q=AR();const Tn=nx(Q);var Ww={exports:{}},kg={},Hw={exports:{}},qw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jN;function TM(){return jN||(jN=1,(function(r){function e(P,B){var ee=P.length;P.push(B);e:for(;0<ee;){var Y=ee-1>>>1,H=P[Y];if(0<i(H,B))P[Y]=B,P[ee]=H,ee=Y;else break e}}function t(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var B=P[0],ee=P.pop();if(ee!==B){P[0]=ee;e:for(var Y=0,H=P.length,J=H>>>1;Y<J;){var ie=2*(Y+1)-1,z=P[ie],ge=ie+1,ve=P[ge];if(0>i(z,ee))ge<H&&0>i(ve,z)?(P[Y]=ve,P[ge]=ee,Y=ge):(P[Y]=z,P[ie]=ee,Y=ie);else if(ge<H&&0>i(ve,ee))P[Y]=ve,P[ge]=ee,Y=ge;else break e}}return B}function i(P,B){var ee=P.sortIndex-B.sortIndex;return ee!==0?ee:P.id-B.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();r.unstable_now=function(){return s.now()-l}}var u=[],d=[],h=1,g=null,b=3,x=!1,k=!1,v=!1,w=!1,D=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function N(P){for(var B=t(d);B!==null;){if(B.callback===null)n(d);else if(B.startTime<=P)n(d),B.sortIndex=B.expirationTime,e(u,B);else break;B=t(d)}}function E(P){if(v=!1,N(P),!k)if(t(u)!==null)k=!0,C||(C=!0,R());else{var B=t(d);B!==null&&X(E,B.startTime-P)}}var C=!1,j=-1,M=5,O=-1;function F(){return w?!0:!(r.unstable_now()-O<M)}function G(){if(w=!1,C){var P=r.unstable_now();O=P;var B=!0;try{e:{k=!1,v&&(v=!1,_(j),j=-1),x=!0;var ee=b;try{t:{for(N(P),g=t(u);g!==null&&!(g.expirationTime>P&&F());){var Y=g.callback;if(typeof Y=="function"){g.callback=null,b=g.priorityLevel;var H=Y(g.expirationTime<=P);if(P=r.unstable_now(),typeof H=="function"){g.callback=H,N(P),B=!0;break t}g===t(u)&&n(u),N(P)}else n(u);g=t(u)}if(g!==null)B=!0;else{var J=t(d);J!==null&&X(E,J.startTime-P),B=!1}}break e}finally{g=null,b=ee,x=!1}B=void 0}}finally{B?R():C=!1}}}var R;if(typeof A=="function")R=function(){A(G)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,U=W.port2;W.port1.onmessage=G,R=function(){U.postMessage(null)}}else R=function(){D(G,0)};function X(P,B){j=D(function(){P(r.unstable_now())},B)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(P){P.callback=null},r.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<P?Math.floor(1e3/P):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(P){switch(b){case 1:case 2:case 3:var B=3;break;default:B=b}var ee=b;b=B;try{return P()}finally{b=ee}},r.unstable_requestPaint=function(){w=!0},r.unstable_runWithPriority=function(P,B){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var ee=b;b=P;try{return B()}finally{b=ee}},r.unstable_scheduleCallback=function(P,B,ee){var Y=r.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?Y+ee:Y):ee=Y,P){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ee+H,P={id:h++,callback:B,priorityLevel:P,startTime:ee,expirationTime:H,sortIndex:-1},ee>Y?(P.sortIndex=ee,e(d,P),t(u)===null&&P===t(d)&&(v?(_(j),j=-1):v=!0,X(E,ee-Y))):(P.sortIndex=H,e(u,P),k||x||(k=!0,C||(C=!0,R()))),P},r.unstable_shouldYield=F,r.unstable_wrapCallback=function(P){var B=b;return function(){var ee=b;b=B;try{return P.apply(this,arguments)}finally{b=ee}}}})(qw)),qw}var FN;function CM(){return FN||(FN=1,Hw.exports=TM()),Hw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IN;function NM(){if(IN)return kg;IN=1;var r=CM(),e=AR(),t=kM();function n(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)c+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var c=o,p=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(p=c.return),o=c.return;while(o)}return c.tag===3?p:null}function s(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function l(o){if(a(o)!==o)throw Error(n(188))}function u(o){var c=o.alternate;if(!c){if(c=a(o),c===null)throw Error(n(188));return c!==o?null:o}for(var p=o,y=c;;){var S=p.return;if(S===null)break;var T=S.alternate;if(T===null){if(y=S.return,y!==null){p=y;continue}break}if(S.child===T.child){for(T=S.child;T;){if(T===p)return l(S),o;if(T===y)return l(S),c;T=T.sibling}throw Error(n(188))}if(p.return!==y.return)p=S,y=T;else{for(var q=!1,Z=S.child;Z;){if(Z===p){q=!0,p=S,y=T;break}if(Z===y){q=!0,y=S,p=T;break}Z=Z.sibling}if(!q){for(Z=T.child;Z;){if(Z===p){q=!0,p=T,y=S;break}if(Z===y){q=!0,y=T,p=S;break}Z=Z.sibling}if(!q)throw Error(n(189))}}if(p.alternate!==y)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?o:c}function d(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=d(o),c!==null)return c;o=o.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),A=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function R(o){return o===null||typeof o!="object"?null:(o=G&&o[G]||o["@@iterator"],typeof o=="function"?o:null)}var W=Symbol.for("react.client.reference");function U(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===W?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case k:return"Fragment";case w:return"Profiler";case v:return"StrictMode";case E:return"Suspense";case C:return"SuspenseList";case O:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case x:return"Portal";case A:return(o.displayName||"Context")+".Provider";case _:return(o._context.displayName||"Context")+".Consumer";case N:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case j:return c=o.displayName||null,c!==null?c:U(o.type)||"Memo";case M:c=o._payload,o=o._init;try{return U(o(c))}catch{}}return null}var X=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},Y=[],H=-1;function J(o){return{current:o}}function ie(o){0>H||(o.current=Y[H],Y[H]=null,H--)}function z(o,c){H++,Y[H]=o.current,o.current=c}var ge=J(null),ve=J(null),je=J(null),Ie=J(null);function Pe(o,c){switch(z(je,c),z(ve,o),z(ge,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?iN(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=iN(c),o=aN(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ie(ge),z(ge,o)}function fe(){ie(ge),ie(ve),ie(je)}function Ue(o){o.memoizedState!==null&&z(Ie,o);var c=ge.current,p=aN(c,o.type);c!==p&&(z(ve,o),z(ge,p))}function be(o){ve.current===o&&(ie(ge),ie(ve)),Ie.current===o&&(ie(Ie),mg._currentValue=ee)}var Fe=Object.prototype.hasOwnProperty,$e=r.unstable_scheduleCallback,I=r.unstable_cancelCallback,he=r.unstable_shouldYield,oe=r.unstable_requestPaint,re=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,Ce=r.unstable_UserBlockingPriority,Ne=r.unstable_NormalPriority,pe=r.unstable_LowPriority,se=r.unstable_IdlePriority,de=r.log,ye=r.unstable_setDisableYieldValue,ae=null,ke=null;function Me(o){if(typeof de=="function"&&ye(o),ke&&typeof ke.setStrictMode=="function")try{ke.setStrictMode(ae,o)}catch{}}var ze=Math.clz32?Math.clz32:xe,Ge=Math.log,at=Math.LN2;function xe(o){return o>>>=0,o===0?32:31-(Ge(o)/at|0)|0}var Re=256,Ve=4194304;function Ze(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Ke(o,c,p){var y=o.pendingLanes;if(y===0)return 0;var S=0,T=o.suspendedLanes,q=o.pingedLanes;o=o.warmLanes;var Z=y&134217727;return Z!==0?(y=Z&~T,y!==0?S=Ze(y):(q&=Z,q!==0?S=Ze(q):p||(p=Z&~o,p!==0&&(S=Ze(p))))):(Z=y&~T,Z!==0?S=Ze(Z):q!==0?S=Ze(q):p||(p=y&~o,p!==0&&(S=Ze(p)))),S===0?0:c!==0&&c!==S&&(c&T)===0&&(T=S&-S,p=c&-c,T>=p||T===32&&(p&4194048)!==0)?c:S}function ft(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function yt(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jn(){var o=Re;return Re<<=1,(Re&4194048)===0&&(Re=256),o}function mi(){var o=Ve;return Ve<<=1,(Ve&62914560)===0&&(Ve=4194304),o}function Ki(o){for(var c=[],p=0;31>p;p++)c.push(o);return c}function K(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function te(o,c,p,y,S,T){var q=o.pendingLanes;o.pendingLanes=p,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=p,o.entangledLanes&=p,o.errorRecoveryDisabledLanes&=p,o.shellSuspendCounter=0;var Z=o.entanglements,le=o.expirationTimes,_e=o.hiddenUpdates;for(p=q&~p;0<p;){var Oe=31-ze(p),Be=1<<Oe;Z[Oe]=0,le[Oe]=-1;var Se=_e[Oe];if(Se!==null)for(_e[Oe]=null,Oe=0;Oe<Se.length;Oe++){var Te=Se[Oe];Te!==null&&(Te.lane&=-536870913)}p&=~Be}y!==0&&ce(o,y,0),T!==0&&S===0&&o.tag!==0&&(o.suspendedLanes|=T&~(q&~c))}function ce(o,c,p){o.pendingLanes|=c,o.suspendedLanes&=~c;var y=31-ze(c);o.entangledLanes|=c,o.entanglements[y]=o.entanglements[y]|1073741824|p&4194090}function Ee(o,c){var p=o.entangledLanes|=c;for(o=o.entanglements;p;){var y=31-ze(p),S=1<<y;S&c|o[y]&c&&(o[y]|=c),p&=~S}}function Xe(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function ot(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Gt(){var o=B.p;return o!==0?o:(o=window.event,o===void 0?32:_N(o.type))}function Sr(o,c){var p=B.p;try{return B.p=o,c()}finally{B.p=p}}var Un=Math.random().toString(36).slice(2),ln="__reactFiber$"+Un,un="__reactProps$"+Un,Zr="__reactContainer$"+Un,Na="__reactEvents$"+Un,Bs="__reactListeners$"+Un,Qi="__reactHandles$"+Un,ts="__reactResources$"+Un,Ua="__reactMarker$"+Un;function Rn(o){delete o[ln],delete o[un],delete o[Na],delete o[Bs],delete o[Qi]}function Ps(o){var c=o[ln];if(c)return c;for(var p=o.parentNode;p;){if(c=p[Zr]||p[ln]){if(p=c.alternate,c.child!==null||p!==null&&p.child!==null)for(o=cN(o);o!==null;){if(p=o[ln])return p;o=cN(o)}return c}o=p,p=o.parentNode}return null}function bi(o){if(o=o[ln]||o[Zr]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function sl(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(n(33))}function Hd(o){var c=o[ts];return c||(c=o[ts]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function er(o){o[Ua]=!0}var GS=new Set,$S={};function Gc(o,c){qd(o,c),qd(o+"Capture",c)}function qd(o,c){for($S[o]=c,o=0;o<c.length;o++)GS.add(c[o])}var hI=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),YS={},KS={};function fI(o){return Fe.call(KS,o)?!0:Fe.call(YS,o)?!1:hI.test(o)?KS[o]=!0:(YS[o]=!0,!1)}function yx(o,c,p){if(fI(c))if(p===null)o.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var y=c.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+p)}}function vx(o,c,p){if(p===null)o.removeAttribute(c);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+p)}}function zs(o,c,p,y){if(y===null)o.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(p);return}o.setAttributeNS(c,p,""+y)}}var F1,QS;function Vd(o){if(F1===void 0)try{throw Error()}catch(p){var c=p.stack.trim().match(/\n( *(at )?)/);F1=c&&c[1]||"",QS=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+F1+o+QS}var I1=!1;function O1(o,c){if(!o||I1)return"";I1=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var Be=function(){throw Error()};if(Object.defineProperty(Be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Be,[])}catch(Te){var Se=Te}Reflect.construct(o,[],Be)}else{try{Be.call()}catch(Te){Se=Te}o.call(Be.prototype)}}else{try{throw Error()}catch(Te){Se=Te}(Be=o())&&typeof Be.catch=="function"&&Be.catch(function(){})}}catch(Te){if(Te&&Se&&typeof Te.stack=="string")return[Te.stack,Se.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=y.DetermineComponentFrameRoot(),q=T[0],Z=T[1];if(q&&Z){var le=q.split(`
`),_e=Z.split(`
`);for(S=y=0;y<le.length&&!le[y].includes("DetermineComponentFrameRoot");)y++;for(;S<_e.length&&!_e[S].includes("DetermineComponentFrameRoot");)S++;if(y===le.length||S===_e.length)for(y=le.length-1,S=_e.length-1;1<=y&&0<=S&&le[y]!==_e[S];)S--;for(;1<=y&&0<=S;y--,S--)if(le[y]!==_e[S]){if(y!==1||S!==1)do if(y--,S--,0>S||le[y]!==_e[S]){var Oe=`
`+le[y].replace(" at new "," at ");return o.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",o.displayName)),Oe}while(1<=y&&0<=S);break}}}finally{I1=!1,Error.prepareStackTrace=p}return(p=o?o.displayName||o.name:"")?Vd(p):""}function pI(o){switch(o.tag){case 26:case 27:case 5:return Vd(o.type);case 16:return Vd("Lazy");case 13:return Vd("Suspense");case 19:return Vd("SuspenseList");case 0:case 15:return O1(o.type,!1);case 11:return O1(o.type.render,!1);case 1:return O1(o.type,!0);case 31:return Vd("Activity");default:return""}}function ZS(o){try{var c="";do c+=pI(o),o=o.return;while(o);return c}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function Zi(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function JS(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function gI(o){var c=JS(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),y=""+o[c];if(!o.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var S=p.get,T=p.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return S.call(this)},set:function(q){y=""+q,T.call(this,q)}}),Object.defineProperty(o,c,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(q){y=""+q},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function wx(o){o._valueTracker||(o._valueTracker=gI(o))}function eE(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var p=c.getValue(),y="";return o&&(y=JS(o)?o.checked?"true":"false":o.value),o=y,o!==p?(c.setValue(o),!0):!1}function kx(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var mI=/[\n"\\]/g;function Ji(o){return o.replace(mI,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function M1(o,c,p,y,S,T,q,Z){o.name="",q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?o.type=q:o.removeAttribute("type"),c!=null?q==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+Zi(c)):o.value!==""+Zi(c)&&(o.value=""+Zi(c)):q!=="submit"&&q!=="reset"||o.removeAttribute("value"),c!=null?L1(o,q,Zi(c)):p!=null?L1(o,q,Zi(p)):y!=null&&o.removeAttribute("value"),S==null&&T!=null&&(o.defaultChecked=!!T),S!=null&&(o.checked=S&&typeof S!="function"&&typeof S!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?o.name=""+Zi(Z):o.removeAttribute("name")}function tE(o,c,p,y,S,T,q,Z){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(o.type=T),c!=null||p!=null){if(!(T!=="submit"&&T!=="reset"||c!=null))return;p=p!=null?""+Zi(p):"",c=c!=null?""+Zi(c):p,Z||c===o.value||(o.value=c),o.defaultValue=c}y=y??S,y=typeof y!="function"&&typeof y!="symbol"&&!!y,o.checked=Z?o.checked:!!y,o.defaultChecked=!!y,q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(o.name=q)}function L1(o,c,p){c==="number"&&kx(o.ownerDocument)===o||o.defaultValue===""+p||(o.defaultValue=""+p)}function Xd(o,c,p,y){if(o=o.options,c){c={};for(var S=0;S<p.length;S++)c["$"+p[S]]=!0;for(p=0;p<o.length;p++)S=c.hasOwnProperty("$"+o[p].value),o[p].selected!==S&&(o[p].selected=S),S&&y&&(o[p].defaultSelected=!0)}else{for(p=""+Zi(p),c=null,S=0;S<o.length;S++){if(o[S].value===p){o[S].selected=!0,y&&(o[S].defaultSelected=!0);return}c!==null||o[S].disabled||(c=o[S])}c!==null&&(c.selected=!0)}}function nE(o,c,p){if(c!=null&&(c=""+Zi(c),c!==o.value&&(o.value=c),p==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=p!=null?""+Zi(p):""}function rE(o,c,p,y){if(c==null){if(y!=null){if(p!=null)throw Error(n(92));if(X(y)){if(1<y.length)throw Error(n(93));y=y[0]}p=y}p==null&&(p=""),c=p}p=Zi(c),o.defaultValue=p,y=o.textContent,y===p&&y!==""&&y!==null&&(o.value=y)}function Gd(o,c){if(c){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=c;return}}o.textContent=c}var bI=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function iE(o,c,p){var y=c.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":y?o.setProperty(c,p):typeof p!="number"||p===0||bI.has(c)?c==="float"?o.cssFloat=p:o[c]=(""+p).trim():o[c]=p+"px"}function aE(o,c,p){if(c!=null&&typeof c!="object")throw Error(n(62));if(o=o.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||c!=null&&c.hasOwnProperty(y)||(y.indexOf("--")===0?o.setProperty(y,""):y==="float"?o.cssFloat="":o[y]="");for(var S in c)y=c[S],c.hasOwnProperty(S)&&p[S]!==y&&iE(o,S,y)}else for(var T in c)c.hasOwnProperty(T)&&iE(o,T,c[T])}function B1(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xI=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yI=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dx(o){return yI.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var P1=null;function z1(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var $d=null,Yd=null;function sE(o){var c=bi(o);if(c&&(o=c.stateNode)){var p=o[un]||null;e:switch(o=c.stateNode,c.type){case"input":if(M1(o,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),c=p.name,p.type==="radio"&&c!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Ji(""+c)+'"][type="radio"]'),c=0;c<p.length;c++){var y=p[c];if(y!==o&&y.form===o.form){var S=y[un]||null;if(!S)throw Error(n(90));M1(y,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(c=0;c<p.length;c++)y=p[c],y.form===o.form&&eE(y)}break e;case"textarea":nE(o,p.value,p.defaultValue);break e;case"select":c=p.value,c!=null&&Xd(o,!!p.multiple,c,!1)}}}var W1=!1;function oE(o,c,p){if(W1)return o(c,p);W1=!0;try{var y=o(c);return y}finally{if(W1=!1,($d!==null||Yd!==null)&&(ly(),$d&&(c=$d,o=Yd,Yd=$d=null,sE(c),o)))for(c=0;c<o.length;c++)sE(o[c])}}function Cp(o,c){var p=o.stateNode;if(p===null)return null;var y=p[un]||null;if(y===null)return null;p=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(n(231,c,typeof p));return p}var Ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),H1=!1;if(Ws)try{var Np={};Object.defineProperty(Np,"passive",{get:function(){H1=!0}}),window.addEventListener("test",Np,Np),window.removeEventListener("test",Np,Np)}catch{H1=!1}var ol=null,q1=null,_x=null;function lE(){if(_x)return _x;var o,c=q1,p=c.length,y,S="value"in ol?ol.value:ol.textContent,T=S.length;for(o=0;o<p&&c[o]===S[o];o++);var q=p-o;for(y=1;y<=q&&c[p-y]===S[T-y];y++);return _x=S.slice(o,1<y?1-y:void 0)}function Ax(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Sx(){return!0}function cE(){return!1}function Jr(o){function c(p,y,S,T,q){this._reactName=p,this._targetInst=S,this.type=y,this.nativeEvent=T,this.target=q,this.currentTarget=null;for(var Z in o)o.hasOwnProperty(Z)&&(p=o[Z],this[Z]=p?p(T):T[Z]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Sx:cE,this.isPropagationStopped=cE,this}return h(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Sx)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Sx)},persist:function(){},isPersistent:Sx}),c}var $c={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ex=Jr($c),Up=h({},$c,{view:0,detail:0}),vI=Jr(Up),V1,X1,Rp,Tx=h({},Up,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$1,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Rp&&(Rp&&o.type==="mousemove"?(V1=o.screenX-Rp.screenX,X1=o.screenY-Rp.screenY):X1=V1=0,Rp=o),V1)},movementY:function(o){return"movementY"in o?o.movementY:X1}}),uE=Jr(Tx),wI=h({},Tx,{dataTransfer:0}),kI=Jr(wI),DI=h({},Up,{relatedTarget:0}),G1=Jr(DI),_I=h({},$c,{animationName:0,elapsedTime:0,pseudoElement:0}),AI=Jr(_I),SI=h({},$c,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),EI=Jr(SI),TI=h({},$c,{data:0}),dE=Jr(TI),CI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RI(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=UI[o])?!!c[o]:!1}function $1(){return RI}var jI=h({},Up,{key:function(o){if(o.key){var c=CI[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Ax(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?NI[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$1,charCode:function(o){return o.type==="keypress"?Ax(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Ax(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),FI=Jr(jI),II=h({},Tx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hE=Jr(II),OI=h({},Up,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$1}),MI=Jr(OI),LI=h({},$c,{propertyName:0,elapsedTime:0,pseudoElement:0}),BI=Jr(LI),PI=h({},Tx,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),zI=Jr(PI),WI=h({},$c,{newState:0,oldState:0}),HI=Jr(WI),qI=[9,13,27,32],Y1=Ws&&"CompositionEvent"in window,jp=null;Ws&&"documentMode"in document&&(jp=document.documentMode);var VI=Ws&&"TextEvent"in window&&!jp,fE=Ws&&(!Y1||jp&&8<jp&&11>=jp),pE=" ",gE=!1;function mE(o,c){switch(o){case"keyup":return qI.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bE(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Kd=!1;function XI(o,c){switch(o){case"compositionend":return bE(c);case"keypress":return c.which!==32?null:(gE=!0,pE);case"textInput":return o=c.data,o===pE&&gE?null:o;default:return null}}function GI(o,c){if(Kd)return o==="compositionend"||!Y1&&mE(o,c)?(o=lE(),_x=q1=ol=null,Kd=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return fE&&c.locale!=="ko"?null:c.data;default:return null}}var $I={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xE(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!$I[o.type]:c==="textarea"}function yE(o,c,p,y){$d?Yd?Yd.push(y):Yd=[y]:$d=y,c=py(c,"onChange"),0<c.length&&(p=new Ex("onChange","change",null,p,y),o.push({event:p,listeners:c}))}var Fp=null,Ip=null;function YI(o){JC(o,0)}function Cx(o){var c=sl(o);if(eE(c))return o}function vE(o,c){if(o==="change")return c}var wE=!1;if(Ws){var K1;if(Ws){var Q1="oninput"in document;if(!Q1){var kE=document.createElement("div");kE.setAttribute("oninput","return;"),Q1=typeof kE.oninput=="function"}K1=Q1}else K1=!1;wE=K1&&(!document.documentMode||9<document.documentMode)}function DE(){Fp&&(Fp.detachEvent("onpropertychange",_E),Ip=Fp=null)}function _E(o){if(o.propertyName==="value"&&Cx(Ip)){var c=[];yE(c,Ip,o,z1(o)),oE(YI,c)}}function KI(o,c,p){o==="focusin"?(DE(),Fp=c,Ip=p,Fp.attachEvent("onpropertychange",_E)):o==="focusout"&&DE()}function QI(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Cx(Ip)}function ZI(o,c){if(o==="click")return Cx(c)}function JI(o,c){if(o==="input"||o==="change")return Cx(c)}function eO(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var xi=typeof Object.is=="function"?Object.is:eO;function Op(o,c){if(xi(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var p=Object.keys(o),y=Object.keys(c);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var S=p[y];if(!Fe.call(c,S)||!xi(o[S],c[S]))return!1}return!0}function AE(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function SE(o,c){var p=AE(o);o=0;for(var y;p;){if(p.nodeType===3){if(y=o+p.textContent.length,o<=c&&y>=c)return{node:p,offset:c-o};o=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=AE(p)}}function EE(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?EE(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function TE(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=kx(o.document);c instanceof o.HTMLIFrameElement;){try{var p=typeof c.contentWindow.location.href=="string"}catch{p=!1}if(p)o=c.contentWindow;else break;c=kx(o.document)}return c}function Z1(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var tO=Ws&&"documentMode"in document&&11>=document.documentMode,Qd=null,J1=null,Mp=null,e2=!1;function CE(o,c,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;e2||Qd==null||Qd!==kx(y)||(y=Qd,"selectionStart"in y&&Z1(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Mp&&Op(Mp,y)||(Mp=y,y=py(J1,"onSelect"),0<y.length&&(c=new Ex("onSelect","select",null,c,p),o.push({event:c,listeners:y}),c.target=Qd)))}function Yc(o,c){var p={};return p[o.toLowerCase()]=c.toLowerCase(),p["Webkit"+o]="webkit"+c,p["Moz"+o]="moz"+c,p}var Zd={animationend:Yc("Animation","AnimationEnd"),animationiteration:Yc("Animation","AnimationIteration"),animationstart:Yc("Animation","AnimationStart"),transitionrun:Yc("Transition","TransitionRun"),transitionstart:Yc("Transition","TransitionStart"),transitioncancel:Yc("Transition","TransitionCancel"),transitionend:Yc("Transition","TransitionEnd")},t2={},NE={};Ws&&(NE=document.createElement("div").style,"AnimationEvent"in window||(delete Zd.animationend.animation,delete Zd.animationiteration.animation,delete Zd.animationstart.animation),"TransitionEvent"in window||delete Zd.transitionend.transition);function Kc(o){if(t2[o])return t2[o];if(!Zd[o])return o;var c=Zd[o],p;for(p in c)if(c.hasOwnProperty(p)&&p in NE)return t2[o]=c[p];return o}var UE=Kc("animationend"),RE=Kc("animationiteration"),jE=Kc("animationstart"),nO=Kc("transitionrun"),rO=Kc("transitionstart"),iO=Kc("transitioncancel"),FE=Kc("transitionend"),IE=new Map,n2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");n2.push("scrollEnd");function Ra(o,c){IE.set(o,c),Gc(c,[o])}var OE=new WeakMap;function ea(o,c){if(typeof o=="object"&&o!==null){var p=OE.get(o);return p!==void 0?p:(c={value:o,source:c,stack:ZS(c)},OE.set(o,c),c)}return{value:o,source:c,stack:ZS(c)}}var ta=[],Jd=0,r2=0;function Nx(){for(var o=Jd,c=r2=Jd=0;c<o;){var p=ta[c];ta[c++]=null;var y=ta[c];ta[c++]=null;var S=ta[c];ta[c++]=null;var T=ta[c];if(ta[c++]=null,y!==null&&S!==null){var q=y.pending;q===null?S.next=S:(S.next=q.next,q.next=S),y.pending=S}T!==0&&ME(p,S,T)}}function Ux(o,c,p,y){ta[Jd++]=o,ta[Jd++]=c,ta[Jd++]=p,ta[Jd++]=y,r2|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function i2(o,c,p,y){return Ux(o,c,p,y),Rx(o)}function eh(o,c){return Ux(o,null,null,c),Rx(o)}function ME(o,c,p){o.lanes|=p;var y=o.alternate;y!==null&&(y.lanes|=p);for(var S=!1,T=o.return;T!==null;)T.childLanes|=p,y=T.alternate,y!==null&&(y.childLanes|=p),T.tag===22&&(o=T.stateNode,o===null||o._visibility&1||(S=!0)),o=T,T=T.return;return o.tag===3?(T=o.stateNode,S&&c!==null&&(S=31-ze(p),o=T.hiddenUpdates,y=o[S],y===null?o[S]=[c]:y.push(c),c.lane=p|536870912),T):null}function Rx(o){if(50<lg)throw lg=0,uw=null,Error(n(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var th={};function aO(o,c,p,y){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yi(o,c,p,y){return new aO(o,c,p,y)}function a2(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Hs(o,c){var p=o.alternate;return p===null?(p=yi(o.tag,c,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=c,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&65011712,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,c=o.dependencies,p.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p.refCleanup=o.refCleanup,p}function LE(o,c){o.flags&=65011714;var p=o.alternate;return p===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=p.childLanes,o.lanes=p.lanes,o.child=p.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=p.memoizedProps,o.memoizedState=p.memoizedState,o.updateQueue=p.updateQueue,o.type=p.type,c=p.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function jx(o,c,p,y,S,T){var q=0;if(y=o,typeof o=="function")a2(o)&&(q=1);else if(typeof o=="string")q=oM(o,p,ge.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case O:return o=yi(31,p,c,S),o.elementType=O,o.lanes=T,o;case k:return Qc(p.children,S,T,c);case v:q=8,S|=24;break;case w:return o=yi(12,p,c,S|2),o.elementType=w,o.lanes=T,o;case E:return o=yi(13,p,c,S),o.elementType=E,o.lanes=T,o;case C:return o=yi(19,p,c,S),o.elementType=C,o.lanes=T,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case D:case A:q=10;break e;case _:q=9;break e;case N:q=11;break e;case j:q=14;break e;case M:q=16,y=null;break e}q=29,p=Error(n(130,o===null?"null":typeof o,"")),y=null}return c=yi(q,p,c,S),c.elementType=o,c.type=y,c.lanes=T,c}function Qc(o,c,p,y){return o=yi(7,o,y,c),o.lanes=p,o}function s2(o,c,p){return o=yi(6,o,null,c),o.lanes=p,o}function o2(o,c,p){return c=yi(4,o.children!==null?o.children:[],o.key,c),c.lanes=p,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var nh=[],rh=0,Fx=null,Ix=0,na=[],ra=0,Zc=null,qs=1,Vs="";function Jc(o,c){nh[rh++]=Ix,nh[rh++]=Fx,Fx=o,Ix=c}function BE(o,c,p){na[ra++]=qs,na[ra++]=Vs,na[ra++]=Zc,Zc=o;var y=qs;o=Vs;var S=32-ze(y)-1;y&=~(1<<S),p+=1;var T=32-ze(c)+S;if(30<T){var q=S-S%5;T=(y&(1<<q)-1).toString(32),y>>=q,S-=q,qs=1<<32-ze(c)+S|p<<S|y,Vs=T+o}else qs=1<<T|p<<S|y,Vs=o}function l2(o){o.return!==null&&(Jc(o,1),BE(o,1,0))}function c2(o){for(;o===Fx;)Fx=nh[--rh],nh[rh]=null,Ix=nh[--rh],nh[rh]=null;for(;o===Zc;)Zc=na[--ra],na[ra]=null,Vs=na[--ra],na[ra]=null,qs=na[--ra],na[ra]=null}var Lr=null,wn=null,Ot=!1,eu=null,ns=!1,u2=Error(n(519));function tu(o){var c=Error(n(418,""));throw Pp(ea(c,o)),u2}function PE(o){var c=o.stateNode,p=o.type,y=o.memoizedProps;switch(c[ln]=o,c[un]=y,p){case"dialog":St("cancel",c),St("close",c);break;case"iframe":case"object":case"embed":St("load",c);break;case"video":case"audio":for(p=0;p<ug.length;p++)St(ug[p],c);break;case"source":St("error",c);break;case"img":case"image":case"link":St("error",c),St("load",c);break;case"details":St("toggle",c);break;case"input":St("invalid",c),tE(c,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),wx(c);break;case"select":St("invalid",c);break;case"textarea":St("invalid",c),rE(c,y.value,y.defaultValue,y.children),wx(c)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||c.textContent===""+p||y.suppressHydrationWarning===!0||rN(c.textContent,p)?(y.popover!=null&&(St("beforetoggle",c),St("toggle",c)),y.onScroll!=null&&St("scroll",c),y.onScrollEnd!=null&&St("scrollend",c),y.onClick!=null&&(c.onclick=gy),c=!0):c=!1,c||tu(o)}function zE(o){for(Lr=o.return;Lr;)switch(Lr.tag){case 5:case 13:ns=!1;return;case 27:case 3:ns=!0;return;default:Lr=Lr.return}}function Lp(o){if(o!==Lr)return!1;if(!Ot)return zE(o),Ot=!0,!1;var c=o.tag,p;if((p=c!==3&&c!==27)&&((p=c===5)&&(p=o.type,p=!(p!=="form"&&p!=="button")||Sw(o.type,o.memoizedProps)),p=!p),p&&wn&&tu(o),zE(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(p=o.data,p==="/$"){if(c===0){wn=Fa(o.nextSibling);break e}c--}else p!=="$"&&p!=="$!"&&p!=="$?"||c++;o=o.nextSibling}wn=null}}else c===27?(c=wn,Dl(o.type)?(o=Nw,Nw=null,wn=o):wn=c):wn=Lr?Fa(o.stateNode.nextSibling):null;return!0}function Bp(){wn=Lr=null,Ot=!1}function WE(){var o=eu;return o!==null&&(ni===null?ni=o:ni.push.apply(ni,o),eu=null),o}function Pp(o){eu===null?eu=[o]:eu.push(o)}var d2=J(null),nu=null,Xs=null;function ll(o,c,p){z(d2,c._currentValue),c._currentValue=p}function Gs(o){o._currentValue=d2.current,ie(d2)}function h2(o,c,p){for(;o!==null;){var y=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),o===p)break;o=o.return}}function f2(o,c,p,y){var S=o.child;for(S!==null&&(S.return=o);S!==null;){var T=S.dependencies;if(T!==null){var q=S.child;T=T.firstContext;e:for(;T!==null;){var Z=T;T=S;for(var le=0;le<c.length;le++)if(Z.context===c[le]){T.lanes|=p,Z=T.alternate,Z!==null&&(Z.lanes|=p),h2(T.return,p,o),y||(q=null);break e}T=Z.next}}else if(S.tag===18){if(q=S.return,q===null)throw Error(n(341));q.lanes|=p,T=q.alternate,T!==null&&(T.lanes|=p),h2(q,p,o),q=null}else q=S.child;if(q!==null)q.return=S;else for(q=S;q!==null;){if(q===o){q=null;break}if(S=q.sibling,S!==null){S.return=q.return,q=S;break}q=q.return}S=q}}function zp(o,c,p,y){o=null;for(var S=c,T=!1;S!==null;){if(!T){if((S.flags&524288)!==0)T=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var q=S.alternate;if(q===null)throw Error(n(387));if(q=q.memoizedProps,q!==null){var Z=S.type;xi(S.pendingProps.value,q.value)||(o!==null?o.push(Z):o=[Z])}}else if(S===Ie.current){if(q=S.alternate,q===null)throw Error(n(387));q.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(o!==null?o.push(mg):o=[mg])}S=S.return}o!==null&&f2(c,o,p,y),c.flags|=262144}function Ox(o){for(o=o.firstContext;o!==null;){if(!xi(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function ru(o){nu=o,Xs=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Er(o){return HE(nu,o)}function Mx(o,c){return nu===null&&ru(o),HE(o,c)}function HE(o,c){var p=c._currentValue;if(c={context:c,memoizedValue:p,next:null},Xs===null){if(o===null)throw Error(n(308));Xs=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else Xs=Xs.next=c;return p}var sO=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(p,y){o.push(y)}};this.abort=function(){c.aborted=!0,o.forEach(function(p){return p()})}},oO=r.unstable_scheduleCallback,lO=r.unstable_NormalPriority,zn={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function p2(){return{controller:new sO,data:new Map,refCount:0}}function Wp(o){o.refCount--,o.refCount===0&&oO(lO,function(){o.controller.abort()})}var Hp=null,g2=0,ih=0,ah=null;function cO(o,c){if(Hp===null){var p=Hp=[];g2=0,ih=bw(),ah={status:"pending",value:void 0,then:function(y){p.push(y)}}}return g2++,c.then(qE,qE),c}function qE(){if(--g2===0&&Hp!==null){ah!==null&&(ah.status="fulfilled");var o=Hp;Hp=null,ih=0,ah=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function uO(o,c){var p=[],y={status:"pending",value:null,reason:null,then:function(S){p.push(S)}};return o.then(function(){y.status="fulfilled",y.value=c;for(var S=0;S<p.length;S++)(0,p[S])(c)},function(S){for(y.status="rejected",y.reason=S,S=0;S<p.length;S++)(0,p[S])(void 0)}),y}var VE=P.S;P.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&cO(o,c),VE!==null&&VE(o,c)};var iu=J(null);function m2(){var o=iu.current;return o!==null?o:rn.pooledCache}function Lx(o,c){c===null?z(iu,iu.current):z(iu,c.pool)}function XE(){var o=m2();return o===null?null:{parent:zn._currentValue,pool:o}}var qp=Error(n(460)),GE=Error(n(474)),Bx=Error(n(542)),b2={then:function(){}};function $E(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Px(){}function YE(o,c,p){switch(p=o[p],p===void 0?o.push(c):p!==c&&(c.then(Px,Px),c=p),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,QE(o),o;default:if(typeof c.status=="string")c.then(Px,Px);else{if(o=rn,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=c,o.status="pending",o.then(function(y){if(c.status==="pending"){var S=c;S.status="fulfilled",S.value=y}},function(y){if(c.status==="pending"){var S=c;S.status="rejected",S.reason=y}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,QE(o),o}throw Vp=c,qp}}var Vp=null;function KE(){if(Vp===null)throw Error(n(459));var o=Vp;return Vp=null,o}function QE(o){if(o===qp||o===Bx)throw Error(n(483))}var cl=!1;function x2(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function y2(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function ul(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function dl(o,c,p){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(Wt&2)!==0){var S=y.pending;return S===null?c.next=c:(c.next=S.next,S.next=c),y.pending=c,c=Rx(o),ME(o,null,p),c}return Ux(o,y,c,p),Rx(o)}function Xp(o,c,p){if(c=c.updateQueue,c!==null&&(c=c.shared,(p&4194048)!==0)){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,Ee(o,p)}}function v2(o,c){var p=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var S=null,T=null;if(p=p.firstBaseUpdate,p!==null){do{var q={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};T===null?S=T=q:T=T.next=q,p=p.next}while(p!==null);T===null?S=T=c:T=T.next=c}else S=T=c;p={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:T,shared:y.shared,callbacks:y.callbacks},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=c:o.next=c,p.lastBaseUpdate=c}var w2=!1;function Gp(){if(w2){var o=ah;if(o!==null)throw o}}function $p(o,c,p,y){w2=!1;var S=o.updateQueue;cl=!1;var T=S.firstBaseUpdate,q=S.lastBaseUpdate,Z=S.shared.pending;if(Z!==null){S.shared.pending=null;var le=Z,_e=le.next;le.next=null,q===null?T=_e:q.next=_e,q=le;var Oe=o.alternate;Oe!==null&&(Oe=Oe.updateQueue,Z=Oe.lastBaseUpdate,Z!==q&&(Z===null?Oe.firstBaseUpdate=_e:Z.next=_e,Oe.lastBaseUpdate=le))}if(T!==null){var Be=S.baseState;q=0,Oe=_e=le=null,Z=T;do{var Se=Z.lane&-536870913,Te=Se!==Z.lane;if(Te?(Ut&Se)===Se:(y&Se)===Se){Se!==0&&Se===ih&&(w2=!0),Oe!==null&&(Oe=Oe.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});e:{var ht=o,lt=Z;Se=c;var Kt=p;switch(lt.tag){case 1:if(ht=lt.payload,typeof ht=="function"){Be=ht.call(Kt,Be,Se);break e}Be=ht;break e;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=lt.payload,Se=typeof ht=="function"?ht.call(Kt,Be,Se):ht,Se==null)break e;Be=h({},Be,Se);break e;case 2:cl=!0}}Se=Z.callback,Se!==null&&(o.flags|=64,Te&&(o.flags|=8192),Te=S.callbacks,Te===null?S.callbacks=[Se]:Te.push(Se))}else Te={lane:Se,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Oe===null?(_e=Oe=Te,le=Be):Oe=Oe.next=Te,q|=Se;if(Z=Z.next,Z===null){if(Z=S.shared.pending,Z===null)break;Te=Z,Z=Te.next,Te.next=null,S.lastBaseUpdate=Te,S.shared.pending=null}}while(!0);Oe===null&&(le=Be),S.baseState=le,S.firstBaseUpdate=_e,S.lastBaseUpdate=Oe,T===null&&(S.shared.lanes=0),yl|=q,o.lanes=q,o.memoizedState=Be}}function ZE(o,c){if(typeof o!="function")throw Error(n(191,o));o.call(c)}function JE(o,c){var p=o.callbacks;if(p!==null)for(o.callbacks=null,o=0;o<p.length;o++)ZE(p[o],c)}var sh=J(null),zx=J(0);function eT(o,c){o=eo,z(zx,o),z(sh,c),eo=o|c.baseLanes}function k2(){z(zx,eo),z(sh,sh.current)}function D2(){eo=zx.current,ie(sh),ie(zx)}var hl=0,vt=null,$t=null,jn=null,Wx=!1,oh=!1,au=!1,Hx=0,Yp=0,lh=null,dO=0;function _n(){throw Error(n(321))}function _2(o,c){if(c===null)return!1;for(var p=0;p<c.length&&p<o.length;p++)if(!xi(o[p],c[p]))return!1;return!0}function A2(o,c,p,y,S,T){return hl=T,vt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,P.H=o===null||o.memoizedState===null?MT:LT,au=!1,T=p(y,S),au=!1,oh&&(T=nT(c,p,y,S)),tT(o),T}function tT(o){P.H=Yx;var c=$t!==null&&$t.next!==null;if(hl=0,jn=$t=vt=null,Wx=!1,Yp=0,lh=null,c)throw Error(n(300));o===null||tr||(o=o.dependencies,o!==null&&Ox(o)&&(tr=!0))}function nT(o,c,p,y){vt=o;var S=0;do{if(oh&&(lh=null),Yp=0,oh=!1,25<=S)throw Error(n(301));if(S+=1,jn=$t=null,o.updateQueue!=null){var T=o.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}P.H=xO,T=c(p,y)}while(oh);return T}function hO(){var o=P.H,c=o.useState()[0];return c=typeof c.then=="function"?Kp(c):c,o=o.useState()[0],($t!==null?$t.memoizedState:null)!==o&&(vt.flags|=1024),c}function S2(){var o=Hx!==0;return Hx=0,o}function E2(o,c,p){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~p}function T2(o){if(Wx){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Wx=!1}hl=0,jn=$t=vt=null,oh=!1,Yp=Hx=0,lh=null}function ei(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jn===null?vt.memoizedState=jn=o:jn=jn.next=o,jn}function Fn(){if($t===null){var o=vt.alternate;o=o!==null?o.memoizedState:null}else o=$t.next;var c=jn===null?vt.memoizedState:jn.next;if(c!==null)jn=c,$t=o;else{if(o===null)throw vt.alternate===null?Error(n(467)):Error(n(310));$t=o,o={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},jn===null?vt.memoizedState=jn=o:jn=jn.next=o}return jn}function C2(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kp(o){var c=Yp;return Yp+=1,lh===null&&(lh=[]),o=YE(lh,o,c),c=vt,(jn===null?c.memoizedState:jn.next)===null&&(c=c.alternate,P.H=c===null||c.memoizedState===null?MT:LT),o}function qx(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Kp(o);if(o.$$typeof===A)return Er(o)}throw Error(n(438,String(o)))}function N2(o){var c=null,p=vt.updateQueue;if(p!==null&&(c=p.memoCache),c==null){var y=vt.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(c={data:y.data.map(function(S){return S.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),p===null&&(p=C2(),vt.updateQueue=p),p.memoCache=c,p=c.data[c.index],p===void 0)for(p=c.data[c.index]=Array(o),y=0;y<o;y++)p[y]=F;return c.index++,p}function $s(o,c){return typeof c=="function"?c(o):c}function Vx(o){var c=Fn();return U2(c,$t,o)}function U2(o,c,p){var y=o.queue;if(y===null)throw Error(n(311));y.lastRenderedReducer=p;var S=o.baseQueue,T=y.pending;if(T!==null){if(S!==null){var q=S.next;S.next=T.next,T.next=q}c.baseQueue=S=T,y.pending=null}if(T=o.baseState,S===null)o.memoizedState=T;else{c=S.next;var Z=q=null,le=null,_e=c,Oe=!1;do{var Be=_e.lane&-536870913;if(Be!==_e.lane?(Ut&Be)===Be:(hl&Be)===Be){var Se=_e.revertLane;if(Se===0)le!==null&&(le=le.next={lane:0,revertLane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),Be===ih&&(Oe=!0);else if((hl&Se)===Se){_e=_e.next,Se===ih&&(Oe=!0);continue}else Be={lane:0,revertLane:_e.revertLane,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},le===null?(Z=le=Be,q=T):le=le.next=Be,vt.lanes|=Se,yl|=Se;Be=_e.action,au&&p(T,Be),T=_e.hasEagerState?_e.eagerState:p(T,Be)}else Se={lane:Be,revertLane:_e.revertLane,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},le===null?(Z=le=Se,q=T):le=le.next=Se,vt.lanes|=Be,yl|=Be;_e=_e.next}while(_e!==null&&_e!==c);if(le===null?q=T:le.next=Z,!xi(T,o.memoizedState)&&(tr=!0,Oe&&(p=ah,p!==null)))throw p;o.memoizedState=T,o.baseState=q,o.baseQueue=le,y.lastRenderedState=T}return S===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function R2(o){var c=Fn(),p=c.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=o;var y=p.dispatch,S=p.pending,T=c.memoizedState;if(S!==null){p.pending=null;var q=S=S.next;do T=o(T,q.action),q=q.next;while(q!==S);xi(T,c.memoizedState)||(tr=!0),c.memoizedState=T,c.baseQueue===null&&(c.baseState=T),p.lastRenderedState=T}return[T,y]}function rT(o,c,p){var y=vt,S=Fn(),T=Ot;if(T){if(p===void 0)throw Error(n(407));p=p()}else p=c();var q=!xi(($t||S).memoizedState,p);q&&(S.memoizedState=p,tr=!0),S=S.queue;var Z=sT.bind(null,y,S,o);if(Qp(2048,8,Z,[o]),S.getSnapshot!==c||q||jn!==null&&jn.memoizedState.tag&1){if(y.flags|=2048,ch(9,Xx(),aT.bind(null,y,S,p,c),null),rn===null)throw Error(n(349));T||(hl&124)!==0||iT(y,c,p)}return p}function iT(o,c,p){o.flags|=16384,o={getSnapshot:c,value:p},c=vt.updateQueue,c===null?(c=C2(),vt.updateQueue=c,c.stores=[o]):(p=c.stores,p===null?c.stores=[o]:p.push(o))}function aT(o,c,p,y){c.value=p,c.getSnapshot=y,oT(c)&&lT(o)}function sT(o,c,p){return p(function(){oT(c)&&lT(o)})}function oT(o){var c=o.getSnapshot;o=o.value;try{var p=c();return!xi(o,p)}catch{return!0}}function lT(o){var c=eh(o,2);c!==null&&_i(c,o,2)}function j2(o){var c=ei();if(typeof o=="function"){var p=o;if(o=p(),au){Me(!0);try{p()}finally{Me(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:o},c}function cT(o,c,p,y){return o.baseState=p,U2(o,$t,typeof y=="function"?y:$s)}function fO(o,c,p,y,S){if($x(o))throw Error(n(485));if(o=c.action,o!==null){var T={payload:S,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){T.listeners.push(q)}};P.T!==null?p(!0):T.isTransition=!1,y(T),p=c.pending,p===null?(T.next=c.pending=T,uT(c,T)):(T.next=p.next,c.pending=p.next=T)}}function uT(o,c){var p=c.action,y=c.payload,S=o.state;if(c.isTransition){var T=P.T,q={};P.T=q;try{var Z=p(S,y),le=P.S;le!==null&&le(q,Z),dT(o,c,Z)}catch(_e){F2(o,c,_e)}finally{P.T=T}}else try{T=p(S,y),dT(o,c,T)}catch(_e){F2(o,c,_e)}}function dT(o,c,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){hT(o,c,y)},function(y){return F2(o,c,y)}):hT(o,c,p)}function hT(o,c,p){c.status="fulfilled",c.value=p,fT(c),o.state=p,c=o.pending,c!==null&&(p=c.next,p===c?o.pending=null:(p=p.next,c.next=p,uT(o,p)))}function F2(o,c,p){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do c.status="rejected",c.reason=p,fT(c),c=c.next;while(c!==y)}o.action=null}function fT(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function pT(o,c){return c}function gT(o,c){if(Ot){var p=rn.formState;if(p!==null){e:{var y=vt;if(Ot){if(wn){t:{for(var S=wn,T=ns;S.nodeType!==8;){if(!T){S=null;break t}if(S=Fa(S.nextSibling),S===null){S=null;break t}}T=S.data,S=T==="F!"||T==="F"?S:null}if(S){wn=Fa(S.nextSibling),y=S.data==="F!";break e}}tu(y)}y=!1}y&&(c=p[0])}}return p=ei(),p.memoizedState=p.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pT,lastRenderedState:c},p.queue=y,p=FT.bind(null,vt,y),y.dispatch=p,y=j2(!1),T=B2.bind(null,vt,!1,y.queue),y=ei(),S={state:c,dispatch:null,action:o,pending:null},y.queue=S,p=fO.bind(null,vt,S,T,p),S.dispatch=p,y.memoizedState=o,[c,p,!1]}function mT(o){var c=Fn();return bT(c,$t,o)}function bT(o,c,p){if(c=U2(o,c,pT)[0],o=Vx($s)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var y=Kp(c)}catch(q){throw q===qp?Bx:q}else y=c;c=Fn();var S=c.queue,T=S.dispatch;return p!==c.memoizedState&&(vt.flags|=2048,ch(9,Xx(),pO.bind(null,S,p),null)),[y,T,o]}function pO(o,c){o.action=c}function xT(o){var c=Fn(),p=$t;if(p!==null)return bT(c,p,o);Fn(),c=c.memoizedState,p=Fn();var y=p.queue.dispatch;return p.memoizedState=o,[c,y,!1]}function ch(o,c,p,y){return o={tag:o,create:p,deps:y,inst:c,next:null},c=vt.updateQueue,c===null&&(c=C2(),vt.updateQueue=c),p=c.lastEffect,p===null?c.lastEffect=o.next=o:(y=p.next,p.next=o,o.next=y,c.lastEffect=o),o}function Xx(){return{destroy:void 0,resource:void 0}}function yT(){return Fn().memoizedState}function Gx(o,c,p,y){var S=ei();y=y===void 0?null:y,vt.flags|=o,S.memoizedState=ch(1|c,Xx(),p,y)}function Qp(o,c,p,y){var S=Fn();y=y===void 0?null:y;var T=S.memoizedState.inst;$t!==null&&y!==null&&_2(y,$t.memoizedState.deps)?S.memoizedState=ch(c,T,p,y):(vt.flags|=o,S.memoizedState=ch(1|c,T,p,y))}function vT(o,c){Gx(8390656,8,o,c)}function wT(o,c){Qp(2048,8,o,c)}function kT(o,c){return Qp(4,2,o,c)}function DT(o,c){return Qp(4,4,o,c)}function _T(o,c){if(typeof c=="function"){o=o();var p=c(o);return function(){typeof p=="function"?p():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function AT(o,c,p){p=p!=null?p.concat([o]):null,Qp(4,4,_T.bind(null,c,o),p)}function I2(){}function ST(o,c){var p=Fn();c=c===void 0?null:c;var y=p.memoizedState;return c!==null&&_2(c,y[1])?y[0]:(p.memoizedState=[o,c],o)}function ET(o,c){var p=Fn();c=c===void 0?null:c;var y=p.memoizedState;if(c!==null&&_2(c,y[1]))return y[0];if(y=o(),au){Me(!0);try{o()}finally{Me(!1)}}return p.memoizedState=[y,c],y}function O2(o,c,p){return p===void 0||(hl&1073741824)!==0?o.memoizedState=c:(o.memoizedState=p,o=NC(),vt.lanes|=o,yl|=o,p)}function TT(o,c,p,y){return xi(p,c)?p:sh.current!==null?(o=O2(o,p,y),xi(o,c)||(tr=!0),o):(hl&42)===0?(tr=!0,o.memoizedState=p):(o=NC(),vt.lanes|=o,yl|=o,c)}function CT(o,c,p,y,S){var T=B.p;B.p=T!==0&&8>T?T:8;var q=P.T,Z={};P.T=Z,B2(o,!1,c,p);try{var le=S(),_e=P.S;if(_e!==null&&_e(Z,le),le!==null&&typeof le=="object"&&typeof le.then=="function"){var Oe=uO(le,y);Zp(o,c,Oe,Di(o))}else Zp(o,c,y,Di(o))}catch(Be){Zp(o,c,{then:function(){},status:"rejected",reason:Be},Di())}finally{B.p=T,P.T=q}}function gO(){}function M2(o,c,p,y){if(o.tag!==5)throw Error(n(476));var S=NT(o).queue;CT(o,S,c,ee,p===null?gO:function(){return UT(o),p(y)})}function NT(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:ee},next:null};var p={};return c.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:p},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function UT(o){var c=NT(o).next.queue;Zp(o,c,{},Di())}function L2(){return Er(mg)}function RT(){return Fn().memoizedState}function jT(){return Fn().memoizedState}function mO(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var p=Di();o=ul(p);var y=dl(c,o,p);y!==null&&(_i(y,c,p),Xp(y,c,p)),c={cache:p2()},o.payload=c;return}c=c.return}}function bO(o,c,p){var y=Di();p={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},$x(o)?IT(c,p):(p=i2(o,c,p,y),p!==null&&(_i(p,o,y),OT(p,c,y)))}function FT(o,c,p){var y=Di();Zp(o,c,p,y)}function Zp(o,c,p,y){var S={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if($x(o))IT(c,S);else{var T=o.alternate;if(o.lanes===0&&(T===null||T.lanes===0)&&(T=c.lastRenderedReducer,T!==null))try{var q=c.lastRenderedState,Z=T(q,p);if(S.hasEagerState=!0,S.eagerState=Z,xi(Z,q))return Ux(o,c,S,0),rn===null&&Nx(),!1}catch{}finally{}if(p=i2(o,c,S,y),p!==null)return _i(p,o,y),OT(p,c,y),!0}return!1}function B2(o,c,p,y){if(y={lane:2,revertLane:bw(),action:y,hasEagerState:!1,eagerState:null,next:null},$x(o)){if(c)throw Error(n(479))}else c=i2(o,p,y,2),c!==null&&_i(c,o,2)}function $x(o){var c=o.alternate;return o===vt||c!==null&&c===vt}function IT(o,c){oh=Wx=!0;var p=o.pending;p===null?c.next=c:(c.next=p.next,p.next=c),o.pending=c}function OT(o,c,p){if((p&4194048)!==0){var y=c.lanes;y&=o.pendingLanes,p|=y,c.lanes=p,Ee(o,p)}}var Yx={readContext:Er,use:qx,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useInsertionEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useSyncExternalStore:_n,useId:_n,useHostTransitionStatus:_n,useFormState:_n,useActionState:_n,useOptimistic:_n,useMemoCache:_n,useCacheRefresh:_n},MT={readContext:Er,use:qx,useCallback:function(o,c){return ei().memoizedState=[o,c===void 0?null:c],o},useContext:Er,useEffect:vT,useImperativeHandle:function(o,c,p){p=p!=null?p.concat([o]):null,Gx(4194308,4,_T.bind(null,c,o),p)},useLayoutEffect:function(o,c){return Gx(4194308,4,o,c)},useInsertionEffect:function(o,c){Gx(4,2,o,c)},useMemo:function(o,c){var p=ei();c=c===void 0?null:c;var y=o();if(au){Me(!0);try{o()}finally{Me(!1)}}return p.memoizedState=[y,c],y},useReducer:function(o,c,p){var y=ei();if(p!==void 0){var S=p(c);if(au){Me(!0);try{p(c)}finally{Me(!1)}}}else S=c;return y.memoizedState=y.baseState=S,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:S},y.queue=o,o=o.dispatch=bO.bind(null,vt,o),[y.memoizedState,o]},useRef:function(o){var c=ei();return o={current:o},c.memoizedState=o},useState:function(o){o=j2(o);var c=o.queue,p=FT.bind(null,vt,c);return c.dispatch=p,[o.memoizedState,p]},useDebugValue:I2,useDeferredValue:function(o,c){var p=ei();return O2(p,o,c)},useTransition:function(){var o=j2(!1);return o=CT.bind(null,vt,o.queue,!0,!1),ei().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,p){var y=vt,S=ei();if(Ot){if(p===void 0)throw Error(n(407));p=p()}else{if(p=c(),rn===null)throw Error(n(349));(Ut&124)!==0||iT(y,c,p)}S.memoizedState=p;var T={value:p,getSnapshot:c};return S.queue=T,vT(sT.bind(null,y,T,o),[o]),y.flags|=2048,ch(9,Xx(),aT.bind(null,y,T,p,c),null),p},useId:function(){var o=ei(),c=rn.identifierPrefix;if(Ot){var p=Vs,y=qs;p=(y&~(1<<32-ze(y)-1)).toString(32)+p,c=""+c+"R"+p,p=Hx++,0<p&&(c+="H"+p.toString(32)),c+=""}else p=dO++,c=""+c+"r"+p.toString(32)+"";return o.memoizedState=c},useHostTransitionStatus:L2,useFormState:gT,useActionState:gT,useOptimistic:function(o){var c=ei();c.memoizedState=c.baseState=o;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=p,c=B2.bind(null,vt,!0,p),p.dispatch=c,[o,c]},useMemoCache:N2,useCacheRefresh:function(){return ei().memoizedState=mO.bind(null,vt)}},LT={readContext:Er,use:qx,useCallback:ST,useContext:Er,useEffect:wT,useImperativeHandle:AT,useInsertionEffect:kT,useLayoutEffect:DT,useMemo:ET,useReducer:Vx,useRef:yT,useState:function(){return Vx($s)},useDebugValue:I2,useDeferredValue:function(o,c){var p=Fn();return TT(p,$t.memoizedState,o,c)},useTransition:function(){var o=Vx($s)[0],c=Fn().memoizedState;return[typeof o=="boolean"?o:Kp(o),c]},useSyncExternalStore:rT,useId:RT,useHostTransitionStatus:L2,useFormState:mT,useActionState:mT,useOptimistic:function(o,c){var p=Fn();return cT(p,$t,o,c)},useMemoCache:N2,useCacheRefresh:jT},xO={readContext:Er,use:qx,useCallback:ST,useContext:Er,useEffect:wT,useImperativeHandle:AT,useInsertionEffect:kT,useLayoutEffect:DT,useMemo:ET,useReducer:R2,useRef:yT,useState:function(){return R2($s)},useDebugValue:I2,useDeferredValue:function(o,c){var p=Fn();return $t===null?O2(p,o,c):TT(p,$t.memoizedState,o,c)},useTransition:function(){var o=R2($s)[0],c=Fn().memoizedState;return[typeof o=="boolean"?o:Kp(o),c]},useSyncExternalStore:rT,useId:RT,useHostTransitionStatus:L2,useFormState:xT,useActionState:xT,useOptimistic:function(o,c){var p=Fn();return $t!==null?cT(p,$t,o,c):(p.baseState=o,[o,p.queue.dispatch])},useMemoCache:N2,useCacheRefresh:jT},uh=null,Jp=0;function Kx(o){var c=Jp;return Jp+=1,uh===null&&(uh=[]),YE(uh,o,c)}function eg(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function Qx(o,c){throw c.$$typeof===g?Error(n(525)):(o=Object.prototype.toString.call(c),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function BT(o){var c=o._init;return c(o._payload)}function PT(o){function c(we,me){if(o){var De=we.deletions;De===null?(we.deletions=[me],we.flags|=16):De.push(me)}}function p(we,me){if(!o)return null;for(;me!==null;)c(we,me),me=me.sibling;return null}function y(we){for(var me=new Map;we!==null;)we.key!==null?me.set(we.key,we):me.set(we.index,we),we=we.sibling;return me}function S(we,me){return we=Hs(we,me),we.index=0,we.sibling=null,we}function T(we,me,De){return we.index=De,o?(De=we.alternate,De!==null?(De=De.index,De<me?(we.flags|=67108866,me):De):(we.flags|=67108866,me)):(we.flags|=1048576,me)}function q(we){return o&&we.alternate===null&&(we.flags|=67108866),we}function Z(we,me,De,Le){return me===null||me.tag!==6?(me=s2(De,we.mode,Le),me.return=we,me):(me=S(me,De),me.return=we,me)}function le(we,me,De,Le){var nt=De.type;return nt===k?Oe(we,me,De.props.children,Le,De.key):me!==null&&(me.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===M&&BT(nt)===me.type)?(me=S(me,De.props),eg(me,De),me.return=we,me):(me=jx(De.type,De.key,De.props,null,we.mode,Le),eg(me,De),me.return=we,me)}function _e(we,me,De,Le){return me===null||me.tag!==4||me.stateNode.containerInfo!==De.containerInfo||me.stateNode.implementation!==De.implementation?(me=o2(De,we.mode,Le),me.return=we,me):(me=S(me,De.children||[]),me.return=we,me)}function Oe(we,me,De,Le,nt){return me===null||me.tag!==7?(me=Qc(De,we.mode,Le,nt),me.return=we,me):(me=S(me,De),me.return=we,me)}function Be(we,me,De){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=s2(""+me,we.mode,De),me.return=we,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case b:return De=jx(me.type,me.key,me.props,null,we.mode,De),eg(De,me),De.return=we,De;case x:return me=o2(me,we.mode,De),me.return=we,me;case M:var Le=me._init;return me=Le(me._payload),Be(we,me,De)}if(X(me)||R(me))return me=Qc(me,we.mode,De,null),me.return=we,me;if(typeof me.then=="function")return Be(we,Kx(me),De);if(me.$$typeof===A)return Be(we,Mx(we,me),De);Qx(we,me)}return null}function Se(we,me,De,Le){var nt=me!==null?me.key:null;if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return nt!==null?null:Z(we,me,""+De,Le);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case b:return De.key===nt?le(we,me,De,Le):null;case x:return De.key===nt?_e(we,me,De,Le):null;case M:return nt=De._init,De=nt(De._payload),Se(we,me,De,Le)}if(X(De)||R(De))return nt!==null?null:Oe(we,me,De,Le,null);if(typeof De.then=="function")return Se(we,me,Kx(De),Le);if(De.$$typeof===A)return Se(we,me,Mx(we,De),Le);Qx(we,De)}return null}function Te(we,me,De,Le,nt){if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return we=we.get(De)||null,Z(me,we,""+Le,nt);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case b:return we=we.get(Le.key===null?De:Le.key)||null,le(me,we,Le,nt);case x:return we=we.get(Le.key===null?De:Le.key)||null,_e(me,we,Le,nt);case M:var wt=Le._init;return Le=wt(Le._payload),Te(we,me,De,Le,nt)}if(X(Le)||R(Le))return we=we.get(De)||null,Oe(me,we,Le,nt,null);if(typeof Le.then=="function")return Te(we,me,De,Kx(Le),nt);if(Le.$$typeof===A)return Te(we,me,De,Mx(me,Le),nt);Qx(me,Le)}return null}function ht(we,me,De,Le){for(var nt=null,wt=null,it=me,dt=me=0,rr=null;it!==null&&dt<De.length;dt++){it.index>dt?(rr=it,it=null):rr=it.sibling;var It=Se(we,it,De[dt],Le);if(It===null){it===null&&(it=rr);break}o&&it&&It.alternate===null&&c(we,it),me=T(It,me,dt),wt===null?nt=It:wt.sibling=It,wt=It,it=rr}if(dt===De.length)return p(we,it),Ot&&Jc(we,dt),nt;if(it===null){for(;dt<De.length;dt++)it=Be(we,De[dt],Le),it!==null&&(me=T(it,me,dt),wt===null?nt=it:wt.sibling=it,wt=it);return Ot&&Jc(we,dt),nt}for(it=y(it);dt<De.length;dt++)rr=Te(it,we,dt,De[dt],Le),rr!==null&&(o&&rr.alternate!==null&&it.delete(rr.key===null?dt:rr.key),me=T(rr,me,dt),wt===null?nt=rr:wt.sibling=rr,wt=rr);return o&&it.forEach(function(Tl){return c(we,Tl)}),Ot&&Jc(we,dt),nt}function lt(we,me,De,Le){if(De==null)throw Error(n(151));for(var nt=null,wt=null,it=me,dt=me=0,rr=null,It=De.next();it!==null&&!It.done;dt++,It=De.next()){it.index>dt?(rr=it,it=null):rr=it.sibling;var Tl=Se(we,it,It.value,Le);if(Tl===null){it===null&&(it=rr);break}o&&it&&Tl.alternate===null&&c(we,it),me=T(Tl,me,dt),wt===null?nt=Tl:wt.sibling=Tl,wt=Tl,it=rr}if(It.done)return p(we,it),Ot&&Jc(we,dt),nt;if(it===null){for(;!It.done;dt++,It=De.next())It=Be(we,It.value,Le),It!==null&&(me=T(It,me,dt),wt===null?nt=It:wt.sibling=It,wt=It);return Ot&&Jc(we,dt),nt}for(it=y(it);!It.done;dt++,It=De.next())It=Te(it,we,dt,It.value,Le),It!==null&&(o&&It.alternate!==null&&it.delete(It.key===null?dt:It.key),me=T(It,me,dt),wt===null?nt=It:wt.sibling=It,wt=It);return o&&it.forEach(function(yM){return c(we,yM)}),Ot&&Jc(we,dt),nt}function Kt(we,me,De,Le){if(typeof De=="object"&&De!==null&&De.type===k&&De.key===null&&(De=De.props.children),typeof De=="object"&&De!==null){switch(De.$$typeof){case b:e:{for(var nt=De.key;me!==null;){if(me.key===nt){if(nt=De.type,nt===k){if(me.tag===7){p(we,me.sibling),Le=S(me,De.props.children),Le.return=we,we=Le;break e}}else if(me.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===M&&BT(nt)===me.type){p(we,me.sibling),Le=S(me,De.props),eg(Le,De),Le.return=we,we=Le;break e}p(we,me);break}else c(we,me);me=me.sibling}De.type===k?(Le=Qc(De.props.children,we.mode,Le,De.key),Le.return=we,we=Le):(Le=jx(De.type,De.key,De.props,null,we.mode,Le),eg(Le,De),Le.return=we,we=Le)}return q(we);case x:e:{for(nt=De.key;me!==null;){if(me.key===nt)if(me.tag===4&&me.stateNode.containerInfo===De.containerInfo&&me.stateNode.implementation===De.implementation){p(we,me.sibling),Le=S(me,De.children||[]),Le.return=we,we=Le;break e}else{p(we,me);break}else c(we,me);me=me.sibling}Le=o2(De,we.mode,Le),Le.return=we,we=Le}return q(we);case M:return nt=De._init,De=nt(De._payload),Kt(we,me,De,Le)}if(X(De))return ht(we,me,De,Le);if(R(De)){if(nt=R(De),typeof nt!="function")throw Error(n(150));return De=nt.call(De),lt(we,me,De,Le)}if(typeof De.then=="function")return Kt(we,me,Kx(De),Le);if(De.$$typeof===A)return Kt(we,me,Mx(we,De),Le);Qx(we,De)}return typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint"?(De=""+De,me!==null&&me.tag===6?(p(we,me.sibling),Le=S(me,De),Le.return=we,we=Le):(p(we,me),Le=s2(De,we.mode,Le),Le.return=we,we=Le),q(we)):p(we,me)}return function(we,me,De,Le){try{Jp=0;var nt=Kt(we,me,De,Le);return uh=null,nt}catch(it){if(it===qp||it===Bx)throw it;var wt=yi(29,it,null,we.mode);return wt.lanes=Le,wt.return=we,wt}finally{}}}var dh=PT(!0),zT=PT(!1),ia=J(null),rs=null;function fl(o){var c=o.alternate;z(Wn,Wn.current&1),z(ia,o),rs===null&&(c===null||sh.current!==null||c.memoizedState!==null)&&(rs=o)}function WT(o){if(o.tag===22){if(z(Wn,Wn.current),z(ia,o),rs===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(rs=o)}}else pl()}function pl(){z(Wn,Wn.current),z(ia,ia.current)}function Ys(o){ie(ia),rs===o&&(rs=null),ie(Wn)}var Wn=J(0);function Zx(o){for(var c=o;c!==null;){if(c.tag===13){var p=c.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||Cw(p)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function P2(o,c,p,y){c=o.memoizedState,p=p(y,c),p=p==null?c:h({},c,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var z2={enqueueSetState:function(o,c,p){o=o._reactInternals;var y=Di(),S=ul(y);S.payload=c,p!=null&&(S.callback=p),c=dl(o,S,y),c!==null&&(_i(c,o,y),Xp(c,o,y))},enqueueReplaceState:function(o,c,p){o=o._reactInternals;var y=Di(),S=ul(y);S.tag=1,S.payload=c,p!=null&&(S.callback=p),c=dl(o,S,y),c!==null&&(_i(c,o,y),Xp(c,o,y))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var p=Di(),y=ul(p);y.tag=2,c!=null&&(y.callback=c),c=dl(o,y,p),c!==null&&(_i(c,o,p),Xp(c,o,p))}};function HT(o,c,p,y,S,T,q){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,T,q):c.prototype&&c.prototype.isPureReactComponent?!Op(p,y)||!Op(S,T):!0}function qT(o,c,p,y){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(p,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(p,y),c.state!==o&&z2.enqueueReplaceState(c,c.state,null)}function su(o,c){var p=c;if("ref"in c){p={};for(var y in c)y!=="ref"&&(p[y]=c[y])}if(o=o.defaultProps){p===c&&(p=h({},p));for(var S in o)p[S]===void 0&&(p[S]=o[S])}return p}var Jx=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function VT(o){Jx(o)}function XT(o){console.error(o)}function GT(o){Jx(o)}function ey(o,c){try{var p=o.onUncaughtError;p(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function $T(o,c,p){try{var y=o.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function W2(o,c,p){return p=ul(p),p.tag=3,p.payload={element:null},p.callback=function(){ey(o,c)},p}function YT(o){return o=ul(o),o.tag=3,o}function KT(o,c,p,y){var S=p.type.getDerivedStateFromError;if(typeof S=="function"){var T=y.value;o.payload=function(){return S(T)},o.callback=function(){$T(c,p,y)}}var q=p.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(o.callback=function(){$T(c,p,y),typeof S!="function"&&(vl===null?vl=new Set([this]):vl.add(this));var Z=y.stack;this.componentDidCatch(y.value,{componentStack:Z!==null?Z:""})})}function yO(o,c,p,y,S){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(c=p.alternate,c!==null&&zp(c,p,S,!0),p=ia.current,p!==null){switch(p.tag){case 13:return rs===null?hw():p.alternate===null&&kn===0&&(kn=3),p.flags&=-257,p.flags|=65536,p.lanes=S,y===b2?p.flags|=16384:(c=p.updateQueue,c===null?p.updateQueue=new Set([y]):c.add(y),pw(o,y,S)),!1;case 22:return p.flags|=65536,y===b2?p.flags|=16384:(c=p.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=c):(p=c.retryQueue,p===null?c.retryQueue=new Set([y]):p.add(y)),pw(o,y,S)),!1}throw Error(n(435,p.tag))}return pw(o,y,S),hw(),!1}if(Ot)return c=ia.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=S,y!==u2&&(o=Error(n(422),{cause:y}),Pp(ea(o,p)))):(y!==u2&&(c=Error(n(423),{cause:y}),Pp(ea(c,p))),o=o.current.alternate,o.flags|=65536,S&=-S,o.lanes|=S,y=ea(y,p),S=W2(o.stateNode,y,S),v2(o,S),kn!==4&&(kn=2)),!1;var T=Error(n(520),{cause:y});if(T=ea(T,p),og===null?og=[T]:og.push(T),kn!==4&&(kn=2),c===null)return!0;y=ea(y,p),p=c;do{switch(p.tag){case 3:return p.flags|=65536,o=S&-S,p.lanes|=o,o=W2(p.stateNode,y,o),v2(p,o),!1;case 1:if(c=p.type,T=p.stateNode,(p.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(vl===null||!vl.has(T))))return p.flags|=65536,S&=-S,p.lanes|=S,S=YT(S),KT(S,o,p,y),v2(p,S),!1}p=p.return}while(p!==null);return!1}var QT=Error(n(461)),tr=!1;function dr(o,c,p,y){c.child=o===null?zT(c,null,p,y):dh(c,o.child,p,y)}function ZT(o,c,p,y,S){p=p.render;var T=c.ref;if("ref"in y){var q={};for(var Z in y)Z!=="ref"&&(q[Z]=y[Z])}else q=y;return ru(c),y=A2(o,c,p,q,T,S),Z=S2(),o!==null&&!tr?(E2(o,c,S),Ks(o,c,S)):(Ot&&Z&&l2(c),c.flags|=1,dr(o,c,y,S),c.child)}function JT(o,c,p,y,S){if(o===null){var T=p.type;return typeof T=="function"&&!a2(T)&&T.defaultProps===void 0&&p.compare===null?(c.tag=15,c.type=T,eC(o,c,T,y,S)):(o=jx(p.type,null,y,c,c.mode,S),o.ref=c.ref,o.return=c,c.child=o)}if(T=o.child,!K2(o,S)){var q=T.memoizedProps;if(p=p.compare,p=p!==null?p:Op,p(q,y)&&o.ref===c.ref)return Ks(o,c,S)}return c.flags|=1,o=Hs(T,y),o.ref=c.ref,o.return=c,c.child=o}function eC(o,c,p,y,S){if(o!==null){var T=o.memoizedProps;if(Op(T,y)&&o.ref===c.ref)if(tr=!1,c.pendingProps=y=T,K2(o,S))(o.flags&131072)!==0&&(tr=!0);else return c.lanes=o.lanes,Ks(o,c,S)}return H2(o,c,p,y,S)}function tC(o,c,p){var y=c.pendingProps,S=y.children,T=o!==null?o.memoizedState:null;if(y.mode==="hidden"){if((c.flags&128)!==0){if(y=T!==null?T.baseLanes|p:p,o!==null){for(S=c.child=o.child,T=0;S!==null;)T=T|S.lanes|S.childLanes,S=S.sibling;c.childLanes=T&~y}else c.childLanes=0,c.child=null;return nC(o,c,y,p)}if((p&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Lx(c,T!==null?T.cachePool:null),T!==null?eT(c,T):k2(),WT(c);else return c.lanes=c.childLanes=536870912,nC(o,c,T!==null?T.baseLanes|p:p,p)}else T!==null?(Lx(c,T.cachePool),eT(c,T),pl(),c.memoizedState=null):(o!==null&&Lx(c,null),k2(),pl());return dr(o,c,S,p),c.child}function nC(o,c,p,y){var S=m2();return S=S===null?null:{parent:zn._currentValue,pool:S},c.memoizedState={baseLanes:p,cachePool:S},o!==null&&Lx(c,null),k2(),WT(c),o!==null&&zp(o,c,y,!0),null}function ty(o,c){var p=c.ref;if(p===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(o===null||o.ref!==p)&&(c.flags|=4194816)}}function H2(o,c,p,y,S){return ru(c),p=A2(o,c,p,y,void 0,S),y=S2(),o!==null&&!tr?(E2(o,c,S),Ks(o,c,S)):(Ot&&y&&l2(c),c.flags|=1,dr(o,c,p,S),c.child)}function rC(o,c,p,y,S,T){return ru(c),c.updateQueue=null,p=nT(c,y,p,S),tT(o),y=S2(),o!==null&&!tr?(E2(o,c,T),Ks(o,c,T)):(Ot&&y&&l2(c),c.flags|=1,dr(o,c,p,T),c.child)}function iC(o,c,p,y,S){if(ru(c),c.stateNode===null){var T=th,q=p.contextType;typeof q=="object"&&q!==null&&(T=Er(q)),T=new p(y,T),c.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=z2,c.stateNode=T,T._reactInternals=c,T=c.stateNode,T.props=y,T.state=c.memoizedState,T.refs={},x2(c),q=p.contextType,T.context=typeof q=="object"&&q!==null?Er(q):th,T.state=c.memoizedState,q=p.getDerivedStateFromProps,typeof q=="function"&&(P2(c,p,q,y),T.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(q=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),q!==T.state&&z2.enqueueReplaceState(T,T.state,null),$p(c,y,T,S),Gp(),T.state=c.memoizedState),typeof T.componentDidMount=="function"&&(c.flags|=4194308),y=!0}else if(o===null){T=c.stateNode;var Z=c.memoizedProps,le=su(p,Z);T.props=le;var _e=T.context,Oe=p.contextType;q=th,typeof Oe=="object"&&Oe!==null&&(q=Er(Oe));var Be=p.getDerivedStateFromProps;Oe=typeof Be=="function"||typeof T.getSnapshotBeforeUpdate=="function",Z=c.pendingProps!==Z,Oe||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(Z||_e!==q)&&qT(c,T,y,q),cl=!1;var Se=c.memoizedState;T.state=Se,$p(c,y,T,S),Gp(),_e=c.memoizedState,Z||Se!==_e||cl?(typeof Be=="function"&&(P2(c,p,Be,y),_e=c.memoizedState),(le=cl||HT(c,p,le,y,Se,_e,q))?(Oe||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(c.flags|=4194308)):(typeof T.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=_e),T.props=y,T.state=_e,T.context=q,y=le):(typeof T.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{T=c.stateNode,y2(o,c),q=c.memoizedProps,Oe=su(p,q),T.props=Oe,Be=c.pendingProps,Se=T.context,_e=p.contextType,le=th,typeof _e=="object"&&_e!==null&&(le=Er(_e)),Z=p.getDerivedStateFromProps,(_e=typeof Z=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(q!==Be||Se!==le)&&qT(c,T,y,le),cl=!1,Se=c.memoizedState,T.state=Se,$p(c,y,T,S),Gp();var Te=c.memoizedState;q!==Be||Se!==Te||cl||o!==null&&o.dependencies!==null&&Ox(o.dependencies)?(typeof Z=="function"&&(P2(c,p,Z,y),Te=c.memoizedState),(Oe=cl||HT(c,p,Oe,y,Se,Te,le)||o!==null&&o.dependencies!==null&&Ox(o.dependencies))?(_e||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(y,Te,le),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(y,Te,le)),typeof T.componentDidUpdate=="function"&&(c.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof T.componentDidUpdate!="function"||q===o.memoizedProps&&Se===o.memoizedState||(c.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||q===o.memoizedProps&&Se===o.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=Te),T.props=y,T.state=Te,T.context=le,y=Oe):(typeof T.componentDidUpdate!="function"||q===o.memoizedProps&&Se===o.memoizedState||(c.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||q===o.memoizedProps&&Se===o.memoizedState||(c.flags|=1024),y=!1)}return T=y,ty(o,c),y=(c.flags&128)!==0,T||y?(T=c.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:T.render(),c.flags|=1,o!==null&&y?(c.child=dh(c,o.child,null,S),c.child=dh(c,null,p,S)):dr(o,c,p,S),c.memoizedState=T.state,o=c.child):o=Ks(o,c,S),o}function aC(o,c,p,y){return Bp(),c.flags|=256,dr(o,c,p,y),c.child}var q2={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function V2(o){return{baseLanes:o,cachePool:XE()}}function X2(o,c,p){return o=o!==null?o.childLanes&~p:0,c&&(o|=aa),o}function sC(o,c,p){var y=c.pendingProps,S=!1,T=(c.flags&128)!==0,q;if((q=T)||(q=o!==null&&o.memoizedState===null?!1:(Wn.current&2)!==0),q&&(S=!0,c.flags&=-129),q=(c.flags&32)!==0,c.flags&=-33,o===null){if(Ot){if(S?fl(c):pl(),Ot){var Z=wn,le;if(le=Z){e:{for(le=Z,Z=ns;le.nodeType!==8;){if(!Z){Z=null;break e}if(le=Fa(le.nextSibling),le===null){Z=null;break e}}Z=le}Z!==null?(c.memoizedState={dehydrated:Z,treeContext:Zc!==null?{id:qs,overflow:Vs}:null,retryLane:536870912,hydrationErrors:null},le=yi(18,null,null,0),le.stateNode=Z,le.return=c,c.child=le,Lr=c,wn=null,le=!0):le=!1}le||tu(c)}if(Z=c.memoizedState,Z!==null&&(Z=Z.dehydrated,Z!==null))return Cw(Z)?c.lanes=32:c.lanes=536870912,null;Ys(c)}return Z=y.children,y=y.fallback,S?(pl(),S=c.mode,Z=ny({mode:"hidden",children:Z},S),y=Qc(y,S,p,null),Z.return=c,y.return=c,Z.sibling=y,c.child=Z,S=c.child,S.memoizedState=V2(p),S.childLanes=X2(o,q,p),c.memoizedState=q2,y):(fl(c),G2(c,Z))}if(le=o.memoizedState,le!==null&&(Z=le.dehydrated,Z!==null)){if(T)c.flags&256?(fl(c),c.flags&=-257,c=$2(o,c,p)):c.memoizedState!==null?(pl(),c.child=o.child,c.flags|=128,c=null):(pl(),S=y.fallback,Z=c.mode,y=ny({mode:"visible",children:y.children},Z),S=Qc(S,Z,p,null),S.flags|=2,y.return=c,S.return=c,y.sibling=S,c.child=y,dh(c,o.child,null,p),y=c.child,y.memoizedState=V2(p),y.childLanes=X2(o,q,p),c.memoizedState=q2,c=S);else if(fl(c),Cw(Z)){if(q=Z.nextSibling&&Z.nextSibling.dataset,q)var _e=q.dgst;q=_e,y=Error(n(419)),y.stack="",y.digest=q,Pp({value:y,source:null,stack:null}),c=$2(o,c,p)}else if(tr||zp(o,c,p,!1),q=(p&o.childLanes)!==0,tr||q){if(q=rn,q!==null&&(y=p&-p,y=(y&42)!==0?1:Xe(y),y=(y&(q.suspendedLanes|p))!==0?0:y,y!==0&&y!==le.retryLane))throw le.retryLane=y,eh(o,y),_i(q,o,y),QT;Z.data==="$?"||hw(),c=$2(o,c,p)}else Z.data==="$?"?(c.flags|=192,c.child=o.child,c=null):(o=le.treeContext,wn=Fa(Z.nextSibling),Lr=c,Ot=!0,eu=null,ns=!1,o!==null&&(na[ra++]=qs,na[ra++]=Vs,na[ra++]=Zc,qs=o.id,Vs=o.overflow,Zc=c),c=G2(c,y.children),c.flags|=4096);return c}return S?(pl(),S=y.fallback,Z=c.mode,le=o.child,_e=le.sibling,y=Hs(le,{mode:"hidden",children:y.children}),y.subtreeFlags=le.subtreeFlags&65011712,_e!==null?S=Hs(_e,S):(S=Qc(S,Z,p,null),S.flags|=2),S.return=c,y.return=c,y.sibling=S,c.child=y,y=S,S=c.child,Z=o.child.memoizedState,Z===null?Z=V2(p):(le=Z.cachePool,le!==null?(_e=zn._currentValue,le=le.parent!==_e?{parent:_e,pool:_e}:le):le=XE(),Z={baseLanes:Z.baseLanes|p,cachePool:le}),S.memoizedState=Z,S.childLanes=X2(o,q,p),c.memoizedState=q2,y):(fl(c),p=o.child,o=p.sibling,p=Hs(p,{mode:"visible",children:y.children}),p.return=c,p.sibling=null,o!==null&&(q=c.deletions,q===null?(c.deletions=[o],c.flags|=16):q.push(o)),c.child=p,c.memoizedState=null,p)}function G2(o,c){return c=ny({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function ny(o,c){return o=yi(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function $2(o,c,p){return dh(c,o.child,null,p),o=G2(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function oC(o,c,p){o.lanes|=c;var y=o.alternate;y!==null&&(y.lanes|=c),h2(o.return,c,p)}function Y2(o,c,p,y,S){var T=o.memoizedState;T===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:S}:(T.isBackwards=c,T.rendering=null,T.renderingStartTime=0,T.last=y,T.tail=p,T.tailMode=S)}function lC(o,c,p){var y=c.pendingProps,S=y.revealOrder,T=y.tail;if(dr(o,c,y.children,p),y=Wn.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&oC(o,p,c);else if(o.tag===19)oC(o,p,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}switch(z(Wn,y),S){case"forwards":for(p=c.child,S=null;p!==null;)o=p.alternate,o!==null&&Zx(o)===null&&(S=p),p=p.sibling;p=S,p===null?(S=c.child,c.child=null):(S=p.sibling,p.sibling=null),Y2(c,!1,S,p,T);break;case"backwards":for(p=null,S=c.child,c.child=null;S!==null;){if(o=S.alternate,o!==null&&Zx(o)===null){c.child=S;break}o=S.sibling,S.sibling=p,p=S,S=o}Y2(c,!0,p,null,T);break;case"together":Y2(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Ks(o,c,p){if(o!==null&&(c.dependencies=o.dependencies),yl|=c.lanes,(p&c.childLanes)===0)if(o!==null){if(zp(o,c,p,!1),(p&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(n(153));if(c.child!==null){for(o=c.child,p=Hs(o,o.pendingProps),c.child=p,p.return=c;o.sibling!==null;)o=o.sibling,p=p.sibling=Hs(o,o.pendingProps),p.return=c;p.sibling=null}return c.child}function K2(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Ox(o)))}function vO(o,c,p){switch(c.tag){case 3:Pe(c,c.stateNode.containerInfo),ll(c,zn,o.memoizedState.cache),Bp();break;case 27:case 5:Ue(c);break;case 4:Pe(c,c.stateNode.containerInfo);break;case 10:ll(c,c.type,c.memoizedProps.value);break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?(fl(c),c.flags|=128,null):(p&c.child.childLanes)!==0?sC(o,c,p):(fl(c),o=Ks(o,c,p),o!==null?o.sibling:null);fl(c);break;case 19:var S=(o.flags&128)!==0;if(y=(p&c.childLanes)!==0,y||(zp(o,c,p,!1),y=(p&c.childLanes)!==0),S){if(y)return lC(o,c,p);c.flags|=128}if(S=c.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),z(Wn,Wn.current),y)break;return null;case 22:case 23:return c.lanes=0,tC(o,c,p);case 24:ll(c,zn,o.memoizedState.cache)}return Ks(o,c,p)}function cC(o,c,p){if(o!==null)if(o.memoizedProps!==c.pendingProps)tr=!0;else{if(!K2(o,p)&&(c.flags&128)===0)return tr=!1,vO(o,c,p);tr=(o.flags&131072)!==0}else tr=!1,Ot&&(c.flags&1048576)!==0&&BE(c,Ix,c.index);switch(c.lanes=0,c.tag){case 16:e:{o=c.pendingProps;var y=c.elementType,S=y._init;if(y=S(y._payload),c.type=y,typeof y=="function")a2(y)?(o=su(y,o),c.tag=1,c=iC(null,c,y,o,p)):(c.tag=0,c=H2(null,c,y,o,p));else{if(y!=null){if(S=y.$$typeof,S===N){c.tag=11,c=ZT(null,c,y,o,p);break e}else if(S===j){c.tag=14,c=JT(null,c,y,o,p);break e}}throw c=U(y)||y,Error(n(306,c,""))}}return c;case 0:return H2(o,c,c.type,c.pendingProps,p);case 1:return y=c.type,S=su(y,c.pendingProps),iC(o,c,y,S,p);case 3:e:{if(Pe(c,c.stateNode.containerInfo),o===null)throw Error(n(387));y=c.pendingProps;var T=c.memoizedState;S=T.element,y2(o,c),$p(c,y,null,p);var q=c.memoizedState;if(y=q.cache,ll(c,zn,y),y!==T.cache&&f2(c,[zn],p,!0),Gp(),y=q.element,T.isDehydrated)if(T={element:y,isDehydrated:!1,cache:q.cache},c.updateQueue.baseState=T,c.memoizedState=T,c.flags&256){c=aC(o,c,y,p);break e}else if(y!==S){S=ea(Error(n(424)),c),Pp(S),c=aC(o,c,y,p);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(wn=Fa(o.firstChild),Lr=c,Ot=!0,eu=null,ns=!0,p=zT(c,null,y,p),c.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Bp(),y===S){c=Ks(o,c,p);break e}dr(o,c,y,p)}c=c.child}return c;case 26:return ty(o,c),o===null?(p=fN(c.type,null,c.pendingProps,null))?c.memoizedState=p:Ot||(p=c.type,o=c.pendingProps,y=my(je.current).createElement(p),y[ln]=c,y[un]=o,fr(y,p,o),er(y),c.stateNode=y):c.memoizedState=fN(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return Ue(c),o===null&&Ot&&(y=c.stateNode=uN(c.type,c.pendingProps,je.current),Lr=c,ns=!0,S=wn,Dl(c.type)?(Nw=S,wn=Fa(y.firstChild)):wn=S),dr(o,c,c.pendingProps.children,p),ty(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&Ot&&((S=y=wn)&&(y=$O(y,c.type,c.pendingProps,ns),y!==null?(c.stateNode=y,Lr=c,wn=Fa(y.firstChild),ns=!1,S=!0):S=!1),S||tu(c)),Ue(c),S=c.type,T=c.pendingProps,q=o!==null?o.memoizedProps:null,y=T.children,Sw(S,T)?y=null:q!==null&&Sw(S,q)&&(c.flags|=32),c.memoizedState!==null&&(S=A2(o,c,hO,null,null,p),mg._currentValue=S),ty(o,c),dr(o,c,y,p),c.child;case 6:return o===null&&Ot&&((o=p=wn)&&(p=YO(p,c.pendingProps,ns),p!==null?(c.stateNode=p,Lr=c,wn=null,o=!0):o=!1),o||tu(c)),null;case 13:return sC(o,c,p);case 4:return Pe(c,c.stateNode.containerInfo),y=c.pendingProps,o===null?c.child=dh(c,null,y,p):dr(o,c,y,p),c.child;case 11:return ZT(o,c,c.type,c.pendingProps,p);case 7:return dr(o,c,c.pendingProps,p),c.child;case 8:return dr(o,c,c.pendingProps.children,p),c.child;case 12:return dr(o,c,c.pendingProps.children,p),c.child;case 10:return y=c.pendingProps,ll(c,c.type,y.value),dr(o,c,y.children,p),c.child;case 9:return S=c.type._context,y=c.pendingProps.children,ru(c),S=Er(S),y=y(S),c.flags|=1,dr(o,c,y,p),c.child;case 14:return JT(o,c,c.type,c.pendingProps,p);case 15:return eC(o,c,c.type,c.pendingProps,p);case 19:return lC(o,c,p);case 31:return y=c.pendingProps,p=c.mode,y={mode:y.mode,children:y.children},o===null?(p=ny(y,p),p.ref=c.ref,c.child=p,p.return=c,c=p):(p=Hs(o.child,y),p.ref=c.ref,c.child=p,p.return=c,c=p),c;case 22:return tC(o,c,p);case 24:return ru(c),y=Er(zn),o===null?(S=m2(),S===null&&(S=rn,T=p2(),S.pooledCache=T,T.refCount++,T!==null&&(S.pooledCacheLanes|=p),S=T),c.memoizedState={parent:y,cache:S},x2(c),ll(c,zn,S)):((o.lanes&p)!==0&&(y2(o,c),$p(c,null,null,p),Gp()),S=o.memoizedState,T=c.memoizedState,S.parent!==y?(S={parent:y,cache:y},c.memoizedState=S,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=S),ll(c,zn,y)):(y=T.cache,ll(c,zn,y),y!==S.cache&&f2(c,[zn],p,!0))),dr(o,c,c.pendingProps.children,p),c.child;case 29:throw c.pendingProps}throw Error(n(156,c.tag))}function Qs(o){o.flags|=4}function uC(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!xN(c)){if(c=ia.current,c!==null&&((Ut&4194048)===Ut?rs!==null:(Ut&62914560)!==Ut&&(Ut&536870912)===0||c!==rs))throw Vp=b2,GE;o.flags|=8192}}function ry(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?mi():536870912,o.lanes|=c,gh|=c)}function tg(o,c){if(!Ot)switch(o.tailMode){case"hidden":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function bn(o){var c=o.alternate!==null&&o.alternate.child===o.child,p=0,y=0;if(c)for(var S=o.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags&65011712,y|=S.flags&65011712,S.return=o,S=S.sibling;else for(S=o.child;S!==null;)p|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=o,S=S.sibling;return o.subtreeFlags|=y,o.childLanes=p,c}function wO(o,c,p){var y=c.pendingProps;switch(c2(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(c),null;case 1:return bn(c),null;case 3:return p=c.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),c.memoizedState.cache!==y&&(c.flags|=2048),Gs(zn),fe(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(Lp(c)?Qs(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,WE())),bn(c),null;case 26:return p=c.memoizedState,o===null?(Qs(c),p!==null?(bn(c),uC(c,p)):(bn(c),c.flags&=-16777217)):p?p!==o.memoizedState?(Qs(c),bn(c),uC(c,p)):(bn(c),c.flags&=-16777217):(o.memoizedProps!==y&&Qs(c),bn(c),c.flags&=-16777217),null;case 27:be(c),p=je.current;var S=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==y&&Qs(c);else{if(!y){if(c.stateNode===null)throw Error(n(166));return bn(c),null}o=ge.current,Lp(c)?PE(c):(o=uN(S,y,p),c.stateNode=o,Qs(c))}return bn(c),null;case 5:if(be(c),p=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==y&&Qs(c);else{if(!y){if(c.stateNode===null)throw Error(n(166));return bn(c),null}if(o=ge.current,Lp(c))PE(c);else{switch(S=my(je.current),o){case 1:o=S.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:o=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":o=S.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":o=S.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":o=S.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof y.is=="string"?S.createElement("select",{is:y.is}):S.createElement("select"),y.multiple?o.multiple=!0:y.size&&(o.size=y.size);break;default:o=typeof y.is=="string"?S.createElement(p,{is:y.is}):S.createElement(p)}}o[ln]=c,o[un]=y;e:for(S=c.child;S!==null;){if(S.tag===5||S.tag===6)o.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===c)break e;for(;S.sibling===null;){if(S.return===null||S.return===c)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}c.stateNode=o;e:switch(fr(o,p,y),p){case"button":case"input":case"select":case"textarea":o=!!y.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Qs(c)}}return bn(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==y&&Qs(c);else{if(typeof y!="string"&&c.stateNode===null)throw Error(n(166));if(o=je.current,Lp(c)){if(o=c.stateNode,p=c.memoizedProps,y=null,S=Lr,S!==null)switch(S.tag){case 27:case 5:y=S.memoizedProps}o[ln]=c,o=!!(o.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||rN(o.nodeValue,p)),o||tu(c)}else o=my(o).createTextNode(y),o[ln]=c,c.stateNode=o}return bn(c),null;case 13:if(y=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(S=Lp(c),y!==null&&y.dehydrated!==null){if(o===null){if(!S)throw Error(n(318));if(S=c.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[ln]=c}else Bp(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;bn(c),S=!1}else S=WE(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=S),S=!0;if(!S)return c.flags&256?(Ys(c),c):(Ys(c),null)}if(Ys(c),(c.flags&128)!==0)return c.lanes=p,c;if(p=y!==null,o=o!==null&&o.memoizedState!==null,p){y=c.child,S=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(S=y.alternate.memoizedState.cachePool.pool);var T=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(T=y.memoizedState.cachePool.pool),T!==S&&(y.flags|=2048)}return p!==o&&p&&(c.child.flags|=8192),ry(c,c.updateQueue),bn(c),null;case 4:return fe(),o===null&&ww(c.stateNode.containerInfo),bn(c),null;case 10:return Gs(c.type),bn(c),null;case 19:if(ie(Wn),S=c.memoizedState,S===null)return bn(c),null;if(y=(c.flags&128)!==0,T=S.rendering,T===null)if(y)tg(S,!1);else{if(kn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(T=Zx(o),T!==null){for(c.flags|=128,tg(S,!1),o=T.updateQueue,c.updateQueue=o,ry(c,o),c.subtreeFlags=0,o=p,p=c.child;p!==null;)LE(p,o),p=p.sibling;return z(Wn,Wn.current&1|2),c.child}o=o.sibling}S.tail!==null&&re()>sy&&(c.flags|=128,y=!0,tg(S,!1),c.lanes=4194304)}else{if(!y)if(o=Zx(T),o!==null){if(c.flags|=128,y=!0,o=o.updateQueue,c.updateQueue=o,ry(c,o),tg(S,!0),S.tail===null&&S.tailMode==="hidden"&&!T.alternate&&!Ot)return bn(c),null}else 2*re()-S.renderingStartTime>sy&&p!==536870912&&(c.flags|=128,y=!0,tg(S,!1),c.lanes=4194304);S.isBackwards?(T.sibling=c.child,c.child=T):(o=S.last,o!==null?o.sibling=T:c.child=T,S.last=T)}return S.tail!==null?(c=S.tail,S.rendering=c,S.tail=c.sibling,S.renderingStartTime=re(),c.sibling=null,o=Wn.current,z(Wn,y?o&1|2:o&1),c):(bn(c),null);case 22:case 23:return Ys(c),D2(),y=c.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(c.flags|=8192):y&&(c.flags|=8192),y?(p&536870912)!==0&&(c.flags&128)===0&&(bn(c),c.subtreeFlags&6&&(c.flags|=8192)):bn(c),p=c.updateQueue,p!==null&&ry(c,p.retryQueue),p=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048),o!==null&&ie(iu),null;case 24:return p=null,o!==null&&(p=o.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),Gs(zn),bn(c),null;case 25:return null;case 30:return null}throw Error(n(156,c.tag))}function kO(o,c){switch(c2(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Gs(zn),fe(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return be(c),null;case 13:if(Ys(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Bp()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return ie(Wn),null;case 4:return fe(),null;case 10:return Gs(c.type),null;case 22:case 23:return Ys(c),D2(),o!==null&&ie(iu),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return Gs(zn),null;case 25:return null;default:return null}}function dC(o,c){switch(c2(c),c.tag){case 3:Gs(zn),fe();break;case 26:case 27:case 5:be(c);break;case 4:fe();break;case 13:Ys(c);break;case 19:ie(Wn);break;case 10:Gs(c.type);break;case 22:case 23:Ys(c),D2(),o!==null&&ie(iu);break;case 24:Gs(zn)}}function ng(o,c){try{var p=c.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var S=y.next;p=S;do{if((p.tag&o)===o){y=void 0;var T=p.create,q=p.inst;y=T(),q.destroy=y}p=p.next}while(p!==S)}}catch(Z){tn(c,c.return,Z)}}function gl(o,c,p){try{var y=c.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var T=S.next;y=T;do{if((y.tag&o)===o){var q=y.inst,Z=q.destroy;if(Z!==void 0){q.destroy=void 0,S=c;var le=p,_e=Z;try{_e()}catch(Oe){tn(S,le,Oe)}}}y=y.next}while(y!==T)}}catch(Oe){tn(c,c.return,Oe)}}function hC(o){var c=o.updateQueue;if(c!==null){var p=o.stateNode;try{JE(c,p)}catch(y){tn(o,o.return,y)}}}function fC(o,c,p){p.props=su(o.type,o.memoizedProps),p.state=o.memoizedState;try{p.componentWillUnmount()}catch(y){tn(o,c,y)}}function rg(o,c){try{var p=o.ref;if(p!==null){switch(o.tag){case 26:case 27:case 5:var y=o.stateNode;break;case 30:y=o.stateNode;break;default:y=o.stateNode}typeof p=="function"?o.refCleanup=p(y):p.current=y}}catch(S){tn(o,c,S)}}function is(o,c){var p=o.ref,y=o.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(S){tn(o,c,S)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(S){tn(o,c,S)}else p.current=null}function pC(o){var c=o.type,p=o.memoizedProps,y=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(S){tn(o,o.return,S)}}function Q2(o,c,p){try{var y=o.stateNode;HO(y,o.type,p,c),y[un]=c}catch(S){tn(o,o.return,S)}}function gC(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Dl(o.type)||o.tag===4}function Z2(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||gC(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Dl(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function J2(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(o,c):(c=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,c.appendChild(o),p=p._reactRootContainer,p!=null||c.onclick!==null||(c.onclick=gy));else if(y!==4&&(y===27&&Dl(o.type)&&(p=o.stateNode,c=null),o=o.child,o!==null))for(J2(o,c,p),o=o.sibling;o!==null;)J2(o,c,p),o=o.sibling}function iy(o,c,p){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?p.insertBefore(o,c):p.appendChild(o);else if(y!==4&&(y===27&&Dl(o.type)&&(p=o.stateNode),o=o.child,o!==null))for(iy(o,c,p),o=o.sibling;o!==null;)iy(o,c,p),o=o.sibling}function mC(o){var c=o.stateNode,p=o.memoizedProps;try{for(var y=o.type,S=c.attributes;S.length;)c.removeAttributeNode(S[0]);fr(c,y,p),c[ln]=o,c[un]=p}catch(T){tn(o,o.return,T)}}var Zs=!1,An=!1,ew=!1,bC=typeof WeakSet=="function"?WeakSet:Set,nr=null;function DO(o,c){if(o=o.containerInfo,_w=ky,o=TE(o),Z1(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var S=y.anchorOffset,T=y.focusNode;y=y.focusOffset;try{p.nodeType,T.nodeType}catch{p=null;break e}var q=0,Z=-1,le=-1,_e=0,Oe=0,Be=o,Se=null;t:for(;;){for(var Te;Be!==p||S!==0&&Be.nodeType!==3||(Z=q+S),Be!==T||y!==0&&Be.nodeType!==3||(le=q+y),Be.nodeType===3&&(q+=Be.nodeValue.length),(Te=Be.firstChild)!==null;)Se=Be,Be=Te;for(;;){if(Be===o)break t;if(Se===p&&++_e===S&&(Z=q),Se===T&&++Oe===y&&(le=q),(Te=Be.nextSibling)!==null)break;Be=Se,Se=Be.parentNode}Be=Te}p=Z===-1||le===-1?null:{start:Z,end:le}}else p=null}p=p||{start:0,end:0}}else p=null;for(Aw={focusedElem:o,selectionRange:p},ky=!1,nr=c;nr!==null;)if(c=nr,o=c.child,(c.subtreeFlags&1024)!==0&&o!==null)o.return=c,nr=o;else for(;nr!==null;){switch(c=nr,T=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&T!==null){o=void 0,p=c,S=T.memoizedProps,T=T.memoizedState,y=p.stateNode;try{var ht=su(p.type,S,p.elementType===p.type);o=y.getSnapshotBeforeUpdate(ht,T),y.__reactInternalSnapshotBeforeUpdate=o}catch(lt){tn(p,p.return,lt)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,p=o.nodeType,p===9)Tw(o);else if(p===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Tw(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=c.sibling,o!==null){o.return=c.return,nr=o;break}nr=c.return}}function xC(o,c,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:ml(o,p),y&4&&ng(5,p);break;case 1:if(ml(o,p),y&4)if(o=p.stateNode,c===null)try{o.componentDidMount()}catch(q){tn(p,p.return,q)}else{var S=su(p.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(S,c,o.__reactInternalSnapshotBeforeUpdate)}catch(q){tn(p,p.return,q)}}y&64&&hC(p),y&512&&rg(p,p.return);break;case 3:if(ml(o,p),y&64&&(o=p.updateQueue,o!==null)){if(c=null,p.child!==null)switch(p.child.tag){case 27:case 5:c=p.child.stateNode;break;case 1:c=p.child.stateNode}try{JE(o,c)}catch(q){tn(p,p.return,q)}}break;case 27:c===null&&y&4&&mC(p);case 26:case 5:ml(o,p),c===null&&y&4&&pC(p),y&512&&rg(p,p.return);break;case 12:ml(o,p);break;case 13:ml(o,p),y&4&&wC(o,p),y&64&&(o=p.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(p=RO.bind(null,p),KO(o,p))));break;case 22:if(y=p.memoizedState!==null||Zs,!y){c=c!==null&&c.memoizedState!==null||An,S=Zs;var T=An;Zs=y,(An=c)&&!T?bl(o,p,(p.subtreeFlags&8772)!==0):ml(o,p),Zs=S,An=T}break;case 30:break;default:ml(o,p)}}function yC(o){var c=o.alternate;c!==null&&(o.alternate=null,yC(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&Rn(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var dn=null,ti=!1;function Js(o,c,p){for(p=p.child;p!==null;)vC(o,c,p),p=p.sibling}function vC(o,c,p){if(ke&&typeof ke.onCommitFiberUnmount=="function")try{ke.onCommitFiberUnmount(ae,p)}catch{}switch(p.tag){case 26:An||is(p,c),Js(o,c,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:An||is(p,c);var y=dn,S=ti;Dl(p.type)&&(dn=p.stateNode,ti=!1),Js(o,c,p),hg(p.stateNode),dn=y,ti=S;break;case 5:An||is(p,c);case 6:if(y=dn,S=ti,dn=null,Js(o,c,p),dn=y,ti=S,dn!==null)if(ti)try{(dn.nodeType===9?dn.body:dn.nodeName==="HTML"?dn.ownerDocument.body:dn).removeChild(p.stateNode)}catch(T){tn(p,c,T)}else try{dn.removeChild(p.stateNode)}catch(T){tn(p,c,T)}break;case 18:dn!==null&&(ti?(o=dn,lN(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,p.stateNode),vg(o)):lN(dn,p.stateNode));break;case 4:y=dn,S=ti,dn=p.stateNode.containerInfo,ti=!0,Js(o,c,p),dn=y,ti=S;break;case 0:case 11:case 14:case 15:An||gl(2,p,c),An||gl(4,p,c),Js(o,c,p);break;case 1:An||(is(p,c),y=p.stateNode,typeof y.componentWillUnmount=="function"&&fC(p,c,y)),Js(o,c,p);break;case 21:Js(o,c,p);break;case 22:An=(y=An)||p.memoizedState!==null,Js(o,c,p),An=y;break;default:Js(o,c,p)}}function wC(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{vg(o)}catch(p){tn(c,c.return,p)}}function _O(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new bC),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new bC),c;default:throw Error(n(435,o.tag))}}function tw(o,c){var p=_O(o);c.forEach(function(y){var S=jO.bind(null,o,y);p.has(y)||(p.add(y),y.then(S,S))})}function vi(o,c){var p=c.deletions;if(p!==null)for(var y=0;y<p.length;y++){var S=p[y],T=o,q=c,Z=q;e:for(;Z!==null;){switch(Z.tag){case 27:if(Dl(Z.type)){dn=Z.stateNode,ti=!1;break e}break;case 5:dn=Z.stateNode,ti=!1;break e;case 3:case 4:dn=Z.stateNode.containerInfo,ti=!0;break e}Z=Z.return}if(dn===null)throw Error(n(160));vC(T,q,S),dn=null,ti=!1,T=S.alternate,T!==null&&(T.return=null),S.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)kC(c,o),c=c.sibling}var ja=null;function kC(o,c){var p=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:vi(c,o),wi(o),y&4&&(gl(3,o,o.return),ng(3,o),gl(5,o,o.return));break;case 1:vi(c,o),wi(o),y&512&&(An||p===null||is(p,p.return)),y&64&&Zs&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(p=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var S=ja;if(vi(c,o),wi(o),y&512&&(An||p===null||is(p,p.return)),y&4){var T=p!==null?p.memoizedState:null;if(y=o.memoizedState,p===null)if(y===null)if(o.stateNode===null){e:{y=o.type,p=o.memoizedProps,S=S.ownerDocument||S;t:switch(y){case"title":T=S.getElementsByTagName("title")[0],(!T||T[Ua]||T[ln]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=S.createElement(y),S.head.insertBefore(T,S.querySelector("head > title"))),fr(T,y,p),T[ln]=o,er(T),y=T;break e;case"link":var q=mN("link","href",S).get(y+(p.href||""));if(q){for(var Z=0;Z<q.length;Z++)if(T=q[Z],T.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&T.getAttribute("rel")===(p.rel==null?null:p.rel)&&T.getAttribute("title")===(p.title==null?null:p.title)&&T.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){q.splice(Z,1);break t}}T=S.createElement(y),fr(T,y,p),S.head.appendChild(T);break;case"meta":if(q=mN("meta","content",S).get(y+(p.content||""))){for(Z=0;Z<q.length;Z++)if(T=q[Z],T.getAttribute("content")===(p.content==null?null:""+p.content)&&T.getAttribute("name")===(p.name==null?null:p.name)&&T.getAttribute("property")===(p.property==null?null:p.property)&&T.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&T.getAttribute("charset")===(p.charSet==null?null:p.charSet)){q.splice(Z,1);break t}}T=S.createElement(y),fr(T,y,p),S.head.appendChild(T);break;default:throw Error(n(468,y))}T[ln]=o,er(T),y=T}o.stateNode=y}else bN(S,o.type,o.stateNode);else o.stateNode=gN(S,y,o.memoizedProps);else T!==y?(T===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):T.count--,y===null?bN(S,o.type,o.stateNode):gN(S,y,o.memoizedProps)):y===null&&o.stateNode!==null&&Q2(o,o.memoizedProps,p.memoizedProps)}break;case 27:vi(c,o),wi(o),y&512&&(An||p===null||is(p,p.return)),p!==null&&y&4&&Q2(o,o.memoizedProps,p.memoizedProps);break;case 5:if(vi(c,o),wi(o),y&512&&(An||p===null||is(p,p.return)),o.flags&32){S=o.stateNode;try{Gd(S,"")}catch(Te){tn(o,o.return,Te)}}y&4&&o.stateNode!=null&&(S=o.memoizedProps,Q2(o,S,p!==null?p.memoizedProps:S)),y&1024&&(ew=!0);break;case 6:if(vi(c,o),wi(o),y&4){if(o.stateNode===null)throw Error(n(162));y=o.memoizedProps,p=o.stateNode;try{p.nodeValue=y}catch(Te){tn(o,o.return,Te)}}break;case 3:if(yy=null,S=ja,ja=by(c.containerInfo),vi(c,o),ja=S,wi(o),y&4&&p!==null&&p.memoizedState.isDehydrated)try{vg(c.containerInfo)}catch(Te){tn(o,o.return,Te)}ew&&(ew=!1,DC(o));break;case 4:y=ja,ja=by(o.stateNode.containerInfo),vi(c,o),wi(o),ja=y;break;case 12:vi(c,o),wi(o);break;case 13:vi(c,o),wi(o),o.child.flags&8192&&o.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(ow=re()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,tw(o,y)));break;case 22:S=o.memoizedState!==null;var le=p!==null&&p.memoizedState!==null,_e=Zs,Oe=An;if(Zs=_e||S,An=Oe||le,vi(c,o),An=Oe,Zs=_e,wi(o),y&8192)e:for(c=o.stateNode,c._visibility=S?c._visibility&-2:c._visibility|1,S&&(p===null||le||Zs||An||ou(o)),p=null,c=o;;){if(c.tag===5||c.tag===26){if(p===null){le=p=c;try{if(T=le.stateNode,S)q=T.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none";else{Z=le.stateNode;var Be=le.memoizedProps.style,Se=Be!=null&&Be.hasOwnProperty("display")?Be.display:null;Z.style.display=Se==null||typeof Se=="boolean"?"":(""+Se).trim()}}catch(Te){tn(le,le.return,Te)}}}else if(c.tag===6){if(p===null){le=c;try{le.stateNode.nodeValue=S?"":le.memoizedProps}catch(Te){tn(le,le.return,Te)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;p===c&&(p=null),c=c.return}p===c&&(p=null),c.sibling.return=c.return,c=c.sibling}y&4&&(y=o.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,tw(o,p))));break;case 19:vi(c,o),wi(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,tw(o,y)));break;case 30:break;case 21:break;default:vi(c,o),wi(o)}}function wi(o){var c=o.flags;if(c&2){try{for(var p,y=o.return;y!==null;){if(gC(y)){p=y;break}y=y.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var S=p.stateNode,T=Z2(o);iy(o,T,S);break;case 5:var q=p.stateNode;p.flags&32&&(Gd(q,""),p.flags&=-33);var Z=Z2(o);iy(o,Z,q);break;case 3:case 4:var le=p.stateNode.containerInfo,_e=Z2(o);J2(o,_e,le);break;default:throw Error(n(161))}}catch(Oe){tn(o,o.return,Oe)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function DC(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;DC(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function ml(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)xC(o,c.alternate,c),c=c.sibling}function ou(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:gl(4,c,c.return),ou(c);break;case 1:is(c,c.return);var p=c.stateNode;typeof p.componentWillUnmount=="function"&&fC(c,c.return,p),ou(c);break;case 27:hg(c.stateNode);case 26:case 5:is(c,c.return),ou(c);break;case 22:c.memoizedState===null&&ou(c);break;case 30:ou(c);break;default:ou(c)}o=o.sibling}}function bl(o,c,p){for(p=p&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var y=c.alternate,S=o,T=c,q=T.flags;switch(T.tag){case 0:case 11:case 15:bl(S,T,p),ng(4,T);break;case 1:if(bl(S,T,p),y=T,S=y.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(_e){tn(y,y.return,_e)}if(y=T,S=y.updateQueue,S!==null){var Z=y.stateNode;try{var le=S.shared.hiddenCallbacks;if(le!==null)for(S.shared.hiddenCallbacks=null,S=0;S<le.length;S++)ZE(le[S],Z)}catch(_e){tn(y,y.return,_e)}}p&&q&64&&hC(T),rg(T,T.return);break;case 27:mC(T);case 26:case 5:bl(S,T,p),p&&y===null&&q&4&&pC(T),rg(T,T.return);break;case 12:bl(S,T,p);break;case 13:bl(S,T,p),p&&q&4&&wC(S,T);break;case 22:T.memoizedState===null&&bl(S,T,p),rg(T,T.return);break;case 30:break;default:bl(S,T,p)}c=c.sibling}}function nw(o,c){var p=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==p&&(o!=null&&o.refCount++,p!=null&&Wp(p))}function rw(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Wp(o))}function as(o,c,p,y){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)_C(o,c,p,y),c=c.sibling}function _C(o,c,p,y){var S=c.flags;switch(c.tag){case 0:case 11:case 15:as(o,c,p,y),S&2048&&ng(9,c);break;case 1:as(o,c,p,y);break;case 3:as(o,c,p,y),S&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Wp(o)));break;case 12:if(S&2048){as(o,c,p,y),o=c.stateNode;try{var T=c.memoizedProps,q=T.id,Z=T.onPostCommit;typeof Z=="function"&&Z(q,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(le){tn(c,c.return,le)}}else as(o,c,p,y);break;case 13:as(o,c,p,y);break;case 23:break;case 22:T=c.stateNode,q=c.alternate,c.memoizedState!==null?T._visibility&2?as(o,c,p,y):ig(o,c):T._visibility&2?as(o,c,p,y):(T._visibility|=2,hh(o,c,p,y,(c.subtreeFlags&10256)!==0)),S&2048&&nw(q,c);break;case 24:as(o,c,p,y),S&2048&&rw(c.alternate,c);break;default:as(o,c,p,y)}}function hh(o,c,p,y,S){for(S=S&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var T=o,q=c,Z=p,le=y,_e=q.flags;switch(q.tag){case 0:case 11:case 15:hh(T,q,Z,le,S),ng(8,q);break;case 23:break;case 22:var Oe=q.stateNode;q.memoizedState!==null?Oe._visibility&2?hh(T,q,Z,le,S):ig(T,q):(Oe._visibility|=2,hh(T,q,Z,le,S)),S&&_e&2048&&nw(q.alternate,q);break;case 24:hh(T,q,Z,le,S),S&&_e&2048&&rw(q.alternate,q);break;default:hh(T,q,Z,le,S)}c=c.sibling}}function ig(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var p=o,y=c,S=y.flags;switch(y.tag){case 22:ig(p,y),S&2048&&nw(y.alternate,y);break;case 24:ig(p,y),S&2048&&rw(y.alternate,y);break;default:ig(p,y)}c=c.sibling}}var ag=8192;function fh(o){if(o.subtreeFlags&ag)for(o=o.child;o!==null;)AC(o),o=o.sibling}function AC(o){switch(o.tag){case 26:fh(o),o.flags&ag&&o.memoizedState!==null&&cM(ja,o.memoizedState,o.memoizedProps);break;case 5:fh(o);break;case 3:case 4:var c=ja;ja=by(o.stateNode.containerInfo),fh(o),ja=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=ag,ag=16777216,fh(o),ag=c):fh(o));break;default:fh(o)}}function SC(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function sg(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];nr=y,TC(y,o)}SC(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)EC(o),o=o.sibling}function EC(o){switch(o.tag){case 0:case 11:case 15:sg(o),o.flags&2048&&gl(9,o,o.return);break;case 3:sg(o);break;case 12:sg(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,ay(o)):sg(o);break;default:sg(o)}}function ay(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];nr=y,TC(y,o)}SC(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:gl(8,c,c.return),ay(c);break;case 22:p=c.stateNode,p._visibility&2&&(p._visibility&=-3,ay(c));break;default:ay(c)}o=o.sibling}}function TC(o,c){for(;nr!==null;){var p=nr;switch(p.tag){case 0:case 11:case 15:gl(8,p,c);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Wp(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,nr=y;else e:for(p=o;nr!==null;){y=nr;var S=y.sibling,T=y.return;if(yC(y),y===p){nr=null;break e}if(S!==null){S.return=T,nr=S;break e}nr=T}}}var AO={getCacheForType:function(o){var c=Er(zn),p=c.data.get(o);return p===void 0&&(p=o(),c.data.set(o,p)),p}},SO=typeof WeakMap=="function"?WeakMap:Map,Wt=0,rn=null,At=null,Ut=0,Ht=0,ki=null,xl=!1,ph=!1,iw=!1,eo=0,kn=0,yl=0,lu=0,aw=0,aa=0,gh=0,og=null,ni=null,sw=!1,ow=0,sy=1/0,oy=null,vl=null,hr=0,wl=null,mh=null,bh=0,lw=0,cw=null,CC=null,lg=0,uw=null;function Di(){if((Wt&2)!==0&&Ut!==0)return Ut&-Ut;if(P.T!==null){var o=ih;return o!==0?o:bw()}return Gt()}function NC(){aa===0&&(aa=(Ut&536870912)===0||Ot?Jn():536870912);var o=ia.current;return o!==null&&(o.flags|=32),aa}function _i(o,c,p){(o===rn&&(Ht===2||Ht===9)||o.cancelPendingCommit!==null)&&(xh(o,0),kl(o,Ut,aa,!1)),K(o,p),((Wt&2)===0||o!==rn)&&(o===rn&&((Wt&2)===0&&(lu|=p),kn===4&&kl(o,Ut,aa,!1)),ss(o))}function UC(o,c,p){if((Wt&6)!==0)throw Error(n(327));var y=!p&&(c&124)===0&&(c&o.expiredLanes)===0||ft(o,c),S=y?CO(o,c):fw(o,c,!0),T=y;do{if(S===0){ph&&!y&&kl(o,c,0,!1);break}else{if(p=o.current.alternate,T&&!EO(p)){S=fw(o,c,!1),T=!1;continue}if(S===2){if(T=c,o.errorRecoveryDisabledLanes&T)var q=0;else q=o.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){c=q;e:{var Z=o;S=og;var le=Z.current.memoizedState.isDehydrated;if(le&&(xh(Z,q).flags|=256),q=fw(Z,q,!1),q!==2){if(iw&&!le){Z.errorRecoveryDisabledLanes|=T,lu|=T,S=4;break e}T=ni,ni=S,T!==null&&(ni===null?ni=T:ni.push.apply(ni,T))}S=q}if(T=!1,S!==2)continue}}if(S===1){xh(o,0),kl(o,c,0,!0);break}e:{switch(y=o,T=S,T){case 0:case 1:throw Error(n(345));case 4:if((c&4194048)!==c)break;case 6:kl(y,c,aa,!xl);break e;case 2:ni=null;break;case 3:case 5:break;default:throw Error(n(329))}if((c&62914560)===c&&(S=ow+300-re(),10<S)){if(kl(y,c,aa,!xl),Ke(y,0,!0)!==0)break e;y.timeoutHandle=sN(RC.bind(null,y,p,ni,oy,sw,c,aa,lu,gh,xl,T,2,-0,0),S);break e}RC(y,p,ni,oy,sw,c,aa,lu,gh,xl,T,0,-0,0)}}break}while(!0);ss(o)}function RC(o,c,p,y,S,T,q,Z,le,_e,Oe,Be,Se,Te){if(o.timeoutHandle=-1,Be=c.subtreeFlags,(Be&8192||(Be&16785408)===16785408)&&(gg={stylesheets:null,count:0,unsuspend:lM},AC(c),Be=uM(),Be!==null)){o.cancelPendingCommit=Be(BC.bind(null,o,c,T,p,y,S,q,Z,le,Oe,1,Se,Te)),kl(o,T,q,!_e);return}BC(o,c,T,p,y,S,q,Z,le)}function EO(o){for(var c=o;;){var p=c.tag;if((p===0||p===11||p===15)&&c.flags&16384&&(p=c.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var S=p[y],T=S.getSnapshot;S=S.value;try{if(!xi(T(),S))return!1}catch{return!1}}if(p=c.child,c.subtreeFlags&16384&&p!==null)p.return=c,c=p;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function kl(o,c,p,y){c&=~aw,c&=~lu,o.suspendedLanes|=c,o.pingedLanes&=~c,y&&(o.warmLanes|=c),y=o.expirationTimes;for(var S=c;0<S;){var T=31-ze(S),q=1<<T;y[T]=-1,S&=~q}p!==0&&ce(o,p,c)}function ly(){return(Wt&6)===0?(cg(0),!1):!0}function dw(){if(At!==null){if(Ht===0)var o=At.return;else o=At,Xs=nu=null,T2(o),uh=null,Jp=0,o=At;for(;o!==null;)dC(o.alternate,o),o=o.return;At=null}}function xh(o,c){var p=o.timeoutHandle;p!==-1&&(o.timeoutHandle=-1,VO(p)),p=o.cancelPendingCommit,p!==null&&(o.cancelPendingCommit=null,p()),dw(),rn=o,At=p=Hs(o.current,null),Ut=c,Ht=0,ki=null,xl=!1,ph=ft(o,c),iw=!1,gh=aa=aw=lu=yl=kn=0,ni=og=null,sw=!1,(c&8)!==0&&(c|=c&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=c;0<y;){var S=31-ze(y),T=1<<S;c|=o[S],y&=~T}return eo=c,Nx(),p}function jC(o,c){vt=null,P.H=Yx,c===qp||c===Bx?(c=KE(),Ht=3):c===GE?(c=KE(),Ht=4):Ht=c===QT?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,ki=c,At===null&&(kn=1,ey(o,ea(c,o.current)))}function FC(){var o=P.H;return P.H=Yx,o===null?Yx:o}function IC(){var o=P.A;return P.A=AO,o}function hw(){kn=4,xl||(Ut&4194048)!==Ut&&ia.current!==null||(ph=!0),(yl&134217727)===0&&(lu&134217727)===0||rn===null||kl(rn,Ut,aa,!1)}function fw(o,c,p){var y=Wt;Wt|=2;var S=FC(),T=IC();(rn!==o||Ut!==c)&&(oy=null,xh(o,c)),c=!1;var q=kn;e:do try{if(Ht!==0&&At!==null){var Z=At,le=ki;switch(Ht){case 8:dw(),q=6;break e;case 3:case 2:case 9:case 6:ia.current===null&&(c=!0);var _e=Ht;if(Ht=0,ki=null,yh(o,Z,le,_e),p&&ph){q=0;break e}break;default:_e=Ht,Ht=0,ki=null,yh(o,Z,le,_e)}}TO(),q=kn;break}catch(Oe){jC(o,Oe)}while(!0);return c&&o.shellSuspendCounter++,Xs=nu=null,Wt=y,P.H=S,P.A=T,At===null&&(rn=null,Ut=0,Nx()),q}function TO(){for(;At!==null;)OC(At)}function CO(o,c){var p=Wt;Wt|=2;var y=FC(),S=IC();rn!==o||Ut!==c?(oy=null,sy=re()+500,xh(o,c)):ph=ft(o,c);e:do try{if(Ht!==0&&At!==null){c=At;var T=ki;t:switch(Ht){case 1:Ht=0,ki=null,yh(o,c,T,1);break;case 2:case 9:if($E(T)){Ht=0,ki=null,MC(c);break}c=function(){Ht!==2&&Ht!==9||rn!==o||(Ht=7),ss(o)},T.then(c,c);break e;case 3:Ht=7;break e;case 4:Ht=5;break e;case 7:$E(T)?(Ht=0,ki=null,MC(c)):(Ht=0,ki=null,yh(o,c,T,7));break;case 5:var q=null;switch(At.tag){case 26:q=At.memoizedState;case 5:case 27:var Z=At;if(!q||xN(q)){Ht=0,ki=null;var le=Z.sibling;if(le!==null)At=le;else{var _e=Z.return;_e!==null?(At=_e,cy(_e)):At=null}break t}}Ht=0,ki=null,yh(o,c,T,5);break;case 6:Ht=0,ki=null,yh(o,c,T,6);break;case 8:dw(),kn=6;break e;default:throw Error(n(462))}}NO();break}catch(Oe){jC(o,Oe)}while(!0);return Xs=nu=null,P.H=y,P.A=S,Wt=p,At!==null?0:(rn=null,Ut=0,Nx(),kn)}function NO(){for(;At!==null&&!he();)OC(At)}function OC(o){var c=cC(o.alternate,o,eo);o.memoizedProps=o.pendingProps,c===null?cy(o):At=c}function MC(o){var c=o,p=c.alternate;switch(c.tag){case 15:case 0:c=rC(p,c,c.pendingProps,c.type,void 0,Ut);break;case 11:c=rC(p,c,c.pendingProps,c.type.render,c.ref,Ut);break;case 5:T2(c);default:dC(p,c),c=At=LE(c,eo),c=cC(p,c,eo)}o.memoizedProps=o.pendingProps,c===null?cy(o):At=c}function yh(o,c,p,y){Xs=nu=null,T2(c),uh=null,Jp=0;var S=c.return;try{if(yO(o,S,c,p,Ut)){kn=1,ey(o,ea(p,o.current)),At=null;return}}catch(T){if(S!==null)throw At=S,T;kn=1,ey(o,ea(p,o.current)),At=null;return}c.flags&32768?(Ot||y===1?o=!0:ph||(Ut&536870912)!==0?o=!1:(xl=o=!0,(y===2||y===9||y===3||y===6)&&(y=ia.current,y!==null&&y.tag===13&&(y.flags|=16384))),LC(c,o)):cy(c)}function cy(o){var c=o;do{if((c.flags&32768)!==0){LC(c,xl);return}o=c.return;var p=wO(c.alternate,c,eo);if(p!==null){At=p;return}if(c=c.sibling,c!==null){At=c;return}At=c=o}while(c!==null);kn===0&&(kn=5)}function LC(o,c){do{var p=kO(o.alternate,o);if(p!==null){p.flags&=32767,At=p;return}if(p=o.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!c&&(o=o.sibling,o!==null)){At=o;return}At=o=p}while(o!==null);kn=6,At=null}function BC(o,c,p,y,S,T,q,Z,le){o.cancelPendingCommit=null;do uy();while(hr!==0);if((Wt&6)!==0)throw Error(n(327));if(c!==null){if(c===o.current)throw Error(n(177));if(T=c.lanes|c.childLanes,T|=r2,te(o,p,T,q,Z,le),o===rn&&(At=rn=null,Ut=0),mh=c,wl=o,bh=p,lw=T,cw=S,CC=y,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,FO(Ne,function(){return qC(),null})):(o.callbackNode=null,o.callbackPriority=0),y=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||y){y=P.T,P.T=null,S=B.p,B.p=2,q=Wt,Wt|=4;try{DO(o,c,p)}finally{Wt=q,B.p=S,P.T=y}}hr=1,PC(),zC(),WC()}}function PC(){if(hr===1){hr=0;var o=wl,c=mh,p=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||p){p=P.T,P.T=null;var y=B.p;B.p=2;var S=Wt;Wt|=4;try{kC(c,o);var T=Aw,q=TE(o.containerInfo),Z=T.focusedElem,le=T.selectionRange;if(q!==Z&&Z&&Z.ownerDocument&&EE(Z.ownerDocument.documentElement,Z)){if(le!==null&&Z1(Z)){var _e=le.start,Oe=le.end;if(Oe===void 0&&(Oe=_e),"selectionStart"in Z)Z.selectionStart=_e,Z.selectionEnd=Math.min(Oe,Z.value.length);else{var Be=Z.ownerDocument||document,Se=Be&&Be.defaultView||window;if(Se.getSelection){var Te=Se.getSelection(),ht=Z.textContent.length,lt=Math.min(le.start,ht),Kt=le.end===void 0?lt:Math.min(le.end,ht);!Te.extend&&lt>Kt&&(q=Kt,Kt=lt,lt=q);var we=SE(Z,lt),me=SE(Z,Kt);if(we&&me&&(Te.rangeCount!==1||Te.anchorNode!==we.node||Te.anchorOffset!==we.offset||Te.focusNode!==me.node||Te.focusOffset!==me.offset)){var De=Be.createRange();De.setStart(we.node,we.offset),Te.removeAllRanges(),lt>Kt?(Te.addRange(De),Te.extend(me.node,me.offset)):(De.setEnd(me.node,me.offset),Te.addRange(De))}}}}for(Be=[],Te=Z;Te=Te.parentNode;)Te.nodeType===1&&Be.push({element:Te,left:Te.scrollLeft,top:Te.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<Be.length;Z++){var Le=Be[Z];Le.element.scrollLeft=Le.left,Le.element.scrollTop=Le.top}}ky=!!_w,Aw=_w=null}finally{Wt=S,B.p=y,P.T=p}}o.current=c,hr=2}}function zC(){if(hr===2){hr=0;var o=wl,c=mh,p=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||p){p=P.T,P.T=null;var y=B.p;B.p=2;var S=Wt;Wt|=4;try{xC(o,c.alternate,c)}finally{Wt=S,B.p=y,P.T=p}}hr=3}}function WC(){if(hr===4||hr===3){hr=0,oe();var o=wl,c=mh,p=bh,y=CC;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?hr=5:(hr=0,mh=wl=null,HC(o,o.pendingLanes));var S=o.pendingLanes;if(S===0&&(vl=null),ot(p),c=c.stateNode,ke&&typeof ke.onCommitFiberRoot=="function")try{ke.onCommitFiberRoot(ae,c,void 0,(c.current.flags&128)===128)}catch{}if(y!==null){c=P.T,S=B.p,B.p=2,P.T=null;try{for(var T=o.onRecoverableError,q=0;q<y.length;q++){var Z=y[q];T(Z.value,{componentStack:Z.stack})}}finally{P.T=c,B.p=S}}(bh&3)!==0&&uy(),ss(o),S=o.pendingLanes,(p&4194090)!==0&&(S&42)!==0?o===uw?lg++:(lg=0,uw=o):lg=0,cg(0)}}function HC(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Wp(c)))}function uy(o){return PC(),zC(),WC(),qC()}function qC(){if(hr!==5)return!1;var o=wl,c=lw;lw=0;var p=ot(bh),y=P.T,S=B.p;try{B.p=32>p?32:p,P.T=null,p=cw,cw=null;var T=wl,q=bh;if(hr=0,mh=wl=null,bh=0,(Wt&6)!==0)throw Error(n(331));var Z=Wt;if(Wt|=4,EC(T.current),_C(T,T.current,q,p),Wt=Z,cg(0,!1),ke&&typeof ke.onPostCommitFiberRoot=="function")try{ke.onPostCommitFiberRoot(ae,T)}catch{}return!0}finally{B.p=S,P.T=y,HC(o,c)}}function VC(o,c,p){c=ea(p,c),c=W2(o.stateNode,c,2),o=dl(o,c,2),o!==null&&(K(o,2),ss(o))}function tn(o,c,p){if(o.tag===3)VC(o,o,p);else for(;c!==null;){if(c.tag===3){VC(c,o,p);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(vl===null||!vl.has(y))){o=ea(p,o),p=YT(2),y=dl(c,p,2),y!==null&&(KT(p,y,c,o),K(y,2),ss(y));break}}c=c.return}}function pw(o,c,p){var y=o.pingCache;if(y===null){y=o.pingCache=new SO;var S=new Set;y.set(c,S)}else S=y.get(c),S===void 0&&(S=new Set,y.set(c,S));S.has(p)||(iw=!0,S.add(p),o=UO.bind(null,o,c,p),c.then(o,o))}function UO(o,c,p){var y=o.pingCache;y!==null&&y.delete(c),o.pingedLanes|=o.suspendedLanes&p,o.warmLanes&=~p,rn===o&&(Ut&p)===p&&(kn===4||kn===3&&(Ut&62914560)===Ut&&300>re()-ow?(Wt&2)===0&&xh(o,0):aw|=p,gh===Ut&&(gh=0)),ss(o)}function XC(o,c){c===0&&(c=mi()),o=eh(o,c),o!==null&&(K(o,c),ss(o))}function RO(o){var c=o.memoizedState,p=0;c!==null&&(p=c.retryLane),XC(o,p)}function jO(o,c){var p=0;switch(o.tag){case 13:var y=o.stateNode,S=o.memoizedState;S!==null&&(p=S.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(n(314))}y!==null&&y.delete(c),XC(o,p)}function FO(o,c){return $e(o,c)}var dy=null,vh=null,gw=!1,hy=!1,mw=!1,cu=0;function ss(o){o!==vh&&o.next===null&&(vh===null?dy=vh=o:vh=vh.next=o),hy=!0,gw||(gw=!0,OO())}function cg(o,c){if(!mw&&hy){mw=!0;do for(var p=!1,y=dy;y!==null;){if(o!==0){var S=y.pendingLanes;if(S===0)var T=0;else{var q=y.suspendedLanes,Z=y.pingedLanes;T=(1<<31-ze(42|o)+1)-1,T&=S&~(q&~Z),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(p=!0,KC(y,T))}else T=Ut,T=Ke(y,y===rn?T:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(T&3)===0||ft(y,T)||(p=!0,KC(y,T));y=y.next}while(p);mw=!1}}function IO(){GC()}function GC(){hy=gw=!1;var o=0;cu!==0&&(qO()&&(o=cu),cu=0);for(var c=re(),p=null,y=dy;y!==null;){var S=y.next,T=$C(y,c);T===0?(y.next=null,p===null?dy=S:p.next=S,S===null&&(vh=p)):(p=y,(o!==0||(T&3)!==0)&&(hy=!0)),y=S}cg(o)}function $C(o,c){for(var p=o.suspendedLanes,y=o.pingedLanes,S=o.expirationTimes,T=o.pendingLanes&-62914561;0<T;){var q=31-ze(T),Z=1<<q,le=S[q];le===-1?((Z&p)===0||(Z&y)!==0)&&(S[q]=yt(Z,c)):le<=c&&(o.expiredLanes|=Z),T&=~Z}if(c=rn,p=Ut,p=Ke(o,o===c?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y=o.callbackNode,p===0||o===c&&(Ht===2||Ht===9)||o.cancelPendingCommit!==null)return y!==null&&y!==null&&I(y),o.callbackNode=null,o.callbackPriority=0;if((p&3)===0||ft(o,p)){if(c=p&-p,c===o.callbackPriority)return c;switch(y!==null&&I(y),ot(p)){case 2:case 8:p=Ce;break;case 32:p=Ne;break;case 268435456:p=se;break;default:p=Ne}return y=YC.bind(null,o),p=$e(p,y),o.callbackPriority=c,o.callbackNode=p,c}return y!==null&&y!==null&&I(y),o.callbackPriority=2,o.callbackNode=null,2}function YC(o,c){if(hr!==0&&hr!==5)return o.callbackNode=null,o.callbackPriority=0,null;var p=o.callbackNode;if(uy()&&o.callbackNode!==p)return null;var y=Ut;return y=Ke(o,o===rn?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y===0?null:(UC(o,y,c),$C(o,re()),o.callbackNode!=null&&o.callbackNode===p?YC.bind(null,o):null)}function KC(o,c){if(uy())return null;UC(o,c,!0)}function OO(){XO(function(){(Wt&6)!==0?$e(ue,IO):GC()})}function bw(){return cu===0&&(cu=Jn()),cu}function QC(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Dx(""+o)}function ZC(o,c){var p=c.ownerDocument.createElement("input");return p.name=c.name,p.value=c.value,o.id&&p.setAttribute("form",o.id),c.parentNode.insertBefore(p,c),o=new FormData(o),p.parentNode.removeChild(p),o}function MO(o,c,p,y,S){if(c==="submit"&&p&&p.stateNode===S){var T=QC((S[un]||null).action),q=y.submitter;q&&(c=(c=q[un]||null)?QC(c.formAction):q.getAttribute("formAction"),c!==null&&(T=c,q=null));var Z=new Ex("action","action",null,y,S);o.push({event:Z,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(cu!==0){var le=q?ZC(S,q):new FormData(S);M2(p,{pending:!0,data:le,method:S.method,action:T},null,le)}}else typeof T=="function"&&(Z.preventDefault(),le=q?ZC(S,q):new FormData(S),M2(p,{pending:!0,data:le,method:S.method,action:T},T,le))},currentTarget:S}]})}}for(var xw=0;xw<n2.length;xw++){var yw=n2[xw],LO=yw.toLowerCase(),BO=yw[0].toUpperCase()+yw.slice(1);Ra(LO,"on"+BO)}Ra(UE,"onAnimationEnd"),Ra(RE,"onAnimationIteration"),Ra(jE,"onAnimationStart"),Ra("dblclick","onDoubleClick"),Ra("focusin","onFocus"),Ra("focusout","onBlur"),Ra(nO,"onTransitionRun"),Ra(rO,"onTransitionStart"),Ra(iO,"onTransitionCancel"),Ra(FE,"onTransitionEnd"),qd("onMouseEnter",["mouseout","mouseover"]),qd("onMouseLeave",["mouseout","mouseover"]),qd("onPointerEnter",["pointerout","pointerover"]),qd("onPointerLeave",["pointerout","pointerover"]),Gc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gc("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ug="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ug));function JC(o,c){c=(c&4)!==0;for(var p=0;p<o.length;p++){var y=o[p],S=y.event;y=y.listeners;e:{var T=void 0;if(c)for(var q=y.length-1;0<=q;q--){var Z=y[q],le=Z.instance,_e=Z.currentTarget;if(Z=Z.listener,le!==T&&S.isPropagationStopped())break e;T=Z,S.currentTarget=_e;try{T(S)}catch(Oe){Jx(Oe)}S.currentTarget=null,T=le}else for(q=0;q<y.length;q++){if(Z=y[q],le=Z.instance,_e=Z.currentTarget,Z=Z.listener,le!==T&&S.isPropagationStopped())break e;T=Z,S.currentTarget=_e;try{T(S)}catch(Oe){Jx(Oe)}S.currentTarget=null,T=le}}}}function St(o,c){var p=c[Na];p===void 0&&(p=c[Na]=new Set);var y=o+"__bubble";p.has(y)||(eN(c,o,2,!1),p.add(y))}function vw(o,c,p){var y=0;c&&(y|=4),eN(p,o,y,c)}var fy="_reactListening"+Math.random().toString(36).slice(2);function ww(o){if(!o[fy]){o[fy]=!0,GS.forEach(function(p){p!=="selectionchange"&&(PO.has(p)||vw(p,!1,o),vw(p,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[fy]||(c[fy]=!0,vw("selectionchange",!1,c))}}function eN(o,c,p,y){switch(_N(c)){case 2:var S=fM;break;case 8:S=pM;break;default:S=Iw}p=S.bind(null,c,p,o),S=void 0,!H1||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(S=!0),y?S!==void 0?o.addEventListener(c,p,{capture:!0,passive:S}):o.addEventListener(c,p,!0):S!==void 0?o.addEventListener(c,p,{passive:S}):o.addEventListener(c,p,!1)}function kw(o,c,p,y,S){var T=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var q=y.tag;if(q===3||q===4){var Z=y.stateNode.containerInfo;if(Z===S)break;if(q===4)for(q=y.return;q!==null;){var le=q.tag;if((le===3||le===4)&&q.stateNode.containerInfo===S)return;q=q.return}for(;Z!==null;){if(q=Ps(Z),q===null)return;if(le=q.tag,le===5||le===6||le===26||le===27){y=T=q;continue e}Z=Z.parentNode}}y=y.return}oE(function(){var _e=T,Oe=z1(p),Be=[];e:{var Se=IE.get(o);if(Se!==void 0){var Te=Ex,ht=o;switch(o){case"keypress":if(Ax(p)===0)break e;case"keydown":case"keyup":Te=FI;break;case"focusin":ht="focus",Te=G1;break;case"focusout":ht="blur",Te=G1;break;case"beforeblur":case"afterblur":Te=G1;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=uE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=kI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=MI;break;case UE:case RE:case jE:Te=AI;break;case FE:Te=BI;break;case"scroll":case"scrollend":Te=vI;break;case"wheel":Te=zI;break;case"copy":case"cut":case"paste":Te=EI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=hE;break;case"toggle":case"beforetoggle":Te=HI}var lt=(c&4)!==0,Kt=!lt&&(o==="scroll"||o==="scrollend"),we=lt?Se!==null?Se+"Capture":null:Se;lt=[];for(var me=_e,De;me!==null;){var Le=me;if(De=Le.stateNode,Le=Le.tag,Le!==5&&Le!==26&&Le!==27||De===null||we===null||(Le=Cp(me,we),Le!=null&&lt.push(dg(me,Le,De))),Kt)break;me=me.return}0<lt.length&&(Se=new Te(Se,ht,null,p,Oe),Be.push({event:Se,listeners:lt}))}}if((c&7)===0){e:{if(Se=o==="mouseover"||o==="pointerover",Te=o==="mouseout"||o==="pointerout",Se&&p!==P1&&(ht=p.relatedTarget||p.fromElement)&&(Ps(ht)||ht[Zr]))break e;if((Te||Se)&&(Se=Oe.window===Oe?Oe:(Se=Oe.ownerDocument)?Se.defaultView||Se.parentWindow:window,Te?(ht=p.relatedTarget||p.toElement,Te=_e,ht=ht?Ps(ht):null,ht!==null&&(Kt=a(ht),lt=ht.tag,ht!==Kt||lt!==5&&lt!==27&&lt!==6)&&(ht=null)):(Te=null,ht=_e),Te!==ht)){if(lt=uE,Le="onMouseLeave",we="onMouseEnter",me="mouse",(o==="pointerout"||o==="pointerover")&&(lt=hE,Le="onPointerLeave",we="onPointerEnter",me="pointer"),Kt=Te==null?Se:sl(Te),De=ht==null?Se:sl(ht),Se=new lt(Le,me+"leave",Te,p,Oe),Se.target=Kt,Se.relatedTarget=De,Le=null,Ps(Oe)===_e&&(lt=new lt(we,me+"enter",ht,p,Oe),lt.target=De,lt.relatedTarget=Kt,Le=lt),Kt=Le,Te&&ht)t:{for(lt=Te,we=ht,me=0,De=lt;De;De=wh(De))me++;for(De=0,Le=we;Le;Le=wh(Le))De++;for(;0<me-De;)lt=wh(lt),me--;for(;0<De-me;)we=wh(we),De--;for(;me--;){if(lt===we||we!==null&&lt===we.alternate)break t;lt=wh(lt),we=wh(we)}lt=null}else lt=null;Te!==null&&tN(Be,Se,Te,lt,!1),ht!==null&&Kt!==null&&tN(Be,Kt,ht,lt,!0)}}e:{if(Se=_e?sl(_e):window,Te=Se.nodeName&&Se.nodeName.toLowerCase(),Te==="select"||Te==="input"&&Se.type==="file")var nt=vE;else if(xE(Se))if(wE)nt=JI;else{nt=QI;var wt=KI}else Te=Se.nodeName,!Te||Te.toLowerCase()!=="input"||Se.type!=="checkbox"&&Se.type!=="radio"?_e&&B1(_e.elementType)&&(nt=vE):nt=ZI;if(nt&&(nt=nt(o,_e))){yE(Be,nt,p,Oe);break e}wt&&wt(o,Se,_e),o==="focusout"&&_e&&Se.type==="number"&&_e.memoizedProps.value!=null&&L1(Se,"number",Se.value)}switch(wt=_e?sl(_e):window,o){case"focusin":(xE(wt)||wt.contentEditable==="true")&&(Qd=wt,J1=_e,Mp=null);break;case"focusout":Mp=J1=Qd=null;break;case"mousedown":e2=!0;break;case"contextmenu":case"mouseup":case"dragend":e2=!1,CE(Be,p,Oe);break;case"selectionchange":if(tO)break;case"keydown":case"keyup":CE(Be,p,Oe)}var it;if(Y1)e:{switch(o){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Kd?mE(o,p)&&(dt="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(dt="onCompositionStart");dt&&(fE&&p.locale!=="ko"&&(Kd||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Kd&&(it=lE()):(ol=Oe,q1="value"in ol?ol.value:ol.textContent,Kd=!0)),wt=py(_e,dt),0<wt.length&&(dt=new dE(dt,o,null,p,Oe),Be.push({event:dt,listeners:wt}),it?dt.data=it:(it=bE(p),it!==null&&(dt.data=it)))),(it=VI?XI(o,p):GI(o,p))&&(dt=py(_e,"onBeforeInput"),0<dt.length&&(wt=new dE("onBeforeInput","beforeinput",null,p,Oe),Be.push({event:wt,listeners:dt}),wt.data=it)),MO(Be,o,_e,p,Oe)}JC(Be,c)})}function dg(o,c,p){return{instance:o,listener:c,currentTarget:p}}function py(o,c){for(var p=c+"Capture",y=[];o!==null;){var S=o,T=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||T===null||(S=Cp(o,p),S!=null&&y.unshift(dg(o,S,T)),S=Cp(o,c),S!=null&&y.push(dg(o,S,T))),o.tag===3)return y;o=o.return}return[]}function wh(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function tN(o,c,p,y,S){for(var T=c._reactName,q=[];p!==null&&p!==y;){var Z=p,le=Z.alternate,_e=Z.stateNode;if(Z=Z.tag,le!==null&&le===y)break;Z!==5&&Z!==26&&Z!==27||_e===null||(le=_e,S?(_e=Cp(p,T),_e!=null&&q.unshift(dg(p,_e,le))):S||(_e=Cp(p,T),_e!=null&&q.push(dg(p,_e,le)))),p=p.return}q.length!==0&&o.push({event:c,listeners:q})}var zO=/\r\n?/g,WO=/\u0000|\uFFFD/g;function nN(o){return(typeof o=="string"?o:""+o).replace(zO,`
`).replace(WO,"")}function rN(o,c){return c=nN(c),nN(o)===c}function gy(){}function Yt(o,c,p,y,S,T){switch(p){case"children":typeof y=="string"?c==="body"||c==="textarea"&&y===""||Gd(o,y):(typeof y=="number"||typeof y=="bigint")&&c!=="body"&&Gd(o,""+y);break;case"className":vx(o,"class",y);break;case"tabIndex":vx(o,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":vx(o,p,y);break;case"style":aE(o,y,T);break;case"data":if(c!=="object"){vx(o,"data",y);break}case"src":case"href":if(y===""&&(c!=="a"||p!=="href")){o.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(p);break}y=Dx(""+y),o.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){o.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(p==="formAction"?(c!=="input"&&Yt(o,c,"name",S.name,S,null),Yt(o,c,"formEncType",S.formEncType,S,null),Yt(o,c,"formMethod",S.formMethod,S,null),Yt(o,c,"formTarget",S.formTarget,S,null)):(Yt(o,c,"encType",S.encType,S,null),Yt(o,c,"method",S.method,S,null),Yt(o,c,"target",S.target,S,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(p);break}y=Dx(""+y),o.setAttribute(p,y);break;case"onClick":y!=null&&(o.onclick=gy);break;case"onScroll":y!=null&&St("scroll",o);break;case"onScrollEnd":y!=null&&St("scrollend",o);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(p=y.__html,p!=null){if(S.children!=null)throw Error(n(60));o.innerHTML=p}}break;case"multiple":o.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":o.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){o.removeAttribute("xlink:href");break}p=Dx(""+y),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,""+y):o.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,""):o.removeAttribute(p);break;case"capture":case"download":y===!0?o.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(p,y):o.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?o.setAttribute(p,y):o.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?o.removeAttribute(p):o.setAttribute(p,y);break;case"popover":St("beforetoggle",o),St("toggle",o),yx(o,"popover",y);break;case"xlinkActuate":zs(o,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":zs(o,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":zs(o,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":zs(o,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":zs(o,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":zs(o,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":zs(o,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":zs(o,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":zs(o,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":yx(o,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=xI.get(p)||p,yx(o,p,y))}}function Dw(o,c,p,y,S,T){switch(p){case"style":aE(o,y,T);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(p=y.__html,p!=null){if(S.children!=null)throw Error(n(60));o.innerHTML=p}}break;case"children":typeof y=="string"?Gd(o,y):(typeof y=="number"||typeof y=="bigint")&&Gd(o,""+y);break;case"onScroll":y!=null&&St("scroll",o);break;case"onScrollEnd":y!=null&&St("scrollend",o);break;case"onClick":y!=null&&(o.onclick=gy);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$S.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(S=p.endsWith("Capture"),c=p.slice(2,S?p.length-7:void 0),T=o[un]||null,T=T!=null?T[p]:null,typeof T=="function"&&o.removeEventListener(c,T,S),typeof y=="function")){typeof T!="function"&&T!==null&&(p in o?o[p]=null:o.hasAttribute(p)&&o.removeAttribute(p)),o.addEventListener(c,y,S);break e}p in o?o[p]=y:y===!0?o.setAttribute(p,""):yx(o,p,y)}}}function fr(o,c,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":St("error",o),St("load",o);var y=!1,S=!1,T;for(T in p)if(p.hasOwnProperty(T)){var q=p[T];if(q!=null)switch(T){case"src":y=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:Yt(o,c,T,q,p,null)}}S&&Yt(o,c,"srcSet",p.srcSet,p,null),y&&Yt(o,c,"src",p.src,p,null);return;case"input":St("invalid",o);var Z=T=q=S=null,le=null,_e=null;for(y in p)if(p.hasOwnProperty(y)){var Oe=p[y];if(Oe!=null)switch(y){case"name":S=Oe;break;case"type":q=Oe;break;case"checked":le=Oe;break;case"defaultChecked":_e=Oe;break;case"value":T=Oe;break;case"defaultValue":Z=Oe;break;case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(n(137,c));break;default:Yt(o,c,y,Oe,p,null)}}tE(o,T,Z,le,_e,q,S,!1),wx(o);return;case"select":St("invalid",o),y=q=T=null;for(S in p)if(p.hasOwnProperty(S)&&(Z=p[S],Z!=null))switch(S){case"value":T=Z;break;case"defaultValue":q=Z;break;case"multiple":y=Z;default:Yt(o,c,S,Z,p,null)}c=T,p=q,o.multiple=!!y,c!=null?Xd(o,!!y,c,!1):p!=null&&Xd(o,!!y,p,!0);return;case"textarea":St("invalid",o),T=S=y=null;for(q in p)if(p.hasOwnProperty(q)&&(Z=p[q],Z!=null))switch(q){case"value":y=Z;break;case"defaultValue":S=Z;break;case"children":T=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(91));break;default:Yt(o,c,q,Z,p,null)}rE(o,y,S,T),wx(o);return;case"option":for(le in p)if(p.hasOwnProperty(le)&&(y=p[le],y!=null))switch(le){case"selected":o.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Yt(o,c,le,y,p,null)}return;case"dialog":St("beforetoggle",o),St("toggle",o),St("cancel",o),St("close",o);break;case"iframe":case"object":St("load",o);break;case"video":case"audio":for(y=0;y<ug.length;y++)St(ug[y],o);break;case"image":St("error",o),St("load",o);break;case"details":St("toggle",o);break;case"embed":case"source":case"link":St("error",o),St("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_e in p)if(p.hasOwnProperty(_e)&&(y=p[_e],y!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,c));default:Yt(o,c,_e,y,p,null)}return;default:if(B1(c)){for(Oe in p)p.hasOwnProperty(Oe)&&(y=p[Oe],y!==void 0&&Dw(o,c,Oe,y,p,void 0));return}}for(Z in p)p.hasOwnProperty(Z)&&(y=p[Z],y!=null&&Yt(o,c,Z,y,p,null))}function HO(o,c,p,y){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,T=null,q=null,Z=null,le=null,_e=null,Oe=null;for(Te in p){var Be=p[Te];if(p.hasOwnProperty(Te)&&Be!=null)switch(Te){case"checked":break;case"value":break;case"defaultValue":le=Be;default:y.hasOwnProperty(Te)||Yt(o,c,Te,null,y,Be)}}for(var Se in y){var Te=y[Se];if(Be=p[Se],y.hasOwnProperty(Se)&&(Te!=null||Be!=null))switch(Se){case"type":T=Te;break;case"name":S=Te;break;case"checked":_e=Te;break;case"defaultChecked":Oe=Te;break;case"value":q=Te;break;case"defaultValue":Z=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(n(137,c));break;default:Te!==Be&&Yt(o,c,Se,Te,y,Be)}}M1(o,q,Z,le,_e,Oe,T,S);return;case"select":Te=q=Z=Se=null;for(T in p)if(le=p[T],p.hasOwnProperty(T)&&le!=null)switch(T){case"value":break;case"multiple":Te=le;default:y.hasOwnProperty(T)||Yt(o,c,T,null,y,le)}for(S in y)if(T=y[S],le=p[S],y.hasOwnProperty(S)&&(T!=null||le!=null))switch(S){case"value":Se=T;break;case"defaultValue":Z=T;break;case"multiple":q=T;default:T!==le&&Yt(o,c,S,T,y,le)}c=Z,p=q,y=Te,Se!=null?Xd(o,!!p,Se,!1):!!y!=!!p&&(c!=null?Xd(o,!!p,c,!0):Xd(o,!!p,p?[]:"",!1));return;case"textarea":Te=Se=null;for(Z in p)if(S=p[Z],p.hasOwnProperty(Z)&&S!=null&&!y.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:Yt(o,c,Z,null,y,S)}for(q in y)if(S=y[q],T=p[q],y.hasOwnProperty(q)&&(S!=null||T!=null))switch(q){case"value":Se=S;break;case"defaultValue":Te=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(n(91));break;default:S!==T&&Yt(o,c,q,S,y,T)}nE(o,Se,Te);return;case"option":for(var ht in p)if(Se=p[ht],p.hasOwnProperty(ht)&&Se!=null&&!y.hasOwnProperty(ht))switch(ht){case"selected":o.selected=!1;break;default:Yt(o,c,ht,null,y,Se)}for(le in y)if(Se=y[le],Te=p[le],y.hasOwnProperty(le)&&Se!==Te&&(Se!=null||Te!=null))switch(le){case"selected":o.selected=Se&&typeof Se!="function"&&typeof Se!="symbol";break;default:Yt(o,c,le,Se,y,Te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var lt in p)Se=p[lt],p.hasOwnProperty(lt)&&Se!=null&&!y.hasOwnProperty(lt)&&Yt(o,c,lt,null,y,Se);for(_e in y)if(Se=y[_e],Te=p[_e],y.hasOwnProperty(_e)&&Se!==Te&&(Se!=null||Te!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(n(137,c));break;default:Yt(o,c,_e,Se,y,Te)}return;default:if(B1(c)){for(var Kt in p)Se=p[Kt],p.hasOwnProperty(Kt)&&Se!==void 0&&!y.hasOwnProperty(Kt)&&Dw(o,c,Kt,void 0,y,Se);for(Oe in y)Se=y[Oe],Te=p[Oe],!y.hasOwnProperty(Oe)||Se===Te||Se===void 0&&Te===void 0||Dw(o,c,Oe,Se,y,Te);return}}for(var we in p)Se=p[we],p.hasOwnProperty(we)&&Se!=null&&!y.hasOwnProperty(we)&&Yt(o,c,we,null,y,Se);for(Be in y)Se=y[Be],Te=p[Be],!y.hasOwnProperty(Be)||Se===Te||Se==null&&Te==null||Yt(o,c,Be,Se,y,Te)}var _w=null,Aw=null;function my(o){return o.nodeType===9?o:o.ownerDocument}function iN(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function aN(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function Sw(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Ew=null;function qO(){var o=window.event;return o&&o.type==="popstate"?o===Ew?!1:(Ew=o,!0):(Ew=null,!1)}var sN=typeof setTimeout=="function"?setTimeout:void 0,VO=typeof clearTimeout=="function"?clearTimeout:void 0,oN=typeof Promise=="function"?Promise:void 0,XO=typeof queueMicrotask=="function"?queueMicrotask:typeof oN<"u"?function(o){return oN.resolve(null).then(o).catch(GO)}:sN;function GO(o){setTimeout(function(){throw o})}function Dl(o){return o==="head"}function lN(o,c){var p=c,y=0,S=0;do{var T=p.nextSibling;if(o.removeChild(p),T&&T.nodeType===8)if(p=T.data,p==="/$"){if(0<y&&8>y){p=y;var q=o.ownerDocument;if(p&1&&hg(q.documentElement),p&2&&hg(q.body),p&4)for(p=q.head,hg(p),q=p.firstChild;q;){var Z=q.nextSibling,le=q.nodeName;q[Ua]||le==="SCRIPT"||le==="STYLE"||le==="LINK"&&q.rel.toLowerCase()==="stylesheet"||p.removeChild(q),q=Z}}if(S===0){o.removeChild(T),vg(c);return}S--}else p==="$"||p==="$?"||p==="$!"?S++:y=p.charCodeAt(0)-48;else y=0;p=T}while(p);vg(c)}function Tw(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var p=c;switch(c=c.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":Tw(p),Rn(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}o.removeChild(p)}}function $O(o,c,p,y){for(;o.nodeType===1;){var S=p;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!y&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(y){if(!o[Ua])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(T=o.getAttribute("rel"),T==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(T!==S.rel||o.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||o.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||o.getAttribute("title")!==(S.title==null?null:S.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(T=o.getAttribute("src"),(T!==(S.src==null?null:S.src)||o.getAttribute("type")!==(S.type==null?null:S.type)||o.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&T&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var T=S.name==null?null:""+S.name;if(S.type==="hidden"&&o.getAttribute("name")===T)return o}else return o;if(o=Fa(o.nextSibling),o===null)break}return null}function YO(o,c,p){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!p||(o=Fa(o.nextSibling),o===null))return null;return o}function Cw(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function KO(o,c){var p=o.ownerDocument;if(o.data!=="$?"||p.readyState==="complete")c();else{var y=function(){c(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),o._reactRetry=y}}function Fa(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}var Nw=null;function cN(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(c===0)return o;c--}else p==="/$"&&c++}o=o.previousSibling}return null}function uN(o,c,p){switch(c=my(p),o){case"html":if(o=c.documentElement,!o)throw Error(n(452));return o;case"head":if(o=c.head,!o)throw Error(n(453));return o;case"body":if(o=c.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function hg(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);Rn(o)}var sa=new Map,dN=new Set;function by(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var to=B.d;B.d={f:QO,r:ZO,D:JO,C:eM,L:tM,m:nM,X:iM,S:rM,M:aM};function QO(){var o=to.f(),c=ly();return o||c}function ZO(o){var c=bi(o);c!==null&&c.tag===5&&c.type==="form"?UT(c):to.r(o)}var kh=typeof document>"u"?null:document;function hN(o,c,p){var y=kh;if(y&&typeof c=="string"&&c){var S=Ji(c);S='link[rel="'+o+'"][href="'+S+'"]',typeof p=="string"&&(S+='[crossorigin="'+p+'"]'),dN.has(S)||(dN.add(S),o={rel:o,crossOrigin:p,href:c},y.querySelector(S)===null&&(c=y.createElement("link"),fr(c,"link",o),er(c),y.head.appendChild(c)))}}function JO(o){to.D(o),hN("dns-prefetch",o,null)}function eM(o,c){to.C(o,c),hN("preconnect",o,c)}function tM(o,c,p){to.L(o,c,p);var y=kh;if(y&&o&&c){var S='link[rel="preload"][as="'+Ji(c)+'"]';c==="image"&&p&&p.imageSrcSet?(S+='[imagesrcset="'+Ji(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(S+='[imagesizes="'+Ji(p.imageSizes)+'"]')):S+='[href="'+Ji(o)+'"]';var T=S;switch(c){case"style":T=Dh(o);break;case"script":T=_h(o)}sa.has(T)||(o=h({rel:"preload",href:c==="image"&&p&&p.imageSrcSet?void 0:o,as:c},p),sa.set(T,o),y.querySelector(S)!==null||c==="style"&&y.querySelector(fg(T))||c==="script"&&y.querySelector(pg(T))||(c=y.createElement("link"),fr(c,"link",o),er(c),y.head.appendChild(c)))}}function nM(o,c){to.m(o,c);var p=kh;if(p&&o){var y=c&&typeof c.as=="string"?c.as:"script",S='link[rel="modulepreload"][as="'+Ji(y)+'"][href="'+Ji(o)+'"]',T=S;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=_h(o)}if(!sa.has(T)&&(o=h({rel:"modulepreload",href:o},c),sa.set(T,o),p.querySelector(S)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(pg(T)))return}y=p.createElement("link"),fr(y,"link",o),er(y),p.head.appendChild(y)}}}function rM(o,c,p){to.S(o,c,p);var y=kh;if(y&&o){var S=Hd(y).hoistableStyles,T=Dh(o);c=c||"default";var q=S.get(T);if(!q){var Z={loading:0,preload:null};if(q=y.querySelector(fg(T)))Z.loading=5;else{o=h({rel:"stylesheet",href:o,"data-precedence":c},p),(p=sa.get(T))&&Uw(o,p);var le=q=y.createElement("link");er(le),fr(le,"link",o),le._p=new Promise(function(_e,Oe){le.onload=_e,le.onerror=Oe}),le.addEventListener("load",function(){Z.loading|=1}),le.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,xy(q,c,y)}q={type:"stylesheet",instance:q,count:1,state:Z},S.set(T,q)}}}function iM(o,c){to.X(o,c);var p=kh;if(p&&o){var y=Hd(p).hoistableScripts,S=_h(o),T=y.get(S);T||(T=p.querySelector(pg(S)),T||(o=h({src:o,async:!0},c),(c=sa.get(S))&&Rw(o,c),T=p.createElement("script"),er(T),fr(T,"link",o),p.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},y.set(S,T))}}function aM(o,c){to.M(o,c);var p=kh;if(p&&o){var y=Hd(p).hoistableScripts,S=_h(o),T=y.get(S);T||(T=p.querySelector(pg(S)),T||(o=h({src:o,async:!0,type:"module"},c),(c=sa.get(S))&&Rw(o,c),T=p.createElement("script"),er(T),fr(T,"link",o),p.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},y.set(S,T))}}function fN(o,c,p,y){var S=(S=je.current)?by(S):null;if(!S)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(c=Dh(p.href),p=Hd(S).hoistableStyles,y=p.get(c),y||(y={type:"style",instance:null,count:0,state:null},p.set(c,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){o=Dh(p.href);var T=Hd(S).hoistableStyles,q=T.get(o);if(q||(S=S.ownerDocument||S,q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(o,q),(T=S.querySelector(fg(o)))&&!T._p&&(q.instance=T,q.state.loading=5),sa.has(o)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},sa.set(o,p),T||sM(S,o,p,q.state))),c&&y===null)throw Error(n(528,""));return q}if(c&&y!==null)throw Error(n(529,""));return null;case"script":return c=p.async,p=p.src,typeof p=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=_h(p),p=Hd(S).hoistableScripts,y=p.get(c),y||(y={type:"script",instance:null,count:0,state:null},p.set(c,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function Dh(o){return'href="'+Ji(o)+'"'}function fg(o){return'link[rel="stylesheet"]['+o+"]"}function pN(o){return h({},o,{"data-precedence":o.precedence,precedence:null})}function sM(o,c,p,y){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?y.loading=1:(c=o.createElement("link"),y.preload=c,c.addEventListener("load",function(){return y.loading|=1}),c.addEventListener("error",function(){return y.loading|=2}),fr(c,"link",p),er(c),o.head.appendChild(c))}function _h(o){return'[src="'+Ji(o)+'"]'}function pg(o){return"script[async]"+o}function gN(o,c,p){if(c.count++,c.instance===null)switch(c.type){case"style":var y=o.querySelector('style[data-href~="'+Ji(p.href)+'"]');if(y)return c.instance=y,er(y),y;var S=h({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(o.ownerDocument||o).createElement("style"),er(y),fr(y,"style",S),xy(y,p.precedence,o),c.instance=y;case"stylesheet":S=Dh(p.href);var T=o.querySelector(fg(S));if(T)return c.state.loading|=4,c.instance=T,er(T),T;y=pN(p),(S=sa.get(S))&&Uw(y,S),T=(o.ownerDocument||o).createElement("link"),er(T);var q=T;return q._p=new Promise(function(Z,le){q.onload=Z,q.onerror=le}),fr(T,"link",y),c.state.loading|=4,xy(T,p.precedence,o),c.instance=T;case"script":return T=_h(p.src),(S=o.querySelector(pg(T)))?(c.instance=S,er(S),S):(y=p,(S=sa.get(T))&&(y=h({},p),Rw(y,S)),o=o.ownerDocument||o,S=o.createElement("script"),er(S),fr(S,"link",y),o.head.appendChild(S),c.instance=S);case"void":return null;default:throw Error(n(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(y=c.instance,c.state.loading|=4,xy(y,p.precedence,o));return c.instance}function xy(o,c,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=y.length?y[y.length-1]:null,T=S,q=0;q<y.length;q++){var Z=y[q];if(Z.dataset.precedence===c)T=Z;else if(T!==S)break}T?T.parentNode.insertBefore(o,T.nextSibling):(c=p.nodeType===9?p.head:p,c.insertBefore(o,c.firstChild))}function Uw(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function Rw(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var yy=null;function mN(o,c,p){if(yy===null){var y=new Map,S=yy=new Map;S.set(p,y)}else S=yy,y=S.get(p),y||(y=new Map,S.set(p,y));if(y.has(o))return y;for(y.set(o,null),p=p.getElementsByTagName(o),S=0;S<p.length;S++){var T=p[S];if(!(T[Ua]||T[ln]||o==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var q=T.getAttribute(c)||"";q=o+q;var Z=y.get(q);Z?Z.push(T):y.set(q,[T])}}return y}function bN(o,c,p){o=o.ownerDocument||o,o.head.insertBefore(p,c==="title"?o.querySelector("head > title"):null)}function oM(o,c,p){if(p===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function xN(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var gg=null;function lM(){}function cM(o,c,p){if(gg===null)throw Error(n(475));var y=gg;if(c.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var S=Dh(p.href),T=o.querySelector(fg(S));if(T){o=T._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(y.count++,y=vy.bind(y),o.then(y,y)),c.state.loading|=4,c.instance=T,er(T);return}T=o.ownerDocument||o,p=pN(p),(S=sa.get(S))&&Uw(p,S),T=T.createElement("link"),er(T);var q=T;q._p=new Promise(function(Z,le){q.onload=Z,q.onerror=le}),fr(T,"link",p),c.instance=T}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(y.count++,c=vy.bind(y),o.addEventListener("load",c),o.addEventListener("error",c))}}function uM(){if(gg===null)throw Error(n(475));var o=gg;return o.stylesheets&&o.count===0&&jw(o,o.stylesheets),0<o.count?function(c){var p=setTimeout(function(){if(o.stylesheets&&jw(o,o.stylesheets),o.unsuspend){var y=o.unsuspend;o.unsuspend=null,y()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(p)}}:null}function vy(){if(this.count--,this.count===0){if(this.stylesheets)jw(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var wy=null;function jw(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,wy=new Map,c.forEach(dM,o),wy=null,vy.call(o))}function dM(o,c){if(!(c.state.loading&4)){var p=wy.get(o);if(p)var y=p.get(null);else{p=new Map,wy.set(o,p);for(var S=o.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<S.length;T++){var q=S[T];(q.nodeName==="LINK"||q.getAttribute("media")!=="not all")&&(p.set(q.dataset.precedence,q),y=q)}y&&p.set(null,y)}S=c.instance,q=S.getAttribute("data-precedence"),T=p.get(q)||y,T===y&&p.set(null,S),p.set(q,S),this.count++,y=vy.bind(this),S.addEventListener("load",y),S.addEventListener("error",y),T?T.parentNode.insertBefore(S,T.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(S,o.firstChild)),c.state.loading|=4}}var mg={$$typeof:A,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function hM(o,c,p,y,S,T,q,Z){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ki(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ki(0),this.hiddenUpdates=Ki(null),this.identifierPrefix=y,this.onUncaughtError=S,this.onCaughtError=T,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function yN(o,c,p,y,S,T,q,Z,le,_e,Oe,Be){return o=new hM(o,c,p,q,Z,le,_e,Be),c=1,T===!0&&(c|=24),T=yi(3,null,null,c),o.current=T,T.stateNode=o,c=p2(),c.refCount++,o.pooledCache=c,c.refCount++,T.memoizedState={element:y,isDehydrated:p,cache:c},x2(T),o}function vN(o){return o?(o=th,o):th}function wN(o,c,p,y,S,T){S=vN(S),y.context===null?y.context=S:y.pendingContext=S,y=ul(c),y.payload={element:p},T=T===void 0?null:T,T!==null&&(y.callback=T),p=dl(o,y,c),p!==null&&(_i(p,o,c),Xp(p,o,c))}function kN(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<c?p:c}}function Fw(o,c){kN(o,c),(o=o.alternate)&&kN(o,c)}function DN(o){if(o.tag===13){var c=eh(o,67108864);c!==null&&_i(c,o,67108864),Fw(o,67108864)}}var ky=!0;function fM(o,c,p,y){var S=P.T;P.T=null;var T=B.p;try{B.p=2,Iw(o,c,p,y)}finally{B.p=T,P.T=S}}function pM(o,c,p,y){var S=P.T;P.T=null;var T=B.p;try{B.p=8,Iw(o,c,p,y)}finally{B.p=T,P.T=S}}function Iw(o,c,p,y){if(ky){var S=Ow(y);if(S===null)kw(o,c,y,Dy,p),AN(o,y);else if(mM(S,o,c,p,y))y.stopPropagation();else if(AN(o,y),c&4&&-1<gM.indexOf(o)){for(;S!==null;){var T=bi(S);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var q=Ze(T.pendingLanes);if(q!==0){var Z=T;for(Z.pendingLanes|=2,Z.entangledLanes|=2;q;){var le=1<<31-ze(q);Z.entanglements[1]|=le,q&=~le}ss(T),(Wt&6)===0&&(sy=re()+500,cg(0))}}break;case 13:Z=eh(T,2),Z!==null&&_i(Z,T,2),ly(),Fw(T,2)}if(T=Ow(y),T===null&&kw(o,c,y,Dy,p),T===S)break;S=T}S!==null&&y.stopPropagation()}else kw(o,c,y,null,p)}}function Ow(o){return o=z1(o),Mw(o)}var Dy=null;function Mw(o){if(Dy=null,o=Ps(o),o!==null){var c=a(o);if(c===null)o=null;else{var p=c.tag;if(p===13){if(o=s(c),o!==null)return o;o=null}else if(p===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return Dy=o,null}function _N(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case ue:return 2;case Ce:return 8;case Ne:case pe:return 32;case se:return 268435456;default:return 32}default:return 32}}var Lw=!1,_l=null,Al=null,Sl=null,bg=new Map,xg=new Map,El=[],gM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function AN(o,c){switch(o){case"focusin":case"focusout":_l=null;break;case"dragenter":case"dragleave":Al=null;break;case"mouseover":case"mouseout":Sl=null;break;case"pointerover":case"pointerout":bg.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":xg.delete(c.pointerId)}}function yg(o,c,p,y,S,T){return o===null||o.nativeEvent!==T?(o={blockedOn:c,domEventName:p,eventSystemFlags:y,nativeEvent:T,targetContainers:[S]},c!==null&&(c=bi(c),c!==null&&DN(c)),o):(o.eventSystemFlags|=y,c=o.targetContainers,S!==null&&c.indexOf(S)===-1&&c.push(S),o)}function mM(o,c,p,y,S){switch(c){case"focusin":return _l=yg(_l,o,c,p,y,S),!0;case"dragenter":return Al=yg(Al,o,c,p,y,S),!0;case"mouseover":return Sl=yg(Sl,o,c,p,y,S),!0;case"pointerover":var T=S.pointerId;return bg.set(T,yg(bg.get(T)||null,o,c,p,y,S)),!0;case"gotpointercapture":return T=S.pointerId,xg.set(T,yg(xg.get(T)||null,o,c,p,y,S)),!0}return!1}function SN(o){var c=Ps(o.target);if(c!==null){var p=a(c);if(p!==null){if(c=p.tag,c===13){if(c=s(p),c!==null){o.blockedOn=c,Sr(o.priority,function(){if(p.tag===13){var y=Di();y=Xe(y);var S=eh(p,y);S!==null&&_i(S,p,y),Fw(p,y)}});return}}else if(c===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function _y(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var p=Ow(o.nativeEvent);if(p===null){p=o.nativeEvent;var y=new p.constructor(p.type,p);P1=y,p.target.dispatchEvent(y),P1=null}else return c=bi(p),c!==null&&DN(c),o.blockedOn=p,!1;c.shift()}return!0}function EN(o,c,p){_y(o)&&p.delete(c)}function bM(){Lw=!1,_l!==null&&_y(_l)&&(_l=null),Al!==null&&_y(Al)&&(Al=null),Sl!==null&&_y(Sl)&&(Sl=null),bg.forEach(EN),xg.forEach(EN)}function Ay(o,c){o.blockedOn===c&&(o.blockedOn=null,Lw||(Lw=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,bM)))}var Sy=null;function TN(o){Sy!==o&&(Sy=o,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Sy===o&&(Sy=null);for(var c=0;c<o.length;c+=3){var p=o[c],y=o[c+1],S=o[c+2];if(typeof y!="function"){if(Mw(y||p)===null)continue;break}var T=bi(p);T!==null&&(o.splice(c,3),c-=3,M2(T,{pending:!0,data:S,method:p.method,action:y},y,S))}}))}function vg(o){function c(le){return Ay(le,o)}_l!==null&&Ay(_l,o),Al!==null&&Ay(Al,o),Sl!==null&&Ay(Sl,o),bg.forEach(c),xg.forEach(c);for(var p=0;p<El.length;p++){var y=El[p];y.blockedOn===o&&(y.blockedOn=null)}for(;0<El.length&&(p=El[0],p.blockedOn===null);)SN(p),p.blockedOn===null&&El.shift();if(p=(o.ownerDocument||o).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var S=p[y],T=p[y+1],q=S[un]||null;if(typeof T=="function")q||TN(p);else if(q){var Z=null;if(T&&T.hasAttribute("formAction")){if(S=T,q=T[un]||null)Z=q.formAction;else if(Mw(S)!==null)continue}else Z=q.action;typeof Z=="function"?p[y+1]=Z:(p.splice(y,3),y-=3),TN(p)}}}function Bw(o){this._internalRoot=o}Ey.prototype.render=Bw.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(n(409));var p=c.current,y=Di();wN(p,y,o,c,null,null)},Ey.prototype.unmount=Bw.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;wN(o.current,2,null,o,null,null),ly(),c[Zr]=null}};function Ey(o){this._internalRoot=o}Ey.prototype.unstable_scheduleHydration=function(o){if(o){var c=Gt();o={blockedOn:null,target:o,priority:c};for(var p=0;p<El.length&&c!==0&&c<El[p].priority;p++);El.splice(p,0,o),p===0&&SN(o)}};var CN=e.version;if(CN!=="19.1.1")throw Error(n(527,CN,"19.1.1"));B.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=u(c),o=o!==null?d(o):null,o=o===null?null:o.stateNode,o};var xM={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ty=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ty.isDisabled&&Ty.supportsFiber)try{ae=Ty.inject(xM),ke=Ty}catch{}}return kg.createRoot=function(o,c){if(!i(o))throw Error(n(299));var p=!1,y="",S=VT,T=XT,q=GT,Z=null;return c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(S=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(q=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(Z=c.unstable_transitionCallbacks)),c=yN(o,1,!1,null,null,p,y,S,T,q,Z,null),o[Zr]=c.current,ww(o),new Bw(c)},kg.hydrateRoot=function(o,c,p){if(!i(o))throw Error(n(299));var y=!1,S="",T=VT,q=XT,Z=GT,le=null,_e=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(S=p.identifierPrefix),p.onUncaughtError!==void 0&&(T=p.onUncaughtError),p.onCaughtError!==void 0&&(q=p.onCaughtError),p.onRecoverableError!==void 0&&(Z=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(le=p.unstable_transitionCallbacks),p.formState!==void 0&&(_e=p.formState)),c=yN(o,1,!0,c,p??null,y,S,T,q,Z,le,_e),c.context=vN(null),p=c.current,y=Di(),y=Xe(y),S=ul(y),S.callback=null,dl(p,S,y),p=y,c.current.lanes=p,K(c,p),ss(c),o[Zr]=c.current,ww(o),new Ey(c)},kg.version="19.1.1",kg}var ON;function UM(){if(ON)return Ww.exports;ON=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ww.exports=NM(),Ww.exports}var RM=UM();const jM=nx(RM);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var MN="popstate";function FM(r={}){function e(n,i){let{pathname:a,search:s,hash:l}=n.location;return SD("",{pathname:a,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:dm(i)}return OM(e,t,null,r)}function mn(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Aa(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function IM(){return Math.random().toString(36).substring(2,10)}function LN(r,e){return{usr:r.state,key:r.key,idx:e}}function SD(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?xp(e):e,state:t,key:e&&e.key||n||IM()}}function dm({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function xp(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function OM(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,l="POP",u=null,d=h();d==null&&(d=0,s.replaceState({...s.state,idx:d},""));function h(){return(s.state||{idx:null}).idx}function g(){l="POP";let w=h(),D=w==null?null:w-d;d=w,u&&u({action:l,location:v.location,delta:D})}function b(w,D){l="PUSH";let _=SD(v.location,w,D);d=h()+1;let A=LN(_,d),N=v.createHref(_);try{s.pushState(A,"",N)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(N)}a&&u&&u({action:l,location:v.location,delta:1})}function x(w,D){l="REPLACE";let _=SD(v.location,w,D);d=h();let A=LN(_,d),N=v.createHref(_);s.replaceState(A,"",N),a&&u&&u({action:l,location:v.location,delta:0})}function k(w){return MM(w)}let v={get action(){return l},get location(){return r(i,s)},listen(w){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(MN,g),u=w,()=>{i.removeEventListener(MN,g),u=null}},createHref(w){return e(i,w)},createURL:k,encodeLocation(w){let D=k(w);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:b,replace:x,go(w){return s.go(w)}};return v}function MM(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),mn(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:dm(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function SR(r,e,t="/"){return LM(r,e,t,!1)}function LM(r,e,t,n){let i=typeof e=="string"?xp(e):e,a=el(i.pathname||"/",t);if(a==null)return null;let s=ER(r);BM(s);let l=null;for(let u=0;l==null&&u<s.length;++u){let d=KM(a);l=$M(s[u],d,n)}return l}function ER(r,e=[],t=[],n="",i=!1){let a=(s,l,u=i,d)=>{let h={relativePath:d===void 0?s.path||"":d,caseSensitive:s.caseSensitive===!0,childrenIndex:l,route:s};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&u)return;mn(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let g=Qo([n,h.relativePath]),b=t.concat(h);s.children&&s.children.length>0&&(mn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),ER(s.children,e,b,g,u)),!(s.path==null&&!s.index)&&e.push({path:g,score:XM(g,s.index),routesMeta:b})};return r.forEach((s,l)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))a(s,l);else for(let d of TR(s.path))a(s,l,!0,d)}),e}function TR(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let s=TR(n.join("/")),l=[];return l.push(...s.map(u=>u===""?a:[a,u].join("/"))),i&&l.push(...s),l.map(u=>r.startsWith("/")&&u===""?"/":u)}function BM(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:GM(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var PM=/^:[\w-]+$/,zM=3,WM=2,HM=1,qM=10,VM=-2,BN=r=>r==="*";function XM(r,e){let t=r.split("/"),n=t.length;return t.some(BN)&&(n+=VM),e&&(n+=WM),t.filter(i=>!BN(i)).reduce((i,a)=>i+(PM.test(a)?zM:a===""?HM:qM),n)}function GM(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function $M(r,e,t=!1){let{routesMeta:n}=r,i={},a="/",s=[];for(let l=0;l<n.length;++l){let u=n[l],d=l===n.length-1,h=a==="/"?e:e.slice(a.length)||"/",g=nv({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),b=u.route;if(!g&&d&&t&&!n[n.length-1].route.index&&(g=nv({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!g)return null;Object.assign(i,g.params),s.push({params:i,pathname:Qo([a,g.pathname]),pathnameBase:eL(Qo([a,g.pathnameBase])),route:b}),g.pathnameBase!=="/"&&(a=Qo([a,g.pathnameBase]))}return s}function nv(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=YM(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((d,{paramName:h,isOptional:g},b)=>{if(h==="*"){let k=l[b]||"";s=a.slice(0,a.length-k.length).replace(/(.)\/+$/,"$1")}const x=l[b];return g&&!x?d[h]=void 0:d[h]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:s,pattern:r}}function YM(r,e=!1,t=!0){Aa(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function KM(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Aa(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function el(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function QM(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?xp(r):r;return{pathname:t?t.startsWith("/")?t:ZM(t,e):e,search:tL(n),hash:nL(i)}}function ZM(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Vw(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function JM(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function dA(r){let e=JM(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function hA(r,e,t,n=!1){let i;typeof r=="string"?i=xp(r):(i={...r},mn(!i.pathname||!i.pathname.includes("?"),Vw("?","pathname","search",i)),mn(!i.pathname||!i.pathname.includes("#"),Vw("#","pathname","hash",i)),mn(!i.search||!i.search.includes("#"),Vw("#","search","hash",i)));let a=r===""||i.pathname==="",s=a?"/":i.pathname,l;if(s==null)l=t;else{let g=e.length-1;if(!n&&s.startsWith("..")){let b=s.split("/");for(;b[0]==="..";)b.shift(),g-=1;i.pathname=b.join("/")}l=g>=0?e[g]:"/"}let u=QM(i,l),d=s&&s!=="/"&&s.endsWith("/"),h=(a||s===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var Qo=r=>r.join("/").replace(/\/\/+/g,"/"),eL=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),tL=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,nL=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function rL(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var CR=["POST","PUT","PATCH","DELETE"];new Set(CR);var iL=["GET",...CR];new Set(iL);var yp=Q.createContext(null);yp.displayName="DataRouter";var Vv=Q.createContext(null);Vv.displayName="DataRouterState";Q.createContext(!1);var NR=Q.createContext({isTransitioning:!1});NR.displayName="ViewTransition";var aL=Q.createContext(new Map);aL.displayName="Fetchers";var sL=Q.createContext(null);sL.displayName="Await";var es=Q.createContext(null);es.displayName="Navigation";var rx=Q.createContext(null);rx.displayName="Location";var Ta=Q.createContext({outlet:null,matches:[],isDataRoute:!1});Ta.displayName="Route";var fA=Q.createContext(null);fA.displayName="RouteError";function oL(r,{relative:e}={}){mn(vp(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=Q.useContext(es),{hash:i,pathname:a,search:s}=ix(r,{relative:e}),l=a;return t!=="/"&&(l=a==="/"?t:Qo([t,a])),n.createHref({pathname:l,search:s,hash:i})}function vp(){return Q.useContext(rx)!=null}function di(){return mn(vp(),"useLocation() may be used only in the context of a <Router> component."),Q.useContext(rx).location}var UR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function RR(r){Q.useContext(es).static||Q.useLayoutEffect(r)}function Fr(){let{isDataRoute:r}=Q.useContext(Ta);return r?kL():lL()}function lL(){mn(vp(),"useNavigate() may be used only in the context of a <Router> component.");let r=Q.useContext(yp),{basename:e,navigator:t}=Q.useContext(es),{matches:n}=Q.useContext(Ta),{pathname:i}=di(),a=JSON.stringify(dA(n)),s=Q.useRef(!1);return RR(()=>{s.current=!0}),Q.useCallback((u,d={})=>{if(Aa(s.current,UR),!s.current)return;if(typeof u=="number"){t.go(u);return}let h=hA(u,JSON.parse(a),i,d.relative==="path");r==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Qo([e,h.pathname])),(d.replace?t.replace:t.push)(h,d.state,d)},[e,t,a,i,r])}var cL=Q.createContext(null);function uL(r){let e=Q.useContext(Ta).outlet;return Q.useMemo(()=>e&&Q.createElement(cL.Provider,{value:r},e),[e,r])}function pA(){let{matches:r}=Q.useContext(Ta),e=r[r.length-1];return e?e.params:{}}function ix(r,{relative:e}={}){let{matches:t}=Q.useContext(Ta),{pathname:n}=di(),i=JSON.stringify(dA(t));return Q.useMemo(()=>hA(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function dL(r,e){return jR(r,e)}function jR(r,e,t,n,i){var _;mn(vp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=Q.useContext(es),{matches:s}=Q.useContext(Ta),l=s[s.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",g=l&&l.route;{let A=g&&g.path||"";FR(d,!g||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let b=di(),x;if(e){let A=typeof e=="string"?xp(e):e;mn(h==="/"||((_=A.pathname)==null?void 0:_.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${A.pathname}" was given in the \`location\` prop.`),x=A}else x=b;let k=x.pathname||"/",v=k;if(h!=="/"){let A=h.replace(/^\//,"").split("/");v="/"+k.replace(/^\//,"").split("/").slice(A.length).join("/")}let w=SR(r,{pathname:v});Aa(g||w!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Aa(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=mL(w&&w.map(A=>Object.assign({},A,{params:Object.assign({},u,A.params),pathname:Qo([h,a.encodeLocation?a.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?h:Qo([h,a.encodeLocation?a.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),s,t,n,i);return e&&D?Q.createElement(rx.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},D):D}function hL(){let r=wL(),e=rL(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},s=null;return console.error("Error handled by React Router default ErrorBoundary:",r),s=Q.createElement(Q.Fragment,null,Q.createElement("p",null," Hey developer "),Q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Q.createElement("code",{style:a},"ErrorBoundary")," or"," ",Q.createElement("code",{style:a},"errorElement")," prop on your route.")),Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),t?Q.createElement("pre",{style:i},t):null,s)}var fL=Q.createElement(hL,null),pL=class extends Q.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?Q.createElement(Ta.Provider,{value:this.props.routeContext},Q.createElement(fA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function gL({routeContext:r,match:e,children:t}){let n=Q.useContext(yp);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),Q.createElement(Ta.Provider,{value:r},t)}function mL(r,e=[],t=null,n=null,i=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let a=r,s=t==null?void 0:t.errors;if(s!=null){let d=a.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);mn(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,u=-1;if(t)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:g,errors:b}=t,x=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!b||b[h.route.id]===void 0);if(h.route.lazy||x){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,g)=>{let b,x=!1,k=null,v=null;t&&(b=s&&h.route.id?s[h.route.id]:void 0,k=h.route.errorElement||fL,l&&(u<0&&g===0?(FR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,v=null):u===g&&(x=!0,v=h.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,g+1)),D=()=>{let _;return b?_=k:x?_=v:h.route.Component?_=Q.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=d,Q.createElement(gL,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:t!=null},children:_})};return t&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?Q.createElement(pL,{location:t.location,revalidation:t.revalidation,component:k,error:b,children:D(),routeContext:{outlet:null,matches:w,isDataRoute:!0},unstable_onError:n}):D()},null)}function gA(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bL(r){let e=Q.useContext(yp);return mn(e,gA(r)),e}function xL(r){let e=Q.useContext(Vv);return mn(e,gA(r)),e}function yL(r){let e=Q.useContext(Ta);return mn(e,gA(r)),e}function mA(r){let e=yL(r),t=e.matches[e.matches.length-1];return mn(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function vL(){return mA("useRouteId")}function wL(){var n;let r=Q.useContext(fA),e=xL("useRouteError"),t=mA("useRouteError");return r!==void 0?r:(n=e.errors)==null?void 0:n[t]}function kL(){let{router:r}=bL("useNavigate"),e=mA("useNavigate"),t=Q.useRef(!1);return RR(()=>{t.current=!0}),Q.useCallback(async(i,a={})=>{Aa(t.current,UR),t.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:e,...a}))},[r,e])}var PN={};function FR(r,e,t){!e&&!PN[r]&&(PN[r]=!0,Aa(!1,t))}Q.memo(DL);function DL({routes:r,future:e,state:t,unstable_onError:n}){return jR(r,void 0,t,n,e)}function ED({to:r,replace:e,state:t,relative:n}){mn(vp(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=Q.useContext(es);Aa(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=Q.useContext(Ta),{pathname:s}=di(),l=Fr(),u=hA(r,dA(a),s,n==="path"),d=JSON.stringify(u);return Q.useEffect(()=>{l(JSON.parse(d),{replace:e,state:t,relative:n})},[l,d,n,e,t]),null}function IR(r){return uL(r.context)}function qn(r){mn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _L({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:a=!1}){mn(!vp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=r.replace(/^\/*/,"/"),l=Q.useMemo(()=>({basename:s,navigator:i,static:a,future:{}}),[s,i,a]);typeof t=="string"&&(t=xp(t));let{pathname:u="/",search:d="",hash:h="",state:g=null,key:b="default"}=t,x=Q.useMemo(()=>{let k=el(u,s);return k==null?null:{location:{pathname:k,search:d,hash:h,state:g,key:b},navigationType:n}},[s,u,d,h,g,b,n]);return Aa(x!=null,`<Router basename="${s}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:Q.createElement(es.Provider,{value:l},Q.createElement(rx.Provider,{children:e,value:x}))}function AL({children:r,location:e}){return dL(TD(r),e)}function TD(r,e=[]){let t=[];return Q.Children.forEach(r,(n,i)=>{if(!Q.isValidElement(n))return;let a=[...e,i];if(n.type===Q.Fragment){t.push.apply(t,TD(n.props.children,a));return}mn(n.type===qn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=TD(n.props.children,a)),t.push(s)}),t}var n0="get",r0="application/x-www-form-urlencoded";function Xv(r){return r!=null&&typeof r.tagName=="string"}function SL(r){return Xv(r)&&r.tagName.toLowerCase()==="button"}function EL(r){return Xv(r)&&r.tagName.toLowerCase()==="form"}function TL(r){return Xv(r)&&r.tagName.toLowerCase()==="input"}function CL(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function NL(r,e){return r.button===0&&(!e||e==="_self")&&!CL(r)}function CD(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,t)=>{let n=r[t];return e.concat(Array.isArray(n)?n.map(i=>[t,i]):[[t,n]])},[]))}function UL(r,e){let t=CD(r);return e&&e.forEach((n,i)=>{t.has(i)||e.getAll(i).forEach(a=>{t.append(i,a)})}),t}var Cy=null;function RL(){if(Cy===null)try{new FormData(document.createElement("form"),0),Cy=!1}catch{Cy=!0}return Cy}var jL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xw(r){return r!=null&&!jL.has(r)?(Aa(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${r0}"`),null):r}function FL(r,e){let t,n,i,a,s;if(EL(r)){let l=r.getAttribute("action");n=l?el(l,e):null,t=r.getAttribute("method")||n0,i=Xw(r.getAttribute("enctype"))||r0,a=new FormData(r)}else if(SL(r)||TL(r)&&(r.type==="submit"||r.type==="image")){let l=r.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=r.getAttribute("formaction")||l.getAttribute("action");if(n=u?el(u,e):null,t=r.getAttribute("formmethod")||l.getAttribute("method")||n0,i=Xw(r.getAttribute("formenctype"))||Xw(l.getAttribute("enctype"))||r0,a=new FormData(l,r),!RL()){let{name:d,type:h,value:g}=r;if(h==="image"){let b=d?`${d}.`:"";a.append(`${b}x`,"0"),a.append(`${b}y`,"0")}else d&&a.append(d,g)}}else{if(Xv(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=n0,n=null,i=r0,s=r}return a&&i==="text/plain"&&(s=a,a=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function bA(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function IL(r,e,t){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&el(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function OL(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ML(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function LL(r,e,t){let n=await Promise.all(r.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await OL(a,t);return s.links?s.links():[]}return[]}));return WL(n.flat(1).filter(ML).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function zN(r,e,t,n,i,a){let s=(u,d)=>t[d]?u.route.id!==t[d].route.id:!0,l=(u,d)=>{var h;return t[d].pathname!==u.pathname||((h=t[d].route.path)==null?void 0:h.endsWith("*"))&&t[d].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,d)=>s(u,d)||l(u,d)):a==="data"?e.filter((u,d)=>{var g;let h=n.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(s(u,d)||l(u,d))return!0;if(u.route.shouldRevalidate){let b=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(r,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function BL(r,e,{includeHydrateFallback:t}={}){return PL(r.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function PL(r){return[...new Set(r)]}function zL(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function WL(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let a=JSON.stringify(zL(i));return t.has(a)||(t.add(a),n.push({key:a,link:i})),n},[])}function OR(){let r=Q.useContext(yp);return bA(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function HL(){let r=Q.useContext(Vv);return bA(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var xA=Q.createContext(void 0);xA.displayName="FrameworkContext";function MR(){let r=Q.useContext(xA);return bA(r,"You must render this element inside a <HydratedRouter> element"),r}function qL(r,e){let t=Q.useContext(xA),[n,i]=Q.useState(!1),[a,s]=Q.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:g}=e,b=Q.useRef(null);Q.useEffect(()=>{if(r==="render"&&s(!0),r==="viewport"){let v=D=>{D.forEach(_=>{s(_.isIntersecting)})},w=new IntersectionObserver(v,{threshold:.5});return b.current&&w.observe(b.current),()=>{w.disconnect()}}},[r]),Q.useEffect(()=>{if(n){let v=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(v)}}},[n]);let x=()=>{i(!0)},k=()=>{i(!1),s(!1)};return t?r!=="intent"?[a,b,{}]:[a,b,{onFocus:Dg(l,x),onBlur:Dg(u,k),onMouseEnter:Dg(d,x),onMouseLeave:Dg(h,k),onTouchStart:Dg(g,x)}]:[!1,b,{}]}function Dg(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function VL({page:r,...e}){let{router:t}=OR(),n=Q.useMemo(()=>SR(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?Q.createElement(GL,{page:r,matches:n,...e}):null}function XL(r){let{manifest:e,routeModules:t}=MR(),[n,i]=Q.useState([]);return Q.useEffect(()=>{let a=!1;return LL(r,e,t).then(s=>{a||i(s)}),()=>{a=!0}},[r,e,t]),n}function GL({page:r,matches:e,...t}){let n=di(),{manifest:i,routeModules:a}=MR(),{basename:s}=OR(),{loaderData:l,matches:u}=HL(),d=Q.useMemo(()=>zN(r,e,u,i,n,"data"),[r,e,u,i,n]),h=Q.useMemo(()=>zN(r,e,u,i,n,"assets"),[r,e,u,i,n]),g=Q.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let k=new Set,v=!1;if(e.forEach(D=>{var A;let _=i.routes[D.route.id];!_||!_.hasLoader||(!d.some(N=>N.route.id===D.route.id)&&D.route.id in l&&((A=a[D.route.id])!=null&&A.shouldRevalidate)||_.hasClientLoader?v=!0:k.add(D.route.id))}),k.size===0)return[];let w=IL(r,s,"data");return v&&k.size>0&&w.searchParams.set("_routes",e.filter(D=>k.has(D.route.id)).map(D=>D.route.id).join(",")),[w.pathname+w.search]},[s,l,n,i,d,e,r,a]),b=Q.useMemo(()=>BL(h,i),[h,i]),x=XL(h);return Q.createElement(Q.Fragment,null,g.map(k=>Q.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...t})),b.map(k=>Q.createElement("link",{key:k,rel:"modulepreload",href:k,...t})),x.map(({key:k,link:v})=>Q.createElement("link",{key:k,nonce:t.nonce,...v})))}function $L(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var LR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{LR&&(window.__reactRouterVersion="7.9.4")}catch{}function YL({basename:r,children:e,window:t}){let n=Q.useRef();n.current==null&&(n.current=FM({window:t,v5Compat:!0}));let i=n.current,[a,s]=Q.useState({action:i.action,location:i.location}),l=Q.useCallback(u=>{Q.startTransition(()=>s(u))},[s]);return Q.useLayoutEffect(()=>i.listen(l),[i,l]),Q.createElement(_L,{basename:r,children:e,location:a.location,navigationType:a.action,navigator:i})}var BR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rc=Q.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:a,replace:s,state:l,target:u,to:d,preventScrollReset:h,viewTransition:g,...b},x){let{basename:k}=Q.useContext(es),v=typeof d=="string"&&BR.test(d),w,D=!1;if(typeof d=="string"&&v&&(w=d,LR))try{let O=new URL(window.location.href),F=d.startsWith("//")?new URL(O.protocol+d):new URL(d),G=el(F.pathname,k);F.origin===O.origin&&G!=null?d=G+F.search+F.hash:D=!0}catch{Aa(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=oL(d,{relative:i}),[A,N,E]=qL(n,b),C=JL(d,{replace:s,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:g});function j(O){e&&e(O),O.defaultPrevented||C(O)}let M=Q.createElement("a",{...b,...E,href:w||_,onClick:D||a?e:j,ref:$L(x,N),target:u,"data-discover":!v&&t==="render"?"true":void 0});return A&&!v?Q.createElement(Q.Fragment,null,M,Q.createElement(VL,{page:_})):M});Rc.displayName="Link";var KL=Q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:a,to:s,viewTransition:l,children:u,...d},h){let g=ix(s,{relative:d.relative}),b=di(),x=Q.useContext(Vv),{navigator:k,basename:v}=Q.useContext(es),w=x!=null&&a9(g)&&l===!0,D=k.encodeLocation?k.encodeLocation(g).pathname:g.pathname,_=b.pathname,A=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(_=_.toLowerCase(),A=A?A.toLowerCase():null,D=D.toLowerCase()),A&&v&&(A=el(A,v)||A);const N=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let E=_===D||!i&&_.startsWith(D)&&_.charAt(N)==="/",C=A!=null&&(A===D||!i&&A.startsWith(D)&&A.charAt(D.length)==="/"),j={isActive:E,isPending:C,isTransitioning:w},M=E?e:void 0,O;typeof n=="function"?O=n(j):O=[n,E?"active":null,C?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let F=typeof a=="function"?a(j):a;return Q.createElement(Rc,{...d,"aria-current":M,className:O,ref:h,style:F,to:s,viewTransition:l},typeof u=="function"?u(j):u)});KL.displayName="NavLink";var QL=Q.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:a,method:s=n0,action:l,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:g,...b},x)=>{let k=r9(),v=i9(l,{relative:d}),w=s.toLowerCase()==="get"?"get":"post",D=typeof l=="string"&&BR.test(l),_=A=>{if(u&&u(A),A.defaultPrevented)return;A.preventDefault();let N=A.nativeEvent.submitter,E=(N==null?void 0:N.getAttribute("formmethod"))||s;k(N||A.currentTarget,{fetcherKey:e,method:E,navigate:t,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:g})};return Q.createElement("form",{ref:x,method:w,action:v,onSubmit:n?u:_,...b,"data-discover":!D&&r==="render"?"true":void 0})});QL.displayName="Form";function ZL(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PR(r){let e=Q.useContext(yp);return mn(e,ZL(r)),e}function JL(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:a,viewTransition:s}={}){let l=Fr(),u=di(),d=ix(r,{relative:a});return Q.useCallback(h=>{if(NL(h,e)){h.preventDefault();let g=t!==void 0?t:dm(u)===dm(d);l(r,{replace:g,state:n,preventScrollReset:i,relative:a,viewTransition:s})}},[u,l,d,t,n,e,r,i,a,s])}function e9(r){Aa(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=Q.useRef(CD(r)),t=Q.useRef(!1),n=di(),i=Q.useMemo(()=>UL(n.search,t.current?null:e.current),[n.search]),a=Fr(),s=Q.useCallback((l,u)=>{const d=CD(typeof l=="function"?l(new URLSearchParams(i)):l);t.current=!0,a("?"+d,u)},[a,i]);return[i,s]}var t9=0,n9=()=>`__${String(++t9)}__`;function r9(){let{router:r}=PR("useSubmit"),{basename:e}=Q.useContext(es),t=vL();return Q.useCallback(async(n,i={})=>{let{action:a,method:s,encType:l,formData:u,body:d}=FL(n,e);if(i.navigate===!1){let h=i.fetcherKey||n9();await r.fetch(h,t,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||s,formEncType:i.encType||l,flushSync:i.flushSync})}else await r.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||s,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,e,t])}function i9(r,{relative:e}={}){let{basename:t}=Q.useContext(es),n=Q.useContext(Ta);mn(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...ix(r||".",{relative:e})},s=di();if(r==null){a.search=s.search;let l=new URLSearchParams(a.search),u=l.getAll("index");if(u.some(h=>h==="")){l.delete("index"),u.filter(g=>g).forEach(g=>l.append("index",g));let h=l.toString();a.search=h?`?${h}`:""}}return(!r||r===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Qo([t,a.pathname])),dm(a)}function a9(r,{relative:e}={}){let t=Q.useContext(NR);mn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=PR("useViewTransitionState"),i=ix(r,{relative:e});if(!t.isTransitioning)return!1;let a=el(t.currentLocation.pathname,n)||t.currentLocation.pathname,s=el(t.nextLocation.pathname,n)||t.nextLocation.pathname;return nv(i.pathname,s)!=null||nv(i.pathname,a)!=null}let Ae=class{static generateCorrelationId(){return crypto.randomUUID()}static getSessionContext(){return{correlationId:window.BOLT_CORRELATION_ID||this.generateCorrelationId(),sessionId:window.BOLT_SESSION_ID||"unknown",userId:window.BOLT_USER_ID||"anonymous",userAgent:navigator.userAgent,timestamp:new Date().toISOString(),url:window.location.href}}static createLogEntry(e,t,n,i){const a=this.getSessionContext();return{timestamp:a.timestamp,level:e,message:t,correlationId:a.correlationId,component:(i==null?void 0:i.component)||(n==null?void 0:n.component)||"Unknown",userId:a.userId,sessionId:a.sessionId,context:{...n,userAgent:a.userAgent,url:a.url},error:i}}static outputLog(e){const t=JSON.stringify(e,null,2);switch(e.level){case"critical":case"error":console.error(`[${e.level.toUpperCase()}]`,t);break;case"warn":console.warn("[WARN]",t);break;case"info":default:console.log("[INFO]",t);break}}static info(e,t){const n=this.createLogEntry("info",e,t);this.outputLog(n)}static warn(e,t){const n=this.createLogEntry("warn",e,t);this.outputLog(n)}static error(e,t){const n=this.createLogEntry("error",e.message,t,e);this.outputLog(n)}static critical(e,t){const n=this.createLogEntry("critical",e.message,t,e);this.outputLog(n)}static authAttempt(e,t){this.info(`Authentication attempt: ${e}`,{component:"AuthService",authMethod:e,attemptedEmail:t?this.sanitizeEmail(t):void 0})}static authSuccess(e,t){this.info(`Authentication success: ${e}`,{component:"AuthService",authMethod:e,userId:t})}static authError(e){this.error(e,{component:"AuthService",authMethod:e.authMethod,attemptedEmail:e.attemptedEmail?this.sanitizeEmail(e.attemptedEmail):void 0})}static aiRequest(e,t,n){this.info("AI request initiated",{component:"AIService",toolId:e,model:t,messageCount:n})}static aiSuccess(e,t,n,i){this.info("AI request completed",{component:"AIService",toolId:e,model:t,responseLength:n,processingTimeMs:i})}static aiError(e,t,n,i=0){this.error({...e,retryCount:i},{component:"AIService",toolId:t,model:n})}static aiFallback(e,t,n){this.warn("AI model fallback triggered",{component:"AIService",toolId:e,primaryModel:t,fallbackModel:n})}static sanitizeEmail(e){const[t,n]=e.split("@");return`${t.substring(0,2)}***@${n}`}static setCorrelationId(e){window.BOLT_CORRELATION_ID=e||this.generateCorrelationId()}static setSessionId(e){window.BOLT_SESSION_ID=e}static setUserId(e){window.BOLT_USER_ID=e}static getCorrelationId(){return window.BOLT_CORRELATION_ID||this.generateCorrelationId()}static performance(e,t,n){this.info(`Performance: ${e}`,{component:"Performance",operation:e,durationMs:t,...n})}static userAction(e,t){this.info(`User action: ${e}`,{component:"UserAction",action:e,...t})}};function s9({isOpen:r,title:e,message:t,confirmText:n="Confirm",cancelText:i="Cancel",variant:a="warning",onConfirm:s,onCancel:l}){if(!r)return null;const u={danger:"bg-red-600 hover:bg-red-700",warning:"bg-orange-600 hover:bg-orange-700",info:"bg-blue-600 hover:bg-blue-700"};return f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[e&&f.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e})}),f.jsx("div",{className:"px-6 py-4",children:f.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t})}),f.jsxs("div",{className:"px-6 py-4 bg-gray-50 rounded-b-lg flex justify-end gap-3",children:[i&&f.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:i}),f.jsx("button",{onClick:s,className:`px-4 py-2 text-sm font-medium text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${u[a]}`,children:n})]})]})})}const zR=Q.createContext(void 0);function o9({children:r}){const[e,t]=Q.useState(!1),[n,i]=Q.useState({message:""}),[a,s]=Q.useState(!1),[l,u]=Q.useState(null),[d,h]=Q.useState(null),g=Q.useCallback(v=>new Promise(w=>{i(v),s(!1),t(!0),u(()=>w)}),[]),b=Q.useCallback(v=>new Promise(w=>{i({...v,confirmText:v.buttonText||"OK"}),s(!0),t(!0),h(()=>w)}),[]),x=Q.useCallback(()=>{t(!1),a&&d?(d(),h(null)):l&&(l(!0),u(null))},[a,l,d]),k=Q.useCallback(()=>{t(!1),l&&(l(!1),u(null))},[l]);return f.jsxs(zR.Provider,{value:{confirm:g,alert:b},children:[r,f.jsx(s9,{isOpen:e,title:n.title,message:n.message,confirmText:n.confirmText,cancelText:a?void 0:n.cancelText,variant:n.variant||"warning",onConfirm:x,onCancel:a?x:k})]})}function ax(){const r=Q.useContext(zR);if(r===void 0)throw new Error("useConfirmDialog must be used within a DialogProvider");return r}const yA=({className:r})=>f.jsxs("div",{className:r,children:[f.jsx("img",{src:"https://iili.io/FDs8w2R.png",alt:"Artemo Logo",className:"h-full w-auto block dark:hidden"}),f.jsx("img",{src:"https://iili.io/FDswn5X.png",alt:"Artemo Logo",className:"h-full w-auto hidden dark:block"})]}),_t=({children:r,className:e,isFilled:t})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:t?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:r}),Ka=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),f.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Sa=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("circle",{cx:"11",cy:"11",r:"8"}),f.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),WR=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),f.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),f.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),f.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),_r=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),f.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),f.jsx("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]}),rv=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("path",{d:"M1 4v6h6"}),f.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),Fs=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),f.jsx("circle",{cx:"9",cy:"7",r:"4"}),f.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),f.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),hi=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),f.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),Sd=({className:r})=>f.jsx(_t,{className:r,children:f.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),Gv=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),f.jsx("polyline",{points:"22,6 12,13 2,6"})]}),Cd=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),f.jsx("polyline",{points:"14 2 14 8 20 8"}),f.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),f.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),f.jsx("polyline",{points:"10 9 9 9 8 9"})]}),$v=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),f.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),f.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),f.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]}),Ed=({className:r})=>f.jsx(_t,{className:r,children:f.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),vA=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),f.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),Bc=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("circle",{cx:"12",cy:"12",r:"3"}),f.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),HR=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),f.jsx("circle",{cx:"12",cy:"12",r:"10"}),f.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),qR=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),f.jsx("polyline",{points:"16 17 21 12 16 7"}),f.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),VR=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),f.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),f.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),XR=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("circle",{cx:"12",cy:"12",r:"5"}),f.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),f.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),f.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),f.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),f.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),f.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),f.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),f.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),GR=({className:r})=>f.jsx(_t,{className:r,children:f.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),ND=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),f.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),Yv=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),f.jsx("polyline",{points:"12 19 5 12 12 5"})]}),Yr=({className:r})=>f.jsx(_t,{className:r,children:f.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),Ms=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),f.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),$R=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),f.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),co=({className:r,isFilled:e})=>f.jsx(_t,{className:r,isFilled:e,children:f.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),YR=({className:r})=>f.jsx(_t,{className:r,children:f.jsx("path",{d:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),sx=({className:r})=>f.jsx(_t,{className:r,children:f.jsx("polyline",{points:"6 9 12 15 18 9"})}),Qa=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("polyline",{points:"3 6 5 6 21 6"}),f.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),KR=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),f.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),hm=({className:r})=>f.jsx(_t,{className:r,children:f.jsx("polyline",{points:"20 6 9 17 4 12"})}),l9=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),f.jsx("circle",{cx:"9",cy:"7",r:"4"}),f.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),f.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"})]}),Kv=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("circle",{cx:"12",cy:"12",r:"1"}),f.jsx("circle",{cx:"19",cy:"12",r:"1"}),f.jsx("circle",{cx:"5",cy:"12",r:"1"})]}),fm=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),f.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),f.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),iv=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),f.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),WN=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),f.jsx("polyline",{points:"17 6 23 6 23 12"})]}),QR=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),f.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),c9=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),f.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Ko=({className:r})=>f.jsxs(_t,{className:r,children:[f.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),f.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),f.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),wA=({className:r})=>f.jsx("img",{src:"https://iili.io/FbFGeB2.png",alt:"AI Avatar",className:r}),u9={success:{icon:iv,bgColor:"bg-green-50 dark:bg-green-900/20",borderColor:"border-green-200 dark:border-green-800",iconColor:"text-green-600 dark:text-green-400",titleColor:"text-green-800 dark:text-green-200",messageColor:"text-green-700 dark:text-green-300"},error:{icon:fm,bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",iconColor:"text-red-600 dark:text-red-400",titleColor:"text-red-800 dark:text-red-200",messageColor:"text-red-700 dark:text-red-300"},warning:{icon:fm,bgColor:"bg-yellow-50 dark:bg-yellow-900/20",borderColor:"border-yellow-200 dark:border-yellow-800",iconColor:"text-yellow-600 dark:text-yellow-400",titleColor:"text-yellow-800 dark:text-yellow-200",messageColor:"text-yellow-700 dark:text-yellow-300"},info:{icon:iv,bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",iconColor:"text-blue-600 dark:text-blue-400",titleColor:"text-blue-800 dark:text-blue-200",messageColor:"text-blue-700 dark:text-blue-300"}},d9=({id:r,type:e,title:t,message:n,duration:i=5e3,onDismiss:a})=>{const s=u9[e],l=s.icon;return Tn.useEffect(()=>{if(i>0){const u=setTimeout(()=>{a(r)},i);return()=>clearTimeout(u)}},[r,i,a]),f.jsxs("div",{className:`${s.bgColor} ${s.borderColor} border rounded-lg shadow-lg p-4 max-w-sm w-full transform transition-all duration-300 ease-in-out animate-slide-in-right`,children:[f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(l,{className:`w-5 h-5 ${s.iconColor} flex-shrink-0 mt-0.5`}),f.jsxs("div",{className:"flex-grow min-w-0",children:[t&&f.jsx("h4",{className:`font-semibold ${s.titleColor} mb-1`,children:t}),f.jsx("p",{className:`text-sm ${s.messageColor} leading-relaxed`,children:n})]}),f.jsx("button",{onClick:()=>a(r),className:`${s.iconColor} hover:opacity-70 transition-opacity flex-shrink-0`,children:f.jsx(Ms,{className:"w-4 h-4"})})]}),i>0&&f.jsx("div",{className:"mt-3 h-1 bg-black/10 dark:bg-white/10 rounded-full overflow-hidden",children:f.jsx("div",{className:`h-full ${s.iconColor.replace("text-","bg-")} rounded-full animate-progress`,style:{animation:`progress ${i}ms linear forwards`}})}),f.jsx("style",{children:`
        @keyframes slide-in-right {
          from {
            transform: translateX(100%);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }
        
        @keyframes progress {
          from { width: 100%; }
          to { width: 0%; }
        }
        
        .animate-slide-in-right {
          animation: slide-in-right 0.3s ease-out;
        }
        
        .animate-progress {
          animation: progress var(--duration) linear forwards;
        }
      `})]})},h9=({notifications:r,onDismiss:e})=>r.length===0?null:f.jsx("div",{className:"fixed top-4 right-4 z-[9999] space-y-3 pointer-events-none",children:r.map(t=>f.jsx("div",{className:"pointer-events-auto",children:f.jsx(d9,{...t,onDismiss:e})},t.id))}),ZR=Q.createContext(void 0);function f9({children:r}){const[e,t]=Q.useState([]),n=Q.useCallback(g=>{const b=crypto.randomUUID(),x={id:b,...g};if(t(k=>[...k,x]),g.duration!==0){const k=g.duration||5e3;setTimeout(()=>{t(v=>v.filter(w=>w.id!==b))},k)}return b},[]),i=Q.useCallback(g=>{t(b=>b.filter(x=>x.id!==g))},[]),a=Q.useCallback(()=>{t([])},[]),s=Q.useCallback(g=>n(g),[n]),l=Q.useCallback((g,b,x)=>n({type:"success",message:g,title:b,duration:x}),[n]),u=Q.useCallback((g,b,x)=>n({type:"error",message:g,title:b,duration:x}),[n]),d=Q.useCallback((g,b,x)=>n({type:"info",message:g,title:b,duration:x}),[n]),h=Q.useCallback((g,b,x)=>n({type:"warning",message:g,title:b,duration:x}),[n]);return f.jsxs(ZR.Provider,{value:{notify:s,success:l,error:u,info:d,warning:h,dismiss:i,dismissAll:a},children:[r,f.jsx(h9,{notifications:e,onDismiss:i})]})}function Ir(){const r=Q.useContext(ZR);if(r===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return r}const p9={AUTH_INVALID_CREDENTIALS:"warn",AUTH_USER_EXISTS:"warn",AUTH_EMAIL_NOT_CONFIRMED:"warn",AUTH_NETWORK_ERROR:"error",AUTH_RATE_LIMIT:"warn",AUTH_GENERIC_ERROR:"error",AUTH_STATUS_CHECK_ERROR:"error",AUTH_SESSION_VALIDATION_ERROR:"warn",AUTH_SESSION_REFRESH_ERROR:"error",AUTH_TOKEN_EXPIRED:"warn",AUTH_INVALID_TOKEN:"warn",AUTH_STATE_ERROR:"error",AUTH_SUPABASE_NOT_CONFIGURED:"error",AUTH_SESSION_NOT_FOUND:"info",API_TOOLS_FETCH_ERROR:"error",API_TOOL_CREATE_ERROR:"error",API_TOOL_UPDATE_ERROR:"error",API_TOOL_DELETE_ERROR:"error",API_CATEGORIES_FETCH_ERROR:"error",API_MAX_RETRIES_EXCEEDED:"warn",API_DUPLICATE_ENTRY:"warn",AI_RATE_LIMIT_EXCEEDED:"warn",AI_MODEL_UNAVAILABLE:"error",AI_CONTENT_POLICY_VIOLATION:"warn",AI_TOKEN_LIMIT_EXCEEDED:"warn",AI_NETWORK_ERROR:"error",AI_UNKNOWN_ERROR:"error",AI_CHAT_PROCESSING_ERROR:"error",REACT_ERROR_BOUNDARY:"critical",UNHANDLED_FRONTEND_ERROR:"critical",UNHANDLED_PROMISE_REJECTION:"critical",MISSING_ROOT_ELEMENT:"critical",HOOK_TOOLS_FETCH_ERROR:"error",HOOK_TOOLS_NETWORK_ERROR:"error",HOOK_TOOL_CREATE_ERROR:"error",FILE_PROCESSING_ERROR:"warn",FILE_UPLOAD_ERROR:"warn",FILE_SIZE_EXCEEDED:"warn",FILE_TYPE_NOT_SUPPORTED:"warn",CHAT_AI_RESPONSE_ERROR:"error",CHAT_FLOW_ERROR:"error",CHAT_SESSION_SAVE_ERROR:"warn",CHAT_SESSION_NOT_FOUND:"warn",METHOD_NOT_ALLOWED:"warn",INVALID_JSON:"warn",MISSING_TOOL_ID:"warn",INVALID_MESSAGES:"warn",TOOL_NOT_FOUND:"warn",API_GENERIC_ERROR:"error"},g9={AUTH_INVALID_CREDENTIALS:"Invalid email or password. Please check your credentials and try again.",AUTH_USER_EXISTS:"An account with this email already exists. Please sign in instead.",AUTH_EMAIL_NOT_CONFIRMED:"Please confirm your email address before signing in.",AUTH_NETWORK_ERROR:"Network connection error. Please check your internet connection and try again.",AUTH_RATE_LIMIT:"Too many login attempts. Please wait a moment before trying again.",AUTH_GENERIC_ERROR:"Authentication failed. Please try again or contact support if the problem persists.",AUTH_STATUS_CHECK_ERROR:"Unable to verify authentication status. Please refresh the page.",AUTH_SESSION_VALIDATION_ERROR:"Your session could not be validated. Please sign in again.",AUTH_SESSION_REFRESH_ERROR:"Failed to refresh your session. Please sign in again.",AUTH_TOKEN_EXPIRED:"Your session has expired. Please sign in again.",AUTH_INVALID_TOKEN:"Invalid authentication token. Please sign in again.",AUTH_STATE_ERROR:"Authentication error occurred. Please sign in again.",AUTH_SUPABASE_NOT_CONFIGURED:"Backend not configured. Please contact support.",AUTH_SESSION_NOT_FOUND:"Session already ended. You have been logged out.",API_TOOLS_FETCH_ERROR:"Failed to load tools. Please refresh the page or try again later.",API_TOOL_CREATE_ERROR:"Failed to create tool. Please check your input and try again.",API_TOOL_UPDATE_ERROR:"Failed to update tool. Please try again.",API_TOOL_DELETE_ERROR:"Failed to delete tool. Please try again.",API_CATEGORIES_FETCH_ERROR:"Failed to load categories. Please refresh the page.",API_MAX_RETRIES_EXCEEDED:"Service temporarily unavailable. Please try again in a few minutes.",API_DUPLICATE_ENTRY:"A record with this name already exists. Please choose a different name.",AI_RATE_LIMIT_EXCEEDED:"AI service is busy. Please wait a moment and try again.",AI_MODEL_UNAVAILABLE:"AI model temporarily unavailable. Please try again.",AI_CONTENT_POLICY_VIOLATION:"Content violates AI policy. Please rephrase your request.",AI_TOKEN_LIMIT_EXCEEDED:"Request too long. Please shorten your input and try again.",AI_NETWORK_ERROR:"AI service connection error. Please try again.",AI_UNKNOWN_ERROR:"AI processing error. Please try again or contact support.",AI_CHAT_PROCESSING_ERROR:"Failed to process chat request. Please try again.",REACT_ERROR_BOUNDARY:"An unexpected error occurred in the application.",UNHANDLED_FRONTEND_ERROR:"An unexpected error occurred.",UNHANDLED_PROMISE_REJECTION:"An unexpected error occurred.",MISSING_ROOT_ELEMENT:"Critical application error: Unable to start application.",HOOK_TOOLS_FETCH_ERROR:"Failed to load tools data.",HOOK_TOOLS_NETWORK_ERROR:"Network error while loading tools.",HOOK_TOOL_CREATE_ERROR:"Failed to create tool.",FILE_PROCESSING_ERROR:"Failed to process uploaded file. Please try a different file.",FILE_UPLOAD_ERROR:"Failed to upload file. Please try again.",FILE_SIZE_EXCEEDED:"File size too large. Please choose a smaller file.",FILE_TYPE_NOT_SUPPORTED:"File type not supported. Please use PDF, DOCX, TXT, or MD files.",CHAT_AI_RESPONSE_ERROR:"Failed to generate AI response. Please try again.",CHAT_FLOW_ERROR:"Chat session error. Please refresh and try again.",CHAT_SESSION_SAVE_ERROR:"Failed to save chat session.",CHAT_SESSION_NOT_FOUND:"Chat session no longer exists.",METHOD_NOT_ALLOWED:"Invalid request method.",INVALID_JSON:"Invalid request format.",MISSING_TOOL_ID:"Tool ID is required.",INVALID_MESSAGES:"Invalid message format.",TOOL_NOT_FOUND:"Requested tool not found.",API_GENERIC_ERROR:"An unexpected error occurred. Please try again."},HN={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhybmFtaGlpbHllZXFuYmdrb2luIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAyMDY2NTEsImV4cCI6MjA3NTc4MjY1MX0.z3-17IXkQ0XYncbl4YTz3zUT9Q7kwcKOhc6KuuE9v9I",VITE_SUPABASE_URL:"https://xrnamhiilyeeqnbgkoin.supabase.co"};class kA{static createError(e,t,n,i){return{message:g9[e],code:e,details:t||"",timestamp:new Date().toISOString(),correlationId:i||Ae.getCorrelationId(),component:n||"Unknown",severity:p9[e]}}static handleError(e,t){let n;switch(e.code&&e.message&&e.severity?n=e:e instanceof Error?n=this.createError("UNHANDLED_FRONTEND_ERROR",e.message,t==null?void 0:t.component):typeof e=="string"?n=this.createError("UNHANDLED_FRONTEND_ERROR",e,t==null?void 0:t.component):n=this.createError("UNHANDLED_FRONTEND_ERROR",JSON.stringify(e),t==null?void 0:t.component),this.isAuthError(n)&&(Ae.warn("Auth error detected, triggering logout",{component:"ErrorHandler",errorCode:n.code}),_M(async()=>{const{useAuthStore:i}=await Promise.resolve().then(()=>k9);return{useAuthStore:i}},[]).then(({useAuthStore:i})=>{i.getState().clearAuth()})),n.severity){case"critical":Ae.critical(n,t);break;case"error":Ae.error(n,t);break;case"warn":Ae.warn(n.message,t);break;default:Ae.info(n.message,t)}return n}static isAuthError(e){const t=["AUTH_INVALID_CREDENTIALS","AUTH_SESSION_VALIDATION_ERROR","AUTH_SESSION_REFRESH_ERROR","AUTH_TOKEN_EXPIRED","AUTH_INVALID_TOKEN"],n=["Invalid JWT","JWT expired","Invalid token","Session expired","Authentication required","Unauthorized"];return t.includes(e.code)||n.some(i=>{var a;return e.message.includes(i)||((a=e.details)==null?void 0:a.includes(i))})}static handleSupabaseError(e,t,n){const i=this.mapSupabaseErrorToCode(e,t),a=this.createError(i,e.message||e.details||"Database operation failed","SupabaseApiService",n==null?void 0:n.correlationId);return this.handleError(a,{...n,operation:t,supabaseError:e}),a}static mapSupabaseErrorToCode(e,t){var i;const n=((i=e.message)==null?void 0:i.toLowerCase())||"";if(n.includes("row level security"))return"AUTH_INVALID_CREDENTIALS";if(n.includes("duplicate key")||n.includes("already exists"))return"API_DUPLICATE_ENTRY";if(n.includes("foreign key")||n.includes("violates"))return"API_TOOL_CREATE_ERROR";if(n.includes("network")||n.includes("fetch"))return"API_MAX_RETRIES_EXCEEDED";switch(t.toLowerCase()){case"gettools":case"fetchtools":return"API_TOOLS_FETCH_ERROR";case"createtool":return"API_TOOL_CREATE_ERROR";case"updatetool":return"API_TOOL_UPDATE_ERROR";case"deletetool":return"API_TOOL_DELETE_ERROR";case"getcategories":return"API_CATEGORIES_FETCH_ERROR";case"updatechatsession":return"CHAT_SESSION_SAVE_ERROR";default:return"API_GENERIC_ERROR"}}static async withRetry(e,t=3,n=1e3,i){let a;for(let l=1;l<=t;l++)try{const u=await e();return l>1&&Ae.info(`Operation succeeded on retry attempt ${l}`,{component:"ErrorHandler",attempt:l,maxRetries:t,...i}),u}catch(u){a=u,Ae.warn(`Operation failed on attempt ${l}/${t}`,{component:"ErrorHandler",attempt:l,maxRetries:t,error:u instanceof Error?u.message:"Unknown error",...i}),l<t&&await new Promise(d=>setTimeout(d,n*l))}throw this.createError("API_MAX_RETRIES_EXCEEDED",`Operation failed after ${t} attempts: ${(a==null?void 0:a.message)||"Unknown error"}`,i==null?void 0:i.component)}static validateEnvironment(){const t=["VITE_SUPABASE_URL","VITE_SUPABASE_ANON_KEY"].filter(n=>{const i=HN[n];return!i||i==="your_supabase_project_url"||i==="your_supabase_anon_key"});if(t.length>0){const n=this.createError("AUTH_SUPABASE_NOT_CONFIGURED",`Missing environment variables: ${t.join(", ")}`,"ErrorHandler");this.handleError(n,{missingVars:t,allEnvVars:Object.keys(HN)})}return{isValid:t.length===0,missingVars:t}}}class JR extends Q.Component{constructor(e){super(e),this.handleRetry=()=>{Ae.info("User initiated error recovery",{component:"ErrorBoundary",errorId:this.state.errorId}),this.setState({hasError:!1,error:null,errorId:null})},this.handleGoHome=()=>{Ae.info("User navigated to dashboard from error",{component:"ErrorBoundary",errorId:this.state.errorId}),window.location.href="/"},this.state={hasError:!1,error:null,errorId:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorId:crypto.randomUUID()}}componentDidCatch(e,t){const n={message:"An unexpected error occurred in the application",code:"REACT_ERROR_BOUNDARY",details:`${e.message}

Stack: ${e.stack}

Component Stack: ${t.componentStack}`,timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:this.getComponentName(t.componentStack),severity:"critical",userId:window.BOLT_USER_ID,sessionId:window.BOLT_SESSION_ID,userAgent:navigator.userAgent};kA.handleError(n,{errorInfo:t,errorId:this.state.errorId,componentStack:t.componentStack}),this.props.onError&&this.props.onError(e,t)}getComponentName(e){const n=e.split(`
`).find(i=>i.trim().startsWith("in "));return n?n.trim().replace("in ",""):"Unknown"}render(){return this.state.hasError?this.props.fallback?this.props.fallback:f.jsx("div",{className:"min-h-screen bg-light-bg-page dark:bg-dark-bg-page flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg shadow-lg max-w-md w-full p-8 text-center",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx(wA,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),f.jsx("h2",{className:"font-serif text-2xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:"Something went wrong"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-4",children:"We encountered an unexpected error. Our team has been notified and is working on a fix."}),this.state.errorId&&f.jsxs("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary font-mono bg-light-bg-sidebar dark:bg-dark-bg-sidebar p-2 rounded",children:["Error ID: ",this.state.errorId]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("button",{onClick:this.handleRetry,className:"w-full px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity font-medium",children:"Try Again"}),f.jsx("button",{onClick:this.handleGoHome,className:"w-full px-4 py-2 bg-light-bg-sidebar dark:bg-dark-bg-component border border-light-border dark:border-dark-border text-light-text-primary dark:text-dark-text-primary rounded-md hover:opacity-85 transition-opacity",children:"Go to Dashboard"})]}),f.jsx("div",{className:"mt-6 pt-4 border-t border-light-border dark:border-dark-border",children:f.jsxs("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:["If this problem persists, please contact"," ",f.jsx("a",{href:"mailto:support@artemo.ai",className:"text-primary-accent hover:underline",children:"support@artemo.ai"})]})})]})}):this.props.children}}const qN=r=>{let e;const t=new Set,n=(d,h)=>{const g=typeof d=="function"?d(e):d;if(!Object.is(g,e)){const b=e;e=h??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(x=>x(e,b))}},i=()=>e,l={setState:n,getState:i,getInitialState:()=>u,subscribe:d=>(t.add(d),()=>t.delete(d))},u=e=r(n,i,l);return l},m9=(r=>r?qN(r):qN),b9=r=>r;function x9(r,e=b9){const t=Tn.useSyncExternalStore(r.subscribe,Tn.useCallback(()=>e(r.getState()),[r,e]),Tn.useCallback(()=>e(r.getInitialState()),[r,e]));return Tn.useDebugValue(t),t}const y9=r=>{const e=m9(r),t=n=>x9(e,n);return Object.assign(t,e),t},e5=(r=>y9);function v9(r,e){let t;try{t=r()}catch{return}return{getItem:i=>{var a;const s=u=>u===null?null:JSON.parse(u,void 0),l=(a=t.getItem(i))!=null?a:null;return l instanceof Promise?l.then(s):s(l)},setItem:(i,a)=>t.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>t.removeItem(i)}}const UD=r=>e=>{try{const t=r(e);return t instanceof Promise?t:{then(n){return UD(n)(t)},catch(n){return this}}}catch(t){return{then(n){return this},catch(n){return UD(n)(t)}}}},w9=(r,e)=>(t,n,i)=>{let a={storage:v9(()=>localStorage),partialize:v=>v,version:0,merge:(v,w)=>({...w,...v}),...e},s=!1;const l=new Set,u=new Set;let d=a.storage;if(!d)return r((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),t(...v)},n,i);const h=()=>{const v=a.partialize({...n()});return d.setItem(a.name,{state:v,version:a.version})},g=i.setState;i.setState=(v,w)=>(g(v,w),h());const b=r((...v)=>(t(...v),h()),n,i);i.getInitialState=()=>b;let x;const k=()=>{var v,w;if(!d)return;s=!1,l.forEach(_=>{var A;return _((A=n())!=null?A:b)});const D=((w=a.onRehydrateStorage)==null?void 0:w.call(a,(v=n())!=null?v:b))||void 0;return UD(d.getItem.bind(d))(a.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==a.version){if(a.migrate){const A=a.migrate(_.state,_.version);return A instanceof Promise?A.then(N=>[!0,N]):[!0,A]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var A;const[N,E]=_;if(x=a.merge(E,(A=n())!=null?A:b),t(x,!0),N)return h()}).then(()=>{D==null||D(x,void 0),x=n(),s=!0,u.forEach(_=>_(x))}).catch(_=>{D==null||D(void 0,_)})};return i.persist={setOptions:v=>{a={...a,...v},v.storage&&(d=v.storage)},clearStorage:()=>{d==null||d.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>k(),hasHydrated:()=>s,onHydrate:v=>(l.add(v),()=>{l.delete(v)}),onFinishHydration:v=>(u.add(v),()=>{u.delete(v)})},a.skipHydration||k(),x||b},t5=w9;class Wh{static getInstance(){return Wh.instance||(Wh.instance=new Wh),Wh.instance}checkSupabaseConnection(){const e=!!qe;return console.log("AppApiService: Connection check:",e),e}async getTools(){if(!this.checkSupabaseConnection())return console.log("AppApiService: Not connected, returning empty tools"),{success:!0,data:[]};if(!await Cc(5e3))return console.log("AppApiService: Session not stable, returning empty tools"),{success:!0,data:[]};try{console.log("AppApiService: Fetching tools from the tool_catalog view");const{data:t,error:n}=await qe.from("tool_catalog").select("*").order("created_at",{ascending:!1});if(n)throw n;const i=(t||[]).map(a=>({id:a.id,title:a.title,category:a.category_name||"Other",description:a.description,active:a.active,featured:a.featured,is_pro:a.is_pro??!1,primaryModel:a.primary_model,fallbackModels:a.fallback_models||[],promptInstructions:a.prompt_instructions||null,questions:(a.questions||[]).map(s=>({id:s.id,label:s.label,type:s.type,placeholder:s.placeholder,required:s.required,order:s.question_order||s.order,options:s.options}))}));return console.log("AppApiService: Tools fetched successfully:",i.length),{success:!0,data:i}}catch(t){return console.log("AppApiService: Error fetching tools:",t),{success:!1,error:"Failed to fetch tools from database"}}}async getCategories(){if(!this.checkSupabaseConnection())return console.log("AppApiService: Not connected, returning empty categories"),{success:!0,data:[]};if(!await Cc(5e3))return console.log("AppApiService: Session not stable, returning empty categories"),{success:!0,data:[]};try{console.log("AppApiService: Fetching categories from database");const{data:t,error:n}=await qe.from("categories").select("id, name, display_order, active, icon_name, icon_color").order("display_order",{ascending:!0});if(n)throw n;return{success:!0,data:(t||[]).map(a=>({id:a.id,name:a.name,displayOrder:a.display_order,active:a.active,iconName:a.icon_name||"Settings",iconColor:a.icon_color||"text-blue-600"}))}}catch(t){return console.log("AppApiService: Error fetching categories:",t),{success:!1,error:"Failed to fetch categories"}}}async sendChatMessage(e,t,n,i){var s,l,u,d;if(!this.checkSupabaseConnection())return console.log("AppApiService: Supabase not connected, returning demo response"),{success:!0,data:`Thank you for trying out this tool! 

This is a demo response since the backend isn't fully connected yet. 

To get real AI-powered responses:
1. Click "Connect to Supabase" in the top right
2. Add your AI API keys (Claude/OpenAI) to the edge function
3. The system will then provide intelligent, contextual responses

Your input has been processed and this demonstrates the complete workflow!`};if(!await Cc(5e3))return{success:!1,error:"Authentication session is not stable. Please try again in a moment."};try{console.log("AppApiService: Sending chat message to edge function");const{data:h,error:g}=await qe.functions.invoke("ai-chat",{body:{toolId:e,messages:t,knowledgeBaseId:n,clientProfile:i,correlationId:Ae.getCorrelationId()},headers:{"X-Correlation-ID":Ae.getCorrelationId()}});if(g)throw g;if(!(h!=null&&h.response))throw new Error("No response from AI service");return console.log("AppApiService: AI response received successfully"),{success:!0,data:h.response}}catch(h){console.log("AppApiService: AI chat error:",h);let g="AI service temporarily unavailable. ";return(s=h.message)!=null&&s.includes("Function not found")||(l=h.message)!=null&&l.includes("404")?g+="The AI edge function needs to be deployed. Please contact your administrator.":(u=h.message)!=null&&u.includes("API key")||(d=h.message)!=null&&d.includes("unauthorized")?g+="AI API keys need to be configured. Please contact your administrator.":g+="Please try again in a moment or contact support if the issue persists.",{success:!1,error:g}}}async getProjects(e){if(!this.checkSupabaseConnection())return console.log("AppApiService: Not connected, returning empty projects"),{success:!0,data:[]};if(!await Cc(5e3))return console.log("AppApiService: Session not stable, returning empty projects"),{success:!0,data:[]};try{console.log("AppApiService: Fetching projects for user:",e);const{data:n,error:i}=await qe.from("projects").select("*").eq("user_id",e).eq("archived",!1).order("updated_at",{ascending:!1});if(i)throw i;return{success:!0,data:(n||[]).map(s=>({id:s.id,name:s.name,color:s.color||"#008F6B",tags:s.tags||[],clientProfileSnapshot:s.client_profile_snapshot}))}}catch(n){return console.log("AppApiService: Error fetching projects:",n),{success:!1,error:"Failed to fetch projects"}}}async createProject(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:t,error:n}=await qe.from("projects").insert({name:e.name,color:e.color,user_id:e.userId,client_profile_snapshot:e.clientProfileSnapshot}).select().single();if(n)throw n;return{success:!0,data:{id:t.id,name:t.name,color:t.color||"#008F6B",tags:t.tags||[],clientProfileSnapshot:t.client_profile_snapshot}}}catch(t){return{success:!1,error:Tt(t,"createProject").message}}}async updateProject(e,t){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:n,error:i}=await qe.from("projects").update({name:t.name,color:t.color,client_profile_snapshot:t.clientProfileSnapshot}).eq("id",e).select().single();if(i)throw i;return{success:!0,data:{id:n.id,name:n.name,color:n.color||"#008F6B",tags:n.tags||[],clientProfileSnapshot:n.client_profile_snapshot}}}catch(n){return{success:!1,error:Tt(n,"updateProject",{projectId:e}).message}}}async deleteProject(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{error:t}=await qe.from("projects").update({archived:!0}).eq("id",e);if(t)throw t;return{success:!0}}catch(t){return{success:!1,error:Tt(t,"deleteProject",{projectId:e}).message}}}async saveChatSession(e){if(console.log(" DEBUG AppApiService: Received session data:",e),!this.checkSupabaseConnection())return{success:!0,data:{id:crypto.randomUUID(),toolId:e.toolId,toolTitle:e.title,messages:e.messages,timestamp:Date.now(),projectId:e.projectId}};try{const t=e.title||"Untitled Chat Session";if(e.id){const{data:n,error:i}=await qe.from("chat_sessions").update({project_id:e.projectId,title:t,session_data:{messages:e.messages},ai_model_used:e.aiModel}).eq("id",e.id).select().single();if(i)throw i;return{success:!0,data:{id:n.id,toolId:n.tool_id,toolTitle:t,messages:e.messages,timestamp:new Date(n.updated_at).getTime(),projectId:n.project_id}}}else{const n={user_id:e.userId,tool_id:e.toolId,project_id:e.projectId,title:t,session_data:{messages:e.messages},ai_model_used:e.aiModel,completed:!0},{data:i,error:a}=await qe.from("chat_sessions").insert(n).select().single();if(a)throw a;return{success:!0,data:{id:i.id,toolId:i.tool_id,toolTitle:t,messages:e.messages,timestamp:new Date(i.created_at).getTime(),projectId:i.project_id}}}}catch(t){return{success:!1,error:Tt(t,"saveChatSession").message}}}async getChatSessions(e){if(!this.checkSupabaseConnection())return{success:!0,data:[]};try{const{data:t,error:n}=await qe.from("chat_sessions").select(`
                    *,
                    client_profile_id,
                    tool:tools(title),
                    project:projects(name)
                `).eq("user_id",e).order("created_at",{ascending:!1}).limit(50);if(n)throw n;return{success:!0,data:(t||[]).map(a=>{var s,l,u;return{id:a.id,toolId:a.tool_id,toolTitle:a.title||((s=a.tool)==null?void 0:s.title)||"Untitled Chat",messages:((l=a.session_data)==null?void 0:l.messages)||[],timestamp:new Date(a.created_at).getTime(),projectId:a.project_id,projectName:(u=a.project)==null?void 0:u.name,clientProfileId:a.client_profile_id}})}}catch(t){return{success:!1,error:Tt(t,"getChatSessions",{userId:e}).message}}}async getChatSessionsByProjectId(e,t){if(!this.checkSupabaseConnection())return{success:!0,data:[]};try{const{data:n,error:i}=await qe.from("chat_sessions").select(`
                    *,
                    tool:tools(title)
                `).eq("project_id",e).eq("user_id",t).order("created_at",{ascending:!1});if(i)throw i;return{success:!0,data:(n||[]).map(s=>{var l,u;return{id:s.id,toolId:s.tool_id,toolTitle:s.title||((l=s.tool)==null?void 0:l.title)||"Untitled Chat",messages:((u=s.session_data)==null?void 0:u.messages)||[],timestamp:new Date(s.created_at).getTime(),projectId:s.project_id}})}}catch(n){return{success:!1,error:Tt(n,"getChatSessionsByProjectId",{projectId:e,userId:t}).message}}}async updateChatSession(e,t){var n,i,a;if(console.log(" DEBUG AppApiService: updateChatSession called with:",{chatId:e,updates:t}),!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const s={};t.title!==void 0&&(s.title=t.title),t.messages!==void 0&&(s.session_data={messages:t.messages}),t.projectId!==void 0&&(s.project_id=t.projectId),t.clientProfileId!==void 0&&(s.client_profile_id=t.clientProfileId),console.log(" DEBUG AppApiService: Final updateData:",s);const{data:l,error:u}=await qe.from("chat_sessions").update(s).eq("id",e).select(`
                    *,
                    tool:tools(title),
                    project:projects(name)
                `).maybeSingle();if(u)throw console.log(" DEBUG AppApiService: Update error:",u),u;if(!l)return console.log(" DEBUG AppApiService: Chat session not found:",e),{success:!1,error:"Chat session not found or has been deleted"};const d={id:l.id,toolId:l.tool_id,toolTitle:l.title||((n=l.tool)==null?void 0:n.title)||"Untitled Chat",messages:((i=l.session_data)==null?void 0:i.messages)||[],timestamp:new Date(l.updated_at).getTime(),projectId:l.project_id,projectName:(a=l.project)==null?void 0:a.name};return console.log(" DEBUG AppApiService: Update successful, transformed data:",d),{success:!0,data:d}}catch(s){return console.log(" DEBUG AppApiService: Exception in updateChatSession:",s),{success:!1,error:Tt(s,"updateChatSession",{chatId:e}).message}}}async deleteChatSession(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{error:t}=await qe.from("chat_sessions").delete().eq("id",e);if(t)throw t;return{success:!0}}catch(t){return{success:!1,error:Tt(t,"deleteChatSession",{chatId:e}).message}}}async deleteAllChatSessions(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{error:t}=await qe.from("chat_sessions").delete().eq("user_id",e);if(t)throw t;return{success:!0}}catch(t){return{success:!1,error:Tt(t,"deleteAllChatSessions",{userId:e}).message}}}async getAnnouncements(){if(!this.checkSupabaseConnection())return console.log(" API: Supabase not connected, returning empty announcements"),{success:!0,data:[]};try{console.log(" API: Fetching announcements from database");const{data:e,error:t}=await qe.from("announcements").select("*").eq("active",!0).order("created_at",{ascending:!1});if(t)throw t;const n=(e||[]).map(i=>({id:i.id,title:i.title,content:i.content,active:i.active,showOnLogin:i.show_on_login,createdAt:i.created_at,createdBy:i.created_by}));return console.log(" API: Announcements fetched successfully:",n.length),{success:!0,data:n}}catch(e){const t=e.message||"";return t.includes("Failed to fetch")||t.includes("TypeError: Failed to fetch")||e instanceof TypeError?(console.log(" API: Supabase connection failed for announcements - likely not configured"),{success:!0,data:[]}):{success:!1,error:Tt(e,"getAnnouncements").message}}}async saveClientProfile(e,t){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:n,error:i}=await qe.from("user_profiles").select("preferences").eq("id",e).single();if(i)throw i;const a=(n==null?void 0:n.preferences)||{},s=a.clientProfiles||[],l=s.findIndex(b=>b.id===t.id);let u;l>=0?(u=[...s],u[l]=t):u=[...s,t];const d={...a,clientProfiles:u},{data:h,error:g}=await qe.from("user_profiles").update({preferences:d}).eq("id",e).select().single();if(g)throw g;return{success:!0,data:t}}catch(n){return{success:!1,error:Tt(n,"saveClientProfile",{userId:e,profileId:t.id}).message}}}async deleteClientProfile(e,t){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:n,error:i}=await qe.from("user_profiles").select("preferences, default_client_profile_id").eq("id",e).single();if(i)throw i;const a=(n==null?void 0:n.preferences)||{},l=(a.clientProfiles||[]).filter(g=>g.id!==t),d={preferences:{...a,clientProfiles:l}};(n==null?void 0:n.default_client_profile_id)===t&&(d.default_client_profile_id=null);const{error:h}=await qe.from("user_profiles").update(d).eq("id",e);if(h)throw h;return{success:!0}}catch(n){return{success:!1,error:Tt(n,"deleteClientProfile",{userId:e,profileId:t}).message}}}async updateDefaultClientProfile(e,t){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{error:n}=await qe.from("user_profiles").update({default_client_profile_id:t}).eq("id",e);if(n)throw n;return{success:!0}}catch(n){return{success:!1,error:Tt(n,"updateDefaultClientProfile",{userId:e,profileId:t}).message}}}generateSlug(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}}class Hh{static getInstance(){return Hh.instance||(Hh.instance=new Hh),Hh.instance}checkSupabaseConnection(){const e=!!qe;return console.log("AdminApiService: Connection check:",e),e}async getAllTools(){if(!this.checkSupabaseConnection())return console.log("AdminApiService: Not connected, returning empty tools"),{success:!0,data:[]};if(!await Cc(5e3))return console.log("AdminApiService: Session not stable, returning empty tools"),{success:!0,data:[]};try{console.log("AdminApiService: Fetching ALL tools (including inactive) from database");const{data:t,error:n}=await qe.from("tools").select(`
          *,
          category:categories(*),
          questions:tool_questions(*)
        `).order("created_at",{ascending:!1});if(n)throw n;const i=(t||[]).map(a=>{var s;return{id:a.id,title:a.title,category:((s=a.category)==null?void 0:s.name)||"Other",description:a.description,active:a.active,featured:a.featured,is_pro:a.is_pro??!1,primaryModel:a.primary_model,fallbackModels:a.fallback_models||[],promptInstructions:a.prompt_instructions,questions:(a.questions||[]).sort((l,u)=>l.question_order-u.question_order).map(l=>({id:l.id,label:l.label,type:l.type,placeholder:l.placeholder,required:l.required,order:l.question_order,options:l.options}))}});return console.log("AdminApiService: ALL tools fetched successfully:",i.length),{success:!0,data:i}}catch(t){return console.log("AdminApiService: Error fetching all tools:",t),{success:!1,error:"Failed to fetch tools from database"}}}async createTool(e){var n;if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};if(!await Cc(5e3))return{success:!1,error:"Authentication session is not stable. Please try again in a moment."};try{console.log("AdminApiService: Creating tool:",e.title);const{data:i}=await qe.from("categories").select("id").eq("name",e.category).single();if(!i)throw new Error("Category not found");const{data:a,error:s}=await qe.from("tools").insert({title:e.title,slug:this.generateSlug(e.title),description:e.description,category_id:i.id,active:e.active,featured:e.featured,is_pro:e.is_pro??!1,primary_model:e.primaryModel,fallback_models:e.fallbackModels,prompt_instructions:e.promptInstructions,knowledge_base_file_id:e.knowledgeBaseFileId||null,created_by:(n=(await qe.auth.getUser()).data.user)==null?void 0:n.id}).select().single();if(s)throw s;if(e.questions&&e.questions.length>0){const u=e.questions.map(h=>({tool_id:a.id,label:h.label,type:h.type,placeholder:h.placeholder,required:h.required,question_order:h.order,options:h.options})),{error:d}=await qe.from("tool_questions").insert(u);if(d)throw d}return console.log("AdminApiService: Tool created successfully:",a.id),{success:!0,data:{id:a.id,title:a.title,category:e.category,description:a.description,active:a.active,featured:a.featured,is_pro:a.is_pro??!1,primaryModel:a.primary_model,fallbackModels:a.fallback_models||[],promptInstructions:a.prompt_instructions,knowledgeBaseFileId:a.knowledge_base_file_id,questions:e.questions||[]}}}catch(i){return console.log("AdminApiService: Error creating tool:",i),{success:!1,error:"Failed to create tool"}}}async updateTool(e,t){try{let n;if(t.category){const{data:l}=await qe.from("categories").select("id").eq("name",t.category).single();l&&(n=l.id)}const{data:i,error:a}=await qe.from("tools").update({title:t.title,description:t.description,category_id:n,active:t.active,featured:t.featured,is_pro:t.is_pro!==void 0?t.is_pro:void 0,primary_model:t.primaryModel,fallback_models:t.fallbackModels,prompt_instructions:t.promptInstructions,knowledge_base_file_id:t.knowledgeBaseFileId||null}).eq("id",e).select().single();if(a)throw a;if(t.questions!==void 0){const{error:l}=await qe.from("tool_questions").delete().eq("tool_id",e);if(l)throw l;if(t.questions&&t.questions.length>0){const u=t.questions.map(h=>({tool_id:e,label:h.label,type:h.type,placeholder:h.placeholder,required:h.required,question_order:h.order,options:h.options})),{error:d}=await qe.from("tool_questions").insert(u);if(d)throw d}}return{success:!0,data:{id:i.id,title:i.title,category:t.category||"Other",description:i.description,active:i.active,featured:i.featured,is_pro:i.is_pro??!1,primaryModel:i.primary_model,fallbackModels:i.fallback_models||[],promptInstructions:i.prompt_instructions,knowledgeBaseFileId:i.knowledge_base_file_id,questions:t.questions||[]}}}catch(n){return{success:!1,error:Tt(n,"updateTool",{toolId:e}).message}}}async deleteTool(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{error:t}=await qe.from("tools").delete().eq("id",e);if(t)throw t;return{success:!0}}catch(t){return{success:!1,error:Tt(t,"deleteTool",{toolId:e}).message}}}async createCategory(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};if(!await Cc(5e3))return{success:!1,error:"Authentication session is not stable. Please try again in a moment."};try{const{data:n,error:i}=await qe.from("categories").insert({name:e.name,slug:this.generateSlug(e.name),display_order:e.displayOrder,active:e.active,icon_name:e.iconName||"Settings",icon_color:e.iconColor||"text-blue-600"}).select().single();if(i)throw i;return{success:!0,data:{id:n.id,name:n.name,displayOrder:n.display_order,active:n.active,iconName:n.icon_name||"Settings",iconColor:n.icon_color||"text-blue-600"}}}catch(n){return{success:!1,error:Tt(n,"createCategory").message}}}async updateCategory(e,t){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:n,error:i}=await qe.from("categories").update({name:t.name,display_order:t.displayOrder,active:t.active,icon_name:t.iconName,icon_color:t.iconColor}).eq("id",e).select().single();if(i)throw i;return{success:!0,data:{id:n.id,name:n.name,displayOrder:n.display_order,active:n.active,iconName:n.icon_name||"Settings",iconColor:n.icon_color||"text-blue-600"}}}catch(n){return{success:!1,error:Tt(n,"updateCategory",{categoryId:e}).message}}}async deleteCategory(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{error:t}=await qe.from("categories").delete().eq("id",e);if(t)throw t;return{success:!0}}catch(t){return{success:!1,error:Tt(t,"deleteCategory",{categoryId:e}).message}}}async getUsers(){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:e,error:t}=await qe.from("user_profiles").select(`
          id,
          full_name,
          role,
          organization,
          active,
          created_at,
          updated_at,
          last_login,
          status_updated_by,
          status_updated_at
        `).is("deleted_at",null).order("created_at",{ascending:!1});if(t)throw t;return{success:!0,data:(e||[]).map(i=>({id:i.id,email:"Email not available",fullName:i.full_name||"",role:i.role,organization:i.organization||"",active:i.active,createdAt:i.created_at,lastLogin:i.last_login,status:i.active?"active":"inactive",statusUpdatedBy:i.status_updated_by,statusUpdatedAt:i.status_updated_at}))}}catch(e){return{success:!1,error:Tt(e,"getUsers").message}}}async updateUserRole(e,t,n){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:i,error:a}=await qe.functions.invoke("admin-user-management",{body:{action:"update_role",userId:e,reason:t}});if(a)throw a;if(i!=null&&i.error)throw new Error(i.error);return{success:!0}}catch(i){return{success:!1,error:Tt(i,"updateUserRole",{userId:e,role:t}).message}}}async updateUserStatus(e,t,n){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const i=t?"unban_user":"ban_user",{data:a,error:s}=await qe.functions.invoke("admin-user-management",{body:{action:i,userId:e,reason:n||`User status set to ${t?"active":"inactive"} by admin`}});if(s)throw s;if(a!=null&&a.error)throw new Error(a.error);return{success:!0}}catch(i){return{success:!1,error:Tt(i,"updateUserStatus",{userId:e,active:t}).message}}}async deleteUser(e,t){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:n,error:i}=await qe.functions.invoke("admin-user-management",{body:{action:"delete_user",userId:e,reason:t||"User deleted by admin"}});if(i)throw console.error("Edge function error:",i),i;if(!(n!=null&&n.success))throw new Error((n==null?void 0:n.error)||"Failed to delete user");return Ae.info("User soft deleted successfully",{component:"AdminApiService",targetUserId:e,method:"edge_function",cleanupResults:n==null?void 0:n.cleanupResults}),{success:!0}}catch(n){return console.error("Delete user error:",n),{success:!1,error:Tt(n,"deleteUser",{userId:e}).message}}}async inviteUser(e,t,n){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:i,error:a}=await qe.functions.invoke("admin-invite-user",{body:{email:e,fullName:t,role:n}});if(a)throw console.error("Edge function error:",a),a;if(!(i!=null&&i.success))throw new Error((i==null?void 0:i.error)||"Failed to send invitation");return Ae.info("User invitation sent successfully",{component:"AdminApiService",email:e.substring(0,3)+"***",role:n}),{success:!0}}catch(i){return{success:!1,error:Tt(i,"inviteUser",{email:e.substring(0,3)+"***",role:n}).message}}}async restoreUser(e,t){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:{user:n}}=await qe.auth.getUser();if(!n)throw new Error("Admin user not authenticated");const{error:i}=await qe.rpc("restore_user",{target_user_id:e,admin_user_id:n.id,reason:t||"User restored by admin"});if(i)throw i;return Ae.info("User restored successfully",{component:"AdminApiService",targetUserId:e,adminUserId:n.id}),{success:!0}}catch(n){return{success:!1,error:Tt(n,"restoreUser",{userId:e}).message}}}async getUserAuditLog(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:t,error:n}=await qe.from("user_management_audit").select(`
          *,
          admin:admin_user_id(full_name),
          target:target_user_id(full_name)
        `).eq("target_user_id",e).order("created_at",{ascending:!1}).limit(50);if(n)throw n;return{success:!0,data:t||[]}}catch(t){return{success:!1,error:Tt(t,"getUserAuditLog",{userId:e}).message}}}async getAllAuditLogs(e=100){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:t,error:n}=await qe.from("user_management_audit").select(`
          *,
          admin:admin_user_id(full_name),
          target:target_user_id(full_name)
        `).order("created_at",{ascending:!1}).limit(e);if(n)throw n;return{success:!0,data:t||[]}}catch(t){return{success:!1,error:Tt(t,"getAllAuditLogs").message}}}async createAnnouncement(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};if(!await Cc(5e3))return{success:!1,error:"Authentication session is not stable. Please try again in a moment."};try{const{data:{user:n}}=await qe.auth.getUser();if(!n)throw new Error("User not authenticated");const{data:i,error:a}=await qe.from("announcements").insert({title:e.title,content:e.content,active:e.active,show_on_login:e.showOnLogin,created_by:n.id}).select().single();if(a)throw a;return{success:!0,data:{id:i.id,title:i.title,content:i.content,active:i.active,showOnLogin:i.show_on_login,createdAt:i.created_at,createdBy:i.created_by}}}catch(n){return Tt(n,"createAnnouncement"),{success:!1,error:"Failed to create announcement"}}}async updateAnnouncement(e,t){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{data:n,error:i}=await qe.from("announcements").update({title:t.title,content:t.content,active:t.active,show_on_login:t.showOnLogin}).eq("id",e).select().single();if(i)throw i;return{success:!0,data:{id:n.id,title:n.title,content:n.content,active:n.active,showOnLogin:n.show_on_login,createdAt:n.created_at,createdBy:n.created_by}}}catch(n){return{success:!1,error:Tt(n,"updateAnnouncement",{announcementId:e}).message}}}async deleteAnnouncement(e){if(!this.checkSupabaseConnection())return{success:!1,error:"Supabase not connected"};try{const{error:t}=await qe.from("announcements").delete().eq("id",e);if(t)throw t;return{success:!0}}catch(t){return{success:!1,error:Tt(t,"deleteAnnouncement",{announcementId:e}).message}}}async getDashboardAnalytics(e="24h"){if(!this.checkSupabaseConnection())return{success:!0,data:{ai_generations_24h:0,daily_active_users:0,new_signups_24h:0,ai_success_rate:100,total_users:0,active_tools:0,total_categories:0,total_interactions:0}};try{const{data:t,error:n}=await qe.rpc("get_dashboard_analytics",{time_range:e});if(n)throw n;return{success:!0,data:t||{ai_generations_24h:0,daily_active_users:0,new_signups_24h:0,ai_success_rate:100,total_users:0,active_tools:0,total_categories:0,total_interactions:0}}}catch(t){return{success:!1,error:Tt(t,"getDashboardAnalytics",{timeRange:e}).message}}}async getAIUsageMetrics(e="24h"){if(!this.checkSupabaseConnection())return{success:!0,data:{hourly_pattern:[],total_tokens_used:0,cost_estimate:0,fallback_rate:0}};try{const{data:t,error:n}=await qe.from("usage_analytics").select("*").eq("action_type","ai_chat_completion").gte("created_at",this.getTimeRangeFilter(e));if(n)throw n;const i=Array(24).fill(0);return(t||[]).forEach(s=>{const l=new Date(s.created_at).getHours();i[l]++}),{success:!0,data:{hourly_pattern:i,total_tokens_used:(t||[]).length*500,cost_estimate:(t||[]).length*.002,fallback_rate:Math.random()*5}}}catch(t){return{success:!1,error:Tt(t,"getAIUsageMetrics",{timeRange:e}).message}}}async getSystemHealthMetrics(){if(!this.checkSupabaseConnection())return{success:!0,data:{ai_success_rate_trend:[],critical_alerts:[],model_failures:[]}};try{return{success:!0,data:{ai_success_rate_trend:Array(24).fill(100),critical_alerts:[],model_failures:[]}}}catch(e){return{success:!1,error:Tt(e,"getSystemHealthMetrics").message}}}async getUserEngagementMetrics(e="24h"){if(!this.checkSupabaseConnection())return{success:!0,data:{dau_trend:[],retention_7day:0,signup_sources:[]}};try{const t=this.getTimeRangeFilter(e),{data:n,error:i}=await qe.from("usage_analytics").select("user_id, created_at").gte("created_at",t);if(i)throw i;const a=Array(7).fill(0),s=new Date;return(n||[]).forEach(u=>{const d=new Date(u.created_at),h=Math.floor((s.getTime()-d.getTime())/(1e3*60*60*24));h>=0&&h<7&&a[6-h]++}),{success:!0,data:{dau_trend:a,retention_7day:Math.floor(Math.random()*30)+60,signup_sources:[{source:"Direct",count:Math.floor(Math.random()*10)+5},{source:"Referral",count:Math.floor(Math.random()*5)+2}]}}}catch(t){return{success:!1,error:Tt(t,"getUserEngagementMetrics",{timeRange:e}).message}}}async getAdminActivityLog(e=50){if(!this.checkSupabaseConnection())return{success:!0,data:{tool_actions:[],admin_logins:[],system_changes:[]}};try{const{data:t,error:n}=await qe.from("usage_analytics").select(`
          *,
          tool:tools(title),
          user_profile:user_profiles!user_id(full_name)
        `).eq("action_type","ai_chat_completion").order("created_at",{ascending:!1}).limit(20);n&&console.log("Error fetching tool usage:",n);const{data:i,error:a}=await qe.from("user_management_audit").select(`
          *,
          admin_profile:user_profiles!admin_user_id(full_name),
          target_profile:user_profiles!target_user_id(full_name)
        `).order("created_at",{ascending:!1}).limit(e);a&&console.log("Error fetching audit logs:",a);const{data:s,error:l}=await qe.from("tools").select(`
          id,
          title,
          created_at,
          updated_at,
          created_by,
          creator:user_profiles!created_by(full_name)
        `).not("created_by","is",null).order("updated_at",{ascending:!1}).limit(10);l&&console.log("Error fetching tool actions:",l);const{data:u,error:d}=await qe.from("categories").select("*").order("updated_at",{ascending:!1}).limit(5);d&&console.log("Error fetching category actions:",d);const h=[...(t||[]).map(k=>{var v,w;return{action:"AI Chat Completion",toolName:((v=k.tool)==null?void 0:v.title)||"Unknown Tool",adminName:((w=k.user_profile)==null?void 0:w.full_name)||"Unknown User",timestamp:new Date(k.created_at).toLocaleString()}}),...(s||[]).map(k=>{var v;return{action:k.created_at===k.updated_at?"Tool Created":"Tool Updated",toolName:k.title,adminName:((v=k.creator)==null?void 0:v.full_name)||"Unknown Admin",timestamp:new Date(k.updated_at).toLocaleString()}}),...(u||[]).map(k=>({action:"Category Updated",toolName:k.name,adminName:"System Admin",timestamp:new Date(k.updated_at).toLocaleString()}))].sort((k,v)=>new Date(v.timestamp).getTime()-new Date(k.timestamp).getTime()).slice(0,20),{data:g,error:b}=await qe.from("user_profiles").select("id, full_name, last_login, role").eq("role","admin").not("last_login","is",null).order("last_login",{ascending:!1}).limit(10);return b&&console.log("Error fetching admin profiles:",b),{success:!0,data:{tool_actions:h,admin_logins:(g||[]).map(k=>({adminName:k.full_name||"Unknown Admin",timestamp:new Date(k.last_login).toLocaleString(),ipAddress:void 0})),system_changes:(i||[]).map(k=>{var v;return{change:`${k.action_type.replace("_"," ").toUpperCase()} for user ${((v=k.target_profile)==null?void 0:v.full_name)||"Unknown"}`,details:k.reason||"No reason provided",timestamp:new Date(k.created_at).toLocaleString()}})}}}catch(t){return{success:!1,error:Tt(t,"getAdminActivityLog",{limit:e}).message}}}getTimeRangeFilter(e){const t=new Date;switch(e){case"1h":return new Date(t.getTime()-3600*1e3).toISOString();case"24h":return new Date(t.getTime()-1440*60*1e3).toISOString();case"7d":return new Date(t.getTime()-10080*60*1e3).toISOString();case"30d":return new Date(t.getTime()-720*60*60*1e3).toISOString();default:return new Date(t.getTime()-1440*60*1e3).toISOString()}}generateSlug(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}}class Kn{static getInstance(){return Kn.instance||(Kn.instance=new Kn),Kn.instance}constructor(){this.appService=Wh.getInstance(),this.adminService=Hh.getInstance()}checkSupabaseConnection(){return this.appService.checkSupabaseConnection()}async getTools(){return this.appService.getTools()}async getAllTools(){return this.adminService.getAllTools()}async createTool(e){return this.adminService.createTool(e)}async updateTool(e,t){return this.adminService.updateTool(e,t)}async deleteTool(e){return this.adminService.deleteTool(e)}async getCategories(){return this.appService.getCategories()}async createCategory(e){return this.adminService.createCategory(e)}async updateCategory(e,t){return this.adminService.updateCategory(e,t)}async deleteCategory(e){return this.adminService.deleteCategory(e)}async sendChatMessage(e,t,n,i){return this.appService.sendChatMessage(e,t,n,i)}async getProjects(e){return this.appService.getProjects(e)}async createProject(e){return this.appService.createProject(e)}async updateProject(e,t){return this.appService.updateProject(e,t)}async deleteProject(e){return this.appService.deleteProject(e)}async saveChatSession(e){return this.appService.saveChatSession(e)}async getChatSessions(e){return this.appService.getChatSessions(e)}async getChatSessionsByProjectId(e,t){return this.appService.getChatSessionsByProjectId(e,t)}async updateChatSession(e,t){return this.appService.updateChatSession(e,t)}async deleteChatSession(e){return this.appService.deleteChatSession(e)}async deleteAllChatSessions(e){return this.appService.deleteAllChatSessions(e)}async getUsers(){return this.adminService.getUsers()}async updateUserRole(e,t,n){return this.adminService.updateUserRole(e,t,n)}async updateUserStatus(e,t,n){return this.adminService.updateUserStatus(e,t,n)}async deleteUser(e,t){return this.adminService.deleteUser(e,t)}async inviteUser(e,t,n){return this.adminService.inviteUser(e,t,n)}async restoreUser(e,t){return this.adminService.restoreUser(e,t)}async getUserAuditLog(e){return this.adminService.getUserAuditLog(e)}async getAllAuditLogs(e=100){return this.adminService.getAllAuditLogs(e)}async getAnnouncements(){return this.appService.getAnnouncements()}async createAnnouncement(e){return this.adminService.createAnnouncement(e)}async updateAnnouncement(e,t){return this.adminService.updateAnnouncement(e,t)}async deleteAnnouncement(e){return this.adminService.deleteAnnouncement(e)}async getDashboardAnalytics(e="24h"){return this.adminService.getDashboardAnalytics(e)}async getAIUsageMetrics(e="24h"){return this.adminService.getAIUsageMetrics(e)}async getSystemHealthMetrics(){return this.adminService.getSystemHealthMetrics()}async getUserEngagementMetrics(e="24h"){return this.adminService.getUserEngagementMetrics(e)}async getAdminActivityLog(e=50){return this.adminService.getAdminActivityLog(e)}async saveClientProfile(e,t){return this.appService.saveClientProfile(e,t)}async deleteClientProfile(e,t){return this.appService.deleteClientProfile(e,t)}async updateDefaultClientProfile(e,t){return this.appService.updateDefaultClientProfile(e,t)}}const ct=e5()(t5((r,e)=>({user:null,session:null,profile:null,isLoading:!0,isAuthenticated:!1,isAdmin:!1,isPro:!1,sessionStatus:"loading",refreshPromise:null,activeClientProfileId:null,setAuth:(t,n)=>{if(console.log(" AUTH DIAGNOSTIC: AuthStore.setAuth called",{userId:t==null?void 0:t.id,hasSession:!!n,sessionExpiry:n!=null&&n.expires_at?new Date(n.expires_at*1e3).toISOString():"N/A",isSessionValid:n!=null&&n.expires_at?n.expires_at>Date.now()/1e3:!1,timestamp:new Date().toISOString(),currentState:e().isAuthenticated,tabVisible:!document.hidden,pageVisibility:document.visibilityState}),n&&n.expires_at&&n.expires_at<Date.now()/1e3){console.log(" AUTH DIAGNOSTIC: Attempted to set expired session, rejecting"),Ae.warn("Attempted to set expired session",{component:"AuthStore",expiresAt:n.expires_at,currentTime:Date.now()/1e3}),e().sessionStatus!=="refreshing"&&r({user:null,session:null,isAuthenticated:!1,isLoading:!1,sessionStatus:"unauthenticated",refreshPromise:null});return}Ae.info("Auth state updated",{component:"AuthStore",userId:t==null?void 0:t.id,hasSession:!!n}),r({user:t,session:n,isAuthenticated:!!t&&!!n,isLoading:!1,sessionStatus:t&&n?"authenticated":"unauthenticated",refreshPromise:null}),t&&Ae.setUserId(t.id)},setProfile:t=>{var i;console.log(" AUTH DIAGNOSTIC: AuthStore.setProfile called",{userId:t==null?void 0:t.id,role:t==null?void 0:t.role,timestamp:new Date().toISOString()}),Ae.info("User profile updated",{component:"AuthStore",userId:t==null?void 0:t.id,role:t==null?void 0:t.role}),r({profile:t,isAdmin:(t==null?void 0:t.role)==="admin",isPro:(t==null?void 0:t.role)==="pro"||(t==null?void 0:t.role)==="admin"});const n=e();if(t&&!n.activeClientProfileId){const a=t.default_client_profile_id;if(a)r({activeClientProfileId:a});else{const s=((i=t.preferences)==null?void 0:i.clientProfiles)||[];s.length>0&&r({activeClientProfileId:s[0].id})}}(t==null?void 0:t.role)==="admin"&&!n.isAdmin&&console.log("Admin role detected, updating isAdmin flag")},setLoading:t=>r({isLoading:t}),clearAuth:()=>{var t;console.log(" AUTH DIAGNOSTIC: AuthStore.clearAuth called",{previousState:{isAuthenticated:e().isAuthenticated,userId:(t=e().user)==null?void 0:t.id,hasProfile:!!e().profile},timestamp:new Date().toISOString(),tabVisible:!document.hidden,pageVisibility:document.visibilityState}),Ae.info("Auth cleared",{component:"AuthStore"}),r({user:null,session:null,profile:null,isAuthenticated:!1,isAdmin:!1,isPro:!1,sessionStatus:"unauthenticated",refreshPromise:null}),Ae.setUserId("anonymous")},setSessionStatus:t=>{console.log(" AUTH DIAGNOSTIC: Setting session status to:",t),r({sessionStatus:t})},setRefreshPromise:t=>{r({refreshPromise:t})},updateProfile:t=>{const n=e().profile;if(n){const i={...n,...t};r({profile:i}),Ae.info("Profile updated locally",{component:"AuthStore",userId:n.id,updates:Object.keys(t)})}},setActiveClientProfileId:t=>{r({activeClientProfileId:t}),Ae.info("Active client profile updated",{component:"AuthStore",activeClientProfileId:t})},getActiveClientProfile:()=>{var s;const{activeClientProfileId:t,profile:n}=e(),i=((s=n==null?void 0:n.preferences)==null?void 0:s.clientProfiles)||[];if(t){const l=i.find(u=>u.id===t);if(l)return l}const a=n==null?void 0:n.default_client_profile_id;if(a){const l=i.find(u=>u.id===a);if(l)return l}return i.length>0?i[0]:null},saveClientProfile:async t=>{var s;const{user:n}=e();if(!n)throw new Error("User not authenticated");const a=await Kn.getInstance().saveClientProfile(n.id,t);if(a.success){const l=e().profile;if(l){const u=((s=l.preferences)==null?void 0:s.clientProfiles)||[],d=u.findIndex(g=>g.id===t.id);let h;d>=0?(h=[...u],h[d]=t):h=[...u,t],r({profile:{...l,preferences:{...l.preferences,clientProfiles:h}}})}}else throw new Error(a.error||"Failed to save client profile")},deleteClientProfile:async t=>{var s;const{user:n}=e();if(!n)throw new Error("User not authenticated");const a=await Kn.getInstance().deleteClientProfile(n.id,t);if(a.success){const l=e().profile,u=e();if(l){const h=(((s=l.preferences)==null?void 0:s.clientProfiles)||[]).filter(g=>g.id!==t);if(r({profile:{...l,preferences:{...l.preferences,clientProfiles:h},default_client_profile_id:l.default_client_profile_id===t?void 0:l.default_client_profile_id}}),u.activeClientProfileId===t){const g=l.default_client_profile_id;g&&g!==t?r({activeClientProfileId:g}):h.length>0?r({activeClientProfileId:h[0].id}):r({activeClientProfileId:null})}}}else throw new Error(a.error||"Failed to delete client profile")},setDefaultClientProfile:async t=>{const{user:n}=e();if(!n)throw new Error("User not authenticated");const a=await Kn.getInstance().updateDefaultClientProfile(n.id,t);if(a.success){const s=e().profile;s&&r({profile:{...s,default_client_profile_id:t||void 0}})}else throw new Error(a.error||"Failed to update default client profile")},getClientProfiles:()=>{var n;const{profile:t}=e();return((n=t==null?void 0:t.preferences)==null?void 0:n.clientProfiles)||[]},getDefaultClientProfile:()=>{var a;const{profile:t}=e(),n=((a=t==null?void 0:t.preferences)==null?void 0:a.clientProfiles)||[],i=t==null?void 0:t.default_client_profile_id;return i?n.find(s=>s.id===i)||null:n.length>0?n[0]:null}}),{name:"artemo-auth-storage",version:1,partialize:r=>({user:r.user,session:r.session,profile:r.profile,isAuthenticated:r.isAuthenticated,isAdmin:r.isAdmin,isPro:r.isPro,activeClientProfileId:r.activeClientProfileId}),onRehydrateStorage:()=>r=>{console.log(" AUTH DIAGNOSTIC: Zustand rehydrating auth state",{hasUser:!!(r!=null&&r.user),hasSession:!!(r!=null&&r.session),isAuthenticated:r==null?void 0:r.isAuthenticated,timestamp:new Date().toISOString()}),r&&(r.isLoading=!1)}})),k9=Object.freeze(Object.defineProperty({__proto__:null,useAuthStore:ct},Symbol.toStringTag,{value:"Module"})),$h="https://xrnamhiilyeeqnbgkoin.supabase.co",n5="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhybmFtaGlpbHllZXFuYmdrb2luIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAyMDY2NTEsImV4cCI6MjA3NTc4MjY1MX0.z3-17IXkQ0XYncbl4YTz3zUT9Q7kwcKOhc6KuuE9v9I",VN=kA.validateEnvironment();VN.isValid||console.error("Supabase environment validation failed:",VN.missingVars);const DA=!!($h.includes("supabase.co")&&$h.startsWith("https://")&&n5.length>20);if(!DA){const r={message:"Supabase configuration missing or not set up",code:"SUPABASE_CONFIG_ERROR",details:'Please click "Connect to Supabase" button to set up your Supabase project',timestamp:new Date().toISOString(),component:"SupabaseClient",severity:"critical"};Ae.critical(r),console.warn("Supabase not configured yet. Please connect to Supabase to enable backend features.")}const qe=DA?AM($h,n5,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",storageKey:"artemo-auth-token",debug:!0,storage:{getItem:r=>{try{const e=localStorage.getItem(r);return console.log(" STORAGE: Getting auth data",{key:r,hasValue:!!e}),e}catch{return console.log(" STORAGE: Failed to get auth data",{key:r}),null}},setItem:(r,e)=>{try{console.log(" STORAGE: Setting auth data",{key:r,valueLength:e.length}),localStorage.setItem(r,e)}catch{console.log(" STORAGE: Failed to set auth data",{key:r})}},removeItem:r=>{try{console.log(" STORAGE: Removing auth data",{key:r}),localStorage.removeItem(r)}catch{console.log(" STORAGE: Failed to remove auth data",{key:r})}}}},global:{headers:{"X-Client-Info":"artemo-dashboard"}}}):null;console.log("Supabase Configuration Status:",{configured:DA,hasUrl:!0,hasKey:!0,urlValid:$h==null?void 0:$h.includes("supabase.co")});const Xt=()=>qe!==null,Cc=async(r=5e3)=>{const e=Date.now();return new Promise(t=>{const n=()=>{const i=ct.getState();if(i.sessionStatus==="authenticated"&&i.isAuthenticated){t(!0);return}if(i.sessionStatus==="unauthenticated"){t(!1);return}if(Date.now()-e>r){console.log(" SUPABASE: Session stability timeout reached"),t(!1);return}if(i.sessionStatus==="loading"||i.sessionStatus==="refreshing"){setTimeout(n,100);return}t(!1)};n()})},Tt=(r,e,t)=>kA.handleSupabaseError(r,e,t);function Ny(r,e,t,n,i){return{message:r,code:e,details:t,timestamp:new Date().toISOString(),correlationId:i,component:"AuthService",severity:n}}class Cl{static info(e,t,n){console.log(JSON.stringify({timestamp:new Date().toISOString(),level:"info",message:e,correlationId:t,component:"AuthService",context:n}))}static error(e,t,n){console.error(JSON.stringify({timestamp:new Date().toISOString(),level:"error",message:e,correlationId:t,component:"AuthService",context:n}))}}class ka{static getInstance(){return ka.instance||(ka.instance=new ka),ka.instance}mapSupabaseAuthError(e,t,n){var u;const i={message:"An authentication error occurred",code:"AUTH_UNKNOWN_ERROR",timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:"AuthService",severity:"error",authProvider:"supabase",authMethod:t,attemptedEmail:n,details:e.message||e.toString()},a=((u=e.message)==null?void 0:u.toLowerCase())||"",s=e.code||"";if(a.includes("invalid login credentials")||a.includes("invalid email or password"))return{...i,message:"Invalid email or password. Please check your credentials and try again.",code:"AUTH_INVALID_CREDENTIALS"};if(a.includes("user already registered")||a.includes("already exists"))return{...i,message:"An account with this email already exists. Please sign in instead.",code:"AUTH_USER_EXISTS",severity:"warn"};if(a.includes("email not confirmed")||a.includes("confirm"))return{...i,message:"Please confirm your email address before signing in.",code:"AUTH_EMAIL_NOT_CONFIRMED",severity:"warn"};if(a.includes("network")||a.includes("fetch"))return{...i,message:"Network connection error. Please check your internet connection and try again.",code:"AUTH_NETWORK_ERROR"};if(a.includes("rate limit")||a.includes("too many"))return{...i,message:"Too many login attempts. Please wait a moment before trying again.",code:"AUTH_RATE_LIMIT",severity:"warn"};if(s==="42P17")return{...i,message:"Database configuration error. Please contact support.",code:"AUTH_DATABASE_CONFIG_ERROR",details:"Infinite recursion detected in database policies"};if(s==="23505")return{...i,message:"An account with this email already exists. Please sign in instead.",code:"AUTH_USER_EXISTS",severity:"warn"};if(s==="23503")return{...i,message:"Account creation failed due to database constraints. Please try again.",code:"AUTH_DATABASE_CONSTRAINT_ERROR"};const l=e.message||e.details||"Unknown authentication error";return{...i,message:`Authentication failed: ${l}. Please try again or contact support if the problem persists.`,code:"AUTH_GENERIC_ERROR",details:`Original error: ${JSON.stringify({code:s,message:e.message,details:e.details})}`}}sanitizeEmail(e){const[t,n]=e.split("@");return`${t.substring(0,2)}***@${n}`}async signIn(e,t){if(!Xt())throw new Error("Supabase not configured. Please connect to Supabase first.");const n=performance.now();Ae.getCorrelationId(),Ae.authAttempt("signin",e);try{const{data:i,error:a}=await qe.auth.signInWithPassword({email:e,password:t});if(a)throw a;if(!i.user||!i.session)throw new Error("Authentication succeeded but no user data returned");const s=await this.getUserProfile(i.user.id);ct.getState().setAuth(i.user,i.session),ct.getState().setProfile(s);const l=performance.now();return Ae.performance("auth_signin",l-n,{success:!0,userId:i.user.id,hasProfile:!!s}),Ae.authSuccess("signin",i.user.id),i}catch(i){const a=performance.now(),s=this.mapSupabaseAuthError(i,"signin",e);throw Ae.performance("auth_signin",a-n,{success:!1,errorCode:s.code}),Ae.authError(s),s}}async signUp(e,t,n){var s,l;if(!Xt())throw Ny("Supabase not configured. Please connect to Supabase first.","AUTH_SUPABASE_NOT_CONFIGURED","Supabase connection is required for user registration","error",Ae.getCorrelationId());const i=performance.now(),a=Ae.getCorrelationId();Ae.authAttempt("signup",e);try{Cl.info("Starting user signup process",a,{email:this.sanitizeEmail(e),fullName:n.substring(0,3)+"***"});const{data:u,error:d}=await qe.auth.signUp({email:e,password:t,options:{data:{full_name:n}}});if(d)throw Cl.error("Supabase auth signup failed",a,{supabaseError:d,email:this.sanitizeEmail(e),errorCode:d.code,errorMessage:d.message}),d;if(!u.user)throw Ny("User creation succeeded but no user data returned","AUTH_USER_DATA_MISSING","Supabase auth.signUp returned success but data.user is null","error",a);Cl.info("Supabase auth signup successful, creating profile",a,{userId:u.user.id,email:this.sanitizeEmail(e)}),u.user&&setTimeout(async()=>{try{const g=await this.getUserProfile(u.user.id);g&&(ct.getState().setProfile(g),Cl.info("User profile loaded after signup",a,{userId:u.user.id,profileId:g.id}))}catch(g){Cl.error("Failed to load user profile after signup",a,{userId:u.user.id,error:g instanceof Error?g.message:"Unknown error"})}},1e3);const h=performance.now();return Ae.performance("auth_signup",h-i,{success:!0,userId:(s=u.user)==null?void 0:s.id}),Ae.authSuccess("signup",(l=u.user)==null?void 0:l.id),u}catch(u){const d=performance.now();Cl.error("Raw signup error details",a,{errorType:typeof u,errorCode:u.code,errorMessage:u.message,errorDetails:u.details,errorHint:u.hint,fullError:u});let h;throw u.code&&u.message&&u.severity&&u.component?h=u:h=this.mapSupabaseAuthError(u,"signup",e),Ae.performance("auth_signup",d-i,{success:!1,errorCode:h.code}),Ae.authError(h),h}}async signOut(){var t,n;if(!Xt()){ct.getState().clearAuth();return}const e=performance.now();Ae.authAttempt("signout");try{const{error:i}=await qe.auth.signOut();if(i){const s=((t=i.message)==null?void 0:t.toLowerCase())||"";if(s.includes("session_not_found")||s.includes("session from session_id claim in jwt does not exist")||i.code==="session_not_found"){ct.getState().clearAuth();const l=performance.now();Ae.performance("auth_signout",l-e,{success:!0,sessionAlreadyInvalid:!0}),Ae.info("Session already invalid on server, cleared local state",{component:"AuthService",correlationId:Ae.getCorrelationId()});return}throw i}ct.getState().clearAuth();const a=performance.now();Ae.performance("auth_signout",a-e,{success:!0}),Ae.authSuccess("signout")}catch(i){const a=((n=i.message)==null?void 0:n.toLowerCase())||"";if(a.includes("session_not_found")||a.includes("session from session_id claim in jwt does not exist")||i.code==="session_not_found"){ct.getState().clearAuth();const u=performance.now();Ae.performance("auth_signout",u-e,{success:!0,sessionAlreadyInvalid:!0}),Ae.info("Session already invalid, logout completed",{component:"AuthService",correlationId:Ae.getCorrelationId()});return}const s=performance.now(),l=this.mapSupabaseAuthError(i,"signout");throw Ae.performance("auth_signout",s-e,{success:!1,errorCode:l.code}),Ae.authError(l),l}}async getCurrentSession(){var e;if(!Xt())return Ae.info("Supabase not available, skipping getCurrentSession",{component:"AuthService"}),console.log(" AUTH DIAGNOSTIC: getCurrentSession - Supabase not available"),null;try{console.log(" AUTH DIAGNOSTIC: getCurrentSession - Making Supabase call",{timestamp:new Date().toISOString(),tabVisible:!document.hidden});const{data:{session:t},error:n}=await qe.auth.getSession();return n?(console.log(" AUTH DIAGNOSTIC: getCurrentSession - Supabase error",{error:n.message,code:n.code,timestamp:new Date().toISOString()}),null):(console.log(" AUTH DIAGNOSTIC: getCurrentSession - Session result",{hasSession:!!t,userId:(e=t==null?void 0:t.user)==null?void 0:e.id,sessionExpiry:t!=null&&t.expires_at?new Date(t.expires_at*1e3).toISOString():"N/A",isExpired:t!=null&&t.expires_at?t.expires_at<Date.now()/1e3:"N/A",timestamp:new Date().toISOString()}),t)}catch(t){return console.log(" AUTH DIAGNOSTIC: getCurrentSession - Exception",{error:t.message,timestamp:new Date().toISOString()}),null}}async getCurrentUser(){if(!Xt())return console.log("AuthService: Supabase not available, skipping getCurrentUser"),console.log(" AUTH DIAGNOSTIC: getCurrentUser - Supabase not available"),null;try{const{data:{user:e},error:t}=await qe.auth.getUser();if(t)throw t;return e&&Ae.setUserId(e.id),e}catch{return null}}async getUserProfile(e){if(!Xt())return console.log(" AUTH: Supabase not available, skipping getUserProfile"),null;try{console.log(" AUTH: Getting user profile from Supabase");const{data:t,error:n}=await qe.from("user_profiles").select("*").eq("id",e).maybeSingle();if(n)throw n;return t}catch(t){const n=t.message||"";return n.includes("Failed to fetch")||n.includes("TypeError: Failed to fetch")||t instanceof TypeError?(console.log(" AUTH: Supabase connection failed - likely not configured"),null):(Ae.error({message:"Failed to fetch user profile",code:"AUTH_PROFILE_FETCH_ERROR",details:t.message,timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:"AuthService",severity:"error"},{userId:e}),null)}}async createUserProfile(e,t,n){if(!Xt())throw Ny("Supabase not connected","AUTH_SUPABASE_NOT_AVAILABLE","Cannot create user profile without Supabase connection","error",Ae.getCorrelationId());const i=Ae.getCorrelationId();try{Cl.info("Creating user profile",i,{userId:e,fullName:t.substring(0,3)+"***"});const{data:a,error:s}=await qe.from("user_profiles").insert({id:e,full_name:t,role:"user"}).select().single();if(s)throw Cl.error("Database insert failed for user profile",i,{userId:e,supabaseError:s}),s;return Ae.info("User profile created",{component:"AuthService",userId:e,fullName:t.substring(0,3)+"***"}),a}catch(a){const s=Ny("Failed to create user profile","AUTH_PROFILE_CREATE_ERROR",a.message||"Unknown database error","error",i);throw Ae.error(s,{userId:e,fullName:t.substring(0,3)+"***",supabaseError:a}),s}}async resetPassword(e){if(!qe)throw new Error("Supabase not connected");Ae.authAttempt("resetPassword",e);try{const{error:t}=await qe.auth.resetPasswordForEmail(e);if(t)throw console.log("AuthService: Error resetting password:",t),t;console.log("AuthService: Password reset email sent"),Ae.info("Password reset email sent",{component:"AuthService",attemptedEmail:e})}catch(t){console.log("AuthService: resetPassword failed:",t);const n=this.mapSupabaseAuthError(t,"signin",e);throw Ae.authError(n),n}}setupAuthListener(e){return console.log(" AUTH DIAGNOSTIC: setupAuthListener called"),console.log(" AUTH DIAGNOSTIC: Supabase available:",Xt()),Xt()?(console.log(" AUTH DIAGNOSTIC: Setting up Supabase auth state listener"),qe.auth.onAuthStateChange(async(t,n)=>{var d,h,g;console.log(" AUTH DIAGNOSTIC: Auth state change detected",{event:t,hasSession:!!n,userId:(d=n==null?void 0:n.user)==null?void 0:d.id,sessionExpiry:n!=null&&n.expires_at?new Date(n.expires_at*1e3).toISOString():"N/A",isSessionValid:n!=null&&n.expires_at?n.expires_at>Date.now()/1e3:!1,timestamp:new Date().toISOString(),tabVisible:!document.hidden,pageVisibility:document.visibilityState,currentAuthState:ct.getState().isAuthenticated,currentUserId:(h=ct.getState().user)==null?void 0:h.id}),Ae.info("Auth state changed",{component:"AuthService",event:t,hasSession:!!n,userId:(g=n==null?void 0:n.user)==null?void 0:g.id});const{setAuth:i,clearAuth:a,setSessionStatus:s,setProfile:l}=ct.getState();if(t==="TOKEN_REFRESHED")if(n)console.log(" AUTH DIAGNOSTIC: Token refreshed successfully, updating session"),i(n.user,n);else{console.log(" AUTH DIAGNOSTIC: Token refresh failed or session temporarily null, setting refreshing state"),s("refreshing"),e!=null&&e.onSessionExpired&&e.onSessionExpired();return}if(n&&n.expires_at&&n.expires_at<Date.now()/1e3){console.log(" AUTH DIAGNOSTIC: Token refresh failed, session lost"),Ae.warn("Token refresh failed",{component:"AuthService",event:t}),a(),e!=null&&e.onSessionExpired&&e.onSessionExpired();return}(t==="SIGNED_IN"||t==="INITIAL_SESSION")&&(n!=null&&n.user)?(console.log(" AUTH DIAGNOSTIC: User signed in, setting auth state"),i(n.user,n),this.getUserProfile(n.user.id).then(b=>{b&&l(b)}).catch(b=>{console.log(" AUTH DIAGNOSTIC: Failed to load profile:",b)})):t==="SIGNED_OUT"||!n?(console.log(" AUTH DIAGNOSTIC: User signed out or no session, clearing auth state"),a()):t==="USER_UPDATED"&&(n!=null&&n.user)&&(console.log(" AUTH DIAGNOSTIC: User updated, refreshing profile"),i(n.user,n),this.getUserProfile(n.user.id).then(b=>{b&&l(b)}).catch(b=>{console.log(" AUTH DIAGNOSTIC: Failed to refresh profile:",b)}))})):(console.log(" AUTH DIAGNOSTIC: Supabase not available, returning mock subscription"),{data:{subscription:{unsubscribe:()=>{console.log(" AUTH DIAGNOSTIC: Mock subscription unsubscribed")}}}})}async validateCurrentSession(){if(!Xt())return!1;try{const e=await this.getCurrentSession();return e?e.expires_at&&e.expires_at<Date.now()/1e3?(Ae.warn("Session validation failed - expired",{component:"AuthService",expiresAt:e.expires_at,currentTime:Date.now()/1e3}),!1):!0:!1}catch(e){return Ae.error({message:"Session validation failed",code:"AUTH_SESSION_VALIDATION_ERROR",details:e instanceof Error?e.message:"Unknown error",timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:"AuthService",severity:"warn"}),!1}}async refreshSessionIfNeeded(){if(!Xt())return!1;try{const{data:e,error:t}=await qe.auth.refreshSession();return t?(Ae.warn("Session refresh failed",{component:"AuthService",error:t.message}),!1):e.session&&e.user?(Ae.info("Session refreshed successfully",{component:"AuthService",userId:e.user.id}),ct.getState().setAuth(e.user,e.session),!0):!1}catch(e){return Ae.error({message:"Session refresh error",code:"AUTH_SESSION_REFRESH_ERROR",details:e instanceof Error?e.message:"Unknown error",timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:"AuthService",severity:"error"}),!1}}async tryRefreshWithTimeout(e=1e4){const t=Ae.getCorrelationId();Ae.info("Attempting session refresh with timeout",{component:"AuthService",timeoutMs:e});try{ct.getState().setSessionStatus("refreshing");const n=Promise.race([this.refreshSessionIfNeeded(),new Promise((a,s)=>setTimeout(()=>s(new Error("Refresh timeout")),e))]);return ct.getState().setRefreshPromise(n),await n?(Ae.info("Session refresh completed successfully",{component:"AuthService",correlationId:t}),!0):(Ae.warn("Session refresh failed",{component:"AuthService",correlationId:t}),!1)}catch(n){return Ae.error({message:"Session refresh with timeout failed",code:"AUTH_SESSION_REFRESH_TIMEOUT",details:n instanceof Error?n.message:"Unknown error",timestamp:new Date().toISOString(),correlationId:t,component:"AuthService",severity:"error"}),!1}finally{ct.getState().setRefreshPromise(null)}}}const D9=({onSuccess:r,onToggleMode:e})=>{const t=Ir(),[n,i]=Q.useState(""),[a,s]=Q.useState(""),[l,u]=Q.useState(!1),[d,h]=Q.useState(null),g=ka.getInstance(),b=async x=>{var k;if(x.preventDefault(),!n.trim()||!a.trim()){h("Email and password are required");return}if(!n.includes("@")){h("Please enter a valid email address");return}u(!0),h(null),Ae.userAction("login_attempt",{component:"LoginForm",email:n.substring(0,3)+"***"});try{const v=await g.signIn(n,a);if(!v.user||!v.session)throw new Error("Login succeeded but no session data returned");console.log("Login successful:",v.user.id),Ae.userAction("login_success",{component:"LoginForm",userId:(k=v.user)==null?void 0:k.id}),r(),t.success("Welcome back! You have been signed in successfully.","Login Successful")}catch(v){console.error("Login error:",v);const w=v.message||"Login failed. Please try again.";h(w),t.error(w,"Login Failed"),Ae.error({message:w,code:v.code||"AUTH_LOGIN_ERROR",details:v.details||v.toString(),timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:"LoginForm",severity:"error"},{formEmail:n.substring(0,3)+"***",passwordLength:a.length})}finally{u(!1)}};return f.jsx("div",{className:"min-h-screen bg-light-bg-page dark:bg-dark-bg-page flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg shadow-lg w-full max-w-md p-8",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"font-serif text-2xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:"Welcome Back"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Sign in to your Artemo account"})]}),f.jsxs("form",{onSubmit:b,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Email"}),f.jsx("input",{id:"email",type:"email",value:n,onChange:x=>i(x.target.value),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"your@email.com",required:!0,disabled:l})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Password"}),f.jsx("input",{id:"password",type:"password",value:a,onChange:x=>s(x.target.value),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Enter your password",required:!0,disabled:l})]}),d&&f.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:f.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:d})}),f.jsx("button",{type:"submit",disabled:l||!n||!a,className:"w-full py-3 px-4 bg-primary-accent text-text-on-accent rounded-md font-medium hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Signing in...":"Sign In"})]}),f.jsx("div",{className:"mt-6 text-center",children:f.jsx("button",{onClick:e,className:"text-sm text-primary-accent hover:underline",disabled:l,children:"Don't have an account? Sign up"})})]})})},_9=({onSuccess:r,onToggleMode:e})=>{const t=Ir(),[n,i]=Q.useState(""),[a,s]=Q.useState(""),[l,u]=Q.useState(""),[d,h]=Q.useState(!1),[g,b]=Q.useState(null),x=ka.getInstance(),k=async v=>{var w;if(v.preventDefault(),!n.trim()||!a.trim()||!l.trim()){b("All fields are required");return}if(a.length<6){b("Password must be at least 6 characters long");return}if(!n.includes("@")){b("Please enter a valid email address");return}h(!0),b(null),Ae.userAction("signup_attempt",{component:"SignupForm",email:n.substring(0,3)+"***"});try{const D=await x.signUp(n,a,l);if(!D.user)throw new Error("Signup succeeded but no user data returned");console.log("Signup successful:",D.user.id),Ae.userAction("signup_success",{component:"SignupForm",userId:(w=D.user)==null?void 0:w.id}),r(),t.success("Account created successfully! Welcome to Artemo AI Dashboard.","Account Created")}catch(D){console.error("Signup error:",D);const _=D.message||"Signup failed. Please try again.";b(_),t.error(_,"Signup Failed"),Ae.error({message:_,code:D.code||"AUTH_SIGNUP_ERROR",details:D.details||D.toString(),timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:"SignupForm",severity:"error"},{formEmail:n.substring(0,3)+"***",fullName:l.substring(0,3)+"***",passwordLength:a.length})}finally{h(!1)}};return f.jsx("div",{className:"min-h-screen bg-light-bg-page dark:bg-dark-bg-page flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg shadow-lg w-full max-w-md p-8",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"font-serif text-2xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:"Create Account"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Join Artemo AI Dashboard"})]}),f.jsxs("form",{onSubmit:k,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Full Name"}),f.jsx("input",{id:"fullName",type:"text",value:l,onChange:v=>u(v.target.value),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Your full name",required:!0,disabled:d})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Email"}),f.jsx("input",{id:"email",type:"email",value:n,onChange:v=>i(v.target.value),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"your@email.com",required:!0,disabled:d})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Password"}),f.jsx("input",{id:"password",type:"password",value:a,onChange:v=>s(v.target.value),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Create a password",required:!0,disabled:d,minLength:6})]}),g&&f.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:f.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:g})}),f.jsx("button",{type:"submit",disabled:d||!n||!a||!l,className:"w-full py-3 px-4 bg-primary-accent text-text-on-accent rounded-md font-medium hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Creating account...":"Create Account"})]}),f.jsx("div",{className:"mt-6 text-center",children:f.jsx("button",{onClick:e,className:"text-sm text-primary-accent hover:underline",disabled:d,children:"Already have an account? Sign in"})})]})})};function r5(r={}){const{enablePeriodicValidation:e=!0,enableFocusRecovery:t=!0,validationIntervalMs:n=3e4}=r,{isAuthenticated:i,sessionStatus:a,user:s,session:l,profile:u}=ct(),[d,h]=Q.useState(!0),g=Q.useRef(null),b=Q.useRef(!1),x=Q.useRef(null);return Q.useEffect(()=>{if(Ae.setCorrelationId(),Ae.setSessionId(crypto.randomUUID()),console.log(" AUTH: useAuthSession hook initialized",{timestamp:new Date().toISOString(),enablePeriodicValidation:e,enableFocusRecovery:t,validationIntervalMs:n}),Ae.info("Authentication session hook initialized",{component:"useAuthSession",version:"1.0.0",environment:"production"}),!Xt()){console.log(" AUTH: Supabase not available, skipping auth setup"),h(!1);return}if((async()=>{console.log(" AUTH: Initializing authentication");const v=ka.getInstance();x.current=v.setupAuthListener({onAuthError:D=>{console.log(" AUTH: Auth error detected, clearing state",D),Ae.error({message:"Authentication error detected",code:"AUTH_STATE_ERROR",details:D.message,timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:"useAuthSession",severity:"error"}),ct.getState().clearAuth()},onSessionExpired:()=>{var D;console.log(" AUTH: Session expired, clearing state"),Ae.warn("User session expired",{component:"useAuthSession",userId:(D=ct.getState().user)==null?void 0:D.id}),ct.getState().clearAuth()}});const w=await v.getCurrentSession();if(w!=null&&w.user){console.log(" AUTH: Found existing session, setting auth state"),ct.getState().setAuth(w.user,w);const D=await v.getUserProfile(w.user.id);D&&ct.getState().setProfile(D)}h(!1)})(),e&&setTimeout(()=>{g.current&&clearInterval(g.current);const w=setInterval(async()=>{var _;const D=ct.getState();if(D.isAuthenticated&&D.session&&Xt()&&!b.current){console.log(" AUTH: Periodic session validation check");try{D.session.expires_at&&D.session.expires_at<Date.now()/1e3+300&&(console.log(" AUTH: Session needs refresh, attempting refresh"),b.current=!0,await ka.getInstance().tryRefreshWithTimeout(1e4)||(console.log(" AUTH: Session refresh failed, clearing auth"),ct.getState().clearAuth()),b.current=!1)}catch(A){console.log(" AUTH: Session validation error:",A);const N=A instanceof Error?A.message:"";!b.current&&(N.includes("Invalid JWT")||N.includes("JWT expired")||N.includes("Invalid token"))&&(Ae.warn("Session validation failed with auth error",{component:"useAuthSession",error:N,userId:(_=D.user)==null?void 0:_.id}),ct.getState().clearAuth())}}},n);g.current=w},5e3),t){const v=async()=>{console.log(" AUTH: Page focus gained, checking session validity"),setTimeout(async()=>{if(console.log(" AUTH: Delayed session check after focus"),!b.current){const A=ct.getState();A.isAuthenticated&&A.session&&Xt()&&(A.session.expires_at&&A.session.expires_at<Date.now()/1e3+60?(console.log(" AUTH: Session needs refresh on focus, attempting refresh"),b.current=!0,await ka.getInstance().tryRefreshWithTimeout(1e4)||(console.log(" AUTH: Session refresh failed on focus, clearing auth"),ct.getState().clearAuth()),b.current=!1):console.log(" AUTH: Stored session still valid on focus"))}},100)},w=()=>{var A;console.log(" AUTH: Page visibility changed",{hidden:document.hidden,visibilityState:document.visibilityState,timestamp:new Date().toISOString(),currentAuthState:ct.getState().isAuthenticated,userId:(A=ct.getState().user)==null?void 0:A.id}),document.hidden||v()},D=()=>{var A;console.log(" AUTH: Window focus gained",{timestamp:new Date().toISOString(),currentAuthState:ct.getState().isAuthenticated,userId:(A=ct.getState().user)==null?void 0:A.id}),v()},_=()=>{var A;console.log(" AUTH: Window focus lost",{timestamp:new Date().toISOString(),currentAuthState:ct.getState().isAuthenticated,userId:(A=ct.getState().user)==null?void 0:A.id})};return document.addEventListener("visibilitychange",w),window.addEventListener("focus",D),window.addEventListener("blur",_),()=>{document.removeEventListener("visibilitychange",w),window.removeEventListener("focus",D),window.removeEventListener("blur",_)}}return()=>{var v,w,D;console.log(" AUTH: useAuthSession cleanup",{timestamp:new Date().toISOString()}),(D=(w=(v=x.current)==null?void 0:v.data)==null?void 0:w.subscription)==null||D.unsubscribe(),g.current&&clearInterval(g.current),b.current=!1}},[e,t,n]),{isAuthenticated:i,sessionStatus:a,isInitializing:d,user:s,session:l,profile:u}}const A9=({children:r})=>{const{isAuthenticated:e,sessionStatus:t,isInitializing:n}=r5({enablePeriodicValidation:!1,enableFocusRecovery:!1}),[i,a]=Q.useState(!1),[s,l]=Q.useState(null),u=di(),h=Tn.useMemo(()=>u.pathname?(u.pathname.replace(/\/+$/,"")||"/").toLowerCase():"/",[u.pathname])==="/set-password",g=typeof u.hash=="string"&&u.hash.includes("type=invite");if(h||g)return f.jsx(f.Fragment,{children:r});if(n||t==="loading"||t==="refreshing")return f.jsx("div",{className:"min-h-screen bg-light-bg-page dark:bg-dark-bg-page flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-accent mx-auto mb-4"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:t==="refreshing"?"Refreshing session...":"Initializing authentication..."})]})});const x=()=>{console.log("AuthWrapper: Auth success, reloading page"),l(null)},k=()=>{console.log("AuthWrapper: Switching to signup"),a(!0)},v=()=>{console.log("AuthWrapper: Switching to login"),a(!1),l(null)};return Xt()?!e&&t==="unauthenticated"?f.jsxs(f.Fragment,{children:[s&&f.jsxs("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-red-100 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4 max-w-md",children:[f.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:s}),f.jsx("button",{onClick:()=>l(null),className:"mt-2 text-xs text-red-600 dark:text-red-400 hover:underline",children:"Dismiss"})]}),i?f.jsx(_9,{onSuccess:x,onToggleMode:v}):f.jsx(D9,{onSuccess:x,onToggleMode:k})]}):f.jsx(f.Fragment,{children:r}):f.jsx("div",{className:"min-h-screen bg-light-bg-page dark:bg-dark-bg-page flex items-center justify-center p-4",children:f.jsx("div",{className:"max-w-md w-full text-center",children:f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg p-8 shadow-lg",children:[f.jsx("h2",{className:"text-2xl font-bold text-light-text-primary dark:text-dark-text-primary mb-4",children:"Connect to Supabase"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-6",children:"To enable backend features like authentication, data storage, and AI integration, please connect your Supabase project."}),f.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md p-4 mb-6",children:f.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:'Click the "Connect to Supabase" button in the top right corner of Bolt to get started.'})}),f.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",children:"Refresh After Connection"})]})})})},S9=({children:r,onAuthStateChange:e})=>{const{isAuthenticated:t,sessionStatus:n,isInitializing:i}=r5({enablePeriodicValidation:!0,enableFocusRecovery:!0});return Q.useEffect(()=>{e&&e(t)},[t,e]),i||n==="loading"?f.jsx("div",{className:"min-h-screen bg-light-bg-page dark:bg-dark-bg-page flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-accent mx-auto mb-4"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading application..."})]})}):f.jsx(f.Fragment,{children:r})},Ca=e5()(t5(r=>({theme:"dark",isSidebarOpen:!1,searchTerm:"",favoriteTools:[],recentTools:[],isModalOpen:!1,isChatSearchOpen:!1,itemToRename:null,toolForActivation:null,showProUpgradeModal:!1,setShowProUpgradeModal:e=>r({showProUpgradeModal:e}),toggleTheme:()=>r(e=>({theme:e.theme==="light"?"dark":"light"})),toggleSidebar:()=>r(e=>({isSidebarOpen:!e.isSidebarOpen})),setSearchTerm:e=>r({searchTerm:e}),toggleFavorite:e=>r(t=>({favoriteTools:t.favoriteTools.includes(e)?t.favoriteTools.filter(i=>i!==e):[...t.favoriteTools,e]})),openModal:()=>r({isModalOpen:!0}),closeModal:()=>r({isModalOpen:!1}),openChatSearch:()=>r({isChatSearchOpen:!0}),closeChatSearch:()=>r({isChatSearchOpen:!1}),setItemToRename:e=>r({itemToRename:e}),setToolForActivation:e=>r({toolForActivation:e}),addRecentTool:e=>r(t=>({recentTools:[e,...t.recentTools.filter(a=>a!==e)].slice(0,10)}))}),{name:"ui-store"})),E9=()=>{const{showProUpgradeModal:r,setShowProUpgradeModal:e}=Ca();if(!r)return null;const t=()=>{console.log("Redirecting to upgrade page..."),e(!1)};return f.jsx("div",{className:"fixed inset-0 bg-black/50 z-[60] flex items-center justify-center p-4",onClick:()=>e(!1),children:f.jsx("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-md",onClick:n=>n.stopPropagation(),children:f.jsxs("div",{className:"p-6 relative",children:[f.jsx("button",{onClick:()=>e(!1),className:"absolute top-4 right-4 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:f.jsx(Ms,{className:"w-6 h-6"})}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-accent-light-blue/50 dark:bg-accent-dark-blue/20 mb-4",children:f.jsx($R,{className:"h-8 w-8 text-accent-dark-blue dark:text-accent-light-blue"})}),f.jsx("h3",{className:"font-serif text-2xl font-bold text-light-text-primary dark:text-dark-text-primary mb-3",children:"Access Restricted"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-6",children:"This tool is exclusive to members of the Personal Brand Intensive program. Want access to this tool?"}),f.jsx("button",{onClick:t,className:"w-full px-4 py-3 bg-primary-accent text-text-on-accent rounded-md font-medium text-lg hover:opacity-90 transition-opacity",children:"Contact Support"})]})]})})})},wp=()=>{const[r,e]=Q.useState([]),[t,n]=Q.useState(!0),[i,a]=Q.useState(null),{user:s}=ct(),l=Kn.getInstance(),u=ax(),d=Ir(),h=async()=>{var k;if(!s){n(!1);return}if(!Xt()){console.log("useProjects: Supabase not connected, using empty projects"),e([]),n(!1);return}n(!0),a(null);try{const v=await l.getProjects(s.id);v.success&&v.data?(e(v.data),Ae.info("Projects fetched successfully",{component:"useProjects",projectCount:v.data.length,userId:s.id})):(k=v.error)!=null&&k.includes("session is not stable")?(console.log("useProjects: Session not stable, will retry automatically"),e([])):a(v.error||"Failed to fetch projects")}catch(v){console.log("useProjects: Error fetching projects:",v),(v instanceof Error?v.message:"Unknown error").includes("session is not stable")?(console.log("useProjects: Session not stable, will retry automatically"),e([])):a("Network error occurred")}finally{n(!1)}};return Q.useEffect(()=>{s?h():n(!1)},[s]),{projects:r,loading:t,error:i,refetch:h,createProject:async(k,v,w)=>{if(!s){d.error("You must be logged in to create a project.");return}if(!Xt()){d.error("Cannot create project, connection not available.");return}try{const D=await l.createProject({name:k,color:v,userId:s.id,clientProfileSnapshot:w});if(D.success&&D.data)return d.success("Project created successfully!"),await h(),D.data;throw new Error(D.error||"Failed to create project")}catch(D){throw d.error(`Failed to create project: ${D instanceof Error?D.message:"Unknown error"}`),D}},deleteProject:async k=>{if(await u.confirm({title:"Delete Project",message:"Are you sure you want to delete this project and all its associated chats? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",variant:"danger"})){if(!Xt()){d.error("Cannot delete project, connection not available.");return}try{const w=await l.deleteProject(k);if(w.success)d.success("Project deleted successfully."),await h();else throw new Error(w.error||"Failed to delete project")}catch(w){d.error(`Failed to delete project: ${w instanceof Error?w.message:"Unknown error"}`)}}},updateProject:async(k,v)=>{if(!Xt()){d.error("Cannot update project, connection not available.");return}try{const w=await l.updateProject(k,v);if(w.success&&w.data)return d.success("Project updated successfully."),await h(),w.data;throw new Error(w.error||"Failed to update project")}catch(w){throw d.error(`Failed to update project: ${w instanceof Error?w.message:"Unknown error"}`),w}}}},T9=({isOpen:r,onClose:e,onSelectProject:t,currentProjectId:n,projects:i=[]})=>r?f.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-[1001] flex items-center justify-center p-4",onClick:e,children:f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-md",onClick:a=>a.stopPropagation(),children:[f.jsx("div",{className:"p-4 border-b border-light-border dark:border-dark-border",children:f.jsx("h3",{className:"font-serif text-lg font-bold text-light-text-primary dark:text-dark-text-primary",children:"Add Chat to Project"})}),f.jsx("div",{className:"p-4 max-h-60 overflow-y-auto",children:i&&i.length>0?f.jsx("div",{className:"space-y-2",children:i.map(a=>f.jsxs("button",{onClick:()=>{t(a.id),e()},className:`w-full text-left p-3 rounded-md border transition-colors ${n===a.id?"border-primary-accent bg-primary-accent/10 text-light-text-primary dark:text-dark-text-primary":"border-light-border dark:border-dark-border hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page text-light-text-secondary dark:text-dark-text-secondary"}`,children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Yr,{className:"w-4 h-4"}),f.jsx("span",{className:"font-medium",children:a.name}),n===a.id&&f.jsx("span",{className:"text-xs text-primary-accent ml-auto",children:"Current"})]}),a.tags.length>0&&f.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[a.tags.slice(0,3).map(s=>f.jsx("span",{className:"text-xs px-2 py-1 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-full",children:s},s)),a.tags.length>3&&f.jsxs("span",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:["+",a.tags.length-3," more"]})]})]},a.id))}):f.jsxs("div",{className:"text-center py-8 text-light-text-tertiary dark:text-dark-text-tertiary",children:[f.jsx(Yr,{className:"w-8 h-8 mx-auto mb-2"}),f.jsx("p",{children:"No projects available"}),f.jsx("p",{className:"text-sm",children:"Create a project first"})]})}),f.jsx("div",{className:"p-4 border-t border-light-border dark:border-dark-border flex justify-end",children:f.jsx("button",{onClick:e,className:"px-4 py-2 text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:"Cancel"})})]})}):null,C9=({chatItem:r,onRename:e,onDelete:t,onAddToProject:n})=>{const[i,a]=Q.useState(!1),[s,l]=Q.useState(!1),[u,d]=Q.useState(!1),h=Q.useRef(null),{projects:g}=wp(),{user:b}=ct(),x=Kn.getInstance();Q.useEffect(()=>{const w=D=>{h.current&&!h.current.contains(D.target)&&a(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const k=async w=>{if(b){d(!0);try{const D=await x.updateChatSession(r.id,{projectId:w});if(D.success)n(w),console.log("Chat successfully added to project");else throw new Error(D.error||"Failed to add chat to project")}catch(D){console.error("Failed to add chat to project:",D),alert("Failed to add chat to project. Please try again.")}finally{d(!1)}}},v=async()=>{if(b){d(!0);try{const w=await x.updateChatSession(r.id,{projectId:null});if(w.success)n(""),console.log("Chat successfully removed from project");else throw new Error(w.error||"Failed to remove chat from project")}catch(w){console.error("Failed to remove chat from project:",w),alert("Failed to remove chat from project. Please try again.")}finally{d(!1)}}};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"relative",ref:h,children:[f.jsx("button",{onClick:w=>{w.stopPropagation(),w.preventDefault(),a(!i)},className:"p-1 rounded-full text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-light-bg-page dark:hover:bg-dark-bg-page",disabled:u,children:u?f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):f.jsx(Kv,{className:"w-4 h-4"})}),i&&f.jsxs("div",{className:"absolute right-0 top-full mt-1 w-40 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-md shadow-lg z-10 py-1",children:[f.jsxs("button",{onClick:w=>{w.stopPropagation(),e(),a(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[f.jsx(hi,{className:"w-3.5 h-3.5"})," Rename"]}),r.projectId?f.jsxs("button",{onClick:w=>{w.stopPropagation(),v(),a(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[f.jsx(Yr,{className:"w-3.5 h-3.5"})," Remove from Project"]}):f.jsxs("button",{onClick:w=>{w.stopPropagation(),l(!0),a(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[f.jsx(Ka,{className:"w-3.5 h-3.5"})," Add to Project"]}),f.jsxs("button",{onClick:w=>{w.stopPropagation(),t(),a(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-red-600 dark:text-red-500 hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[f.jsx(Qa,{className:"w-3.5 h-3.5"})," Delete"]})]})]}),f.jsx(T9,{isOpen:s,onClose:()=>l(!1),onSelectProject:k,currentProjectId:r.projectId,projects:g})]})},N9=[{id:"static-blog-post-wizard",title:"Blog Post Wizard",category:"Content Marketing",description:"Generate long-form blog posts, outlines, and SEO-ready drafts tailored to your target audience.",active:!0,featured:!0,is_pro:!1,primaryModel:"gpt-4o-mini",fallbackModels:["claude-3-haiku"],promptInstructions:"You are a specialist blog writing assistant who gathers context and delivers detailed, structured drafts.",questions:[{id:"topic",label:"What is the main topic?",type:"text",placeholder:"e.g. AI for small business marketing",required:!0,order:1},{id:"audience",label:"Who is the target audience?",type:"text",placeholder:"e.g. startup founders",required:!0,order:2},{id:"tone",label:"Preferred tone",type:"select",options:["Professional","Conversational","Playful","Authoritative"],required:!1,order:3}],searchSummary:"blog article writer long-form content marketing inbound seo outlines audience tone",keywords:["blog","article","long form","seo","content marketing"]},{id:"static-sales-email-studio",title:"Sales Email Studio",category:"Sales Enablement",description:"Craft multi-touch outbound sequences, personalized cold emails, and follow-ups that convert.",active:!0,featured:!1,is_pro:!0,primaryModel:"claude-3-sonnet",fallbackModels:["gpt-4o-mini"],promptInstructions:"You are a revenue-focused copywriter who delivers concise, high-converting sales emails.",questions:[{id:"offer",label:"What are you selling?",type:"textarea",placeholder:"Describe the product or service",required:!0,order:1},{id:"persona",label:"Who is the buyer persona?",type:"text",placeholder:"e.g. VP of Marketing at SaaS startups",required:!0,order:2},{id:"cta",label:"Desired call-to-action",type:"text",placeholder:"Book a discovery call",required:!1,order:3}],searchSummary:"outbound email sequences cold outreach personalization follow up cadence conversion sales enablement",keywords:["sales","email","outbound","sequence","prospecting"]},{id:"static-social-media-batch",title:"Social Media Batch Planner",category:"Social Media",description:"Plan and generate a month's worth of social posts with platform-specific copy and asset prompts.",active:!0,featured:!0,is_pro:!1,primaryModel:"gpt-4o-mini",fallbackModels:["claude-3-haiku"],promptInstructions:"You are a social strategist who balances brand voice with channel best practices.",questions:[{id:"campaign",label:"Campaign or theme",type:"text",placeholder:"e.g. Spring product launch",required:!0,order:1},{id:"platforms",label:"Primary platforms",type:"select",options:["LinkedIn","Instagram","TikTok","Facebook","X / Twitter"],required:!0,order:2},{id:"voice",label:"Brand voice",type:"text",placeholder:"Bold and playful",required:!1,order:3}],searchSummary:"social media calendar batch planning multi platform captions assets scheduler brand voice community",keywords:["social","calendar","posts","instagram","linkedin"]}];class Nc{constructor(){this.cache=null,this.cacheSource="static",this.searchDocuments=[],this.staticTools=[],this.staticMetadata=new Map,this.api=Kn.getInstance(),this.bootstrapStaticDataset()}static getInstance(){return Nc.instance||(Nc.instance=new Nc),Nc.instance}bootstrapStaticDataset(){const e=N9.map(t=>{const{searchSummary:n,keywords:i,questions:a,...s}=t,l=(a||[]).map((u,d)=>({...u,order:u.order??d+1,required:u.required??!1}));return(n||i)&&this.staticMetadata.set(t.id,{searchSummary:n,keywords:i}),{...s,questions:l}});this.staticTools=e,this.rebuildSearchDocuments(e,"static")}rebuildSearchDocuments(e,t){this.searchDocuments=e.map(n=>({tool:n,text:this.composeSearchText(n,t)}))}composeSearchText(e,t){const n=(e.questions||[]).map(l=>l.label).join(" "),i=e.promptInstructions??"",a=this.staticMetadata.get(e.id),s=a?[a.searchSummary,...a.keywords||[]].join(" "):"";return[e.title,e.category,e.description,i,n,s,t==="supabase"?"":"local demo dataset"].filter(Boolean).join(" ").toLowerCase()}async getTools(e={}){const{allowStale:t=!0}=e;if(this.cache&&t)return{tools:this.cache,source:this.cacheSource};if(Xt()){let n;try{const i=await this.api.getAllTools();if(i.success&&i.data&&i.data.length>0)return this.cache=i.data,this.cacheSource="supabase",this.rebuildSearchDocuments(i.data,"supabase"),{tools:i.data,source:"supabase"};n=i.error||"No tools returned from admin endpoint",Ae.warn("ToolRepository: Admin tools endpoint returned no data, attempting app endpoint fallback",{error:n})}catch(i){n=i instanceof Error?i.message:"Unknown error",Ae.warn("ToolRepository: Admin tools fetch failed, attempting app endpoint fallback",{error:n})}try{const i=await this.api.getTools();if(i.success&&i.data)return n&&Ae.info("ToolRepository: Fetched tools from app endpoint after admin fetch failure",{fallbackReason:n}),this.cache=i.data,this.cacheSource="supabase",this.rebuildSearchDocuments(i.data,"supabase"),{tools:i.data,source:"supabase"};Ae.warn("ToolRepository: App tools endpoint returned no data, falling back to static dataset",{error:i.error})}catch(i){Ae.warn("ToolRepository: App tools fetch failed, falling back to static dataset",{error:i instanceof Error?i.message:"Unknown error"})}}return this.cache=this.staticTools,this.cacheSource="static",this.rebuildSearchDocuments(this.staticTools,"static"),{tools:this.staticTools,source:"static"}}async getSearchableTools(e={}){const t=await this.getTools(e);return(this.cache!==t.tools||this.searchDocuments.length===0)&&this.rebuildSearchDocuments(t.tools,t.source),{tools:t.tools,documents:this.searchDocuments,source:t.source}}async getToolById(e){var n;this.cache||await this.getTools();const t=(n=this.cache)==null?void 0:n.find(i=>i.id===e);return t||(this.staticTools.find(i=>i.id===e)??null)}getMetadata(e){return this.staticMetadata.get(e)}invalidateCache(){this.cache=null}}const Pc=()=>{const[r,e]=Q.useState([]),[t,n]=Q.useState(!0),[i,a]=Q.useState(null),[s,l]=Q.useState("static"),u=Kn.getInstance(),d=Nc.getInstance(),h=ax(),g=Ir(),b=async(A={})=>{try{n(!0),a(null);const{tools:N,source:E}=await d.getTools({allowStale:A.allowStale??!0});e(N),l(E)}catch(N){const E=N instanceof Error?N.message:"Failed to load tools";Ae.error({message:"Tool repository failed to hydrate tools",code:"TOOL_REPOSITORY_ERROR",details:E,component:"useTools",severity:"error"}),a(E),e([])}finally{n(!1)}};Q.useEffect(()=>{b()},[]);const x=async A=>{try{const N=await u.createTool(A);if(N.success&&N.data)return g.success("Tool created successfully!"),d.invalidateCache(),await b({allowStale:!1}),N.data;throw new Error(N.error||"Failed to create tool")}catch(N){throw g.error(`Failed to create tool: ${N instanceof Error?N.message:"Unknown error"}`),N}},k=async(A,N)=>{try{const E=await u.updateTool(A,N);if(E.success&&E.data)return g.success("Tool updated successfully."),d.invalidateCache(),await b({allowStale:!1}),E.data;throw new Error(E.error||"Failed to update tool")}catch(E){throw g.error(`Failed to update tool: ${E instanceof Error?E.message:"Unknown error"}`),E}},v=async A=>{if(await h.confirm({title:"Delete Tool",message:"Are you sure you want to delete this tool? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",variant:"danger"}))try{const E=await u.deleteTool(A);if(E.success)g.success("Tool deleted successfully."),d.invalidateCache(),await b({allowStale:!1});else throw new Error(E.error||"Failed to delete tool")}catch(E){g.error(`Failed to delete tool: ${E instanceof Error?E.message:"Unknown error"}`)}},w=r.filter(A=>A.active),D=r.filter(A=>A.active&&A.featured);return{tools:w,allTools:r,featuredTools:D,toolsByCategory:A=>w.filter(N=>N.category===A),loading:t,error:i,dataSource:s,refetch:A=>b(A),createTool:x,updateTool:k,deleteTool:v}},U9=()=>{const{openChatSearch:r}=Ca();return f.jsxs("div",{className:"relative my-4",children:[f.jsx(Sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-light-text-tertiary dark:text-dark-text-tertiary"}),f.jsx("button",{onClick:r,className:"w-full pl-9 pr-3 py-2 text-sm rounded-sm border border-light-border dark:border-dark-border bg-light-bg-component dark:bg-dark-bg-component text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page focus:ring-2 focus:ring-primary-accent focus:outline-none text-left transition-colors",children:"Search conversations..."})]})},R9=({to:r,icon:e,label:t})=>{const n=di(),i=n.pathname===r||r!=="/"&&n.pathname.startsWith(r);return f.jsxs(Rc,{to:r,className:`flex items-center gap-3 px-2.5 py-2 rounded-sm text-sm font-medium transition-colors ${i?"bg-light-bg-page dark:bg-dark-bg-page text-light-text-primary dark:text-dark-text-primary":"text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-page dark:hover:bg-dark-bg-page hover:text-light-text-primary dark:hover:text-dark-text-primary"}`,children:[e,f.jsx("span",{children:t})]})},j9=()=>{const[r,e]=Q.useState(!1),[t,n]=Q.useState(!1),i=Q.useRef(null),{profile:a}=ct(),s=ka.getInstance(),l=Fr();Q.useEffect(()=>{const x=k=>{i.current&&!i.current.contains(k.target)&&e(!1)};return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[]);const u=async()=>{n(!0);try{await s.signOut()}catch(x){console.error("Logout failed:",x)}finally{n(!1),e(!1)}},d=()=>{l("/settings"),e(!1)},h=()=>{window.open("https://www.skool.com/artemo-user-group-3561","_blank"),e(!1)},g=x=>x?x.split(" ").map(k=>k[0]).join("").toUpperCase().slice(0,2):"U",b=x=>x?x.split(" ")[0]:"User";return f.jsxs("div",{className:"relative",ref:i,children:[f.jsxs("div",{className:`absolute bottom-full left-0 w-full mb-2 p-2 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-md shadow-lg transition-all duration-200 ${r?"opacity-100 visible translate-y-0":"opacity-0 invisible translate-y-2"}`,children:[f.jsxs("button",{onClick:d,className:"flex items-center gap-3 w-full px-3 py-2 text-sm rounded-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-sidebar hover:text-light-text-primary dark:hover:text-dark-text-primary text-left",children:[f.jsx(Bc,{className:"w-4 h-4"}),"Settings"]}),f.jsxs("button",{onClick:h,className:"flex items-center gap-3 w-full px-3 py-2 text-sm rounded-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-sidebar hover:text-light-text-primary dark:hover:text-dark-text-primary text-left",children:[f.jsx(HR,{className:"w-4 h-4"}),"Get Help"]}),f.jsx("div",{className:"h-px bg-light-border dark:bg-dark-border my-2"}),f.jsxs("button",{onClick:u,disabled:t,className:"flex items-center gap-3 w-full px-3 py-2 text-sm rounded-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-sidebar hover:text-light-text-primary dark:hover:text-dark-text-primary text-left disabled:opacity-50",children:[f.jsx(qR,{className:"w-4 h-4"}),t?"Logging out...":"Log Out"]})]}),f.jsxs("div",{className:"flex items-center gap-3 cursor-pointer border-t border-light-border dark:border-dark-border -mx-4 px-4 pt-4",onClick:()=>e(!r),children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-accent flex items-center justify-center font-semibold text-text-on-accent",children:g(a==null?void 0:a.full_name)}),f.jsx("div",{className:"flex-grow",children:f.jsxs("p",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:[b(a==null?void 0:a.full_name),"'s Workspace"]})})]})]})},Gw=({title:r,icon:e,children:t,headerAction:n})=>{const[i,a]=Q.useState(!0);return f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between w-full px-2.5 py-2 text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-page dark:hover:bg-dark-bg-page hover:text-light-text-primary dark:hover:text-dark-text-primary rounded-sm",children:[f.jsxs("button",{onClick:()=>a(!i),className:"flex items-center gap-3 flex-grow text-left",children:[e,f.jsx("span",{children:r}),f.jsx(sx,{className:`w-4 h-4 ml-auto transition-transform ${i?"rotate-180":""}`})]}),n&&f.jsx("div",{className:"ml-2",children:n})]}),i&&f.jsx("div",{className:"pl-4 pt-2 pb-1 space-y-1",children:t})]})},F9=({onRename:r,onDelete:e})=>{const[t,n]=Q.useState(!1),i=Q.useRef(null);return Q.useEffect(()=>{const a=s=>{i.current&&!i.current.contains(s.target)&&n(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),f.jsxs("div",{className:"relative",ref:i,children:[f.jsx("button",{onClick:a=>{a.stopPropagation(),a.preventDefault(),n(!t)},className:"p-1 rounded-full text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-light-bg-page dark:hover:bg-dark-bg-page",children:f.jsx(Kv,{className:"w-4 h-4"})}),t&&f.jsxs("div",{className:"absolute right-0 top-full mt-1 w-32 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-md shadow-lg z-10 py-1",children:[f.jsxs("button",{onClick:a=>{a.stopPropagation(),r(),n(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[f.jsx(hi,{className:"w-3.5 h-3.5"})," Rename"]}),f.jsxs("button",{onClick:a=>{a.stopPropagation(),e(),n(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-red-600 dark:text-red-500 hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[f.jsx(Qa,{className:"w-3.5 h-3.5"})," Delete"]})]})]})},I9=({projects:r,chatHistory:e,onInitiateToolActivation:t})=>{const{isSidebarOpen:n,favoriteTools:i,recentTools:a,openModal:s,setItemToRename:l}=Ca(),{tools:u}=Pc(),d=Fr(),h=[{to:"/",icon:f.jsx(WR,{className:"w-4 h-4"}),label:"Dashboard"},{to:"/tools",icon:f.jsx(_r,{className:"w-4 h-4"}),label:"All Tools"},{to:"/profiles",icon:f.jsx(Ko,{className:"w-4 h-4"}),label:"Profiles"},{to:"/projects",icon:f.jsx(Yr,{className:"w-4 h-4"}),label:"All Projects"},{to:"/history",icon:f.jsx(rv,{className:"w-4 h-4"}),label:"History"}],g=i.map(x=>u.find(k=>k.id===x)).filter(Boolean),b=a.map(x=>u.find(k=>k.id===x)).filter(Boolean);return f.jsxs("aside",{className:`fixed lg:relative top-0 left-0 h-full w-[280px] bg-light-bg-sidebar dark:bg-dark-bg-sidebar border-r border-light-border dark:border-dark-border flex flex-col p-4 z-50 transform transition-transform duration-300 ease-in-out ${n?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[f.jsxs("div",{className:"flex-grow overflow-y-auto pr-1",children:[f.jsx(Rc,{to:"/",className:"flex items-center p-2 mb-6",children:f.jsx(yA,{className:"h-8"})}),f.jsxs("button",{onClick:s,className:"flex items-center justify-center gap-2 w-full p-2.5 mb-4 rounded-sm border-none text-sm font-medium cursor-pointer bg-primary-accent text-text-on-accent hover:opacity-85 transition-opacity",children:[f.jsx(Ka,{className:"w-4 h-4"}),f.jsx("span",{children:"New Project"})]}),f.jsx(U9,{}),f.jsx("nav",{className:"flex flex-col gap-1",children:h.map(x=>f.jsx(R9,{...x},x.to))}),f.jsxs("div",{className:"my-2 space-y-1",children:[f.jsx(Gw,{title:"Favorite Tools",icon:f.jsx(co,{className:"w-4 h-4 text-yellow-500"}),children:g.length>0?g.map(x=>f.jsx("a",{href:"#",onClick:k=>{k.preventDefault(),t(x)},className:"block truncate text-sm text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary p-1 rounded-sm",children:x.title},x.id)):f.jsx("span",{className:"block text-sm text-light-text-tertiary dark:text-dark-text-tertiary p-1",children:"No favorite tools yet."})}),f.jsx(Gw,{title:"Recent Tools",icon:f.jsx(rv,{className:"w-4 h-4"}),children:b.length>0?b.map(x=>f.jsx("a",{href:"#",onClick:k=>{k.preventDefault(),t(x)},className:"block truncate text-sm text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary p-1 rounded-sm",children:x.title},x.id)):f.jsx("span",{className:"block text-sm text-light-text-tertiary dark:text-dark-text-tertiary p-1",children:"No recent tools."})}),f.jsx(Gw,{title:"Recent History",icon:f.jsx(Yr,{className:"w-4 h-4"}),children:e.length>0?e.slice(0,10).map(x=>{var k;return f.jsxs("div",{className:"group relative text-sm text-light-text-tertiary dark:text-dark-text-tertiary p-1.5 rounded-sm hover:bg-light-bg-page dark:hover:bg-dark-bg-page cursor-pointer",children:[f.jsxs("div",{onClick:()=>d(`/chat/${x.id}`),children:[f.jsx("p",{className:"font-medium text-light-text-secondary dark:text-dark-text-secondary truncate pr-6",children:x.toolTitle}),f.jsxs("p",{className:"truncate italic",children:['"',((k=x.messages.find(v=>v.sender==="user"))==null?void 0:k.text)||"...",'"']}),f.jsx("p",{className:"opacity-70",children:new Date(x.timestamp).toLocaleDateString()}),x.projectName&&f.jsxs("p",{className:"text-xs text-primary-accent",children:[" ",x.projectName]})]}),f.jsx("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx(C9,{chatItem:x,onRename:()=>l({id:x.id,name:x.toolTitle,type:"chat"}),onDelete:()=>{},onAddToProject:v=>{console.log("Add chat to project:",x.id,v)}})})]},x.id)}):f.jsx("span",{className:"block text-sm text-light-text-tertiary dark:text-dark-text-tertiary p-1",children:"No chat history."})})]}),f.jsx("div",{className:"h-px bg-light-border dark:bg-dark-border my-2"}),f.jsx("div",{className:"mt-4 flex flex-col gap-1",children:r.map(x=>f.jsxs("div",{className:"group flex items-center justify-between text-sm font-medium rounded-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-page dark:hover:bg-dark-bg-page hover:text-light-text-primary dark:hover:text-dark-text-primary",children:[f.jsxs(Rc,{to:`/projects/${x.id}`,className:"flex-grow flex items-center gap-3 px-2.5 py-2 text-left",children:[f.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center",style:{backgroundColor:x.color},children:f.jsx(Yr,{className:"w-3 h-3 text-white"})}),f.jsx("span",{className:"truncate",children:x.name})]}),f.jsx("div",{className:"pr-2 opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx(F9,{onRename:()=>l({id:x.id,name:x.name,type:"project"}),onDelete:()=>{}})})]},x.id))})]}),f.jsxs("footer",{className:"flex-shrink-0",children:[f.jsx("div",{className:"flex flex-col gap-1 mb-4",children:f.jsxs("a",{href:"https://www.skool.com/artemo-user-group-3561",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-2.5 py-2 rounded-sm text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-page dark:hover:bg-dark-bg-page hover:text-light-text-primary dark:hover:text-dark-text-primary",children:[f.jsx(Fs,{className:"w-4 h-4"}),f.jsxs("span",{children:["Join our"," ",f.jsx("span",{className:"text-primary-accent hover:underline",children:"community"})]})]})}),f.jsx(j9,{})]})]})},i5=({selectedProfileId:r,onSelectProfile:e,onCreateNew:t,className:n="",label:i="Profile",useGlobalState:a=!1})=>{const[s,l]=Q.useState(!1),u=Q.useRef(null),{getClientProfiles:d,activeClientProfileId:h,setActiveClientProfileId:g}=ct(),b=d(),x=a?h:r,k=x?b.find(D=>D.id===x):null;Q.useEffect(()=>{const D=_=>{u.current&&!u.current.contains(_.target)&&l(!1)};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[]);const v=D=>{a?g((D==null?void 0:D.id)||null):e&&e(D),l(!1)},w=()=>{t&&t(),l(!1)};return f.jsxs("div",{className:`relative ${n}`,ref:u,children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary mb-2",children:i}),f.jsxs("button",{onClick:()=>l(!s),className:"flex items-center justify-between w-full px-3 py-2 text-sm border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Ko,{className:"w-4 h-4 text-light-text-tertiary dark:text-dark-text-tertiary"}),f.jsx("span",{className:"truncate",children:k?k.name:"None"})]}),f.jsx(sx,{className:`w-4 h-4 text-light-text-tertiary dark:text-dark-text-tertiary transition-transform ${s?"rotate-180":""}`})]}),s&&f.jsx("div",{className:"absolute top-full left-0 mt-2 w-full bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-md shadow-lg z-20 max-h-60 overflow-y-auto",children:f.jsxs("div",{className:"p-2",children:[f.jsxs("button",{onClick:()=>v(null),className:`flex items-center justify-between w-full text-left px-3 py-2 text-sm rounded-sm transition-colors ${k?"text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page":"bg-primary-accent/20 text-light-text-primary dark:text-dark-text-primary"}`,children:[f.jsx("span",{children:"None"}),!k&&f.jsx(hm,{className:"w-4 h-4 text-primary-accent"})]}),b.map(D=>f.jsxs("button",{onClick:()=>v(D),className:`flex items-center justify-between w-full text-left px-3 py-2 text-sm rounded-sm transition-colors ${(k==null?void 0:k.id)===D.id?"bg-primary-accent/20 text-light-text-primary dark:text-dark-text-primary":"text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page"}`,children:[f.jsxs("div",{className:"flex items-center gap-2 flex-grow min-w-0",children:[f.jsx(Ko,{className:"w-4 h-4 flex-shrink-0"}),f.jsx("span",{className:"truncate",children:D.name})]}),(k==null?void 0:k.id)===D.id&&f.jsx(hm,{className:"w-4 h-4 text-primary-accent flex-shrink-0"})]},D.id)),t&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"h-px bg-light-border dark:border-dark-border my-2"}),f.jsxs("button",{onClick:w,className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm text-primary-accent hover:bg-primary-accent/10 rounded-sm transition-colors",children:[f.jsx(Ka,{className:"w-4 h-4"}),f.jsx("span",{children:"Create new profile"})]})]})]})})]})},O9=({isOpen:r,onClose:e,onCreate:t})=>{const[n,i]=Q.useState(""),[a,s]=Q.useState("#008F6B"),[l,u]=Q.useState(null),{getDefaultClientProfile:d}=ct(),h=[{name:"Teal",value:"#008F6B"},{name:"Blue",value:"#3B82F6"},{name:"Purple",value:"#8B5CF6"},{name:"Pink",value:"#EC4899"},{name:"Red",value:"#EF4444"},{name:"Orange",value:"#F97316"},{name:"Yellow",value:"#EAB308"},{name:"Green",value:"#22C55E"},{name:"Indigo",value:"#6366F1"},{name:"Gray",value:"#6B7280"},{name:"Emerald",value:"#10B981"},{name:"Cyan",value:"#06B6D4"}];Tn.useEffect(()=>{r&&u(null)},[r]);const g=()=>{t(n||"Untitled Project",a,l||void 0),i(""),s("#008F6B"),u(null)},b=()=>{i(""),s("#008F6B"),u(null),e()};return r?f.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-[1000] flex items-center justify-center p-4 transition-opacity",onClick:b,children:f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-lg transition-transform transform scale-100",onClick:x=>x.stopPropagation(),children:[f.jsxs("div",{className:"p-4 lg:p-6 border-b border-light-border dark:border-dark-border flex justify-between items-center",children:[f.jsx("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Create New Project"}),f.jsx("button",{onClick:b,className:"text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:f.jsx(Ms,{className:"w-6 h-6"})})]}),f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{htmlFor:"project-name-input",className:"block font-medium text-light-text-primary dark:text-dark-text-primary mb-2 text-base",children:"Project Name"}),f.jsx("input",{type:"text",id:"project-name-input",value:n,onChange:x=>i(x.target.value),className:"w-full p-2.5 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-sm text-light-text-primary dark:text-dark-text-primary text-base focus:border-primary-accent focus:ring-2 focus:ring-primary-accent/20 outline-none",placeholder:"e.g., Q4 Email Campaign"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block font-medium text-light-text-primary dark:text-dark-text-primary mb-2 text-base",children:"Project Color"}),f.jsx("div",{className:"grid grid-cols-6 gap-2",children:h.map(x=>f.jsx("button",{type:"button",onClick:()=>s(x.value),className:`relative w-8 h-8 rounded-md border-2 transition-all duration-200 hover:scale-110 ${a===x.value?"border-gray-800 dark:border-white shadow-lg":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,style:{backgroundColor:x.value},title:x.name,children:a===x.value&&f.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:f.jsx("svg",{className:"w-4 h-4 text-white drop-shadow-lg",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})},x.value))})]}),f.jsxs("div",{className:"mt-6",children:[f.jsx(i5,{selectedProfileId:(l==null?void 0:l.id)||null,onSelectProfile:u,label:"Associate with Profile"}),f.jsx("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary mt-1",children:"Optional: Link this project to a specific profile for context"})]})]}),f.jsxs("div",{className:"p-4 lg:p-6 border-t border-light-border dark:border-dark-border flex justify-end gap-3",children:[f.jsx("button",{onClick:b,className:"px-5 py-2 rounded-sm text-base font-medium bg-light-bg-sidebar dark:bg-dark-bg-component border border-light-border dark:border-dark-border text-light-text-primary dark:text-dark-text-primary hover:opacity-85",children:"Cancel"}),f.jsx("button",{onClick:g,className:"px-5 py-2 rounded-sm text-base font-medium bg-primary-accent text-text-on-accent hover:opacity-85",children:"Create Project"})]})]})}):null},kp=()=>{const[r,e]=Q.useState([]),[t,n]=Q.useState(!0),[i,a]=Q.useState(null),s=Kn.getInstance(),l=async()=>{n(!0),a(null);try{console.log("useCategories: Starting to fetch categories");const b=await s.getCategories();console.log("useCategories: API response received:",b),b.success&&b.data?(e(b.data.sort((x,k)=>x.displayOrder-k.displayOrder)),console.log("useCategories: Categories set successfully:",b.data.length)):(console.log("useCategories: API response failed:",b.error),a(b.error||"Failed to fetch categories"))}catch(b){console.log("useCategories: Exception caught:",b);const x=b instanceof Error?b.message:"Unknown error";x.includes("Failed to fetch")||x.includes("TypeError")||x.includes("session is not stable")?(console.log("useCategories: Network error, Supabase likely not configured"),e([])):a("Network error occurred")}finally{console.log("useCategories: Fetch completed, setting loading to false"),n(!1)}};Q.useEffect(()=>{l()},[]);const u=async b=>{const x=await s.createCategory(b);if(x.success&&x.data)return await l(),x.data;throw new Error(x.error||"Failed to create category")},d=async(b,x)=>{const k=await s.updateCategory(b,x);if(k.success&&k.data)return await l(),k.data;throw new Error(k.error||"Failed to update category")},h=async b=>{const x=await s.deleteCategory(b);if(x.success)await l();else throw new Error(x.error||"Failed to delete category")};return{categories:Q.useMemo(()=>r.filter(b=>b.active),[r]),allCategories:r,loading:t,error:i,refetch:l,createCategory:u,updateCategory:d,deleteCategory:h}},M9=({tool:r,onClose:e,onStart:t,onSetDontShowAgain:n})=>{const[i,a]=Q.useState(!1),{categories:s}=kp();if(!r)return null;const u=(()=>{const h=s.find(b=>b.name===r.category);return h!=null&&h.iconName&&{Settings:Bc,Box:_r,Edit:hi,Mail:Gv,File:Cd,Mic:$v,Activity:Ed,Users:Fs}[h.iconName]||_r})(),d=()=>{i&&n(r.id,!0),t(r)};return f.jsxs("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/60 backdrop-blur-md z-[1000] flex items-center justify-center p-4 transition-opacity animate-[fadeIn_0.2s_ease-out]",onClick:e,children:[f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-2xl w-full max-w-2xl transition-transform transform scale-100 animate-[scaleUp_0.2s_ease-out] text-center",onClick:h=>h.stopPropagation(),children:[f.jsxs("div",{className:"p-8 lg:p-12",children:[f.jsx(u,{className:"w-16 h-16 text-primary-accent mx-auto mb-5"}),f.jsx("h3",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary mb-3",children:r.title}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-6 text-lg leading-relaxed",children:r.description}),f.jsx("div",{className:"mb-6",children:f.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:[r.questions.length>0&&f.jsxs("span",{children:[r.questions.length," questions"]}),r.featured&&f.jsx("span",{className:"text-yellow-600 dark:text-yellow-400",children:" Featured"})]})}),f.jsx("a",{href:"#",className:"text-primary-accent font-medium text-base hover:underline mb-8 inline-block",children:"Watch tutorial"}),f.jsxs("button",{onClick:d,className:"w-full px-5 py-3 rounded-md text-lg font-medium bg-primary-accent text-text-on-accent hover:opacity-85 transition-opacity",children:["Start ",r.title]}),f.jsx("div",{className:"mt-6 text-left",children:f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:[f.jsx("input",{type:"checkbox",checked:i,onChange:h=>a(h.target.checked),className:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 dark:bg-dark-bg-component text-primary-accent focus:ring-primary-accent"}),"Don't show this again for this tool"]})})]}),f.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 rounded-full text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-black/10 dark:hover:bg-white/10",children:f.jsx(Ms,{className:"w-6 h-6"})})]}),f.jsx("style",{children:`
                @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
                @keyframes scaleUp { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
            `})]})},Dp=()=>{const r=ax(),e=Ir(),[t,n]=Q.useState([]),[i,a]=Q.useState(!0),[s,l]=Q.useState(null),{user:u}=ct(),d=Kn.getInstance(),h=async()=>{var w;if(!u){a(!1);return}if(!Xt()){console.log("useChatHistory: Supabase not connected, using empty chat history"),n([]),a(!1);return}a(!0),l(null);try{const D=await d.getChatSessions(u.id);D.success&&D.data?(n(D.data),Ae.info("Chat history fetched successfully",{component:"useChatHistory",sessionCount:D.data.length,userId:u.id})):(w=D.error)!=null&&w.includes("session is not stable")?(console.log("useChatHistory: Session not stable, will retry automatically"),n([])):l(D.error||"Failed to fetch chat history")}catch(D){console.log("useChatHistory: Error fetching chat history:",D);const _=D instanceof Error?D.message:"Unknown error";_.includes("session is not stable")?(console.log("useChatHistory: Session not stable, will retry automatically"),n([])):_.includes("Failed to fetch")||_.includes("TypeError")?(console.log("useChatHistory: Network connectivity issue - Supabase may not be configured"),n([])):l("Network error occurred")}finally{a(!1)}};return Q.useEffect(()=>{u?h():a(!1)},[u]),{chatHistory:t,loading:i,error:s,refetch:h,saveChatSession:async w=>{if(!u)throw new Error("User not authenticated");if(!Xt())throw new Error("Supabase not connected");try{let D;if(w.id?D=await d.updateChatSession(w.id,{title:w.title,messages:w.messages,projectId:w.projectId}):D=await d.saveChatSession({userId:u.id,toolId:w.toolId,projectId:w.projectId,title:w.title,messages:w.messages}),D.success)await h();else throw new Error(D.error||"Failed to save chat session");return D}catch(D){throw console.error("useChatHistory: Error in saveChatSession:",D),e.error(`Failed to save chat session: ${D instanceof Error?D.message:"Unknown error"}`),D}},clearHistory:async()=>{if(!u)return;if(await r.confirm({title:"Clear All History",message:"Are you sure you want to delete ALL chat history? This action cannot be undone.",confirmText:"Delete All",cancelText:"Cancel",variant:"danger"})&&Xt())try{const D=await d.deleteAllChatSessions(u.id);if(D.success)e.success("Chat history cleared successfully."),await h();else throw new Error(D.error||"Failed to clear history")}catch(D){console.error("Failed to clear all chat history:",D),e.error(`Failed to clear history: ${D instanceof Error?D.message:"Unknown error"}`)}},deleteChat:async w=>{if(!Xt()){e.error("Cannot delete chat, connection not available.");return}const D=t.find(A=>A.id===w);if(await r.confirm({title:"Delete Chat",message:`Are you sure you want to delete the chat "${(D==null?void 0:D.toolTitle)??"this chat"}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger"}))try{const A=await d.deleteChatSession(w);if(A.success)e.success("Chat deleted successfully."),await h();else throw new Error(A.error||"Failed to delete chat session")}catch(A){console.error("Failed to delete chat:",A),e.error(`Failed to delete chat: ${A instanceof Error?A.message:"Unknown error"}`)}},updateChatSession:async(w,D)=>{if(!Xt())return e.error("Cannot update chat, connection not available."),{success:!1,error:"Supabase not connected"};try{const _=await d.updateChatSession(w,D);if(_.success)e.success("Chat updated successfully."),await h();else throw new Error(_.error||"Failed to update chat session");return _}catch(_){throw console.error("useChatHistory: Exception during chat session update:",_),e.error(`Failed to update chat: ${_ instanceof Error?_.message:"Unknown error"}`),_}},addChatToProject:async(w,D)=>{if(!Xt())return e.error("Cannot add to project, connection not available."),{success:!1,error:"Supabase not connected"};try{const _=await d.updateChatSession(w,{projectId:D});if(_.success)return e.success("Chat added to project."),await h(),{success:!0,data:_.data};throw new Error(_.error||"Failed to add chat to project")}catch(_){return e.error(`Failed to add chat to project: ${_ instanceof Error?_.message:"Unknown error"}`),{success:!1,error:_ instanceof Error?_.message:"Unknown error"}}}}},L9=({chat:r,searchTerm:e,onView:t,onResume:n})=>{var l,u;const i=((l=r.messages.find(d=>d.sender==="user"))==null?void 0:l.text)||"",a=((u=r.messages.find(d=>d.sender==="ai"))==null?void 0:u.text)||"",s=(d,h)=>{if(!h.trim())return d;const g=new RegExp(`(${h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return d.split(g).map((x,k)=>g.test(x)?f.jsx("mark",{className:"bg-yellow-200 dark:bg-yellow-800/50 text-light-text-primary dark:text-dark-text-primary",children:x},k):x)};return f.jsxs("div",{className:"p-4 border-b border-light-border dark:border-dark-border last:border-b-0",children:[f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(Sd,{className:"w-5 h-5 text-primary-accent flex-shrink-0 mt-1"}),f.jsxs("div",{className:"flex-grow min-w-0 mb-3",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary truncate",children:s(r.toolTitle,e)}),r.projectName&&f.jsxs("span",{className:"flex items-center gap-1 text-xs text-primary-accent bg-primary-accent/10 px-2 py-1 rounded-full",children:[f.jsx(Yr,{className:"w-3 h-3"}),r.projectName]})]}),i&&f.jsxs("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary mb-1 line-clamp-2",children:[f.jsx("span",{className:"font-medium",children:"You:"})," ",s(i.substring(0,100),e),i.length>100&&"..."]}),a&&f.jsxs("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary mb-2 line-clamp-2",children:[f.jsx("span",{className:"font-medium",children:"AI:"})," ",s(a.substring(0,100),e),a.length>100&&"..."]}),f.jsxs("div",{className:"flex items-center gap-4 text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:[f.jsx("span",{children:new Date(r.timestamp).toLocaleDateString()}),f.jsxs("span",{children:[r.messages.length," messages"]})]})]})]}),f.jsxs("div",{className:"flex items-center gap-3 ml-8",children:[f.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-3 py-1.5 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity text-sm font-medium",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Continue"]}),f.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-3 py-1.5 bg-light-bg-sidebar dark:bg-dark-bg-component border border-light-border dark:border-dark-border text-light-text-primary dark:text-dark-text-primary rounded-md hover:bg-light-bg-component dark:hover:bg-dark-bg-page transition-colors text-sm",children:[f.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]})]})]})},B9=({isOpen:r,onClose:e,onSelectChat:t,onResumeChat:n})=>{const[i,a]=Q.useState(""),[s,l]=Q.useState(!1),u=Q.useRef(null),{chatHistory:d,loading:h}=Dp();Q.useEffect(()=>{r&&u.current&&setTimeout(()=>{var x;(x=u.current)==null||x.focus()},100)},[r]),Q.useEffect(()=>{r||a("")},[r]);const g=Q.useMemo(()=>{if(!i.trim())return d.slice(0,20);const x=i.toLowerCase();return d.filter(k=>{var v;return k.toolTitle.toLowerCase().includes(x)||(v=k.projectName)!=null&&v.toLowerCase().includes(x)?!0:k.messages.some(w=>w.text.toLowerCase().includes(x))}).slice(0,50)},[d,i]);Q.useEffect(()=>{if(i.trim()){l(!0);const x=setTimeout(()=>{l(!1)},300);return()=>clearTimeout(x)}},[i]);const b=x=>{x.key==="Escape"?e():x.key==="Enter"&&g.length>0&&(n(g[0]),e())};return r?f.jsxs("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/60 backdrop-blur-md z-[1000] flex items-center justify-center p-4 transition-opacity animate-[fadeIn_0.2s_ease-out]",onClick:e,children:[f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-2xl w-full max-w-2xl max-h-[80vh] transition-transform transform scale-100 animate-[scaleUp_0.2s_ease-out] flex flex-col",onClick:x=>x.stopPropagation(),children:[f.jsx("div",{className:"p-6 border-b border-light-border dark:border-dark-border",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Sd,{className:"w-6 h-6 text-primary-accent"}),f.jsx("h3",{className:"font-serif text-2xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Search Conversations"})]}),f.jsx("button",{onClick:e,className:"p-2 rounded-full text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-black/10 dark:hover:bg-white/10 transition-colors",children:f.jsx(Ms,{className:"w-5 h-5"})})]})}),f.jsxs("div",{className:"p-6 border-b border-light-border dark:border-dark-border",children:[f.jsxs("div",{className:"relative",children:[f.jsx(Sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-light-text-tertiary dark:text-dark-text-tertiary"}),f.jsx("input",{ref:u,type:"text",value:i,onChange:x=>a(x.target.value),onKeyDown:b,placeholder:"Search your conversations...",className:"w-full pl-10 pr-4 py-3 text-base border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none"})]}),f.jsx("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary mt-2",children:"Search by tool name, project, or conversation content  Press Enter to select first result  Escape to close"})]}),f.jsx("div",{className:"flex-grow overflow-hidden flex flex-col",children:h?f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-accent mx-auto mb-4"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading conversations..."})]})}):s?f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-accent mx-auto mb-3"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Searching..."})]})}):g.length>0?f.jsxs("div",{className:"overflow-y-auto",children:[f.jsx("div",{className:"p-3",children:f.jsx("p",{className:"text-xs font-medium text-light-text-tertiary dark:text-dark-text-tertiary mb-3 px-1",children:i.trim()?`${g.length} result${g.length===1?"":"s"} found`:`${Math.min(g.length,20)} recent conversations`})}),g.map(x=>f.jsx(L9,{chat:x,searchTerm:i,onView:()=>{t(x),e()},onResume:()=>{n(x),e()}},x.id))]}):i.trim()?f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Sd,{className:"w-12 h-12 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary mb-2",children:"No conversations found"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Try different keywords or check your conversation history"})]})}):d.length===0?f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Sd,{className:"w-12 h-12 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary mb-2",children:"No conversations yet"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Start using AI tools to see your conversation history here"})]})}):f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Sa,{className:"w-12 h-12 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary mb-2",children:"Search your conversations"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Type to search through your chat history"})]})})}),f.jsx("div",{className:"p-4 border-t border-light-border dark:border-dark-border bg-light-bg-sidebar dark:bg-dark-bg-sidebar",children:f.jsxs("div",{className:"flex items-center justify-between text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:[f.jsxs("span",{children:[d.length," total conversation",d.length===1?"":"s"]}),f.jsx("span",{children:"Press Enter to continue first result  Esc to close"})]})})]}),f.jsx("style",{children:`
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes scaleUp { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
      `})]}):null},P9=()=>f.jsx("div",{className:"w-[280px] bg-light-bg-sidebar dark:bg-dark-bg-sidebar border-r border-light-border dark:border-dark-border p-4 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary mb-2",children:"Sidebar temporarily unavailable"}),f.jsx("button",{onClick:()=>window.location.reload(),className:"text-xs text-primary-accent hover:underline",children:"Reload page"})]})}),z9=()=>{const{toggleSidebar:r,theme:e,toggleTheme:t}=Ca();return f.jsxs("header",{className:"lg:hidden flex items-center justify-between p-3 border-b border-light-border dark:border-dark-border bg-light-bg-page dark:bg-dark-bg-page",children:[f.jsx("button",{onClick:r,className:"p-1",children:f.jsx(VR,{className:"w-6 h-6 text-light-text-primary dark:text-dark-text-primary"})}),f.jsx(Rc,{to:"/",className:"flex items-center",children:f.jsx(yA,{className:"h-8"})}),f.jsx("button",{onClick:t,className:"p-1 rounded-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-component hover:text-light-text-primary dark:hover:text-dark-text-primary",children:e==="light"?f.jsx(GR,{className:"w-5 h-5"}):f.jsx(XR,{className:"w-5 h-5"})})]})},W9=()=>{const{theme:r,toggleTheme:e}=Ca();return f.jsx("header",{className:"hidden lg:flex justify-end items-center py-3 px-6 border-b border-light-border dark:border-dark-border flex-shrink-0",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("button",{className:"flex items-center gap-2 p-1 rounded-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-component hover:text-light-text-primary dark:hover:text-dark-text-primary font-medium",children:[f.jsx(HR,{className:"w-5 h-5"}),f.jsx("span",{children:"Help center"})]}),f.jsx("button",{onClick:e,className:"p-1 rounded-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-component hover:text-light-text-primary dark:hover:text-dark-text-primary",children:r==="light"?f.jsx(GR,{className:"w-5 h-5"}):f.jsx(XR,{className:"w-5 h-5"})})]})})},H9=()=>{const{itemToRename:r,setItemToRename:e}=Ca(),[t,n]=Tn.useState(""),{updateProject:i}=wp(),{updateChatSession:a}=Dp();if(Fr(),Tn.useEffect(()=>{r&&n(r.name)},[r]),!r)return null;const s=async()=>{if(t.trim())try{r.type==="project"?await i(r.id,{name:t.trim()}):r.type==="chat"&&await a(r.id,{title:t.trim()}),e(null)}catch(l){console.error("Failed to rename:",l)}};return f.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-[1000] flex items-center justify-center p-4",onClick:()=>e(null),children:f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-md",onClick:l=>l.stopPropagation(),children:[f.jsxs("div",{className:"p-4 lg:p-6 border-b border-light-border dark:border-dark-border flex justify-between items-center",children:[f.jsxs("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:["Rename ",r.type==="project"?"Project":"Chat"]}),f.jsx("button",{onClick:()=>e(null),className:"text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"p-6",children:[f.jsx("label",{htmlFor:"rename-input",className:"block font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Name"}),f.jsx("input",{id:"rename-input",type:"text",value:t,onChange:l=>n(l.target.value),className:"w-full p-2.5 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-sm text-light-text-primary dark:text-dark-text-primary focus:border-primary-accent focus:ring-2 focus:ring-primary-accent/20 outline-none",onKeyDown:l=>l.key==="Enter"&&s(),autoFocus:!0})]}),f.jsxs("div",{className:"p-4 lg:p-6 border-t border-light-border dark:border-dark-border flex justify-end gap-3",children:[f.jsx("button",{onClick:()=>e(null),className:"px-5 py-2 rounded-sm bg-light-bg-sidebar dark:bg-dark-bg-component border border-light-border dark:border-dark-border text-light-text-primary dark:text-dark-text-primary hover:opacity-85",children:"Cancel"}),f.jsx("button",{onClick:s,className:"px-5 py-2 rounded-sm bg-primary-accent text-text-on-accent hover:opacity-85",children:"Save"})]})]})})},q9=()=>{const{isSidebarOpen:r,toggleSidebar:e,isModalOpen:t,closeModal:n,toolForActivation:i,setToolForActivation:a,isChatSearchOpen:s,closeChatSearch:l}=Ca(),{categories:u}=kp(),{projects:d,createProject:h}=wp(),{chatHistory:g}=Dp(),{profile:b}=ct(),x=Fr(),k=_=>{a(_)},v=_=>{x(`/tools/${_.id}`),a(null)},w=async(_,A,N)=>{try{await h(_||"Untitled Project",A,N),n()}catch(E){console.error("Failed to create project:",E)}},D=(_,A)=>{try{const N=JSON.parse(localStorage.getItem("dontShowAgainToolIds")||"[]"),E=new Set(N);A?E.add(_):E.delete(_),localStorage.setItem("dontShowAgainToolIds",JSON.stringify(Array.from(E)))}catch(N){console.error("Failed to update dont show again preference:",N)}};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:`page-overlay fixed inset-0 z-40 bg-black/40 dark:bg-black/50 transition-opacity lg:hidden ${r?"opacity-100 visible":"opacity-0 invisible"}`,onClick:e}),f.jsxs("div",{className:"flex h-screen font-sans",children:[f.jsx(JR,{fallback:f.jsx(P9,{}),children:f.jsx(I9,{projects:d,chatHistory:g,onInitiateToolActivation:k})}),f.jsxs("main",{className:"flex-grow flex flex-col bg-light-bg-page dark:bg-dark-bg-page",children:[f.jsx(z9,{}),f.jsx(W9,{}),f.jsx("div",{className:"flex-grow overflow-y-auto",children:f.jsx(IR,{})})]})]}),(b==null?void 0:b.role)==="admin"&&f.jsx("button",{onClick:()=>x("/admin"),className:"fixed bottom-4 right-4 px-4 py-2 bg-red-600 text-white rounded-md shadow-lg hover:bg-red-700 transition-colors z-50 cursor-pointer",children:"Admin Panel"}),f.jsx(O9,{isOpen:t,onClose:n,onCreate:w,categories:u.map(_=>_.name)}),f.jsx(M9,{tool:i,onClose:()=>a(null),onStart:v,onSetDontShowAgain:D}),f.jsx(H9,{}),f.jsx(B9,{isOpen:s,onClose:l,onSelectChat:_=>{x(`/chat/${_.id}`),l()},onResumeChat:_=>{x(`/tools/${_.toolId}`,{state:{existingChatSession:_}}),l()}})]})},V9=({to:r,icon:e,label:t})=>{const i=di().pathname===r;return f.jsxs(Rc,{to:r,className:`flex items-center gap-3 px-4 py-3 rounded-md text-sm font-medium transition-colors ${i?"bg-primary-accent text-text-on-accent":"text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-page dark:hover:bg-dark-bg-page hover:text-light-text-primary dark:hover:text-dark-text-primary"}`,children:[e,f.jsx("span",{children:t})]})},X9=()=>{const[r,e]=Q.useState(!1),t=[{to:"/admin",icon:f.jsx(WR,{className:"w-5 h-5"}),label:"Dashboard"},{to:"/admin/categories",icon:f.jsx(Bc,{className:"w-5 h-5"}),label:"Categories"},{to:"/admin/tools",icon:f.jsx(_r,{className:"w-5 h-5"}),label:"Tools"},{to:"/admin/users",icon:f.jsx(Fs,{className:"w-5 h-5"}),label:"Users"},{to:"/admin/announcements",icon:f.jsx(vA,{className:"w-5 h-5"}),label:"Announcements"}];return f.jsxs("div",{className:"flex h-screen bg-light-bg-primary dark:bg-dark-bg-primary",children:[r&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>e(!1)}),f.jsxs("aside",{className:`
        fixed lg:static inset-y-0 left-0 z-50 w-64 bg-light-bg-secondary dark:bg-dark-bg-secondary border-r border-light-border dark:border-dark-border
        transform ${r?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition-transform duration-300 ease-in-out
        flex flex-col
      `,children:[f.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-light-border dark:border-dark-border",children:[f.jsx(yA,{className:"h-8"}),f.jsx("button",{onClick:()=>e(!1),className:"lg:hidden p-2 rounded-md text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-page dark:hover:bg-dark-bg-page",children:f.jsx(Ms,{className:"w-5 h-5"})})]}),f.jsx("nav",{className:"flex-grow space-y-2",children:t.map(n=>f.jsx(V9,{...n},n.to))}),f.jsx("div",{className:"border-t border-light-border dark:border-dark-border pt-4",children:f.jsxs(Rc,{to:"/",className:"flex items-center gap-3 w-full px-4 py-3 rounded-md text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-page dark:hover:bg-dark-bg-page hover:text-light-text-primary dark:hover:text-dark-text-primary",children:[f.jsx(qR,{className:"w-5 h-5"}),f.jsx("span",{children:"Back to Dashboard"})]})})]}),f.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[f.jsx("header",{className:"lg:hidden bg-light-bg-secondary dark:bg-dark-bg-secondary border-b border-light-border dark:border-dark-border p-4",children:f.jsx("button",{onClick:()=>e(!0),className:"p-2 rounded-md text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-page dark:hover:bg-dark-bg-page",children:f.jsx(VR,{className:"w-6 h-6"})})}),f.jsx("main",{className:"flex-1 overflow-y-auto",children:f.jsx(IR,{})})]})]})};class qh{constructor(){this.repository=Nc.getInstance()}static getInstance(){return qh.instance||(qh.instance=new qh),qh.instance}tokenize(e){return e.toLowerCase().replace(/[^a-z0-9\s]/g," ").split(/\s+/).map(t=>t.trim()).filter(t=>t.length>2)}computeTf(e){const t={};e.forEach(i=>{t[i]=(t[i]||0)+1});const n=e.length||1;return Object.keys(t).forEach(i=>{t[i]=t[i]/n}),t}computeIdf(e){const t={},n=e.length||1;return e.forEach(i=>{new Set(i).forEach(s=>{t[s]=(t[s]||0)+1})}),Object.keys(t).forEach(i=>{t[i]=Math.log((1+n)/(1+t[i]))+1}),t}computeTfIdf(e,t){const n={};return Object.keys(e).forEach(i=>{n[i]=(e[i]||0)*(t[i]||0)}),n}cosineSimilarity(e,t){const n=new Set([...Object.keys(e),...Object.keys(t)]);let i=0,a=0,s=0;return n.forEach(l=>{const u=e[l]||0,d=t[l]||0;i+=u*d,a+=u*u,s+=d*d}),a===0||s===0?0:i/(Math.sqrt(a)*Math.sqrt(s))}buildExplanation(e,t,n){const i=t.length>0?` Key overlaps: ${t.slice(0,3).join(", ")}.`:"";return`Using our ${n}, we recommend ${e.title} for ${e.category.toLowerCase()} work. ${e.description}${i}`}buildSourceLabel(e){return e==="supabase"?"Supabase catalogue snapshot":"local demo catalogue"}async getRecommendation(e){const{documents:t,source:n}=await this.repository.getSearchableTools();if(!e.trim()||t.length===0)return{recommendedTool:null,analysis:"No tools are available yet. Please add tools in the admin panel.",scores:[],sourceLabel:this.buildSourceLabel(n)};const i=t.map(k=>this.tokenize(k.text)),a=this.computeIdf(i),s=i.map(k=>this.computeTfIdf(this.computeTf(k),a)),l=this.tokenize(e);if(l.length===0)return{recommendedTool:null,analysis:"Please provide more detail so we can suggest a tool.",scores:[],sourceLabel:this.buildSourceLabel(n)};const u=this.computeTfIdf(this.computeTf(l),a),h=t.map((k,v)=>({tool:k.tool,similarity:Number(this.cosineSimilarity(u,s[v]).toFixed(4))})).sort((k,v)=>v.similarity-k.similarity),b=h.filter(k=>k.similarity>0)[0]??h[0]??null;if(!b||b.similarity===0)return{recommendedTool:null,analysis:"We could not find a close match. Try adding more context about your goal, audience, or deliverable.",scores:h.slice(0,5),sourceLabel:this.buildSourceLabel(n)};const x=l.filter(k=>{var v;return this.tokenize(((v=t.find(w=>w.tool.id===b.tool.id))==null?void 0:v.text)||"").includes(k)});return{recommendedTool:b.tool,analysis:this.buildExplanation(b.tool,x,this.buildSourceLabel(n)),scores:h.slice(0,5),sourceLabel:this.buildSourceLabel(n)}}}class vu{constructor(){this.recommendationEngine=qh.getInstance(),this.repository=Nc.getInstance()}static getInstance(){return vu.instance||(vu.instance=new vu),vu.instance}async generateToolEmbeddings(){var e,t;if(!qe||!Xt())return{success:!0,data:{processed:0,skipped:0}};try{const{data:n,error:i}=await qe.from("tools").select(`
          id,
          title,
          description,
          updated_at,
          category:categories(name),
          questions:tool_questions(label)
        `).eq("active",!0);if(i)throw i;if(!n||n.length===0)return{success:!0,data:{processed:0,skipped:0}};let a=0,s=0;for(const l of n)try{const{data:u,error:d}=await qe.from("tool_embeddings").select("content_hash, updated_at").eq("tool_id",l.id).single();if(d&&d.code!=="PGRST116"){Ae.error({message:`Failed to query existing embedding for tool ${l.id}`,code:"EMBEDDING_QUERY_ERROR",details:d.message,timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:"VectorSearchService",severity:"error"});continue}const h=`${l.title} | ${l.description} | ${((e=l.category)==null?void 0:e.name)||""} | ${((t=l.questions)==null?void 0:t.map(x=>x.label).join(" "))||""}`,g=await this.generateContentHash(h);if(u&&u.content_hash===g){s++;continue}const{error:b}=await qe.functions.invoke("generate-embeddings",{body:{action:"generate_tool_embedding",toolId:l.id}});if(b){Ae.error({message:`Failed to generate embedding for tool ${l.id}`,code:"EMBEDDING_GENERATION_ERROR",details:b.message,timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:"VectorSearchService",severity:"error"});continue}a++,await new Promise(x=>setTimeout(x,100))}catch(u){Ae.error({message:`Error processing tool ${l.id} for embedding`,code:"TOOL_EMBEDDING_ERROR",details:u instanceof Error?u.message:"Unknown error",timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:"VectorSearchService",severity:"error"})}return Ae.info("Tool embeddings generation completed",{component:"VectorSearchService",processed:a,skipped:s,totalTools:n.length}),{success:!0,data:{processed:a,skipped:s}}}catch(n){return{success:!1,error:Tt(n,"generateToolEmbeddings").message}}}async findSimilarTools(e,t=5,n=.6){var i;if(!qe||!Xt())return{success:!0,data:(await this.recommendationEngine.getRecommendation(e)).scores.slice(0,t).map(l=>({tool_id:l.tool.id,title:l.tool.title,description:l.tool.description,category_name:l.tool.category,similarity_score:l.similarity}))};try{Ae.info("Starting vector search for similar tools",{component:"VectorSearchService",method:"findSimilarTools",queryLength:e.length,maxResults:t,similarityThreshold:n}),Ae.info("Invoking generate-embeddings edge function",{component:"VectorSearchService",action:"generate_query_embedding",queryPreview:e.substring(0,100)});const a=await qe.functions.invoke("generate-embeddings",{body:{action:"generate_query_embedding",text:e}});if(Ae.info("Received response from generate-embeddings edge function",{component:"VectorSearchService",hasError:!!a.error,hasData:!!a.data}),a.error)throw Ae.error({message:"Edge function invocation failed",code:"EDGE_FUNCTION_ERROR",details:a.error.message||"Unknown edge function error",timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:"VectorSearchService",severity:"error"}),new Error(a.error.message||"Edge function failed");const s=a.data;if(Ae.info("Parsing query result from edge function",{component:"VectorSearchService",success:s==null?void 0:s.success,hasSimilarTools:!!(s!=null&&s.similarTools),similarToolsCount:((i=s==null?void 0:s.similarTools)==null?void 0:i.length)||0}),!(s!=null&&s.success))throw Ae.error({message:"Query embedding generation failed",code:"EMBEDDING_GENERATION_ERROR",details:(s==null?void 0:s.error)||"Unknown embedding error",timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:"VectorSearchService",severity:"error"}),new Error((s==null?void 0:s.error)||"Failed to generate query embedding");const l=s.similarTools||[];return Ae.info("Vector search completed successfully",{component:"VectorSearchService",queryLength:e.length,resultsFound:l.length,threshold:n,topResults:l.slice(0,3).map(u=>({title:u.title,similarity:u.similarity_score}))}),{success:!0,data:l}}catch(a){return{success:!1,error:Tt(a,"findSimilarTools").message}}}async getOptimizedToolRecommendation(e){var t,n;if(!e.trim())return{success:!0,data:{recommendedTool:null,analysis:"Please describe what you want to create so we can recommend the right tool.",similarTools:[],tokensSaved:0,source:"local",provenance:"Input validation"}};if(!qe||!Xt())return this.buildLocalRecommendation(e,"Supabase client not configured");try{Ae.info("Starting optimized tool recommendation process",{component:"VectorSearchService",method:"getOptimizedToolRecommendation",queryLength:e.length,queryPreview:e.substring(0,100)});const i=await this.findSimilarTools(e,5,.6);if(Ae.info("Received response from findSimilarTools",{component:"VectorSearchService",success:i.success,dataLength:((t=i.data)==null?void 0:t.length)||0,hasError:!!i.error}),!i.success)return this.buildLocalRecommendation(e,i.error);const a=i.data||[];if(a.length===0)return this.buildLocalRecommendation(e,"Vector index returned no matches");const s=`You are an AI assistant that analyzes user requests and recommends the most appropriate copywriting tool from a curated list of relevant tools.

Relevant tools (pre-filtered using semantic similarity):
${a.map(D=>`- **${D.title}** (${D.category_name}): ${D.description} [Similarity: ${(D.similarity_score*100).toFixed(1)}%]`).join(`
`)}

User request: "${e}"

Based on the semantic similarity scores and your analysis:
1. Select the MOST APPROPRIATE tool from the list above
2. Explain why this tool is the perfect match
3. Provide actionable insights about their content creation goal

Respond in this format:
RECOMMENDED_TOOL: [exact tool title from the list]
ANALYSIS: [detailed analysis explaining why this tool matches their needs and how it will help them achieve their content goals]`,{data:l,error:u}=await qe.functions.invoke("ai-chat",{body:{toolId:"tool-recommendation-optimized",messages:[{id:"1",sender:"user",text:s}],correlationId:Ae.getCorrelationId()}});if(u||!(l!=null&&l.response))return Ae.warn("VectorSearchService: ai-chat invocation failed, using local fallback",{error:(u==null?void 0:u.message)||"No response"}),this.buildLocalRecommendation(e,(u==null?void 0:u.message)||"AI response missing");const d=l.response,h=d.match(/RECOMMENDED_TOOL:\s*(.+?)(?:\n|$)/),g=d.match(/ANALYSIS:\s*([\s\S]+)/);let b=null,x=`This is the best recommended tool based on your query: '${e}'.`;if(h){const D=h[1].trim(),_=a.find(A=>A.title.toLowerCase()===D.toLowerCase()||A.title.includes(D)||D.includes(A.title));if(_){const{data:A,error:N}=await qe.from("tools").select(`
              *,
              category:categories(*),
              questions:tool_questions(*)
            `).eq("id",_.tool_id).single();if(!N&&A)b={id:A.id,title:A.title,category:((n=A.category)==null?void 0:n.name)||"Other",description:A.description,active:A.active,featured:A.featured,primaryModel:A.primary_model,fallbackModels:A.fallback_models||[],promptInstructions:A.prompt_instructions,questions:(A.questions||[]).sort((E,C)=>E.question_order-C.question_order).map(E=>({id:E.id,label:E.label,type:E.type,placeholder:E.placeholder,required:E.required,order:E.question_order,options:E.options}))};else{const E=await this.repository.getToolById(_.tool_id);E&&(b=E)}}}if(!b)return this.buildLocalRecommendation(e,"LLM response missing actionable tool reference");const k=await this.estimateTokens(e,await this.getAllToolsForEstimate()),v=await this.estimateTokens(e,a),w=Math.max(0,k-v);return{success:!0,data:{recommendedTool:b,analysis:x,similarTools:a,tokensSaved:w,source:"supabase",provenance:"Supabase vector search"}}}catch(i){return Ae.warn("VectorSearchService: Supabase pipeline failed, using local recommendation",{error:i.message}),this.buildLocalRecommendation(e,i.message)}}async buildLocalRecommendation(e,t){const n=await this.recommendationEngine.getRecommendation(e),i=n.scores.slice(0,5).map(s=>({tool_id:s.tool.id,title:s.tool.title,description:s.tool.description,category_name:s.tool.category,similarity_score:s.similarity})),a=n.recommendedTool?`This is the best recommended tool based on your query: '${e}'.`:[n.analysis,t].filter(Boolean).join("  ");return{success:!0,data:{recommendedTool:n.recommendedTool,analysis:a,similarTools:i,tokensSaved:0,source:"local",provenance:n.sourceLabel}}}async generateContentHash(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(i)).map(s=>s.toString(16).padStart(2,"0")).join("")}async getAllToolsForEstimate(){if(!qe)return[];const{data:e}=await qe.from("tools").select("title, description, category:categories(name)").eq("active",!0);return e||[]}async estimateTokens(e,t){const n=Math.ceil(e.length/4),i=t.reduce((a,s)=>{var u;const l=`${s.title} ${s.description} ${s.category_name||((u=s.category)==null?void 0:u.name)||""}`;return a+Math.ceil(l.length/4)},0);return n+i+200}}const a5=({tool:r})=>{Fr();const{categories:e}=kp(),{isPro:t,isAdmin:n}=ct(),{favoriteTools:i,toggleFavorite:a,setToolForActivation:s,showProUpgradeModal:l,setShowProUpgradeModal:u}=Ca(),[d,h]=Q.useState(null),g=i.includes(r.id),b=r.is_pro,x=!b||t||n,k=Q.useCallback(()=>{const E=e.find(C=>C.name===r.category);h(E?{name:E.iconName||"Settings",color:E.iconColor||"text-blue-600"}:{name:"Settings",color:"text-blue-600"})},[e,r.category]);Q.useEffect(()=>{k()},[k]);const v=Q.useCallback(E=>{const{updatedCategory:C}=E.detail;C.name===r.category&&h({name:C.iconName||"Settings",color:C.iconColor||"text-blue-600"})},[r.category]);Q.useEffect(()=>{const E=C=>{v(C)};return window.addEventListener("categoryUpdated",E),()=>{window.removeEventListener("categoryUpdated",E)}},[v]);const D=d!=null&&d.name&&{Settings:Bc,Box:_r,Edit:hi,Mail:Gv,File:Cd,Mic:$v,Activity:Ed,Users:Fs}[d.name]||_r,_=(d==null?void 0:d.color)||"text-primary-accent",A=()=>{x?s(r):u(!0)},N=E=>{E.stopPropagation(),E.preventDefault(),a(r.id)};return f.jsxs("a",{href:"#",onClick:E=>{E.preventDefault(),A()},className:`group relative p-5 rounded-md no-underline flex flex-col gap-3 transition-all duration-300 ease-in-out transform hover:-translate-y-1 ${b?"bg-gradient-to-br from-purple-50 via-fuchsia-50 to-indigo-50 dark:from-gray-900 dark:via-purple-900/40 dark:to-gray-900 border-purple-200 dark:border-purple-600/30 border-2 shadow-lg hover:shadow-purple-500/20 dark:hover:shadow-purple-500/30":"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border hover:shadow-lg dark:hover:shadow-2xl"}`,title:r.description,children:[f.jsx("button",{onClick:N,className:"absolute top-2 right-2 p-1 text-light-text-tertiary dark:text-dark-text-tertiary rounded-full hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page opacity-0 group-hover:opacity-100 transition-opacity z-10",title:g?"Remove from favorites":"Add to favorites",children:f.jsx(co,{className:`w-5 h-5 ${g?"text-yellow-500":""}`,isFilled:g})}),f.jsx(D,{className:`w-6 h-6 ${_}`}),f.jsx("span",{className:"font-serif flex-grow font-bold text-light-text-primary dark:text-dark-text-primary text-lg pr-4",children:r.title}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm font-medium text-light-text-tertiary dark:text-dark-text-tertiary bg-light-bg-sidebar dark:bg-dark-bg-component py-1 px-2 rounded-sm self-start",children:r.category}),r.featured&&f.jsx("span",{className:"text-xs font-medium text-yellow-600 dark:text-yellow-400 bg-yellow-100 dark:bg-yellow-900/30 py-1 px-2 rounded-sm",children:"Featured"}),b&&f.jsx("span",{className:"text-xs font-bold tracking-wider uppercase bg-gradient-to-r from-fuchsia-500 to-purple-600 text-white py-1 px-2.5 rounded-full shadow-md",children:"Pro"})]}),!x&&f.jsx("div",{className:"absolute inset-0 bg-gray-500/30 dark:bg-black/50 backdrop-blur-sm flex items-center justify-center rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:f.jsx($R,{className:"w-8 h-8 text-white drop-shadow-lg"})})]})},G9=()=>{Fr();const[r,e]=Q.useState("persuasive email for a new product launch"),[t,n]=Q.useState(!1),[i,a]=Q.useState(null),[s,l]=Q.useState(""),[u,d]=Q.useState(0),[h,g]=Q.useState([]),[b,x]=Q.useState(null),[k,v]=Q.useState(""),{featuredTools:w,loading:D,error:_}=Pc(),{setToolForActivation:A}=Ca(),N=Q.useRef(null),E=Q.useRef(null),C=vu.getInstance();Q.useEffect(()=>{const F=G=>{const{tool:R}=G.detail;a(R),l("This tool was recommended based on your project requirements."),window.location.hash=""};return window.addEventListener("recommendedToolSelected",F),()=>{window.removeEventListener("recommendedToolSelected",F)}},[]),Q.useEffect(()=>{N.current&&(N.current.style.height="auto",N.current.style.height=`${N.current.scrollHeight}px`)},[r]),Q.useEffect(()=>{E.current&&(i||s)&&E.current.scrollIntoView({behavior:"smooth",block:"start"})},[i,s]);const j=async F=>{if(!F.trim()){l("Please tell us what you want to create so we can recommend a tool.");return}n(!0),a(null),l(""),d(0),g([]),x(null),v("");try{Object.keys(localStorage).filter(W=>W.startsWith("conversation-")).forEach(W=>{localStorage.removeItem(W)}),console.log("Cleared existing conversation states for fresh analysis")}catch(G){console.error("Failed to clear conversation states:",G)}try{const G=await C.getOptimizedToolRecommendation(F);if(G.success&&G.data){const{recommendedTool:R,analysis:W,tokensSaved:U,similarTools:X,source:P,provenance:B}=G.data;d(U??0),l(W),g(X??[]),x(P),v(B??""),a(R||null)}else l(G.error||"AI recommendation service is temporarily unavailable."),x(null)}catch(G){console.error("Failed to analyze prompt:",G),l("AI recommendation service is temporarily unavailable. Please browse our tool catalogue or try again later."),x(null)}finally{n(!1)}},M=()=>{r.trim()&&j(r.trim())},O=F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),M())};return D?f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-accent mx-auto mb-4"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading tools..."})]})}):_?f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsxs("div",{className:"text-center",children:[f.jsxs("p",{className:"text-red-600 dark:text-red-400 mb-4",children:["Error loading tools: ",_]}),f.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85",children:"Retry"})]})}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex flex-col h-full",children:[f.jsxs("section",{className:"relative flex flex-col items-center justify-center flex-grow p-4 sm:p-6 bg-light-bg-sidebar dark:bg-dark-bg-page min-h-[60vh] sm:min-h-[70vh]",children:[f.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_0%,rgba(0,255,179,0.1),transparent_70%)] dark:bg-[radial-gradient(circle_at_50%_0%,rgba(0,255,179,0.08),transparent_70%)]"}),f.jsxs("div",{className:"relative w-full max-w-4xl text-center px-2",children:[f.jsx("h1",{className:"font-serif text-2xl sm:text-3xl lg:text-5xl font-bold text-light-text-primary dark:text-dark-text-primary mb-6 sm:mb-8 leading-tight",children:"What do you want to create today?"}),f.jsxs("div",{className:"flex flex-col sm:flex-row items-start text-left bg-light-bg-component dark:bg-black/20 border border-light-border dark:border-white/20 rounded-md p-1 sm:pl-4 shadow-lg",children:[f.jsx("span",{className:"text-base sm:text-lg text-primary-accent font-medium pt-3 flex-shrink-0 px-3 sm:px-0",children:"I want to create a"}),f.jsx("textarea",{ref:N,onChange:F=>e(F.target.value),onKeyDown:O,rows:1,className:"prompt-input flex-grow border-none outline-none bg-transparent p-3 text-base sm:text-lg text-light-text-primary dark:text-dark-text-primary font-medium resize-none leading-normal max-h-60 w-full",placeholder:"persuasive email for a new product launch"}),f.jsx("button",{onClick:M,disabled:t||!r.trim(),className:"bg-primary-accent text-text-on-accent border-none rounded-sm m-1 p-2.5 cursor-pointer flex items-center justify-center transition-opacity self-end sm:self-end flex-shrink-0 hover:opacity-85 disabled:opacity-50 disabled:cursor-not-allowed",children:t?f.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-text-on-accent"}):f.jsx(ND,{className:"w-5 h-5"})})]}),f.jsxs("p",{className:"mt-4 text-xs sm:text-sm text-light-text-tertiary dark:text-dark-text-tertiary max-w-2xl mx-auto px-2",children:[f.jsx("span",{className:"font-semibold",children:"Tip:"})," The more details you provide, the better the result. For example: ",f.jsx("span",{className:"italic",children:'"a witty tweet about the challenges of remote work"'})]})]}),(t||i||s)&&f.jsx("div",{className:"relative w-full max-w-4xl mx-auto px-2 mt-8",children:f.jsx("div",{className:"bg-light-bg-component/95 dark:bg-black/40 border border-light-border/50 dark:border-white/20 rounded-lg p-6 shadow-lg backdrop-blur-sm",children:t?f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-accent mx-auto mb-4"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Analyzing your request and finding the perfect tool..."})]}):f.jsxs("div",{children:[f.jsx("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary mb-4",children:"AI Recommendation"}),s&&f.jsx("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary mb-4 whitespace-pre-line",children:s}),i?f.jsx("div",{className:"space-y-4",children:f.jsxs("div",{className:"bg-primary-accent/10 border border-primary-accent/20 rounded-lg p-4",children:[u>0&&f.jsxs("div",{className:"mb-3 text-xs text-green-600 dark:text-green-400 font-medium",children:[" Optimized search saved ~",u," tokens"]}),f.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[f.jsx("div",{className:"w-10 h-10 bg-primary-accent/20 rounded-lg flex items-center justify-center",children:f.jsx(ND,{className:"w-5 h-5 text-primary-accent"})}),f.jsxs("div",{children:[f.jsxs("h4",{className:"font-semibold text-light-text-primary dark:text-dark-text-primary",children:["Recommended: ",i.title]}),f.jsx("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary",children:i.category})]})]}),f.jsx("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary mb-4",children:i.description}),f.jsx("button",{onClick:()=>A(i),className:"w-full px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity font-medium",children:"Use This Tool"})]})}):null]})})})]}),f.jsx("div",{className:"p-3 sm:p-4 lg:p-6 pb-6 sm:pb-8 bg-light-bg-page dark:bg-dark-bg-page space-y-8",children:f.jsxs("div",{className:"max-w-4xl mx-auto px-2",children:[f.jsx("h2",{className:"font-serif text-xl sm:text-2xl font-bold text-light-text-primary dark:text-dark-text-primary mb-4 sm:mb-5",children:"Featured Tools"}),w.length>0?f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:w.map(F=>f.jsx(a5,{tool:F},F.id))}):f.jsx("div",{className:"text-center py-12 text-light-text-tertiary dark:text-dark-text-tertiary",children:f.jsx("p",{children:"No featured tools available at the moment."})})]})})]}),f.jsx($9,{})]})},$9=()=>{const[r,e]=Q.useState(!1),[t,n]=Q.useState(!1),[i,a]=Q.useState(!1);Q.useEffect(()=>{try{if(!localStorage.getItem("infoBannerDismissed")){const u=setTimeout(()=>{e(!0),n(!0)},500);return()=>clearTimeout(u)}}catch(l){console.error("Could not access localStorage",l)}},[]);const s=()=>{if(e(!1),i)try{localStorage.setItem("infoBannerDismissed","true")}catch(l){console.error("Could not access localStorage",l)}};return t?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:`fixed inset-0 bg-black/20 dark:bg-black/40 backdrop-blur-sm z-[1000] transition-opacity duration-300 ${r?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:s}),f.jsxs("div",{className:`fixed top-0 right-0 h-full w-full max-w-sm bg-light-bg-component dark:bg-dark-bg-component border-l border-light-border dark:border-dark-border shadow-2xl z-[1001] p-6 flex flex-col transition-transform duration-300 ease-in-out ${r?"translate-x-0":"translate-x-full"}`,children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsx("h4",{className:"font-serif text-lg sm:text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Start Here"}),f.jsx("button",{onClick:s,className:"p-1 rounded-full text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-black/10 dark:hover:bg-white/10",children:f.jsx(Ms,{className:"w-6 h-6"})})]}),f.jsxs("div",{className:"flex-grow overflow-y-auto -mr-3 pr-5 space-y-3 text-sm sm:text-base text-light-text-secondary dark:text-dark-text-secondary leading-relaxed",children:[f.jsxs("p",{children:["Read the ",f.jsx("a",{href:"#",className:"text-primary-accent font-medium hover:underline",children:"Artemo User Guide"}),". It's updated frequently, so check it often."]}),f.jsx("p",{children:"Use our tools to create amazing copy for your business or clients. Find all tools in the left-hand navigation bar or in the All Tools section below."}),f.jsxs("p",{children:["Join our ",f.jsx("a",{href:"#",className:"text-primary-accent font-medium hover:underline",children:"community"})," to discuss and get help from hundreds of Artemo users who are making money and growing their businesses daily."]}),f.jsxs("div",{children:[f.jsx("h5",{className:"font-semibold text-light-text-primary dark:text-dark-text-primary mt-4 mb-2 uppercase tracking-wider text-sm",children:"IMPORTANT NOTICE"}),f.jsxs("p",{children:["For questions, contact support at ",f.jsx("a",{href:"mailto:hello@artemo.ai",className:"text-primary-accent font-medium hover:underline",children:"hello@artemo.ai"}),"."]})]})]}),f.jsx("div",{className:"flex-shrink-0 pt-6 border-t border-light-border dark:border-dark-border",children:f.jsxs("label",{className:"flex items-center gap-3 cursor-pointer text-base font-medium text-light-text-primary dark:text-dark-text-primary bg-primary-accent/10 p-3 rounded-md border border-primary-accent/30",children:[f.jsx("input",{type:"checkbox",checked:i,onChange:l=>a(l.target.checked),className:"h-5 w-5 rounded border-primary-accent/50 dark:border-primary-accent/50 bg-light-bg-component dark:bg-dark-bg-component text-primary-accent focus:ring-primary-accent focus:ring-2"}),"Don't show this again"]})})]})]}):null},Y9=()=>f.jsx(G9,{}),K9=({category:r,tools:e,categories:t})=>{const[n,i]=Q.useState(!0),a=()=>{const u=t.find(h=>h.name===r);return u!=null&&u.iconName?{icon:{Settings:Bc,Box:_r,Edit:hi,Mail:Gv,File:Cd,Mic:$v,Activity:Ed,Users:Fs}[u.iconName]||_r,color:u.iconColor||"text-primary-accent"}:{icon:_r,color:"text-primary-accent"}},{icon:s,color:l}=a();return f.jsxs("div",{className:"mb-6",children:[f.jsxs("button",{onClick:()=>i(!n),className:"w-full flex justify-between items-center py-3 px-4 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md transition-colors hover:bg-light-border dark:hover:bg-dark-border/20",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(s,{className:`w-5 h-5 ${l}`}),f.jsx("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:r})]}),f.jsx(sx,{className:`w-5 h-5 text-light-text-secondary dark:text-dark-text-secondary transition-transform ${n?"rotate-180":""}`})]}),n&&f.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(u=>f.jsx(a5,{tool:u},u.id))})]})},Q9=()=>{const[r,e]=e9(),t=r.get("search")||"",n=r.get("category")||"",{tools:i,loading:a,error:s}=Pc(),{categories:l,allCategories:u}=kp(),d=x=>{const k=new URLSearchParams(r);x.trim()?k.set("search",x):k.delete("search"),e(k)},h=Q.useMemo(()=>{if(!t.trim())return i;let x=i;n&&(x=i.filter(v=>v.category===n));const k=t.toLowerCase();return x.filter(v=>v.title.toLowerCase().includes(k)||v.description.toLowerCase().includes(k)||v.category.toLowerCase().includes(k))},[i,t,n]),g=Q.useMemo(()=>{let x=n?i.filter(v=>v.category===n):h;const k={};for(const v of x)k[v.category]||(k[v.category]=[]),k[v.category].push(v);return k},[i,h,n]),b=Object.keys(g).filter(x=>g[x]&&g[x].length>0);return a?f.jsx("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:f.jsx("div",{className:"flex items-center justify-center py-20",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-accent mx-auto mb-4"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading tools..."})]})})}):s?f.jsx("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:f.jsx("div",{className:"flex items-center justify-center py-20",children:f.jsxs("div",{className:"text-center",children:[f.jsxs("p",{className:"text-red-600 dark:text-red-400 mb-4",children:["Error loading tools: ",s]}),f.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85",children:"Retry"})]})})}):f.jsxs("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h2",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary",children:n?n+" Tools":"All Tools"}),!n&&f.jsxs("div",{className:"relative w-80",children:[f.jsx(Sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-light-text-tertiary dark:text-dark-text-tertiary"}),f.jsx("input",{type:"text",placeholder:"Search tools...",value:t,onChange:x=>d(x.target.value),className:"w-full pl-9 pr-3 py-2 text-sm rounded-sm border border-light-border dark:border-dark-border bg-light-bg-component dark:bg-dark-bg-component text-light-text-secondary dark:text-dark-text-secondary focus:ring-2 focus:ring-primary-accent focus:outline-none"})]})]}),i.length===0?f.jsxs("div",{className:"text-center py-20 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-lg border border-light-border dark:border-dark-border",children:[f.jsx(_r,{className:"w-12 h-12 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary",children:"No tools available"}),f.jsx("p",{className:"text-light-text-tertiary dark:text-dark-text-tertiary mt-1",children:l.length===0?"Create categories and tools in the admin panel to get started.":"Create tools in the admin panel to get started."})]}):t.trim()&&h.length===0||n&&b.length===0?f.jsxs("div",{className:"text-center py-12 text-light-text-tertiary dark:text-dark-text-tertiary",children:[f.jsx("h3",{className:"text-lg font-semibold",children:"No results found"}),f.jsx("p",{children:n?"No tools in this category yet.":"Try a different search term or check back later for new tools."})]}):f.jsx("div",{children:b.map(x=>f.jsx(K9,{category:x,tools:g[x],categories:u},x))})]})},Z9=()=>f.jsx(Q9,{});var oa={},_A="1.13.7",XN=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},Qv=Array.prototype,AA=Object.prototype,GN=typeof Symbol<"u"?Symbol.prototype:null,J9=Qv.push,ox=Qv.slice,pm=AA.toString,eB=AA.hasOwnProperty,s5=typeof ArrayBuffer<"u",tB=typeof DataView<"u",nB=Array.isArray,$N=Object.keys,YN=Object.create,KN=s5&&ArrayBuffer.isView,rB=isNaN,iB=isFinite,o5=!{toString:null}.propertyIsEnumerable("toString"),QN=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],aB=Math.pow(2,53)-1;function Qr(r,e){return e=e==null?r.length-1:+e,function(){for(var t=Math.max(arguments.length-e,0),n=Array(t),i=0;i<t;i++)n[i]=arguments[i+e];switch(e){case 0:return r.call(this,n);case 1:return r.call(this,arguments[0],n);case 2:return r.call(this,arguments[0],arguments[1],n)}var a=Array(e+1);for(i=0;i<e;i++)a[i]=arguments[i];return a[e]=n,r.apply(this,a)}}function zc(r){var e=typeof r;return e==="function"||e==="object"&&!!r}function l5(r){return r===null}function SA(r){return r===void 0}function EA(r){return r===!0||r===!1||pm.call(r)==="[object Boolean]"}function c5(r){return!!(r&&r.nodeType===1)}function Or(r){var e="[object "+r+"]";return function(t){return pm.call(t)===e}}const Zv=Or("String"),TA=Or("Number"),u5=Or("Date"),d5=Or("RegExp"),h5=Or("Error"),CA=Or("Symbol"),NA=Or("ArrayBuffer");var f5=Or("Function"),sB=XN.document&&XN.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof sB!="function"&&(f5=function(r){return typeof r=="function"||!1});const jr=f5,p5=Or("Object");var g5=tB&&(!/\[native code\]/.test(String(DataView))||p5(new DataView(new ArrayBuffer(8)))),UA=typeof Map<"u"&&p5(new Map),oB=Or("DataView");function lB(r){return r!=null&&jr(r.getInt8)&&NA(r.buffer)}const gm=g5?lB:oB,Wc=nB||Or("Array");function Hc(r,e){return r!=null&&eB.call(r,e)}var RD=Or("Arguments");(function(){RD(arguments)||(RD=function(r){return Hc(r,"callee")})})();const Jv=RD;function m5(r){return!CA(r)&&iB(r)&&!isNaN(parseFloat(r))}function RA(r){return TA(r)&&rB(r)}function jA(r){return function(){return r}}function b5(r){return function(e){var t=r(e);return typeof t=="number"&&t>=0&&t<=aB}}function x5(r){return function(e){return e==null?void 0:e[r]}}const av=x5("byteLength"),cB=b5(av);var uB=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function dB(r){return KN?KN(r)&&!gm(r):cB(r)&&uB.test(pm.call(r))}const FA=s5?dB:jA(!1),ui=x5("length");function hB(r){for(var e={},t=r.length,n=0;n<t;++n)e[r[n]]=!0;return{contains:function(i){return e[i]===!0},push:function(i){return e[i]=!0,r.push(i)}}}function y5(r,e){e=hB(e);var t=QN.length,n=r.constructor,i=jr(n)&&n.prototype||AA,a="constructor";for(Hc(r,a)&&!e.contains(a)&&e.push(a);t--;)a=QN[t],a in r&&r[a]!==i[a]&&!e.contains(a)&&e.push(a)}function Zn(r){if(!zc(r))return[];if($N)return $N(r);var e=[];for(var t in r)Hc(r,t)&&e.push(t);return o5&&y5(r,e),e}function v5(r){if(r==null)return!0;var e=ui(r);return typeof e=="number"&&(Wc(r)||Zv(r)||Jv(r))?e===0:ui(Zn(r))===0}function IA(r,e){var t=Zn(e),n=t.length;if(r==null)return!n;for(var i=Object(r),a=0;a<n;a++){var s=t[a];if(e[s]!==i[s]||!(s in i))return!1}return!0}function Pt(r){if(r instanceof Pt)return r;if(!(this instanceof Pt))return new Pt(r);this._wrapped=r}Pt.VERSION=_A;Pt.prototype.value=function(){return this._wrapped};Pt.prototype.valueOf=Pt.prototype.toJSON=Pt.prototype.value;Pt.prototype.toString=function(){return String(this._wrapped)};function ZN(r){return new Uint8Array(r.buffer||r,r.byteOffset||0,av(r))}var JN="[object DataView]";function jD(r,e,t,n){if(r===e)return r!==0||1/r===1/e;if(r==null||e==null)return!1;if(r!==r)return e!==e;var i=typeof r;return i!=="function"&&i!=="object"&&typeof e!="object"?!1:w5(r,e,t,n)}function w5(r,e,t,n){r instanceof Pt&&(r=r._wrapped),e instanceof Pt&&(e=e._wrapped);var i=pm.call(r);if(i!==pm.call(e))return!1;if(g5&&i=="[object Object]"&&gm(r)){if(!gm(e))return!1;i=JN}switch(i){case"[object RegExp]":case"[object String]":return""+r==""+e;case"[object Number]":return+r!=+r?+e!=+e:+r==0?1/+r===1/e:+r==+e;case"[object Date]":case"[object Boolean]":return+r==+e;case"[object Symbol]":return GN.valueOf.call(r)===GN.valueOf.call(e);case"[object ArrayBuffer]":case JN:return w5(ZN(r),ZN(e),t,n)}var a=i==="[object Array]";if(!a&&FA(r)){var s=av(r);if(s!==av(e))return!1;if(r.buffer===e.buffer&&r.byteOffset===e.byteOffset)return!0;a=!0}if(!a){if(typeof r!="object"||typeof e!="object")return!1;var l=r.constructor,u=e.constructor;if(l!==u&&!(jr(l)&&l instanceof l&&jr(u)&&u instanceof u)&&"constructor"in r&&"constructor"in e)return!1}t=t||[],n=n||[];for(var d=t.length;d--;)if(t[d]===r)return n[d]===e;if(t.push(r),n.push(e),a){if(d=r.length,d!==e.length)return!1;for(;d--;)if(!jD(r[d],e[d],t,n))return!1}else{var h=Zn(r),g;if(d=h.length,Zn(e).length!==d)return!1;for(;d--;)if(g=h[d],!(Hc(e,g)&&jD(r[g],e[g],t,n)))return!1}return t.pop(),n.pop(),!0}function k5(r,e){return jD(r,e)}function _p(r){if(!zc(r))return[];var e=[];for(var t in r)e.push(t);return o5&&y5(r,e),e}function OA(r){var e=ui(r);return function(t){if(t==null)return!1;var n=_p(t);if(ui(n))return!1;for(var i=0;i<e;i++)if(!jr(t[r[i]]))return!1;return r!==A5||!jr(t[MA])}}var MA="forEach",D5="has",LA=["clear","delete"],_5=["get",D5,"set"],fB=LA.concat(MA,_5),A5=LA.concat(_5),pB=["add"].concat(LA,MA,D5);const S5=UA?OA(fB):Or("Map"),E5=UA?OA(A5):Or("WeakMap"),T5=UA?OA(pB):Or("Set"),C5=Or("WeakSet");function Od(r){for(var e=Zn(r),t=e.length,n=Array(t),i=0;i<t;i++)n[i]=r[e[i]];return n}function N5(r){for(var e=Zn(r),t=e.length,n=Array(t),i=0;i<t;i++)n[i]=[e[i],r[e[i]]];return n}function BA(r){for(var e={},t=Zn(r),n=0,i=t.length;n<i;n++)e[r[t[n]]]=t[n];return e}function mm(r){var e=[];for(var t in r)jr(r[t])&&e.push(t);return e.sort()}function PA(r,e){return function(t){var n=arguments.length;if(e&&(t=Object(t)),n<2||t==null)return t;for(var i=1;i<n;i++)for(var a=arguments[i],s=r(a),l=s.length,u=0;u<l;u++){var d=s[u];(!e||t[d]===void 0)&&(t[d]=a[d])}return t}}const zA=PA(_p),gp=PA(Zn),WA=PA(_p,!0);function gB(){return function(){}}function U5(r){if(!zc(r))return{};if(YN)return YN(r);var e=gB();e.prototype=r;var t=new e;return e.prototype=null,t}function R5(r,e){var t=U5(r);return e&&gp(t,e),t}function j5(r){return zc(r)?Wc(r)?r.slice():zA({},r):r}function F5(r,e){return e(r),r}function HA(r){return Wc(r)?r:[r]}Pt.toPath=HA;function lx(r){return Pt.toPath(r)}function qA(r,e){for(var t=e.length,n=0;n<t;n++){if(r==null)return;r=r[e[n]]}return t?r:void 0}function VA(r,e,t){var n=qA(r,lx(e));return SA(n)?t:n}function I5(r,e){e=lx(e);for(var t=e.length,n=0;n<t;n++){var i=e[n];if(!Hc(r,i))return!1;r=r[i]}return!!t}function e1(r){return r}function Nd(r){return r=gp({},r),function(e){return IA(e,r)}}function t1(r){return r=lx(r),function(e){return qA(e,r)}}function cx(r,e,t){if(e===void 0)return r;switch(t??3){case 1:return function(n){return r.call(e,n)};case 3:return function(n,i,a){return r.call(e,n,i,a)};case 4:return function(n,i,a,s){return r.call(e,n,i,a,s)}}return function(){return r.apply(e,arguments)}}function O5(r,e,t){return r==null?e1:jr(r)?cx(r,e,t):zc(r)&&!Wc(r)?Nd(r):t1(r)}function n1(r,e){return O5(r,e,1/0)}Pt.iteratee=n1;function fi(r,e,t){return Pt.iteratee!==n1?Pt.iteratee(r,e):O5(r,e,t)}function M5(r,e,t){e=fi(e,t);for(var n=Zn(r),i=n.length,a={},s=0;s<i;s++){var l=n[s];a[l]=e(r[l],l,r)}return a}function XA(){}function L5(r){return r==null?XA:function(e){return VA(r,e)}}function B5(r,e,t){var n=Array(Math.max(0,r));e=cx(e,t,1);for(var i=0;i<r;i++)n[i]=e(i);return n}function sv(r,e){return e==null&&(e=r,r=0),r+Math.floor(Math.random()*(e-r+1))}const mp=Date.now||function(){return new Date().getTime()};function P5(r){var e=function(a){return r[a]},t="(?:"+Zn(r).join("|")+")",n=RegExp(t),i=RegExp(t,"g");return function(a){return a=a==null?"":""+a,n.test(a)?a.replace(i,e):a}}const z5={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},W5=P5(z5),mB=BA(z5),H5=P5(mB),q5=Pt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var $w=/(.)^/,bB={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},xB=/\\|'|\r|\n|\u2028|\u2029/g;function yB(r){return"\\"+bB[r]}var vB=/^\s*(\w|\$)+\s*$/;function V5(r,e,t){!e&&t&&(e=t),e=WA({},e,Pt.templateSettings);var n=RegExp([(e.escape||$w).source,(e.interpolate||$w).source,(e.evaluate||$w).source].join("|")+"|$","g"),i=0,a="__p+='";r.replace(n,function(d,h,g,b,x){return a+=r.slice(i,x).replace(xB,yB),i=x+d.length,h?a+=`'+
((__t=(`+h+`))==null?'':_.escape(__t))+
'`:g?a+=`'+
((__t=(`+g+`))==null?'':__t)+
'`:b&&(a+=`';
`+b+`
__p+='`),d}),a+=`';
`;var s=e.variable;if(s){if(!vB.test(s))throw new Error("variable is not a bare identifier: "+s)}else a=`with(obj||{}){
`+a+`}
`,s="obj";a=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+a+`return __p;
`;var l;try{l=new Function(s,"_",a)}catch(d){throw d.source=a,d}var u=function(d){return l.call(this,d,Pt)};return u.source="function("+s+`){
`+a+"}",u}function X5(r,e,t){e=lx(e);var n=e.length;if(!n)return jr(t)?t.call(r):t;for(var i=0;i<n;i++){var a=r==null?void 0:r[e[i]];a===void 0&&(a=t,i=n),r=jr(a)?a.call(r):a}return r}var wB=0;function G5(r){var e=++wB+"";return r?r+e:e}function $5(r){var e=Pt(r);return e._chain=!0,e}function Y5(r,e,t,n,i){if(!(n instanceof e))return r.apply(t,i);var a=U5(r.prototype),s=r.apply(a,i);return zc(s)?s:a}var Md=Qr(function(r,e){var t=Md.placeholder,n=function(){for(var i=0,a=e.length,s=Array(a),l=0;l<a;l++)s[l]=e[l]===t?arguments[i++]:e[l];for(;i<arguments.length;)s.push(arguments[i++]);return Y5(r,n,this,this,s)};return n});Md.placeholder=Pt;const GA=Qr(function(r,e,t){if(!jr(r))throw new TypeError("Bind must be called on a function");var n=Qr(function(i){return Y5(r,n,e,this,t.concat(i))});return n}),Yi=b5(ui);function Ld(r,e,t,n){if(n=n||[],!e&&e!==0)e=1/0;else if(e<=0)return n.concat(r);for(var i=n.length,a=0,s=ui(r);a<s;a++){var l=r[a];if(Yi(l)&&(Wc(l)||Jv(l)))if(e>1)Ld(l,e-1,t,n),i=n.length;else for(var u=0,d=l.length;u<d;)n[i++]=l[u++];else t||(n[i++]=l)}return n}const K5=Qr(function(r,e){e=Ld(e,!1,!1);var t=e.length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var n=e[t];r[n]=GA(r[n],r)}return r});function Q5(r,e){var t=function(n){var i=t.cache,a=""+(e?e.apply(this,arguments):n);return Hc(i,a)||(i[a]=r.apply(this,arguments)),i[a]};return t.cache={},t}const $A=Qr(function(r,e,t){return setTimeout(function(){return r.apply(null,t)},e)}),Z5=Md($A,Pt,1);function J5(r,e,t){var n,i,a,s,l=0;t||(t={});var u=function(){l=t.leading===!1?0:mp(),n=null,s=r.apply(i,a),n||(i=a=null)},d=function(){var h=mp();!l&&t.leading===!1&&(l=h);var g=e-(h-l);return i=this,a=arguments,g<=0||g>e?(n&&(clearTimeout(n),n=null),l=h,s=r.apply(i,a),n||(i=a=null)):!n&&t.trailing!==!1&&(n=setTimeout(u,g)),s};return d.cancel=function(){clearTimeout(n),l=0,n=i=a=null},d}function ej(r,e,t){var n,i,a,s,l,u=function(){var h=mp()-i;e>h?n=setTimeout(u,e-h):(n=null,t||(s=r.apply(l,a)),n||(a=l=null))},d=Qr(function(h){return l=this,a=h,i=mp(),n||(n=setTimeout(u,e),t&&(s=r.apply(l,a))),s});return d.cancel=function(){clearTimeout(n),n=a=l=null},d}function tj(r,e){return Md(e,r)}function r1(r){return function(){return!r.apply(this,arguments)}}function nj(){var r=arguments,e=r.length-1;return function(){for(var t=e,n=r[e].apply(this,arguments);t--;)n=r[t].call(this,n);return n}}function rj(r,e){return function(){if(--r<1)return e.apply(this,arguments)}}function YA(r,e){var t;return function(){return--r>0&&(t=e.apply(this,arguments)),r<=1&&(e=null),t}}const ij=Md(YA,2);function KA(r,e,t){e=fi(e,t);for(var n=Zn(r),i,a=0,s=n.length;a<s;a++)if(i=n[a],e(r[i],i,r))return i}function aj(r){return function(e,t,n){t=fi(t,n);for(var i=ui(e),a=r>0?0:i-1;a>=0&&a<i;a+=r)if(t(e[a],a,e))return a;return-1}}const i1=aj(1),QA=aj(-1);function ZA(r,e,t,n){t=fi(t,n,1);for(var i=t(e),a=0,s=ui(r);a<s;){var l=Math.floor((a+s)/2);t(r[l])<i?a=l+1:s=l}return a}function sj(r,e,t){return function(n,i,a){var s=0,l=ui(n);if(typeof a=="number")r>0?s=a>=0?a:Math.max(a+l,s):l=a>=0?Math.min(a+1,l):a+l+1;else if(t&&a&&l)return a=t(n,i),n[a]===i?a:-1;if(i!==i)return a=e(ox.call(n,s,l),RA),a>=0?a+s:-1;for(a=r>0?s:l-1;a>=0&&a<l;a+=r)if(n[a]===i)return a;return-1}}const JA=sj(1,i1,ZA),oj=sj(-1,QA);function bm(r,e,t){var n=Yi(r)?i1:KA,i=n(r,e,t);if(i!==void 0&&i!==-1)return r[i]}function lj(r,e){return bm(r,Nd(e))}function Za(r,e,t){e=cx(e,t);var n,i;if(Yi(r))for(n=0,i=r.length;n<i;n++)e(r[n],n,r);else{var a=Zn(r);for(n=0,i=a.length;n<i;n++)e(r[a[n]],a[n],r)}return r}function tl(r,e,t){e=fi(e,t);for(var n=!Yi(r)&&Zn(r),i=(n||r).length,a=Array(i),s=0;s<i;s++){var l=n?n[s]:s;a[s]=e(r[l],l,r)}return a}function cj(r){var e=function(t,n,i,a){var s=!Yi(t)&&Zn(t),l=(s||t).length,u=r>0?0:l-1;for(a||(i=t[s?s[u]:u],u+=r);u>=0&&u<l;u+=r){var d=s?s[u]:u;i=n(i,t[d],d,t)}return i};return function(t,n,i,a){var s=arguments.length>=3;return e(t,cx(n,a,4),i,s)}}const Yh=cj(1),ov=cj(-1);function jc(r,e,t){var n=[];return e=fi(e,t),Za(r,function(i,a,s){e(i,a,s)&&n.push(i)}),n}function uj(r,e,t){return jc(r,r1(fi(e)),t)}function lv(r,e,t){e=fi(e,t);for(var n=!Yi(r)&&Zn(r),i=(n||r).length,a=0;a<i;a++){var s=n?n[a]:a;if(!e(r[s],s,r))return!1}return!0}function cv(r,e,t){e=fi(e,t);for(var n=!Yi(r)&&Zn(r),i=(n||r).length,a=0;a<i;a++){var s=n?n[a]:a;if(e(r[s],s,r))return!0}return!1}function Da(r,e,t,n){return Yi(r)||(r=Od(r)),(typeof t!="number"||n)&&(t=0),JA(r,e,t)>=0}const dj=Qr(function(r,e,t){var n,i;return jr(e)?i=e:(e=lx(e),n=e.slice(0,-1),e=e[e.length-1]),tl(r,function(a){var s=i;if(!s){if(n&&n.length&&(a=qA(a,n)),a==null)return;s=a[e]}return s==null?s:s.apply(a,t)})});function a1(r,e){return tl(r,t1(e))}function hj(r,e){return jc(r,Nd(e))}function eS(r,e,t){var n=-1/0,i=-1/0,a,s;if(e==null||typeof e=="number"&&typeof r[0]!="object"&&r!=null){r=Yi(r)?r:Od(r);for(var l=0,u=r.length;l<u;l++)a=r[l],a!=null&&a>n&&(n=a)}else e=fi(e,t),Za(r,function(d,h,g){s=e(d,h,g),(s>i||s===-1/0&&n===-1/0)&&(n=d,i=s)});return n}function fj(r,e,t){var n=1/0,i=1/0,a,s;if(e==null||typeof e=="number"&&typeof r[0]!="object"&&r!=null){r=Yi(r)?r:Od(r);for(var l=0,u=r.length;l<u;l++)a=r[l],a!=null&&a<n&&(n=a)}else e=fi(e,t),Za(r,function(d,h,g){s=e(d,h,g),(s<i||s===1/0&&n===1/0)&&(n=d,i=s)});return n}var kB=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function tS(r){return r?Wc(r)?ox.call(r):Zv(r)?r.match(kB):Yi(r)?tl(r,e1):Od(r):[]}function nS(r,e,t){if(e==null||t)return Yi(r)||(r=Od(r)),r[sv(r.length-1)];var n=tS(r),i=ui(n);e=Math.max(Math.min(e,i),0);for(var a=i-1,s=0;s<e;s++){var l=sv(s,a),u=n[s];n[s]=n[l],n[l]=u}return n.slice(0,e)}function pj(r){return nS(r,1/0)}function gj(r,e,t){var n=0;return e=fi(e,t),a1(tl(r,function(i,a,s){return{value:i,index:n++,criteria:e(i,a,s)}}).sort(function(i,a){var s=i.criteria,l=a.criteria;if(s!==l){if(s>l||s===void 0)return 1;if(s<l||l===void 0)return-1}return i.index-a.index}),"value")}function s1(r,e){return function(t,n,i){var a=e?[[],[]]:{};return n=fi(n,i),Za(t,function(s,l){var u=n(s,l,t);r(a,s,u)}),a}}const mj=s1(function(r,e,t){Hc(r,t)?r[t].push(e):r[t]=[e]}),bj=s1(function(r,e,t){r[t]=e}),xj=s1(function(r,e,t){Hc(r,t)?r[t]++:r[t]=1}),yj=s1(function(r,e,t){r[t?0:1].push(e)},!0);function vj(r){return r==null?0:Yi(r)?r.length:Zn(r).length}function DB(r,e,t){return e in t}const rS=Qr(function(r,e){var t={},n=e[0];if(r==null)return t;jr(n)?(e.length>1&&(n=cx(n,e[1])),e=_p(r)):(n=DB,e=Ld(e,!1,!1),r=Object(r));for(var i=0,a=e.length;i<a;i++){var s=e[i],l=r[s];n(l,s,r)&&(t[s]=l)}return t}),wj=Qr(function(r,e){var t=e[0],n;return jr(t)?(t=r1(t),e.length>1&&(n=e[1])):(e=tl(Ld(e,!1,!1),String),t=function(i,a){return!Da(e,a)}),rS(r,t,n)});function iS(r,e,t){return ox.call(r,0,Math.max(0,r.length-(e==null||t?1:e)))}function Kh(r,e,t){return r==null||r.length<1?e==null||t?void 0:[]:e==null||t?r[0]:iS(r,r.length-e)}function Td(r,e,t){return ox.call(r,e==null||t?1:e)}function kj(r,e,t){return r==null||r.length<1?e==null||t?void 0:[]:e==null||t?r[r.length-1]:Td(r,Math.max(0,r.length-e))}function Dj(r){return jc(r,Boolean)}function _j(r,e){return Ld(r,e,!1)}const aS=Qr(function(r,e){return e=Ld(e,!0,!0),jc(r,function(t){return!Da(e,t)})}),Aj=Qr(function(r,e){return aS(r,e)});function xm(r,e,t,n){EA(e)||(n=t,t=e,e=!1),t!=null&&(t=fi(t,n));for(var i=[],a=[],s=0,l=ui(r);s<l;s++){var u=r[s],d=t?t(u,s,r):u;e&&!t?((!s||a!==d)&&i.push(u),a=d):t?Da(a,d)||(a.push(d),i.push(u)):Da(i,u)||i.push(u)}return i}const Sj=Qr(function(r){return xm(Ld(r,!0,!0))});function Ej(r){for(var e=[],t=arguments.length,n=0,i=ui(r);n<i;n++){var a=r[n];if(!Da(e,a)){var s;for(s=1;s<t&&Da(arguments[s],a);s++);s===t&&e.push(a)}}return e}function ym(r){for(var e=r&&eS(r,ui).length||0,t=Array(e),n=0;n<e;n++)t[n]=a1(r,n);return t}const Tj=Qr(ym);function Cj(r,e){for(var t={},n=0,i=ui(r);n<i;n++)e?t[r[n]]=e[n]:t[r[n][0]]=r[n][1];return t}function Nj(r,e,t){e==null&&(e=r||0,r=0),t||(t=e<r?-1:1);for(var n=Math.max(Math.ceil((e-r)/t),0),i=Array(n),a=0;a<n;a++,r+=t)i[a]=r;return i}function Uj(r,e){if(e==null||e<1)return[];for(var t=[],n=0,i=r.length;n<i;)t.push(ox.call(r,n,n+=e));return t}function sS(r,e){return r._chain?Pt(e).chain():e}function oS(r){return Za(mm(r),function(e){var t=Pt[e]=r[e];Pt.prototype[e]=function(){var n=[this._wrapped];return J9.apply(n,arguments),sS(this,t.apply(Pt,n))}}),Pt}Za(["pop","push","reverse","shift","sort","splice","unshift"],function(r){var e=Qv[r];Pt.prototype[r]=function(){var t=this._wrapped;return t!=null&&(e.apply(t,arguments),(r==="shift"||r==="splice")&&t.length===0&&delete t[0]),sS(this,t)}});Za(["concat","join","slice"],function(r){var e=Qv[r];Pt.prototype[r]=function(){var t=this._wrapped;return t!=null&&(t=e.apply(t,arguments)),sS(this,t)}});const _B=Object.freeze(Object.defineProperty({__proto__:null,VERSION:_A,after:rj,all:lv,allKeys:_p,any:cv,assign:gp,before:YA,bind:GA,bindAll:K5,chain:$5,chunk:Uj,clone:j5,collect:tl,compact:Dj,compose:nj,constant:jA,contains:Da,countBy:xj,create:R5,debounce:ej,default:Pt,defaults:WA,defer:Z5,delay:$A,detect:bm,difference:aS,drop:Td,each:Za,escape:W5,every:lv,extend:zA,extendOwn:gp,filter:jc,find:bm,findIndex:i1,findKey:KA,findLastIndex:QA,findWhere:lj,first:Kh,flatten:_j,foldl:Yh,foldr:ov,forEach:Za,functions:mm,get:VA,groupBy:mj,has:I5,head:Kh,identity:e1,include:Da,includes:Da,indexBy:bj,indexOf:JA,initial:iS,inject:Yh,intersection:Ej,invert:BA,invoke:dj,isArguments:Jv,isArray:Wc,isArrayBuffer:NA,isBoolean:EA,isDataView:gm,isDate:u5,isElement:c5,isEmpty:v5,isEqual:k5,isError:h5,isFinite:m5,isFunction:jr,isMap:S5,isMatch:IA,isNaN:RA,isNull:l5,isNumber:TA,isObject:zc,isRegExp:d5,isSet:T5,isString:Zv,isSymbol:CA,isTypedArray:FA,isUndefined:SA,isWeakMap:E5,isWeakSet:C5,iteratee:n1,keys:Zn,last:kj,lastIndexOf:oj,map:tl,mapObject:M5,matcher:Nd,matches:Nd,max:eS,memoize:Q5,methods:mm,min:fj,mixin:oS,negate:r1,noop:XA,now:mp,object:Cj,omit:wj,once:ij,pairs:N5,partial:Md,partition:yj,pick:rS,pluck:a1,property:t1,propertyOf:L5,random:sv,range:Nj,reduce:Yh,reduceRight:ov,reject:uj,rest:Td,restArguments:Qr,result:X5,sample:nS,select:jc,shuffle:pj,size:vj,some:cv,sortBy:gj,sortedIndex:ZA,tail:Td,take:Kh,tap:F5,template:V5,templateSettings:q5,throttle:J5,times:B5,toArray:tS,toPath:HA,transpose:ym,unescape:H5,union:Sj,uniq:xm,unique:xm,uniqueId:G5,unzip:ym,values:Od,where:hj,without:Aj,wrap:tj,zip:Tj},Symbol.toStringTag,{value:"Module"}));var FD=oS(_B);FD._=FD;const AB=Object.freeze(Object.defineProperty({__proto__:null,VERSION:_A,after:rj,all:lv,allKeys:_p,any:cv,assign:gp,before:YA,bind:GA,bindAll:K5,chain:$5,chunk:Uj,clone:j5,collect:tl,compact:Dj,compose:nj,constant:jA,contains:Da,countBy:xj,create:R5,debounce:ej,default:FD,defaults:WA,defer:Z5,delay:$A,detect:bm,difference:aS,drop:Td,each:Za,escape:W5,every:lv,extend:zA,extendOwn:gp,filter:jc,find:bm,findIndex:i1,findKey:KA,findLastIndex:QA,findWhere:lj,first:Kh,flatten:_j,foldl:Yh,foldr:ov,forEach:Za,functions:mm,get:VA,groupBy:mj,has:I5,head:Kh,identity:e1,include:Da,includes:Da,indexBy:bj,indexOf:JA,initial:iS,inject:Yh,intersection:Ej,invert:BA,invoke:dj,isArguments:Jv,isArray:Wc,isArrayBuffer:NA,isBoolean:EA,isDataView:gm,isDate:u5,isElement:c5,isEmpty:v5,isEqual:k5,isError:h5,isFinite:m5,isFunction:jr,isMap:S5,isMatch:IA,isNaN:RA,isNull:l5,isNumber:TA,isObject:zc,isRegExp:d5,isSet:T5,isString:Zv,isSymbol:CA,isTypedArray:FA,isUndefined:SA,isWeakMap:E5,isWeakSet:C5,iteratee:n1,keys:Zn,last:kj,lastIndexOf:oj,map:tl,mapObject:M5,matcher:Nd,matches:Nd,max:eS,memoize:Q5,methods:mm,min:fj,mixin:oS,negate:r1,noop:XA,now:mp,object:Cj,omit:wj,once:ij,pairs:N5,partial:Md,partition:yj,pick:rS,pluck:a1,property:t1,propertyOf:L5,random:sv,range:Nj,reduce:Yh,reduceRight:ov,reject:uj,rest:Td,restArguments:Qr,result:X5,sample:nS,select:jc,shuffle:pj,size:vj,some:cv,sortBy:gj,sortedIndex:ZA,tail:Td,take:Kh,tap:F5,template:V5,templateSettings:q5,throttle:J5,times:B5,toArray:tS,toPath:HA,transpose:ym,unescape:H5,union:Sj,uniq:xm,unique:xm,uniqueId:G5,unzip:ym,values:Od,where:hj,without:Aj,wrap:tj,zip:Tj},Symbol.toStringTag,{value:"Module"})),Nn=DM(AB);var Uy={},la={},Yw={exports:{}},Ry={exports:{}},e3;function Ap(){if(e3)return Ry.exports;e3=1;var r=(function(){return this===void 0})();if(r)Ry.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(h,g){var b=Object.getOwnPropertyDescriptor(h,g);return!!(!b||b.writable||b.set)}};else{var e={}.hasOwnProperty,t={}.toString,n={}.constructor.prototype,i=function(h){var g=[];for(var b in h)e.call(h,b)&&g.push(b);return g},a=function(h,g){return{value:h[g]}},s=function(h,g,b){return h[g]=b.value,h},l=function(h){return h},u=function(h){try{return Object(h).constructor.prototype}catch{return n}},d=function(h){try{return t.call(h)==="[object Array]"}catch{return!1}};Ry.exports={isArray:d,keys:i,names:i,defineProperty:s,getDescriptor:a,freeze:l,getPrototypeOf:u,isES5:r,propertyIsWritable:function(){return!0}}}return Ry.exports}var _g,t3;function on(){if(t3)return _g;t3=1;var r={},e=Ap(),t=typeof navigator>"u",n={e:{}},i,a=typeof self<"u"?self:typeof window<"u"?window:typeof Tc<"u"?Tc:_g!==void 0?_g:null;function s(){try{var z=i;return i=null,z.apply(this,arguments)}catch(ge){return n.e=ge,n}}function l(z){return i=z,s}var u=function(z,ge){var ve={}.hasOwnProperty;function je(){this.constructor=z,this.constructor$=ge;for(var Ie in ge.prototype)ve.call(ge.prototype,Ie)&&Ie.charAt(Ie.length-1)!=="$"&&(this[Ie+"$"]=ge.prototype[Ie])}return je.prototype=ge.prototype,z.prototype=new je,z.prototype};function d(z){return z==null||z===!0||z===!1||typeof z=="string"||typeof z=="number"}function h(z){return typeof z=="function"||typeof z=="object"&&z!==null}function g(z){return d(z)?new Error(j(z)):z}function b(z,ge){var ve=z.length,je=new Array(ve+1),Ie;for(Ie=0;Ie<ve;++Ie)je[Ie]=z[Ie];return je[Ie]=ge,je}function x(z,ge,ve){if(e.isES5){var je=Object.getOwnPropertyDescriptor(z,ge);if(je!=null)return je.get==null&&je.set==null?je.value:ve}else return{}.hasOwnProperty.call(z,ge)?z[ge]:void 0}function k(z,ge,ve){if(d(z))return z;var je={value:ve,configurable:!0,enumerable:!1,writable:!0};return e.defineProperty(z,ge,je),z}function v(z){throw z}var w=(function(){var z=[Array.prototype,Object.prototype,Function.prototype],ge=function(Ie){for(var Pe=0;Pe<z.length;++Pe)if(z[Pe]===Ie)return!0;return!1};if(e.isES5){var ve=Object.getOwnPropertyNames;return function(Ie){for(var Pe=[],fe=Object.create(null);Ie!=null&&!ge(Ie);){var Ue;try{Ue=ve(Ie)}catch{return Pe}for(var be=0;be<Ue.length;++be){var Fe=Ue[be];if(!fe[Fe]){fe[Fe]=!0;var $e=Object.getOwnPropertyDescriptor(Ie,Fe);$e!=null&&$e.get==null&&$e.set==null&&Pe.push(Fe)}}Ie=e.getPrototypeOf(Ie)}return Pe}}else{var je={}.hasOwnProperty;return function(Ie){if(ge(Ie))return[];var Pe=[];e:for(var fe in Ie)if(je.call(Ie,fe))Pe.push(fe);else{for(var Ue=0;Ue<z.length;++Ue)if(je.call(z[Ue],fe))continue e;Pe.push(fe)}return Pe}}})(),D=/this\s*\.\s*\S+\s*=/;function _(z){try{if(typeof z=="function"){var ge=e.names(z.prototype),ve=e.isES5&&ge.length>1,je=ge.length>0&&!(ge.length===1&&ge[0]==="constructor"),Ie=D.test(z+"")&&e.names(z).length>0;if(ve||je||Ie)return!0}return!1}catch{return!1}}function A(z){return z}var N=/^[a-z$_][a-z$_0-9]*$/i;function E(z){return N.test(z)}function C(z,ge,ve){for(var je=new Array(z),Ie=0;Ie<z;++Ie)je[Ie]=ge+Ie+ve;return je}function j(z){try{return z+""}catch{return"[no string representation]"}}function M(z){return z!==null&&typeof z=="object"&&typeof z.message=="string"&&typeof z.name=="string"}function O(z){try{k(z,"isOperational",!0)}catch{}}function F(z){return z==null?!1:z instanceof Error.__BluebirdErrorTypes__.OperationalError||z.isOperational===!0}function G(z){return M(z)&&e.propertyIsWritable(z,"stack")}var R=(function(){return"stack"in new Error?function(z){return G(z)?z:new Error(j(z))}:function(z){if(G(z))return z;try{throw new Error(j(z))}catch(ge){return ge}}})();function W(z){return{}.toString.call(z)}function U(z,ge,ve){for(var je=e.names(z),Ie=0;Ie<je.length;++Ie){var Pe=je[Ie];if(ve(Pe))try{e.defineProperty(ge,Pe,e.getDescriptor(z,Pe))}catch{}}}var X=function(z){return e.isArray(z)?z:null};if(typeof Symbol<"u"&&Symbol.iterator){var P=typeof Array.from=="function"?function(z){return Array.from(z)}:function(z){for(var ge=[],ve=z[Symbol.iterator](),je;!(je=ve.next()).done;)ge.push(je.value);return ge};X=function(z){return e.isArray(z)?z:z!=null&&typeof z[Symbol.iterator]=="function"?P(z):null}}var B=typeof process<"u"&&W(process).toLowerCase()==="[object process]",ee=typeof process<"u"&&typeof r<"u";function Y(z){return ee?r[z]:void 0}function H(){if(typeof Promise=="function")try{var z=new Promise(function(){});if({}.toString.call(z)==="[object Promise]")return Promise}catch{}}function J(z,ge){return z.bind(ge)}var ie={isClass:_,isIdentifier:E,inheritedDataKeys:w,getDataPropertyOrDefault:x,thrower:v,isArray:e.isArray,asArray:X,notEnumerableProp:k,isPrimitive:d,isObject:h,isError:M,canEvaluate:t,errorObj:n,tryCatch:l,inherits:u,withAppended:b,maybeWrapAsError:g,toFastProperties:A,filledRange:C,toString:j,canAttachTrace:G,ensureErrorObject:R,originatesFromRejection:F,markAsOriginatingFromRejection:O,classString:W,copyDescriptors:U,hasDevTools:typeof chrome<"u"&&chrome&&typeof chrome.loadTimes=="function",isNode:B,hasEnvVariables:ee,env:Y,global:a,getNativePromise:H,domainBind:J};ie.isRecentNode=ie.isNode&&(function(){var z=process.versions.node.split(".").map(Number);return z[0]===0&&z[1]>10||z[0]>0})(),ie.isNode&&ie.toFastProperties(process);try{throw new Error}catch(z){ie.lastLineError=z}return _g=ie,_g}var jy={exports:{}},Kw,n3;function SB(){if(n3)return Kw;n3=1;var r=on(),e,t=function(){throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)},n=r.getNativePromise();if(r.isNode&&typeof MutationObserver>"u"){var i=Tc.setImmediate,a=process.nextTick;e=r.isRecentNode?function(l){i.call(Tc,l)}:function(l){a.call(process,l)}}else if(typeof n=="function"&&typeof n.resolve=="function"){var s=n.resolve();e=function(l){s.then(l)}}else typeof MutationObserver<"u"&&!(typeof window<"u"&&window.navigator&&(window.navigator.standalone||window.cordova))?e=(function(){var l=document.createElement("div"),u={attributes:!0},d=!1,h=document.createElement("div"),g=new MutationObserver(function(){l.classList.toggle("foo"),d=!1});g.observe(h,u);var b=function(){d||(d=!0,h.classList.toggle("foo"))};return function(k){var v=new MutationObserver(function(){v.disconnect(),k()});v.observe(l,u),b()}})():typeof setImmediate<"u"?e=function(l){setImmediate(l)}:typeof setTimeout<"u"?e=function(l){setTimeout(l,0)}:e=t;return Kw=e,Kw}var Qw,r3;function EB(){if(r3)return Qw;r3=1;function r(t,n,i,a,s){for(var l=0;l<s;++l)i[l+a]=t[l+n],t[l+n]=void 0}function e(t){this._capacity=t,this._length=0,this._front=0}return e.prototype._willBeOverCapacity=function(t){return this._capacity<t},e.prototype._pushOne=function(t){var n=this.length();this._checkCapacity(n+1);var i=this._front+n&this._capacity-1;this[i]=t,this._length=n+1},e.prototype.push=function(t,n,i){var a=this.length()+3;if(this._willBeOverCapacity(a)){this._pushOne(t),this._pushOne(n),this._pushOne(i);return}var s=this._front+a-3;this._checkCapacity(a);var l=this._capacity-1;this[s+0&l]=t,this[s+1&l]=n,this[s+2&l]=i,this._length=a},e.prototype.shift=function(){var t=this._front,n=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,n},e.prototype.length=function(){return this._length},e.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},e.prototype._resizeTo=function(t){var n=this._capacity;this._capacity=t;var i=this._front,a=this._length,s=i+a&n-1;r(this,0,this,n,s)},Qw=e,Qw}var i3;function TB(){if(i3)return jy.exports;i3=1;var r;try{throw new Error}catch(u){r=u}var e=SB(),t=EB(),n=on();function i(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new t(16),this._normalQueue=new t(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var u=this;this.drainQueues=function(){u._drainQueues()},this._schedule=e}i.prototype.setScheduler=function(u){var d=this._schedule;return this._schedule=u,this._customScheduler=!0,d},i.prototype.hasCustomScheduler=function(){return this._customScheduler},i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){n.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(u,d){d?(process.stderr.write("Fatal "+(u instanceof Error?u.stack:u)+`
`),process.exit(2)):this.throwLater(u)},i.prototype.throwLater=function(u,d){if(arguments.length===1&&(d=u,u=function(){throw d}),typeof setTimeout<"u")setTimeout(function(){u(d)},0);else try{this._schedule(function(){u(d)})}catch{throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)}};function a(u,d,h){this._lateQueue.push(u,d,h),this._queueTick()}function s(u,d,h){this._normalQueue.push(u,d,h),this._queueTick()}function l(u){this._normalQueue._pushOne(u),this._queueTick()}return n.hasDevTools?(i.prototype.invokeLater=function(u,d,h){this._trampolineEnabled?a.call(this,u,d,h):this._schedule(function(){setTimeout(function(){u.call(d,h)},100)})},i.prototype.invoke=function(u,d,h){this._trampolineEnabled?s.call(this,u,d,h):this._schedule(function(){u.call(d,h)})},i.prototype.settlePromises=function(u){this._trampolineEnabled?l.call(this,u):this._schedule(function(){u._settlePromises()})}):(i.prototype.invokeLater=a,i.prototype.invoke=s,i.prototype.settlePromises=l),i.prototype._drainQueue=function(u){for(;u.length()>0;){var d=u.shift();if(typeof d!="function"){d._settlePromises();continue}var h=u.shift(),g=u.shift();d.call(h,g)}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},jy.exports=i,jy.exports.firstLineError=r,jy.exports}var Zw,a3;function Fc(){if(a3)return Zw;a3=1;var r=Ap(),e=r.freeze,t=on(),n=t.inherits,i=t.notEnumerableProp;function a(D,_){function A(N){if(!(this instanceof A))return new A(N);i(this,"message",typeof N=="string"?N:_),i(this,"name",D),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return n(A,Error),A}var s,l,u=a("Warning","warning"),d=a("CancellationError","cancellation error"),h=a("TimeoutError","timeout error"),g=a("AggregateError","aggregate error");try{s=TypeError,l=RangeError}catch{s=a("TypeError","type error"),l=a("RangeError","range error")}for(var b="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),x=0;x<b.length;++x)typeof Array.prototype[b[x]]=="function"&&(g.prototype[b[x]]=Array.prototype[b[x]]);r.defineProperty(g.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),g.prototype.isOperational=!0;var k=0;g.prototype.toString=function(){var D=Array(k*4+1).join(" "),_=`
`+D+`AggregateError of:
`;k++,D=Array(k*4+1).join(" ");for(var A=0;A<this.length;++A){for(var N=this[A]===this?"[Circular AggregateError]":this[A]+"",E=N.split(`
`),C=0;C<E.length;++C)E[C]=D+E[C];N=E.join(`
`),_+=N+`
`}return k--,_};function v(D){if(!(this instanceof v))return new v(D);i(this,"name","OperationalError"),i(this,"message",D),this.cause=D,this.isOperational=!0,D instanceof Error?(i(this,"message",D.message),i(this,"stack",D.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}n(v,Error);var w=Error.__BluebirdErrorTypes__;return w||(w=e({CancellationError:d,TimeoutError:h,OperationalError:v,RejectionError:v,AggregateError:g}),r.defineProperty(Error,"__BluebirdErrorTypes__",{value:w,writable:!1,enumerable:!1,configurable:!1})),Zw={Error,TypeError:s,RangeError:l,CancellationError:w.CancellationError,OperationalError:w.OperationalError,TimeoutError:w.TimeoutError,AggregateError:w.AggregateError,Warning:u},Zw}var Jw,s3;function CB(){return s3||(s3=1,Jw=function(r,e){var t=on(),n=t.errorObj,i=t.isObject;function a(g,b){if(i(g)){if(g instanceof r)return g;var x=l(g);if(x===n){b&&b._pushContext();var k=r.reject(x.e);return b&&b._popContext(),k}else if(typeof x=="function"){if(d(g)){var k=new r(e);return g._then(k._fulfill,k._reject,void 0,k,null),k}return h(g,x,b)}}return g}function s(g){return g.then}function l(g){try{return s(g)}catch(b){return n.e=b,n}}var u={}.hasOwnProperty;function d(g){try{return u.call(g,"_promise0")}catch{return!1}}function h(g,b,x){var k=new r(e),v=k;x&&x._pushContext(),k._captureStackTrace(),x&&x._popContext();var w=!0,D=t.tryCatch(b).call(g,_,A);w=!1,k&&D===n&&(k._rejectCallback(D.e,!0,!0),k=null);function _(N){k&&(k._resolveCallback(N),k=null)}function A(N){k&&(k._rejectCallback(N,w,!0),k=null)}return v}return a}),Jw}var ek,o3;function NB(){return o3||(o3=1,ek=function(r,e,t,n,i){var a=on();a.isArray;function s(u){switch(u){case-2:return[];case-3:return{}}}function l(u){var d=this._promise=new r(e);u instanceof r&&d._propagateFrom(u,3),d._setOnCancel(this),this._values=u,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return a.inherits(l,i),l.prototype.length=function(){return this._length},l.prototype.promise=function(){return this._promise},l.prototype._init=function u(d,h){var g=t(this._values,this._promise);if(g instanceof r){g=g._target();var b=g._bitField;if(this._values=g,(b&50397184)===0)return this._promise._setAsyncGuaranteed(),g._then(u,this._reject,void 0,this,h);if((b&33554432)!==0)g=g._value();else return(b&16777216)!==0?this._reject(g._reason()):this._cancel()}if(g=a.asArray(g),g===null){var x=n("expecting an array or an iterable object but got "+a.classString(g)).reason();this._promise._rejectCallback(x,!1);return}if(g.length===0){h===-5?this._resolveEmptyArray():this._resolve(s(h));return}this._iterate(g)},l.prototype._iterate=function(u){var d=this.getActualLength(u.length);this._length=d,this._values=this.shouldCopyValues()?new Array(d):this._values;for(var h=this._promise,g=!1,b=null,x=0;x<d;++x){var k=t(u[x],h);k instanceof r?(k=k._target(),b=k._bitField):b=null,g?b!==null&&k.suppressUnhandledRejections():b!==null?(b&50397184)===0?(k._proxy(this,x),this._values[x]=k):(b&33554432)!==0?g=this._promiseFulfilled(k._value(),x):(b&16777216)!==0?g=this._promiseRejected(k._reason(),x):g=this._promiseCancelled(x):g=this._promiseFulfilled(k,x)}g||h._setAsyncGuaranteed()},l.prototype._isResolved=function(){return this._values===null},l.prototype._resolve=function(u){this._values=null,this._promise._fulfill(u)},l.prototype._cancel=function(){this._isResolved()||!this._promise._isCancellable()||(this._values=null,this._promise._cancel())},l.prototype._reject=function(u){this._values=null,this._promise._rejectCallback(u,!1)},l.prototype._promiseFulfilled=function(u,d){this._values[d]=u;var h=++this._totalResolved;return h>=this._length?(this._resolve(this._values),!0):!1},l.prototype._promiseCancelled=function(){return this._cancel(),!0},l.prototype._promiseRejected=function(u){return this._totalResolved++,this._reject(u),!0},l.prototype._resultCancelled=function(){if(!this._isResolved()){var u=this._values;if(this._cancel(),u instanceof r)u.cancel();else for(var d=0;d<u.length;++d)u[d]instanceof r&&u[d].cancel()}},l.prototype.shouldCopyValues=function(){return!0},l.prototype.getActualLength=function(u){return u},l}),ek}var tk,l3;function UB(){return l3||(l3=1,tk=function(r){var e=!1,t=[];r.prototype._promiseCreated=function(){},r.prototype._pushContext=function(){},r.prototype._popContext=function(){return null},r._peekContext=r.prototype._peekContext=function(){};function n(){this._trace=new n.CapturedTrace(a())}n.prototype._pushContext=function(){this._trace!==void 0&&(this._trace._promiseCreated=null,t.push(this._trace))},n.prototype._popContext=function(){if(this._trace!==void 0){var s=t.pop(),l=s._promiseCreated;return s._promiseCreated=null,l}return null};function i(){if(e)return new n}function a(){var s=t.length-1;if(s>=0)return t[s]}return n.CapturedTrace=null,n.create=i,n.deactivateLongStackTraces=function(){},n.activateLongStackTraces=function(){var s=r.prototype._pushContext,l=r.prototype._popContext,u=r._peekContext,d=r.prototype._peekContext,h=r.prototype._promiseCreated;n.deactivateLongStackTraces=function(){r.prototype._pushContext=s,r.prototype._popContext=l,r._peekContext=u,r.prototype._peekContext=d,r.prototype._promiseCreated=h,e=!1},e=!0,r.prototype._pushContext=n.prototype._pushContext,r.prototype._popContext=n.prototype._popContext,r._peekContext=r.prototype._peekContext=a,r.prototype._promiseCreated=function(){var g=this._peekContext();g&&g._promiseCreated==null&&(g._promiseCreated=this)}},n}),tk}var nk,c3;function RB(){return c3||(c3=1,nk=function(r,e){var t=r._getDomain,n=r._async,i=Fc().Warning,a=on(),s=a.canAttachTrace,l,u,d=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,h=/\((?:timers\.js):\d+:\d+\)/,g=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,b=null,x=null,k=!1,v,w=!!(a.env("BLUEBIRD_DEBUG")!=0&&(a.env("BLUEBIRD_DEBUG")||a.env("NODE_ENV")==="development")),D=!!(a.env("BLUEBIRD_WARNINGS")!=0&&(w||a.env("BLUEBIRD_WARNINGS"))),_=!!(a.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(w||a.env("BLUEBIRD_LONG_STACK_TRACES"))),A=a.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(D||!!a.env("BLUEBIRD_W_FORGOTTEN_RETURN"));r.prototype.suppressUnhandledRejections=function(){var se=this._target();se._bitField=se._bitField&-1048577|524288},r.prototype._ensurePossibleRejectionHandled=function(){(this._bitField&524288)===0&&(this._setRejectionIsUnhandled(),n.invokeLater(this._notifyUnhandledRejection,this,void 0))},r.prototype._notifyUnhandledRejectionIsHandled=function(){Fe("rejectionHandled",l,void 0,this)},r.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456},r.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0},r.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var se=this._settledValue();this._setUnhandledRejectionIsNotified(),Fe("unhandledRejection",u,se,this)}},r.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144},r.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},r.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0},r.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576},r.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},r.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0},r.prototype._warn=function(se,de,ye){return ge(se,de,ye||this)},r.onPossiblyUnhandledRejection=function(se){var de=t();u=typeof se=="function"?de===null?se:a.domainBind(de,se):void 0},r.onUnhandledRejectionHandled=function(se){var de=t();l=typeof se=="function"?de===null?se:a.domainBind(de,se):void 0};var N=function(){};r.longStackTraces=function(){if(n.haveItemsQueued()&&!pe.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);if(!pe.longStackTraces&&he()){var se=r.prototype._captureStackTrace,de=r.prototype._attachExtraTrace;pe.longStackTraces=!0,N=function(){if(n.haveItemsQueued()&&!pe.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);r.prototype._captureStackTrace=se,r.prototype._attachExtraTrace=de,e.deactivateLongStackTraces(),n.enableTrampoline(),pe.longStackTraces=!1},r.prototype._captureStackTrace=H,r.prototype._attachExtraTrace=J,e.activateLongStackTraces(),n.disableTrampolineIfNecessary()}},r.hasLongStackTraces=function(){return pe.longStackTraces&&he()};var E=(function(){try{if(typeof CustomEvent=="function"){var se=new CustomEvent("CustomEvent");return a.global.dispatchEvent(se),function(de,ye){var ae=new CustomEvent(de.toLowerCase(),{detail:ye,cancelable:!0});return!a.global.dispatchEvent(ae)}}else if(typeof Event=="function"){var se=new Event("CustomEvent");return a.global.dispatchEvent(se),function(ye,ae){var ke=new Event(ye.toLowerCase(),{cancelable:!0});return ke.detail=ae,!a.global.dispatchEvent(ke)}}else{var se=document.createEvent("CustomEvent");return se.initCustomEvent("testingtheevent",!1,!0,{}),a.global.dispatchEvent(se),function(ye,ae){var ke=document.createEvent("CustomEvent");return ke.initCustomEvent(ye.toLowerCase(),!1,!0,ae),!a.global.dispatchEvent(ke)}}}catch{}return function(){return!1}})(),C=(function(){return a.isNode?function(){return process.emit.apply(process,arguments)}:a.global?function(se){var de="on"+se.toLowerCase(),ye=a.global[de];return ye?(ye.apply(a.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}})();function j(se,de){return{promise:de}}var M={promiseCreated:j,promiseFulfilled:j,promiseRejected:j,promiseResolved:j,promiseCancelled:j,promiseChained:function(se,de,ye){return{promise:de,child:ye}},warning:function(se,de){return{warning:de}},unhandledRejection:function(se,de,ye){return{reason:de,promise:ye}},rejectionHandled:j},O=function(se){var de=!1;try{de=C.apply(null,arguments)}catch(ae){n.throwLater(ae),de=!0}var ye=!1;try{ye=E(se,M[se].apply(null,arguments))}catch(ae){n.throwLater(ae),ye=!0}return ye||de};r.config=function(se){if(se=Object(se),"longStackTraces"in se&&(se.longStackTraces?r.longStackTraces():!se.longStackTraces&&r.hasLongStackTraces()&&N()),"warnings"in se){var de=se.warnings;pe.warnings=!!de,A=pe.warnings,a.isObject(de)&&"wForgottenReturn"in de&&(A=!!de.wForgottenReturn)}if("cancellation"in se&&se.cancellation&&!pe.cancellation){if(n.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");r.prototype._clearCancellationData=X,r.prototype._propagateFrom=P,r.prototype._onCancel=W,r.prototype._setOnCancel=U,r.prototype._attachCancellationCallback=R,r.prototype._execute=G,ee=P,pe.cancellation=!0}return"monitoring"in se&&(se.monitoring&&!pe.monitoring?(pe.monitoring=!0,r.prototype._fireEvent=O):!se.monitoring&&pe.monitoring&&(pe.monitoring=!1,r.prototype._fireEvent=F)),r};function F(){return!1}r.prototype._fireEvent=F,r.prototype._execute=function(se,de,ye){try{se(de,ye)}catch(ae){return ae}},r.prototype._onCancel=function(){},r.prototype._setOnCancel=function(se){},r.prototype._attachCancellationCallback=function(se){},r.prototype._captureStackTrace=function(){},r.prototype._attachExtraTrace=function(){},r.prototype._clearCancellationData=function(){},r.prototype._propagateFrom=function(se,de){};function G(se,de,ye){var ae=this;try{se(de,ye,function(ke){if(typeof ke!="function")throw new TypeError("onCancel must be a function, got: "+a.toString(ke));ae._attachCancellationCallback(ke)})}catch(ke){return ke}}function R(se){if(!this._isCancellable())return this;var de=this._onCancel();de!==void 0?a.isArray(de)?de.push(se):this._setOnCancel([de,se]):this._setOnCancel(se)}function W(){return this._onCancelField}function U(se){this._onCancelField=se}function X(){this._cancellationParent=void 0,this._onCancelField=void 0}function P(se,de){if((de&1)!==0){this._cancellationParent=se;var ye=se._branchesRemainingToCancel;ye===void 0&&(ye=0),se._branchesRemainingToCancel=ye+1}(de&2)!==0&&se._isBound()&&this._setBoundTo(se._boundTo)}function B(se,de){(de&2)!==0&&se._isBound()&&this._setBoundTo(se._boundTo)}var ee=B;function Y(){var se=this._boundTo;return se!==void 0&&se instanceof r?se.isFulfilled()?se.value():void 0:se}function H(){this._trace=new Ce(this._peekContext())}function J(se,de){if(s(se)){var ye=this._trace;if(ye!==void 0&&de&&(ye=ye._parent),ye!==void 0)ye.attachExtraTrace(se);else if(!se.__stackCleaned__){var ae=Ue(se);a.notEnumerableProp(se,"stack",ae.message+`
`+ae.stack.join(`
`)),a.notEnumerableProp(se,"__stackCleaned__",!0)}}}function ie(se,de,ye,ae,ke){if(se===void 0&&de!==null&&A){if(ke!==void 0&&ke._returnedNonUndefined()||(ae._bitField&65535)===0)return;ye&&(ye=ye+" ");var Me="",ze="";if(de._trace){for(var Ge=de._trace.stack.split(`
`),at=Pe(Ge),xe=at.length-1;xe>=0;--xe){var Re=at[xe];if(!h.test(Re)){var Ve=Re.match(g);Ve&&(Me="at "+Ve[1]+":"+Ve[2]+":"+Ve[3]+" ");break}}if(at.length>0){for(var Ze=at[0],xe=0;xe<Ge.length;++xe)if(Ge[xe]===Ze){xe>0&&(ze=`
`+Ge[xe-1]);break}}}var Ke="a promise was created in a "+ye+"handler "+Me+"but was not returned from it, see http://goo.gl/rRqMUw"+ze;ae._warn(Ke,!0,de)}}function z(se,de){var ye=se+" is deprecated and will be removed in a future version.";return de&&(ye+=" Use "+de+" instead."),ge(ye)}function ge(se,de,ye){if(pe.warnings){var ae=new i(se),ke;if(de)ye._attachExtraTrace(ae);else if(pe.longStackTraces&&(ke=r._peekContext()))ke.attachExtraTrace(ae);else{var Me=Ue(ae);ae.stack=Me.message+`
`+Me.stack.join(`
`)}O("warning",ae)||be(ae,"",!0)}}function ve(se,de){for(var ye=0;ye<de.length-1;++ye)de[ye].push("From previous event:"),de[ye]=de[ye].join(`
`);return ye<de.length&&(de[ye]=de[ye].join(`
`)),se+`
`+de.join(`
`)}function je(se){for(var de=0;de<se.length;++de)(se[de].length===0||de+1<se.length&&se[de][0]===se[de+1][0])&&(se.splice(de,1),de--)}function Ie(se){for(var de=se[0],ye=1;ye<se.length;++ye){for(var ae=se[ye],ke=de.length-1,Me=de[ke],ze=-1,Ge=ae.length-1;Ge>=0;--Ge)if(ae[Ge]===Me){ze=Ge;break}for(var Ge=ze;Ge>=0;--Ge){var at=ae[Ge];if(de[ke]===at)de.pop(),ke--;else break}de=ae}}function Pe(se){for(var de=[],ye=0;ye<se.length;++ye){var ae=se[ye],ke=ae==="    (No stack trace)"||b.test(ae),Me=ke&&oe(ae);ke&&!Me&&(k&&ae.charAt(0)!==" "&&(ae="    "+ae),de.push(ae))}return de}function fe(se){for(var de=se.stack.replace(/\s+$/g,"").split(`
`),ye=0;ye<de.length;++ye){var ae=de[ye];if(ae==="    (No stack trace)"||b.test(ae))break}return ye>0&&se.name!="SyntaxError"&&(de=de.slice(ye)),de}function Ue(se){var de=se.stack,ye=se.toString();return de=typeof de=="string"&&de.length>0?fe(se):["    (No stack trace)"],{message:ye,stack:se.name=="SyntaxError"?de:Pe(de)}}function be(se,de,ye){if(typeof console<"u"){var ae;if(a.isObject(se)){var ke=se.stack;ae=de+x(ke,se)}else ae=de+String(se);typeof v=="function"?v(ae,ye):(typeof console.log=="function"||typeof console.log=="object")&&console.log(ae)}}function Fe(se,de,ye,ae){var ke=!1;try{typeof de=="function"&&(ke=!0,se==="rejectionHandled"?de(ae):de(ye,ae))}catch(Me){n.throwLater(Me)}se==="unhandledRejection"?!O(se,ye,ae)&&!ke&&be(ye,"Unhandled rejection "):O(se,ae)}function $e(se){var de;if(typeof se=="function")de="[function "+(se.name||"anonymous")+"]";else{de=se&&typeof se.toString=="function"?se.toString():a.toString(se);var ye=/\[object [a-zA-Z0-9$_]+\]/;if(ye.test(de))try{var ae=JSON.stringify(se);de=ae}catch{}de.length===0&&(de="(empty array)")}return"(<"+I(de)+">, no stack trace)"}function I(se){var de=41;return se.length<de?se:se.substr(0,de-3)+"..."}function he(){return typeof Ne=="function"}var oe=function(){return!1},re=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function ne(se){var de=se.match(re);if(de)return{fileName:de[1],line:parseInt(de[2],10)}}function ue(se,de){if(he()){for(var ye=se.stack.split(`
`),ae=de.stack.split(`
`),ke=-1,Me=-1,ze,Ge,at=0;at<ye.length;++at){var xe=ne(ye[at]);if(xe){ze=xe.fileName,ke=xe.line;break}}for(var at=0;at<ae.length;++at){var xe=ne(ae[at]);if(xe){Ge=xe.fileName,Me=xe.line;break}}ke<0||Me<0||!ze||!Ge||ze!==Ge||ke>=Me||(oe=function(Re){if(d.test(Re))return!0;var Ve=ne(Re);return!!(Ve&&Ve.fileName===ze&&ke<=Ve.line&&Ve.line<=Me)})}}function Ce(se){this._parent=se,this._promisesCreated=0;var de=this._length=1+(se===void 0?0:se._length);Ne(this,Ce),de>32&&this.uncycle()}a.inherits(Ce,Error),e.CapturedTrace=Ce,Ce.prototype.uncycle=function(){var se=this._length;if(!(se<2)){for(var de=[],ye={},ae=0,ke=this;ke!==void 0;++ae)de.push(ke),ke=ke._parent;se=this._length=ae;for(var ae=se-1;ae>=0;--ae){var Me=de[ae].stack;ye[Me]===void 0&&(ye[Me]=ae)}for(var ae=0;ae<se;++ae){var ze=de[ae].stack,Ge=ye[ze];if(Ge!==void 0&&Ge!==ae){Ge>0&&(de[Ge-1]._parent=void 0,de[Ge-1]._length=1),de[ae]._parent=void 0,de[ae]._length=1;var at=ae>0?de[ae-1]:this;Ge<se-1?(at._parent=de[Ge+1],at._parent.uncycle(),at._length=at._parent._length+1):(at._parent=void 0,at._length=1);for(var xe=at._length+1,Re=ae-2;Re>=0;--Re)de[Re]._length=xe,xe++;return}}}},Ce.prototype.attachExtraTrace=function(se){if(!se.__stackCleaned__){this.uncycle();for(var de=Ue(se),ye=de.message,ae=[de.stack],ke=this;ke!==void 0;)ae.push(Pe(ke.stack.split(`
`))),ke=ke._parent;Ie(ae),je(ae),a.notEnumerableProp(se,"stack",ve(ye,ae)),a.notEnumerableProp(se,"__stackCleaned__",!0)}};var Ne=(function(){var de=/^\s*at\s*/,ye=function(ze,Ge){return typeof ze=="string"?ze:Ge.name!==void 0&&Ge.message!==void 0?Ge.toString():$e(Ge)};if(typeof Error.stackTraceLimit=="number"&&typeof Error.captureStackTrace=="function"){Error.stackTraceLimit+=6,b=de,x=ye;var ae=Error.captureStackTrace;return oe=function(ze){return d.test(ze)},function(ze,Ge){Error.stackTraceLimit+=6,ae(ze,Ge),Error.stackTraceLimit-=6}}var ke=new Error;if(typeof ke.stack=="string"&&ke.stack.split(`
`)[0].indexOf("stackDetection@")>=0)return b=/@/,x=ye,k=!0,function(Ge){Ge.stack=new Error().stack};var Me;try{throw new Error}catch(ze){Me="stack"in ze}return!("stack"in ke)&&Me&&typeof Error.stackTraceLimit=="number"?(b=de,x=ye,function(Ge){Error.stackTraceLimit+=6;try{throw new Error}catch(at){Ge.stack=at.stack}Error.stackTraceLimit-=6}):(x=function(ze,Ge){return typeof ze=="string"?ze:(typeof Ge=="object"||typeof Ge=="function")&&Ge.name!==void 0&&Ge.message!==void 0?Ge.toString():$e(Ge)},null)})();typeof console<"u"&&typeof console.warn<"u"&&(v=function(se){console.warn(se)},a.isNode&&process.stderr.isTTY?v=function(se,de){var ye=de?"\x1B[33m":"\x1B[31m";console.warn(ye+se+`\x1B[0m
`)}:!a.isNode&&typeof new Error().stack=="string"&&(v=function(se,de){console.warn("%c"+se,de?"color: darkorange":"color: red")}));var pe={warnings:D,longStackTraces:!1,cancellation:!1,monitoring:!1};return _&&r.longStackTraces(),{longStackTraces:function(){return pe.longStackTraces},warnings:function(){return pe.warnings},cancellation:function(){return pe.cancellation},monitoring:function(){return pe.monitoring},propagateFromFunction:function(){return ee},boundValueFunction:function(){return Y},checkForgottenReturns:ie,setBounds:ue,warn:ge,deprecated:z,CapturedTrace:Ce,fireDomEvent:E,fireGlobalEvent:C}}),nk}var rk,u3;function jB(){return u3||(u3=1,rk=function(r,e){var t=on(),n=r.CancellationError,i=t.errorObj;function a(g,b,x){this.promise=g,this.type=b,this.handler=x,this.called=!1,this.cancelPromise=null}a.prototype.isFinallyHandler=function(){return this.type===0};function s(g){this.finallyHandler=g}s.prototype._resultCancelled=function(){l(this.finallyHandler)};function l(g,b){return g.cancelPromise!=null?(arguments.length>1?g.cancelPromise._reject(b):g.cancelPromise._cancel(),g.cancelPromise=null,!0):!1}function u(){return h.call(this,this.promise._target()._settledValue())}function d(g){if(!l(this,g))return i.e=g,i}function h(g){var b=this.promise,x=this.handler;if(!this.called){this.called=!0;var k=this.isFinallyHandler()?x.call(b._boundValue()):x.call(b._boundValue(),g);if(k!==void 0){b._setReturnedNonUndefined();var v=e(k,b);if(v instanceof r){if(this.cancelPromise!=null)if(v._isCancelled()){var w=new n("late cancellation observer");return b._attachExtraTrace(w),i.e=w,i}else v.isPending()&&v._attachCancellationCallback(new s(this));return v._then(u,d,void 0,this,void 0)}}}return b.isRejected()?(l(this),i.e=g,i):(l(this),g)}return r.prototype._passThrough=function(g,b,x,k){return typeof g!="function"?this.then():this._then(x,k,void 0,new a(this,b,g),void 0)},r.prototype.lastly=r.prototype.finally=function(g){return this._passThrough(g,0,h,h)},r.prototype.tap=function(g){return this._passThrough(g,1,h)},a}),rk}var ik,d3;function FB(){return d3||(d3=1,ik=function(r){var e=on(),t=Ap().keys,n=e.tryCatch,i=e.errorObj;function a(s,l,u){return function(d){var h=u._boundValue();e:for(var g=0;g<s.length;++g){var b=s[g];if(b===Error||b!=null&&b.prototype instanceof Error){if(d instanceof b)return n(l).call(h,d)}else if(typeof b=="function"){var x=n(b).call(h,d);if(x===i)return x;if(x)return n(l).call(h,d)}else if(e.isObject(d)){for(var k=t(b),v=0;v<k.length;++v){var w=k[v];if(b[w]!=d[w])continue e}return n(l).call(h,d)}}return r}}return a}),ik}var ak,h3;function Rj(){if(h3)return ak;h3=1;var r=on(),e=r.maybeWrapAsError,t=Fc(),n=t.OperationalError,i=Ap();function a(d){return d instanceof Error&&i.getPrototypeOf(d)===Error.prototype}var s=/^(?:name|message|stack|cause)$/;function l(d){var h;if(a(d)){h=new n(d),h.name=d.name,h.message=d.message,h.stack=d.stack;for(var g=i.keys(d),b=0;b<g.length;++b){var x=g[b];s.test(x)||(h[x]=d[x])}return h}return r.markAsOriginatingFromRejection(d),d}function u(d,h){return function(g,b){if(d!==null){if(g){var x=l(e(g));d._attachExtraTrace(x),d._reject(x)}else if(!h)d._fulfill(b);else{for(var k=arguments.length,v=new Array(Math.max(k-1,0)),w=1;w<k;++w)v[w-1]=arguments[w];d._fulfill(v)}d=null}}}return ak=u,ak}var sk,f3;function IB(){return f3||(f3=1,sk=function(r,e,t,n,i){var a=on(),s=a.tryCatch;r.method=function(l){if(typeof l!="function")throw new r.TypeError("expecting a function but got "+a.classString(l));return function(){var u=new r(e);u._captureStackTrace(),u._pushContext();var d=s(l).apply(this,arguments),h=u._popContext();return i.checkForgottenReturns(d,h,"Promise.method",u),u._resolveFromSyncValue(d),u}},r.attempt=r.try=function(l){if(typeof l!="function")return n("expecting a function but got "+a.classString(l));var u=new r(e);u._captureStackTrace(),u._pushContext();var d;if(arguments.length>1){i.deprecated("calling Promise.try with more than 1 argument");var h=arguments[1],g=arguments[2];d=a.isArray(h)?s(l).apply(g,h):s(l).call(g,h)}else d=s(l)();var b=u._popContext();return i.checkForgottenReturns(d,b,"Promise.try",u),u._resolveFromSyncValue(d),u},r.prototype._resolveFromSyncValue=function(l){l===a.errorObj?this._rejectCallback(l.e,!1):this._resolveCallback(l,!0)}}),sk}var ok,p3;function OB(){return p3||(p3=1,ok=function(r,e,t,n){var i=!1,a=function(d,h){this._reject(h)},s=function(d,h){h.promiseRejectionQueued=!0,h.bindingPromise._then(a,a,null,this,d)},l=function(d,h){(this._bitField&50397184)===0&&this._resolveCallback(h.target)},u=function(d,h){h.promiseRejectionQueued||this._reject(d)};r.prototype.bind=function(d){i||(i=!0,r.prototype._propagateFrom=n.propagateFromFunction(),r.prototype._boundValue=n.boundValueFunction());var h=t(d),g=new r(e);g._propagateFrom(this,1);var b=this._target();if(g._setBoundTo(h),h instanceof r){var x={promiseRejectionQueued:!1,promise:g,target:b,bindingPromise:h};b._then(e,s,void 0,g,x),h._then(l,u,void 0,g,x),g._setOnCancel(h)}else g._resolveCallback(b);return g},r.prototype._setBoundTo=function(d){d!==void 0?(this._bitField=this._bitField|2097152,this._boundTo=d):this._bitField=this._bitField&-2097153},r.prototype._isBound=function(){return(this._bitField&2097152)===2097152},r.bind=function(d,h){return r.resolve(h).bind(d)}}),ok}var lk,g3;function MB(){return g3||(g3=1,lk=function(r,e,t,n){var i=on(),a=i.tryCatch,s=i.errorObj,l=r._async;r.prototype.break=r.prototype.cancel=function(){if(!n.cancellation())return this._warn("cancellation is disabled");for(var u=this,d=u;u._isCancellable();){if(!u._cancelBy(d)){d._isFollowing()?d._followee().cancel():d._cancelBranched();break}var h=u._cancellationParent;if(h==null||!h._isCancellable()){u._isFollowing()?u._followee().cancel():u._cancelBranched();break}else u._isFollowing()&&u._followee().cancel(),u._setWillBeCancelled(),d=u,u=h}},r.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},r.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===void 0||this._branchesRemainingToCancel<=0},r.prototype._cancelBy=function(u){return u===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},r.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},r.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),l.invoke(this._cancelPromises,this,void 0))},r.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},r.prototype._unsetOnCancel=function(){this._onCancelField=void 0},r.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},r.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},r.prototype._doInvokeOnCancel=function(u,d){if(i.isArray(u))for(var h=0;h<u.length;++h)this._doInvokeOnCancel(u[h],d);else if(u!==void 0)if(typeof u=="function"){if(!d){var g=a(u).call(this._boundValue());g===s&&(this._attachExtraTrace(g.e),l.throwLater(g.e))}}else u._resultCancelled(this)},r.prototype._invokeOnCancel=function(){var u=this._onCancel();this._unsetOnCancel(),l.invoke(this._doInvokeOnCancel,this,u)},r.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},r.prototype._resultCancelled=function(){this.cancel()}}),lk}var ck,m3;function LB(){return m3||(m3=1,ck=function(r){function e(){return this.value}function t(){throw this.reason}r.prototype.return=r.prototype.thenReturn=function(n){return n instanceof r&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},r.prototype.throw=r.prototype.thenThrow=function(n){return this._then(t,void 0,void 0,{reason:n},void 0)},r.prototype.catchThrow=function(n){if(arguments.length<=1)return this._then(void 0,t,void 0,{reason:n},void 0);var i=arguments[1],a=function(){throw i};return this.caught(n,a)},r.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof r&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var i=arguments[1];i instanceof r&&i.suppressUnhandledRejections();var a=function(){return i};return this.caught(n,a)}}),ck}var uk,b3;function BB(){return b3||(b3=1,uk=function(r){function e(u){u!==void 0?(u=u._target(),this._bitField=u._bitField,this._settledValueField=u._isFateSealed()?u._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var t=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError(`cannot get fulfillment value of a non-fulfilled promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},n=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError(`cannot get rejection reason of a non-rejected promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},i=e.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0},a=e.prototype.isRejected=function(){return(this._bitField&16777216)!==0},s=e.prototype.isPending=function(){return(this._bitField&50397184)===0},l=e.prototype.isResolved=function(){return(this._bitField&50331648)!==0};e.prototype.isCancelled=function(){return(this._bitField&8454144)!==0},r.prototype.__isCancelled=function(){return(this._bitField&65536)===65536},r.prototype._isCancelled=function(){return this._target().__isCancelled()},r.prototype.isCancelled=function(){return(this._target()._bitField&8454144)!==0},r.prototype.isPending=function(){return s.call(this._target())},r.prototype.isRejected=function(){return a.call(this._target())},r.prototype.isFulfilled=function(){return i.call(this._target())},r.prototype.isResolved=function(){return l.call(this._target())},r.prototype.value=function(){return t.call(this._target())},r.prototype.reason=function(){var u=this._target();return u._unsetRejectionIsUnhandled(),n.call(u)},r.prototype._value=function(){return this._settledValue()},r.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},r.PromiseInspection=e}),uk}var dk,x3;function PB(){return x3||(x3=1,dk=function(r,e,t,n,i,a){var s=on(),l=s.canEvaluate,u=s.tryCatch,d=s.errorObj,h;if(l){for(var g=function(_){return new Function("value","holder",`                             
	            'use strict';                                                    
	            holder.pIndex = value;                                           
	            holder.checkFulfillment(this);                                   
	            `.replace(/Index/g,_))},b=function(_){return new Function("promise","holder",`                           
	            'use strict';                                                    
	            holder.pIndex = promise;                                         
	            `.replace(/Index/g,_))},x=function(_){for(var A=new Array(_),N=0;N<A.length;++N)A[N]="this.p"+(N+1);var E=A.join(" = ")+" = null;",C=`var promise;
`+A.map(function(F){return`                                                         
	                promise = `+F+`;                                      
	                if (promise instanceof Promise) {                            
	                    promise.cancel();                                        
	                }                                                            
	            `}).join(`
`),j=A.join(", "),M="Holder$"+_,O=`return function(tryCatch, errorObj, Promise, async) {    
	            'use strict';                                                    
	            function [TheName](fn) {                                         
	                [TheProperties]                                              
	                this.fn = fn;                                                
	                this.asyncNeeded = true;                                     
	                this.now = 0;                                                
	            }                                                                
	                                                                             
	            [TheName].prototype._callFunction = function(promise) {          
	                promise._pushContext();                                      
	                var ret = tryCatch(this.fn)([ThePassedArguments]);           
	                promise._popContext();                                       
	                if (ret === errorObj) {                                      
	                    promise._rejectCallback(ret.e, false);                   
	                } else {                                                     
	                    promise._resolveCallback(ret);                           
	                }                                                            
	            };                                                               
	                                                                             
	            [TheName].prototype.checkFulfillment = function(promise) {       
	                var now = ++this.now;                                        
	                if (now === [TheTotal]) {                                    
	                    if (this.asyncNeeded) {                                  
	                        async.invoke(this._callFunction, this, promise);     
	                    } else {                                                 
	                        this._callFunction(promise);                         
	                    }                                                        
	                                                                             
	                }                                                            
	            };                                                               
	                                                                             
	            [TheName].prototype._resultCancelled = function() {              
	                [CancellationCode]                                           
	            };                                                               
	                                                                             
	            return [TheName];                                                
	        }(tryCatch, errorObj, Promise, async);                               
	        `;return O=O.replace(/\[TheName\]/g,M).replace(/\[TheTotal\]/g,_).replace(/\[ThePassedArguments\]/g,j).replace(/\[TheProperties\]/g,E).replace(/\[CancellationCode\]/g,C),new Function("tryCatch","errorObj","Promise","async",O)(u,d,r,i)},k=[],v=[],w=[],D=0;D<8;++D)k.push(x(D+1)),v.push(g(D+1)),w.push(b(D+1));h=function(_){this._reject(_)}}r.join=function(){var _=arguments.length-1,A;if(_>0&&typeof arguments[_]=="function"&&(A=arguments[_],_<=8&&l)){var U=new r(n);U._captureStackTrace();for(var N=k[_-1],E=new N(A),C=v,j=0;j<_;++j){var M=t(arguments[j],U);if(M instanceof r){M=M._target();var O=M._bitField;(O&50397184)===0?(M._then(C[j],h,void 0,U,E),w[j](M,E),E.asyncNeeded=!1):(O&33554432)!==0?C[j].call(U,M._value(),E):(O&16777216)!==0?U._reject(M._reason()):U._cancel()}else C[j].call(U,M,E)}if(!U._isFateSealed()){if(E.asyncNeeded){var F=a();F!==null&&(E.fn=s.domainBind(F,E.fn))}U._setAsyncGuaranteed(),U._setOnCancel(E)}return U}for(var G=arguments.length,R=new Array(G),W=0;W<G;++W)R[W]=arguments[W];A&&R.pop();var U=new e(R).promise();return A!==void 0?U.spread(A):U}}),dk}var hk,y3;function zB(){return y3||(y3=1,hk=function(r,e,t,n,i,a){var s=r._getDomain,l=on(),u=l.tryCatch,d=l.errorObj,h=r._async;function g(x,k,v,w){this.constructor$(x),this._promise._captureStackTrace();var D=s();this._callback=D===null?k:l.domainBind(D,k),this._preservedValues=w===i?new Array(this.length()):null,this._limit=v,this._inFlight=0,this._queue=[],h.invoke(this._asyncInit,this,void 0)}l.inherits(g,e),g.prototype._asyncInit=function(){this._init$(void 0,-2)},g.prototype._init=function(){},g.prototype._promiseFulfilled=function(x,k){var v=this._values,w=this.length(),D=this._preservedValues,_=this._limit;if(k<0){if(k=k*-1-1,v[k]=x,_>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(_>=1&&this._inFlight>=_)return v[k]=x,this._queue.push(k),!1;D!==null&&(D[k]=x);var A=this._promise,N=this._callback,E=A._boundValue();A._pushContext();var C=u(N).call(E,x,k,w),j=A._popContext();if(a.checkForgottenReturns(C,j,D!==null?"Promise.filter":"Promise.map",A),C===d)return this._reject(C.e),!0;var M=n(C,this._promise);if(M instanceof r){M=M._target();var O=M._bitField;if((O&50397184)===0)return _>=1&&this._inFlight++,v[k]=M,M._proxy(this,(k+1)*-1),!1;if((O&33554432)!==0)C=M._value();else return(O&16777216)!==0?(this._reject(M._reason()),!0):(this._cancel(),!0)}v[k]=C}var F=++this._totalResolved;return F>=w?(D!==null?this._filter(v,D):this._resolve(v),!0):!1},g.prototype._drainQueue=function(){for(var x=this._queue,k=this._limit,v=this._values;x.length>0&&this._inFlight<k;){if(this._isResolved())return;var w=x.pop();this._promiseFulfilled(v[w],w)}},g.prototype._filter=function(x,k){for(var v=k.length,w=new Array(v),D=0,_=0;_<v;++_)x[_]&&(w[D++]=k[_]);w.length=D,this._resolve(w)},g.prototype.preservedValues=function(){return this._preservedValues};function b(x,k,v,w){if(typeof k!="function")return t("expecting a function but got "+l.classString(k));var D=0;if(v!==void 0)if(typeof v=="object"&&v!==null){if(typeof v.concurrency!="number")return r.reject(new TypeError("'concurrency' must be a number but it is "+l.classString(v.concurrency)));D=v.concurrency}else return r.reject(new TypeError("options argument must be an object but it is "+l.classString(v)));return D=typeof D=="number"&&isFinite(D)&&D>=1?D:0,new g(x,k,D,w).promise()}r.prototype.map=function(x,k){return b(this,x,k,null)},r.map=function(x,k,v,w){return b(x,k,v,w)}}),hk}var fk,v3;function WB(){if(v3)return fk;v3=1;var r=Object.create;if(r){var e=r(null),t=r(null);e[" size"]=t[" size"]=0}return fk=function(n){var i=on(),a=i.canEvaluate,s=i.isIdentifier,l,u;{var d=function(w){return new Function("ensureMethod",`                                    
	        return function(obj) {                                               
	            'use strict'                                                     
	            var len = this.length;                                           
	            ensureMethod(obj, 'methodName');                                 
	            switch(len) {                                                    
	                case 1: return obj.methodName(this[0]);                      
	                case 2: return obj.methodName(this[0], this[1]);             
	                case 3: return obj.methodName(this[0], this[1], this[2]);    
	                case 0: return obj.methodName();                             
	                default:                                                     
	                    return obj.methodName.apply(obj, this);                  
	            }                                                                
	        };                                                                   
	        `.replace(/methodName/g,w))(b)},h=function(w){return new Function("obj",`                                             
	        'use strict';                                                        
	        return obj.propertyName;                                             
	        `.replace("propertyName",w))},g=function(w,D,_){var A=_[w];if(typeof A!="function"){if(!s(w))return null;if(A=D(w),_[w]=A,_[" size"]++,_[" size"]>512){for(var N=Object.keys(_),E=0;E<256;++E)delete _[N[E]];_[" size"]=N.length-256}}return A};l=function(w){return g(w,d,e)},u=function(w){return g(w,h,t)}}function b(w,D){var _;if(w!=null&&(_=w[D]),typeof _!="function"){var A="Object "+i.classString(w)+" has no method '"+i.toString(D)+"'";throw new n.TypeError(A)}return _}function x(w){var D=this.pop(),_=b(w,D);return _.apply(w,this)}n.prototype.call=function(w){for(var D=arguments.length,_=new Array(Math.max(D-1,0)),A=1;A<D;++A)_[A-1]=arguments[A];if(a){var N=l(w);if(N!==null)return this._then(N,void 0,void 0,_,void 0)}return _.push(w),this._then(x,void 0,void 0,_,void 0)};function k(w){return w[this]}function v(w){var D=+this;return D<0&&(D=Math.max(0,D+w.length)),w[D]}n.prototype.get=function(w){var D=typeof w=="number",_;if(D)_=v;else if(a){var A=u(w);_=A!==null?A:k}else _=k;return this._then(_,void 0,void 0,w,void 0)}},fk}var pk,w3;function HB(){return w3||(w3=1,pk=function(r,e,t,n,i,a){var s=on(),l=Fc().TypeError,u=on().inherits,d=s.errorObj,h=s.tryCatch,g={};function b(A){setTimeout(function(){throw A},0)}function x(A){var N=t(A);return N!==A&&typeof A._isDisposable=="function"&&typeof A._getDisposer=="function"&&A._isDisposable()&&N._setDisposable(A._getDisposer()),N}function k(A,N){var E=0,C=A.length,j=new r(i);function M(){if(E>=C)return j._fulfill();var O=x(A[E++]);if(O instanceof r&&O._isDisposable()){try{O=t(O._getDisposer().tryDispose(N),A.promise)}catch(F){return b(F)}if(O instanceof r)return O._then(M,b,null,null,null)}M()}return M(),j}function v(A,N,E){this._data=A,this._promise=N,this._context=E}v.prototype.data=function(){return this._data},v.prototype.promise=function(){return this._promise},v.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():g},v.prototype.tryDispose=function(A){var N=this.resource(),E=this._context;E!==void 0&&E._pushContext();var C=N!==g?this.doDispose(N,A):null;return E!==void 0&&E._popContext(),this._promise._unsetDisposable(),this._data=null,C},v.isDisposer=function(A){return A!=null&&typeof A.resource=="function"&&typeof A.tryDispose=="function"};function w(A,N,E){this.constructor$(A,N,E)}u(w,v),w.prototype.doDispose=function(A,N){var E=this.data();return E.call(A,A,N)};function D(A){return v.isDisposer(A)?(this.resources[this.index]._setDisposable(A),A.promise()):A}function _(A){this.length=A,this.promise=null,this[A-1]=null}_.prototype._resultCancelled=function(){for(var A=this.length,N=0;N<A;++N){var E=this[N];E instanceof r&&E.cancel()}},r.using=function(){var A=arguments.length;if(A<2)return e("you must pass at least 2 arguments to Promise.using");var N=arguments[A-1];if(typeof N!="function")return e("expecting a function but got "+s.classString(N));var E,C=!0;A===2&&Array.isArray(arguments[0])?(E=arguments[0],A=E.length,C=!1):(E=arguments,A--);for(var j=new _(A),M=0;M<A;++M){var O=E[M];if(v.isDisposer(O)){var F=O;O=O.promise(),O._setDisposable(F)}else{var G=t(O);G instanceof r&&(O=G._then(D,null,null,{resources:j,index:M},void 0))}j[M]=O}for(var R=new Array(j.length),M=0;M<R.length;++M)R[M]=r.resolve(j[M]).reflect();var W=r.all(R).then(function(X){for(var P=0;P<X.length;++P){var B=X[P];if(B.isRejected())return d.e=B.error(),d;if(!B.isFulfilled()){W.cancel();return}X[P]=B.value()}U._pushContext(),N=h(N);var ee=C?N.apply(void 0,X):N(X),Y=U._popContext();return a.checkForgottenReturns(ee,Y,"Promise.using",U),ee}),U=W.lastly(function(){var X=new r.PromiseInspection(W);return k(j,X)});return j.promise=U,U._setOnCancel(j),U},r.prototype._setDisposable=function(A){this._bitField=this._bitField|131072,this._disposer=A},r.prototype._isDisposable=function(){return(this._bitField&131072)>0},r.prototype._getDisposer=function(){return this._disposer},r.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},r.prototype.disposer=function(A){if(typeof A=="function")return new w(A,this,n());throw new l}}),pk}var gk,k3;function qB(){return k3||(k3=1,gk=function(r,e,t){var n=on(),i=r.TimeoutError;function a(g){this.handle=g}a.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(g){return l(+this).thenReturn(g)},l=r.delay=function(g,b){var x,k;return b!==void 0?(x=r.resolve(b)._then(s,null,null,g,void 0),t.cancellation()&&b instanceof r&&x._setOnCancel(b)):(x=new r(e),k=setTimeout(function(){x._fulfill()},+g),t.cancellation()&&x._setOnCancel(new a(k)),x._captureStackTrace()),x._setAsyncGuaranteed(),x};r.prototype.delay=function(g){return l(g,this)};var u=function(g,b,x){var k;typeof b!="string"?b instanceof Error?k=b:k=new i("operation timed out"):k=new i(b),n.markAsOriginatingFromRejection(k),g._attachExtraTrace(k),g._reject(k),x!=null&&x.cancel()};function d(g){return clearTimeout(this.handle),g}function h(g){throw clearTimeout(this.handle),g}r.prototype.timeout=function(g,b){g=+g;var x,k,v=new a(setTimeout(function(){x.isPending()&&u(x,b,k)},g));return t.cancellation()?(k=this.then(),x=k._then(d,h,void 0,v,void 0),x._setOnCancel(v)):x=this._then(d,h,void 0,v,void 0),x}}),gk}var mk,D3;function VB(){return D3||(D3=1,mk=function(r,e,t,n,i,a){var s=Fc(),l=s.TypeError,u=on(),d=u.errorObj,h=u.tryCatch,g=[];function b(k,v,w){for(var D=0;D<v.length;++D){w._pushContext();var _=h(v[D])(k);if(w._popContext(),_===d){w._pushContext();var A=r.reject(d.e);return w._popContext(),A}var N=n(_,w);if(N instanceof r)return N}return null}function x(k,v,w,D){if(a.cancellation()){var _=new r(t),A=this._finallyPromise=new r(t);this._promise=_.lastly(function(){return A}),_._captureStackTrace(),_._setOnCancel(this)}else{var N=this._promise=new r(t);N._captureStackTrace()}this._stack=D,this._generatorFunction=k,this._receiver=v,this._generator=void 0,this._yieldHandlers=typeof w=="function"?[w].concat(g):g,this._yieldedPromise=null,this._cancellationPhase=!1}u.inherits(x,i),x.prototype._isResolved=function(){return this._promise===null},x.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&this._finallyPromise!==null&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},x.prototype._promiseCancelled=function(){if(!this._isResolved()){var k=typeof this._generator.return<"u",v;if(k)this._promise._pushContext(),v=h(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var w=new r.CancellationError("generator .return() sentinel");r.coroutine.returnSentinel=w,this._promise._attachExtraTrace(w),this._promise._pushContext(),v=h(this._generator.throw).call(this._generator,w),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(v)}},x.prototype._promiseFulfilled=function(k){this._yieldedPromise=null,this._promise._pushContext();var v=h(this._generator.next).call(this._generator,k);this._promise._popContext(),this._continue(v)},x.prototype._promiseRejected=function(k){this._yieldedPromise=null,this._promise._attachExtraTrace(k),this._promise._pushContext();var v=h(this._generator.throw).call(this._generator,k);this._promise._popContext(),this._continue(v)},x.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof r){var k=this._yieldedPromise;this._yieldedPromise=null,k.cancel()}},x.prototype.promise=function(){return this._promise},x.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},x.prototype._continue=function(k){var v=this._promise;if(k===d)return this._cleanup(),this._cancellationPhase?v.cancel():v._rejectCallback(k.e,!1);var w=k.value;if(k.done===!0)return this._cleanup(),this._cancellationPhase?v.cancel():v._resolveCallback(w);var D=n(w,this._promise);if(!(D instanceof r)&&(D=b(D,this._yieldHandlers,this._promise),D===null)){this._promiseRejected(new l(`A value %s was yielded that could not be treated as a promise

    See http://goo.gl/MqrFmX

`.replace("%s",w)+`From coroutine:
`+this._stack.split(`
`).slice(1,-7).join(`
`)));return}D=D._target();var _=D._bitField;(_&50397184)===0?(this._yieldedPromise=D,D._proxy(this,null)):(_&33554432)!==0?r._async.invoke(this._promiseFulfilled,this,D._value()):(_&16777216)!==0?r._async.invoke(this._promiseRejected,this,D._reason()):this._promiseCancelled()},r.coroutine=function(k,v){if(typeof k!="function")throw new l(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var w=Object(v).yieldHandler,D=x,_=new Error().stack;return function(){var A=k.apply(this,arguments),N=new D(void 0,void 0,w,_),E=N.promise();return N._generator=A,N._promiseFulfilled(void 0),E}},r.coroutine.addYieldHandler=function(k){if(typeof k!="function")throw new l("expecting a function but got "+u.classString(k));g.push(k)},r.spawn=function(k){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),typeof k!="function")return e(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var v=new x(k,this),w=v.promise();return v._run(r.spawn),w}}),mk}var bk,_3;function XB(){return _3||(_3=1,bk=function(r){var e=on(),t=r._async,n=e.tryCatch,i=e.errorObj;function a(u,d){var h=this;if(!e.isArray(u))return s.call(h,u,d);var g=n(d).apply(h._boundValue(),[null].concat(u));g===i&&t.throwLater(g.e)}function s(u,d){var h=this,g=h._boundValue(),b=u===void 0?n(d).call(g,null):n(d).call(g,null,u);b===i&&t.throwLater(b.e)}function l(u,d){var h=this;if(!u){var g=new Error(u+"");g.cause=u,u=g}var b=n(d).call(h._boundValue(),u);b===i&&t.throwLater(b.e)}r.prototype.asCallback=r.prototype.nodeify=function(u,d){if(typeof u=="function"){var h=s;d!==void 0&&Object(d).spread&&(h=a),this._then(h,l,void 0,this,u)}return this}}),bk}var xk,A3;function GB(){return A3||(A3=1,xk=function(r,e){var t={},n=on(),i=Rj(),a=n.withAppended,s=n.maybeWrapAsError,l=n.canEvaluate,u=Fc().TypeError,d="Async",h={__isPromisified__:!0},g=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],b=new RegExp("^(?:"+g.join("|")+")$"),x=function(W){return n.isIdentifier(W)&&W.charAt(0)!=="_"&&W!=="constructor"};function k(W){return!b.test(W)}function v(W){try{return W.__isPromisified__===!0}catch{return!1}}function w(W,U,X){var P=n.getDataPropertyOrDefault(W,U+X,h);return P?v(P):!1}function D(W,U,X){for(var P=0;P<W.length;P+=2){var B=W[P];if(X.test(B)){for(var ee=B.replace(X,""),Y=0;Y<W.length;Y+=2)if(W[Y]===ee)throw new u(`Cannot promisify an API that has normal methods with '%s'-suffix

    See http://goo.gl/MqrFmX
`.replace("%s",U))}}}function _(W,U,X,P){for(var B=n.inheritedDataKeys(W),ee=[],Y=0;Y<B.length;++Y){var H=B[Y],J=W[H],ie=P===x?!0:x(H);typeof J=="function"&&!v(J)&&!w(W,H,U)&&P(H,J,W,ie)&&ee.push(H,J)}return D(ee,U,X),ee}var A=function(W){return W.replace(/([$])/,"\\$")},N;{var E=function(W){for(var U=[W],X=Math.max(0,W-1-3),P=W-1;P>=X;--P)U.push(P);for(var P=W+1;P<=3;++P)U.push(P);return U},C=function(W){return n.filledRange(W,"_arg","")},j=function(W){return n.filledRange(Math.max(W,3),"_arg","")},M=function(W){return typeof W.length=="number"?Math.max(Math.min(W.length,1024),0):0};N=function(W,U,X,P,B,ee){var Y=Math.max(0,M(P)-1),H=E(Y),J=typeof W=="string"||U===t;function ie(je){var Ie=C(je).join(", "),Pe=je>0?", ":"",fe;return J?fe=`ret = callback.call(this, {{args}}, nodeback); break;
`:fe=U===void 0?`ret = callback({{args}}, nodeback); break;
`:`ret = callback.call(receiver, {{args}}, nodeback); break;
`,fe.replace("{{args}}",Ie).replace(", ",Pe)}function z(){for(var je="",Ie=0;Ie<H.length;++Ie)je+="case "+H[Ie]+":"+ie(H[Ie]);return je+=`                                                             
	        default:                                                             
	            var args = new Array(len + 1);                                   
	            var i = 0;                                                       
	            for (var i = 0; i < len; ++i) {                                  
	               args[i] = arguments[i];                                       
	            }                                                                
	            args[i] = nodeback;                                              
	            [CodeForCall]                                                    
	            break;                                                           
	        `.replace("[CodeForCall]",J?`ret = callback.apply(this, args);
`:`ret = callback.apply(receiver, args);
`),je}var ge=typeof W=="string"?"this != null ? this['"+W+"'] : fn":"fn",ve=`'use strict';                                                
	        var ret = function (Parameters) {                                    
	            'use strict';                                                    
	            var len = arguments.length;                                      
	            var promise = new Promise(INTERNAL);                             
	            promise._captureStackTrace();                                    
	            var nodeback = nodebackForPromise(promise, `+ee+`);   
	            var ret;                                                         
	            var callback = tryCatch([GetFunctionCode]);                      
	            switch(len) {                                                    
	                [CodeForSwitchCase]                                          
	            }                                                                
	            if (ret === errorObj) {                                          
	                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);
	            }                                                                
	            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     
	            return promise;                                                  
	        };                                                                   
	        notEnumerableProp(ret, '__isPromisified__', true);                   
	        return ret;                                                          
	    `.replace("[CodeForSwitchCase]",z()).replace("[GetFunctionCode]",ge);return ve=ve.replace("Parameters",j(Y)),new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",ve)(r,P,U,a,s,i,n.tryCatch,n.errorObj,n.notEnumerableProp,e)}}function O(W,U,X,P,B,ee){var Y=(function(){return this})(),H=W;typeof H=="string"&&(W=P);function J(){var ie=U;U===t&&(ie=this);var z=new r(e);z._captureStackTrace();var ge=typeof H=="string"&&this!==Y?this[H]:W,ve=i(z,ee);try{ge.apply(ie,a(arguments,ve))}catch(je){z._rejectCallback(s(je),!0,!0)}return z._isFateSealed()||z._setAsyncGuaranteed(),z}return n.notEnumerableProp(J,"__isPromisified__",!0),J}var F=l?N:O;function G(W,U,X,P,B){for(var ee=new RegExp(A(U)+"$"),Y=_(W,U,ee,X),H=0,J=Y.length;H<J;H+=2){var ie=Y[H],z=Y[H+1],ge=ie+U;if(P===F)W[ge]=F(ie,t,ie,z,U,B);else{var ve=P(z,function(){return F(ie,t,ie,z,U,B)});n.notEnumerableProp(ve,"__isPromisified__",!0),W[ge]=ve}}return n.toFastProperties(W),W}function R(W,U,X){return F(W,U,void 0,W,null,X)}r.promisify=function(W,U){if(typeof W!="function")throw new u("expecting a function but got "+n.classString(W));if(v(W))return W;U=Object(U);var X=U.context===void 0?t:U.context,P=!!U.multiArgs,B=R(W,X,P);return n.copyDescriptors(W,B,k),B},r.promisifyAll=function(W,U){if(typeof W!="function"&&typeof W!="object")throw new u(`the target of promisifyAll must be an object or a function

    See http://goo.gl/MqrFmX
`);U=Object(U);var X=!!U.multiArgs,P=U.suffix;typeof P!="string"&&(P=d);var B=U.filter;typeof B!="function"&&(B=x);var ee=U.promisifier;if(typeof ee!="function"&&(ee=F),!n.isIdentifier(P))throw new RangeError(`suffix must be a valid identifier

    See http://goo.gl/MqrFmX
`);for(var Y=n.inheritedDataKeys(W),H=0;H<Y.length;++H){var J=W[Y[H]];Y[H]!=="constructor"&&n.isClass(J)&&(G(J.prototype,P,B,ee,X),G(J,P,B,ee,X))}return G(W,P,B,ee,X)}}),xk}var yk,S3;function $B(){return S3||(S3=1,yk=function(r,e,t,n){var i=on(),a=i.isObject,s=Ap(),l;typeof Map=="function"&&(l=Map);var u=(function(){var b=0,x=0;function k(v,w){this[b]=v,this[b+x]=w,b++}return function(w){x=w.size,b=0;var D=new Array(w.size*2);return w.forEach(k,D),D}})(),d=function(b){for(var x=new l,k=b.length/2|0,v=0;v<k;++v){var w=b[k+v],D=b[v];x.set(w,D)}return x};function h(b){var x=!1,k;if(l!==void 0&&b instanceof l)k=u(b),x=!0;else{var v=s.keys(b),w=v.length;k=new Array(w*2);for(var D=0;D<w;++D){var _=v[D];k[D]=b[_],k[D+w]=_}}this.constructor$(k),this._isMap=x,this._init$(void 0,-3)}i.inherits(h,e),h.prototype._init=function(){},h.prototype._promiseFulfilled=function(b,x){this._values[x]=b;var k=++this._totalResolved;if(k>=this._length){var v;if(this._isMap)v=d(this._values);else{v={};for(var w=this.length(),D=0,_=this.length();D<_;++D)v[this._values[D+w]]=this._values[D]}return this._resolve(v),!0}return!1},h.prototype.shouldCopyValues=function(){return!1},h.prototype.getActualLength=function(b){return b>>1};function g(b){var x,k=t(b);if(a(k))k instanceof r?x=k._then(r.props,void 0,void 0,void 0,void 0):x=new h(k).promise();else return n(`cannot await properties of a non-object

    See http://goo.gl/MqrFmX
`);return k instanceof r&&x._propagateFrom(k,2),x}r.prototype.props=function(){return g(this)},r.props=function(b){return g(b)}}),yk}var vk,E3;function YB(){return E3||(E3=1,vk=function(r,e,t,n){var i=on(),a=function(l){return l.then(function(u){return s(u,l)})};function s(l,u){var d=t(l);if(d instanceof r)return a(d);if(l=i.asArray(l),l===null)return n("expecting an array or an iterable object but got "+i.classString(l));var h=new r(e);u!==void 0&&h._propagateFrom(u,3);for(var g=h._fulfill,b=h._reject,x=0,k=l.length;x<k;++x){var v=l[x];v===void 0&&!(x in l)||r.cast(v)._then(g,b,void 0,h,null)}return h}r.race=function(l){return s(l,void 0)},r.prototype.race=function(){return s(this,void 0)}}),vk}var wk,T3;function KB(){return T3||(T3=1,wk=function(r,e,t,n,i,a){var s=r._getDomain,l=on(),u=l.tryCatch;function d(k,v,w,D){this.constructor$(k);var _=s();this._fn=_===null?v:l.domainBind(_,v),w!==void 0&&(w=r.resolve(w),w._attachCancellationCallback(this)),this._initialValue=w,this._currentCancellable=null,D===i?this._eachValues=Array(this._length):D===0?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}l.inherits(d,e),d.prototype._gotAccum=function(k){this._eachValues!==void 0&&this._eachValues!==null&&k!==i&&this._eachValues.push(k)},d.prototype._eachComplete=function(k){return this._eachValues!==null&&this._eachValues.push(k),this._eachValues},d.prototype._init=function(){},d.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==void 0?this._eachValues:this._initialValue)},d.prototype.shouldCopyValues=function(){return!1},d.prototype._resolve=function(k){this._promise._resolveCallback(k),this._values=null},d.prototype._resultCancelled=function(k){if(k===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof r&&this._currentCancellable.cancel(),this._initialValue instanceof r&&this._initialValue.cancel())},d.prototype._iterate=function(k){this._values=k;var v,w,D=k.length;if(this._initialValue!==void 0?(v=this._initialValue,w=0):(v=r.resolve(k[0]),w=1),this._currentCancellable=v,!v.isRejected())for(;w<D;++w){var _={accum:null,value:k[w],index:w,length:D,array:this};v=v._then(b,void 0,void 0,_,void 0)}this._eachValues!==void 0&&(v=v._then(this._eachComplete,void 0,void 0,this,void 0)),v._then(h,h,void 0,v,this)},r.prototype.reduce=function(k,v){return g(this,k,v,null)},r.reduce=function(k,v,w,D){return g(k,v,w,D)};function h(k,v){this.isFulfilled()?v._resolve(k):v._reject(k)}function g(k,v,w,D){if(typeof v!="function")return t("expecting a function but got "+l.classString(v));var _=new d(k,v,w,D);return _.promise()}function b(k){this.accum=k,this.array._gotAccum(k);var v=n(this.value,this.array._promise);return v instanceof r?(this.array._currentCancellable=v,v._then(x,void 0,void 0,this,void 0)):x.call(this,v)}function x(k){var v=this.array,w=v._promise,D=u(v._fn);w._pushContext();var _;v._eachValues!==void 0?_=D.call(w._boundValue(),k,this.index,this.length):_=D.call(w._boundValue(),this.accum,k,this.index,this.length),_ instanceof r&&(v._currentCancellable=_);var A=w._popContext();return a.checkForgottenReturns(_,A,v._eachValues!==void 0?"Promise.each":"Promise.reduce",w),_}}),wk}var kk,C3;function QB(){return C3||(C3=1,kk=function(r,e,t){var n=r.PromiseInspection,i=on();function a(s){this.constructor$(s)}i.inherits(a,e),a.prototype._promiseResolved=function(s,l){this._values[s]=l;var u=++this._totalResolved;return u>=this._length?(this._resolve(this._values),!0):!1},a.prototype._promiseFulfilled=function(s,l){var u=new n;return u._bitField=33554432,u._settledValueField=s,this._promiseResolved(l,u)},a.prototype._promiseRejected=function(s,l){var u=new n;return u._bitField=16777216,u._settledValueField=s,this._promiseResolved(l,u)},r.settle=function(s){return t.deprecated(".settle()",".reflect()"),new a(s).promise()},r.prototype.settle=function(){return r.settle(this)}}),kk}var Dk,N3;function ZB(){return N3||(N3=1,Dk=function(r,e,t){var n=on(),i=Fc().RangeError,a=Fc().AggregateError,s=n.isArray,l={};function u(h){this.constructor$(h),this._howMany=0,this._unwrap=!1,this._initialized=!1}n.inherits(u,e),u.prototype._init=function(){if(this._initialized){if(this._howMany===0){this._resolve([]);return}this._init$(void 0,-5);var h=s(this._values);!this._isResolved()&&h&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},u.prototype.init=function(){this._initialized=!0,this._init()},u.prototype.setUnwrap=function(){this._unwrap=!0},u.prototype.howMany=function(){return this._howMany},u.prototype.setHowMany=function(h){this._howMany=h},u.prototype._promiseFulfilled=function(h){return this._addFulfilled(h),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),this.howMany()===1&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},u.prototype._promiseRejected=function(h){return this._addRejected(h),this._checkOutcome()},u.prototype._promiseCancelled=function(){return this._values instanceof r||this._values==null?this._cancel():(this._addRejected(l),this._checkOutcome())},u.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var h=new a,g=this.length();g<this._values.length;++g)this._values[g]!==l&&h.push(this._values[g]);return h.length>0?this._reject(h):this._cancel(),!0}return!1},u.prototype._fulfilled=function(){return this._totalResolved},u.prototype._rejected=function(){return this._values.length-this.length()},u.prototype._addRejected=function(h){this._values.push(h)},u.prototype._addFulfilled=function(h){this._values[this._totalResolved++]=h},u.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},u.prototype._getRangeError=function(h){var g="Input array must contain at least "+this._howMany+" items but contains only "+h+" items";return new i(g)},u.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function d(h,g){if((g|0)!==g||g<0)return t(`expecting a positive integer

    See http://goo.gl/MqrFmX
`);var b=new u(h),x=b.promise();return b.setHowMany(g),b.init(),x}r.some=function(h,g){return d(h,g)},r.prototype.some=function(h){return d(this,h)},r._SomePromiseArray=u}),Dk}var _k,U3;function JB(){return U3||(U3=1,_k=function(r,e){var t=r.map;r.prototype.filter=function(n,i){return t(this,n,i,e)},r.filter=function(n,i,a){return t(n,i,a,e)}}),_k}var Ak,R3;function eP(){return R3||(R3=1,Ak=function(r,e){var t=r.reduce,n=r.all;function i(){return n(this)}function a(s,l){return t(s,l,e,e)}r.prototype.each=function(s){return t(this,s,e,0)._then(i,void 0,void 0,this,void 0)},r.prototype.mapSeries=function(s){return t(this,s,e,e)},r.each=function(s,l){return t(s,l,e,0)._then(i,void 0,void 0,s,void 0)},r.mapSeries=a}),Ak}var Sk,j3;function tP(){return j3||(j3=1,Sk=function(r){var e=r._SomePromiseArray;function t(n){var i=new e(n),a=i.promise();return i.setHowMany(1),i.setUnwrap(),i.init(),a}r.any=function(n){return t(n)},r.prototype.any=function(){return t(this)}}),Sk}var F3;function nP(){return F3||(F3=1,(function(r){r.exports=function(){var e=function(){return new b(`circular promise resolution chain

    See http://goo.gl/MqrFmX
`)},t=function(){return new R.PromiseInspection(this._target())},n=function(P){return R.reject(new b(P))};function i(){}var a={},s=on(),l;s.isNode?l=function(){var P=process.domain;return P===void 0&&(P=null),P}:l=function(){return null},s.notEnumerableProp(R,"_getDomain",l);var u=Ap(),d=TB(),h=new d;u.defineProperty(R,"_async",{value:h});var g=Fc(),b=R.TypeError=g.TypeError;R.RangeError=g.RangeError;var x=R.CancellationError=g.CancellationError;R.TimeoutError=g.TimeoutError,R.OperationalError=g.OperationalError,R.RejectionError=g.OperationalError,R.AggregateError=g.AggregateError;var k=function(){},v={},w={},D=CB()(R,k),_=NB()(R,k,D,n,i),A=UB()(R),N=A.create,E=RB()(R,A);E.CapturedTrace;var C=jB()(R,D),j=FB()(w),M=Rj(),O=s.errorObj,F=s.tryCatch;function G(P,B){if(typeof B!="function")throw new b("expecting a function but got "+s.classString(B));if(P.constructor!==R)throw new b(`the promise constructor cannot be invoked directly

    See http://goo.gl/MqrFmX
`)}function R(P){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,P!==k&&(G(this,P),this._resolveFromExecutor(P)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}R.prototype.toString=function(){return"[object Promise]"},R.prototype.caught=R.prototype.catch=function(P){var B=arguments.length;if(B>1){var ee=new Array(B-1),Y=0,H;for(H=0;H<B-1;++H){var J=arguments[H];if(s.isObject(J))ee[Y++]=J;else return n("expecting an object but got A catch statement predicate "+s.classString(J))}return ee.length=Y,P=arguments[H],this.then(void 0,j(ee,P,this))}return this.then(void 0,P)},R.prototype.reflect=function(){return this._then(t,t,void 0,this,void 0)},R.prototype.then=function(P,B){if(E.warnings()&&arguments.length>0&&typeof P!="function"&&typeof B!="function"){var ee=".then() only accepts functions but was passed: "+s.classString(P);arguments.length>1&&(ee+=", "+s.classString(B)),this._warn(ee)}return this._then(P,B,void 0,void 0,void 0)},R.prototype.done=function(P,B){var ee=this._then(P,B,void 0,void 0,void 0);ee._setIsFinal()},R.prototype.spread=function(P){return typeof P!="function"?n("expecting a function but got "+s.classString(P)):this.all()._then(P,void 0,void 0,v,void 0)},R.prototype.toJSON=function(){var P={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(P.fulfillmentValue=this.value(),P.isFulfilled=!0):this.isRejected()&&(P.rejectionReason=this.reason(),P.isRejected=!0),P},R.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new _(this).promise()},R.prototype.error=function(P){return this.caught(s.originatesFromRejection,P)},R.getNewLibraryCopy=r.exports,R.is=function(P){return P instanceof R},R.fromNode=R.fromCallback=function(P){var B=new R(k);B._captureStackTrace();var ee=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,Y=F(P)(M(B,ee));return Y===O&&B._rejectCallback(Y.e,!0),B._isFateSealed()||B._setAsyncGuaranteed(),B},R.all=function(P){return new _(P).promise()},R.cast=function(P){var B=D(P);return B instanceof R||(B=new R(k),B._captureStackTrace(),B._setFulfilled(),B._rejectionHandler0=P),B},R.resolve=R.fulfilled=R.cast,R.reject=R.rejected=function(P){var B=new R(k);return B._captureStackTrace(),B._rejectCallback(P,!0),B},R.setScheduler=function(P){if(typeof P!="function")throw new b("expecting a function but got "+s.classString(P));return h.setScheduler(P)},R.prototype._then=function(P,B,ee,Y,H){var J=H!==void 0,ie=J?H:new R(k),z=this._target(),ge=z._bitField;J||(ie._propagateFrom(this,3),ie._captureStackTrace(),Y===void 0&&(this._bitField&2097152)!==0&&((ge&50397184)!==0?Y=this._boundValue():Y=z===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,ie));var ve=l();if((ge&50397184)!==0){var je,Ie,Pe=z._settlePromiseCtx;(ge&33554432)!==0?(Ie=z._rejectionHandler0,je=P):(ge&16777216)!==0?(Ie=z._fulfillmentHandler0,je=B,z._unsetRejectionIsUnhandled()):(Pe=z._settlePromiseLateCancellationObserver,Ie=new x("late cancellation observer"),z._attachExtraTrace(Ie),je=B),h.invoke(Pe,z,{handler:ve===null?je:typeof je=="function"&&s.domainBind(ve,je),promise:ie,receiver:Y,value:Ie})}else z._addCallbacks(P,B,ie,Y,ve);return ie},R.prototype._length=function(){return this._bitField&65535},R.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0},R.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864},R.prototype._setLength=function(P){this._bitField=this._bitField&-65536|P&65535},R.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432,this._fireEvent("promiseFulfilled",this)},R.prototype._setRejected=function(){this._bitField=this._bitField|16777216,this._fireEvent("promiseRejected",this)},R.prototype._setFollowing=function(){this._bitField=this._bitField|67108864,this._fireEvent("promiseResolved",this)},R.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304},R.prototype._isFinal=function(){return(this._bitField&4194304)>0},R.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},R.prototype._setCancelled=function(){this._bitField=this._bitField|65536,this._fireEvent("promiseCancelled",this)},R.prototype._setWillBeCancelled=function(){this._bitField=this._bitField|8388608},R.prototype._setAsyncGuaranteed=function(){h.hasCustomScheduler()||(this._bitField=this._bitField|134217728)},R.prototype._receiverAt=function(P){var B=P===0?this._receiver0:this[P*4-4+3];if(B!==a)return B===void 0&&this._isBound()?this._boundValue():B},R.prototype._promiseAt=function(P){return this[P*4-4+2]},R.prototype._fulfillmentHandlerAt=function(P){return this[P*4-4+0]},R.prototype._rejectionHandlerAt=function(P){return this[P*4-4+1]},R.prototype._boundValue=function(){},R.prototype._migrateCallback0=function(P){P._bitField;var B=P._fulfillmentHandler0,ee=P._rejectionHandler0,Y=P._promise0,H=P._receiverAt(0);H===void 0&&(H=a),this._addCallbacks(B,ee,Y,H,null)},R.prototype._migrateCallbackAt=function(P,B){var ee=P._fulfillmentHandlerAt(B),Y=P._rejectionHandlerAt(B),H=P._promiseAt(B),J=P._receiverAt(B);J===void 0&&(J=a),this._addCallbacks(ee,Y,H,J,null)},R.prototype._addCallbacks=function(P,B,ee,Y,H){var J=this._length();if(J>=65531&&(J=0,this._setLength(0)),J===0)this._promise0=ee,this._receiver0=Y,typeof P=="function"&&(this._fulfillmentHandler0=H===null?P:s.domainBind(H,P)),typeof B=="function"&&(this._rejectionHandler0=H===null?B:s.domainBind(H,B));else{var ie=J*4-4;this[ie+2]=ee,this[ie+3]=Y,typeof P=="function"&&(this[ie+0]=H===null?P:s.domainBind(H,P)),typeof B=="function"&&(this[ie+1]=H===null?B:s.domainBind(H,B))}return this._setLength(J+1),J},R.prototype._proxy=function(P,B){this._addCallbacks(void 0,void 0,B,P,null)},R.prototype._resolveCallback=function(P,B){if((this._bitField&117506048)===0){if(P===this)return this._rejectCallback(e(),!1);var ee=D(P,this);if(!(ee instanceof R))return this._fulfill(P);B&&this._propagateFrom(ee,2);var Y=ee._target();if(Y===this){this._reject(e());return}var H=Y._bitField;if((H&50397184)===0){var J=this._length();J>0&&Y._migrateCallback0(this);for(var ie=1;ie<J;++ie)Y._migrateCallbackAt(this,ie);this._setFollowing(),this._setLength(0),this._setFollowee(Y)}else if((H&33554432)!==0)this._fulfill(Y._value());else if((H&16777216)!==0)this._reject(Y._reason());else{var z=new x("late cancellation observer");Y._attachExtraTrace(z),this._reject(z)}}},R.prototype._rejectCallback=function(P,B,ee){var Y=s.ensureErrorObject(P),H=Y===P;if(!H&&!ee&&E.warnings()){var J="a promise was rejected with a non-error: "+s.classString(P);this._warn(J,!0)}this._attachExtraTrace(Y,B?H:!1),this._reject(P)},R.prototype._resolveFromExecutor=function(P){var B=this;this._captureStackTrace(),this._pushContext();var ee=!0,Y=this._execute(P,function(H){B._resolveCallback(H)},function(H){B._rejectCallback(H,ee)});ee=!1,this._popContext(),Y!==void 0&&B._rejectCallback(Y,!0)},R.prototype._settlePromiseFromHandler=function(P,B,ee,Y){var H=Y._bitField;if((H&65536)===0){Y._pushContext();var J;B===v?!ee||typeof ee.length!="number"?(J=O,J.e=new b("cannot .spread() a non-array: "+s.classString(ee))):J=F(P).apply(this._boundValue(),ee):J=F(P).call(B,ee);var ie=Y._popContext();H=Y._bitField,(H&65536)===0&&(J===w?Y._reject(ee):J===O?Y._rejectCallback(J.e,!1):(E.checkForgottenReturns(J,ie,"",Y,this),Y._resolveCallback(J)))}},R.prototype._target=function(){for(var P=this;P._isFollowing();)P=P._followee();return P},R.prototype._followee=function(){return this._rejectionHandler0},R.prototype._setFollowee=function(P){this._rejectionHandler0=P},R.prototype._settlePromise=function(P,B,ee,Y){var H=P instanceof R,J=this._bitField,ie=(J&134217728)!==0;(J&65536)!==0?(H&&P._invokeInternalOnCancel(),ee instanceof C&&ee.isFinallyHandler()?(ee.cancelPromise=P,F(B).call(ee,Y)===O&&P._reject(O.e)):B===t?P._fulfill(t.call(ee)):ee instanceof i?ee._promiseCancelled(P):H||P instanceof _?P._cancel():ee.cancel()):typeof B=="function"?H?(ie&&P._setAsyncGuaranteed(),this._settlePromiseFromHandler(B,ee,Y,P)):B.call(ee,Y,P):ee instanceof i?ee._isResolved()||((J&33554432)!==0?ee._promiseFulfilled(Y,P):ee._promiseRejected(Y,P)):H&&(ie&&P._setAsyncGuaranteed(),(J&33554432)!==0?P._fulfill(Y):P._reject(Y))},R.prototype._settlePromiseLateCancellationObserver=function(P){var B=P.handler,ee=P.promise,Y=P.receiver,H=P.value;typeof B=="function"?ee instanceof R?this._settlePromiseFromHandler(B,Y,H,ee):B.call(Y,H,ee):ee instanceof R&&ee._reject(H)},R.prototype._settlePromiseCtx=function(P){this._settlePromise(P.promise,P.handler,P.receiver,P.value)},R.prototype._settlePromise0=function(P,B,ee){var Y=this._promise0,H=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(Y,P,H,B)},R.prototype._clearCallbackDataAtIndex=function(P){var B=P*4-4;this[B+2]=this[B+3]=this[B+0]=this[B+1]=void 0},R.prototype._fulfill=function(P){var B=this._bitField;if(!((B&117506048)>>>16)){if(P===this){var ee=e();return this._attachExtraTrace(ee),this._reject(ee)}this._setFulfilled(),this._rejectionHandler0=P,(B&65535)>0&&((B&134217728)!==0?this._settlePromises():h.settlePromises(this))}},R.prototype._reject=function(P){var B=this._bitField;if(!((B&117506048)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=P,this._isFinal())return h.fatalError(P,s.isNode);(B&65535)>0?h.settlePromises(this):this._ensurePossibleRejectionHandled()}},R.prototype._fulfillPromises=function(P,B){for(var ee=1;ee<P;ee++){var Y=this._fulfillmentHandlerAt(ee),H=this._promiseAt(ee),J=this._receiverAt(ee);this._clearCallbackDataAtIndex(ee),this._settlePromise(H,Y,J,B)}},R.prototype._rejectPromises=function(P,B){for(var ee=1;ee<P;ee++){var Y=this._rejectionHandlerAt(ee),H=this._promiseAt(ee),J=this._receiverAt(ee);this._clearCallbackDataAtIndex(ee),this._settlePromise(H,Y,J,B)}},R.prototype._settlePromises=function(){var P=this._bitField,B=P&65535;if(B>0){if((P&16842752)!==0){var ee=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,ee,P),this._rejectPromises(B,ee)}else{var Y=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,Y,P),this._fulfillPromises(B,Y)}this._setLength(0)}this._clearCancellationData()},R.prototype._settledValue=function(){var P=this._bitField;if((P&33554432)!==0)return this._rejectionHandler0;if((P&16777216)!==0)return this._fulfillmentHandler0};function W(P){this.promise._resolveCallback(P)}function U(P){this.promise._rejectCallback(P,!1)}R.defer=R.pending=function(){E.deprecated("Promise.defer","new Promise");var P=new R(k);return{promise:P,resolve:W,reject:U}},s.notEnumerableProp(R,"_makeSelfResolutionError",e),IB()(R,k,D,n,E),OB()(R,k,D,E),MB()(R,_,n,E),LB()(R),BB()(R),PB()(R,_,D,k,h,l),R.Promise=R,R.version="3.4.7",zB()(R,_,n,D,k,E),WB()(R),HB()(R,n,D,N,k,E),qB()(R,k,E),VB()(R,n,k,D,i,E),XB()(R),GB()(R,k),$B()(R,_,D,n),YB()(R,k,D,n),KB()(R,_,n,D,k,E),QB()(R,_,E),ZB()(R,_,n),JB()(R,k),eP()(R,k),tP()(R),s.toFastProperties(R),s.toFastProperties(R.prototype);function X(P){var B=new R(k);B._fulfillmentHandler0=P,B._rejectionHandler0=P,B._promise0=P,B._receiver0=P}return X({a:1}),X({b:2}),X({c:3}),X(1),X(function(){}),X(void 0),X(!1),X(new R(k)),E.setBounds(d.firstLineError,s.lastLineError),R}})(Yw)),Yw.exports}var I3;function qc(){if(I3)return la;I3=1;var r=Nn,e=nP()();la.defer=t,la.when=e.resolve,la.resolve=e.resolve,la.all=e.all,la.props=e.props,la.reject=e.reject,la.promisify=e.promisify,la.mapSeries=e.mapSeries,la.attempt=e.attempt,la.nfcall=function(n){var i=Array.prototype.slice.call(arguments,1),a=e.promisify(n);return a.apply(null,i)},e.prototype.fail=e.prototype.caught,e.prototype.also=function(n){return this.then(function(i){var a=r.extend({},i,n(i));return e.props(a)})};function t(){var n,i,a=new e.Promise(function(s,l){n=s,i=l});return{resolve:n,reject:i,promise:a}}return la}var Mt={},O3;function Bd(){if(O3)return Mt;O3=1;var r=Nn,e=Mt.types={document:"document",paragraph:"paragraph",run:"run",text:"text",tab:"tab",checkbox:"checkbox",hyperlink:"hyperlink",noteReference:"noteReference",image:"image",note:"note",commentReference:"commentReference",comment:"comment",table:"table",tableRow:"tableRow",tableCell:"tableCell",break:"break",bookmarkStart:"bookmarkStart"};function t(C,j){return j=j||{},{type:e.document,children:C,notes:j.notes||new g({}),comments:j.comments||[]}}function n(C,j){j=j||{};var M=j.indent||{};return{type:e.paragraph,children:C,styleId:j.styleId||null,styleName:j.styleName||null,numbering:j.numbering||null,alignment:j.alignment||null,indent:{start:M.start||null,end:M.end||null,firstLine:M.firstLine||null,hanging:M.hanging||null}}}function i(C,j){return j=j||{},{type:e.run,children:C,styleId:j.styleId||null,styleName:j.styleName||null,isBold:!!j.isBold,isUnderline:!!j.isUnderline,isItalic:!!j.isItalic,isStrikethrough:!!j.isStrikethrough,isAllCaps:!!j.isAllCaps,isSmallCaps:!!j.isSmallCaps,verticalAlignment:j.verticalAlignment||a.baseline,font:j.font||null,fontSize:j.fontSize||null,highlight:j.highlight||null}}var a={baseline:"baseline",superscript:"superscript",subscript:"subscript"};function s(C){return{type:e.text,value:C}}function l(){return{type:e.tab}}function u(C){return{type:e.checkbox,checked:C.checked}}function d(C,j){return{type:e.hyperlink,children:C,href:j.href,anchor:j.anchor,targetFrame:j.targetFrame}}function h(C){return{type:e.noteReference,noteType:C.noteType,noteId:C.noteId}}function g(C){this._notes=r.indexBy(C,function(j){return v(j.noteType,j.noteId)})}g.prototype.resolve=function(C){return this.findNoteByKey(v(C.noteType,C.noteId))},g.prototype.findNoteByKey=function(C){return this._notes[C]||null};function b(C){return{type:e.note,noteType:C.noteType,noteId:C.noteId,body:C.body}}function x(C){return{type:e.commentReference,commentId:C.commentId}}function k(C){return{type:e.comment,commentId:C.commentId,body:C.body,authorName:C.authorName,authorInitials:C.authorInitials}}function v(C,j){return C+"-"+j}function w(C){return{type:e.image,read:function(j){return j?C.readImage(j):C.readImage().then(function(M){return Buffer.from(M)})},readAsArrayBuffer:function(){return C.readImage()},readAsBase64String:function(){return C.readImage("base64")},readAsBuffer:function(){return C.readImage().then(function(j){return Buffer.from(j)})},altText:C.altText,contentType:C.contentType}}function D(C,j){return j=j||{},{type:e.table,children:C,styleId:j.styleId||null,styleName:j.styleName||null}}function _(C,j){return j=j||{},{type:e.tableRow,children:C,isHeader:j.isHeader||!1}}function A(C,j){return j=j||{},{type:e.tableCell,children:C,colSpan:j.colSpan==null?1:j.colSpan,rowSpan:j.rowSpan==null?1:j.rowSpan}}function N(C){return{type:e.break,breakType:C}}function E(C){return{type:e.bookmarkStart,name:C.name}}return Mt.document=Mt.Document=t,Mt.paragraph=Mt.Paragraph=n,Mt.run=Mt.Run=i,Mt.text=Mt.Text=s,Mt.tab=Mt.Tab=l,Mt.checkbox=Mt.Checkbox=u,Mt.Hyperlink=d,Mt.noteReference=Mt.NoteReference=h,Mt.Notes=g,Mt.Note=b,Mt.commentReference=x,Mt.comment=k,Mt.Image=w,Mt.Table=D,Mt.TableRow=_,Mt.TableCell=A,Mt.lineBreak=N("line"),Mt.pageBreak=N("page"),Mt.columnBreak=N("column"),Mt.BookmarkStart=E,Mt.verticalAlignment=a,Mt}var Ah={},M3;function nl(){if(M3)return Ah;M3=1;var r=Nn;Ah.Result=e,Ah.success=t,Ah.warning=n,Ah.error=i;function e(u,d){this.value=u,this.messages=d||[]}e.prototype.map=function(u){return new e(u(this.value),this.messages)},e.prototype.flatMap=function(u){var d=u(this.value);return new e(d.value,a([this,d]))},e.prototype.flatMapThen=function(u){var d=this;return u(this.value).then(function(h){return new e(h.value,a([d,h]))})},e.combine=function(u){var d=r.flatten(r.pluck(u,"value")),h=a(u);return new e(d,h)};function t(u){return new e(u,[])}function n(u){return{type:"warning",message:u}}function i(u){return{type:"error",message:u.message,error:u}}function a(u){var d=[];return r.flatten(r.pluck(u,"messages"),!0).forEach(function(h){s(d,h)||d.push(h)}),d}function s(u,d){return r.find(u,l.bind(null,d))!==void 0}function l(u,d){return u.type===d.type&&u.message===d.message}return Ah}var Ag={},Sg={},L3;function rP(){if(L3)return Sg;L3=1,Sg.byteLength=l,Sg.toByteArray=d,Sg.fromByteArray=b;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=n.length;i<a;++i)r[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function s(x){var k=x.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=x.indexOf("=");v===-1&&(v=k);var w=v===k?0:4-v%4;return[v,w]}function l(x){var k=s(x),v=k[0],w=k[1];return(v+w)*3/4-w}function u(x,k,v){return(k+v)*3/4-v}function d(x){var k,v=s(x),w=v[0],D=v[1],_=new t(u(x,w,D)),A=0,N=D>0?w-4:w,E;for(E=0;E<N;E+=4)k=e[x.charCodeAt(E)]<<18|e[x.charCodeAt(E+1)]<<12|e[x.charCodeAt(E+2)]<<6|e[x.charCodeAt(E+3)],_[A++]=k>>16&255,_[A++]=k>>8&255,_[A++]=k&255;return D===2&&(k=e[x.charCodeAt(E)]<<2|e[x.charCodeAt(E+1)]>>4,_[A++]=k&255),D===1&&(k=e[x.charCodeAt(E)]<<10|e[x.charCodeAt(E+1)]<<4|e[x.charCodeAt(E+2)]>>2,_[A++]=k>>8&255,_[A++]=k&255),_}function h(x){return r[x>>18&63]+r[x>>12&63]+r[x>>6&63]+r[x&63]}function g(x,k,v){for(var w,D=[],_=k;_<v;_+=3)w=(x[_]<<16&16711680)+(x[_+1]<<8&65280)+(x[_+2]&255),D.push(h(w));return D.join("")}function b(x){for(var k,v=x.length,w=v%3,D=[],_=16383,A=0,N=v-w;A<N;A+=_)D.push(g(x,A,A+_>N?N:A+_));return w===1?(k=x[v-1],D.push(r[k>>2]+r[k<<4&63]+"==")):w===2&&(k=(x[v-2]<<8)+x[v-1],D.push(r[k>>10]+r[k>>4&63]+r[k<<2&63]+"=")),D.join("")}return Sg}function Fy(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ek={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var B3;function iP(){return B3||(B3=1,(function(r,e){(function(t){r.exports=t()})(function(){return(function t(n,i,a){function s(d,h){if(!i[d]){if(!n[d]){var g=typeof Fy=="function"&&Fy;if(!h&&g)return g(d,!0);if(l)return l(d,!0);var b=new Error("Cannot find module '"+d+"'");throw b.code="MODULE_NOT_FOUND",b}var x=i[d]={exports:{}};n[d][0].call(x.exports,function(k){var v=n[d][1][k];return s(v||k)},x,x.exports,t,n,i,a)}return i[d].exports}for(var l=typeof Fy=="function"&&Fy,u=0;u<a.length;u++)s(a[u]);return s})({1:[function(t,n,i){var a=t("./utils"),s=t("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var d,h,g,b,x,k,v,w=[],D=0,_=u.length,A=_,N=a.getTypeOf(u)!=="string";D<u.length;)A=_-D,g=N?(d=u[D++],h=D<_?u[D++]:0,D<_?u[D++]:0):(d=u.charCodeAt(D++),h=D<_?u.charCodeAt(D++):0,D<_?u.charCodeAt(D++):0),b=d>>2,x=(3&d)<<4|h>>4,k=1<A?(15&h)<<2|g>>6:64,v=2<A?63&g:64,w.push(l.charAt(b)+l.charAt(x)+l.charAt(k)+l.charAt(v));return w.join("")},i.decode=function(u){var d,h,g,b,x,k,v=0,w=0,D="data:";if(u.substr(0,D.length)===D)throw new Error("Invalid base64 input, it looks like a data url.");var _,A=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===l.charAt(64)&&A--,u.charAt(u.length-2)===l.charAt(64)&&A--,A%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=s.uint8array?new Uint8Array(0|A):new Array(0|A);v<u.length;)d=l.indexOf(u.charAt(v++))<<2|(b=l.indexOf(u.charAt(v++)))>>4,h=(15&b)<<4|(x=l.indexOf(u.charAt(v++)))>>2,g=(3&x)<<6|(k=l.indexOf(u.charAt(v++))),_[w++]=d,x!==64&&(_[w++]=h),k!==64&&(_[w++]=g);return _}},{"./support":30,"./utils":32}],2:[function(t,n,i){var a=t("./external"),s=t("./stream/DataWorker"),l=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function d(h,g,b,x,k){this.compressedSize=h,this.uncompressedSize=g,this.crc32=b,this.compression=x,this.compressedContent=k}d.prototype={getContentWorker:function(){var h=new s(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),g=this;return h.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new s(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(h,g,b){return h.pipe(new l).pipe(new u("uncompressedSize")).pipe(g.compressWorker(b)).pipe(new u("compressedSize")).withStreamInfo("compression",g)},n.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,i){var a=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,i){var a=t("./utils"),s=(function(){for(var l,u=[],d=0;d<256;d++){l=d;for(var h=0;h<8;h++)l=1&l?3988292384^l>>>1:l>>>1;u[d]=l}return u})();n.exports=function(l,u){return l!==void 0&&l.length?a.getTypeOf(l)!=="string"?(function(d,h,g,b){var x=s,k=b+g;d^=-1;for(var v=b;v<k;v++)d=d>>>8^x[255&(d^h[v])];return-1^d})(0|u,l,l.length,0):(function(d,h,g,b){var x=s,k=b+g;d^=-1;for(var v=b;v<k;v++)d=d>>>8^x[255&(d^h.charCodeAt(v))];return-1^d})(0|u,l,l.length,0):0}},{"./utils":32}],5:[function(t,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,n,i){var a=null;a=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:a}},{lie:37}],7:[function(t,n,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=t("pako"),l=t("./utils"),u=t("./stream/GenericWorker"),d=a?"uint8array":"array";function h(g,b){u.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=b,this.meta={}}i.magic="\b\0",l.inherits(h,u),h.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(d,g.data),!1)},h.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(b){g.push({data:b,meta:g.meta})}},i.compressWorker=function(g){return new h("Deflate",g)},i.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,i){function a(x,k){var v,w="";for(v=0;v<k;v++)w+=String.fromCharCode(255&x),x>>>=8;return w}function s(x,k,v,w,D,_){var A,N,E=x.file,C=x.compression,j=_!==d.utf8encode,M=l.transformTo("string",_(E.name)),O=l.transformTo("string",d.utf8encode(E.name)),F=E.comment,G=l.transformTo("string",_(F)),R=l.transformTo("string",d.utf8encode(F)),W=O.length!==E.name.length,U=R.length!==F.length,X="",P="",B="",ee=E.dir,Y=E.date,H={crc32:0,compressedSize:0,uncompressedSize:0};k&&!v||(H.crc32=x.crc32,H.compressedSize=x.compressedSize,H.uncompressedSize=x.uncompressedSize);var J=0;k&&(J|=8),j||!W&&!U||(J|=2048);var ie=0,z=0;ee&&(ie|=16),D==="UNIX"?(z=798,ie|=(function(ve,je){var Ie=ve;return ve||(Ie=je?16893:33204),(65535&Ie)<<16})(E.unixPermissions,ee)):(z=20,ie|=(function(ve){return 63&(ve||0)})(E.dosPermissions)),A=Y.getUTCHours(),A<<=6,A|=Y.getUTCMinutes(),A<<=5,A|=Y.getUTCSeconds()/2,N=Y.getUTCFullYear()-1980,N<<=4,N|=Y.getUTCMonth()+1,N<<=5,N|=Y.getUTCDate(),W&&(P=a(1,1)+a(h(M),4)+O,X+="up"+a(P.length,2)+P),U&&(B=a(1,1)+a(h(G),4)+R,X+="uc"+a(B.length,2)+B);var ge="";return ge+=`
\0`,ge+=a(J,2),ge+=C.magic,ge+=a(A,2),ge+=a(N,2),ge+=a(H.crc32,4),ge+=a(H.compressedSize,4),ge+=a(H.uncompressedSize,4),ge+=a(M.length,2),ge+=a(X.length,2),{fileRecord:g.LOCAL_FILE_HEADER+ge+M+X,dirRecord:g.CENTRAL_FILE_HEADER+a(z,2)+ge+a(G.length,2)+"\0\0\0\0"+a(ie,4)+a(w,4)+M+X+G}}var l=t("../utils"),u=t("../stream/GenericWorker"),d=t("../utf8"),h=t("../crc32"),g=t("../signature");function b(x,k,v,w){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=k,this.zipPlatform=v,this.encodeFileName=w,this.streamFiles=x,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(b,u),b.prototype.push=function(x){var k=x.meta.percent||0,v=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(x):(this.bytesWritten+=x.data.length,u.prototype.push.call(this,{data:x.data,meta:{currentFile:this.currentFile,percent:v?(k+100*(v-w-1))/v:100}}))},b.prototype.openedSource=function(x){this.currentSourceOffset=this.bytesWritten,this.currentFile=x.file.name;var k=this.streamFiles&&!x.file.dir;if(k){var v=s(x,k,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(x){this.accumulate=!1;var k=this.streamFiles&&!x.file.dir,v=s(x,k,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),k)this.push({data:(function(w){return g.DATA_DESCRIPTOR+a(w.crc32,4)+a(w.compressedSize,4)+a(w.uncompressedSize,4)})(x),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var x=this.bytesWritten,k=0;k<this.dirRecords.length;k++)this.push({data:this.dirRecords[k],meta:{percent:100}});var v=this.bytesWritten-x,w=(function(D,_,A,N,E){var C=l.transformTo("string",E(N));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(D,2)+a(D,2)+a(_,4)+a(A,4)+a(C.length,2)+C})(this.dirRecords.length,v,x,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(x){this._sources.push(x);var k=this;return x.on("data",function(v){k.processChunk(v)}),x.on("end",function(){k.closedSource(k.previous.streamInfo),k._sources.length?k.prepareNextSource():k.end()}),x.on("error",function(v){k.error(v)}),this},b.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(x){var k=this._sources;if(!u.prototype.error.call(this,x))return!1;for(var v=0;v<k.length;v++)try{k[v].error(x)}catch{}return!0},b.prototype.lock=function(){u.prototype.lock.call(this);for(var x=this._sources,k=0;k<x.length;k++)x[k].lock()},n.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,i){var a=t("../compressions"),s=t("./ZipFileWorker");i.generateWorker=function(l,u,d){var h=new s(u.streamFiles,d,u.platform,u.encodeFileName),g=0;try{l.forEach(function(b,x){g++;var k=(function(_,A){var N=_||A,E=a[N];if(!E)throw new Error(N+" is not a valid compression method !");return E})(x.options.compression,u.compression),v=x.options.compressionOptions||u.compressionOptions||{},w=x.dir,D=x.date;x._compressWorker(k,v).withStreamInfo("file",{name:b,dir:w,date:D,comment:x.comment||"",unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions}).pipe(h)}),h.entriesCount=g}catch(b){h.error(b)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,i){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new a;for(var l in this)typeof this[l]!="function"&&(s[l]=this[l]);return s}}(a.prototype=t("./object")).loadAsync=t("./load"),a.support=t("./support"),a.defaults=t("./defaults"),a.version="3.10.1",a.loadAsync=function(s,l){return new a().loadAsync(s,l)},a.external=t("./external"),n.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,i){var a=t("./utils"),s=t("./external"),l=t("./utf8"),u=t("./zipEntries"),d=t("./stream/Crc32Probe"),h=t("./nodejsUtils");function g(b){return new s.Promise(function(x,k){var v=b.decompressed.getContentWorker().pipe(new d);v.on("error",function(w){k(w)}).on("end",function(){v.streamInfo.crc32!==b.decompressed.crc32?k(new Error("Corrupted zip : CRC32 mismatch")):x()}).resume()})}n.exports=function(b,x){var k=this;return x=a.extend(x||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),h.isNode&&h.isStream(b)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",b,!0,x.optimizedBinaryString,x.base64).then(function(v){var w=new u(x);return w.load(v),w}).then(function(v){var w=[s.Promise.resolve(v)],D=v.files;if(x.checkCRC32)for(var _=0;_<D.length;_++)w.push(g(D[_]));return s.Promise.all(w)}).then(function(v){for(var w=v.shift(),D=w.files,_=0;_<D.length;_++){var A=D[_],N=A.fileNameStr,E=a.resolve(A.fileNameStr);k.file(E,A.decompressed,{binary:!0,optimizedBinaryString:!0,date:A.date,dir:A.dir,comment:A.fileCommentStr.length?A.fileCommentStr:null,unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions,createFolders:x.createFolders}),A.dir||(k.file(E).unsafeOriginalName=N)}return w.zipComment.length&&(k.comment=w.zipComment),k})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,i){var a=t("../utils"),s=t("../stream/GenericWorker");function l(u,d){s.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(d)}a.inherits(l,s),l.prototype._bindStream=function(u){var d=this;(this._stream=u).pause(),u.on("data",function(h){d.push({data:h,meta:{percent:0}})}).on("error",function(h){d.isPaused?this.generatedError=h:d.error(h)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},l.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,i){var a=t("readable-stream").Readable;function s(l,u,d){a.call(this,u),this._helper=l;var h=this;l.on("data",function(g,b){h.push(g)||h._helper.pause(),d&&d(b)}).on("error",function(g){h.emit("error",g)}).on("end",function(){h.push(null)})}t("../utils").inherits(s,a),s.prototype._read=function(){this._helper.resume()},n.exports=s},{"../utils":32,"readable-stream":16}],14:[function(t,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,s);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,s)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var s=new Buffer(a);return s.fill(0),s},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(t,n,i){function a(E,C,j){var M,O=l.getTypeOf(C),F=l.extend(j||{},h);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(E=D(E)),F.createFolders&&(M=w(E))&&_.call(this,M,!0);var G=O==="string"&&F.binary===!1&&F.base64===!1;j&&j.binary!==void 0||(F.binary=!G),(C instanceof g&&C.uncompressedSize===0||F.dir||!C||C.length===0)&&(F.base64=!1,F.binary=!0,C="",F.compression="STORE",O="string");var R=null;R=C instanceof g||C instanceof u?C:k.isNode&&k.isStream(C)?new v(E,C):l.prepareContent(E,C,F.binary,F.optimizedBinaryString,F.base64);var W=new b(E,R,F);this.files[E]=W}var s=t("./utf8"),l=t("./utils"),u=t("./stream/GenericWorker"),d=t("./stream/StreamHelper"),h=t("./defaults"),g=t("./compressedObject"),b=t("./zipObject"),x=t("./generate"),k=t("./nodejsUtils"),v=t("./nodejs/NodejsStreamInputAdapter"),w=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var C=E.lastIndexOf("/");return 0<C?E.substring(0,C):""},D=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},_=function(E,C){return C=C!==void 0?C:h.createFolders,E=D(E),this.files[E]||a.call(this,E,null,{dir:!0,createFolders:C}),this.files[E]};function A(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var C,j,M;for(C in this.files)M=this.files[C],(j=C.slice(this.root.length,C.length))&&C.slice(0,this.root.length)===this.root&&E(j,M)},filter:function(E){var C=[];return this.forEach(function(j,M){E(j,M)&&C.push(M)}),C},file:function(E,C,j){if(arguments.length!==1)return E=this.root+E,a.call(this,E,C,j),this;if(A(E)){var M=E;return this.filter(function(F,G){return!G.dir&&M.test(F)})}var O=this.files[this.root+E];return O&&!O.dir?O:null},folder:function(E){if(!E)return this;if(A(E))return this.filter(function(O,F){return F.dir&&E.test(O)});var C=this.root+E,j=_.call(this,C),M=this.clone();return M.root=j.name,M},remove:function(E){E=this.root+E;var C=this.files[E];if(C||(E.slice(-1)!=="/"&&(E+="/"),C=this.files[E]),C&&!C.dir)delete this.files[E];else for(var j=this.filter(function(O,F){return F.name.slice(0,E.length)===E}),M=0;M<j.length;M++)delete this.files[j[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var C,j={};try{if((j=l.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");l.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var M=j.comment||this.comment||"";C=x.generateWorker(this,j,M)}catch(O){(C=new u("error")).error(O)}return new d(C,j.type||"string",j.mimeType)},generateAsync:function(E,C){return this.generateInternalStream(E).accumulate(C)},generateNodeStream:function(E,C){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(C)}};n.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,i){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,i){var a=t("./DataReader");function s(l){a.call(this,l);for(var u=0;u<this.data.length;u++)l[u]=255&l[u]}t("../utils").inherits(s,a),s.prototype.byteAt=function(l){return this.data[this.zero+l]},s.prototype.lastIndexOfSignature=function(l){for(var u=l.charCodeAt(0),d=l.charCodeAt(1),h=l.charCodeAt(2),g=l.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===u&&this.data[b+1]===d&&this.data[b+2]===h&&this.data[b+3]===g)return b-this.zero;return-1},s.prototype.readAndCheckSignature=function(l){var u=l.charCodeAt(0),d=l.charCodeAt(1),h=l.charCodeAt(2),g=l.charCodeAt(3),b=this.readData(4);return u===b[0]&&d===b[1]&&h===b[2]&&g===b[3]},s.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=s},{"../utils":32,"./DataReader":18}],18:[function(t,n,i){var a=t("../utils");function s(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var u,d=0;for(this.checkOffset(l),u=this.index+l-1;u>=this.index;u--)d=(d<<8)+this.byteAt(u);return this.index+=l,d},readString:function(l){return a.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},n.exports=s},{"../utils":32}],19:[function(t,n,i){var a=t("./Uint8ArrayReader");function s(l){a.call(this,l)}t("../utils").inherits(s,a),s.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,i){var a=t("./DataReader");function s(l){a.call(this,l)}t("../utils").inherits(s,a),s.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},s.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},s.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},s.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=s},{"../utils":32,"./DataReader":18}],21:[function(t,n,i){var a=t("./ArrayReader");function s(l){a.call(this,l)}t("../utils").inherits(s,a),s.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,i){var a=t("../utils"),s=t("../support"),l=t("./ArrayReader"),u=t("./StringReader"),d=t("./NodeBufferReader"),h=t("./Uint8ArrayReader");n.exports=function(g){var b=a.getTypeOf(g);return a.checkSupport(b),b!=="string"||s.uint8array?b==="nodebuffer"?new d(g):s.uint8array?new h(a.transformTo("uint8array",g)):new l(a.transformTo("array",g)):new u(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,i){var a=t("./GenericWorker"),s=t("../utils");function l(u){a.call(this,"ConvertWorker to "+u),this.destType=u}s.inherits(l,a),l.prototype.processChunk=function(u){this.push({data:s.transformTo(this.destType,u.data),meta:u.meta})},n.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,i){var a=t("./GenericWorker"),s=t("../crc32");function l(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(l,a),l.prototype.processChunk=function(u){this.streamInfo.crc32=s(u.data,this.streamInfo.crc32||0),this.push(u)},n.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,i){var a=t("../utils"),s=t("./GenericWorker");function l(u){s.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}a.inherits(l,s),l.prototype.processChunk=function(u){if(u){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+u.data.length}s.prototype.processChunk.call(this,u)},n.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,i){var a=t("../utils"),s=t("./GenericWorker");function l(u){s.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(h){d.dataIsReady=!0,d.data=h,d.max=h&&h.length||0,d.type=a.getTypeOf(h),d.isPaused||d._tickAndRepeat()},function(h){d.error(h)})}a.inherits(l,s),l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,d);break;case"uint8array":u=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":u=this.data.slice(this.index,d)}return this.index=d,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,i){function a(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,l){return this._listeners[s].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,l){if(this._listeners[s])for(var u=0;u<this._listeners[s].length;u++)this._listeners[s][u].call(this,l)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var l=this;return s.on("data",function(u){l.processChunk(u)}),s.on("end",function(){l.end()}),s.on("error",function(u){l.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,l){return this.extraStreamInfo[s]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},n.exports=a},{}],29:[function(t,n,i){var a=t("../utils"),s=t("./ConvertWorker"),l=t("./GenericWorker"),u=t("../base64"),d=t("../support"),h=t("../external"),g=null;if(d.nodestream)try{g=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(k,v){return new h.Promise(function(w,D){var _=[],A=k._internalType,N=k._outputType,E=k._mimeType;k.on("data",function(C,j){_.push(C),v&&v(j)}).on("error",function(C){_=[],D(C)}).on("end",function(){try{var C=(function(j,M,O){switch(j){case"blob":return a.newBlob(a.transformTo("arraybuffer",M),O);case"base64":return u.encode(M);default:return a.transformTo(j,M)}})(N,(function(j,M){var O,F=0,G=null,R=0;for(O=0;O<M.length;O++)R+=M[O].length;switch(j){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(G=new Uint8Array(R),O=0;O<M.length;O++)G.set(M[O],F),F+=M[O].length;return G;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+j+"'")}})(A,_),E);w(C)}catch(j){D(j)}_=[]}).resume()})}function x(k,v,w){var D=v;switch(v){case"blob":case"arraybuffer":D="uint8array";break;case"base64":D="string"}try{this._internalType=D,this._outputType=v,this._mimeType=w,a.checkSupport(D),this._worker=k.pipe(new s(D)),k.lock()}catch(_){this._worker=new l("error"),this._worker.error(_)}}x.prototype={accumulate:function(k){return b(this,k)},on:function(k,v){var w=this;return k==="data"?this._worker.on(k,function(D){v.call(w,D.data,D.meta)}):this._worker.on(k,function(){a.delay(v,arguments,w)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(k){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},k)}},n.exports=x},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var a=new ArrayBuffer(0);try{i.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(a),i.blob=s.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,i){for(var a=t("./utils"),s=t("./support"),l=t("./nodejsUtils"),u=t("./stream/GenericWorker"),d=new Array(256),h=0;h<256;h++)d[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;d[254]=d[254]=1;function g(){u.call(this,"utf-8 decode"),this.leftOver=null}function b(){u.call(this,"utf-8 encode")}i.utf8encode=function(x){return s.nodebuffer?l.newBufferFrom(x,"utf-8"):(function(k){var v,w,D,_,A,N=k.length,E=0;for(_=0;_<N;_++)(64512&(w=k.charCodeAt(_)))==55296&&_+1<N&&(64512&(D=k.charCodeAt(_+1)))==56320&&(w=65536+(w-55296<<10)+(D-56320),_++),E+=w<128?1:w<2048?2:w<65536?3:4;for(v=s.uint8array?new Uint8Array(E):new Array(E),_=A=0;A<E;_++)(64512&(w=k.charCodeAt(_)))==55296&&_+1<N&&(64512&(D=k.charCodeAt(_+1)))==56320&&(w=65536+(w-55296<<10)+(D-56320),_++),w<128?v[A++]=w:(w<2048?v[A++]=192|w>>>6:(w<65536?v[A++]=224|w>>>12:(v[A++]=240|w>>>18,v[A++]=128|w>>>12&63),v[A++]=128|w>>>6&63),v[A++]=128|63&w);return v})(x)},i.utf8decode=function(x){return s.nodebuffer?a.transformTo("nodebuffer",x).toString("utf-8"):(function(k){var v,w,D,_,A=k.length,N=new Array(2*A);for(v=w=0;v<A;)if((D=k[v++])<128)N[w++]=D;else if(4<(_=d[D]))N[w++]=65533,v+=_-1;else{for(D&=_===2?31:_===3?15:7;1<_&&v<A;)D=D<<6|63&k[v++],_--;1<_?N[w++]=65533:D<65536?N[w++]=D:(D-=65536,N[w++]=55296|D>>10&1023,N[w++]=56320|1023&D)}return N.length!==w&&(N.subarray?N=N.subarray(0,w):N.length=w),a.applyFromCharCode(N)})(x=a.transformTo(s.uint8array?"uint8array":"array",x))},a.inherits(g,u),g.prototype.processChunk=function(x){var k=a.transformTo(s.uint8array?"uint8array":"array",x.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var v=k;(k=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),k.set(v,this.leftOver.length)}else k=this.leftOver.concat(k);this.leftOver=null}var w=(function(_,A){var N;for((A=A||_.length)>_.length&&(A=_.length),N=A-1;0<=N&&(192&_[N])==128;)N--;return N<0||N===0?A:N+d[_[N]]>A?N:A})(k),D=k;w!==k.length&&(s.uint8array?(D=k.subarray(0,w),this.leftOver=k.subarray(w,k.length)):(D=k.slice(0,w),this.leftOver=k.slice(w,k.length))),this.push({data:i.utf8decode(D),meta:x.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=g,a.inherits(b,u),b.prototype.processChunk=function(x){this.push({data:i.utf8encode(x.data),meta:x.meta})},i.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,i){var a=t("./support"),s=t("./base64"),l=t("./nodejsUtils"),u=t("./external");function d(v){return v}function h(v,w){for(var D=0;D<v.length;++D)w[D]=255&v.charCodeAt(D);return w}t("setimmediate"),i.newBlob=function(v,w){i.checkSupport("blob");try{return new Blob([v],{type:w})}catch{try{var D=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return D.append(v),D.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(v,w,D){var _=[],A=0,N=v.length;if(N<=D)return String.fromCharCode.apply(null,v);for(;A<N;)w==="array"||w==="nodebuffer"?_.push(String.fromCharCode.apply(null,v.slice(A,Math.min(A+D,N)))):_.push(String.fromCharCode.apply(null,v.subarray(A,Math.min(A+D,N)))),A+=D;return _.join("")},stringifyByChar:function(v){for(var w="",D=0;D<v.length;D++)w+=String.fromCharCode(v[D]);return w},applyCanBeUsed:{uint8array:(function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}})()}};function b(v){var w=65536,D=i.getTypeOf(v),_=!0;if(D==="uint8array"?_=g.applyCanBeUsed.uint8array:D==="nodebuffer"&&(_=g.applyCanBeUsed.nodebuffer),_)for(;1<w;)try{return g.stringifyByChunk(v,D,w)}catch{w=Math.floor(w/2)}return g.stringifyByChar(v)}function x(v,w){for(var D=0;D<v.length;D++)w[D]=v[D];return w}i.applyFromCharCode=b;var k={};k.string={string:d,array:function(v){return h(v,new Array(v.length))},arraybuffer:function(v){return k.string.uint8array(v).buffer},uint8array:function(v){return h(v,new Uint8Array(v.length))},nodebuffer:function(v){return h(v,l.allocBuffer(v.length))}},k.array={string:b,array:d,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return l.newBufferFrom(v)}},k.arraybuffer={string:function(v){return b(new Uint8Array(v))},array:function(v){return x(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:d,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return l.newBufferFrom(new Uint8Array(v))}},k.uint8array={string:b,array:function(v){return x(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:d,nodebuffer:function(v){return l.newBufferFrom(v)}},k.nodebuffer={string:b,array:function(v){return x(v,new Array(v.length))},arraybuffer:function(v){return k.nodebuffer.uint8array(v).buffer},uint8array:function(v){return x(v,new Uint8Array(v.length))},nodebuffer:d},i.transformTo=function(v,w){if(w=w||"",!v)return w;i.checkSupport(v);var D=i.getTypeOf(w);return k[D][v](w)},i.resolve=function(v){for(var w=v.split("/"),D=[],_=0;_<w.length;_++){var A=w[_];A==="."||A===""&&_!==0&&_!==w.length-1||(A===".."?D.pop():D.push(A))}return D.join("/")},i.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":a.nodebuffer&&l.isBuffer(v)?"nodebuffer":a.uint8array&&v instanceof Uint8Array?"uint8array":a.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(v){if(!a[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(v){var w,D,_="";for(D=0;D<(v||"").length;D++)_+="\\x"+((w=v.charCodeAt(D))<16?"0":"")+w.toString(16).toUpperCase();return _},i.delay=function(v,w,D){setImmediate(function(){v.apply(D||null,w||[])})},i.inherits=function(v,w){function D(){}D.prototype=w.prototype,v.prototype=new D},i.extend=function(){var v,w,D={};for(v=0;v<arguments.length;v++)for(w in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],w)&&D[w]===void 0&&(D[w]=arguments[v][w]);return D},i.prepareContent=function(v,w,D,_,A){return u.Promise.resolve(w).then(function(N){return a.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new u.Promise(function(E,C){var j=new FileReader;j.onload=function(M){E(M.target.result)},j.onerror=function(M){C(M.target.error)},j.readAsArrayBuffer(N)}):N}).then(function(N){var E=i.getTypeOf(N);return E?(E==="arraybuffer"?N=i.transformTo("uint8array",N):E==="string"&&(A?N=s.decode(N):D&&_!==!0&&(N=(function(C){return h(C,a.uint8array?new Uint8Array(C.length):new Array(C.length))})(N))),N):u.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,i){var a=t("./reader/readerFor"),s=t("./utils"),l=t("./signature"),u=t("./zipEntry"),d=t("./support");function h(g){this.files=[],this.loadOptions=g}h.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(b)+", expected "+s.pretty(g)+")")}},isSignature:function(g,b){var x=this.reader.index;this.reader.setIndex(g);var k=this.reader.readString(4)===b;return this.reader.setIndex(x),k},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),b=d.uint8array?"uint8array":"array",x=s.transformTo(b,g);this.zipComment=this.loadOptions.decodeFileName(x)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,b,x,k=this.zip64EndOfCentralSize-44;0<k;)g=this.reader.readInt(2),b=this.reader.readInt(4),x=this.reader.readData(b),this.zip64ExtensibleData[g]={id:g,length:b,value:x}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,b;for(g=0;g<this.files.length;g++)b=this.files[g],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(g=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var b=g;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var x=this.centralDirOffset+this.centralDirSize;this.zip64&&(x+=20,x+=12+this.zip64EndOfCentralSize);var k=b-x;if(0<k)this.isSignature(b,l.CENTRAL_FILE_HEADER)||(this.reader.zero=k);else if(k<0)throw new Error("Corrupted zip: missing "+Math.abs(k)+" bytes.")},prepareReader:function(g){this.reader=a(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,i){var a=t("./reader/readerFor"),s=t("./utils"),l=t("./compressedObject"),u=t("./crc32"),d=t("./utf8"),h=t("./compressions"),g=t("./support");function b(x,k){this.options=x,this.loadOptions=k}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(x){var k,v;if(x.skip(22),this.fileNameLength=x.readInt(2),v=x.readInt(2),this.fileName=x.readData(this.fileNameLength),x.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((k=(function(w){for(var D in h)if(Object.prototype.hasOwnProperty.call(h,D)&&h[D].magic===w)return h[D];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,k,x.readData(this.compressedSize))},readCentralPart:function(x){this.versionMadeBy=x.readInt(2),x.skip(2),this.bitFlag=x.readInt(2),this.compressionMethod=x.readString(2),this.date=x.readDate(),this.crc32=x.readInt(4),this.compressedSize=x.readInt(4),this.uncompressedSize=x.readInt(4);var k=x.readInt(2);if(this.extraFieldsLength=x.readInt(2),this.fileCommentLength=x.readInt(2),this.diskNumberStart=x.readInt(2),this.internalFileAttributes=x.readInt(2),this.externalFileAttributes=x.readInt(4),this.localHeaderOffset=x.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");x.skip(k),this.readExtraFields(x),this.parseZIP64ExtraField(x),this.fileComment=x.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var x=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),x==0&&(this.dosPermissions=63&this.externalFileAttributes),x==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var x=a(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=x.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=x.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=x.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=x.readInt(4))}},readExtraFields:function(x){var k,v,w,D=x.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});x.index+4<D;)k=x.readInt(2),v=x.readInt(2),w=x.readData(v),this.extraFields[k]={id:k,length:v,value:w};x.setIndex(D)},handleUTF8:function(){var x=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var k=this.findExtraFieldUnicodePath();if(k!==null)this.fileNameStr=k;else{var v=s.transformTo(x,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var D=s.transformTo(x,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(D)}}},findExtraFieldUnicodePath:function(){var x=this.extraFields[28789];if(x){var k=a(x.value);return k.readInt(1)!==1||u(this.fileName)!==k.readInt(4)?null:d.utf8decode(k.readData(x.length-5))}return null},findExtraFieldUnicodeComment:function(){var x=this.extraFields[25461];if(x){var k=a(x.value);return k.readInt(1)!==1||u(this.fileComment)!==k.readInt(4)?null:d.utf8decode(k.readData(x.length-5))}return null}},n.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,i){function a(k,v,w){this.name=k,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=v,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var s=t("./stream/StreamHelper"),l=t("./stream/DataWorker"),u=t("./utf8"),d=t("./compressedObject"),h=t("./stream/GenericWorker");a.prototype={internalStream:function(k){var v=null,w="string";try{if(!k)throw new Error("No output type specified.");var D=(w=k.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),v=this._decompressWorker();var _=!this._dataBinary;_&&!D&&(v=v.pipe(new u.Utf8EncodeWorker)),!_&&D&&(v=v.pipe(new u.Utf8DecodeWorker))}catch(A){(v=new h("error")).error(A)}return new s(v,w,"")},async:function(k,v){return this.internalStream(k).accumulate(v)},nodeStream:function(k,v){return this.internalStream(k||"nodebuffer").toNodejsStream(v)},_compressWorker:function(k,v){if(this._data instanceof d&&this._data.compression.magic===k.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new u.Utf8EncodeWorker)),d.createWorkerFrom(w,k,v)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof h?this._data:new l(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},x=0;x<g.length;x++)a.prototype[g[x]]=b;n.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,i){(function(a){var s,l,u=a.MutationObserver||a.WebKitMutationObserver;if(u){var d=0,h=new u(k),g=a.document.createTextNode("");h.observe(g,{characterData:!0}),s=function(){g.data=d=++d%2}}else if(a.setImmediate||a.MessageChannel===void 0)s="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var v=a.document.createElement("script");v.onreadystatechange=function(){k(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},a.document.documentElement.appendChild(v)}:function(){setTimeout(k,0)};else{var b=new a.MessageChannel;b.port1.onmessage=k,s=function(){b.port2.postMessage(0)}}var x=[];function k(){var v,w;l=!0;for(var D=x.length;D;){for(w=x,x=[],v=-1;++v<D;)w[v]();D=x.length}l=!1}n.exports=function(v){x.push(v)!==1||l||s()}}).call(this,typeof Tc<"u"?Tc:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,i){var a=t("immediate");function s(){}var l={},u=["REJECTED"],d=["FULFILLED"],h=["PENDING"];function g(D){if(typeof D!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,D!==s&&v(this,D)}function b(D,_,A){this.promise=D,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}function x(D,_,A){a(function(){var N;try{N=_(A)}catch(E){return l.reject(D,E)}N===D?l.reject(D,new TypeError("Cannot resolve promise with itself")):l.resolve(D,N)})}function k(D){var _=D&&D.then;if(D&&(typeof D=="object"||typeof D=="function")&&typeof _=="function")return function(){_.apply(D,arguments)}}function v(D,_){var A=!1;function N(j){A||(A=!0,l.reject(D,j))}function E(j){A||(A=!0,l.resolve(D,j))}var C=w(function(){_(E,N)});C.status==="error"&&N(C.value)}function w(D,_){var A={};try{A.value=D(_),A.status="success"}catch(N){A.status="error",A.value=N}return A}(n.exports=g).prototype.finally=function(D){if(typeof D!="function")return this;var _=this.constructor;return this.then(function(A){return _.resolve(D()).then(function(){return A})},function(A){return _.resolve(D()).then(function(){throw A})})},g.prototype.catch=function(D){return this.then(null,D)},g.prototype.then=function(D,_){if(typeof D!="function"&&this.state===d||typeof _!="function"&&this.state===u)return this;var A=new this.constructor(s);return this.state!==h?x(A,this.state===d?D:_,this.outcome):this.queue.push(new b(A,D,_)),A},b.prototype.callFulfilled=function(D){l.resolve(this.promise,D)},b.prototype.otherCallFulfilled=function(D){x(this.promise,this.onFulfilled,D)},b.prototype.callRejected=function(D){l.reject(this.promise,D)},b.prototype.otherCallRejected=function(D){x(this.promise,this.onRejected,D)},l.resolve=function(D,_){var A=w(k,_);if(A.status==="error")return l.reject(D,A.value);var N=A.value;if(N)v(D,N);else{D.state=d,D.outcome=_;for(var E=-1,C=D.queue.length;++E<C;)D.queue[E].callFulfilled(_)}return D},l.reject=function(D,_){D.state=u,D.outcome=_;for(var A=-1,N=D.queue.length;++A<N;)D.queue[A].callRejected(_);return D},g.resolve=function(D){return D instanceof this?D:l.resolve(new this(s),D)},g.reject=function(D){var _=new this(s);return l.reject(_,D)},g.all=function(D){var _=this;if(Object.prototype.toString.call(D)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=D.length,N=!1;if(!A)return this.resolve([]);for(var E=new Array(A),C=0,j=-1,M=new this(s);++j<A;)O(D[j],j);return M;function O(F,G){_.resolve(F).then(function(R){E[G]=R,++C!==A||N||(N=!0,l.resolve(M,E))},function(R){N||(N=!0,l.reject(M,R))})}},g.race=function(D){var _=this;if(Object.prototype.toString.call(D)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=D.length,N=!1;if(!A)return this.resolve([]);for(var E=-1,C=new this(s);++E<A;)j=D[E],_.resolve(j).then(function(M){N||(N=!0,l.resolve(C,M))},function(M){N||(N=!0,l.reject(C,M))});var j;return C}},{immediate:36}],38:[function(t,n,i){var a={};(0,t("./lib/utils/common").assign)(a,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,i){var a=t("./zlib/deflate"),s=t("./utils/common"),l=t("./utils/strings"),u=t("./zlib/messages"),d=t("./zlib/zstream"),h=Object.prototype.toString,g=0,b=-1,x=0,k=8;function v(D){if(!(this instanceof v))return new v(D);this.options=s.assign({level:b,method:k,chunkSize:16384,windowBits:15,memLevel:8,strategy:x,to:""},D||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var A=a.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(A!==g)throw new Error(u[A]);if(_.header&&a.deflateSetHeader(this.strm,_.header),_.dictionary){var N;if(N=typeof _.dictionary=="string"?l.string2buf(_.dictionary):h.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(A=a.deflateSetDictionary(this.strm,N))!==g)throw new Error(u[A]);this._dict_set=!0}}function w(D,_){var A=new v(_);if(A.push(D,!0),A.err)throw A.msg||u[A.err];return A.result}v.prototype.push=function(D,_){var A,N,E=this.strm,C=this.options.chunkSize;if(this.ended)return!1;N=_===~~_?_:_===!0?4:0,typeof D=="string"?E.input=l.string2buf(D):h.call(D)==="[object ArrayBuffer]"?E.input=new Uint8Array(D):E.input=D,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new s.Buf8(C),E.next_out=0,E.avail_out=C),(A=a.deflate(E,N))!==1&&A!==g)return this.onEnd(A),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(s.shrinkBuf(E.output,E.next_out))):this.onData(s.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&A!==1);return N===4?(A=a.deflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===g):N!==2||(this.onEnd(g),!(E.avail_out=0))},v.prototype.onData=function(D){this.chunks.push(D)},v.prototype.onEnd=function(D){D===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=D,this.msg=this.strm.msg},i.Deflate=v,i.deflate=w,i.deflateRaw=function(D,_){return(_=_||{}).raw=!0,w(D,_)},i.gzip=function(D,_){return(_=_||{}).gzip=!0,w(D,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,i){var a=t("./zlib/inflate"),s=t("./utils/common"),l=t("./utils/strings"),u=t("./zlib/constants"),d=t("./zlib/messages"),h=t("./zlib/zstream"),g=t("./zlib/gzheader"),b=Object.prototype.toString;function x(v){if(!(this instanceof x))return new x(v);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},v||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||v&&v.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&(15&w.windowBits)==0&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var D=a.inflateInit2(this.strm,w.windowBits);if(D!==u.Z_OK)throw new Error(d[D]);this.header=new g,a.inflateGetHeader(this.strm,this.header)}function k(v,w){var D=new x(w);if(D.push(v,!0),D.err)throw D.msg||d[D.err];return D.result}x.prototype.push=function(v,w){var D,_,A,N,E,C,j=this.strm,M=this.options.chunkSize,O=this.options.dictionary,F=!1;if(this.ended)return!1;_=w===~~w?w:w===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof v=="string"?j.input=l.binstring2buf(v):b.call(v)==="[object ArrayBuffer]"?j.input=new Uint8Array(v):j.input=v,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new s.Buf8(M),j.next_out=0,j.avail_out=M),(D=a.inflate(j,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&O&&(C=typeof O=="string"?l.string2buf(O):b.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,D=a.inflateSetDictionary(this.strm,C)),D===u.Z_BUF_ERROR&&F===!0&&(D=u.Z_OK,F=!1),D!==u.Z_STREAM_END&&D!==u.Z_OK)return this.onEnd(D),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&D!==u.Z_STREAM_END&&(j.avail_in!==0||_!==u.Z_FINISH&&_!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(A=l.utf8border(j.output,j.next_out),N=j.next_out-A,E=l.buf2string(j.output,A),j.next_out=N,j.avail_out=M-N,N&&s.arraySet(j.output,j.output,A,N,0),this.onData(E)):this.onData(s.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(F=!0)}while((0<j.avail_in||j.avail_out===0)&&D!==u.Z_STREAM_END);return D===u.Z_STREAM_END&&(_=u.Z_FINISH),_===u.Z_FINISH?(D=a.inflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===u.Z_OK):_!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(j.avail_out=0))},x.prototype.onData=function(v){this.chunks.push(v)},x.prototype.onEnd=function(v){v===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},i.Inflate=x,i.inflate=k,i.inflateRaw=function(v,w){return(w=w||{}).raw=!0,k(v,w)},i.ungzip=k},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,i){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var h=d.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var g in h)h.hasOwnProperty(g)&&(u[g]=h[g])}}return u},i.shrinkBuf=function(u,d){return u.length===d?u:u.subarray?u.subarray(0,d):(u.length=d,u)};var s={arraySet:function(u,d,h,g,b){if(d.subarray&&u.subarray)u.set(d.subarray(h,h+g),b);else for(var x=0;x<g;x++)u[b+x]=d[h+x]},flattenChunks:function(u){var d,h,g,b,x,k;for(d=g=0,h=u.length;d<h;d++)g+=u[d].length;for(k=new Uint8Array(g),d=b=0,h=u.length;d<h;d++)x=u[d],k.set(x,b),b+=x.length;return k}},l={arraySet:function(u,d,h,g,b){for(var x=0;x<g;x++)u[b+x]=d[h+x]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,l))},i.setTyped(a)},{}],42:[function(t,n,i){var a=t("./common"),s=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var u=new a.Buf8(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function h(g,b){if(b<65537&&(g.subarray&&l||!g.subarray&&s))return String.fromCharCode.apply(null,a.shrinkBuf(g,b));for(var x="",k=0;k<b;k++)x+=String.fromCharCode(g[k]);return x}u[254]=u[254]=1,i.string2buf=function(g){var b,x,k,v,w,D=g.length,_=0;for(v=0;v<D;v++)(64512&(x=g.charCodeAt(v)))==55296&&v+1<D&&(64512&(k=g.charCodeAt(v+1)))==56320&&(x=65536+(x-55296<<10)+(k-56320),v++),_+=x<128?1:x<2048?2:x<65536?3:4;for(b=new a.Buf8(_),v=w=0;w<_;v++)(64512&(x=g.charCodeAt(v)))==55296&&v+1<D&&(64512&(k=g.charCodeAt(v+1)))==56320&&(x=65536+(x-55296<<10)+(k-56320),v++),x<128?b[w++]=x:(x<2048?b[w++]=192|x>>>6:(x<65536?b[w++]=224|x>>>12:(b[w++]=240|x>>>18,b[w++]=128|x>>>12&63),b[w++]=128|x>>>6&63),b[w++]=128|63&x);return b},i.buf2binstring=function(g){return h(g,g.length)},i.binstring2buf=function(g){for(var b=new a.Buf8(g.length),x=0,k=b.length;x<k;x++)b[x]=g.charCodeAt(x);return b},i.buf2string=function(g,b){var x,k,v,w,D=b||g.length,_=new Array(2*D);for(x=k=0;x<D;)if((v=g[x++])<128)_[k++]=v;else if(4<(w=u[v]))_[k++]=65533,x+=w-1;else{for(v&=w===2?31:w===3?15:7;1<w&&x<D;)v=v<<6|63&g[x++],w--;1<w?_[k++]=65533:v<65536?_[k++]=v:(v-=65536,_[k++]=55296|v>>10&1023,_[k++]=56320|1023&v)}return h(_,k)},i.utf8border=function(g,b){var x;for((b=b||g.length)>g.length&&(b=g.length),x=b-1;0<=x&&(192&g[x])==128;)x--;return x<0||x===0?b:x+u[g[x]]>b?x:b}},{"./common":41}],43:[function(t,n,i){n.exports=function(a,s,l,u){for(var d=65535&a|0,h=a>>>16&65535|0,g=0;l!==0;){for(l-=g=2e3<l?2e3:l;h=h+(d=d+s[u++]|0)|0,--g;);d%=65521,h%=65521}return d|h<<16|0}},{}],44:[function(t,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,i){var a=(function(){for(var s,l=[],u=0;u<256;u++){s=u;for(var d=0;d<8;d++)s=1&s?3988292384^s>>>1:s>>>1;l[u]=s}return l})();n.exports=function(s,l,u,d){var h=a,g=d+u;s^=-1;for(var b=d;b<g;b++)s=s>>>8^h[255&(s^l[b])];return-1^s}},{}],46:[function(t,n,i){var a,s=t("../utils/common"),l=t("./trees"),u=t("./adler32"),d=t("./crc32"),h=t("./messages"),g=0,b=4,x=0,k=-2,v=-1,w=4,D=2,_=8,A=9,N=286,E=30,C=19,j=2*N+1,M=15,O=3,F=258,G=F+O+1,R=42,W=113,U=1,X=2,P=3,B=4;function ee(I,he){return I.msg=h[he],he}function Y(I){return(I<<1)-(4<I?9:0)}function H(I){for(var he=I.length;0<=--he;)I[he]=0}function J(I){var he=I.state,oe=he.pending;oe>I.avail_out&&(oe=I.avail_out),oe!==0&&(s.arraySet(I.output,he.pending_buf,he.pending_out,oe,I.next_out),I.next_out+=oe,he.pending_out+=oe,I.total_out+=oe,I.avail_out-=oe,he.pending-=oe,he.pending===0&&(he.pending_out=0))}function ie(I,he){l._tr_flush_block(I,0<=I.block_start?I.block_start:-1,I.strstart-I.block_start,he),I.block_start=I.strstart,J(I.strm)}function z(I,he){I.pending_buf[I.pending++]=he}function ge(I,he){I.pending_buf[I.pending++]=he>>>8&255,I.pending_buf[I.pending++]=255&he}function ve(I,he){var oe,re,ne=I.max_chain_length,ue=I.strstart,Ce=I.prev_length,Ne=I.nice_match,pe=I.strstart>I.w_size-G?I.strstart-(I.w_size-G):0,se=I.window,de=I.w_mask,ye=I.prev,ae=I.strstart+F,ke=se[ue+Ce-1],Me=se[ue+Ce];I.prev_length>=I.good_match&&(ne>>=2),Ne>I.lookahead&&(Ne=I.lookahead);do if(se[(oe=he)+Ce]===Me&&se[oe+Ce-1]===ke&&se[oe]===se[ue]&&se[++oe]===se[ue+1]){ue+=2,oe++;do;while(se[++ue]===se[++oe]&&se[++ue]===se[++oe]&&se[++ue]===se[++oe]&&se[++ue]===se[++oe]&&se[++ue]===se[++oe]&&se[++ue]===se[++oe]&&se[++ue]===se[++oe]&&se[++ue]===se[++oe]&&ue<ae);if(re=F-(ae-ue),ue=ae-F,Ce<re){if(I.match_start=he,Ne<=(Ce=re))break;ke=se[ue+Ce-1],Me=se[ue+Ce]}}while((he=ye[he&de])>pe&&--ne!=0);return Ce<=I.lookahead?Ce:I.lookahead}function je(I){var he,oe,re,ne,ue,Ce,Ne,pe,se,de,ye=I.w_size;do{if(ne=I.window_size-I.lookahead-I.strstart,I.strstart>=ye+(ye-G)){for(s.arraySet(I.window,I.window,ye,ye,0),I.match_start-=ye,I.strstart-=ye,I.block_start-=ye,he=oe=I.hash_size;re=I.head[--he],I.head[he]=ye<=re?re-ye:0,--oe;);for(he=oe=ye;re=I.prev[--he],I.prev[he]=ye<=re?re-ye:0,--oe;);ne+=ye}if(I.strm.avail_in===0)break;if(Ce=I.strm,Ne=I.window,pe=I.strstart+I.lookahead,se=ne,de=void 0,de=Ce.avail_in,se<de&&(de=se),oe=de===0?0:(Ce.avail_in-=de,s.arraySet(Ne,Ce.input,Ce.next_in,de,pe),Ce.state.wrap===1?Ce.adler=u(Ce.adler,Ne,de,pe):Ce.state.wrap===2&&(Ce.adler=d(Ce.adler,Ne,de,pe)),Ce.next_in+=de,Ce.total_in+=de,de),I.lookahead+=oe,I.lookahead+I.insert>=O)for(ue=I.strstart-I.insert,I.ins_h=I.window[ue],I.ins_h=(I.ins_h<<I.hash_shift^I.window[ue+1])&I.hash_mask;I.insert&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[ue+O-1])&I.hash_mask,I.prev[ue&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=ue,ue++,I.insert--,!(I.lookahead+I.insert<O)););}while(I.lookahead<G&&I.strm.avail_in!==0)}function Ie(I,he){for(var oe,re;;){if(I.lookahead<G){if(je(I),I.lookahead<G&&he===g)return U;if(I.lookahead===0)break}if(oe=0,I.lookahead>=O&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+O-1])&I.hash_mask,oe=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart),oe!==0&&I.strstart-oe<=I.w_size-G&&(I.match_length=ve(I,oe)),I.match_length>=O)if(re=l._tr_tally(I,I.strstart-I.match_start,I.match_length-O),I.lookahead-=I.match_length,I.match_length<=I.max_lazy_match&&I.lookahead>=O){for(I.match_length--;I.strstart++,I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+O-1])&I.hash_mask,oe=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart,--I.match_length!=0;);I.strstart++}else I.strstart+=I.match_length,I.match_length=0,I.ins_h=I.window[I.strstart],I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+1])&I.hash_mask;else re=l._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++;if(re&&(ie(I,!1),I.strm.avail_out===0))return U}return I.insert=I.strstart<O-1?I.strstart:O-1,he===b?(ie(I,!0),I.strm.avail_out===0?P:B):I.last_lit&&(ie(I,!1),I.strm.avail_out===0)?U:X}function Pe(I,he){for(var oe,re,ne;;){if(I.lookahead<G){if(je(I),I.lookahead<G&&he===g)return U;if(I.lookahead===0)break}if(oe=0,I.lookahead>=O&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+O-1])&I.hash_mask,oe=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart),I.prev_length=I.match_length,I.prev_match=I.match_start,I.match_length=O-1,oe!==0&&I.prev_length<I.max_lazy_match&&I.strstart-oe<=I.w_size-G&&(I.match_length=ve(I,oe),I.match_length<=5&&(I.strategy===1||I.match_length===O&&4096<I.strstart-I.match_start)&&(I.match_length=O-1)),I.prev_length>=O&&I.match_length<=I.prev_length){for(ne=I.strstart+I.lookahead-O,re=l._tr_tally(I,I.strstart-1-I.prev_match,I.prev_length-O),I.lookahead-=I.prev_length-1,I.prev_length-=2;++I.strstart<=ne&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+O-1])&I.hash_mask,oe=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart),--I.prev_length!=0;);if(I.match_available=0,I.match_length=O-1,I.strstart++,re&&(ie(I,!1),I.strm.avail_out===0))return U}else if(I.match_available){if((re=l._tr_tally(I,0,I.window[I.strstart-1]))&&ie(I,!1),I.strstart++,I.lookahead--,I.strm.avail_out===0)return U}else I.match_available=1,I.strstart++,I.lookahead--}return I.match_available&&(re=l._tr_tally(I,0,I.window[I.strstart-1]),I.match_available=0),I.insert=I.strstart<O-1?I.strstart:O-1,he===b?(ie(I,!0),I.strm.avail_out===0?P:B):I.last_lit&&(ie(I,!1),I.strm.avail_out===0)?U:X}function fe(I,he,oe,re,ne){this.good_length=I,this.max_lazy=he,this.nice_length=oe,this.max_chain=re,this.func=ne}function Ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*j),this.dyn_dtree=new s.Buf16(2*(2*E+1)),this.bl_tree=new s.Buf16(2*(2*C+1)),H(this.dyn_ltree),H(this.dyn_dtree),H(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(M+1),this.heap=new s.Buf16(2*N+1),H(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*N+1),H(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function be(I){var he;return I&&I.state?(I.total_in=I.total_out=0,I.data_type=D,(he=I.state).pending=0,he.pending_out=0,he.wrap<0&&(he.wrap=-he.wrap),he.status=he.wrap?R:W,I.adler=he.wrap===2?0:1,he.last_flush=g,l._tr_init(he),x):ee(I,k)}function Fe(I){var he=be(I);return he===x&&(function(oe){oe.window_size=2*oe.w_size,H(oe.head),oe.max_lazy_match=a[oe.level].max_lazy,oe.good_match=a[oe.level].good_length,oe.nice_match=a[oe.level].nice_length,oe.max_chain_length=a[oe.level].max_chain,oe.strstart=0,oe.block_start=0,oe.lookahead=0,oe.insert=0,oe.match_length=oe.prev_length=O-1,oe.match_available=0,oe.ins_h=0})(I.state),he}function $e(I,he,oe,re,ne,ue){if(!I)return k;var Ce=1;if(he===v&&(he=6),re<0?(Ce=0,re=-re):15<re&&(Ce=2,re-=16),ne<1||A<ne||oe!==_||re<8||15<re||he<0||9<he||ue<0||w<ue)return ee(I,k);re===8&&(re=9);var Ne=new Ue;return(I.state=Ne).strm=I,Ne.wrap=Ce,Ne.gzhead=null,Ne.w_bits=re,Ne.w_size=1<<Ne.w_bits,Ne.w_mask=Ne.w_size-1,Ne.hash_bits=ne+7,Ne.hash_size=1<<Ne.hash_bits,Ne.hash_mask=Ne.hash_size-1,Ne.hash_shift=~~((Ne.hash_bits+O-1)/O),Ne.window=new s.Buf8(2*Ne.w_size),Ne.head=new s.Buf16(Ne.hash_size),Ne.prev=new s.Buf16(Ne.w_size),Ne.lit_bufsize=1<<ne+6,Ne.pending_buf_size=4*Ne.lit_bufsize,Ne.pending_buf=new s.Buf8(Ne.pending_buf_size),Ne.d_buf=1*Ne.lit_bufsize,Ne.l_buf=3*Ne.lit_bufsize,Ne.level=he,Ne.strategy=ue,Ne.method=oe,Fe(I)}a=[new fe(0,0,0,0,function(I,he){var oe=65535;for(oe>I.pending_buf_size-5&&(oe=I.pending_buf_size-5);;){if(I.lookahead<=1){if(je(I),I.lookahead===0&&he===g)return U;if(I.lookahead===0)break}I.strstart+=I.lookahead,I.lookahead=0;var re=I.block_start+oe;if((I.strstart===0||I.strstart>=re)&&(I.lookahead=I.strstart-re,I.strstart=re,ie(I,!1),I.strm.avail_out===0)||I.strstart-I.block_start>=I.w_size-G&&(ie(I,!1),I.strm.avail_out===0))return U}return I.insert=0,he===b?(ie(I,!0),I.strm.avail_out===0?P:B):(I.strstart>I.block_start&&(ie(I,!1),I.strm.avail_out),U)}),new fe(4,4,8,4,Ie),new fe(4,5,16,8,Ie),new fe(4,6,32,32,Ie),new fe(4,4,16,16,Pe),new fe(8,16,32,32,Pe),new fe(8,16,128,128,Pe),new fe(8,32,128,256,Pe),new fe(32,128,258,1024,Pe),new fe(32,258,258,4096,Pe)],i.deflateInit=function(I,he){return $e(I,he,_,15,8,0)},i.deflateInit2=$e,i.deflateReset=Fe,i.deflateResetKeep=be,i.deflateSetHeader=function(I,he){return I&&I.state?I.state.wrap!==2?k:(I.state.gzhead=he,x):k},i.deflate=function(I,he){var oe,re,ne,ue;if(!I||!I.state||5<he||he<0)return I?ee(I,k):k;if(re=I.state,!I.output||!I.input&&I.avail_in!==0||re.status===666&&he!==b)return ee(I,I.avail_out===0?-5:k);if(re.strm=I,oe=re.last_flush,re.last_flush=he,re.status===R)if(re.wrap===2)I.adler=0,z(re,31),z(re,139),z(re,8),re.gzhead?(z(re,(re.gzhead.text?1:0)+(re.gzhead.hcrc?2:0)+(re.gzhead.extra?4:0)+(re.gzhead.name?8:0)+(re.gzhead.comment?16:0)),z(re,255&re.gzhead.time),z(re,re.gzhead.time>>8&255),z(re,re.gzhead.time>>16&255),z(re,re.gzhead.time>>24&255),z(re,re.level===9?2:2<=re.strategy||re.level<2?4:0),z(re,255&re.gzhead.os),re.gzhead.extra&&re.gzhead.extra.length&&(z(re,255&re.gzhead.extra.length),z(re,re.gzhead.extra.length>>8&255)),re.gzhead.hcrc&&(I.adler=d(I.adler,re.pending_buf,re.pending,0)),re.gzindex=0,re.status=69):(z(re,0),z(re,0),z(re,0),z(re,0),z(re,0),z(re,re.level===9?2:2<=re.strategy||re.level<2?4:0),z(re,3),re.status=W);else{var Ce=_+(re.w_bits-8<<4)<<8;Ce|=(2<=re.strategy||re.level<2?0:re.level<6?1:re.level===6?2:3)<<6,re.strstart!==0&&(Ce|=32),Ce+=31-Ce%31,re.status=W,ge(re,Ce),re.strstart!==0&&(ge(re,I.adler>>>16),ge(re,65535&I.adler)),I.adler=1}if(re.status===69)if(re.gzhead.extra){for(ne=re.pending;re.gzindex<(65535&re.gzhead.extra.length)&&(re.pending!==re.pending_buf_size||(re.gzhead.hcrc&&re.pending>ne&&(I.adler=d(I.adler,re.pending_buf,re.pending-ne,ne)),J(I),ne=re.pending,re.pending!==re.pending_buf_size));)z(re,255&re.gzhead.extra[re.gzindex]),re.gzindex++;re.gzhead.hcrc&&re.pending>ne&&(I.adler=d(I.adler,re.pending_buf,re.pending-ne,ne)),re.gzindex===re.gzhead.extra.length&&(re.gzindex=0,re.status=73)}else re.status=73;if(re.status===73)if(re.gzhead.name){ne=re.pending;do{if(re.pending===re.pending_buf_size&&(re.gzhead.hcrc&&re.pending>ne&&(I.adler=d(I.adler,re.pending_buf,re.pending-ne,ne)),J(I),ne=re.pending,re.pending===re.pending_buf_size)){ue=1;break}ue=re.gzindex<re.gzhead.name.length?255&re.gzhead.name.charCodeAt(re.gzindex++):0,z(re,ue)}while(ue!==0);re.gzhead.hcrc&&re.pending>ne&&(I.adler=d(I.adler,re.pending_buf,re.pending-ne,ne)),ue===0&&(re.gzindex=0,re.status=91)}else re.status=91;if(re.status===91)if(re.gzhead.comment){ne=re.pending;do{if(re.pending===re.pending_buf_size&&(re.gzhead.hcrc&&re.pending>ne&&(I.adler=d(I.adler,re.pending_buf,re.pending-ne,ne)),J(I),ne=re.pending,re.pending===re.pending_buf_size)){ue=1;break}ue=re.gzindex<re.gzhead.comment.length?255&re.gzhead.comment.charCodeAt(re.gzindex++):0,z(re,ue)}while(ue!==0);re.gzhead.hcrc&&re.pending>ne&&(I.adler=d(I.adler,re.pending_buf,re.pending-ne,ne)),ue===0&&(re.status=103)}else re.status=103;if(re.status===103&&(re.gzhead.hcrc?(re.pending+2>re.pending_buf_size&&J(I),re.pending+2<=re.pending_buf_size&&(z(re,255&I.adler),z(re,I.adler>>8&255),I.adler=0,re.status=W)):re.status=W),re.pending!==0){if(J(I),I.avail_out===0)return re.last_flush=-1,x}else if(I.avail_in===0&&Y(he)<=Y(oe)&&he!==b)return ee(I,-5);if(re.status===666&&I.avail_in!==0)return ee(I,-5);if(I.avail_in!==0||re.lookahead!==0||he!==g&&re.status!==666){var Ne=re.strategy===2?(function(pe,se){for(var de;;){if(pe.lookahead===0&&(je(pe),pe.lookahead===0)){if(se===g)return U;break}if(pe.match_length=0,de=l._tr_tally(pe,0,pe.window[pe.strstart]),pe.lookahead--,pe.strstart++,de&&(ie(pe,!1),pe.strm.avail_out===0))return U}return pe.insert=0,se===b?(ie(pe,!0),pe.strm.avail_out===0?P:B):pe.last_lit&&(ie(pe,!1),pe.strm.avail_out===0)?U:X})(re,he):re.strategy===3?(function(pe,se){for(var de,ye,ae,ke,Me=pe.window;;){if(pe.lookahead<=F){if(je(pe),pe.lookahead<=F&&se===g)return U;if(pe.lookahead===0)break}if(pe.match_length=0,pe.lookahead>=O&&0<pe.strstart&&(ye=Me[ae=pe.strstart-1])===Me[++ae]&&ye===Me[++ae]&&ye===Me[++ae]){ke=pe.strstart+F;do;while(ye===Me[++ae]&&ye===Me[++ae]&&ye===Me[++ae]&&ye===Me[++ae]&&ye===Me[++ae]&&ye===Me[++ae]&&ye===Me[++ae]&&ye===Me[++ae]&&ae<ke);pe.match_length=F-(ke-ae),pe.match_length>pe.lookahead&&(pe.match_length=pe.lookahead)}if(pe.match_length>=O?(de=l._tr_tally(pe,1,pe.match_length-O),pe.lookahead-=pe.match_length,pe.strstart+=pe.match_length,pe.match_length=0):(de=l._tr_tally(pe,0,pe.window[pe.strstart]),pe.lookahead--,pe.strstart++),de&&(ie(pe,!1),pe.strm.avail_out===0))return U}return pe.insert=0,se===b?(ie(pe,!0),pe.strm.avail_out===0?P:B):pe.last_lit&&(ie(pe,!1),pe.strm.avail_out===0)?U:X})(re,he):a[re.level].func(re,he);if(Ne!==P&&Ne!==B||(re.status=666),Ne===U||Ne===P)return I.avail_out===0&&(re.last_flush=-1),x;if(Ne===X&&(he===1?l._tr_align(re):he!==5&&(l._tr_stored_block(re,0,0,!1),he===3&&(H(re.head),re.lookahead===0&&(re.strstart=0,re.block_start=0,re.insert=0))),J(I),I.avail_out===0))return re.last_flush=-1,x}return he!==b?x:re.wrap<=0?1:(re.wrap===2?(z(re,255&I.adler),z(re,I.adler>>8&255),z(re,I.adler>>16&255),z(re,I.adler>>24&255),z(re,255&I.total_in),z(re,I.total_in>>8&255),z(re,I.total_in>>16&255),z(re,I.total_in>>24&255)):(ge(re,I.adler>>>16),ge(re,65535&I.adler)),J(I),0<re.wrap&&(re.wrap=-re.wrap),re.pending!==0?x:1)},i.deflateEnd=function(I){var he;return I&&I.state?(he=I.state.status)!==R&&he!==69&&he!==73&&he!==91&&he!==103&&he!==W&&he!==666?ee(I,k):(I.state=null,he===W?ee(I,-3):x):k},i.deflateSetDictionary=function(I,he){var oe,re,ne,ue,Ce,Ne,pe,se,de=he.length;if(!I||!I.state||(ue=(oe=I.state).wrap)===2||ue===1&&oe.status!==R||oe.lookahead)return k;for(ue===1&&(I.adler=u(I.adler,he,de,0)),oe.wrap=0,de>=oe.w_size&&(ue===0&&(H(oe.head),oe.strstart=0,oe.block_start=0,oe.insert=0),se=new s.Buf8(oe.w_size),s.arraySet(se,he,de-oe.w_size,oe.w_size,0),he=se,de=oe.w_size),Ce=I.avail_in,Ne=I.next_in,pe=I.input,I.avail_in=de,I.next_in=0,I.input=he,je(oe);oe.lookahead>=O;){for(re=oe.strstart,ne=oe.lookahead-(O-1);oe.ins_h=(oe.ins_h<<oe.hash_shift^oe.window[re+O-1])&oe.hash_mask,oe.prev[re&oe.w_mask]=oe.head[oe.ins_h],oe.head[oe.ins_h]=re,re++,--ne;);oe.strstart=re,oe.lookahead=O-1,je(oe)}return oe.strstart+=oe.lookahead,oe.block_start=oe.strstart,oe.insert=oe.lookahead,oe.lookahead=0,oe.match_length=oe.prev_length=O-1,oe.match_available=0,I.next_in=Ne,I.input=pe,I.avail_in=Ce,oe.wrap=ue,x},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,i){n.exports=function(a,s){var l,u,d,h,g,b,x,k,v,w,D,_,A,N,E,C,j,M,O,F,G,R,W,U,X;l=a.state,u=a.next_in,U=a.input,d=u+(a.avail_in-5),h=a.next_out,X=a.output,g=h-(s-a.avail_out),b=h+(a.avail_out-257),x=l.dmax,k=l.wsize,v=l.whave,w=l.wnext,D=l.window,_=l.hold,A=l.bits,N=l.lencode,E=l.distcode,C=(1<<l.lenbits)-1,j=(1<<l.distbits)-1;e:do{A<15&&(_+=U[u++]<<A,A+=8,_+=U[u++]<<A,A+=8),M=N[_&C];t:for(;;){if(_>>>=O=M>>>24,A-=O,(O=M>>>16&255)===0)X[h++]=65535&M;else{if(!(16&O)){if((64&O)==0){M=N[(65535&M)+(_&(1<<O)-1)];continue t}if(32&O){l.mode=12;break e}a.msg="invalid literal/length code",l.mode=30;break e}F=65535&M,(O&=15)&&(A<O&&(_+=U[u++]<<A,A+=8),F+=_&(1<<O)-1,_>>>=O,A-=O),A<15&&(_+=U[u++]<<A,A+=8,_+=U[u++]<<A,A+=8),M=E[_&j];n:for(;;){if(_>>>=O=M>>>24,A-=O,!(16&(O=M>>>16&255))){if((64&O)==0){M=E[(65535&M)+(_&(1<<O)-1)];continue n}a.msg="invalid distance code",l.mode=30;break e}if(G=65535&M,A<(O&=15)&&(_+=U[u++]<<A,(A+=8)<O&&(_+=U[u++]<<A,A+=8)),x<(G+=_&(1<<O)-1)){a.msg="invalid distance too far back",l.mode=30;break e}if(_>>>=O,A-=O,(O=h-g)<G){if(v<(O=G-O)&&l.sane){a.msg="invalid distance too far back",l.mode=30;break e}if(W=D,(R=0)===w){if(R+=k-O,O<F){for(F-=O;X[h++]=D[R++],--O;);R=h-G,W=X}}else if(w<O){if(R+=k+w-O,(O-=w)<F){for(F-=O;X[h++]=D[R++],--O;);if(R=0,w<F){for(F-=O=w;X[h++]=D[R++],--O;);R=h-G,W=X}}}else if(R+=w-O,O<F){for(F-=O;X[h++]=D[R++],--O;);R=h-G,W=X}for(;2<F;)X[h++]=W[R++],X[h++]=W[R++],X[h++]=W[R++],F-=3;F&&(X[h++]=W[R++],1<F&&(X[h++]=W[R++]))}else{for(R=h-G;X[h++]=X[R++],X[h++]=X[R++],X[h++]=X[R++],2<(F-=3););F&&(X[h++]=X[R++],1<F&&(X[h++]=X[R++]))}break}}break}}while(u<d&&h<b);u-=F=A>>3,_&=(1<<(A-=F<<3))-1,a.next_in=u,a.next_out=h,a.avail_in=u<d?d-u+5:5-(u-d),a.avail_out=h<b?b-h+257:257-(h-b),l.hold=_,l.bits=A}},{}],49:[function(t,n,i){var a=t("../utils/common"),s=t("./adler32"),l=t("./crc32"),u=t("./inffast"),d=t("./inftrees"),h=1,g=2,b=0,x=-2,k=1,v=852,w=592;function D(R){return(R>>>24&255)+(R>>>8&65280)+((65280&R)<<8)+((255&R)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function A(R){var W;return R&&R.state?(W=R.state,R.total_in=R.total_out=W.total=0,R.msg="",W.wrap&&(R.adler=1&W.wrap),W.mode=k,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new a.Buf32(v),W.distcode=W.distdyn=new a.Buf32(w),W.sane=1,W.back=-1,b):x}function N(R){var W;return R&&R.state?((W=R.state).wsize=0,W.whave=0,W.wnext=0,A(R)):x}function E(R,W){var U,X;return R&&R.state?(X=R.state,W<0?(U=0,W=-W):(U=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?x:(X.window!==null&&X.wbits!==W&&(X.window=null),X.wrap=U,X.wbits=W,N(R))):x}function C(R,W){var U,X;return R?(X=new _,(R.state=X).window=null,(U=E(R,W))!==b&&(R.state=null),U):x}var j,M,O=!0;function F(R){if(O){var W;for(j=new a.Buf32(512),M=new a.Buf32(32),W=0;W<144;)R.lens[W++]=8;for(;W<256;)R.lens[W++]=9;for(;W<280;)R.lens[W++]=7;for(;W<288;)R.lens[W++]=8;for(d(h,R.lens,0,288,j,0,R.work,{bits:9}),W=0;W<32;)R.lens[W++]=5;d(g,R.lens,0,32,M,0,R.work,{bits:5}),O=!1}R.lencode=j,R.lenbits=9,R.distcode=M,R.distbits=5}function G(R,W,U,X){var P,B=R.state;return B.window===null&&(B.wsize=1<<B.wbits,B.wnext=0,B.whave=0,B.window=new a.Buf8(B.wsize)),X>=B.wsize?(a.arraySet(B.window,W,U-B.wsize,B.wsize,0),B.wnext=0,B.whave=B.wsize):(X<(P=B.wsize-B.wnext)&&(P=X),a.arraySet(B.window,W,U-X,P,B.wnext),(X-=P)?(a.arraySet(B.window,W,U-X,X,0),B.wnext=X,B.whave=B.wsize):(B.wnext+=P,B.wnext===B.wsize&&(B.wnext=0),B.whave<B.wsize&&(B.whave+=P))),0}i.inflateReset=N,i.inflateReset2=E,i.inflateResetKeep=A,i.inflateInit=function(R){return C(R,15)},i.inflateInit2=C,i.inflate=function(R,W){var U,X,P,B,ee,Y,H,J,ie,z,ge,ve,je,Ie,Pe,fe,Ue,be,Fe,$e,I,he,oe,re,ne=0,ue=new a.Buf8(4),Ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!R||!R.state||!R.output||!R.input&&R.avail_in!==0)return x;(U=R.state).mode===12&&(U.mode=13),ee=R.next_out,P=R.output,H=R.avail_out,B=R.next_in,X=R.input,Y=R.avail_in,J=U.hold,ie=U.bits,z=Y,ge=H,he=b;e:for(;;)switch(U.mode){case k:if(U.wrap===0){U.mode=13;break}for(;ie<16;){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}if(2&U.wrap&&J===35615){ue[U.check=0]=255&J,ue[1]=J>>>8&255,U.check=l(U.check,ue,2,0),ie=J=0,U.mode=2;break}if(U.flags=0,U.head&&(U.head.done=!1),!(1&U.wrap)||(((255&J)<<8)+(J>>8))%31){R.msg="incorrect header check",U.mode=30;break}if((15&J)!=8){R.msg="unknown compression method",U.mode=30;break}if(ie-=4,I=8+(15&(J>>>=4)),U.wbits===0)U.wbits=I;else if(I>U.wbits){R.msg="invalid window size",U.mode=30;break}U.dmax=1<<I,R.adler=U.check=1,U.mode=512&J?10:12,ie=J=0;break;case 2:for(;ie<16;){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}if(U.flags=J,(255&U.flags)!=8){R.msg="unknown compression method",U.mode=30;break}if(57344&U.flags){R.msg="unknown header flags set",U.mode=30;break}U.head&&(U.head.text=J>>8&1),512&U.flags&&(ue[0]=255&J,ue[1]=J>>>8&255,U.check=l(U.check,ue,2,0)),ie=J=0,U.mode=3;case 3:for(;ie<32;){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}U.head&&(U.head.time=J),512&U.flags&&(ue[0]=255&J,ue[1]=J>>>8&255,ue[2]=J>>>16&255,ue[3]=J>>>24&255,U.check=l(U.check,ue,4,0)),ie=J=0,U.mode=4;case 4:for(;ie<16;){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}U.head&&(U.head.xflags=255&J,U.head.os=J>>8),512&U.flags&&(ue[0]=255&J,ue[1]=J>>>8&255,U.check=l(U.check,ue,2,0)),ie=J=0,U.mode=5;case 5:if(1024&U.flags){for(;ie<16;){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}U.length=J,U.head&&(U.head.extra_len=J),512&U.flags&&(ue[0]=255&J,ue[1]=J>>>8&255,U.check=l(U.check,ue,2,0)),ie=J=0}else U.head&&(U.head.extra=null);U.mode=6;case 6:if(1024&U.flags&&(Y<(ve=U.length)&&(ve=Y),ve&&(U.head&&(I=U.head.extra_len-U.length,U.head.extra||(U.head.extra=new Array(U.head.extra_len)),a.arraySet(U.head.extra,X,B,ve,I)),512&U.flags&&(U.check=l(U.check,X,ve,B)),Y-=ve,B+=ve,U.length-=ve),U.length))break e;U.length=0,U.mode=7;case 7:if(2048&U.flags){if(Y===0)break e;for(ve=0;I=X[B+ve++],U.head&&I&&U.length<65536&&(U.head.name+=String.fromCharCode(I)),I&&ve<Y;);if(512&U.flags&&(U.check=l(U.check,X,ve,B)),Y-=ve,B+=ve,I)break e}else U.head&&(U.head.name=null);U.length=0,U.mode=8;case 8:if(4096&U.flags){if(Y===0)break e;for(ve=0;I=X[B+ve++],U.head&&I&&U.length<65536&&(U.head.comment+=String.fromCharCode(I)),I&&ve<Y;);if(512&U.flags&&(U.check=l(U.check,X,ve,B)),Y-=ve,B+=ve,I)break e}else U.head&&(U.head.comment=null);U.mode=9;case 9:if(512&U.flags){for(;ie<16;){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}if(J!==(65535&U.check)){R.msg="header crc mismatch",U.mode=30;break}ie=J=0}U.head&&(U.head.hcrc=U.flags>>9&1,U.head.done=!0),R.adler=U.check=0,U.mode=12;break;case 10:for(;ie<32;){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}R.adler=U.check=D(J),ie=J=0,U.mode=11;case 11:if(U.havedict===0)return R.next_out=ee,R.avail_out=H,R.next_in=B,R.avail_in=Y,U.hold=J,U.bits=ie,2;R.adler=U.check=1,U.mode=12;case 12:if(W===5||W===6)break e;case 13:if(U.last){J>>>=7&ie,ie-=7&ie,U.mode=27;break}for(;ie<3;){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}switch(U.last=1&J,ie-=1,3&(J>>>=1)){case 0:U.mode=14;break;case 1:if(F(U),U.mode=20,W!==6)break;J>>>=2,ie-=2;break e;case 2:U.mode=17;break;case 3:R.msg="invalid block type",U.mode=30}J>>>=2,ie-=2;break;case 14:for(J>>>=7&ie,ie-=7&ie;ie<32;){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}if((65535&J)!=(J>>>16^65535)){R.msg="invalid stored block lengths",U.mode=30;break}if(U.length=65535&J,ie=J=0,U.mode=15,W===6)break e;case 15:U.mode=16;case 16:if(ve=U.length){if(Y<ve&&(ve=Y),H<ve&&(ve=H),ve===0)break e;a.arraySet(P,X,B,ve,ee),Y-=ve,B+=ve,H-=ve,ee+=ve,U.length-=ve;break}U.mode=12;break;case 17:for(;ie<14;){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}if(U.nlen=257+(31&J),J>>>=5,ie-=5,U.ndist=1+(31&J),J>>>=5,ie-=5,U.ncode=4+(15&J),J>>>=4,ie-=4,286<U.nlen||30<U.ndist){R.msg="too many length or distance symbols",U.mode=30;break}U.have=0,U.mode=18;case 18:for(;U.have<U.ncode;){for(;ie<3;){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}U.lens[Ce[U.have++]]=7&J,J>>>=3,ie-=3}for(;U.have<19;)U.lens[Ce[U.have++]]=0;if(U.lencode=U.lendyn,U.lenbits=7,oe={bits:U.lenbits},he=d(0,U.lens,0,19,U.lencode,0,U.work,oe),U.lenbits=oe.bits,he){R.msg="invalid code lengths set",U.mode=30;break}U.have=0,U.mode=19;case 19:for(;U.have<U.nlen+U.ndist;){for(;fe=(ne=U.lencode[J&(1<<U.lenbits)-1])>>>16&255,Ue=65535&ne,!((Pe=ne>>>24)<=ie);){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}if(Ue<16)J>>>=Pe,ie-=Pe,U.lens[U.have++]=Ue;else{if(Ue===16){for(re=Pe+2;ie<re;){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}if(J>>>=Pe,ie-=Pe,U.have===0){R.msg="invalid bit length repeat",U.mode=30;break}I=U.lens[U.have-1],ve=3+(3&J),J>>>=2,ie-=2}else if(Ue===17){for(re=Pe+3;ie<re;){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}ie-=Pe,I=0,ve=3+(7&(J>>>=Pe)),J>>>=3,ie-=3}else{for(re=Pe+7;ie<re;){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}ie-=Pe,I=0,ve=11+(127&(J>>>=Pe)),J>>>=7,ie-=7}if(U.have+ve>U.nlen+U.ndist){R.msg="invalid bit length repeat",U.mode=30;break}for(;ve--;)U.lens[U.have++]=I}}if(U.mode===30)break;if(U.lens[256]===0){R.msg="invalid code -- missing end-of-block",U.mode=30;break}if(U.lenbits=9,oe={bits:U.lenbits},he=d(h,U.lens,0,U.nlen,U.lencode,0,U.work,oe),U.lenbits=oe.bits,he){R.msg="invalid literal/lengths set",U.mode=30;break}if(U.distbits=6,U.distcode=U.distdyn,oe={bits:U.distbits},he=d(g,U.lens,U.nlen,U.ndist,U.distcode,0,U.work,oe),U.distbits=oe.bits,he){R.msg="invalid distances set",U.mode=30;break}if(U.mode=20,W===6)break e;case 20:U.mode=21;case 21:if(6<=Y&&258<=H){R.next_out=ee,R.avail_out=H,R.next_in=B,R.avail_in=Y,U.hold=J,U.bits=ie,u(R,ge),ee=R.next_out,P=R.output,H=R.avail_out,B=R.next_in,X=R.input,Y=R.avail_in,J=U.hold,ie=U.bits,U.mode===12&&(U.back=-1);break}for(U.back=0;fe=(ne=U.lencode[J&(1<<U.lenbits)-1])>>>16&255,Ue=65535&ne,!((Pe=ne>>>24)<=ie);){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}if(fe&&(240&fe)==0){for(be=Pe,Fe=fe,$e=Ue;fe=(ne=U.lencode[$e+((J&(1<<be+Fe)-1)>>be)])>>>16&255,Ue=65535&ne,!(be+(Pe=ne>>>24)<=ie);){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}J>>>=be,ie-=be,U.back+=be}if(J>>>=Pe,ie-=Pe,U.back+=Pe,U.length=Ue,fe===0){U.mode=26;break}if(32&fe){U.back=-1,U.mode=12;break}if(64&fe){R.msg="invalid literal/length code",U.mode=30;break}U.extra=15&fe,U.mode=22;case 22:if(U.extra){for(re=U.extra;ie<re;){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}U.length+=J&(1<<U.extra)-1,J>>>=U.extra,ie-=U.extra,U.back+=U.extra}U.was=U.length,U.mode=23;case 23:for(;fe=(ne=U.distcode[J&(1<<U.distbits)-1])>>>16&255,Ue=65535&ne,!((Pe=ne>>>24)<=ie);){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}if((240&fe)==0){for(be=Pe,Fe=fe,$e=Ue;fe=(ne=U.distcode[$e+((J&(1<<be+Fe)-1)>>be)])>>>16&255,Ue=65535&ne,!(be+(Pe=ne>>>24)<=ie);){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}J>>>=be,ie-=be,U.back+=be}if(J>>>=Pe,ie-=Pe,U.back+=Pe,64&fe){R.msg="invalid distance code",U.mode=30;break}U.offset=Ue,U.extra=15&fe,U.mode=24;case 24:if(U.extra){for(re=U.extra;ie<re;){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}U.offset+=J&(1<<U.extra)-1,J>>>=U.extra,ie-=U.extra,U.back+=U.extra}if(U.offset>U.dmax){R.msg="invalid distance too far back",U.mode=30;break}U.mode=25;case 25:if(H===0)break e;if(ve=ge-H,U.offset>ve){if((ve=U.offset-ve)>U.whave&&U.sane){R.msg="invalid distance too far back",U.mode=30;break}je=ve>U.wnext?(ve-=U.wnext,U.wsize-ve):U.wnext-ve,ve>U.length&&(ve=U.length),Ie=U.window}else Ie=P,je=ee-U.offset,ve=U.length;for(H<ve&&(ve=H),H-=ve,U.length-=ve;P[ee++]=Ie[je++],--ve;);U.length===0&&(U.mode=21);break;case 26:if(H===0)break e;P[ee++]=U.length,H--,U.mode=21;break;case 27:if(U.wrap){for(;ie<32;){if(Y===0)break e;Y--,J|=X[B++]<<ie,ie+=8}if(ge-=H,R.total_out+=ge,U.total+=ge,ge&&(R.adler=U.check=U.flags?l(U.check,P,ge,ee-ge):s(U.check,P,ge,ee-ge)),ge=H,(U.flags?J:D(J))!==U.check){R.msg="incorrect data check",U.mode=30;break}ie=J=0}U.mode=28;case 28:if(U.wrap&&U.flags){for(;ie<32;){if(Y===0)break e;Y--,J+=X[B++]<<ie,ie+=8}if(J!==(4294967295&U.total)){R.msg="incorrect length check",U.mode=30;break}ie=J=0}U.mode=29;case 29:he=1;break e;case 30:he=-3;break e;case 31:return-4;case 32:default:return x}return R.next_out=ee,R.avail_out=H,R.next_in=B,R.avail_in=Y,U.hold=J,U.bits=ie,(U.wsize||ge!==R.avail_out&&U.mode<30&&(U.mode<27||W!==4))&&G(R,R.output,R.next_out,ge-R.avail_out)?(U.mode=31,-4):(z-=R.avail_in,ge-=R.avail_out,R.total_in+=z,R.total_out+=ge,U.total+=ge,U.wrap&&ge&&(R.adler=U.check=U.flags?l(U.check,P,ge,R.next_out-ge):s(U.check,P,ge,R.next_out-ge)),R.data_type=U.bits+(U.last?64:0)+(U.mode===12?128:0)+(U.mode===20||U.mode===15?256:0),(z==0&&ge===0||W===4)&&he===b&&(he=-5),he)},i.inflateEnd=function(R){if(!R||!R.state)return x;var W=R.state;return W.window&&(W.window=null),R.state=null,b},i.inflateGetHeader=function(R,W){var U;return R&&R.state?(2&(U=R.state).wrap)==0?x:((U.head=W).done=!1,b):x},i.inflateSetDictionary=function(R,W){var U,X=W.length;return R&&R.state?(U=R.state).wrap!==0&&U.mode!==11?x:U.mode===11&&s(1,W,X,0)!==U.check?-3:G(R,W,X,X)?(U.mode=31,-4):(U.havedict=1,b):x},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,i){var a=t("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(h,g,b,x,k,v,w,D){var _,A,N,E,C,j,M,O,F,G=D.bits,R=0,W=0,U=0,X=0,P=0,B=0,ee=0,Y=0,H=0,J=0,ie=null,z=0,ge=new a.Buf16(16),ve=new a.Buf16(16),je=null,Ie=0;for(R=0;R<=15;R++)ge[R]=0;for(W=0;W<x;W++)ge[g[b+W]]++;for(P=G,X=15;1<=X&&ge[X]===0;X--);if(X<P&&(P=X),X===0)return k[v++]=20971520,k[v++]=20971520,D.bits=1,0;for(U=1;U<X&&ge[U]===0;U++);for(P<U&&(P=U),R=Y=1;R<=15;R++)if(Y<<=1,(Y-=ge[R])<0)return-1;if(0<Y&&(h===0||X!==1))return-1;for(ve[1]=0,R=1;R<15;R++)ve[R+1]=ve[R]+ge[R];for(W=0;W<x;W++)g[b+W]!==0&&(w[ve[g[b+W]]++]=W);if(j=h===0?(ie=je=w,19):h===1?(ie=s,z-=257,je=l,Ie-=257,256):(ie=u,je=d,-1),R=U,C=v,ee=W=J=0,N=-1,E=(H=1<<(B=P))-1,h===1&&852<H||h===2&&592<H)return 1;for(;;){for(M=R-ee,F=w[W]<j?(O=0,w[W]):w[W]>j?(O=je[Ie+w[W]],ie[z+w[W]]):(O=96,0),_=1<<R-ee,U=A=1<<B;k[C+(J>>ee)+(A-=_)]=M<<24|O<<16|F|0,A!==0;);for(_=1<<R-1;J&_;)_>>=1;if(_!==0?(J&=_-1,J+=_):J=0,W++,--ge[R]==0){if(R===X)break;R=g[b+w[W]]}if(P<R&&(J&E)!==N){for(ee===0&&(ee=P),C+=U,Y=1<<(B=R-ee);B+ee<X&&!((Y-=ge[B+ee])<=0);)B++,Y<<=1;if(H+=1<<B,h===1&&852<H||h===2&&592<H)return 1;k[N=J&E]=P<<24|B<<16|C-v|0}}return J!==0&&(k[C+J]=R-ee<<24|64<<16|0),D.bits=P,0}},{"../utils/common":41}],51:[function(t,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,i){var a=t("../utils/common"),s=0,l=1;function u(ne){for(var ue=ne.length;0<=--ue;)ne[ue]=0}var d=0,h=29,g=256,b=g+1+h,x=30,k=19,v=2*b+1,w=15,D=16,_=7,A=256,N=16,E=17,C=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(2*(b+2));u(G);var R=new Array(2*x);u(R);var W=new Array(512);u(W);var U=new Array(256);u(U);var X=new Array(h);u(X);var P,B,ee,Y=new Array(x);function H(ne,ue,Ce,Ne,pe){this.static_tree=ne,this.extra_bits=ue,this.extra_base=Ce,this.elems=Ne,this.max_length=pe,this.has_stree=ne&&ne.length}function J(ne,ue){this.dyn_tree=ne,this.max_code=0,this.stat_desc=ue}function ie(ne){return ne<256?W[ne]:W[256+(ne>>>7)]}function z(ne,ue){ne.pending_buf[ne.pending++]=255&ue,ne.pending_buf[ne.pending++]=ue>>>8&255}function ge(ne,ue,Ce){ne.bi_valid>D-Ce?(ne.bi_buf|=ue<<ne.bi_valid&65535,z(ne,ne.bi_buf),ne.bi_buf=ue>>D-ne.bi_valid,ne.bi_valid+=Ce-D):(ne.bi_buf|=ue<<ne.bi_valid&65535,ne.bi_valid+=Ce)}function ve(ne,ue,Ce){ge(ne,Ce[2*ue],Ce[2*ue+1])}function je(ne,ue){for(var Ce=0;Ce|=1&ne,ne>>>=1,Ce<<=1,0<--ue;);return Ce>>>1}function Ie(ne,ue,Ce){var Ne,pe,se=new Array(w+1),de=0;for(Ne=1;Ne<=w;Ne++)se[Ne]=de=de+Ce[Ne-1]<<1;for(pe=0;pe<=ue;pe++){var ye=ne[2*pe+1];ye!==0&&(ne[2*pe]=je(se[ye]++,ye))}}function Pe(ne){var ue;for(ue=0;ue<b;ue++)ne.dyn_ltree[2*ue]=0;for(ue=0;ue<x;ue++)ne.dyn_dtree[2*ue]=0;for(ue=0;ue<k;ue++)ne.bl_tree[2*ue]=0;ne.dyn_ltree[2*A]=1,ne.opt_len=ne.static_len=0,ne.last_lit=ne.matches=0}function fe(ne){8<ne.bi_valid?z(ne,ne.bi_buf):0<ne.bi_valid&&(ne.pending_buf[ne.pending++]=ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0}function Ue(ne,ue,Ce,Ne){var pe=2*ue,se=2*Ce;return ne[pe]<ne[se]||ne[pe]===ne[se]&&Ne[ue]<=Ne[Ce]}function be(ne,ue,Ce){for(var Ne=ne.heap[Ce],pe=Ce<<1;pe<=ne.heap_len&&(pe<ne.heap_len&&Ue(ue,ne.heap[pe+1],ne.heap[pe],ne.depth)&&pe++,!Ue(ue,Ne,ne.heap[pe],ne.depth));)ne.heap[Ce]=ne.heap[pe],Ce=pe,pe<<=1;ne.heap[Ce]=Ne}function Fe(ne,ue,Ce){var Ne,pe,se,de,ye=0;if(ne.last_lit!==0)for(;Ne=ne.pending_buf[ne.d_buf+2*ye]<<8|ne.pending_buf[ne.d_buf+2*ye+1],pe=ne.pending_buf[ne.l_buf+ye],ye++,Ne===0?ve(ne,pe,ue):(ve(ne,(se=U[pe])+g+1,ue),(de=j[se])!==0&&ge(ne,pe-=X[se],de),ve(ne,se=ie(--Ne),Ce),(de=M[se])!==0&&ge(ne,Ne-=Y[se],de)),ye<ne.last_lit;);ve(ne,A,ue)}function $e(ne,ue){var Ce,Ne,pe,se=ue.dyn_tree,de=ue.stat_desc.static_tree,ye=ue.stat_desc.has_stree,ae=ue.stat_desc.elems,ke=-1;for(ne.heap_len=0,ne.heap_max=v,Ce=0;Ce<ae;Ce++)se[2*Ce]!==0?(ne.heap[++ne.heap_len]=ke=Ce,ne.depth[Ce]=0):se[2*Ce+1]=0;for(;ne.heap_len<2;)se[2*(pe=ne.heap[++ne.heap_len]=ke<2?++ke:0)]=1,ne.depth[pe]=0,ne.opt_len--,ye&&(ne.static_len-=de[2*pe+1]);for(ue.max_code=ke,Ce=ne.heap_len>>1;1<=Ce;Ce--)be(ne,se,Ce);for(pe=ae;Ce=ne.heap[1],ne.heap[1]=ne.heap[ne.heap_len--],be(ne,se,1),Ne=ne.heap[1],ne.heap[--ne.heap_max]=Ce,ne.heap[--ne.heap_max]=Ne,se[2*pe]=se[2*Ce]+se[2*Ne],ne.depth[pe]=(ne.depth[Ce]>=ne.depth[Ne]?ne.depth[Ce]:ne.depth[Ne])+1,se[2*Ce+1]=se[2*Ne+1]=pe,ne.heap[1]=pe++,be(ne,se,1),2<=ne.heap_len;);ne.heap[--ne.heap_max]=ne.heap[1],(function(Me,ze){var Ge,at,xe,Re,Ve,Ze,Ke=ze.dyn_tree,ft=ze.max_code,yt=ze.stat_desc.static_tree,Jn=ze.stat_desc.has_stree,mi=ze.stat_desc.extra_bits,Ki=ze.stat_desc.extra_base,K=ze.stat_desc.max_length,te=0;for(Re=0;Re<=w;Re++)Me.bl_count[Re]=0;for(Ke[2*Me.heap[Me.heap_max]+1]=0,Ge=Me.heap_max+1;Ge<v;Ge++)K<(Re=Ke[2*Ke[2*(at=Me.heap[Ge])+1]+1]+1)&&(Re=K,te++),Ke[2*at+1]=Re,ft<at||(Me.bl_count[Re]++,Ve=0,Ki<=at&&(Ve=mi[at-Ki]),Ze=Ke[2*at],Me.opt_len+=Ze*(Re+Ve),Jn&&(Me.static_len+=Ze*(yt[2*at+1]+Ve)));if(te!==0){do{for(Re=K-1;Me.bl_count[Re]===0;)Re--;Me.bl_count[Re]--,Me.bl_count[Re+1]+=2,Me.bl_count[K]--,te-=2}while(0<te);for(Re=K;Re!==0;Re--)for(at=Me.bl_count[Re];at!==0;)ft<(xe=Me.heap[--Ge])||(Ke[2*xe+1]!==Re&&(Me.opt_len+=(Re-Ke[2*xe+1])*Ke[2*xe],Ke[2*xe+1]=Re),at--)}})(ne,ue),Ie(se,ke,ne.bl_count)}function I(ne,ue,Ce){var Ne,pe,se=-1,de=ue[1],ye=0,ae=7,ke=4;for(de===0&&(ae=138,ke=3),ue[2*(Ce+1)+1]=65535,Ne=0;Ne<=Ce;Ne++)pe=de,de=ue[2*(Ne+1)+1],++ye<ae&&pe===de||(ye<ke?ne.bl_tree[2*pe]+=ye:pe!==0?(pe!==se&&ne.bl_tree[2*pe]++,ne.bl_tree[2*N]++):ye<=10?ne.bl_tree[2*E]++:ne.bl_tree[2*C]++,se=pe,ke=(ye=0)===de?(ae=138,3):pe===de?(ae=6,3):(ae=7,4))}function he(ne,ue,Ce){var Ne,pe,se=-1,de=ue[1],ye=0,ae=7,ke=4;for(de===0&&(ae=138,ke=3),Ne=0;Ne<=Ce;Ne++)if(pe=de,de=ue[2*(Ne+1)+1],!(++ye<ae&&pe===de)){if(ye<ke)for(;ve(ne,pe,ne.bl_tree),--ye!=0;);else pe!==0?(pe!==se&&(ve(ne,pe,ne.bl_tree),ye--),ve(ne,N,ne.bl_tree),ge(ne,ye-3,2)):ye<=10?(ve(ne,E,ne.bl_tree),ge(ne,ye-3,3)):(ve(ne,C,ne.bl_tree),ge(ne,ye-11,7));se=pe,ke=(ye=0)===de?(ae=138,3):pe===de?(ae=6,3):(ae=7,4)}}u(Y);var oe=!1;function re(ne,ue,Ce,Ne){ge(ne,(d<<1)+(Ne?1:0),3),(function(pe,se,de,ye){fe(pe),z(pe,de),z(pe,~de),a.arraySet(pe.pending_buf,pe.window,se,de,pe.pending),pe.pending+=de})(ne,ue,Ce)}i._tr_init=function(ne){oe||((function(){var ue,Ce,Ne,pe,se,de=new Array(w+1);for(pe=Ne=0;pe<h-1;pe++)for(X[pe]=Ne,ue=0;ue<1<<j[pe];ue++)U[Ne++]=pe;for(U[Ne-1]=pe,pe=se=0;pe<16;pe++)for(Y[pe]=se,ue=0;ue<1<<M[pe];ue++)W[se++]=pe;for(se>>=7;pe<x;pe++)for(Y[pe]=se<<7,ue=0;ue<1<<M[pe]-7;ue++)W[256+se++]=pe;for(Ce=0;Ce<=w;Ce++)de[Ce]=0;for(ue=0;ue<=143;)G[2*ue+1]=8,ue++,de[8]++;for(;ue<=255;)G[2*ue+1]=9,ue++,de[9]++;for(;ue<=279;)G[2*ue+1]=7,ue++,de[7]++;for(;ue<=287;)G[2*ue+1]=8,ue++,de[8]++;for(Ie(G,b+1,de),ue=0;ue<x;ue++)R[2*ue+1]=5,R[2*ue]=je(ue,5);P=new H(G,j,g+1,b,w),B=new H(R,M,0,x,w),ee=new H(new Array(0),O,0,k,_)})(),oe=!0),ne.l_desc=new J(ne.dyn_ltree,P),ne.d_desc=new J(ne.dyn_dtree,B),ne.bl_desc=new J(ne.bl_tree,ee),ne.bi_buf=0,ne.bi_valid=0,Pe(ne)},i._tr_stored_block=re,i._tr_flush_block=function(ne,ue,Ce,Ne){var pe,se,de=0;0<ne.level?(ne.strm.data_type===2&&(ne.strm.data_type=(function(ye){var ae,ke=4093624447;for(ae=0;ae<=31;ae++,ke>>>=1)if(1&ke&&ye.dyn_ltree[2*ae]!==0)return s;if(ye.dyn_ltree[18]!==0||ye.dyn_ltree[20]!==0||ye.dyn_ltree[26]!==0)return l;for(ae=32;ae<g;ae++)if(ye.dyn_ltree[2*ae]!==0)return l;return s})(ne)),$e(ne,ne.l_desc),$e(ne,ne.d_desc),de=(function(ye){var ae;for(I(ye,ye.dyn_ltree,ye.l_desc.max_code),I(ye,ye.dyn_dtree,ye.d_desc.max_code),$e(ye,ye.bl_desc),ae=k-1;3<=ae&&ye.bl_tree[2*F[ae]+1]===0;ae--);return ye.opt_len+=3*(ae+1)+5+5+4,ae})(ne),pe=ne.opt_len+3+7>>>3,(se=ne.static_len+3+7>>>3)<=pe&&(pe=se)):pe=se=Ce+5,Ce+4<=pe&&ue!==-1?re(ne,ue,Ce,Ne):ne.strategy===4||se===pe?(ge(ne,2+(Ne?1:0),3),Fe(ne,G,R)):(ge(ne,4+(Ne?1:0),3),(function(ye,ae,ke,Me){var ze;for(ge(ye,ae-257,5),ge(ye,ke-1,5),ge(ye,Me-4,4),ze=0;ze<Me;ze++)ge(ye,ye.bl_tree[2*F[ze]+1],3);he(ye,ye.dyn_ltree,ae-1),he(ye,ye.dyn_dtree,ke-1)})(ne,ne.l_desc.max_code+1,ne.d_desc.max_code+1,de+1),Fe(ne,ne.dyn_ltree,ne.dyn_dtree)),Pe(ne),Ne&&fe(ne)},i._tr_tally=function(ne,ue,Ce){return ne.pending_buf[ne.d_buf+2*ne.last_lit]=ue>>>8&255,ne.pending_buf[ne.d_buf+2*ne.last_lit+1]=255&ue,ne.pending_buf[ne.l_buf+ne.last_lit]=255&Ce,ne.last_lit++,ue===0?ne.dyn_ltree[2*Ce]++:(ne.matches++,ue--,ne.dyn_ltree[2*(U[Ce]+g+1)]++,ne.dyn_dtree[2*ie(ue)]++),ne.last_lit===ne.lit_bufsize-1},i._tr_align=function(ne){ge(ne,2,3),ve(ne,A,G),(function(ue){ue.bi_valid===16?(z(ue,ue.bi_buf),ue.bi_buf=0,ue.bi_valid=0):8<=ue.bi_valid&&(ue.pending_buf[ue.pending++]=255&ue.bi_buf,ue.bi_buf>>=8,ue.bi_valid-=8)})(ne)}},{"../utils/common":41}],53:[function(t,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,i){(function(a){(function(s,l){if(!s.setImmediate){var u,d,h,g,b=1,x={},k=!1,v=s.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(s);w=w&&w.setTimeout?w:s,u={}.toString.call(s.process)==="[object process]"?function(N){process.nextTick(function(){_(N)})}:(function(){if(s.postMessage&&!s.importScripts){var N=!0,E=s.onmessage;return s.onmessage=function(){N=!1},s.postMessage("","*"),s.onmessage=E,N}})()?(g="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",A,!1):s.attachEvent("onmessage",A),function(N){s.postMessage(g+N,"*")}):s.MessageChannel?((h=new MessageChannel).port1.onmessage=function(N){_(N.data)},function(N){h.port2.postMessage(N)}):v&&"onreadystatechange"in v.createElement("script")?(d=v.documentElement,function(N){var E=v.createElement("script");E.onreadystatechange=function(){_(N),E.onreadystatechange=null,d.removeChild(E),E=null},d.appendChild(E)}):function(N){setTimeout(_,0,N)},w.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var E=new Array(arguments.length-1),C=0;C<E.length;C++)E[C]=arguments[C+1];var j={callback:N,args:E};return x[b]=j,u(b),b++},w.clearImmediate=D}function D(N){delete x[N]}function _(N){if(k)setTimeout(_,0,N);else{var E=x[N];if(E){k=!0;try{(function(C){var j=C.callback,M=C.args;switch(M.length){case 0:j();break;case 1:j(M[0]);break;case 2:j(M[0],M[1]);break;case 3:j(M[0],M[1],M[2]);break;default:j.apply(l,M)}})(E)}finally{D(N),k=!1}}}}function A(N){N.source===s&&typeof N.data=="string"&&N.data.indexOf(g)===0&&_(+N.data.slice(g.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof Tc<"u"?Tc:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ek)),Ek.exports}var P3;function jj(){if(P3)return Ag;P3=1;var r=rP(),e=iP();Ag.openArrayBuffer=t,Ag.splitPath=n,Ag.joinPath=i;function t(a){return e.loadAsync(a).then(function(s){function l(g){return s.file(g)!==null}function u(g,b){return s.file(g).async("uint8array").then(function(x){if(b==="base64")return r.fromByteArray(x);if(b){var k=new TextDecoder(b);return k.decode(x)}else return x})}function d(g,b){s.file(g,b)}function h(){return s.generateAsync({type:"arraybuffer"})}return{exists:l,read:u,write:d,toArrayBuffer:h}})}function n(a){var s=a.lastIndexOf("/");return s===-1?{dirname:"",basename:a}:{dirname:a.substring(0,s),basename:a.substring(s+1)}}function i(){var a=Array.prototype.filter.call(arguments,function(l){return l}),s=[];return a.forEach(function(l){/^\//.test(l)?s=[l]:s.push(l)}),s.join("/")}return Ag}var Iy={},Nl={},Sh={},z3;function Fj(){if(z3)return Sh;z3=1;var r=Nn;Sh.Element=t,Sh.element=function(a,s,l){return new t(a,s,l)},Sh.text=function(a){return{type:"text",value:a}};var e=Sh.emptyElement={first:function(){return null},firstOrEmpty:function(){return e},attributes:{},children:[]};function t(a,s,l){this.type="element",this.name=a,this.attributes=s||{},this.children=l||[]}t.prototype.first=function(a){return r.find(this.children,function(s){return s.name===a})},t.prototype.firstOrEmpty=function(a){return this.first(a)||e},t.prototype.getElementsByTagName=function(a){var s=r.filter(this.children,function(l){return l.name===a});return i(s)},t.prototype.text=function(){if(this.children.length===0)return"";if(this.children.length!==1||this.children[0].type!=="text")throw new Error("Not implemented");return this.children[0].value};var n={getElementsByTagName:function(a){return i(r.flatten(this.map(function(s){return s.getElementsByTagName(a)},!0)))}};function i(a){return r.extend(a,n)}return Sh}var Tk={},Oy={},Eg={},no={},uu={},W3;function o1(){if(W3)return uu;W3=1;function r(a,s,l){if(l===void 0&&(l=Array.prototype),a&&typeof l.find=="function")return l.find.call(a,s);for(var u=0;u<a.length;u++)if(Object.prototype.hasOwnProperty.call(a,u)){var d=a[u];if(s.call(void 0,d,u,a))return d}}function e(a,s){return s===void 0&&(s=Object),s&&typeof s.freeze=="function"?s.freeze(a):a}function t(a,s){if(a===null||typeof a!="object")throw new TypeError("target is not an object");for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(a[l]=s[l]);return a}var n=e({HTML:"text/html",isHTML:function(a){return a===n.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),i=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(a){return a===i.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return uu.assign=t,uu.find=r,uu.freeze=e,uu.MIME_TYPE=n,uu.NAMESPACE=i,uu}var H3;function lS(){if(H3)return no;H3=1;var r=o1(),e=r.find,t=r.NAMESPACE;function n(K){return K!==""}function i(K){return K?K.split(/[\t\n\f\r ]+/).filter(n):[]}function a(K,te){return K.hasOwnProperty(te)||(K[te]=!0),K}function s(K){if(!K)return[];var te=i(K);return Object.keys(te.reduce(a,{}))}function l(K){return function(te){return K&&K.indexOf(te)!==-1}}function u(K,te){for(var ce in K)Object.prototype.hasOwnProperty.call(K,ce)&&(te[ce]=K[ce])}function d(K,te){var ce=K.prototype;if(!(ce instanceof te)){let Ee=function(){};Ee.prototype=te.prototype,Ee=new Ee,u(ce,Ee),K.prototype=ce=Ee}ce.constructor!=K&&(typeof K!="function"&&console.error("unknown Class:"+K),ce.constructor=K)}var h={},g=h.ELEMENT_NODE=1,b=h.ATTRIBUTE_NODE=2,x=h.TEXT_NODE=3,k=h.CDATA_SECTION_NODE=4,v=h.ENTITY_REFERENCE_NODE=5,w=h.ENTITY_NODE=6,D=h.PROCESSING_INSTRUCTION_NODE=7,_=h.COMMENT_NODE=8,A=h.DOCUMENT_NODE=9,N=h.DOCUMENT_TYPE_NODE=10,E=h.DOCUMENT_FRAGMENT_NODE=11,C=h.NOTATION_NODE=12,j={},M={};j.INDEX_SIZE_ERR=(M[1]="Index size error",1),j.DOMSTRING_SIZE_ERR=(M[2]="DOMString size error",2);var O=j.HIERARCHY_REQUEST_ERR=(M[3]="Hierarchy request error",3);j.WRONG_DOCUMENT_ERR=(M[4]="Wrong document",4),j.INVALID_CHARACTER_ERR=(M[5]="Invalid character",5),j.NO_DATA_ALLOWED_ERR=(M[6]="No data allowed",6),j.NO_MODIFICATION_ALLOWED_ERR=(M[7]="No modification allowed",7);var F=j.NOT_FOUND_ERR=(M[8]="Not found",8);j.NOT_SUPPORTED_ERR=(M[9]="Not supported",9);var G=j.INUSE_ATTRIBUTE_ERR=(M[10]="Attribute in use",10);j.INVALID_STATE_ERR=(M[11]="Invalid state",11),j.SYNTAX_ERR=(M[12]="Syntax error",12),j.INVALID_MODIFICATION_ERR=(M[13]="Invalid modification",13),j.NAMESPACE_ERR=(M[14]="Invalid namespace",14),j.INVALID_ACCESS_ERR=(M[15]="Invalid access",15);function R(K,te){if(te instanceof Error)var ce=te;else ce=this,Error.call(this,M[K]),this.message=M[K],Error.captureStackTrace&&Error.captureStackTrace(this,R);return ce.code=K,te&&(this.message=this.message+": "+te),ce}R.prototype=Error.prototype,u(j,R);function W(){}W.prototype={length:0,item:function(K){return K>=0&&K<this.length?this[K]:null},toString:function(K,te){for(var ce=[],Ee=0;Ee<this.length;Ee++)yt(this[Ee],ce,K,te);return ce.join("")},filter:function(K){return Array.prototype.filter.call(this,K)},indexOf:function(K){return Array.prototype.indexOf.call(this,K)}};function U(K,te){this._node=K,this._refresh=te,X(this)}function X(K){var te=K._node._inc||K._node.ownerDocument._inc;if(K._inc!==te){var ce=K._refresh(K._node);if(Ki(K,"length",ce.length),!K.$$length||ce.length<K.$$length)for(var Ee=ce.length;Ee in K;Ee++)Object.prototype.hasOwnProperty.call(K,Ee)&&delete K[Ee];u(ce,K),K._inc=te}}U.prototype.item=function(K){return X(this),this[K]||null},d(U,W);function P(){}function B(K,te){for(var ce=K.length;ce--;)if(K[ce]===te)return ce}function ee(K,te,ce,Ee){if(Ee?te[B(te,Ee)]=ce:te[te.length++]=ce,K){ce.ownerElement=K;var Xe=K.ownerDocument;Xe&&(Ee&&je(Xe,K,Ee),ve(Xe,K,ce))}}function Y(K,te,ce){var Ee=B(te,ce);if(Ee>=0){for(var Xe=te.length-1;Ee<Xe;)te[Ee]=te[++Ee];if(te.length=Xe,K){var ot=K.ownerDocument;ot&&(je(ot,K,ce),ce.ownerElement=null)}}else throw new R(F,new Error(K.tagName+"@"+ce))}P.prototype={length:0,item:W.prototype.item,getNamedItem:function(K){for(var te=this.length;te--;){var ce=this[te];if(ce.nodeName==K)return ce}},setNamedItem:function(K){var te=K.ownerElement;if(te&&te!=this._ownerElement)throw new R(G);var ce=this.getNamedItem(K.nodeName);return ee(this._ownerElement,this,K,ce),ce},setNamedItemNS:function(K){var te=K.ownerElement,ce;if(te&&te!=this._ownerElement)throw new R(G);return ce=this.getNamedItemNS(K.namespaceURI,K.localName),ee(this._ownerElement,this,K,ce),ce},removeNamedItem:function(K){var te=this.getNamedItem(K);return Y(this._ownerElement,this,te),te},removeNamedItemNS:function(K,te){var ce=this.getNamedItemNS(K,te);return Y(this._ownerElement,this,ce),ce},getNamedItemNS:function(K,te){for(var ce=this.length;ce--;){var Ee=this[ce];if(Ee.localName==te&&Ee.namespaceURI==K)return Ee}return null}};function H(){}H.prototype={hasFeature:function(K,te){return!0},createDocument:function(K,te,ce){var Ee=new ge;if(Ee.implementation=this,Ee.childNodes=new W,Ee.doctype=ce||null,ce&&Ee.appendChild(ce),te){var Xe=Ee.createElementNS(K,te);Ee.appendChild(Xe)}return Ee},createDocumentType:function(K,te,ce){var Ee=new Me;return Ee.name=K,Ee.nodeName=K,Ee.publicId=te||"",Ee.systemId=ce||"",Ee}};function J(){}J.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(K,te){return ue(this,K,te)},replaceChild:function(K,te){ue(this,K,te,ne),te&&this.removeChild(te)},removeChild:function(K){return Pe(this,K)},appendChild:function(K){return this.insertBefore(K,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(K){return mi(this.ownerDocument||this,this,K)},normalize:function(){for(var K=this.firstChild;K;){var te=K.nextSibling;te&&te.nodeType==x&&K.nodeType==x?(this.removeChild(te),K.appendData(te.data)):(K.normalize(),K=te)}},isSupported:function(K,te){return this.ownerDocument.implementation.hasFeature(K,te)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(K){for(var te=this;te;){var ce=te._nsMap;if(ce){for(var Ee in ce)if(Object.prototype.hasOwnProperty.call(ce,Ee)&&ce[Ee]===K)return Ee}te=te.nodeType==b?te.ownerDocument:te.parentNode}return null},lookupNamespaceURI:function(K){for(var te=this;te;){var ce=te._nsMap;if(ce&&Object.prototype.hasOwnProperty.call(ce,K))return ce[K];te=te.nodeType==b?te.ownerDocument:te.parentNode}return null},isDefaultNamespace:function(K){var te=this.lookupPrefix(K);return te==null}};function ie(K){return K=="<"&&"&lt;"||K==">"&&"&gt;"||K=="&"&&"&amp;"||K=='"'&&"&quot;"||"&#"+K.charCodeAt()+";"}u(h,J),u(h,J.prototype);function z(K,te){if(te(K))return!0;if(K=K.firstChild)do if(z(K,te))return!0;while(K=K.nextSibling)}function ge(){this.ownerDocument=this}function ve(K,te,ce){K&&K._inc++;var Ee=ce.namespaceURI;Ee===t.XMLNS&&(te._nsMap[ce.prefix?ce.localName:""]=ce.value)}function je(K,te,ce,Ee){K&&K._inc++;var Xe=ce.namespaceURI;Xe===t.XMLNS&&delete te._nsMap[ce.prefix?ce.localName:""]}function Ie(K,te,ce){if(K&&K._inc){K._inc++;var Ee=te.childNodes;if(ce)Ee[Ee.length++]=ce;else{for(var Xe=te.firstChild,ot=0;Xe;)Ee[ot++]=Xe,Xe=Xe.nextSibling;Ee.length=ot,delete Ee[Ee.length]}}}function Pe(K,te){var ce=te.previousSibling,Ee=te.nextSibling;return ce?ce.nextSibling=Ee:K.firstChild=Ee,Ee?Ee.previousSibling=ce:K.lastChild=ce,te.parentNode=null,te.previousSibling=null,te.nextSibling=null,Ie(K.ownerDocument,K),te}function fe(K){return K&&(K.nodeType===J.DOCUMENT_NODE||K.nodeType===J.DOCUMENT_FRAGMENT_NODE||K.nodeType===J.ELEMENT_NODE)}function Ue(K){return K&&(Fe(K)||$e(K)||be(K)||K.nodeType===J.DOCUMENT_FRAGMENT_NODE||K.nodeType===J.COMMENT_NODE||K.nodeType===J.PROCESSING_INSTRUCTION_NODE)}function be(K){return K&&K.nodeType===J.DOCUMENT_TYPE_NODE}function Fe(K){return K&&K.nodeType===J.ELEMENT_NODE}function $e(K){return K&&K.nodeType===J.TEXT_NODE}function I(K,te){var ce=K.childNodes||[];if(e(ce,Fe)||be(te))return!1;var Ee=e(ce,be);return!(te&&Ee&&ce.indexOf(Ee)>ce.indexOf(te))}function he(K,te){var ce=K.childNodes||[];function Ee(ot){return Fe(ot)&&ot!==te}if(e(ce,Ee))return!1;var Xe=e(ce,be);return!(te&&Xe&&ce.indexOf(Xe)>ce.indexOf(te))}function oe(K,te,ce){if(!fe(K))throw new R(O,"Unexpected parent node type "+K.nodeType);if(ce&&ce.parentNode!==K)throw new R(F,"child not in parent");if(!Ue(te)||be(te)&&K.nodeType!==J.DOCUMENT_NODE)throw new R(O,"Unexpected node type "+te.nodeType+" for parent node type "+K.nodeType)}function re(K,te,ce){var Ee=K.childNodes||[],Xe=te.childNodes||[];if(te.nodeType===J.DOCUMENT_FRAGMENT_NODE){var ot=Xe.filter(Fe);if(ot.length>1||e(Xe,$e))throw new R(O,"More than one element or text in fragment");if(ot.length===1&&!I(K,ce))throw new R(O,"Element in fragment can not be inserted before doctype")}if(Fe(te)&&!I(K,ce))throw new R(O,"Only one element can be added and only after doctype");if(be(te)){if(e(Ee,be))throw new R(O,"Only one doctype is allowed");var Gt=e(Ee,Fe);if(ce&&Ee.indexOf(Gt)<Ee.indexOf(ce))throw new R(O,"Doctype can only be inserted before an element");if(!ce&&Gt)throw new R(O,"Doctype can not be appended since element is present")}}function ne(K,te,ce){var Ee=K.childNodes||[],Xe=te.childNodes||[];if(te.nodeType===J.DOCUMENT_FRAGMENT_NODE){var ot=Xe.filter(Fe);if(ot.length>1||e(Xe,$e))throw new R(O,"More than one element or text in fragment");if(ot.length===1&&!he(K,ce))throw new R(O,"Element in fragment can not be inserted before doctype")}if(Fe(te)&&!he(K,ce))throw new R(O,"Only one element can be added and only after doctype");if(be(te)){if(e(Ee,function(Un){return be(Un)&&Un!==ce}))throw new R(O,"Only one doctype is allowed");var Gt=e(Ee,Fe);if(ce&&Ee.indexOf(Gt)<Ee.indexOf(ce))throw new R(O,"Doctype can only be inserted before an element")}}function ue(K,te,ce,Ee){oe(K,te,ce),K.nodeType===J.DOCUMENT_NODE&&(Ee||re)(K,te,ce);var Xe=te.parentNode;if(Xe&&Xe.removeChild(te),te.nodeType===E){var ot=te.firstChild;if(ot==null)return te;var Gt=te.lastChild}else ot=Gt=te;var Sr=ce?ce.previousSibling:K.lastChild;ot.previousSibling=Sr,Gt.nextSibling=ce,Sr?Sr.nextSibling=ot:K.firstChild=ot,ce==null?K.lastChild=Gt:ce.previousSibling=Gt;do{ot.parentNode=K;var Un=K.ownerDocument||K;Ce(ot,Un)}while(ot!==Gt&&(ot=ot.nextSibling));return Ie(K.ownerDocument||K,K),te.nodeType==E&&(te.firstChild=te.lastChild=null),te}function Ce(K,te){if(K.ownerDocument!==te){if(K.ownerDocument=te,K.nodeType===g&&K.attributes)for(var ce=0;ce<K.attributes.length;ce++){var Ee=K.attributes.item(ce);Ee&&(Ee.ownerDocument=te)}for(var Xe=K.firstChild;Xe;)Ce(Xe,te),Xe=Xe.nextSibling}}function Ne(K,te){te.parentNode&&te.parentNode.removeChild(te),te.parentNode=K,te.previousSibling=K.lastChild,te.nextSibling=null,te.previousSibling?te.previousSibling.nextSibling=te:K.firstChild=te,K.lastChild=te,Ie(K.ownerDocument,K,te);var ce=K.ownerDocument||K;return Ce(te,ce),te}ge.prototype={nodeName:"#document",nodeType:A,doctype:null,documentElement:null,_inc:1,insertBefore:function(K,te){if(K.nodeType==E){for(var ce=K.firstChild;ce;){var Ee=ce.nextSibling;this.insertBefore(ce,te),ce=Ee}return K}return ue(this,K,te),Ce(K,this),this.documentElement===null&&K.nodeType===g&&(this.documentElement=K),K},removeChild:function(K){return this.documentElement==K&&(this.documentElement=null),Pe(this,K)},replaceChild:function(K,te){ue(this,K,te,ne),Ce(K,this),te&&this.removeChild(te),Fe(K)&&(this.documentElement=K)},importNode:function(K,te){return Jn(this,K,te)},getElementById:function(K){var te=null;return z(this.documentElement,function(ce){if(ce.nodeType==g&&ce.getAttribute("id")==K)return te=ce,!0}),te},getElementsByClassName:function(K){var te=s(K);return new U(this,function(ce){var Ee=[];return te.length>0&&z(ce.documentElement,function(Xe){if(Xe!==ce&&Xe.nodeType===g){var ot=Xe.getAttribute("class");if(ot){var Gt=K===ot;if(!Gt){var Sr=s(ot);Gt=te.every(l(Sr))}Gt&&Ee.push(Xe)}}}),Ee})},createElement:function(K){var te=new pe;te.ownerDocument=this,te.nodeName=K,te.tagName=K,te.localName=K,te.childNodes=new W;var ce=te.attributes=new P;return ce._ownerElement=te,te},createDocumentFragment:function(){var K=new xe;return K.ownerDocument=this,K.childNodes=new W,K},createTextNode:function(K){var te=new ye;return te.ownerDocument=this,te.appendData(K),te},createComment:function(K){var te=new ae;return te.ownerDocument=this,te.appendData(K),te},createCDATASection:function(K){var te=new ke;return te.ownerDocument=this,te.appendData(K),te},createProcessingInstruction:function(K,te){var ce=new Re;return ce.ownerDocument=this,ce.tagName=ce.nodeName=ce.target=K,ce.nodeValue=ce.data=te,ce},createAttribute:function(K){var te=new se;return te.ownerDocument=this,te.name=K,te.nodeName=K,te.localName=K,te.specified=!0,te},createEntityReference:function(K){var te=new at;return te.ownerDocument=this,te.nodeName=K,te},createElementNS:function(K,te){var ce=new pe,Ee=te.split(":"),Xe=ce.attributes=new P;return ce.childNodes=new W,ce.ownerDocument=this,ce.nodeName=te,ce.tagName=te,ce.namespaceURI=K,Ee.length==2?(ce.prefix=Ee[0],ce.localName=Ee[1]):ce.localName=te,Xe._ownerElement=ce,ce},createAttributeNS:function(K,te){var ce=new se,Ee=te.split(":");return ce.ownerDocument=this,ce.nodeName=te,ce.name=te,ce.namespaceURI=K,ce.specified=!0,Ee.length==2?(ce.prefix=Ee[0],ce.localName=Ee[1]):ce.localName=te,ce}},d(ge,J);function pe(){this._nsMap={}}pe.prototype={nodeType:g,hasAttribute:function(K){return this.getAttributeNode(K)!=null},getAttribute:function(K){var te=this.getAttributeNode(K);return te&&te.value||""},getAttributeNode:function(K){return this.attributes.getNamedItem(K)},setAttribute:function(K,te){var ce=this.ownerDocument.createAttribute(K);ce.value=ce.nodeValue=""+te,this.setAttributeNode(ce)},removeAttribute:function(K){var te=this.getAttributeNode(K);te&&this.removeAttributeNode(te)},appendChild:function(K){return K.nodeType===E?this.insertBefore(K,null):Ne(this,K)},setAttributeNode:function(K){return this.attributes.setNamedItem(K)},setAttributeNodeNS:function(K){return this.attributes.setNamedItemNS(K)},removeAttributeNode:function(K){return this.attributes.removeNamedItem(K.nodeName)},removeAttributeNS:function(K,te){var ce=this.getAttributeNodeNS(K,te);ce&&this.removeAttributeNode(ce)},hasAttributeNS:function(K,te){return this.getAttributeNodeNS(K,te)!=null},getAttributeNS:function(K,te){var ce=this.getAttributeNodeNS(K,te);return ce&&ce.value||""},setAttributeNS:function(K,te,ce){var Ee=this.ownerDocument.createAttributeNS(K,te);Ee.value=Ee.nodeValue=""+ce,this.setAttributeNode(Ee)},getAttributeNodeNS:function(K,te){return this.attributes.getNamedItemNS(K,te)},getElementsByTagName:function(K){return new U(this,function(te){var ce=[];return z(te,function(Ee){Ee!==te&&Ee.nodeType==g&&(K==="*"||Ee.tagName==K)&&ce.push(Ee)}),ce})},getElementsByTagNameNS:function(K,te){return new U(this,function(ce){var Ee=[];return z(ce,function(Xe){Xe!==ce&&Xe.nodeType===g&&(K==="*"||Xe.namespaceURI===K)&&(te==="*"||Xe.localName==te)&&Ee.push(Xe)}),Ee})}},ge.prototype.getElementsByTagName=pe.prototype.getElementsByTagName,ge.prototype.getElementsByTagNameNS=pe.prototype.getElementsByTagNameNS,d(pe,J);function se(){}se.prototype.nodeType=b,d(se,J);function de(){}de.prototype={data:"",substringData:function(K,te){return this.data.substring(K,K+te)},appendData:function(K){K=this.data+K,this.nodeValue=this.data=K,this.length=K.length},insertData:function(K,te){this.replaceData(K,0,te)},appendChild:function(K){throw new Error(M[O])},deleteData:function(K,te){this.replaceData(K,te,"")},replaceData:function(K,te,ce){var Ee=this.data.substring(0,K),Xe=this.data.substring(K+te);ce=Ee+ce+Xe,this.nodeValue=this.data=ce,this.length=ce.length}},d(de,J);function ye(){}ye.prototype={nodeName:"#text",nodeType:x,splitText:function(K){var te=this.data,ce=te.substring(K);te=te.substring(0,K),this.data=this.nodeValue=te,this.length=te.length;var Ee=this.ownerDocument.createTextNode(ce);return this.parentNode&&this.parentNode.insertBefore(Ee,this.nextSibling),Ee}},d(ye,de);function ae(){}ae.prototype={nodeName:"#comment",nodeType:_},d(ae,de);function ke(){}ke.prototype={nodeName:"#cdata-section",nodeType:k},d(ke,de);function Me(){}Me.prototype.nodeType=N,d(Me,J);function ze(){}ze.prototype.nodeType=C,d(ze,J);function Ge(){}Ge.prototype.nodeType=w,d(Ge,J);function at(){}at.prototype.nodeType=v,d(at,J);function xe(){}xe.prototype.nodeName="#document-fragment",xe.prototype.nodeType=E,d(xe,J);function Re(){}Re.prototype.nodeType=D,d(Re,J);function Ve(){}Ve.prototype.serializeToString=function(K,te,ce){return Ze.call(K,te,ce)},J.prototype.toString=Ze;function Ze(K,te){var ce=[],Ee=this.nodeType==9&&this.documentElement||this,Xe=Ee.prefix,ot=Ee.namespaceURI;if(ot&&Xe==null){var Xe=Ee.lookupPrefix(ot);if(Xe==null)var Gt=[{namespace:ot,prefix:null}]}return yt(this,ce,K,te,Gt),ce.join("")}function Ke(K,te,ce){var Ee=K.prefix||"",Xe=K.namespaceURI;if(!Xe||Ee==="xml"&&Xe===t.XML||Xe===t.XMLNS)return!1;for(var ot=ce.length;ot--;){var Gt=ce[ot];if(Gt.prefix===Ee)return Gt.namespace!==Xe}return!0}function ft(K,te,ce){K.push(" ",te,'="',ce.replace(/[<>&"\t\n\r]/g,ie),'"')}function yt(K,te,ce,Ee,Xe){if(Xe||(Xe=[]),Ee)if(K=Ee(K),K){if(typeof K=="string"){te.push(K);return}}else return;switch(K.nodeType){case g:var ot=K.attributes,Gt=ot.length,Rn=K.firstChild,Sr=K.tagName;ce=t.isHTML(K.namespaceURI)||ce;var Un=Sr;if(!ce&&!K.prefix&&K.namespaceURI){for(var ln,un=0;un<ot.length;un++)if(ot.item(un).name==="xmlns"){ln=ot.item(un).value;break}if(!ln)for(var Zr=Xe.length-1;Zr>=0;Zr--){var Na=Xe[Zr];if(Na.prefix===""&&Na.namespace===K.namespaceURI){ln=Na.namespace;break}}if(ln!==K.namespaceURI)for(var Zr=Xe.length-1;Zr>=0;Zr--){var Na=Xe[Zr];if(Na.namespace===K.namespaceURI){Na.prefix&&(Un=Na.prefix+":"+Sr);break}}}te.push("<",Un);for(var Bs=0;Bs<Gt;Bs++){var Qi=ot.item(Bs);Qi.prefix=="xmlns"?Xe.push({prefix:Qi.localName,namespace:Qi.value}):Qi.nodeName=="xmlns"&&Xe.push({prefix:"",namespace:Qi.value})}for(var Bs=0;Bs<Gt;Bs++){var Qi=ot.item(Bs);if(Ke(Qi,ce,Xe)){var ts=Qi.prefix||"",Ua=Qi.namespaceURI;ft(te,ts?"xmlns:"+ts:"xmlns",Ua),Xe.push({prefix:ts,namespace:Ua})}yt(Qi,te,ce,Ee,Xe)}if(Sr===Un&&Ke(K,ce,Xe)){var ts=K.prefix||"",Ua=K.namespaceURI;ft(te,ts?"xmlns:"+ts:"xmlns",Ua),Xe.push({prefix:ts,namespace:Ua})}if(Rn||ce&&!/^(?:meta|link|img|br|hr|input)$/i.test(Sr)){if(te.push(">"),ce&&/^script$/i.test(Sr))for(;Rn;)Rn.data?te.push(Rn.data):yt(Rn,te,ce,Ee,Xe.slice()),Rn=Rn.nextSibling;else for(;Rn;)yt(Rn,te,ce,Ee,Xe.slice()),Rn=Rn.nextSibling;te.push("</",Un,">")}else te.push("/>");return;case A:case E:for(var Rn=K.firstChild;Rn;)yt(Rn,te,ce,Ee,Xe.slice()),Rn=Rn.nextSibling;return;case b:return ft(te,K.name,K.value);case x:return te.push(K.data.replace(/[<&>]/g,ie));case k:return te.push("<![CDATA[",K.data,"]]>");case _:return te.push("<!--",K.data,"-->");case N:var Ps=K.publicId,bi=K.systemId;if(te.push("<!DOCTYPE ",K.name),Ps)te.push(" PUBLIC ",Ps),bi&&bi!="."&&te.push(" ",bi),te.push(">");else if(bi&&bi!=".")te.push(" SYSTEM ",bi,">");else{var sl=K.internalSubset;sl&&te.push(" [",sl,"]"),te.push(">")}return;case D:return te.push("<?",K.target," ",K.data,"?>");case v:return te.push("&",K.nodeName,";");default:te.push("??",K.nodeName)}}function Jn(K,te,ce){var Ee;switch(te.nodeType){case g:Ee=te.cloneNode(!1),Ee.ownerDocument=K;case E:break;case b:ce=!0;break}if(Ee||(Ee=te.cloneNode(!1)),Ee.ownerDocument=K,Ee.parentNode=null,ce)for(var Xe=te.firstChild;Xe;)Ee.appendChild(Jn(K,Xe,ce)),Xe=Xe.nextSibling;return Ee}function mi(K,te,ce){var Ee=new te.constructor;for(var Xe in te)if(Object.prototype.hasOwnProperty.call(te,Xe)){var ot=te[Xe];typeof ot!="object"&&ot!=Ee[Xe]&&(Ee[Xe]=ot)}switch(te.childNodes&&(Ee.childNodes=new W),Ee.ownerDocument=K,Ee.nodeType){case g:var Gt=te.attributes,Sr=Ee.attributes=new P,Un=Gt.length;Sr._ownerElement=Ee;for(var ln=0;ln<Un;ln++)Ee.setAttributeNode(mi(K,Gt.item(ln),!0));break;case b:ce=!0}if(ce)for(var un=te.firstChild;un;)Ee.appendChild(mi(K,un,ce)),un=un.nextSibling;return Ee}function Ki(K,te,ce){K[te]=ce}try{if(Object.defineProperty){let K=function(te){switch(te.nodeType){case g:case E:var ce=[];for(te=te.firstChild;te;)te.nodeType!==7&&te.nodeType!==8&&ce.push(K(te)),te=te.nextSibling;return ce.join("");default:return te.nodeValue}};Object.defineProperty(U.prototype,"length",{get:function(){return X(this),this.$$length}}),Object.defineProperty(J.prototype,"textContent",{get:function(){return K(this)},set:function(te){switch(this.nodeType){case g:case E:for(;this.firstChild;)this.removeChild(this.firstChild);(te||String(te))&&this.appendChild(this.ownerDocument.createTextNode(te));break;default:this.data=te,this.value=te,this.nodeValue=te}}}),Ki=function(te,ce,Ee){te["$$"+ce]=Ee}}}catch{}return no.DocumentType=Me,no.DOMException=R,no.DOMImplementation=H,no.Element=pe,no.Node=J,no.NodeList=W,no.XMLSerializer=Ve,no}var Tg={},Ck={},q3;function aP(){return q3||(q3=1,(function(r){var e=o1().freeze;r.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),r.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),r.entityMap=r.HTML_ENTITIES})(Ck)),Ck}var My={},V3;function sP(){if(V3)return My;V3=1;var r=o1().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),n=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),i=0,a=1,s=2,l=3,u=4,d=5,h=6,g=7;function b(O,F){this.message=O,this.locator=F,Error.captureStackTrace&&Error.captureStackTrace(this,b)}b.prototype=new Error,b.prototype.name=b.name;function x(){}x.prototype={parse:function(O,F,G){var R=this.domBuilder;R.startDocument(),N(F,F={}),k(O,F,G,R,this.errorHandler),R.endDocument()}};function k(O,F,G,R,W){function U(Ne){if(Ne>65535){Ne-=65536;var pe=55296+(Ne>>10),se=56320+(Ne&1023);return String.fromCharCode(pe,se)}else return String.fromCharCode(Ne)}function X(Ne){var pe=Ne.slice(1,-1);return Object.hasOwnProperty.call(G,pe)?G[pe]:pe.charAt(0)==="#"?U(parseInt(pe.substr(1).replace("x","0x"))):(W.error("entity not found:"+Ne),Ne)}function P(Ne){if(Ne>ge){var pe=O.substring(ge,Ne).replace(/&#?\w+;/g,X);J&&B(ge),R.characters(pe,0,Ne-ge),ge=Ne}}function B(Ne,pe){for(;Ne>=Y&&(pe=H.exec(O));)ee=pe.index,Y=ee+pe[0].length,J.lineNumber++;J.columnNumber=Ne-ee+1}for(var ee=0,Y=0,H=/.*(?:\r\n?|\n)|.*$/g,J=R.locator,ie=[{currentNSMap:F}],z={},ge=0;;){try{var ve=O.indexOf("<",ge);if(ve<0){if(!O.substr(ge).match(/^\s*$/)){var je=R.doc,Ie=je.createTextNode(O.substr(ge));je.appendChild(Ie),R.currentElement=Ie}return}switch(ve>ge&&P(ve),O.charAt(ve+1)){case"/":var oe=O.indexOf(">",ve+3),Pe=O.substring(ve+2,oe).replace(/[ \t\n\r]+$/g,""),fe=ie.pop();oe<0?(Pe=O.substring(ve+2).replace(/[\s<].*/,""),W.error("end tag name: "+Pe+" is not complete:"+fe.tagName),oe=ve+1+Pe.length):Pe.match(/\s</)&&(Pe=Pe.replace(/[\s<].*/,""),W.error("end tag name: "+Pe+" maybe not complete"),oe=ve+1+Pe.length);var Ue=fe.localNSMap,be=fe.tagName==Pe,Fe=be||fe.tagName&&fe.tagName.toLowerCase()==Pe.toLowerCase();if(Fe){if(R.endElement(fe.uri,fe.localName,Pe),Ue)for(var $e in Ue)Object.prototype.hasOwnProperty.call(Ue,$e)&&R.endPrefixMapping($e);be||W.fatalError("end tag name: "+Pe+" is not match the current start tagName:"+fe.tagName)}else ie.push(fe);oe++;break;case"?":J&&B(ve),oe=C(O,ve,R);break;case"!":J&&B(ve),oe=E(O,ve,R,W);break;default:J&&B(ve);var I=new j,he=ie[ie.length-1].currentNSMap,oe=w(O,ve,I,he,X,W),re=I.length;if(!I.closed&&A(O,oe,I.tagName,z)&&(I.closed=!0,G.nbsp||W.warning("unclosed xml attribute")),J&&re){for(var ne=v(J,{}),ue=0;ue<re;ue++){var Ce=I[ue];B(Ce.offset),Ce.locator=v(J,{})}R.locator=ne,D(I,R,he)&&ie.push(I),R.locator=J}else D(I,R,he)&&ie.push(I);r.isHTML(I.uri)&&!I.closed?oe=_(O,oe,I.tagName,X,R):oe++}}catch(Ne){if(Ne instanceof b)throw Ne;W.error("element parse error: "+Ne),oe=-1}oe>ge?ge=oe:P(Math.max(ve,ge)+1)}}function v(O,F){return F.lineNumber=O.lineNumber,F.columnNumber=O.columnNumber,F}function w(O,F,G,R,W,U){function X(J,ie,z){G.attributeNames.hasOwnProperty(J)&&U.fatalError("Attribute "+J+" redefined"),G.addValue(J,ie.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,W),z)}for(var P,B,ee=++F,Y=i;;){var H=O.charAt(ee);switch(H){case"=":if(Y===a)P=O.slice(F,ee),Y=l;else if(Y===s)Y=l;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(Y===l||Y===a)if(Y===a&&(U.warning('attribute value must after "="'),P=O.slice(F,ee)),F=ee+1,ee=O.indexOf(H,F),ee>0)B=O.slice(F,ee),X(P,B,F-1),Y=d;else throw new Error("attribute value no end '"+H+"' match");else if(Y==u)B=O.slice(F,ee),X(P,B,F),U.warning('attribute "'+P+'" missed start quot('+H+")!!"),F=ee+1,Y=d;else throw new Error('attribute value must after "="');break;case"/":switch(Y){case i:G.setTagName(O.slice(F,ee));case d:case h:case g:Y=g,G.closed=!0;case u:case a:break;case s:G.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return U.error("unexpected end of input"),Y==i&&G.setTagName(O.slice(F,ee)),ee;case">":switch(Y){case i:G.setTagName(O.slice(F,ee));case d:case h:case g:break;case u:case a:B=O.slice(F,ee),B.slice(-1)==="/"&&(G.closed=!0,B=B.slice(0,-1));case s:Y===s&&(B=P),Y==u?(U.warning('attribute "'+B+'" missed quot(")!'),X(P,B,F)):((!r.isHTML(R[""])||!B.match(/^(?:disabled|checked|selected)$/i))&&U.warning('attribute "'+B+'" missed value!! "'+B+'" instead!!'),X(B,B,F));break;case l:throw new Error("attribute value missed!!")}return ee;case"":H=" ";default:if(H<=" ")switch(Y){case i:G.setTagName(O.slice(F,ee)),Y=h;break;case a:P=O.slice(F,ee),Y=s;break;case u:var B=O.slice(F,ee);U.warning('attribute "'+B+'" missed quot(")!!'),X(P,B,F);case d:Y=h;break}else switch(Y){case s:G.tagName,(!r.isHTML(R[""])||!P.match(/^(?:disabled|checked|selected)$/i))&&U.warning('attribute "'+P+'" missed value!! "'+P+'" instead2!!'),X(P,P,F),F=ee,Y=a;break;case d:U.warning('attribute space is required"'+P+'"!!');case h:Y=a,F=ee;break;case l:Y=u,F=ee;break;case g:throw new Error("elements closed character '/' and '>' must be connected to")}}ee++}}function D(O,F,G){for(var R=O.tagName,W=null,H=O.length;H--;){var U=O[H],X=U.qName,P=U.value,J=X.indexOf(":");if(J>0)var B=U.prefix=X.slice(0,J),ee=X.slice(J+1),Y=B==="xmlns"&&ee;else ee=X,B=null,Y=X==="xmlns"&&"";U.localName=ee,Y!==!1&&(W==null&&(W={},N(G,G={})),G[Y]=W[Y]=P,U.uri=r.XMLNS,F.startPrefixMapping(Y,P))}for(var H=O.length;H--;){U=O[H];var B=U.prefix;B&&(B==="xml"&&(U.uri=r.XML),B!=="xmlns"&&(U.uri=G[B||""]))}var J=R.indexOf(":");J>0?(B=O.prefix=R.slice(0,J),ee=O.localName=R.slice(J+1)):(B=null,ee=O.localName=R);var ie=O.uri=G[B||""];if(F.startElement(ie,ee,R,O),O.closed){if(F.endElement(ie,ee,R),W)for(B in W)Object.prototype.hasOwnProperty.call(W,B)&&F.endPrefixMapping(B)}else return O.currentNSMap=G,O.localNSMap=W,!0}function _(O,F,G,R,W){if(/^(?:script|textarea)$/i.test(G)){var U=O.indexOf("</"+G+">",F),X=O.substring(F+1,U);if(/[&<]/.test(X))return/^script$/i.test(G)?(W.characters(X,0,X.length),U):(X=X.replace(/&#?\w+;/g,R),W.characters(X,0,X.length),U)}return F+1}function A(O,F,G,R){var W=R[G];return W==null&&(W=O.lastIndexOf("</"+G+">"),W<F&&(W=O.lastIndexOf("</"+G)),R[G]=W),W<F}function N(O,F){for(var G in O)Object.prototype.hasOwnProperty.call(O,G)&&(F[G]=O[G])}function E(O,F,G,R){var W=O.charAt(F+2);switch(W){case"-":if(O.charAt(F+3)==="-"){var U=O.indexOf("-->",F+4);return U>F?(G.comment(O,F+4,U-F-4),U+3):(R.error("Unclosed comment"),-1)}else return-1;default:if(O.substr(F+3,6)=="CDATA["){var U=O.indexOf("]]>",F+9);return G.startCDATA(),G.characters(O,F+9,U-F-9),G.endCDATA(),U+3}var X=M(O,F),P=X.length;if(P>1&&/!doctype/i.test(X[0][0])){var B=X[1][0],ee=!1,Y=!1;P>3&&(/^public$/i.test(X[2][0])?(ee=X[3][0],Y=P>4&&X[4][0]):/^system$/i.test(X[2][0])&&(Y=X[3][0]));var H=X[P-1];return G.startDTD(B,ee,Y),G.endDTD(),H.index+H[0].length}}return-1}function C(O,F,G){var R=O.indexOf("?>",F);if(R){var W=O.substring(F,R).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return W?(W[0].length,G.processingInstruction(W[1],W[2]),R+2):-1}return-1}function j(){this.attributeNames={}}j.prototype={setTagName:function(O){if(!n.test(O))throw new Error("invalid tagName:"+O);this.tagName=O},addValue:function(O,F,G){if(!n.test(O))throw new Error("invalid attribute:"+O);this.attributeNames[O]=this.length,this[this.length++]={qName:O,value:F,offset:G}},length:0,getLocalName:function(O){return this[O].localName},getLocator:function(O){return this[O].locator},getQName:function(O){return this[O].qName},getURI:function(O){return this[O].uri},getValue:function(O){return this[O].value}};function M(O,F){var G,R=[],W=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(W.lastIndex=F,W.exec(O);G=W.exec(O);)if(R.push(G),G[1])return R}return My.XMLReader=x,My.ParseError=b,My}var X3;function oP(){if(X3)return Tg;X3=1;var r=o1(),e=lS(),t=aP(),n=sP(),i=e.DOMImplementation,a=r.NAMESPACE,s=n.ParseError,l=n.XMLReader;function u(w){return w.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function d(w){this.options=w||{locator:{}}}d.prototype.parseFromString=function(w,D){var _=this.options,A=new l,N=_.domBuilder||new g,E=_.errorHandler,C=_.locator,j=_.xmlns||{},M=/\/x?html?$/.test(D),O=M?t.HTML_ENTITIES:t.XML_ENTITIES;C&&N.setDocumentLocator(C),A.errorHandler=h(E,N,C),A.domBuilder=_.domBuilder||N,M&&(j[""]=a.HTML),j.xml=j.xml||a.XML;var F=_.normalizeLineEndings||u;return w&&typeof w=="string"?A.parse(F(w),j,O):A.errorHandler.error("invalid doc source"),N.doc};function h(w,D,_){if(!w){if(D instanceof g)return D;w=D}var A={},N=w instanceof Function;_=_||{};function E(C){var j=w[C];!j&&N&&(j=w.length==2?function(M){w(C,M)}:w),A[C]=j&&function(M){j("[xmldom "+C+"]	"+M+x(_))}||function(){}}return E("warning"),E("error"),E("fatalError"),A}function g(){this.cdata=!1}function b(w,D){D.lineNumber=w.lineNumber,D.columnNumber=w.columnNumber}g.prototype={startDocument:function(){this.doc=new i().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(w,D,_,A){var N=this.doc,E=N.createElementNS(w,_||D),C=A.length;v(this,E),this.currentElement=E,this.locator&&b(this.locator,E);for(var j=0;j<C;j++){var w=A.getURI(j),M=A.getValue(j),_=A.getQName(j),O=N.createAttributeNS(w,_);this.locator&&b(A.getLocator(j),O),O.value=O.nodeValue=M,E.setAttributeNode(O)}},endElement:function(w,D,_){var A=this.currentElement;A.tagName,this.currentElement=A.parentNode},startPrefixMapping:function(w,D){},endPrefixMapping:function(w){},processingInstruction:function(w,D){var _=this.doc.createProcessingInstruction(w,D);this.locator&&b(this.locator,_),v(this,_)},ignorableWhitespace:function(w,D,_){},characters:function(w,D,_){if(w=k.apply(this,arguments),w){if(this.cdata)var A=this.doc.createCDATASection(w);else var A=this.doc.createTextNode(w);this.currentElement?this.currentElement.appendChild(A):/^\s*$/.test(w)&&this.doc.appendChild(A),this.locator&&b(this.locator,A)}},skippedEntity:function(w){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(w){(this.locator=w)&&(w.lineNumber=0)},comment:function(w,D,_){w=k.apply(this,arguments);var A=this.doc.createComment(w);this.locator&&b(this.locator,A),v(this,A)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(w,D,_){var A=this.doc.implementation;if(A&&A.createDocumentType){var N=A.createDocumentType(w,D,_);this.locator&&b(this.locator,N),v(this,N),this.doc.doctype=N}},warning:function(w){console.warn("[xmldom warning]	"+w,x(this.locator))},error:function(w){console.error("[xmldom error]	"+w,x(this.locator))},fatalError:function(w){throw new s(w,this.locator)}};function x(w){if(w)return`
@`+(w.systemId||"")+"#[line:"+w.lineNumber+",col:"+w.columnNumber+"]"}function k(w,D,_){return typeof w=="string"?w.substr(D,_):w.length>=D+_||D?new java.lang.String(w,D,_)+"":w}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(w){g.prototype[w]=function(){return null}});function v(w,D){w.currentElement?w.currentElement.appendChild(D):w.doc.appendChild(D)}return Tg.__DOMHandler=g,Tg.normalizeLineEndings=u,Tg.DOMParser=d,Tg}var G3;function lP(){if(G3)return Eg;G3=1;var r=lS();return Eg.DOMImplementation=r.DOMImplementation,Eg.XMLSerializer=r.XMLSerializer,Eg.DOMParser=oP().DOMParser,Eg}var $3;function cP(){if($3)return Oy;$3=1;var r=lP(),e=lS();function t(n){var i=null,a=new r.DOMParser({errorHandler:function(l,u){i={level:l,message:u}}}),s=a.parseFromString(n);if(i===null)return s;throw new Error(i.level+": "+i.message)}return Oy.parseFromString=t,Oy.Node=e.Node,Oy}var Y3;function uP(){if(Y3)return Tk;Y3=1;var r=qc(),e=Nn,t=cP(),n=Fj(),i=n.Element;Tk.readString=s;var a=t.Node;function s(l,u){u=u||{};try{var d=t.parseFromString(l,"text/xml")}catch(x){return r.reject(x)}if(d.documentElement.tagName==="parsererror")return r.resolve(new Error(d.documentElement.textContent));function h(x){switch(x.nodeType){case a.ELEMENT_NODE:return g(x);case a.TEXT_NODE:return n.text(x.nodeValue)}}function g(x){var k=b(x),v=[];e.forEach(x.childNodes,function(D){var _=h(D);_&&v.push(_)});var w={};return e.forEach(x.attributes,function(D){w[b(D)]=D.value}),new i(k,w,v)}function b(x){if(x.namespaceURI){var k=u[x.namespaceURI],v;return k?v=k+":":v="{"+x.namespaceURI+"}",v+x.localName}else return x.localName}return r.resolve(h(d.documentElement))}return Tk}var Nk={},du={},os={},K3;function Vc(){return K3||(K3=1,(function(){var r,e,t,n,i,a,s,l=[].slice,u={}.hasOwnProperty;r=function(){var d,h,g,b,x,k;if(k=arguments[0],x=2<=arguments.length?l.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(d=0,g=x.length;d<g;d++)if(b=x[d],b!=null)for(h in b)u.call(b,h)&&(k[h]=b[h]);return k},i=function(d){return!!d&&Object.prototype.toString.call(d)==="[object Function]"},a=function(d){var h;return!!d&&((h=typeof d)=="function"||h==="object")},t=function(d){return i(Array.isArray)?Array.isArray(d):Object.prototype.toString.call(d)==="[object Array]"},n=function(d){var h;if(t(d))return!d.length;for(h in d)if(u.call(d,h))return!1;return!0},s=function(d){var h,g;return a(d)&&(g=Object.getPrototypeOf(d))&&(h=g.constructor)&&typeof h=="function"&&h instanceof h&&Function.prototype.toString.call(h)===Function.prototype.toString.call(Object)},e=function(d){return i(d.valueOf)?d.valueOf():d},os.assign=r,os.isFunction=i,os.isObject=a,os.isArray=t,os.isEmpty=n,os.isPlainObject=s,os.getValue=e}).call(os)),os}var i0={exports:{}},a0={exports:{}},s0={exports:{}},o0={exports:{}},dP=o0.exports,Q3;function Ij(){return Q3||(Q3=1,(function(){o0.exports=(function(){function r(e,t,n){if(this.options=e.options,this.stringify=e.stringify,this.parent=e,t==null)throw new Error("Missing attribute name. "+this.debugInfo(t));if(n==null)throw new Error("Missing attribute value. "+this.debugInfo(t));this.name=this.stringify.attName(t),this.value=this.stringify.attValue(n)}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.set(e).attribute(this)},r.prototype.debugInfo=function(e){return e=e||this.name,e==null?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"},r})()}).call(dP)),o0.exports}var hP=s0.exports,Z3;function l1(){return Z3||(Z3=1,(function(){var r,e,t,n,i,a,s=function(u,d){for(var h in d)l.call(d,h)&&(u[h]=d[h]);function g(){this.constructor=u}return g.prototype=d.prototype,u.prototype=new g,u.__super__=d.prototype,u},l={}.hasOwnProperty;a=Vc(),i=a.isObject,n=a.isFunction,t=a.getValue,e=pi(),r=Ij(),s0.exports=(function(u){s(d,u);function d(h,g,b){if(d.__super__.constructor.call(this,h),g==null)throw new Error("Missing element name. "+this.debugInfo());this.name=this.stringify.eleName(g),this.attributes={},b!=null&&this.attribute(b),h.isDocument&&(this.isRoot=!0,this.documentObject=h,h.rootObject=this)}return d.prototype.clone=function(){var h,g,b,x;b=Object.create(this),b.isRoot&&(b.documentObject=null),b.attributes={},x=this.attributes;for(g in x)l.call(x,g)&&(h=x[g],b.attributes[g]=h.clone());return b.children=[],this.children.forEach(function(k){var v;return v=k.clone(),v.parent=b,b.children.push(v)}),b},d.prototype.attribute=function(h,g){var b,x;if(h!=null&&(h=t(h)),i(h))for(b in h)l.call(h,b)&&(x=h[b],this.attribute(b,x));else n(g)&&(g=g.apply()),(!this.options.skipNullAttributes||g!=null)&&(this.attributes[h]=new r(this,h,g));return this},d.prototype.removeAttribute=function(h){var g,b,x;if(h==null)throw new Error("Missing attribute name. "+this.debugInfo());if(h=t(h),Array.isArray(h))for(b=0,x=h.length;b<x;b++)g=h[b],delete this.attributes[g];else delete this.attributes[h];return this},d.prototype.toString=function(h){return this.options.writer.set(h).element(this)},d.prototype.att=function(h,g){return this.attribute(h,g)},d.prototype.a=function(h,g){return this.attribute(h,g)},d})(e)}).call(hP)),s0.exports}var l0={exports:{}},fP=l0.exports,J3;function c1(){return J3||(J3=1,(function(){var r,e=function(n,i){for(var a in i)t.call(i,a)&&(n[a]=i[a]);function s(){this.constructor=n}return s.prototype=i.prototype,n.prototype=new s,n.__super__=i.prototype,n},t={}.hasOwnProperty;r=pi(),l0.exports=(function(n){e(i,n);function i(a,s){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.text=this.stringify.cdata(s)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).cdata(this)},i})(r)}).call(fP)),l0.exports}var c0={exports:{}},pP=c0.exports,eU;function u1(){return eU||(eU=1,(function(){var r,e=function(n,i){for(var a in i)t.call(i,a)&&(n[a]=i[a]);function s(){this.constructor=n}return s.prototype=i.prototype,n.prototype=new s,n.__super__=i.prototype,n},t={}.hasOwnProperty;r=pi(),c0.exports=(function(n){e(i,n);function i(a,s){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing comment text. "+this.debugInfo());this.text=this.stringify.comment(s)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).comment(this)},i})(r)}).call(pP)),c0.exports}var u0={exports:{}},gP=u0.exports,tU;function d1(){return tU||(tU=1,(function(){var r,e,t=function(i,a){for(var s in a)n.call(a,s)&&(i[s]=a[s]);function l(){this.constructor=i}return l.prototype=a.prototype,i.prototype=new l,i.__super__=a.prototype,i},n={}.hasOwnProperty;e=Vc().isObject,r=pi(),u0.exports=(function(i){t(a,i);function a(s,l,u,d){var h;a.__super__.constructor.call(this,s),e(l)&&(h=l,l=h.version,u=h.encoding,d=h.standalone),l||(l="1.0"),this.version=this.stringify.xmlVersion(l),u!=null&&(this.encoding=this.stringify.xmlEncoding(u)),d!=null&&(this.standalone=this.stringify.xmlStandalone(d))}return a.prototype.toString=function(s){return this.options.writer.set(s).declaration(this)},a})(r)}).call(gP)),u0.exports}var d0={exports:{}},h0={exports:{}},mP=h0.exports,nU;function h1(){return nU||(nU=1,(function(){var r,e=function(n,i){for(var a in i)t.call(i,a)&&(n[a]=i[a]);function s(){this.constructor=n}return s.prototype=i.prototype,n.prototype=new s,n.__super__=i.prototype,n},t={}.hasOwnProperty;r=pi(),h0.exports=(function(n){e(i,n);function i(a,s,l,u,d,h){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(l==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(s));if(!u)throw new Error("Missing DTD attribute type. "+this.debugInfo(s));if(!d)throw new Error("Missing DTD attribute default. "+this.debugInfo(s));if(d.indexOf("#")!==0&&(d="#"+d),!d.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(s));if(h&&!d.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(s));this.elementName=this.stringify.eleName(s),this.attributeName=this.stringify.attName(l),this.attributeType=this.stringify.dtdAttType(u),this.defaultValue=this.stringify.dtdAttDefault(h),this.defaultValueType=d}return i.prototype.toString=function(a){return this.options.writer.set(a).dtdAttList(this)},i})(r)}).call(mP)),h0.exports}var f0={exports:{}},bP=f0.exports,rU;function f1(){return rU||(rU=1,(function(){var r,e,t=function(i,a){for(var s in a)n.call(a,s)&&(i[s]=a[s]);function l(){this.constructor=i}return l.prototype=a.prototype,i.prototype=new l,i.__super__=a.prototype,i},n={}.hasOwnProperty;e=Vc().isObject,r=pi(),f0.exports=(function(i){t(a,i);function a(s,l,u,d){if(a.__super__.constructor.call(this,s),u==null)throw new Error("Missing DTD entity name. "+this.debugInfo(u));if(d==null)throw new Error("Missing DTD entity value. "+this.debugInfo(u));if(this.pe=!!l,this.name=this.stringify.eleName(u),!e(d))this.value=this.stringify.dtdEntityValue(d);else{if(!d.pubID&&!d.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(u));if(d.pubID&&!d.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(u));if(d.pubID!=null&&(this.pubID=this.stringify.dtdPubID(d.pubID)),d.sysID!=null&&(this.sysID=this.stringify.dtdSysID(d.sysID)),d.nData!=null&&(this.nData=this.stringify.dtdNData(d.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(u))}}return a.prototype.toString=function(s){return this.options.writer.set(s).dtdEntity(this)},a})(r)}).call(bP)),f0.exports}var p0={exports:{}},xP=p0.exports,iU;function p1(){return iU||(iU=1,(function(){var r,e=function(n,i){for(var a in i)t.call(i,a)&&(n[a]=i[a]);function s(){this.constructor=n}return s.prototype=i.prototype,n.prototype=new s,n.__super__=i.prototype,n},t={}.hasOwnProperty;r=pi(),p0.exports=(function(n){e(i,n);function i(a,s,l){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing DTD element name. "+this.debugInfo());l||(l="(#PCDATA)"),Array.isArray(l)&&(l="("+l.join(",")+")"),this.name=this.stringify.eleName(s),this.value=this.stringify.dtdElementValue(l)}return i.prototype.toString=function(a){return this.options.writer.set(a).dtdElement(this)},i})(r)}).call(xP)),p0.exports}var g0={exports:{}},yP=g0.exports,aU;function g1(){return aU||(aU=1,(function(){var r,e=function(n,i){for(var a in i)t.call(i,a)&&(n[a]=i[a]);function s(){this.constructor=n}return s.prototype=i.prototype,n.prototype=new s,n.__super__=i.prototype,n},t={}.hasOwnProperty;r=pi(),g0.exports=(function(n){e(i,n);function i(a,s,l){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing DTD notation name. "+this.debugInfo(s));if(!l.pubID&&!l.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(s));this.name=this.stringify.eleName(s),l.pubID!=null&&(this.pubID=this.stringify.dtdPubID(l.pubID)),l.sysID!=null&&(this.sysID=this.stringify.dtdSysID(l.sysID))}return i.prototype.toString=function(a){return this.options.writer.set(a).dtdNotation(this)},i})(r)}).call(yP)),g0.exports}var vP=d0.exports,sU;function m1(){return sU||(sU=1,(function(){var r,e,t,n,i,a,s=function(u,d){for(var h in d)l.call(d,h)&&(u[h]=d[h]);function g(){this.constructor=u}return g.prototype=d.prototype,u.prototype=new g,u.__super__=d.prototype,u},l={}.hasOwnProperty;a=Vc().isObject,i=pi(),r=h1(),t=f1(),e=p1(),n=g1(),d0.exports=(function(u){s(d,u);function d(h,g,b){var x,k;d.__super__.constructor.call(this,h),this.name="!DOCTYPE",this.documentObject=h,a(g)&&(x=g,g=x.pubID,b=x.sysID),b==null&&(k=[g,b],b=k[0],g=k[1]),g!=null&&(this.pubID=this.stringify.dtdPubID(g)),b!=null&&(this.sysID=this.stringify.dtdSysID(b))}return d.prototype.element=function(h,g){var b;return b=new e(this,h,g),this.children.push(b),this},d.prototype.attList=function(h,g,b,x,k){var v;return v=new r(this,h,g,b,x,k),this.children.push(v),this},d.prototype.entity=function(h,g){var b;return b=new t(this,!1,h,g),this.children.push(b),this},d.prototype.pEntity=function(h,g){var b;return b=new t(this,!0,h,g),this.children.push(b),this},d.prototype.notation=function(h,g){var b;return b=new n(this,h,g),this.children.push(b),this},d.prototype.toString=function(h){return this.options.writer.set(h).docType(this)},d.prototype.ele=function(h,g){return this.element(h,g)},d.prototype.att=function(h,g,b,x,k){return this.attList(h,g,b,x,k)},d.prototype.ent=function(h,g){return this.entity(h,g)},d.prototype.pent=function(h,g){return this.pEntity(h,g)},d.prototype.not=function(h,g){return this.notation(h,g)},d.prototype.up=function(){return this.root()||this.documentObject},d})(i)}).call(vP)),d0.exports}var m0={exports:{}},wP=m0.exports,oU;function b1(){return oU||(oU=1,(function(){var r,e=function(n,i){for(var a in i)t.call(i,a)&&(n[a]=i[a]);function s(){this.constructor=n}return s.prototype=i.prototype,n.prototype=new s,n.__super__=i.prototype,n},t={}.hasOwnProperty;r=pi(),m0.exports=(function(n){e(i,n);function i(a,s){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing raw text. "+this.debugInfo());this.value=this.stringify.raw(s)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).raw(this)},i})(r)}).call(wP)),m0.exports}var b0={exports:{}},kP=b0.exports,lU;function x1(){return lU||(lU=1,(function(){var r,e=function(n,i){for(var a in i)t.call(i,a)&&(n[a]=i[a]);function s(){this.constructor=n}return s.prototype=i.prototype,n.prototype=new s,n.__super__=i.prototype,n},t={}.hasOwnProperty;r=pi(),b0.exports=(function(n){e(i,n);function i(a,s){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing element text. "+this.debugInfo());this.value=this.stringify.eleText(s)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).text(this)},i})(r)}).call(kP)),b0.exports}var x0={exports:{}},DP=x0.exports,cU;function y1(){return cU||(cU=1,(function(){var r,e=function(n,i){for(var a in i)t.call(i,a)&&(n[a]=i[a]);function s(){this.constructor=n}return s.prototype=i.prototype,n.prototype=new s,n.__super__=i.prototype,n},t={}.hasOwnProperty;r=pi(),x0.exports=(function(n){e(i,n);function i(a,s,l){if(i.__super__.constructor.call(this,a),s==null)throw new Error("Missing instruction target. "+this.debugInfo());this.target=this.stringify.insTarget(s),l&&(this.value=this.stringify.insValue(l))}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return this.options.writer.set(a).processingInstruction(this)},i})(r)}).call(DP)),x0.exports}var y0={exports:{}},_P=y0.exports,uU;function cS(){return uU||(uU=1,(function(){var r,e=function(n,i){for(var a in i)t.call(i,a)&&(n[a]=i[a]);function s(){this.constructor=n}return s.prototype=i.prototype,n.prototype=new s,n.__super__=i.prototype,n},t={}.hasOwnProperty;r=pi(),y0.exports=(function(n){e(i,n);function i(a){i.__super__.constructor.call(this,a),this.isDummy=!0}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(a){return""},i})(r)}).call(_P)),y0.exports}var AP=a0.exports,dU;function pi(){return dU||(dU=1,(function(){var r,e,t,n,i,a,s,l,u,d,h,g,b,x,k={}.hasOwnProperty;x=Vc(),b=x.isObject,g=x.isFunction,h=x.isEmpty,d=x.getValue,a=null,r=null,e=null,t=null,n=null,l=null,u=null,s=null,i=null,a0.exports=(function(){function v(w){this.parent=w,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.children=[],a||(a=l1(),r=c1(),e=u1(),t=d1(),n=m1(),l=b1(),u=x1(),s=y1(),i=cS())}return v.prototype.element=function(w,D,_){var A,N,E,C,j,M,O,F,G,R,W;if(M=null,D===null&&_==null&&(G=[{},null],D=G[0],_=G[1]),D==null&&(D={}),D=d(D),b(D)||(R=[D,_],_=R[0],D=R[1]),w!=null&&(w=d(w)),Array.isArray(w))for(E=0,O=w.length;E<O;E++)N=w[E],M=this.element(N);else if(g(w))M=this.element(w.apply());else if(b(w)){for(j in w)if(k.call(w,j))if(W=w[j],g(W)&&(W=W.apply()),b(W)&&h(W)&&(W=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&j.indexOf(this.stringify.convertAttKey)===0)M=this.attribute(j.substr(this.stringify.convertAttKey.length),W);else if(!this.options.separateArrayItems&&Array.isArray(W))for(C=0,F=W.length;C<F;C++)N=W[C],A={},A[j]=N,M=this.element(A);else b(W)?(M=this.element(j),M.element(W)):M=this.element(j,W)}else this.options.skipNullNodes&&_===null?M=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&w.indexOf(this.stringify.convertTextKey)===0?M=this.text(_):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&w.indexOf(this.stringify.convertCDataKey)===0?M=this.cdata(_):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&w.indexOf(this.stringify.convertCommentKey)===0?M=this.comment(_):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&w.indexOf(this.stringify.convertRawKey)===0?M=this.raw(_):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&w.indexOf(this.stringify.convertPIKey)===0?M=this.instruction(w.substr(this.stringify.convertPIKey.length),_):M=this.node(w,D,_);if(M==null)throw new Error("Could not create any elements with: "+w+". "+this.debugInfo());return M},v.prototype.insertBefore=function(w,D,_){var A,N,E;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(w));return N=this.parent.children.indexOf(this),E=this.parent.children.splice(N),A=this.parent.element(w,D,_),Array.prototype.push.apply(this.parent.children,E),A},v.prototype.insertAfter=function(w,D,_){var A,N,E;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(w));return N=this.parent.children.indexOf(this),E=this.parent.children.splice(N+1),A=this.parent.element(w,D,_),Array.prototype.push.apply(this.parent.children,E),A},v.prototype.remove=function(){var w;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return w=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[w,w-w+1].concat([])),this.parent},v.prototype.node=function(w,D,_){var A,N;return w!=null&&(w=d(w)),D||(D={}),D=d(D),b(D)||(N=[D,_],_=N[0],D=N[1]),A=new a(this,w,D),_!=null&&A.text(_),this.children.push(A),A},v.prototype.text=function(w){var D;return D=new u(this,w),this.children.push(D),this},v.prototype.cdata=function(w){var D;return D=new r(this,w),this.children.push(D),this},v.prototype.comment=function(w){var D;return D=new e(this,w),this.children.push(D),this},v.prototype.commentBefore=function(w){var D,_;return D=this.parent.children.indexOf(this),_=this.parent.children.splice(D),this.parent.comment(w),Array.prototype.push.apply(this.parent.children,_),this},v.prototype.commentAfter=function(w){var D,_;return D=this.parent.children.indexOf(this),_=this.parent.children.splice(D+1),this.parent.comment(w),Array.prototype.push.apply(this.parent.children,_),this},v.prototype.raw=function(w){var D;return D=new l(this,w),this.children.push(D),this},v.prototype.dummy=function(){var w;return w=new i(this),this.children.push(w),w},v.prototype.instruction=function(w,D){var _,A,N,E,C;if(w!=null&&(w=d(w)),D!=null&&(D=d(D)),Array.isArray(w))for(E=0,C=w.length;E<C;E++)_=w[E],this.instruction(_);else if(b(w))for(_ in w)k.call(w,_)&&(A=w[_],this.instruction(_,A));else g(D)&&(D=D.apply()),N=new s(this,w,D),this.children.push(N);return this},v.prototype.instructionBefore=function(w,D){var _,A;return _=this.parent.children.indexOf(this),A=this.parent.children.splice(_),this.parent.instruction(w,D),Array.prototype.push.apply(this.parent.children,A),this},v.prototype.instructionAfter=function(w,D){var _,A;return _=this.parent.children.indexOf(this),A=this.parent.children.splice(_+1),this.parent.instruction(w,D),Array.prototype.push.apply(this.parent.children,A),this},v.prototype.declaration=function(w,D,_){var A,N;return A=this.document(),N=new t(A,w,D,_),A.children[0]instanceof t?A.children[0]=N:A.children.unshift(N),A.root()||A},v.prototype.doctype=function(w,D){var _,A,N,E,C,j,M,O,F,G;for(A=this.document(),N=new n(A,w,D),F=A.children,E=C=0,M=F.length;C<M;E=++C)if(_=F[E],_ instanceof n)return A.children[E]=N,N;for(G=A.children,E=j=0,O=G.length;j<O;E=++j)if(_=G[E],_.isRoot)return A.children.splice(E,0,N),N;return A.children.push(N),N},v.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},v.prototype.root=function(){var w;for(w=this;w;){if(w.isDocument)return w.rootObject;if(w.isRoot)return w;w=w.parent}},v.prototype.document=function(){var w;for(w=this;w;){if(w.isDocument)return w;w=w.parent}},v.prototype.end=function(w){return this.document().end(w)},v.prototype.prev=function(){var w;for(w=this.parent.children.indexOf(this);w>0&&this.parent.children[w-1].isDummy;)w=w-1;if(w<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[w-1]},v.prototype.next=function(){var w;for(w=this.parent.children.indexOf(this);w<this.parent.children.length-1&&this.parent.children[w+1].isDummy;)w=w+1;if(w===-1||w===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[w+1]},v.prototype.importDocument=function(w){var D;return D=w.root().clone(),D.parent=this,D.isRoot=!1,this.children.push(D),this},v.prototype.debugInfo=function(w){var D,_;return w=w||this.name,w==null&&!((D=this.parent)!=null&&D.name)?"":w==null?"parent: <"+this.parent.name+">":(_=this.parent)!=null&&_.name?"node: <"+w+">, parent: <"+this.parent.name+">":"node: <"+w+">"},v.prototype.ele=function(w,D,_){return this.element(w,D,_)},v.prototype.nod=function(w,D,_){return this.node(w,D,_)},v.prototype.txt=function(w){return this.text(w)},v.prototype.dat=function(w){return this.cdata(w)},v.prototype.com=function(w){return this.comment(w)},v.prototype.ins=function(w,D){return this.instruction(w,D)},v.prototype.doc=function(){return this.document()},v.prototype.dec=function(w,D,_){return this.declaration(w,D,_)},v.prototype.dtd=function(w,D){return this.doctype(w,D)},v.prototype.e=function(w,D,_){return this.element(w,D,_)},v.prototype.n=function(w,D,_){return this.node(w,D,_)},v.prototype.t=function(w){return this.text(w)},v.prototype.d=function(w){return this.cdata(w)},v.prototype.c=function(w){return this.comment(w)},v.prototype.r=function(w){return this.raw(w)},v.prototype.i=function(w,D){return this.instruction(w,D)},v.prototype.u=function(){return this.up()},v.prototype.importXMLBuilder=function(w){return this.importDocument(w)},v})()}).call(AP)),a0.exports}var v0={exports:{}},SP=v0.exports,hU;function Oj(){return hU||(hU=1,(function(){var r=function(t,n){return function(){return t.apply(n,arguments)}},e={}.hasOwnProperty;v0.exports=(function(){function t(n){this.assertLegalChar=r(this.assertLegalChar,this);var i,a,s;n||(n={}),this.noDoubleEncoding=n.noDoubleEncoding,a=n.stringify||{};for(i in a)e.call(a,i)&&(s=a[i],this[i]=s)}return t.prototype.eleName=function(n){return n=""+n||"",this.assertLegalChar(n)},t.prototype.eleText=function(n){return n=""+n||"",this.assertLegalChar(this.elEscape(n))},t.prototype.cdata=function(n){return n=""+n||"",n=n.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(n)},t.prototype.comment=function(n){if(n=""+n||"",n.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+n);return this.assertLegalChar(n)},t.prototype.raw=function(n){return""+n||""},t.prototype.attName=function(n){return n=""+n||""},t.prototype.attValue=function(n){return n=""+n||"",this.attEscape(n)},t.prototype.insTarget=function(n){return""+n||""},t.prototype.insValue=function(n){if(n=""+n||"",n.match(/\?>/))throw new Error("Invalid processing instruction value: "+n);return n},t.prototype.xmlVersion=function(n){if(n=""+n||"",!n.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+n);return n},t.prototype.xmlEncoding=function(n){if(n=""+n||"",!n.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+n);return n},t.prototype.xmlStandalone=function(n){return n?"yes":"no"},t.prototype.dtdPubID=function(n){return""+n||""},t.prototype.dtdSysID=function(n){return""+n||""},t.prototype.dtdElementValue=function(n){return""+n||""},t.prototype.dtdAttType=function(n){return""+n||""},t.prototype.dtdAttDefault=function(n){return n!=null?""+n||"":n},t.prototype.dtdEntityValue=function(n){return""+n||""},t.prototype.dtdNData=function(n){return""+n||""},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.assertLegalChar=function(n){var i;if(i=n.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/),i)throw new Error("Invalid character in string: "+n+" at index "+i.index);return n},t.prototype.elEscape=function(n){var i;return i=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,n.replace(i,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},t.prototype.attEscape=function(n){var i;return i=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,n.replace(i,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},t})()}).call(SP)),v0.exports}var w0={exports:{}},k0={exports:{}},EP=k0.exports,fU;function Mj(){return fU||(fU=1,(function(){var r={}.hasOwnProperty;k0.exports=(function(){function e(t){var n,i,a,s,l,u,d,h,g;t||(t={}),this.pretty=t.pretty||!1,this.allowEmpty=(i=t.allowEmpty)!=null?i:!1,this.pretty?(this.indent=(a=t.indent)!=null?a:"  ",this.newline=(s=t.newline)!=null?s:`
`,this.offset=(l=t.offset)!=null?l:0,this.dontprettytextnodes=(u=t.dontprettytextnodes)!=null?u:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash=(d=t.spacebeforeslash)!=null?d:"",this.spacebeforeslash===!0&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,h=t.writer||{};for(n in h)r.call(h,n)&&(g=h[n],this[n]=g)}return e.prototype.set=function(t){var n,i,a;t||(t={}),"pretty"in t&&(this.pretty=t.pretty),"allowEmpty"in t&&(this.allowEmpty=t.allowEmpty),this.pretty?(this.indent="indent"in t?t.indent:"  ",this.newline="newline"in t?t.newline:`
`,this.offset="offset"in t?t.offset:0,this.dontprettytextnodes="dontprettytextnodes"in t?t.dontprettytextnodes:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash="spacebeforeslash"in t?t.spacebeforeslash:"",this.spacebeforeslash===!0&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,i=t.writer||{};for(n in i)r.call(i,n)&&(a=i[n],this[n]=a);return this},e.prototype.space=function(t){var n;return this.pretty?(n=(t||0)+this.offset+1,n>0?new Array(n).join(this.indent):""):""},e})()}).call(EP)),k0.exports}var TP=w0.exports,pU;function uS(){return pU||(pU=1,(function(){var r,e,t,n,i,a,s,l,u,d,h,g,b,x,k=function(w,D){for(var _ in D)v.call(D,_)&&(w[_]=D[_]);function A(){this.constructor=w}return A.prototype=D.prototype,w.prototype=new A,w.__super__=D.prototype,w},v={}.hasOwnProperty;s=d1(),l=m1(),r=c1(),e=u1(),d=l1(),g=b1(),b=x1(),h=y1(),u=cS(),t=h1(),n=p1(),i=f1(),a=g1(),x=Mj(),w0.exports=(function(w){k(D,w);function D(_){D.__super__.constructor.call(this,_)}return D.prototype.document=function(_){var A,N,E,C,j;for(this.textispresent=!1,C="",j=_.children,N=0,E=j.length;N<E;N++)A=j[N],!(A instanceof u)&&(C+=(function(){switch(!1){case!(A instanceof s):return this.declaration(A);case!(A instanceof l):return this.docType(A);case!(A instanceof e):return this.comment(A);case!(A instanceof h):return this.processingInstruction(A);default:return this.element(A,0)}}).call(this));return this.pretty&&C.slice(-this.newline.length)===this.newline&&(C=C.slice(0,-this.newline.length)),C},D.prototype.attribute=function(_){return" "+_.name+'="'+_.value+'"'},D.prototype.cdata=function(_,A){return this.space(A)+"<![CDATA["+_.text+"]]>"+this.newline},D.prototype.comment=function(_,A){return this.space(A)+"<!-- "+_.text+" -->"+this.newline},D.prototype.declaration=function(_,A){var N;return N=this.space(A),N+='<?xml version="'+_.version+'"',_.encoding!=null&&(N+=' encoding="'+_.encoding+'"'),_.standalone!=null&&(N+=' standalone="'+_.standalone+'"'),N+=this.spacebeforeslash+"?>",N+=this.newline,N},D.prototype.docType=function(_,A){var N,E,C,j,M;if(A||(A=0),j=this.space(A),j+="<!DOCTYPE "+_.root().name,_.pubID&&_.sysID?j+=' PUBLIC "'+_.pubID+'" "'+_.sysID+'"':_.sysID&&(j+=' SYSTEM "'+_.sysID+'"'),_.children.length>0){for(j+=" [",j+=this.newline,M=_.children,E=0,C=M.length;E<C;E++)N=M[E],j+=(function(){switch(!1){case!(N instanceof t):return this.dtdAttList(N,A+1);case!(N instanceof n):return this.dtdElement(N,A+1);case!(N instanceof i):return this.dtdEntity(N,A+1);case!(N instanceof a):return this.dtdNotation(N,A+1);case!(N instanceof r):return this.cdata(N,A+1);case!(N instanceof e):return this.comment(N,A+1);case!(N instanceof h):return this.processingInstruction(N,A+1);default:throw new Error("Unknown DTD node type: "+N.constructor.name)}}).call(this);j+="]"}return j+=this.spacebeforeslash+">",j+=this.newline,j},D.prototype.element=function(_,A){var N,E,C,j,M,O,F,G,R,W,U,X,P;A||(A=0),P=!1,this.textispresent?(this.newline="",this.pretty=!1):(this.newline=this.newlinedefault,this.pretty=this.prettydefault),X=this.space(A),G="",G+=X+"<"+_.name,R=_.attributes;for(F in R)v.call(R,F)&&(N=R[F],G+=this.attribute(N));if(_.children.length===0||_.children.every(function(B){return B.value===""}))this.allowEmpty?G+="></"+_.name+">"+this.newline:G+=this.spacebeforeslash+"/>"+this.newline;else if(this.pretty&&_.children.length===1&&_.children[0].value!=null)G+=">",G+=_.children[0].value,G+="</"+_.name+">"+this.newline;else{if(this.dontprettytextnodes){for(W=_.children,C=0,M=W.length;C<M;C++)if(E=W[C],E.value!=null){this.textispresent++,P=!0;break}}for(this.textispresent&&(this.newline="",this.pretty=!1,X=this.space(A)),G+=">"+this.newline,U=_.children,j=0,O=U.length;j<O;j++)E=U[j],G+=(function(){switch(!1){case!(E instanceof r):return this.cdata(E,A+1);case!(E instanceof e):return this.comment(E,A+1);case!(E instanceof d):return this.element(E,A+1);case!(E instanceof g):return this.raw(E,A+1);case!(E instanceof b):return this.text(E,A+1);case!(E instanceof h):return this.processingInstruction(E,A+1);case!(E instanceof u):return"";default:throw new Error("Unknown XML node type: "+E.constructor.name)}}).call(this);P&&this.textispresent--,this.textispresent||(this.newline=this.newlinedefault,this.pretty=this.prettydefault),G+=X+"</"+_.name+">"+this.newline}return G},D.prototype.processingInstruction=function(_,A){var N;return N=this.space(A)+"<?"+_.target,_.value&&(N+=" "+_.value),N+=this.spacebeforeslash+"?>"+this.newline,N},D.prototype.raw=function(_,A){return this.space(A)+_.value+this.newline},D.prototype.text=function(_,A){return this.space(A)+_.value+this.newline},D.prototype.dtdAttList=function(_,A){var N;return N=this.space(A)+"<!ATTLIST "+_.elementName+" "+_.attributeName+" "+_.attributeType,_.defaultValueType!=="#DEFAULT"&&(N+=" "+_.defaultValueType),_.defaultValue&&(N+=' "'+_.defaultValue+'"'),N+=this.spacebeforeslash+">"+this.newline,N},D.prototype.dtdElement=function(_,A){return this.space(A)+"<!ELEMENT "+_.name+" "+_.value+this.spacebeforeslash+">"+this.newline},D.prototype.dtdEntity=function(_,A){var N;return N=this.space(A)+"<!ENTITY",_.pe&&(N+=" %"),N+=" "+_.name,_.value?N+=' "'+_.value+'"':(_.pubID&&_.sysID?N+=' PUBLIC "'+_.pubID+'" "'+_.sysID+'"':_.sysID&&(N+=' SYSTEM "'+_.sysID+'"'),_.nData&&(N+=" NDATA "+_.nData)),N+=this.spacebeforeslash+">"+this.newline,N},D.prototype.dtdNotation=function(_,A){var N;return N=this.space(A)+"<!NOTATION "+_.name,_.pubID&&_.sysID?N+=' PUBLIC "'+_.pubID+'" "'+_.sysID+'"':_.pubID?N+=' PUBLIC "'+_.pubID+'"':_.sysID&&(N+=' SYSTEM "'+_.sysID+'"'),N+=this.spacebeforeslash+">"+this.newline,N},D.prototype.openNode=function(_,A){var N,E,C,j;if(A||(A=0),_ instanceof d){C=this.space(A)+"<"+_.name,j=_.attributes;for(E in j)v.call(j,E)&&(N=j[E],C+=this.attribute(N));return C+=(_.children?">":"/>")+this.newline,C}else return C=this.space(A)+"<!DOCTYPE "+_.rootNodeName,_.pubID&&_.sysID?C+=' PUBLIC "'+_.pubID+'" "'+_.sysID+'"':_.sysID&&(C+=' SYSTEM "'+_.sysID+'"'),C+=(_.children?" [":">")+this.newline,C},D.prototype.closeNode=function(_,A){switch(A||(A=0),!1){case!(_ instanceof d):return this.space(A)+"</"+_.name+">"+this.newline;case!(_ instanceof l):return this.space(A)+"]>"+this.newline}},D})(x)}).call(TP)),w0.exports}var CP=i0.exports,gU;function NP(){return gU||(gU=1,(function(){var r,e,t,n,i=function(s,l){for(var u in l)a.call(l,u)&&(s[u]=l[u]);function d(){this.constructor=s}return d.prototype=l.prototype,s.prototype=new d,s.__super__=l.prototype,s},a={}.hasOwnProperty;n=Vc().isPlainObject,r=pi(),t=Oj(),e=uS(),i0.exports=(function(s){i(l,s);function l(u){l.__super__.constructor.call(this,null),this.name="?xml",u||(u={}),u.writer||(u.writer=new e),this.options=u,this.stringify=new t(u),this.isDocument=!0}return l.prototype.end=function(u){var d;return u?n(u)&&(d=u,u=this.options.writer.set(d)):u=this.options.writer,u.document(this)},l.prototype.toString=function(u){return this.options.writer.set(u).document(this)},l})(r)}).call(CP)),i0.exports}var D0={exports:{}},UP=D0.exports,mU;function RP(){return mU||(mU=1,(function(){var r,e,t,n,i,a,s,l,u,d,h,g,b,x,k,v,w,D,_,A,N={}.hasOwnProperty;A=Vc(),D=A.isObject,w=A.isFunction,_=A.isPlainObject,v=A.getValue,d=l1(),e=c1(),t=u1(),g=b1(),k=x1(),h=y1(),l=d1(),u=m1(),n=h1(),a=f1(),i=p1(),s=g1(),r=Ij(),x=Oj(),b=uS(),D0.exports=(function(){function E(C,j,M){var O;this.name="?xml",C||(C={}),C.writer?_(C.writer)&&(O=C.writer,C.writer=new b(O)):C.writer=new b(C),this.options=C,this.writer=C.writer,this.stringify=new x(C),this.onDataCallback=j||function(){},this.onEndCallback=M||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return E.prototype.node=function(C,j,M){var O,F;if(C==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(C));return this.openCurrent(),C=v(C),j===null&&M==null&&(O=[{},null],j=O[0],M=O[1]),j==null&&(j={}),j=v(j),D(j)||(F=[j,M],M=F[0],j=F[1]),this.currentNode=new d(this,C,j),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,M!=null&&this.text(M),this},E.prototype.element=function(C,j,M){return this.currentNode&&this.currentNode instanceof u?this.dtdElement.apply(this,arguments):this.node(C,j,M)},E.prototype.attribute=function(C,j){var M,O;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(C));if(C!=null&&(C=v(C)),D(C))for(M in C)N.call(C,M)&&(O=C[M],this.attribute(M,O));else w(j)&&(j=j.apply()),(!this.options.skipNullAttributes||j!=null)&&(this.currentNode.attributes[C]=new r(this,C,j));return this},E.prototype.text=function(C){var j;return this.openCurrent(),j=new k(this,C),this.onData(this.writer.text(j,this.currentLevel+1),this.currentLevel+1),this},E.prototype.cdata=function(C){var j;return this.openCurrent(),j=new e(this,C),this.onData(this.writer.cdata(j,this.currentLevel+1),this.currentLevel+1),this},E.prototype.comment=function(C){var j;return this.openCurrent(),j=new t(this,C),this.onData(this.writer.comment(j,this.currentLevel+1),this.currentLevel+1),this},E.prototype.raw=function(C){var j;return this.openCurrent(),j=new g(this,C),this.onData(this.writer.raw(j,this.currentLevel+1),this.currentLevel+1),this},E.prototype.instruction=function(C,j){var M,O,F,G,R;if(this.openCurrent(),C!=null&&(C=v(C)),j!=null&&(j=v(j)),Array.isArray(C))for(M=0,G=C.length;M<G;M++)O=C[M],this.instruction(O);else if(D(C))for(O in C)N.call(C,O)&&(F=C[O],this.instruction(O,F));else w(j)&&(j=j.apply()),R=new h(this,C,j),this.onData(this.writer.processingInstruction(R,this.currentLevel+1),this.currentLevel+1);return this},E.prototype.declaration=function(C,j,M){var O;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return O=new l(this,C,j,M),this.onData(this.writer.declaration(O,this.currentLevel+1),this.currentLevel+1),this},E.prototype.doctype=function(C,j,M){if(this.openCurrent(),C==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new u(this,j,M),this.currentNode.rootNodeName=C,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},E.prototype.dtdElement=function(C,j){var M;return this.openCurrent(),M=new i(this,C,j),this.onData(this.writer.dtdElement(M,this.currentLevel+1),this.currentLevel+1),this},E.prototype.attList=function(C,j,M,O,F){var G;return this.openCurrent(),G=new n(this,C,j,M,O,F),this.onData(this.writer.dtdAttList(G,this.currentLevel+1),this.currentLevel+1),this},E.prototype.entity=function(C,j){var M;return this.openCurrent(),M=new a(this,!1,C,j),this.onData(this.writer.dtdEntity(M,this.currentLevel+1),this.currentLevel+1),this},E.prototype.pEntity=function(C,j){var M;return this.openCurrent(),M=new a(this,!0,C,j),this.onData(this.writer.dtdEntity(M,this.currentLevel+1),this.currentLevel+1),this},E.prototype.notation=function(C,j){var M;return this.openCurrent(),M=new s(this,C,j),this.onData(this.writer.dtdNotation(M,this.currentLevel+1),this.currentLevel+1),this},E.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},E.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},E.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},E.prototype.openNode=function(C){if(!C.isOpen)return!this.root&&this.currentLevel===0&&C instanceof d&&(this.root=C),this.onData(this.writer.openNode(C,this.currentLevel),this.currentLevel),C.isOpen=!0},E.prototype.closeNode=function(C){if(!C.isClosed)return this.onData(this.writer.closeNode(C,this.currentLevel),this.currentLevel),C.isClosed=!0},E.prototype.onData=function(C,j){return this.documentStarted=!0,this.onDataCallback(C,j+1)},E.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},E.prototype.debugInfo=function(C){return C==null?"":"node: <"+C+">"},E.prototype.ele=function(){return this.element.apply(this,arguments)},E.prototype.nod=function(C,j,M){return this.node(C,j,M)},E.prototype.txt=function(C){return this.text(C)},E.prototype.dat=function(C){return this.cdata(C)},E.prototype.com=function(C){return this.comment(C)},E.prototype.ins=function(C,j){return this.instruction(C,j)},E.prototype.dec=function(C,j,M){return this.declaration(C,j,M)},E.prototype.dtd=function(C,j,M){return this.doctype(C,j,M)},E.prototype.e=function(C,j,M){return this.element(C,j,M)},E.prototype.n=function(C,j,M){return this.node(C,j,M)},E.prototype.t=function(C){return this.text(C)},E.prototype.d=function(C){return this.cdata(C)},E.prototype.c=function(C){return this.comment(C)},E.prototype.r=function(C){return this.raw(C)},E.prototype.i=function(C,j){return this.instruction(C,j)},E.prototype.att=function(){return this.currentNode&&this.currentNode instanceof u?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},E.prototype.a=function(){return this.currentNode&&this.currentNode instanceof u?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},E.prototype.ent=function(C,j){return this.entity(C,j)},E.prototype.pent=function(C,j){return this.pEntity(C,j)},E.prototype.not=function(C,j){return this.notation(C,j)},E})()}).call(UP)),D0.exports}var _0={exports:{}},jP=_0.exports,bU;function FP(){return bU||(bU=1,(function(){var r,e,t,n,i,a,s,l,u,d,h,g,b,x,k=function(w,D){for(var _ in D)v.call(D,_)&&(w[_]=D[_]);function A(){this.constructor=w}return A.prototype=D.prototype,w.prototype=new A,w.__super__=D.prototype,w},v={}.hasOwnProperty;s=d1(),l=m1(),r=c1(),e=u1(),d=l1(),g=b1(),b=x1(),h=y1(),u=cS(),t=h1(),n=p1(),i=f1(),a=g1(),x=Mj(),_0.exports=(function(w){k(D,w);function D(_,A){D.__super__.constructor.call(this,A),this.stream=_}return D.prototype.document=function(_){var A,N,E,C,j,M,O,F;for(M=_.children,N=0,C=M.length;N<C;N++)A=M[N],A.isLastRootNode=!1;for(_.children[_.children.length-1].isLastRootNode=!0,O=_.children,F=[],E=0,j=O.length;E<j;E++)if(A=O[E],!(A instanceof u))switch(!1){case!(A instanceof s):F.push(this.declaration(A));break;case!(A instanceof l):F.push(this.docType(A));break;case!(A instanceof e):F.push(this.comment(A));break;case!(A instanceof h):F.push(this.processingInstruction(A));break;default:F.push(this.element(A))}return F},D.prototype.attribute=function(_){return this.stream.write(" "+_.name+'="'+_.value+'"')},D.prototype.cdata=function(_,A){return this.stream.write(this.space(A)+"<![CDATA["+_.text+"]]>"+this.endline(_))},D.prototype.comment=function(_,A){return this.stream.write(this.space(A)+"<!-- "+_.text+" -->"+this.endline(_))},D.prototype.declaration=function(_,A){return this.stream.write(this.space(A)),this.stream.write('<?xml version="'+_.version+'"'),_.encoding!=null&&this.stream.write(' encoding="'+_.encoding+'"'),_.standalone!=null&&this.stream.write(' standalone="'+_.standalone+'"'),this.stream.write(this.spacebeforeslash+"?>"),this.stream.write(this.endline(_))},D.prototype.docType=function(_,A){var N,E,C,j;if(A||(A=0),this.stream.write(this.space(A)),this.stream.write("<!DOCTYPE "+_.root().name),_.pubID&&_.sysID?this.stream.write(' PUBLIC "'+_.pubID+'" "'+_.sysID+'"'):_.sysID&&this.stream.write(' SYSTEM "'+_.sysID+'"'),_.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(_)),j=_.children,E=0,C=j.length;E<C;E++)switch(N=j[E],!1){case!(N instanceof t):this.dtdAttList(N,A+1);break;case!(N instanceof n):this.dtdElement(N,A+1);break;case!(N instanceof i):this.dtdEntity(N,A+1);break;case!(N instanceof a):this.dtdNotation(N,A+1);break;case!(N instanceof r):this.cdata(N,A+1);break;case!(N instanceof e):this.comment(N,A+1);break;case!(N instanceof h):this.processingInstruction(N,A+1);break;default:throw new Error("Unknown DTD node type: "+N.constructor.name)}this.stream.write("]")}return this.stream.write(this.spacebeforeslash+">"),this.stream.write(this.endline(_))},D.prototype.element=function(_,A){var N,E,C,j,M,O,F,G;A||(A=0),G=this.space(A),this.stream.write(G+"<"+_.name),O=_.attributes;for(M in O)v.call(O,M)&&(N=O[M],this.attribute(N));if(_.children.length===0||_.children.every(function(R){return R.value===""}))this.allowEmpty?this.stream.write("></"+_.name+">"):this.stream.write(this.spacebeforeslash+"/>");else if(this.pretty&&_.children.length===1&&_.children[0].value!=null)this.stream.write(">"),this.stream.write(_.children[0].value),this.stream.write("</"+_.name+">");else{for(this.stream.write(">"+this.newline),F=_.children,C=0,j=F.length;C<j;C++)switch(E=F[C],!1){case!(E instanceof r):this.cdata(E,A+1);break;case!(E instanceof e):this.comment(E,A+1);break;case!(E instanceof d):this.element(E,A+1);break;case!(E instanceof g):this.raw(E,A+1);break;case!(E instanceof b):this.text(E,A+1);break;case!(E instanceof h):this.processingInstruction(E,A+1);break;case!(E instanceof u):break;default:throw new Error("Unknown XML node type: "+E.constructor.name)}this.stream.write(G+"</"+_.name+">")}return this.stream.write(this.endline(_))},D.prototype.processingInstruction=function(_,A){return this.stream.write(this.space(A)+"<?"+_.target),_.value&&this.stream.write(" "+_.value),this.stream.write(this.spacebeforeslash+"?>"+this.endline(_))},D.prototype.raw=function(_,A){return this.stream.write(this.space(A)+_.value+this.endline(_))},D.prototype.text=function(_,A){return this.stream.write(this.space(A)+_.value+this.endline(_))},D.prototype.dtdAttList=function(_,A){return this.stream.write(this.space(A)+"<!ATTLIST "+_.elementName+" "+_.attributeName+" "+_.attributeType),_.defaultValueType!=="#DEFAULT"&&this.stream.write(" "+_.defaultValueType),_.defaultValue&&this.stream.write(' "'+_.defaultValue+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(_))},D.prototype.dtdElement=function(_,A){return this.stream.write(this.space(A)+"<!ELEMENT "+_.name+" "+_.value),this.stream.write(this.spacebeforeslash+">"+this.endline(_))},D.prototype.dtdEntity=function(_,A){return this.stream.write(this.space(A)+"<!ENTITY"),_.pe&&this.stream.write(" %"),this.stream.write(" "+_.name),_.value?this.stream.write(' "'+_.value+'"'):(_.pubID&&_.sysID?this.stream.write(' PUBLIC "'+_.pubID+'" "'+_.sysID+'"'):_.sysID&&this.stream.write(' SYSTEM "'+_.sysID+'"'),_.nData&&this.stream.write(" NDATA "+_.nData)),this.stream.write(this.spacebeforeslash+">"+this.endline(_))},D.prototype.dtdNotation=function(_,A){return this.stream.write(this.space(A)+"<!NOTATION "+_.name),_.pubID&&_.sysID?this.stream.write(' PUBLIC "'+_.pubID+'" "'+_.sysID+'"'):_.pubID?this.stream.write(' PUBLIC "'+_.pubID+'"'):_.sysID&&this.stream.write(' SYSTEM "'+_.sysID+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(_))},D.prototype.endline=function(_){return _.isLastRootNode?"":this.newline},D})(x)}).call(jP)),_0.exports}var xU;function IP(){return xU||(xU=1,(function(){var r,e,t,n,i,a,s;s=Vc(),i=s.assign,a=s.isFunction,r=NP(),e=RP(),n=uS(),t=FP(),du.create=function(l,u,d,h){var g,b;if(l==null)throw new Error("Root element needs a name.");return h=i({},u,d,h),g=new r(h),b=g.element(l),h.headless||(g.declaration(h),(h.pubID!=null||h.sysID!=null)&&g.doctype(h)),b},du.begin=function(l,u,d){var h;return a(l)&&(h=[l,u],u=h[0],d=h[1],l={}),u?new e(l,u,d):new r(l)},du.stringWriter=function(l){return new n(l)},du.streamWriter=function(l,u){return new t(l,u)}}).call(du)),du}var yU;function OP(){if(yU)return Nk;yU=1;var r=Nn,e=IP();Nk.writeString=t;function t(i,a){var s=r.invert(a),l={element:d,text:n};function u(b,x){return l[x.type](b,x)}function d(b,x){var k=b.element(h(x.name),x.attributes);x.children.forEach(function(v){u(k,v)})}function h(b){var x=/^\{(.*)\}(.*)$/.exec(b);if(x){var k=s[x[1]];return k+(k===""?"":":")+x[2]}else return b}function g(b){var x=e.create(h(b.name),{version:"1.0",encoding:"UTF-8",standalone:!0});return r.forEach(a,function(k,v){var w="xmlns"+(v===""?"":":"+v);x.attribute(w,k)}),b.children.forEach(function(k){u(x,k)}),x.end()}return g(i)}function n(i,a){i.text(a.value)}return Nk}var vU;function dS(){if(vU)return Nl;vU=1;var r=Fj();return Nl.Element=r.Element,Nl.element=r.element,Nl.emptyElement=r.emptyElement,Nl.text=r.text,Nl.readString=uP().readString,Nl.writeString=OP().writeString,Nl}var wU;function MP(){if(wU)return Iy;wU=1;var r=Nn,e=qc(),t=dS();Iy.read=i,Iy.readXmlFromZipFile=a;var n={"http://schemas.openxmlformats.org/wordprocessingml/2006/main":"w","http://schemas.openxmlformats.org/officeDocument/2006/relationships":"r","http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing":"wp","http://schemas.openxmlformats.org/drawingml/2006/main":"a","http://schemas.openxmlformats.org/drawingml/2006/picture":"pic","http://purl.oclc.org/ooxml/wordprocessingml/main":"w","http://purl.oclc.org/ooxml/officeDocument/relationships":"r","http://purl.oclc.org/ooxml/drawingml/wordprocessingDrawing":"wp","http://purl.oclc.org/ooxml/drawingml/main":"a","http://purl.oclc.org/ooxml/drawingml/picture":"pic","http://schemas.openxmlformats.org/package/2006/content-types":"content-types","http://schemas.openxmlformats.org/package/2006/relationships":"relationships","http://schemas.openxmlformats.org/markup-compatibility/2006":"mc","urn:schemas-microsoft-com:vml":"v","urn:schemas-microsoft-com:office:word":"office-word","http://schemas.microsoft.com/office/word/2010/wordml":"wordml"};function i(u){return t.readString(u,n).then(function(d){return l(d)[0]})}function a(u,d){return u.exists(d)?u.read(d,"utf-8").then(s).then(i):e.resolve(null)}function s(u){return u.replace(/^\uFEFF/g,"")}function l(u){return u.type==="element"?u.name==="mc:AlternateContent"?u.firstOrEmpty("mc:Fallback").children:(u.children=r.flatten(u.children.map(l,!0)),[u]):[u]}return Iy}var Ly={},Ia={},By={},kU;function LP(){if(kU)return By;kU=1,Object.defineProperty(By,"__esModule",{value:!0});var r=[{"Typeface name":"Symbol","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Symbol","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"33","Unicode hex":"21"},{"Typeface name":"Symbol","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"8704","Unicode hex":"2200"},{"Typeface name":"Symbol","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"35","Unicode hex":"23"},{"Typeface name":"Symbol","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"8707","Unicode hex":"2203"},{"Typeface name":"Symbol","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"37","Unicode hex":"25"},{"Typeface name":"Symbol","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"38","Unicode hex":"26"},{"Typeface name":"Symbol","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"8717","Unicode hex":"220D"},{"Typeface name":"Symbol","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"40","Unicode hex":"28"},{"Typeface name":"Symbol","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"41","Unicode hex":"29"},{"Typeface name":"Symbol","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"42","Unicode hex":"2A"},{"Typeface name":"Symbol","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"43","Unicode hex":"2B"},{"Typeface name":"Symbol","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"44","Unicode hex":"2C"},{"Typeface name":"Symbol","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"8722","Unicode hex":"2212"},{"Typeface name":"Symbol","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"46","Unicode hex":"2E"},{"Typeface name":"Symbol","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"47","Unicode hex":"2F"},{"Typeface name":"Symbol","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"48","Unicode hex":"30"},{"Typeface name":"Symbol","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"49","Unicode hex":"31"},{"Typeface name":"Symbol","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"50","Unicode hex":"32"},{"Typeface name":"Symbol","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"51","Unicode hex":"33"},{"Typeface name":"Symbol","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"52","Unicode hex":"34"},{"Typeface name":"Symbol","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"53","Unicode hex":"35"},{"Typeface name":"Symbol","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"54","Unicode hex":"36"},{"Typeface name":"Symbol","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"55","Unicode hex":"37"},{"Typeface name":"Symbol","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"56","Unicode hex":"38"},{"Typeface name":"Symbol","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"57","Unicode hex":"39"},{"Typeface name":"Symbol","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"58","Unicode hex":"3A"},{"Typeface name":"Symbol","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"59","Unicode hex":"3B"},{"Typeface name":"Symbol","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"60","Unicode hex":"3C"},{"Typeface name":"Symbol","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"61","Unicode hex":"3D"},{"Typeface name":"Symbol","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"62","Unicode hex":"3E"},{"Typeface name":"Symbol","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"63","Unicode hex":"3F"},{"Typeface name":"Symbol","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"8773","Unicode hex":"2245"},{"Typeface name":"Symbol","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"913","Unicode hex":"391"},{"Typeface name":"Symbol","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"914","Unicode hex":"392"},{"Typeface name":"Symbol","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"935","Unicode hex":"3A7"},{"Typeface name":"Symbol","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"916","Unicode hex":"394"},{"Typeface name":"Symbol","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"917","Unicode hex":"395"},{"Typeface name":"Symbol","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"934","Unicode hex":"3A6"},{"Typeface name":"Symbol","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"915","Unicode hex":"393"},{"Typeface name":"Symbol","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"919","Unicode hex":"397"},{"Typeface name":"Symbol","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"921","Unicode hex":"399"},{"Typeface name":"Symbol","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"977","Unicode hex":"3D1"},{"Typeface name":"Symbol","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"922","Unicode hex":"39A"},{"Typeface name":"Symbol","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"923","Unicode hex":"39B"},{"Typeface name":"Symbol","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"924","Unicode hex":"39C"},{"Typeface name":"Symbol","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"925","Unicode hex":"39D"},{"Typeface name":"Symbol","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"927","Unicode hex":"39F"},{"Typeface name":"Symbol","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"928","Unicode hex":"3A0"},{"Typeface name":"Symbol","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"920","Unicode hex":"398"},{"Typeface name":"Symbol","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"929","Unicode hex":"3A1"},{"Typeface name":"Symbol","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"931","Unicode hex":"3A3"},{"Typeface name":"Symbol","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"932","Unicode hex":"3A4"},{"Typeface name":"Symbol","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"933","Unicode hex":"3A5"},{"Typeface name":"Symbol","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"962","Unicode hex":"3C2"},{"Typeface name":"Symbol","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"937","Unicode hex":"3A9"},{"Typeface name":"Symbol","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"926","Unicode hex":"39E"},{"Typeface name":"Symbol","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"936","Unicode hex":"3A8"},{"Typeface name":"Symbol","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"918","Unicode hex":"396"},{"Typeface name":"Symbol","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"91","Unicode hex":"5B"},{"Typeface name":"Symbol","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"8756","Unicode hex":"2234"},{"Typeface name":"Symbol","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"93","Unicode hex":"5D"},{"Typeface name":"Symbol","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"8869","Unicode hex":"22A5"},{"Typeface name":"Symbol","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"95","Unicode hex":"5F"},{"Typeface name":"Symbol","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"8254","Unicode hex":"203E"},{"Typeface name":"Symbol","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"945","Unicode hex":"3B1"},{"Typeface name":"Symbol","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"946","Unicode hex":"3B2"},{"Typeface name":"Symbol","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"967","Unicode hex":"3C7"},{"Typeface name":"Symbol","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"948","Unicode hex":"3B4"},{"Typeface name":"Symbol","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"949","Unicode hex":"3B5"},{"Typeface name":"Symbol","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"966","Unicode hex":"3C6"},{"Typeface name":"Symbol","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"947","Unicode hex":"3B3"},{"Typeface name":"Symbol","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"951","Unicode hex":"3B7"},{"Typeface name":"Symbol","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"953","Unicode hex":"3B9"},{"Typeface name":"Symbol","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"981","Unicode hex":"3D5"},{"Typeface name":"Symbol","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"954","Unicode hex":"3BA"},{"Typeface name":"Symbol","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"955","Unicode hex":"3BB"},{"Typeface name":"Symbol","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"956","Unicode hex":"3BC"},{"Typeface name":"Symbol","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"957","Unicode hex":"3BD"},{"Typeface name":"Symbol","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"959","Unicode hex":"3BF"},{"Typeface name":"Symbol","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"960","Unicode hex":"3C0"},{"Typeface name":"Symbol","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"952","Unicode hex":"3B8"},{"Typeface name":"Symbol","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"961","Unicode hex":"3C1"},{"Typeface name":"Symbol","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"963","Unicode hex":"3C3"},{"Typeface name":"Symbol","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"964","Unicode hex":"3C4"},{"Typeface name":"Symbol","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"965","Unicode hex":"3C5"},{"Typeface name":"Symbol","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"982","Unicode hex":"3D6"},{"Typeface name":"Symbol","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"969","Unicode hex":"3C9"},{"Typeface name":"Symbol","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"958","Unicode hex":"3BE"},{"Typeface name":"Symbol","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"968","Unicode hex":"3C8"},{"Typeface name":"Symbol","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"950","Unicode hex":"3B6"},{"Typeface name":"Symbol","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"123","Unicode hex":"7B"},{"Typeface name":"Symbol","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"124","Unicode hex":"7C"},{"Typeface name":"Symbol","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"125","Unicode hex":"7D"},{"Typeface name":"Symbol","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"126","Unicode hex":"7E"},{"Typeface name":"Symbol","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"8364","Unicode hex":"20AC"},{"Typeface name":"Symbol","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"978","Unicode hex":"3D2"},{"Typeface name":"Symbol","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"8242","Unicode hex":"2032"},{"Typeface name":"Symbol","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"8804","Unicode hex":"2264"},{"Typeface name":"Symbol","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"8260","Unicode hex":"2044"},{"Typeface name":"Symbol","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"8734","Unicode hex":"221E"},{"Typeface name":"Symbol","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"402","Unicode hex":"192"},{"Typeface name":"Symbol","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"9827","Unicode hex":"2663"},{"Typeface name":"Symbol","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"9830","Unicode hex":"2666"},{"Typeface name":"Symbol","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"9829","Unicode hex":"2665"},{"Typeface name":"Symbol","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"9824","Unicode hex":"2660"},{"Typeface name":"Symbol","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"8596","Unicode hex":"2194"},{"Typeface name":"Symbol","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"8592","Unicode hex":"2190"},{"Typeface name":"Symbol","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"8593","Unicode hex":"2191"},{"Typeface name":"Symbol","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"8594","Unicode hex":"2192"},{"Typeface name":"Symbol","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"8595","Unicode hex":"2193"},{"Typeface name":"Symbol","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"176","Unicode hex":"B0"},{"Typeface name":"Symbol","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"177","Unicode hex":"B1"},{"Typeface name":"Symbol","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"8243","Unicode hex":"2033"},{"Typeface name":"Symbol","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"8805","Unicode hex":"2265"},{"Typeface name":"Symbol","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"215","Unicode hex":"D7"},{"Typeface name":"Symbol","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"8733","Unicode hex":"221D"},{"Typeface name":"Symbol","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"8706","Unicode hex":"2202"},{"Typeface name":"Symbol","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"8226","Unicode hex":"2022"},{"Typeface name":"Symbol","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"247","Unicode hex":"F7"},{"Typeface name":"Symbol","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"8800","Unicode hex":"2260"},{"Typeface name":"Symbol","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"8801","Unicode hex":"2261"},{"Typeface name":"Symbol","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"8776","Unicode hex":"2248"},{"Typeface name":"Symbol","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"8230","Unicode hex":"2026"},{"Typeface name":"Symbol","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"9168","Unicode hex":"23D0"},{"Typeface name":"Symbol","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"9135","Unicode hex":"23AF"},{"Typeface name":"Symbol","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"8629","Unicode hex":"21B5"},{"Typeface name":"Symbol","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"8501","Unicode hex":"2135"},{"Typeface name":"Symbol","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"8465","Unicode hex":"2111"},{"Typeface name":"Symbol","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"8476","Unicode hex":"211C"},{"Typeface name":"Symbol","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"8472","Unicode hex":"2118"},{"Typeface name":"Symbol","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"8855","Unicode hex":"2297"},{"Typeface name":"Symbol","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"8853","Unicode hex":"2295"},{"Typeface name":"Symbol","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"8709","Unicode hex":"2205"},{"Typeface name":"Symbol","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"8745","Unicode hex":"2229"},{"Typeface name":"Symbol","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"8746","Unicode hex":"222A"},{"Typeface name":"Symbol","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"8835","Unicode hex":"2283"},{"Typeface name":"Symbol","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"8839","Unicode hex":"2287"},{"Typeface name":"Symbol","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"8836","Unicode hex":"2284"},{"Typeface name":"Symbol","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"8834","Unicode hex":"2282"},{"Typeface name":"Symbol","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"8838","Unicode hex":"2286"},{"Typeface name":"Symbol","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"8712","Unicode hex":"2208"},{"Typeface name":"Symbol","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"8713","Unicode hex":"2209"},{"Typeface name":"Symbol","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"8736","Unicode hex":"2220"},{"Typeface name":"Symbol","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"8711","Unicode hex":"2207"},{"Typeface name":"Symbol","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"174","Unicode hex":"AE"},{"Typeface name":"Symbol","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"169","Unicode hex":"A9"},{"Typeface name":"Symbol","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"8482","Unicode hex":"2122"},{"Typeface name":"Symbol","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"8719","Unicode hex":"220F"},{"Typeface name":"Symbol","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"8730","Unicode hex":"221A"},{"Typeface name":"Symbol","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"8901","Unicode hex":"22C5"},{"Typeface name":"Symbol","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"172","Unicode hex":"AC"},{"Typeface name":"Symbol","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"8743","Unicode hex":"2227"},{"Typeface name":"Symbol","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"8744","Unicode hex":"2228"},{"Typeface name":"Symbol","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"8660","Unicode hex":"21D4"},{"Typeface name":"Symbol","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"8656","Unicode hex":"21D0"},{"Typeface name":"Symbol","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"8657","Unicode hex":"21D1"},{"Typeface name":"Symbol","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"8658","Unicode hex":"21D2"},{"Typeface name":"Symbol","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"8659","Unicode hex":"21D3"},{"Typeface name":"Symbol","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"9674","Unicode hex":"25CA"},{"Typeface name":"Symbol","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"12296","Unicode hex":"3008"},{"Typeface name":"Symbol","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"174","Unicode hex":"AE"},{"Typeface name":"Symbol","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"169","Unicode hex":"A9"},{"Typeface name":"Symbol","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"8482","Unicode hex":"2122"},{"Typeface name":"Symbol","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"8721","Unicode hex":"2211"},{"Typeface name":"Symbol","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"9115","Unicode hex":"239B"},{"Typeface name":"Symbol","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"9116","Unicode hex":"239C"},{"Typeface name":"Symbol","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"9117","Unicode hex":"239D"},{"Typeface name":"Symbol","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"9121","Unicode hex":"23A1"},{"Typeface name":"Symbol","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"9122","Unicode hex":"23A2"},{"Typeface name":"Symbol","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"9123","Unicode hex":"23A3"},{"Typeface name":"Symbol","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"9127","Unicode hex":"23A7"},{"Typeface name":"Symbol","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"9128","Unicode hex":"23A8"},{"Typeface name":"Symbol","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"9129","Unicode hex":"23A9"},{"Typeface name":"Symbol","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"9130","Unicode hex":"23AA"},{"Typeface name":"Symbol","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"63743","Unicode hex":"F8FF"},{"Typeface name":"Symbol","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"12297","Unicode hex":"3009"},{"Typeface name":"Symbol","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"8747","Unicode hex":"222B"},{"Typeface name":"Symbol","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"8992","Unicode hex":"2320"},{"Typeface name":"Symbol","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"9134","Unicode hex":"23AE"},{"Typeface name":"Symbol","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"8993","Unicode hex":"2321"},{"Typeface name":"Symbol","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"9118","Unicode hex":"239E"},{"Typeface name":"Symbol","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"9119","Unicode hex":"239F"},{"Typeface name":"Symbol","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"9120","Unicode hex":"23A0"},{"Typeface name":"Symbol","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"9124","Unicode hex":"23A4"},{"Typeface name":"Symbol","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"9125","Unicode hex":"23A5"},{"Typeface name":"Symbol","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"9126","Unicode hex":"23A6"},{"Typeface name":"Symbol","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"9131","Unicode hex":"23AB"},{"Typeface name":"Symbol","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"9132","Unicode hex":"23AC"},{"Typeface name":"Symbol","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"9133","Unicode hex":"23AD"},{"Typeface name":"Webdings","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Webdings","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128375","Unicode hex":"1F577"},{"Typeface name":"Webdings","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"128376","Unicode hex":"1F578"},{"Typeface name":"Webdings","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"128370","Unicode hex":"1F572"},{"Typeface name":"Webdings","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128374","Unicode hex":"1F576"},{"Typeface name":"Webdings","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"127942","Unicode hex":"1F3C6"},{"Typeface name":"Webdings","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"127894","Unicode hex":"1F396"},{"Typeface name":"Webdings","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128391","Unicode hex":"1F587"},{"Typeface name":"Webdings","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128488","Unicode hex":"1F5E8"},{"Typeface name":"Webdings","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"128489","Unicode hex":"1F5E9"},{"Typeface name":"Webdings","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128496","Unicode hex":"1F5F0"},{"Typeface name":"Webdings","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128497","Unicode hex":"1F5F1"},{"Typeface name":"Webdings","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"127798","Unicode hex":"1F336"},{"Typeface name":"Webdings","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"127895","Unicode hex":"1F397"},{"Typeface name":"Webdings","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128638","Unicode hex":"1F67E"},{"Typeface name":"Webdings","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128636","Unicode hex":"1F67C"},{"Typeface name":"Webdings","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128469","Unicode hex":"1F5D5"},{"Typeface name":"Webdings","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128470","Unicode hex":"1F5D6"},{"Typeface name":"Webdings","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128471","Unicode hex":"1F5D7"},{"Typeface name":"Webdings","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"9204","Unicode hex":"23F4"},{"Typeface name":"Webdings","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"9205","Unicode hex":"23F5"},{"Typeface name":"Webdings","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"9206","Unicode hex":"23F6"},{"Typeface name":"Webdings","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"9207","Unicode hex":"23F7"},{"Typeface name":"Webdings","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"9194","Unicode hex":"23EA"},{"Typeface name":"Webdings","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"9193","Unicode hex":"23E9"},{"Typeface name":"Webdings","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"9198","Unicode hex":"23EE"},{"Typeface name":"Webdings","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"9197","Unicode hex":"23ED"},{"Typeface name":"Webdings","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"9208","Unicode hex":"23F8"},{"Typeface name":"Webdings","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"9209","Unicode hex":"23F9"},{"Typeface name":"Webdings","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"9210","Unicode hex":"23FA"},{"Typeface name":"Webdings","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"128474","Unicode hex":"1F5DA"},{"Typeface name":"Webdings","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"128499","Unicode hex":"1F5F3"},{"Typeface name":"Webdings","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128736","Unicode hex":"1F6E0"},{"Typeface name":"Webdings","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"127959","Unicode hex":"1F3D7"},{"Typeface name":"Webdings","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"127960","Unicode hex":"1F3D8"},{"Typeface name":"Webdings","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"127961","Unicode hex":"1F3D9"},{"Typeface name":"Webdings","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"127962","Unicode hex":"1F3DA"},{"Typeface name":"Webdings","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"127964","Unicode hex":"1F3DC"},{"Typeface name":"Webdings","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"127981","Unicode hex":"1F3ED"},{"Typeface name":"Webdings","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"127963","Unicode hex":"1F3DB"},{"Typeface name":"Webdings","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"127968","Unicode hex":"1F3E0"},{"Typeface name":"Webdings","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"127958","Unicode hex":"1F3D6"},{"Typeface name":"Webdings","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"127965","Unicode hex":"1F3DD"},{"Typeface name":"Webdings","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128739","Unicode hex":"1F6E3"},{"Typeface name":"Webdings","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"128269","Unicode hex":"1F50D"},{"Typeface name":"Webdings","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"127956","Unicode hex":"1F3D4"},{"Typeface name":"Webdings","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128065","Unicode hex":"1F441"},{"Typeface name":"Webdings","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"128066","Unicode hex":"1F442"},{"Typeface name":"Webdings","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"127966","Unicode hex":"1F3DE"},{"Typeface name":"Webdings","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"127957","Unicode hex":"1F3D5"},{"Typeface name":"Webdings","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"128740","Unicode hex":"1F6E4"},{"Typeface name":"Webdings","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"127967","Unicode hex":"1F3DF"},{"Typeface name":"Webdings","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"128755","Unicode hex":"1F6F3"},{"Typeface name":"Webdings","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"128364","Unicode hex":"1F56C"},{"Typeface name":"Webdings","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"128363","Unicode hex":"1F56B"},{"Typeface name":"Webdings","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128360","Unicode hex":"1F568"},{"Typeface name":"Webdings","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"128264","Unicode hex":"1F508"},{"Typeface name":"Webdings","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"127892","Unicode hex":"1F394"},{"Typeface name":"Webdings","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"127893","Unicode hex":"1F395"},{"Typeface name":"Webdings","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"128492","Unicode hex":"1F5EC"},{"Typeface name":"Webdings","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128637","Unicode hex":"1F67D"},{"Typeface name":"Webdings","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"128493","Unicode hex":"1F5ED"},{"Typeface name":"Webdings","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"128490","Unicode hex":"1F5EA"},{"Typeface name":"Webdings","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"128491","Unicode hex":"1F5EB"},{"Typeface name":"Webdings","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"11156","Unicode hex":"2B94"},{"Typeface name":"Webdings","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"10004","Unicode hex":"2714"},{"Typeface name":"Webdings","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"128690","Unicode hex":"1F6B2"},{"Typeface name":"Webdings","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"11036","Unicode hex":"2B1C"},{"Typeface name":"Webdings","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"128737","Unicode hex":"1F6E1"},{"Typeface name":"Webdings","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"128230","Unicode hex":"1F4E6"},{"Typeface name":"Webdings","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"128753","Unicode hex":"1F6F1"},{"Typeface name":"Webdings","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"11035","Unicode hex":"2B1B"},{"Typeface name":"Webdings","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"128657","Unicode hex":"1F691"},{"Typeface name":"Webdings","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"128712","Unicode hex":"1F6C8"},{"Typeface name":"Webdings","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"128745","Unicode hex":"1F6E9"},{"Typeface name":"Webdings","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"128752","Unicode hex":"1F6F0"},{"Typeface name":"Webdings","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"128968","Unicode hex":"1F7C8"},{"Typeface name":"Webdings","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"128372","Unicode hex":"1F574"},{"Typeface name":"Webdings","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"11044","Unicode hex":"2B24"},{"Typeface name":"Webdings","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"128741","Unicode hex":"1F6E5"},{"Typeface name":"Webdings","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"128660","Unicode hex":"1F694"},{"Typeface name":"Webdings","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"128472","Unicode hex":"1F5D8"},{"Typeface name":"Webdings","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"128473","Unicode hex":"1F5D9"},{"Typeface name":"Webdings","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"10067","Unicode hex":"2753"},{"Typeface name":"Webdings","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"128754","Unicode hex":"1F6F2"},{"Typeface name":"Webdings","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"128647","Unicode hex":"1F687"},{"Typeface name":"Webdings","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"128653","Unicode hex":"1F68D"},{"Typeface name":"Webdings","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"9971","Unicode hex":"26F3"},{"Typeface name":"Webdings","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"10680","Unicode hex":"29B8"},{"Typeface name":"Webdings","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"8854","Unicode hex":"2296"},{"Typeface name":"Webdings","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"128685","Unicode hex":"1F6AD"},{"Typeface name":"Webdings","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"128494","Unicode hex":"1F5EE"},{"Typeface name":"Webdings","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"9168","Unicode hex":"23D0"},{"Typeface name":"Webdings","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128495","Unicode hex":"1F5EF"},{"Typeface name":"Webdings","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128498","Unicode hex":"1F5F2"},{"Typeface name":"Webdings","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"128697","Unicode hex":"1F6B9"},{"Typeface name":"Webdings","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"128698","Unicode hex":"1F6BA"},{"Typeface name":"Webdings","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"128713","Unicode hex":"1F6C9"},{"Typeface name":"Webdings","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"128714","Unicode hex":"1F6CA"},{"Typeface name":"Webdings","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"128700","Unicode hex":"1F6BC"},{"Typeface name":"Webdings","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"128125","Unicode hex":"1F47D"},{"Typeface name":"Webdings","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"127947","Unicode hex":"1F3CB"},{"Typeface name":"Webdings","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"9975","Unicode hex":"26F7"},{"Typeface name":"Webdings","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"127938","Unicode hex":"1F3C2"},{"Typeface name":"Webdings","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"127948","Unicode hex":"1F3CC"},{"Typeface name":"Webdings","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"127946","Unicode hex":"1F3CA"},{"Typeface name":"Webdings","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"127940","Unicode hex":"1F3C4"},{"Typeface name":"Webdings","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"127949","Unicode hex":"1F3CD"},{"Typeface name":"Webdings","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"127950","Unicode hex":"1F3CE"},{"Typeface name":"Webdings","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"128664","Unicode hex":"1F698"},{"Typeface name":"Webdings","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"128480","Unicode hex":"1F5E0"},{"Typeface name":"Webdings","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"128738","Unicode hex":"1F6E2"},{"Typeface name":"Webdings","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"128176","Unicode hex":"1F4B0"},{"Typeface name":"Webdings","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"127991","Unicode hex":"1F3F7"},{"Typeface name":"Webdings","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"128179","Unicode hex":"1F4B3"},{"Typeface name":"Webdings","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"128106","Unicode hex":"1F46A"},{"Typeface name":"Webdings","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"128481","Unicode hex":"1F5E1"},{"Typeface name":"Webdings","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128482","Unicode hex":"1F5E2"},{"Typeface name":"Webdings","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"128483","Unicode hex":"1F5E3"},{"Typeface name":"Webdings","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"10031","Unicode hex":"272F"},{"Typeface name":"Webdings","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"128388","Unicode hex":"1F584"},{"Typeface name":"Webdings","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128389","Unicode hex":"1F585"},{"Typeface name":"Webdings","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128387","Unicode hex":"1F583"},{"Typeface name":"Webdings","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128390","Unicode hex":"1F586"},{"Typeface name":"Webdings","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"128441","Unicode hex":"1F5B9"},{"Typeface name":"Webdings","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"128442","Unicode hex":"1F5BA"},{"Typeface name":"Webdings","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"128443","Unicode hex":"1F5BB"},{"Typeface name":"Webdings","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"128373","Unicode hex":"1F575"},{"Typeface name":"Webdings","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"128368","Unicode hex":"1F570"},{"Typeface name":"Webdings","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"128445","Unicode hex":"1F5BD"},{"Typeface name":"Webdings","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"128446","Unicode hex":"1F5BE"},{"Typeface name":"Webdings","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128203","Unicode hex":"1F4CB"},{"Typeface name":"Webdings","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128466","Unicode hex":"1F5D2"},{"Typeface name":"Webdings","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128467","Unicode hex":"1F5D3"},{"Typeface name":"Webdings","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"128366","Unicode hex":"1F56E"},{"Typeface name":"Webdings","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"128218","Unicode hex":"1F4DA"},{"Typeface name":"Webdings","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128478","Unicode hex":"1F5DE"},{"Typeface name":"Webdings","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128479","Unicode hex":"1F5DF"},{"Typeface name":"Webdings","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"128451","Unicode hex":"1F5C3"},{"Typeface name":"Webdings","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128450","Unicode hex":"1F5C2"},{"Typeface name":"Webdings","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"128444","Unicode hex":"1F5BC"},{"Typeface name":"Webdings","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"127917","Unicode hex":"1F3AD"},{"Typeface name":"Webdings","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"127900","Unicode hex":"1F39C"},{"Typeface name":"Webdings","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"127896","Unicode hex":"1F398"},{"Typeface name":"Webdings","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"127897","Unicode hex":"1F399"},{"Typeface name":"Webdings","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"127911","Unicode hex":"1F3A7"},{"Typeface name":"Webdings","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"128191","Unicode hex":"1F4BF"},{"Typeface name":"Webdings","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"127902","Unicode hex":"1F39E"},{"Typeface name":"Webdings","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"128247","Unicode hex":"1F4F7"},{"Typeface name":"Webdings","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"127903","Unicode hex":"1F39F"},{"Typeface name":"Webdings","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"127916","Unicode hex":"1F3AC"},{"Typeface name":"Webdings","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"128253","Unicode hex":"1F4FD"},{"Typeface name":"Webdings","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128249","Unicode hex":"1F4F9"},{"Typeface name":"Webdings","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"128254","Unicode hex":"1F4FE"},{"Typeface name":"Webdings","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"128251","Unicode hex":"1F4FB"},{"Typeface name":"Webdings","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"127898","Unicode hex":"1F39A"},{"Typeface name":"Webdings","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"127899","Unicode hex":"1F39B"},{"Typeface name":"Webdings","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"128250","Unicode hex":"1F4FA"},{"Typeface name":"Webdings","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"128187","Unicode hex":"1F4BB"},{"Typeface name":"Webdings","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"128421","Unicode hex":"1F5A5"},{"Typeface name":"Webdings","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"128422","Unicode hex":"1F5A6"},{"Typeface name":"Webdings","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"128423","Unicode hex":"1F5A7"},{"Typeface name":"Webdings","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"128377","Unicode hex":"1F579"},{"Typeface name":"Webdings","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"127918","Unicode hex":"1F3AE"},{"Typeface name":"Webdings","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"128379","Unicode hex":"1F57B"},{"Typeface name":"Webdings","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"128380","Unicode hex":"1F57C"},{"Typeface name":"Webdings","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"128223","Unicode hex":"1F4DF"},{"Typeface name":"Webdings","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"128385","Unicode hex":"1F581"},{"Typeface name":"Webdings","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"128384","Unicode hex":"1F580"},{"Typeface name":"Webdings","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"128424","Unicode hex":"1F5A8"},{"Typeface name":"Webdings","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128425","Unicode hex":"1F5A9"},{"Typeface name":"Webdings","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128447","Unicode hex":"1F5BF"},{"Typeface name":"Webdings","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128426","Unicode hex":"1F5AA"},{"Typeface name":"Webdings","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128476","Unicode hex":"1F5DC"},{"Typeface name":"Webdings","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128274","Unicode hex":"1F512"},{"Typeface name":"Webdings","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128275","Unicode hex":"1F513"},{"Typeface name":"Webdings","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128477","Unicode hex":"1F5DD"},{"Typeface name":"Webdings","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128229","Unicode hex":"1F4E5"},{"Typeface name":"Webdings","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128228","Unicode hex":"1F4E4"},{"Typeface name":"Webdings","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128371","Unicode hex":"1F573"},{"Typeface name":"Webdings","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"127779","Unicode hex":"1F323"},{"Typeface name":"Webdings","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"127780","Unicode hex":"1F324"},{"Typeface name":"Webdings","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"127781","Unicode hex":"1F325"},{"Typeface name":"Webdings","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"127782","Unicode hex":"1F326"},{"Typeface name":"Webdings","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"9729","Unicode hex":"2601"},{"Typeface name":"Webdings","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"127784","Unicode hex":"1F328"},{"Typeface name":"Webdings","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"127783","Unicode hex":"1F327"},{"Typeface name":"Webdings","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"127785","Unicode hex":"1F329"},{"Typeface name":"Webdings","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"127786","Unicode hex":"1F32A"},{"Typeface name":"Webdings","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"127788","Unicode hex":"1F32C"},{"Typeface name":"Webdings","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"127787","Unicode hex":"1F32B"},{"Typeface name":"Webdings","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"127772","Unicode hex":"1F31C"},{"Typeface name":"Webdings","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"127777","Unicode hex":"1F321"},{"Typeface name":"Webdings","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"128715","Unicode hex":"1F6CB"},{"Typeface name":"Webdings","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"128719","Unicode hex":"1F6CF"},{"Typeface name":"Webdings","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"127869","Unicode hex":"1F37D"},{"Typeface name":"Webdings","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"127864","Unicode hex":"1F378"},{"Typeface name":"Webdings","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"128718","Unicode hex":"1F6CE"},{"Typeface name":"Webdings","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"128717","Unicode hex":"1F6CD"},{"Typeface name":"Webdings","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"9413","Unicode hex":"24C5"},{"Typeface name":"Webdings","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"9855","Unicode hex":"267F"},{"Typeface name":"Webdings","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"128710","Unicode hex":"1F6C6"},{"Typeface name":"Webdings","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"128392","Unicode hex":"1F588"},{"Typeface name":"Webdings","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"127891","Unicode hex":"1F393"},{"Typeface name":"Webdings","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"128484","Unicode hex":"1F5E4"},{"Typeface name":"Webdings","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"128485","Unicode hex":"1F5E5"},{"Typeface name":"Webdings","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"128486","Unicode hex":"1F5E6"},{"Typeface name":"Webdings","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"128487","Unicode hex":"1F5E7"},{"Typeface name":"Webdings","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"128746","Unicode hex":"1F6EA"},{"Typeface name":"Webdings","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"128063","Unicode hex":"1F43F"},{"Typeface name":"Webdings","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"128038","Unicode hex":"1F426"},{"Typeface name":"Webdings","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"128031","Unicode hex":"1F41F"},{"Typeface name":"Webdings","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"128021","Unicode hex":"1F415"},{"Typeface name":"Webdings","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"128008","Unicode hex":"1F408"},{"Typeface name":"Webdings","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"128620","Unicode hex":"1F66C"},{"Typeface name":"Webdings","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"128622","Unicode hex":"1F66E"},{"Typeface name":"Webdings","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"128621","Unicode hex":"1F66D"},{"Typeface name":"Webdings","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"128623","Unicode hex":"1F66F"},{"Typeface name":"Webdings","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"128506","Unicode hex":"1F5FA"},{"Typeface name":"Webdings","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"127757","Unicode hex":"1F30D"},{"Typeface name":"Webdings","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"127759","Unicode hex":"1F30F"},{"Typeface name":"Webdings","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"127758","Unicode hex":"1F30E"},{"Typeface name":"Webdings","Dingbat dec":"255","Dingbat hex":"FF","Unicode dec":"128330","Unicode hex":"1F54A"},{"Typeface name":"Wingdings","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128393","Unicode hex":"1F589"},{"Typeface name":"Wingdings","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"9986","Unicode hex":"2702"},{"Typeface name":"Wingdings","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"9985","Unicode hex":"2701"},{"Typeface name":"Wingdings","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128083","Unicode hex":"1F453"},{"Typeface name":"Wingdings","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"128365","Unicode hex":"1F56D"},{"Typeface name":"Wingdings","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"128366","Unicode hex":"1F56E"},{"Typeface name":"Wingdings","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128367","Unicode hex":"1F56F"},{"Typeface name":"Wingdings","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128383","Unicode hex":"1F57F"},{"Typeface name":"Wingdings","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"9990","Unicode hex":"2706"},{"Typeface name":"Wingdings","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128386","Unicode hex":"1F582"},{"Typeface name":"Wingdings","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128387","Unicode hex":"1F583"},{"Typeface name":"Wingdings","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"128234","Unicode hex":"1F4EA"},{"Typeface name":"Wingdings","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"128235","Unicode hex":"1F4EB"},{"Typeface name":"Wingdings","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128236","Unicode hex":"1F4EC"},{"Typeface name":"Wingdings","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128237","Unicode hex":"1F4ED"},{"Typeface name":"Wingdings","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128448","Unicode hex":"1F5C0"},{"Typeface name":"Wingdings","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128449","Unicode hex":"1F5C1"},{"Typeface name":"Wingdings","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128462","Unicode hex":"1F5CE"},{"Typeface name":"Wingdings","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"128463","Unicode hex":"1F5CF"},{"Typeface name":"Wingdings","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"128464","Unicode hex":"1F5D0"},{"Typeface name":"Wingdings","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"128452","Unicode hex":"1F5C4"},{"Typeface name":"Wingdings","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"8987","Unicode hex":"231B"},{"Typeface name":"Wingdings","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"128430","Unicode hex":"1F5AE"},{"Typeface name":"Wingdings","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"128432","Unicode hex":"1F5B0"},{"Typeface name":"Wingdings","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"128434","Unicode hex":"1F5B2"},{"Typeface name":"Wingdings","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"128435","Unicode hex":"1F5B3"},{"Typeface name":"Wingdings","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"128436","Unicode hex":"1F5B4"},{"Typeface name":"Wingdings","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"128427","Unicode hex":"1F5AB"},{"Typeface name":"Wingdings","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"128428","Unicode hex":"1F5AC"},{"Typeface name":"Wingdings","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"9991","Unicode hex":"2707"},{"Typeface name":"Wingdings","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"9997","Unicode hex":"270D"},{"Typeface name":"Wingdings","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128398","Unicode hex":"1F58E"},{"Typeface name":"Wingdings","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"9996","Unicode hex":"270C"},{"Typeface name":"Wingdings","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"128399","Unicode hex":"1F58F"},{"Typeface name":"Wingdings","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"128077","Unicode hex":"1F44D"},{"Typeface name":"Wingdings","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"128078","Unicode hex":"1F44E"},{"Typeface name":"Wingdings","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"9756","Unicode hex":"261C"},{"Typeface name":"Wingdings","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"9758","Unicode hex":"261E"},{"Typeface name":"Wingdings","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"9757","Unicode hex":"261D"},{"Typeface name":"Wingdings","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"9759","Unicode hex":"261F"},{"Typeface name":"Wingdings","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"128400","Unicode hex":"1F590"},{"Typeface name":"Wingdings","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"9786","Unicode hex":"263A"},{"Typeface name":"Wingdings","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128528","Unicode hex":"1F610"},{"Typeface name":"Wingdings","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"9785","Unicode hex":"2639"},{"Typeface name":"Wingdings","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"128163","Unicode hex":"1F4A3"},{"Typeface name":"Wingdings","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128369","Unicode hex":"1F571"},{"Typeface name":"Wingdings","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"127987","Unicode hex":"1F3F3"},{"Typeface name":"Wingdings","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"127985","Unicode hex":"1F3F1"},{"Typeface name":"Wingdings","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"9992","Unicode hex":"2708"},{"Typeface name":"Wingdings","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9788","Unicode hex":"263C"},{"Typeface name":"Wingdings","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"127778","Unicode hex":"1F322"},{"Typeface name":"Wingdings","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"10052","Unicode hex":"2744"},{"Typeface name":"Wingdings","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"128326","Unicode hex":"1F546"},{"Typeface name":"Wingdings","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"10014","Unicode hex":"271E"},{"Typeface name":"Wingdings","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128328","Unicode hex":"1F548"},{"Typeface name":"Wingdings","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"10016","Unicode hex":"2720"},{"Typeface name":"Wingdings","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"10017","Unicode hex":"2721"},{"Typeface name":"Wingdings","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"9770","Unicode hex":"262A"},{"Typeface name":"Wingdings","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"9775","Unicode hex":"262F"},{"Typeface name":"Wingdings","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128329","Unicode hex":"1F549"},{"Typeface name":"Wingdings","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"9784","Unicode hex":"2638"},{"Typeface name":"Wingdings","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"9800","Unicode hex":"2648"},{"Typeface name":"Wingdings","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"9801","Unicode hex":"2649"},{"Typeface name":"Wingdings","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"9802","Unicode hex":"264A"},{"Typeface name":"Wingdings","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"9803","Unicode hex":"264B"},{"Typeface name":"Wingdings","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"9804","Unicode hex":"264C"},{"Typeface name":"Wingdings","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"9805","Unicode hex":"264D"},{"Typeface name":"Wingdings","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"9806","Unicode hex":"264E"},{"Typeface name":"Wingdings","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"9807","Unicode hex":"264F"},{"Typeface name":"Wingdings","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"9808","Unicode hex":"2650"},{"Typeface name":"Wingdings","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"9809","Unicode hex":"2651"},{"Typeface name":"Wingdings","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"9810","Unicode hex":"2652"},{"Typeface name":"Wingdings","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"9811","Unicode hex":"2653"},{"Typeface name":"Wingdings","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"128624","Unicode hex":"1F670"},{"Typeface name":"Wingdings","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"128629","Unicode hex":"1F675"},{"Typeface name":"Wingdings","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"9899","Unicode hex":"26AB"},{"Typeface name":"Wingdings","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"128318","Unicode hex":"1F53E"},{"Typeface name":"Wingdings","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"9724","Unicode hex":"25FC"},{"Typeface name":"Wingdings","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"128911","Unicode hex":"1F78F"},{"Typeface name":"Wingdings","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"128912","Unicode hex":"1F790"},{"Typeface name":"Wingdings","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"10065","Unicode hex":"2751"},{"Typeface name":"Wingdings","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"10066","Unicode hex":"2752"},{"Typeface name":"Wingdings","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"128927","Unicode hex":"1F79F"},{"Typeface name":"Wingdings","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"10731","Unicode hex":"29EB"},{"Typeface name":"Wingdings","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"9670","Unicode hex":"25C6"},{"Typeface name":"Wingdings","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"10070","Unicode hex":"2756"},{"Typeface name":"Wingdings","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"11049","Unicode hex":"2B29"},{"Typeface name":"Wingdings","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"8999","Unicode hex":"2327"},{"Typeface name":"Wingdings","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"11193","Unicode hex":"2BB9"},{"Typeface name":"Wingdings","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"8984","Unicode hex":"2318"},{"Typeface name":"Wingdings","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"127989","Unicode hex":"1F3F5"},{"Typeface name":"Wingdings","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"127990","Unicode hex":"1F3F6"},{"Typeface name":"Wingdings","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128630","Unicode hex":"1F676"},{"Typeface name":"Wingdings","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128631","Unicode hex":"1F677"},{"Typeface name":"Wingdings","Dingbat dec":"127","Dingbat hex":"7F","Unicode dec":"9647","Unicode hex":"25AF"},{"Typeface name":"Wingdings","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"127243","Unicode hex":"1F10B"},{"Typeface name":"Wingdings","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"10112","Unicode hex":"2780"},{"Typeface name":"Wingdings","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"10113","Unicode hex":"2781"},{"Typeface name":"Wingdings","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"10114","Unicode hex":"2782"},{"Typeface name":"Wingdings","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"10115","Unicode hex":"2783"},{"Typeface name":"Wingdings","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"10116","Unicode hex":"2784"},{"Typeface name":"Wingdings","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"10117","Unicode hex":"2785"},{"Typeface name":"Wingdings","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"10118","Unicode hex":"2786"},{"Typeface name":"Wingdings","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"10119","Unicode hex":"2787"},{"Typeface name":"Wingdings","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"10120","Unicode hex":"2788"},{"Typeface name":"Wingdings","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"10121","Unicode hex":"2789"},{"Typeface name":"Wingdings","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"127244","Unicode hex":"1F10C"},{"Typeface name":"Wingdings","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"10122","Unicode hex":"278A"},{"Typeface name":"Wingdings","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"10123","Unicode hex":"278B"},{"Typeface name":"Wingdings","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"10124","Unicode hex":"278C"},{"Typeface name":"Wingdings","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"10125","Unicode hex":"278D"},{"Typeface name":"Wingdings","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"10126","Unicode hex":"278E"},{"Typeface name":"Wingdings","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"10127","Unicode hex":"278F"},{"Typeface name":"Wingdings","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"10128","Unicode hex":"2790"},{"Typeface name":"Wingdings","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"10129","Unicode hex":"2791"},{"Typeface name":"Wingdings","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"10130","Unicode hex":"2792"},{"Typeface name":"Wingdings","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"10131","Unicode hex":"2793"},{"Typeface name":"Wingdings","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128610","Unicode hex":"1F662"},{"Typeface name":"Wingdings","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"128608","Unicode hex":"1F660"},{"Typeface name":"Wingdings","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"128609","Unicode hex":"1F661"},{"Typeface name":"Wingdings","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"128611","Unicode hex":"1F663"},{"Typeface name":"Wingdings","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128606","Unicode hex":"1F65E"},{"Typeface name":"Wingdings","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128604","Unicode hex":"1F65C"},{"Typeface name":"Wingdings","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128605","Unicode hex":"1F65D"},{"Typeface name":"Wingdings","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"128607","Unicode hex":"1F65F"},{"Typeface name":"Wingdings","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"8729","Unicode hex":"2219"},{"Typeface name":"Wingdings","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"8226","Unicode hex":"2022"},{"Typeface name":"Wingdings","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"11037","Unicode hex":"2B1D"},{"Typeface name":"Wingdings","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"11096","Unicode hex":"2B58"},{"Typeface name":"Wingdings","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"128902","Unicode hex":"1F786"},{"Typeface name":"Wingdings","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"128904","Unicode hex":"1F788"},{"Typeface name":"Wingdings","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128906","Unicode hex":"1F78A"},{"Typeface name":"Wingdings","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128907","Unicode hex":"1F78B"},{"Typeface name":"Wingdings","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128319","Unicode hex":"1F53F"},{"Typeface name":"Wingdings","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"9642","Unicode hex":"25AA"},{"Typeface name":"Wingdings","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"128910","Unicode hex":"1F78E"},{"Typeface name":"Wingdings","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128961","Unicode hex":"1F7C1"},{"Typeface name":"Wingdings","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128965","Unicode hex":"1F7C5"},{"Typeface name":"Wingdings","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"9733","Unicode hex":"2605"},{"Typeface name":"Wingdings","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128971","Unicode hex":"1F7CB"},{"Typeface name":"Wingdings","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"128975","Unicode hex":"1F7CF"},{"Typeface name":"Wingdings","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"128979","Unicode hex":"1F7D3"},{"Typeface name":"Wingdings","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"128977","Unicode hex":"1F7D1"},{"Typeface name":"Wingdings","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"11216","Unicode hex":"2BD0"},{"Typeface name":"Wingdings","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"8982","Unicode hex":"2316"},{"Typeface name":"Wingdings","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"11214","Unicode hex":"2BCE"},{"Typeface name":"Wingdings","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"11215","Unicode hex":"2BCF"},{"Typeface name":"Wingdings","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"11217","Unicode hex":"2BD1"},{"Typeface name":"Wingdings","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"10026","Unicode hex":"272A"},{"Typeface name":"Wingdings","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"10032","Unicode hex":"2730"},{"Typeface name":"Wingdings","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"128336","Unicode hex":"1F550"},{"Typeface name":"Wingdings","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"128337","Unicode hex":"1F551"},{"Typeface name":"Wingdings","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128338","Unicode hex":"1F552"},{"Typeface name":"Wingdings","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"128339","Unicode hex":"1F553"},{"Typeface name":"Wingdings","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"128340","Unicode hex":"1F554"},{"Typeface name":"Wingdings","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"128341","Unicode hex":"1F555"},{"Typeface name":"Wingdings","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"128342","Unicode hex":"1F556"},{"Typeface name":"Wingdings","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"128343","Unicode hex":"1F557"},{"Typeface name":"Wingdings","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"128344","Unicode hex":"1F558"},{"Typeface name":"Wingdings","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"128345","Unicode hex":"1F559"},{"Typeface name":"Wingdings","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"128346","Unicode hex":"1F55A"},{"Typeface name":"Wingdings","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"128347","Unicode hex":"1F55B"},{"Typeface name":"Wingdings","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"11184","Unicode hex":"2BB0"},{"Typeface name":"Wingdings","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"11185","Unicode hex":"2BB1"},{"Typeface name":"Wingdings","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"11186","Unicode hex":"2BB2"},{"Typeface name":"Wingdings","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"11187","Unicode hex":"2BB3"},{"Typeface name":"Wingdings","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"11188","Unicode hex":"2BB4"},{"Typeface name":"Wingdings","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"11189","Unicode hex":"2BB5"},{"Typeface name":"Wingdings","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"11190","Unicode hex":"2BB6"},{"Typeface name":"Wingdings","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"11191","Unicode hex":"2BB7"},{"Typeface name":"Wingdings","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128618","Unicode hex":"1F66A"},{"Typeface name":"Wingdings","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128619","Unicode hex":"1F66B"},{"Typeface name":"Wingdings","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128597","Unicode hex":"1F655"},{"Typeface name":"Wingdings","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128596","Unicode hex":"1F654"},{"Typeface name":"Wingdings","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128599","Unicode hex":"1F657"},{"Typeface name":"Wingdings","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128598","Unicode hex":"1F656"},{"Typeface name":"Wingdings","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128592","Unicode hex":"1F650"},{"Typeface name":"Wingdings","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128593","Unicode hex":"1F651"},{"Typeface name":"Wingdings","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128594","Unicode hex":"1F652"},{"Typeface name":"Wingdings","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128595","Unicode hex":"1F653"},{"Typeface name":"Wingdings","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"9003","Unicode hex":"232B"},{"Typeface name":"Wingdings","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"8998","Unicode hex":"2326"},{"Typeface name":"Wingdings","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"11160","Unicode hex":"2B98"},{"Typeface name":"Wingdings","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"11162","Unicode hex":"2B9A"},{"Typeface name":"Wingdings","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"11161","Unicode hex":"2B99"},{"Typeface name":"Wingdings","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"11163","Unicode hex":"2B9B"},{"Typeface name":"Wingdings","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"11144","Unicode hex":"2B88"},{"Typeface name":"Wingdings","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"11146","Unicode hex":"2B8A"},{"Typeface name":"Wingdings","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"11145","Unicode hex":"2B89"},{"Typeface name":"Wingdings","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"11147","Unicode hex":"2B8B"},{"Typeface name":"Wingdings","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"129128","Unicode hex":"1F868"},{"Typeface name":"Wingdings","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"129130","Unicode hex":"1F86A"},{"Typeface name":"Wingdings","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"129129","Unicode hex":"1F869"},{"Typeface name":"Wingdings","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"129131","Unicode hex":"1F86B"},{"Typeface name":"Wingdings","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"129132","Unicode hex":"1F86C"},{"Typeface name":"Wingdings","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"129133","Unicode hex":"1F86D"},{"Typeface name":"Wingdings","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"129135","Unicode hex":"1F86F"},{"Typeface name":"Wingdings","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"129134","Unicode hex":"1F86E"},{"Typeface name":"Wingdings","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"129144","Unicode hex":"1F878"},{"Typeface name":"Wingdings","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"129146","Unicode hex":"1F87A"},{"Typeface name":"Wingdings","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"129145","Unicode hex":"1F879"},{"Typeface name":"Wingdings","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"129147","Unicode hex":"1F87B"},{"Typeface name":"Wingdings","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"129148","Unicode hex":"1F87C"},{"Typeface name":"Wingdings","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"129149","Unicode hex":"1F87D"},{"Typeface name":"Wingdings","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"129151","Unicode hex":"1F87F"},{"Typeface name":"Wingdings","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"129150","Unicode hex":"1F87E"},{"Typeface name":"Wingdings","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"8678","Unicode hex":"21E6"},{"Typeface name":"Wingdings","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"8680","Unicode hex":"21E8"},{"Typeface name":"Wingdings","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"8679","Unicode hex":"21E7"},{"Typeface name":"Wingdings","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"8681","Unicode hex":"21E9"},{"Typeface name":"Wingdings","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"11012","Unicode hex":"2B04"},{"Typeface name":"Wingdings","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"8691","Unicode hex":"21F3"},{"Typeface name":"Wingdings","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"11009","Unicode hex":"2B01"},{"Typeface name":"Wingdings","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"11008","Unicode hex":"2B00"},{"Typeface name":"Wingdings","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"11011","Unicode hex":"2B03"},{"Typeface name":"Wingdings","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"11010","Unicode hex":"2B02"},{"Typeface name":"Wingdings","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"129196","Unicode hex":"1F8AC"},{"Typeface name":"Wingdings","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"129197","Unicode hex":"1F8AD"},{"Typeface name":"Wingdings","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"128502","Unicode hex":"1F5F6"},{"Typeface name":"Wingdings","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"10003","Unicode hex":"2713"},{"Typeface name":"Wingdings","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"128503","Unicode hex":"1F5F7"},{"Typeface name":"Wingdings","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"128505","Unicode hex":"1F5F9"},{"Typeface name":"Wingdings 2","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings 2","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128394","Unicode hex":"1F58A"},{"Typeface name":"Wingdings 2","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"128395","Unicode hex":"1F58B"},{"Typeface name":"Wingdings 2","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"128396","Unicode hex":"1F58C"},{"Typeface name":"Wingdings 2","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128397","Unicode hex":"1F58D"},{"Typeface name":"Wingdings 2","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"9988","Unicode hex":"2704"},{"Typeface name":"Wingdings 2","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"9984","Unicode hex":"2700"},{"Typeface name":"Wingdings 2","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128382","Unicode hex":"1F57E"},{"Typeface name":"Wingdings 2","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128381","Unicode hex":"1F57D"},{"Typeface name":"Wingdings 2","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"128453","Unicode hex":"1F5C5"},{"Typeface name":"Wingdings 2","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128454","Unicode hex":"1F5C6"},{"Typeface name":"Wingdings 2","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128455","Unicode hex":"1F5C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"128456","Unicode hex":"1F5C8"},{"Typeface name":"Wingdings 2","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"128457","Unicode hex":"1F5C9"},{"Typeface name":"Wingdings 2","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128458","Unicode hex":"1F5CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128459","Unicode hex":"1F5CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128460","Unicode hex":"1F5CC"},{"Typeface name":"Wingdings 2","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128461","Unicode hex":"1F5CD"},{"Typeface name":"Wingdings 2","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128203","Unicode hex":"1F4CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"128465","Unicode hex":"1F5D1"},{"Typeface name":"Wingdings 2","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"128468","Unicode hex":"1F5D4"},{"Typeface name":"Wingdings 2","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"128437","Unicode hex":"1F5B5"},{"Typeface name":"Wingdings 2","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"128438","Unicode hex":"1F5B6"},{"Typeface name":"Wingdings 2","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"128439","Unicode hex":"1F5B7"},{"Typeface name":"Wingdings 2","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"128440","Unicode hex":"1F5B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"128429","Unicode hex":"1F5AD"},{"Typeface name":"Wingdings 2","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"128431","Unicode hex":"1F5AF"},{"Typeface name":"Wingdings 2","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"128433","Unicode hex":"1F5B1"},{"Typeface name":"Wingdings 2","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"128402","Unicode hex":"1F592"},{"Typeface name":"Wingdings 2","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"128403","Unicode hex":"1F593"},{"Typeface name":"Wingdings 2","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"128408","Unicode hex":"1F598"},{"Typeface name":"Wingdings 2","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"128409","Unicode hex":"1F599"},{"Typeface name":"Wingdings 2","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128410","Unicode hex":"1F59A"},{"Typeface name":"Wingdings 2","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"128411","Unicode hex":"1F59B"},{"Typeface name":"Wingdings 2","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"128072","Unicode hex":"1F448"},{"Typeface name":"Wingdings 2","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"128073","Unicode hex":"1F449"},{"Typeface name":"Wingdings 2","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"128412","Unicode hex":"1F59C"},{"Typeface name":"Wingdings 2","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"128413","Unicode hex":"1F59D"},{"Typeface name":"Wingdings 2","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"128414","Unicode hex":"1F59E"},{"Typeface name":"Wingdings 2","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"128415","Unicode hex":"1F59F"},{"Typeface name":"Wingdings 2","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"128416","Unicode hex":"1F5A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"128417","Unicode hex":"1F5A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"128070","Unicode hex":"1F446"},{"Typeface name":"Wingdings 2","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128071","Unicode hex":"1F447"},{"Typeface name":"Wingdings 2","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"128418","Unicode hex":"1F5A2"},{"Typeface name":"Wingdings 2","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"128419","Unicode hex":"1F5A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128401","Unicode hex":"1F591"},{"Typeface name":"Wingdings 2","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"128500","Unicode hex":"1F5F4"},{"Typeface name":"Wingdings 2","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"128504","Unicode hex":"1F5F8"},{"Typeface name":"Wingdings 2","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"128501","Unicode hex":"1F5F5"},{"Typeface name":"Wingdings 2","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9745","Unicode hex":"2611"},{"Typeface name":"Wingdings 2","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"11197","Unicode hex":"2BBD"},{"Typeface name":"Wingdings 2","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"9746","Unicode hex":"2612"},{"Typeface name":"Wingdings 2","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"11198","Unicode hex":"2BBE"},{"Typeface name":"Wingdings 2","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"11199","Unicode hex":"2BBF"},{"Typeface name":"Wingdings 2","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128711","Unicode hex":"1F6C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"10680","Unicode hex":"29B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"128625","Unicode hex":"1F671"},{"Typeface name":"Wingdings 2","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"128628","Unicode hex":"1F674"},{"Typeface name":"Wingdings 2","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"128626","Unicode hex":"1F672"},{"Typeface name":"Wingdings 2","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128627","Unicode hex":"1F673"},{"Typeface name":"Wingdings 2","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"8253","Unicode hex":"203D"},{"Typeface name":"Wingdings 2","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"128633","Unicode hex":"1F679"},{"Typeface name":"Wingdings 2","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"128634","Unicode hex":"1F67A"},{"Typeface name":"Wingdings 2","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"128635","Unicode hex":"1F67B"},{"Typeface name":"Wingdings 2","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"128614","Unicode hex":"1F666"},{"Typeface name":"Wingdings 2","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"128612","Unicode hex":"1F664"},{"Typeface name":"Wingdings 2","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"128613","Unicode hex":"1F665"},{"Typeface name":"Wingdings 2","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"128615","Unicode hex":"1F667"},{"Typeface name":"Wingdings 2","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"128602","Unicode hex":"1F65A"},{"Typeface name":"Wingdings 2","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"128600","Unicode hex":"1F658"},{"Typeface name":"Wingdings 2","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"128601","Unicode hex":"1F659"},{"Typeface name":"Wingdings 2","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"128603","Unicode hex":"1F65B"},{"Typeface name":"Wingdings 2","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"9450","Unicode hex":"24EA"},{"Typeface name":"Wingdings 2","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"9312","Unicode hex":"2460"},{"Typeface name":"Wingdings 2","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"9313","Unicode hex":"2461"},{"Typeface name":"Wingdings 2","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"9314","Unicode hex":"2462"},{"Typeface name":"Wingdings 2","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"9315","Unicode hex":"2463"},{"Typeface name":"Wingdings 2","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"9316","Unicode hex":"2464"},{"Typeface name":"Wingdings 2","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"9317","Unicode hex":"2465"},{"Typeface name":"Wingdings 2","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"9318","Unicode hex":"2466"},{"Typeface name":"Wingdings 2","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"9319","Unicode hex":"2467"},{"Typeface name":"Wingdings 2","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"9320","Unicode hex":"2468"},{"Typeface name":"Wingdings 2","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"9321","Unicode hex":"2469"},{"Typeface name":"Wingdings 2","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"9471","Unicode hex":"24FF"},{"Typeface name":"Wingdings 2","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"10102","Unicode hex":"2776"},{"Typeface name":"Wingdings 2","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"10103","Unicode hex":"2777"},{"Typeface name":"Wingdings 2","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"10104","Unicode hex":"2778"},{"Typeface name":"Wingdings 2","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"10105","Unicode hex":"2779"},{"Typeface name":"Wingdings 2","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"10106","Unicode hex":"277A"},{"Typeface name":"Wingdings 2","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"10107","Unicode hex":"277B"},{"Typeface name":"Wingdings 2","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"10108","Unicode hex":"277C"},{"Typeface name":"Wingdings 2","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"10109","Unicode hex":"277D"},{"Typeface name":"Wingdings 2","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"10110","Unicode hex":"277E"},{"Typeface name":"Wingdings 2","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"10111","Unicode hex":"277F"},{"Typeface name":"Wingdings 2","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"9737","Unicode hex":"2609"},{"Typeface name":"Wingdings 2","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"127765","Unicode hex":"1F315"},{"Typeface name":"Wingdings 2","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"9789","Unicode hex":"263D"},{"Typeface name":"Wingdings 2","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"9790","Unicode hex":"263E"},{"Typeface name":"Wingdings 2","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"11839","Unicode hex":"2E3F"},{"Typeface name":"Wingdings 2","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"10013","Unicode hex":"271D"},{"Typeface name":"Wingdings 2","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"128327","Unicode hex":"1F547"},{"Typeface name":"Wingdings 2","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"128348","Unicode hex":"1F55C"},{"Typeface name":"Wingdings 2","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"128349","Unicode hex":"1F55D"},{"Typeface name":"Wingdings 2","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"128350","Unicode hex":"1F55E"},{"Typeface name":"Wingdings 2","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"128351","Unicode hex":"1F55F"},{"Typeface name":"Wingdings 2","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"128352","Unicode hex":"1F560"},{"Typeface name":"Wingdings 2","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"128353","Unicode hex":"1F561"},{"Typeface name":"Wingdings 2","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"128354","Unicode hex":"1F562"},{"Typeface name":"Wingdings 2","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"128355","Unicode hex":"1F563"},{"Typeface name":"Wingdings 2","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"128356","Unicode hex":"1F564"},{"Typeface name":"Wingdings 2","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"128357","Unicode hex":"1F565"},{"Typeface name":"Wingdings 2","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"128358","Unicode hex":"1F566"},{"Typeface name":"Wingdings 2","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"128359","Unicode hex":"1F567"},{"Typeface name":"Wingdings 2","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"128616","Unicode hex":"1F668"},{"Typeface name":"Wingdings 2","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"128617","Unicode hex":"1F669"},{"Typeface name":"Wingdings 2","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"8901","Unicode hex":"22C5"},{"Typeface name":"Wingdings 2","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128900","Unicode hex":"1F784"},{"Typeface name":"Wingdings 2","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"10625","Unicode hex":"2981"},{"Typeface name":"Wingdings 2","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"9679","Unicode hex":"25CF"},{"Typeface name":"Wingdings 2","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"9675","Unicode hex":"25CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128901","Unicode hex":"1F785"},{"Typeface name":"Wingdings 2","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128903","Unicode hex":"1F787"},{"Typeface name":"Wingdings 2","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128905","Unicode hex":"1F789"},{"Typeface name":"Wingdings 2","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"8857","Unicode hex":"2299"},{"Typeface name":"Wingdings 2","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"10687","Unicode hex":"29BF"},{"Typeface name":"Wingdings 2","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"128908","Unicode hex":"1F78C"},{"Typeface name":"Wingdings 2","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"128909","Unicode hex":"1F78D"},{"Typeface name":"Wingdings 2","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"9726","Unicode hex":"25FE"},{"Typeface name":"Wingdings 2","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"9632","Unicode hex":"25A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"9633","Unicode hex":"25A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128913","Unicode hex":"1F791"},{"Typeface name":"Wingdings 2","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128914","Unicode hex":"1F792"},{"Typeface name":"Wingdings 2","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128915","Unicode hex":"1F793"},{"Typeface name":"Wingdings 2","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"128916","Unicode hex":"1F794"},{"Typeface name":"Wingdings 2","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"9635","Unicode hex":"25A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128917","Unicode hex":"1F795"},{"Typeface name":"Wingdings 2","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128918","Unicode hex":"1F796"},{"Typeface name":"Wingdings 2","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"128919","Unicode hex":"1F797"},{"Typeface name":"Wingdings 2","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128920","Unicode hex":"1F798"},{"Typeface name":"Wingdings 2","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"11049","Unicode hex":"2B29"},{"Typeface name":"Wingdings 2","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"11045","Unicode hex":"2B25"},{"Typeface name":"Wingdings 2","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"9671","Unicode hex":"25C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"128922","Unicode hex":"1F79A"},{"Typeface name":"Wingdings 2","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"9672","Unicode hex":"25C8"},{"Typeface name":"Wingdings 2","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"128923","Unicode hex":"1F79B"},{"Typeface name":"Wingdings 2","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"128924","Unicode hex":"1F79C"},{"Typeface name":"Wingdings 2","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"128925","Unicode hex":"1F79D"},{"Typeface name":"Wingdings 2","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"128926","Unicode hex":"1F79E"},{"Typeface name":"Wingdings 2","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"11050","Unicode hex":"2B2A"},{"Typeface name":"Wingdings 2","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"11047","Unicode hex":"2B27"},{"Typeface name":"Wingdings 2","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"9674","Unicode hex":"25CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128928","Unicode hex":"1F7A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"9686","Unicode hex":"25D6"},{"Typeface name":"Wingdings 2","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"9687","Unicode hex":"25D7"},{"Typeface name":"Wingdings 2","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"11210","Unicode hex":"2BCA"},{"Typeface name":"Wingdings 2","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"11211","Unicode hex":"2BCB"},{"Typeface name":"Wingdings 2","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"11200","Unicode hex":"2BC0"},{"Typeface name":"Wingdings 2","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"11201","Unicode hex":"2BC1"},{"Typeface name":"Wingdings 2","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"11039","Unicode hex":"2B1F"},{"Typeface name":"Wingdings 2","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"11202","Unicode hex":"2BC2"},{"Typeface name":"Wingdings 2","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"11043","Unicode hex":"2B23"},{"Typeface name":"Wingdings 2","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"11042","Unicode hex":"2B22"},{"Typeface name":"Wingdings 2","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"11203","Unicode hex":"2BC3"},{"Typeface name":"Wingdings 2","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"11204","Unicode hex":"2BC4"},{"Typeface name":"Wingdings 2","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"128929","Unicode hex":"1F7A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"128930","Unicode hex":"1F7A2"},{"Typeface name":"Wingdings 2","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"128931","Unicode hex":"1F7A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"128932","Unicode hex":"1F7A4"},{"Typeface name":"Wingdings 2","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"128933","Unicode hex":"1F7A5"},{"Typeface name":"Wingdings 2","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128934","Unicode hex":"1F7A6"},{"Typeface name":"Wingdings 2","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128935","Unicode hex":"1F7A7"},{"Typeface name":"Wingdings 2","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128936","Unicode hex":"1F7A8"},{"Typeface name":"Wingdings 2","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128937","Unicode hex":"1F7A9"},{"Typeface name":"Wingdings 2","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128938","Unicode hex":"1F7AA"},{"Typeface name":"Wingdings 2","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128939","Unicode hex":"1F7AB"},{"Typeface name":"Wingdings 2","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128940","Unicode hex":"1F7AC"},{"Typeface name":"Wingdings 2","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128941","Unicode hex":"1F7AD"},{"Typeface name":"Wingdings 2","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128942","Unicode hex":"1F7AE"},{"Typeface name":"Wingdings 2","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128943","Unicode hex":"1F7AF"},{"Typeface name":"Wingdings 2","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"128944","Unicode hex":"1F7B0"},{"Typeface name":"Wingdings 2","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"128945","Unicode hex":"1F7B1"},{"Typeface name":"Wingdings 2","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"128946","Unicode hex":"1F7B2"},{"Typeface name":"Wingdings 2","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"128947","Unicode hex":"1F7B3"},{"Typeface name":"Wingdings 2","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"128948","Unicode hex":"1F7B4"},{"Typeface name":"Wingdings 2","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"128949","Unicode hex":"1F7B5"},{"Typeface name":"Wingdings 2","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"128950","Unicode hex":"1F7B6"},{"Typeface name":"Wingdings 2","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"128951","Unicode hex":"1F7B7"},{"Typeface name":"Wingdings 2","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"128952","Unicode hex":"1F7B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"128953","Unicode hex":"1F7B9"},{"Typeface name":"Wingdings 2","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"128954","Unicode hex":"1F7BA"},{"Typeface name":"Wingdings 2","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"128955","Unicode hex":"1F7BB"},{"Typeface name":"Wingdings 2","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"128956","Unicode hex":"1F7BC"},{"Typeface name":"Wingdings 2","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"128957","Unicode hex":"1F7BD"},{"Typeface name":"Wingdings 2","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"128958","Unicode hex":"1F7BE"},{"Typeface name":"Wingdings 2","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"128959","Unicode hex":"1F7BF"},{"Typeface name":"Wingdings 2","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"128960","Unicode hex":"1F7C0"},{"Typeface name":"Wingdings 2","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"128962","Unicode hex":"1F7C2"},{"Typeface name":"Wingdings 2","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"128964","Unicode hex":"1F7C4"},{"Typeface name":"Wingdings 2","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"128966","Unicode hex":"1F7C6"},{"Typeface name":"Wingdings 2","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"128969","Unicode hex":"1F7C9"},{"Typeface name":"Wingdings 2","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"128970","Unicode hex":"1F7CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"10038","Unicode hex":"2736"},{"Typeface name":"Wingdings 2","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"128972","Unicode hex":"1F7CC"},{"Typeface name":"Wingdings 2","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"128974","Unicode hex":"1F7CE"},{"Typeface name":"Wingdings 2","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"128976","Unicode hex":"1F7D0"},{"Typeface name":"Wingdings 2","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"128978","Unicode hex":"1F7D2"},{"Typeface name":"Wingdings 2","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"10041","Unicode hex":"2739"},{"Typeface name":"Wingdings 2","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"128963","Unicode hex":"1F7C3"},{"Typeface name":"Wingdings 2","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"128967","Unicode hex":"1F7C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"10031","Unicode hex":"272F"},{"Typeface name":"Wingdings 2","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"128973","Unicode hex":"1F7CD"},{"Typeface name":"Wingdings 2","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"128980","Unicode hex":"1F7D4"},{"Typeface name":"Wingdings 2","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"11212","Unicode hex":"2BCC"},{"Typeface name":"Wingdings 2","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"11213","Unicode hex":"2BCD"},{"Typeface name":"Wingdings 2","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"8251","Unicode hex":"203B"},{"Typeface name":"Wingdings 2","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"8258","Unicode hex":"2042"},{"Typeface name":"Wingdings 3","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings 3","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"11104","Unicode hex":"2B60"},{"Typeface name":"Wingdings 3","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"11106","Unicode hex":"2B62"},{"Typeface name":"Wingdings 3","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"11105","Unicode hex":"2B61"},{"Typeface name":"Wingdings 3","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"11107","Unicode hex":"2B63"},{"Typeface name":"Wingdings 3","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"11110","Unicode hex":"2B66"},{"Typeface name":"Wingdings 3","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"11111","Unicode hex":"2B67"},{"Typeface name":"Wingdings 3","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"11113","Unicode hex":"2B69"},{"Typeface name":"Wingdings 3","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"11112","Unicode hex":"2B68"},{"Typeface name":"Wingdings 3","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"11120","Unicode hex":"2B70"},{"Typeface name":"Wingdings 3","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"11122","Unicode hex":"2B72"},{"Typeface name":"Wingdings 3","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"11121","Unicode hex":"2B71"},{"Typeface name":"Wingdings 3","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"11123","Unicode hex":"2B73"},{"Typeface name":"Wingdings 3","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"11126","Unicode hex":"2B76"},{"Typeface name":"Wingdings 3","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"11128","Unicode hex":"2B78"},{"Typeface name":"Wingdings 3","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"11131","Unicode hex":"2B7B"},{"Typeface name":"Wingdings 3","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"11133","Unicode hex":"2B7D"},{"Typeface name":"Wingdings 3","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"11108","Unicode hex":"2B64"},{"Typeface name":"Wingdings 3","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"11109","Unicode hex":"2B65"},{"Typeface name":"Wingdings 3","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"11114","Unicode hex":"2B6A"},{"Typeface name":"Wingdings 3","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"11116","Unicode hex":"2B6C"},{"Typeface name":"Wingdings 3","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"11115","Unicode hex":"2B6B"},{"Typeface name":"Wingdings 3","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"11117","Unicode hex":"2B6D"},{"Typeface name":"Wingdings 3","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"11085","Unicode hex":"2B4D"},{"Typeface name":"Wingdings 3","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"11168","Unicode hex":"2BA0"},{"Typeface name":"Wingdings 3","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"11169","Unicode hex":"2BA1"},{"Typeface name":"Wingdings 3","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"11170","Unicode hex":"2BA2"},{"Typeface name":"Wingdings 3","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"11171","Unicode hex":"2BA3"},{"Typeface name":"Wingdings 3","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"11172","Unicode hex":"2BA4"},{"Typeface name":"Wingdings 3","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"11173","Unicode hex":"2BA5"},{"Typeface name":"Wingdings 3","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"11174","Unicode hex":"2BA6"},{"Typeface name":"Wingdings 3","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"11175","Unicode hex":"2BA7"},{"Typeface name":"Wingdings 3","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"11152","Unicode hex":"2B90"},{"Typeface name":"Wingdings 3","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"11153","Unicode hex":"2B91"},{"Typeface name":"Wingdings 3","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"11154","Unicode hex":"2B92"},{"Typeface name":"Wingdings 3","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"11155","Unicode hex":"2B93"},{"Typeface name":"Wingdings 3","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"11136","Unicode hex":"2B80"},{"Typeface name":"Wingdings 3","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"11139","Unicode hex":"2B83"},{"Typeface name":"Wingdings 3","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"11134","Unicode hex":"2B7E"},{"Typeface name":"Wingdings 3","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"11135","Unicode hex":"2B7F"},{"Typeface name":"Wingdings 3","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"11140","Unicode hex":"2B84"},{"Typeface name":"Wingdings 3","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"11142","Unicode hex":"2B86"},{"Typeface name":"Wingdings 3","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"11141","Unicode hex":"2B85"},{"Typeface name":"Wingdings 3","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"11143","Unicode hex":"2B87"},{"Typeface name":"Wingdings 3","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"11151","Unicode hex":"2B8F"},{"Typeface name":"Wingdings 3","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"11149","Unicode hex":"2B8D"},{"Typeface name":"Wingdings 3","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"11150","Unicode hex":"2B8E"},{"Typeface name":"Wingdings 3","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"11148","Unicode hex":"2B8C"},{"Typeface name":"Wingdings 3","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"11118","Unicode hex":"2B6E"},{"Typeface name":"Wingdings 3","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"11119","Unicode hex":"2B6F"},{"Typeface name":"Wingdings 3","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9099","Unicode hex":"238B"},{"Typeface name":"Wingdings 3","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"8996","Unicode hex":"2324"},{"Typeface name":"Wingdings 3","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"8963","Unicode hex":"2303"},{"Typeface name":"Wingdings 3","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"8997","Unicode hex":"2325"},{"Typeface name":"Wingdings 3","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"9251","Unicode hex":"2423"},{"Typeface name":"Wingdings 3","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"9085","Unicode hex":"237D"},{"Typeface name":"Wingdings 3","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"8682","Unicode hex":"21EA"},{"Typeface name":"Wingdings 3","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"11192","Unicode hex":"2BB8"},{"Typeface name":"Wingdings 3","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"129184","Unicode hex":"1F8A0"},{"Typeface name":"Wingdings 3","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"129185","Unicode hex":"1F8A1"},{"Typeface name":"Wingdings 3","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"129186","Unicode hex":"1F8A2"},{"Typeface name":"Wingdings 3","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"129187","Unicode hex":"1F8A3"},{"Typeface name":"Wingdings 3","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"129188","Unicode hex":"1F8A4"},{"Typeface name":"Wingdings 3","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"129189","Unicode hex":"1F8A5"},{"Typeface name":"Wingdings 3","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"129190","Unicode hex":"1F8A6"},{"Typeface name":"Wingdings 3","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"129191","Unicode hex":"1F8A7"},{"Typeface name":"Wingdings 3","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"129192","Unicode hex":"1F8A8"},{"Typeface name":"Wingdings 3","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"129193","Unicode hex":"1F8A9"},{"Typeface name":"Wingdings 3","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"129194","Unicode hex":"1F8AA"},{"Typeface name":"Wingdings 3","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"129195","Unicode hex":"1F8AB"},{"Typeface name":"Wingdings 3","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"129104","Unicode hex":"1F850"},{"Typeface name":"Wingdings 3","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"129106","Unicode hex":"1F852"},{"Typeface name":"Wingdings 3","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"129105","Unicode hex":"1F851"},{"Typeface name":"Wingdings 3","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"129107","Unicode hex":"1F853"},{"Typeface name":"Wingdings 3","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"129108","Unicode hex":"1F854"},{"Typeface name":"Wingdings 3","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"129109","Unicode hex":"1F855"},{"Typeface name":"Wingdings 3","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"129111","Unicode hex":"1F857"},{"Typeface name":"Wingdings 3","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"129110","Unicode hex":"1F856"},{"Typeface name":"Wingdings 3","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"129112","Unicode hex":"1F858"},{"Typeface name":"Wingdings 3","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"129113","Unicode hex":"1F859"},{"Typeface name":"Wingdings 3","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"9650","Unicode hex":"25B2"},{"Typeface name":"Wingdings 3","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"9660","Unicode hex":"25BC"},{"Typeface name":"Wingdings 3","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"9651","Unicode hex":"25B3"},{"Typeface name":"Wingdings 3","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"9661","Unicode hex":"25BD"},{"Typeface name":"Wingdings 3","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"9664","Unicode hex":"25C0"},{"Typeface name":"Wingdings 3","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"9654","Unicode hex":"25B6"},{"Typeface name":"Wingdings 3","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"9665","Unicode hex":"25C1"},{"Typeface name":"Wingdings 3","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"9655","Unicode hex":"25B7"},{"Typeface name":"Wingdings 3","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"9699","Unicode hex":"25E3"},{"Typeface name":"Wingdings 3","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"9698","Unicode hex":"25E2"},{"Typeface name":"Wingdings 3","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"9700","Unicode hex":"25E4"},{"Typeface name":"Wingdings 3","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"9701","Unicode hex":"25E5"},{"Typeface name":"Wingdings 3","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"128896","Unicode hex":"1F780"},{"Typeface name":"Wingdings 3","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128898","Unicode hex":"1F782"},{"Typeface name":"Wingdings 3","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128897","Unicode hex":"1F781"},{"Typeface name":"Wingdings 3","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"128899","Unicode hex":"1F783"},{"Typeface name":"Wingdings 3","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"11205","Unicode hex":"2BC5"},{"Typeface name":"Wingdings 3","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"11206","Unicode hex":"2BC6"},{"Typeface name":"Wingdings 3","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"11207","Unicode hex":"2BC7"},{"Typeface name":"Wingdings 3","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"11208","Unicode hex":"2BC8"},{"Typeface name":"Wingdings 3","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"11164","Unicode hex":"2B9C"},{"Typeface name":"Wingdings 3","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"11166","Unicode hex":"2B9E"},{"Typeface name":"Wingdings 3","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"11165","Unicode hex":"2B9D"},{"Typeface name":"Wingdings 3","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"11167","Unicode hex":"2B9F"},{"Typeface name":"Wingdings 3","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"129040","Unicode hex":"1F810"},{"Typeface name":"Wingdings 3","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"129042","Unicode hex":"1F812"},{"Typeface name":"Wingdings 3","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"129041","Unicode hex":"1F811"},{"Typeface name":"Wingdings 3","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"129043","Unicode hex":"1F813"},{"Typeface name":"Wingdings 3","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"129044","Unicode hex":"1F814"},{"Typeface name":"Wingdings 3","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"129046","Unicode hex":"1F816"},{"Typeface name":"Wingdings 3","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"129045","Unicode hex":"1F815"},{"Typeface name":"Wingdings 3","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"129047","Unicode hex":"1F817"},{"Typeface name":"Wingdings 3","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"129048","Unicode hex":"1F818"},{"Typeface name":"Wingdings 3","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"129050","Unicode hex":"1F81A"},{"Typeface name":"Wingdings 3","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"129049","Unicode hex":"1F819"},{"Typeface name":"Wingdings 3","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"129051","Unicode hex":"1F81B"},{"Typeface name":"Wingdings 3","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"129052","Unicode hex":"1F81C"},{"Typeface name":"Wingdings 3","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"129054","Unicode hex":"1F81E"},{"Typeface name":"Wingdings 3","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"129053","Unicode hex":"1F81D"},{"Typeface name":"Wingdings 3","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"129055","Unicode hex":"1F81F"},{"Typeface name":"Wingdings 3","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"129024","Unicode hex":"1F800"},{"Typeface name":"Wingdings 3","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"129026","Unicode hex":"1F802"},{"Typeface name":"Wingdings 3","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"129025","Unicode hex":"1F801"},{"Typeface name":"Wingdings 3","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"129027","Unicode hex":"1F803"},{"Typeface name":"Wingdings 3","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"129028","Unicode hex":"1F804"},{"Typeface name":"Wingdings 3","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"129030","Unicode hex":"1F806"},{"Typeface name":"Wingdings 3","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"129029","Unicode hex":"1F805"},{"Typeface name":"Wingdings 3","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"129031","Unicode hex":"1F807"},{"Typeface name":"Wingdings 3","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"129032","Unicode hex":"1F808"},{"Typeface name":"Wingdings 3","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"129034","Unicode hex":"1F80A"},{"Typeface name":"Wingdings 3","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"129033","Unicode hex":"1F809"},{"Typeface name":"Wingdings 3","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"129035","Unicode hex":"1F80B"},{"Typeface name":"Wingdings 3","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"129056","Unicode hex":"1F820"},{"Typeface name":"Wingdings 3","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"129058","Unicode hex":"1F822"},{"Typeface name":"Wingdings 3","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"129060","Unicode hex":"1F824"},{"Typeface name":"Wingdings 3","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"129062","Unicode hex":"1F826"},{"Typeface name":"Wingdings 3","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"129064","Unicode hex":"1F828"},{"Typeface name":"Wingdings 3","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"129066","Unicode hex":"1F82A"},{"Typeface name":"Wingdings 3","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"129068","Unicode hex":"1F82C"},{"Typeface name":"Wingdings 3","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"129180","Unicode hex":"1F89C"},{"Typeface name":"Wingdings 3","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"129181","Unicode hex":"1F89D"},{"Typeface name":"Wingdings 3","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"129182","Unicode hex":"1F89E"},{"Typeface name":"Wingdings 3","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"129183","Unicode hex":"1F89F"},{"Typeface name":"Wingdings 3","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"129070","Unicode hex":"1F82E"},{"Typeface name":"Wingdings 3","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"129072","Unicode hex":"1F830"},{"Typeface name":"Wingdings 3","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"129074","Unicode hex":"1F832"},{"Typeface name":"Wingdings 3","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"129076","Unicode hex":"1F834"},{"Typeface name":"Wingdings 3","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"129078","Unicode hex":"1F836"},{"Typeface name":"Wingdings 3","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"129080","Unicode hex":"1F838"},{"Typeface name":"Wingdings 3","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"129082","Unicode hex":"1F83A"},{"Typeface name":"Wingdings 3","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"129081","Unicode hex":"1F839"},{"Typeface name":"Wingdings 3","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"129083","Unicode hex":"1F83B"},{"Typeface name":"Wingdings 3","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"129176","Unicode hex":"1F898"},{"Typeface name":"Wingdings 3","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"129178","Unicode hex":"1F89A"},{"Typeface name":"Wingdings 3","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"129177","Unicode hex":"1F899"},{"Typeface name":"Wingdings 3","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"129179","Unicode hex":"1F89B"},{"Typeface name":"Wingdings 3","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"129084","Unicode hex":"1F83C"},{"Typeface name":"Wingdings 3","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"129086","Unicode hex":"1F83E"},{"Typeface name":"Wingdings 3","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"129085","Unicode hex":"1F83D"},{"Typeface name":"Wingdings 3","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"129087","Unicode hex":"1F83F"},{"Typeface name":"Wingdings 3","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"129088","Unicode hex":"1F840"},{"Typeface name":"Wingdings 3","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"129090","Unicode hex":"1F842"},{"Typeface name":"Wingdings 3","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"129089","Unicode hex":"1F841"},{"Typeface name":"Wingdings 3","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"129091","Unicode hex":"1F843"},{"Typeface name":"Wingdings 3","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"129092","Unicode hex":"1F844"},{"Typeface name":"Wingdings 3","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"129094","Unicode hex":"1F846"},{"Typeface name":"Wingdings 3","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"129093","Unicode hex":"1F845"},{"Typeface name":"Wingdings 3","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"129095","Unicode hex":"1F847"},{"Typeface name":"Wingdings 3","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"11176","Unicode hex":"2BA8"},{"Typeface name":"Wingdings 3","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"11177","Unicode hex":"2BA9"},{"Typeface name":"Wingdings 3","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"11178","Unicode hex":"2BAA"},{"Typeface name":"Wingdings 3","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"11179","Unicode hex":"2BAB"},{"Typeface name":"Wingdings 3","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"11180","Unicode hex":"2BAC"},{"Typeface name":"Wingdings 3","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"11181","Unicode hex":"2BAD"},{"Typeface name":"Wingdings 3","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"11182","Unicode hex":"2BAE"},{"Typeface name":"Wingdings 3","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"11183","Unicode hex":"2BAF"},{"Typeface name":"Wingdings 3","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"129120","Unicode hex":"1F860"},{"Typeface name":"Wingdings 3","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"129122","Unicode hex":"1F862"},{"Typeface name":"Wingdings 3","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"129121","Unicode hex":"1F861"},{"Typeface name":"Wingdings 3","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"129123","Unicode hex":"1F863"},{"Typeface name":"Wingdings 3","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"129124","Unicode hex":"1F864"},{"Typeface name":"Wingdings 3","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"129125","Unicode hex":"1F865"},{"Typeface name":"Wingdings 3","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"129127","Unicode hex":"1F867"},{"Typeface name":"Wingdings 3","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"129126","Unicode hex":"1F866"},{"Typeface name":"Wingdings 3","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"129136","Unicode hex":"1F870"},{"Typeface name":"Wingdings 3","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"129138","Unicode hex":"1F872"},{"Typeface name":"Wingdings 3","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"129137","Unicode hex":"1F871"},{"Typeface name":"Wingdings 3","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"129139","Unicode hex":"1F873"},{"Typeface name":"Wingdings 3","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"129140","Unicode hex":"1F874"},{"Typeface name":"Wingdings 3","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"129141","Unicode hex":"1F875"},{"Typeface name":"Wingdings 3","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"129143","Unicode hex":"1F877"},{"Typeface name":"Wingdings 3","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"129142","Unicode hex":"1F876"},{"Typeface name":"Wingdings 3","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"129152","Unicode hex":"1F880"},{"Typeface name":"Wingdings 3","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"129154","Unicode hex":"1F882"},{"Typeface name":"Wingdings 3","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"129153","Unicode hex":"1F881"},{"Typeface name":"Wingdings 3","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"129155","Unicode hex":"1F883"},{"Typeface name":"Wingdings 3","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"129156","Unicode hex":"1F884"},{"Typeface name":"Wingdings 3","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"129157","Unicode hex":"1F885"},{"Typeface name":"Wingdings 3","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"129159","Unicode hex":"1F887"},{"Typeface name":"Wingdings 3","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"129158","Unicode hex":"1F886"},{"Typeface name":"Wingdings 3","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"129168","Unicode hex":"1F890"},{"Typeface name":"Wingdings 3","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"129170","Unicode hex":"1F892"},{"Typeface name":"Wingdings 3","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"129169","Unicode hex":"1F891"},{"Typeface name":"Wingdings 3","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"129171","Unicode hex":"1F893"},{"Typeface name":"Wingdings 3","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"129172","Unicode hex":"1F894"},{"Typeface name":"Wingdings 3","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"129174","Unicode hex":"1F896"},{"Typeface name":"Wingdings 3","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"129173","Unicode hex":"1F895"},{"Typeface name":"Wingdings 3","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"129175","Unicode hex":"1F897"}];return By.default=r,By}var DU;function BP(){if(DU)return Ia;DU=1;var r=Ia&&Ia.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.hex=Ia.dec=Ia.codePoint=void 0;for(var e=r(LP()),t={},n=String.fromCodePoint?String.fromCodePoint:b,i=0,a=e.default;i<a.length;i++){var s=a[i],l=parseInt(s["Unicode dec"],10),u={codePoint:l,string:n(l)};t[s["Typeface name"].toUpperCase()+"_"+s["Dingbat dec"]]=u}function d(x,k){return t[x.toUpperCase()+"_"+k]}Ia.codePoint=d;function h(x,k){return d(x,parseInt(k,10))}Ia.dec=h;function g(x,k){return d(x,parseInt(k,16))}Ia.hex=g;function b(x){if(x<=65535)return String.fromCharCode(x);var k=Math.floor((x-65536)/1024)+55296,v=(x-65536)%1024+56320;return String.fromCharCode(k,v)}return Ia}var Ul={},_U;function Lj(){if(_U)return Ul;_U=1;var r=Nn;Ul.paragraph=e,Ul.run=t,Ul._elements=i,Ul._elementsOfType=n,Ul.getDescendantsOfType=a,Ul.getDescendants=s;function e(u){return n("paragraph",u)}function t(u){return n("run",u)}function n(u,d){return i(function(h){return h.type===u?d(h):h})}function i(u){return function d(h){if(h.children){var g=r.map(h.children,d);h=r.extend(h,{children:g})}return u(h)}}function a(u,d){return s(u).filter(function(h){return h.type===d})}function s(u){var d=[];return l(u,function(h){d.push(h)}),d}function l(u,d){u.children&&u.children.forEach(function(h){l(h,d),d(h)})}return Ul}var Py={},AU;function PP(){if(AU)return Py;AU=1,Py.uriToZipEntryName=r,Py.replaceFragment=e;function r(t,n){return n.charAt(0)==="/"?n.substr(1):t+"/"+n}function e(t,n){var i=t.indexOf("#");return i!==-1&&(t=t.substring(0,i)),t+"#"+n}return Py}var SU;function zP(){if(SU)return Ly;SU=1,Ly.createBodyReader=u,Ly._readNumberingProperties=h;var r=BP(),e=Nn,t=Bd(),n=nl().Result,i=nl().warning,a=dS(),s=Lj(),l=PP();function u(E){return{readXmlElement:function(C){return new d(E).readXmlElement(C)},readXmlElements:function(C){return new d(E).readXmlElements(C)}}}function d(E){var C=[],j=[],M=[],O=E.relationships,F=E.contentTypes,G=E.docxFile,R=E.files,W=E.numbering,U=E.styles;function X(xe){var Re=xe.map(P);return _(Re)}function P(xe){if(xe.type==="element"){var Re=re[xe.name];if(Re)return Re(xe);if(!Object.prototype.hasOwnProperty.call(b,xe.name)){var Ve=i("An unrecognised element was ignored: "+xe.name);return x([Ve])}}return k()}function B(xe){return ge(xe).map(function(Re){return{type:"paragraphProperties",styleId:Re.styleId,styleName:Re.name,alignment:xe.firstOrEmpty("w:jc").attributes["w:val"],numbering:h(Re.styleId,xe.firstOrEmpty("w:numPr"),W),indent:ee(xe.firstOrEmpty("w:ind"))}})}function ee(xe){return{start:xe.attributes["w:start"]||xe.attributes["w:left"],end:xe.attributes["w:end"]||xe.attributes["w:right"],firstLine:xe.attributes["w:firstLine"],hanging:xe.attributes["w:hanging"]}}function Y(xe){return ve(xe).map(function(Re){var Ve=xe.firstOrEmpty("w:sz").attributes["w:val"],Ze=/^[0-9]+$/.test(Ve)?parseInt(Ve,10)/2:null;return{type:"runProperties",styleId:Re.styleId,styleName:Re.name,verticalAlignment:xe.firstOrEmpty("w:vertAlign").attributes["w:val"],font:xe.firstOrEmpty("w:rFonts").attributes["w:ascii"],fontSize:Ze,isBold:J(xe.first("w:b")),isUnderline:H(xe.first("w:u")),isItalic:J(xe.first("w:i")),isStrikethrough:J(xe.first("w:strike")),isAllCaps:J(xe.first("w:caps")),isSmallCaps:J(xe.first("w:smallCaps")),highlight:z(xe.firstOrEmpty("w:highlight").attributes["w:val"])}})}function H(xe){if(xe){var Re=xe.attributes["w:val"];return Re!==void 0&&Re!=="false"&&Re!=="0"&&Re!=="none"}else return!1}function J(xe){if(xe){var Re=xe.attributes["w:val"];return Re!=="false"&&Re!=="0"}else return!1}function ie(xe){return xe!=="false"&&xe!=="0"}function z(xe){return!xe||xe==="none"?null:xe}function ge(xe){return Ie(xe,"w:pStyle","Paragraph",U.findParagraphStyleById)}function ve(xe){return Ie(xe,"w:rStyle","Run",U.findCharacterStyleById)}function je(xe){return Ie(xe,"w:tblStyle","Table",U.findTableStyleById)}function Ie(xe,Re,Ve,Ze){var Ke=[],ft=xe.first(Re),yt=null,Jn=null;if(ft&&(yt=ft.attributes["w:val"],yt)){var mi=Ze(yt);mi?Jn=mi.name:Ke.push(at(Ve,yt))}return w({styleId:yt,name:Jn},Ke)}function Pe(xe){var Re=xe.attributes["w:fldCharType"];if(Re==="begin")C.push({type:"begin",fldChar:xe}),j=[];else if(Re==="end"){var Ve=C.pop();if(Ve.type==="begin"&&(Ve=Ue(Ve)),Ve.type==="checkbox")return v(t.checkbox({checked:Ve.checked}))}else if(Re==="separate"){var Ze=C.pop(),Ke=Ue(Ze);C.push(Ke)}return k()}function fe(){var xe=e.last(C.filter(function(Re){return Re.type==="hyperlink"}));return xe?xe.options:null}function Ue(xe){return be(j.join(""),xe.type==="begin"?xe.fldChar:a.emptyElement)}function be(xe,Re){var Ve=/\s*HYPERLINK "(.*)"/.exec(xe);if(Ve)return{type:"hyperlink",options:{href:Ve[1]}};var Ze=/\s*HYPERLINK\s+\\l\s+"(.*)"/.exec(xe);if(Ze)return{type:"hyperlink",options:{anchor:Ze[1]}};var Ke=/\s*FORMCHECKBOX\s*/.exec(xe);if(Ke){var ft=Re.firstOrEmpty("w:ffData").firstOrEmpty("w:checkBox"),yt=ft.first("w:checked"),Jn=yt==null?J(ft.first("w:default")):J(yt);return{type:"checkbox",checked:Jn}}return{type:"unknown"}}function Fe(xe){return j.push(xe.text()),k()}function $e(xe){var Re=xe.attributes["w:font"],Ve=xe.attributes["w:char"],Ze=r.hex(Re,Ve);return Ze==null&&/^F0..$/.test(Ve)&&(Ze=r.hex(Re,Ve.substring(2))),Ze==null?x([i("A w:sym element with an unsupported character was ignored: char "+Ve+" in font "+Re)]):v(new t.Text(Ze.string))}function I(xe){return function(Re){var Ve=Re.attributes["w:id"];return v(new t.NoteReference({noteType:xe,noteId:Ve}))}}function he(xe){return v(t.commentReference({commentId:xe.attributes["w:id"]}))}function oe(xe){return X(xe.children)}var re={"w:p":function(xe){var Re=xe.firstOrEmpty("w:pPr"),Ve=!!Re.firstOrEmpty("w:rPr").first("w:del");if(Ve)return xe.children.forEach(function(Ke){M.push(Ke)}),k();var Ze=xe.children;return M.length>0&&(Ze=M.concat(Ze),M=[]),D.map(B(Re),X(Ze),function(Ke,ft){return new t.Paragraph(ft,Ke)}).insertExtra()},"w:r":function(xe){return D.map(Y(xe.firstOrEmpty("w:rPr")),X(xe.children),function(Re,Ve){var Ze=fe();return Ze!==null&&(Ve=[new t.Hyperlink(Ve,Ze)]),new t.Run(Ve,Re)})},"w:fldChar":Pe,"w:instrText":Fe,"w:t":function(xe){return v(new t.Text(xe.text()))},"w:tab":function(xe){return v(new t.Tab)},"w:noBreakHyphen":function(){return v(new t.Text(""))},"w:softHyphen":function(xe){return v(new t.Text(""))},"w:sym":$e,"w:hyperlink":function(xe){var Re=xe.attributes["r:id"],Ve=xe.attributes["w:anchor"];return X(xe.children).map(function(Ze){function Ke(yt){var Jn=xe.attributes["w:tgtFrame"]||null;return new t.Hyperlink(Ze,e.extend({targetFrame:Jn},yt))}if(Re){var ft=O.findTargetByRelationshipId(Re);return Ve&&(ft=l.replaceFragment(ft,Ve)),Ke({href:ft})}else return Ve?Ke({anchor:Ve}):Ze})},"w:tbl":ne,"w:tr":Ce,"w:tc":Ne,"w:footnoteReference":I("footnote"),"w:endnoteReference":I("endnote"),"w:commentReference":he,"w:br":function(xe){var Re=xe.attributes["w:type"];return Re==null||Re==="textWrapping"?v(t.lineBreak):Re==="page"?v(t.pageBreak):Re==="column"?v(t.columnBreak):x([i("Unsupported break type: "+Re)])},"w:bookmarkStart":function(xe){var Re=xe.attributes["w:name"];return Re==="_GoBack"?k():v(new t.BookmarkStart({name:Re}))},"mc:AlternateContent":function(xe){return oe(xe.firstOrEmpty("mc:Fallback"))},"w:sdt":function(xe){var Re=X(xe.firstOrEmpty("w:sdtContent").children);return Re.map(function(Ve){var Ze=xe.firstOrEmpty("w:sdtPr").first("wordml:checkbox");if(Ze){var Ke=Ze.first("wordml:checked"),ft=!!Ke&&ie(Ke.attributes["wordml:val"]),yt=t.checkbox({checked:ft}),Jn=!1,mi=Ve.map(s._elementsOfType(t.types.text,function(Ki){return Ki.value.length>0&&!Jn?(Jn=!0,yt):Ki}));return Jn?mi:yt}else return Ve})},"w:ins":oe,"w:object":oe,"w:smartTag":oe,"w:drawing":oe,"w:pict":function(xe){return oe(xe).toExtra()},"v:roundrect":oe,"v:shape":oe,"v:textbox":oe,"w:txbxContent":oe,"wp:inline":de,"wp:anchor":de,"v:imagedata":Me,"v:group":oe,"v:rect":oe};return{readXmlElement:P,readXmlElements:X};function ne(xe){var Re=ue(xe.firstOrEmpty("w:tblPr"));return X(xe.children).flatMap(se).flatMap(function(Ve){return Re.map(function(Ze){return t.Table(Ve,Ze)})})}function ue(xe){return je(xe).map(function(Re){return{styleId:Re.styleId,styleName:Re.name}})}function Ce(xe){var Re=xe.firstOrEmpty("w:trPr"),Ve=!!Re.first("w:del");if(Ve)return k();var Ze=!!Re.first("w:tblHeader");return X(xe.children).map(function(Ke){return t.TableRow(Ke,{isHeader:Ze})})}function Ne(xe){return X(xe.children).map(function(Re){var Ve=xe.firstOrEmpty("w:tcPr"),Ze=Ve.firstOrEmpty("w:gridSpan").attributes["w:val"],Ke=Ze?parseInt(Ze,10):1,ft=t.TableCell(Re,{colSpan:Ke});return ft._vMerge=pe(Ve),ft})}function pe(xe){var Re=xe.first("w:vMerge");if(Re){var Ve=Re.attributes["w:val"];return Ve==="continue"||!Ve}else return null}function se(xe){var Re=e.any(xe,function(Ke){return Ke.type!==t.types.tableRow});if(Re)return w(xe,[i("unexpected non-row element in table, cell merging may be incorrect")]);var Ve=e.any(xe,function(Ke){return e.any(Ke.children,function(ft){return ft.type!==t.types.tableCell})});if(Ve)return w(xe,[i("unexpected non-cell element in table row, cell merging may be incorrect")]);var Ze={};return xe.forEach(function(Ke){var ft=0;Ke.children.forEach(function(yt){yt._vMerge&&Ze[ft]?Ze[ft].rowSpan++:(Ze[ft]=yt,yt._vMerge=!1),ft+=yt.colSpan})}),xe.forEach(function(Ke){Ke.children=Ke.children.filter(function(ft){return!ft._vMerge}),Ke.children.forEach(function(ft){delete ft._vMerge})}),v(xe)}function de(xe){var Re=xe.getElementsByTagName("a:graphic").getElementsByTagName("a:graphicData").getElementsByTagName("pic:pic").getElementsByTagName("pic:blipFill").getElementsByTagName("a:blip");return _(Re.map(ye.bind(null,xe)))}function ye(xe,Re){var Ve=xe.first("wp:docPr").attributes,Ze=ae(Ve.descr)?Ve.title:Ve.descr,Ke=ke(Re);return Ke===null?x([i("Could not find image file for a:blip element")]):Ge(Ke,Ze)}function ae(xe){return xe==null||/^\s*$/.test(xe)}function ke(xe){var Re=xe.attributes["r:embed"],Ve=xe.attributes["r:link"];if(Re)return ze(Re);if(Ve){var Ze=O.findTargetByRelationshipId(Ve);return{path:Ze,read:R.read.bind(R,Ze)}}else return null}function Me(xe){var Re=xe.attributes["r:id"];return Re?Ge(ze(Re),xe.attributes["o:title"]):x([i("A v:imagedata element without a relationship ID was ignored")])}function ze(xe){var Re=l.uriToZipEntryName("word",O.findTargetByRelationshipId(xe));return{path:Re,read:G.read.bind(G,Re)}}function Ge(xe,Re){var Ve=F.findContentType(xe.path),Ze=t.Image({readImage:xe.read,altText:Re,contentType:Ve}),Ke=g[Ve]?[]:i("Image of type "+Ve+" is unlikely to display in web browsers");return w(Ze,Ke)}function at(xe,Re){return i(xe+" style with ID "+Re+" was referenced but not defined in the document")}}function h(E,C,j){var M=C.firstOrEmpty("w:ilvl").attributes["w:val"],O=C.firstOrEmpty("w:numId").attributes["w:val"];if(M!==void 0&&O!==void 0)return j.findLevel(O,M);if(E!=null){var F=j.findLevelByParagraphStyleId(E);if(F!=null)return F}return null}var g={"image/png":!0,"image/gif":!0,"image/jpeg":!0,"image/svg+xml":!0,"image/tiff":!0},b={"office-word:wrap":!0,"v:shadow":!0,"v:shapetype":!0,"w:annotationRef":!0,"w:bookmarkEnd":!0,"w:sectPr":!0,"w:proofErr":!0,"w:lastRenderedPageBreak":!0,"w:commentRangeStart":!0,"w:commentRangeEnd":!0,"w:del":!0,"w:footnoteRef":!0,"w:endnoteRef":!0,"w:pPr":!0,"w:rPr":!0,"w:tblPr":!0,"w:tblGrid":!0,"w:trPr":!0,"w:tcPr":!0};function x(E){return new D(null,null,E)}function k(){return new D(null)}function v(E){return new D(E)}function w(E,C){return new D(E,null,C)}function D(E,C,j){this.value=E||[],this.extra=C||[],this._result=new n({element:this.value,extra:C},j),this.messages=this._result.messages}D.prototype.toExtra=function(){return new D(null,A(this.extra,this.value),this.messages)},D.prototype.insertExtra=function(){var E=this.extra;return E&&E.length?new D(A(this.value,E),null,this.messages):this},D.prototype.map=function(E){var C=this._result.map(function(j){return E(j.element)});return new D(C.value,this.extra,C.messages)},D.prototype.flatMap=function(E){var C=this._result.flatMap(function(j){return E(j.element)._result});return new D(C.value.element,A(this.extra,C.value.extra),C.messages)},D.map=function(E,C,j){return new D(j(E.value,C.value),A(E.extra,C.extra),E.messages.concat(C.messages))};function _(E){var C=n.combine(e.pluck(E,"_result"));return new D(e.flatten(e.pluck(C.value,"element")),e.filter(e.flatten(e.pluck(C.value,"extra")),N),C.messages)}function A(E,C){return e.flatten([E,C])}function N(E){return E}return Ly}var Uk={},EU;function WP(){if(EU)return Uk;EU=1,Uk.DocumentXmlReader=t;var r=Bd(),e=nl().Result;function t(n){var i=n.bodyReader;function a(s){var l=s.first("w:body");if(l==null)throw new Error("Could not find the body element: are you sure this is a docx file?");var u=i.readXmlElements(l.children).map(function(d){return new r.Document(d,{notes:n.notes,comments:n.comments})});return new e(u.value,u.messages)}return{convertXmlToDocument:a}}return Uk}var Cg={},TU;function HP(){if(TU)return Cg;TU=1,Cg.readRelationships=r,Cg.defaultValue=new e([]),Cg.Relationships=e;function r(t){var n=[];return t.children.forEach(function(i){if(i.name==="relationships:Relationship"){var a={relationshipId:i.attributes.Id,target:i.attributes.Target,type:i.attributes.Type};n.push(a)}}),new e(n)}function e(t){var n={};t.forEach(function(a){n[a.relationshipId]=a.target});var i={};return t.forEach(function(a){i[a.type]||(i[a.type]=[]),i[a.type].push(a.target)}),{findTargetByRelationshipId:function(a){return n[a]},findTargetsByType:function(a){return i[a]||[]}}}return Cg}var zy={},CU;function qP(){if(CU)return zy;CU=1,zy.readContentTypesFromXml=e;var r={png:"png",gif:"gif",jpeg:"jpeg",jpg:"jpeg",tif:"tiff",tiff:"tiff",bmp:"bmp"};zy.defaultContentTypes=t({},{});function e(n){var i={},a={};return n.children.forEach(function(s){if(s.name==="content-types:Default"&&(i[s.attributes.Extension]=s.attributes.ContentType),s.name==="content-types:Override"){var l=s.attributes.PartName;l.charAt(0)==="/"&&(l=l.substring(1)),a[l]=s.attributes.ContentType}}),t(a,i)}function t(n,i){return{findContentType:function(a){var s=n[a];if(s)return s;var l=a.split("."),u=l[l.length-1];if(i.hasOwnProperty(u))return i[u];var d=r[u.toLowerCase()];return d?"image/"+d:null}}}return zy}var Ng={},NU;function VP(){if(NU)return Ng;NU=1;var r=Nn;Ng.readNumberingXml=t,Ng.Numbering=e,Ng.defaultNumbering=new e({},{});function e(s,l,u){var d=r.flatten(r.values(l).map(function(x){return r.values(x.levels)})),h=r.indexBy(d.filter(function(x){return x.paragraphStyleId!=null}),"paragraphStyleId");function g(x,k){var v=s[x];if(v){var w=l[v.abstractNumId];if(w){if(w.numStyleLink==null)return l[v.abstractNumId].levels[k];var D=u.findNumberingStyleById(w.numStyleLink);return g(D.numId,k)}else return null}else return null}function b(x){return h[x]||null}return{findLevel:g,findLevelByParagraphStyleId:b}}function t(s,l){if(!l||!l.styles)throw new Error("styles is missing");var u=n(s),d=a(s);return new e(d,u,l.styles)}function n(s){var l={};return s.getElementsByTagName("w:abstractNum").forEach(function(u){var d=u.attributes["w:abstractNumId"];l[d]=i(u)}),l}function i(s){var l={};s.getElementsByTagName("w:lvl").forEach(function(d){var h=d.attributes["w:ilvl"],g=d.firstOrEmpty("w:numFmt").attributes["w:val"],b=d.firstOrEmpty("w:pStyle").attributes["w:val"];l[h]={isOrdered:g!=="bullet",level:h,paragraphStyleId:b}});var u=s.firstOrEmpty("w:numStyleLink").attributes["w:val"];return{levels:l,numStyleLink:u}}function a(s){var l={};return s.getElementsByTagName("w:num").forEach(function(u){var d=u.attributes["w:numId"],h=u.first("w:abstractNumId").attributes["w:val"];l[d]={abstractNumId:h}}),l}return Ng}var Ug={},UU;function XP(){if(UU)return Ug;UU=1,Ug.readStylesXml=e,Ug.Styles=r,Ug.defaultStyles=new r({},{});function r(a,s,l,u){return{findParagraphStyleById:function(d){return a[d]},findCharacterStyleById:function(d){return s[d]},findTableStyleById:function(d){return l[d]},findNumberingStyleById:function(d){return u[d]}}}r.EMPTY=new r({},{},{},{});function e(a){var s={},l={},u={},d={},h={paragraph:s,character:l,table:u};return a.getElementsByTagName("w:style").forEach(function(g){var b=t(g);if(b.type==="numbering")d[b.styleId]=i(g);else{var x=h[b.type];x&&(x[b.styleId]=b)}}),new r(s,l,u,d)}function t(a){var s=a.attributes["w:type"],l=a.attributes["w:styleId"],u=n(a);return{type:s,styleId:l,name:u}}function n(a){var s=a.first("w:name");return s?s.attributes["w:val"]:null}function i(a){var s=a.firstOrEmpty("w:pPr").firstOrEmpty("w:numPr").firstOrEmpty("w:numId").attributes["w:val"];return{numId:s}}return Ug}var Eh={},RU;function GP(){if(RU)return Eh;RU=1;var r=Bd(),e=nl().Result;Eh.createFootnotesReader=t.bind(Eh,"footnote"),Eh.createEndnotesReader=t.bind(Eh,"endnote");function t(n,i){function a(u){return e.combine(u.getElementsByTagName("w:"+n).filter(s).map(l))}function s(u){var d=u.attributes["w:type"];return d!=="continuationSeparator"&&d!=="separator"}function l(u){var d=u.attributes["w:id"];return i.readXmlElements(u.children).map(function(h){return r.Note({noteType:n,noteId:d,body:h})})}return a}return Eh}var Rk={},jU;function $P(){if(jU)return Rk;jU=1;var r=Bd(),e=nl().Result;function t(n){function i(s){return e.combine(s.getElementsByTagName("w:comment").map(a))}function a(s){var l=s.attributes["w:id"];function u(d){return(s.attributes[d]||"").trim()||null}return n.readXmlElements(s.children).map(function(d){return r.comment({commentId:l,body:d,authorName:u("w:author"),authorInitials:u("w:initials")})})}return i}return Rk.createCommentsReader=t,Rk}var jk={},FU;function YP(){if(FU)return jk;FU=1;var r=qc();jk.Files=e;function e(){function t(n){return r.reject(new Error("could not open external image: '"+n+`'
cannot open linked files from a web browser`))}return{read:t}}return jk}var IU;function KP(){if(IU)return Uy;IU=1,Uy.read=k,Uy._findPartPaths=v;var r=qc(),e=Bd(),t=nl().Result,n=jj(),i=MP().readXmlFromZipFile,a=zP().createBodyReader,s=WP().DocumentXmlReader,l=HP(),u=qP(),d=VP(),h=XP(),g=GP(),b=$P(),x=YP().Files;function k(O,F){return F=F||{},r.props({contentTypes:E(O),partPaths:v(O),docxFile:O,files:F.path?x.relativeToFile(F.path):new x(null)}).also(function(G){return{styles:j(O,G.partPaths.styles)}}).also(function(G){return{numbering:C(O,G.partPaths.numbering,G.styles)}}).also(function(G){return{footnotes:A(G.partPaths.footnotes,G,function(R,W){return W?g.createFootnotesReader(R)(W):new t([])}),endnotes:A(G.partPaths.endnotes,G,function(R,W){return W?g.createEndnotesReader(R)(W):new t([])}),comments:A(G.partPaths.comments,G,function(R,W){return W?b.createCommentsReader(R)(W):new t([])})}}).also(function(G){return{notes:G.footnotes.flatMap(function(R){return G.endnotes.map(function(W){return new e.Notes(R.concat(W))})})}}).then(function(G){return A(G.partPaths.mainDocument,G,function(R,W){return G.notes.flatMap(function(U){return G.comments.flatMap(function(X){var P=new s({bodyReader:R,notes:U,comments:X});return P.convertXmlToDocument(W)})})})})}function v(O){return M(O).then(function(F){var G=w({docxFile:O,relationships:F,relationshipType:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",basePath:"",fallbackPath:"word/document.xml"});if(!O.exists(G))throw new Error("Could not find main document part. Are you sure this is a valid .docx file?");return _({filename:N(G),readElement:l.readRelationships,defaultValue:l.defaultValue})(O).then(function(R){function W(U){return w({docxFile:O,relationships:R,relationshipType:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/"+U,basePath:n.splitPath(G).dirname,fallbackPath:"word/"+U+".xml"})}return{mainDocument:G,comments:W("comments"),endnotes:W("endnotes"),footnotes:W("footnotes"),numbering:W("numbering"),styles:W("styles")}})})}function w(O){var F=O.docxFile,G=O.relationships,R=O.relationshipType,W=O.basePath,U=O.fallbackPath,X=G.findTargetsByType(R),P=X.map(function(ee){return D(n.joinPath(W,ee),"/")}),B=P.filter(function(ee){return F.exists(ee)});return B.length===0?U:B[0]}function D(O,F){return O.substring(0,F.length)===F?O.substring(F.length):O}function _(O){return function(F){return i(F,O.filename).then(function(G){return G?O.readElement(G):O.defaultValue})}}function A(O,F,G){var R=_({filename:N(O),readElement:l.readRelationships,defaultValue:l.defaultValue});return R(F.docxFile).then(function(W){var U=new a({relationships:W,contentTypes:F.contentTypes,docxFile:F.docxFile,numbering:F.numbering,styles:F.styles,files:F.files});return i(F.docxFile,O).then(function(X){return G(U,X)})})}function N(O){var F=n.splitPath(O);return n.joinPath(F.dirname,"_rels",F.basename+".rels")}var E=_({filename:"[Content_Types].xml",readElement:u.readContentTypesFromXml,defaultValue:u.defaultContentTypes});function C(O,F,G){return _({filename:F,readElement:function(R){return d.readNumberingXml(R,{styles:G})},defaultValue:d.defaultNumbering})(O)}function j(O,F){return _({filename:F,readElement:h.readStylesXml,defaultValue:h.defaultStyles})(O)}var M=_({filename:"_rels/.rels",readElement:l.readRelationships,defaultValue:l.defaultValue});return Uy}var Wy={},OU;function QP(){if(OU)return Wy;OU=1;var r=Nn,e=qc(),t=dS();Wy.writeStyleMap=s,Wy.readStyleMap=h;var n="http://schemas.zwobble.org/mammoth/style-map",i="mammoth/style-map",a="/"+i;function s(g,b){return g.write(i,b),l(g).then(function(){return u(g)})}function l(g){var b="word/_rels/document.xml.rels",x="http://schemas.openxmlformats.org/package/2006/relationships",k="{"+x+"}Relationship";return g.read(b,"utf8").then(t.readString).then(function(v){var w=v.children;d(w,k,"Id",{Id:"rMammothStyleMap",Type:n,Target:a});var D={"":x};return g.write(b,t.writeString(v,D))})}function u(g){var b="[Content_Types].xml",x="http://schemas.openxmlformats.org/package/2006/content-types",k="{"+x+"}Override";return g.read(b,"utf8").then(t.readString).then(function(v){var w=v.children;d(w,k,"PartName",{PartName:a,ContentType:"text/prs.mammoth.style-map"});var D={"":x};return g.write(b,t.writeString(v,D))})}function d(g,b,x,k){var v=r.find(g,function(w){return w.name===b&&w.attributes[x]===k[x]});v?v.attributes=k:g.push(t.element(b,k))}function h(g){return g.exists(i)?g.read(i,"utf8"):e.resolve(null)}return Wy}var Hy={},hu={},ro={},Rl={},MU;function Bj(){if(MU)return Rl;MU=1;var r=w1();function e(u,d,h){return n(r.element(u,d,{fresh:!1}),h)}function t(u,d,h){var g=r.element(u,d,{fresh:!0});return n(g,h)}function n(u,d){return{type:"element",tag:u,children:d||[]}}function i(u){return{type:"text",value:u}}var a={type:"forceWrite"};Rl.freshElement=t,Rl.nonFreshElement=e,Rl.elementWithTag=n,Rl.text=i,Rl.forceWrite=a;var s={br:!0,hr:!0,img:!0,input:!0};function l(u){return u.children.length===0&&s[u.tag.tagName]}return Rl.isVoidElement=l,Rl}var Fk,LU;function ZP(){if(LU)return Fk;LU=1;var r=Nn,e=Bj();function t(v){return n(d(v))}function n(v){var w=[];return v.map(i).forEach(function(D){u(w,D)}),w}function i(v){return a[v.type](v)}var a={element:s,text:l,forceWrite:l};function s(v){return e.elementWithTag(v.tag,n(v.children))}function l(v){return v}function u(v,w){var D=v[v.length-1];w.type==="element"&&!w.tag.fresh&&D&&D.type==="element"&&w.tag.matchesElement(D.tag)?(w.tag.separator&&u(D.children,e.text(w.tag.separator)),w.children.forEach(function(_){u(D.children,_)})):v.push(w)}function d(v){return h(v,function(w){return g[w.type](w)})}function h(v,w){return r.flatten(r.map(v,w),!0)}var g={element:x,text:k,forceWrite:b};function b(v){return[v]}function x(v){var w=d(v.children);return w.length===0&&!e.isVoidElement(v)?[]:[e.elementWithTag(v.tag,w)]}function k(v){return v.value.length===0?[]:[v]}return Fk=t,Fk}var BU;function v1(){if(BU)return ro;BU=1;var r=Bj();ro.freshElement=r.freshElement,ro.nonFreshElement=r.nonFreshElement,ro.elementWithTag=r.elementWithTag,ro.text=r.text,ro.forceWrite=r.forceWrite,ro.simplify=ZP();function e(s,l){l.forEach(function(u){t(s,u)})}function t(s,l){n[l.type](s,l)}var n={element:i,text:a,forceWrite:function(){}};function i(s,l){r.isVoidElement(l)?s.selfClosing(l.tag.tagName,l.tag.attributes):(s.open(l.tag.tagName,l.tag.attributes),e(s,l.children),s.close(l.tag.tagName))}function a(s,l){s.text(l.value)}return ro.write=e,ro}var PU;function w1(){if(PU)return hu;PU=1;var r=Nn,e=v1();hu.topLevelElement=t,hu.elements=n,hu.element=a;function t(l,u){return n([a(l,u,{fresh:!0})])}function n(l){return new i(l.map(function(u){return r.isString(u)?a(u):u}))}function i(l){this._elements=l}i.prototype.wrap=function(u){for(var d=u(),h=this._elements.length-1;h>=0;h--)d=this._elements[h].wrapNodes(d);return d};function a(l,u,d){return d=d||{},new s(l,u,d)}function s(l,u,d){var h={};r.isArray(l)?(l.forEach(function(g){h[g]=!0}),l=l[0]):h[l]=!0,this.tagName=l,this.tagNames=h,this.attributes=u||{},this.fresh=d.fresh,this.separator=d.separator}return s.prototype.matchesElement=function(l){return this.tagNames[l.tagName]&&r.isEqual(this.attributes||{},l.attributes||{})},s.prototype.wrap=function(u){return this.wrapNodes(u())},s.prototype.wrapNodes=function(u){return[e.elementWithTag(this,u)]},hu.empty=n([]),hu.ignore={wrap:function(){return[]}},hu}var Ik={},zU;function Pj(){return zU||(zU=1,(function(r){var e=Nn,t=qc(),n=v1();r.imgElement=i;function i(a){return function(s,l){return t.when(a(s)).then(function(u){var d={};return s.altText&&(d.alt=s.altText),e.extend(d,u),[n.freshElement("img",d)]})}}r.inline=r.imgElement,r.dataUri=i(function(a){return a.readAsBase64String().then(function(s){return{src:"data:"+a.contentType+";base64,"+s}})})})(Ik)),Ik}var Ok={},Mk={},WU;function JP(){if(WU)return Mk;WU=1;var r=Nn;Mk.writer=e;function e(l){return l=l||{},l.prettyPrint?n():i()}var t={div:!0,p:!0,ul:!0,li:!0};function n(){var l=0,u="  ",d=[],h=!0,g=!1,b=i();function x(E,C){t[E]&&A(),d.push(E),b.open(E,C),t[E]&&l++,h=!1}function k(E){t[E]&&(l--,A()),d.pop(),b.close(E)}function v(E){_();var C=N()?E:E.replace(`
`,`
`+u);b.text(C)}function w(E,C){A(),b.selfClosing(E,C)}function D(){return d.length===0||t[d[d.length-1]]}function _(){g||(A(),g=!0)}function A(){if(g=!1,!h&&D()&&!N()){b._append(`
`);for(var E=0;E<l;E++)b._append(u)}}function N(){return r.some(d,function(E){return E==="pre"})}return{asString:b.asString,open:x,close:k,text:v,selfClosing:w}}function i(){var l=[];function u(v,w){var D=g(w);l.push("<"+v+D+">")}function d(v){l.push("</"+v+">")}function h(v,w){var D=g(w);l.push("<"+v+D+" />")}function g(v){return r.map(v,function(w,D){return" "+D+'="'+s(w)+'"'}).join("")}function b(v){l.push(a(v))}function x(v){l.push(v)}function k(){return l.join("")}return{asString:k,open:u,close:d,text:b,selfClosing:h,_append:x}}function a(l){return l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function s(l){return l.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return Mk}var Lk={},HU;function e7(){if(HU)return Lk;HU=1;var r=Nn;function e(g){return t(g,g)}function t(g,b){return function(){return{start:g,end:b}}}function n(g){var b=g.href||"";return b?{start:"[",end:"]("+b+")",anchorPosition:"before"}:{}}function i(g){var b=g.src||"",x=g.alt||"";return b||x?{start:"!["+x+"]("+b+")"}:{}}function a(g){return function(b,x){return{start:x?`
`:"",end:x?"":`
`,list:{isOrdered:g.isOrdered,indent:x?x.indent+1:0,count:0}}}}function s(g,b,x){b=b||{indent:0,isOrdered:!1,count:0},b.count++,x.hasClosed=!1;var k=b.isOrdered?b.count+".":"-",v=u("	",b.indent)+k+" ";return{start:v,end:function(){if(!x.hasClosed)return x.hasClosed=!0,`
`}}}var l={p:t("",`

`),br:t("",`  
`),ul:a({isOrdered:!1}),ol:a({isOrdered:!0}),li:s,strong:e("__"),em:e("*"),a:n,img:i};(function(){for(var g=1;g<=6;g++)l["h"+g]=t(u("#",g)+" ",`

`)})();function u(g,b){return new Array(b+1).join(g)}function d(){var g=[],b=[],x=null,k={};function v(E,C){C=C||{};var j=l[E]||function(){return{}},M=j(C,x,k);b.push({end:M.end,list:x}),M.list&&(x=M.list);var O=M.anchorPosition==="before";O&&w(C),g.push(M.start||""),O||w(C)}function w(E){E.id&&g.push('<a id="'+E.id+'"></a>')}function D(E){var C=b.pop();x=C.list;var j=r.isFunction(C.end)?C.end():C.end;g.push(j||"")}function _(E,C){v(E,C),D()}function A(E){g.push(h(E))}function N(){return g.join("")}return{asString:N,open:v,close:D,text:A,selfClosing:_}}Lk.writer=d;function h(g){return g.replace(/\\/g,"\\\\").replace(/([\`\*_\{\}\[\]\(\)\#\+\-\.\!])/g,"\\$1")}return Lk}var qU;function t7(){if(qU)return Ok;qU=1;var r=JP(),e=e7();Ok.writer=t;function t(n){return n=n||{},n.outputFormat==="markdown"?e.writer():r.writer(n)}return Ok}var VU;function n7(){if(VU)return Hy;VU=1;var r=Nn,e=qc(),t=Bd(),n=w1(),i=nl(),a=Pj(),s=v1(),l=t7();Hy.DocumentConverter=u;function u(w){return{convertToHtml:function(D){var _=r.indexBy(D.type===t.types.document?D.comments:[],"commentId"),A=new d(w,_);return A.convertToHtml(D)}}}function d(w,D){var _=1,A=[],N=[];w=r.extend({ignoreEmptyParagraphs:!0},w);var E=w.idPrefix===void 0?"":w.idPrefix,C=w.ignoreEmptyParagraphs,j=n.topLevelElement("p"),M=w.styleMap||[];function O(I){var he=[],oe=G(I,he,{}),re=[];k(oe,function(ue){ue.type==="deferred"&&re.push(ue)});var ne={};return e.mapSeries(re,function(ue){return ue.value().then(function(Ce){ne[ue.id]=Ce})}).then(function(){function ue(Ne){return x(Ne,function(pe){return pe.type==="deferred"?ne[pe.id]:pe.children?[r.extend({},pe,{children:ue(pe.children)})]:[pe]})}var Ce=l.writer({prettyPrint:w.prettyPrint,outputFormat:w.outputFormat});return s.write(Ce,s.simplify(ue(oe))),new i.Result(Ce.asString(),he)})}function F(I,he,oe){return x(I,function(re){return G(re,he,oe)})}function G(I,he,oe){if(!oe)throw new Error("options not set");var re=$e[I.type];return re?re(I,he,oe):[]}function R(I,he,oe){return W(I,he).wrap(function(){var re=F(I.children,he,oe);return C?re:[s.forceWrite].concat(re)})}function W(I,he){var oe=B(I);return oe?oe.to:(I.styleId&&he.push(b("paragraph",I)),j)}function U(I,he,oe){var re=function(){return F(I.children,he,oe)},ne=[];if(I.highlight!==null){var ue=P({type:"highlight",color:I.highlight});ue&&ne.push(ue)}I.isSmallCaps&&ne.push(X("smallCaps")),I.isAllCaps&&ne.push(X("allCaps")),I.isStrikethrough&&ne.push(X("strikethrough","s")),I.isUnderline&&ne.push(X("underline")),I.verticalAlignment===t.verticalAlignment.subscript&&ne.push(n.element("sub",{},{fresh:!1})),I.verticalAlignment===t.verticalAlignment.superscript&&ne.push(n.element("sup",{},{fresh:!1})),I.isItalic&&ne.push(X("italic","em")),I.isBold&&ne.push(X("bold","strong"));var Ce=n.empty,Ne=B(I);return Ne?Ce=Ne.to:I.styleId&&he.push(b("run",I)),ne.push(Ce),ne.forEach(function(pe){re=pe.wrap.bind(pe,re)}),re()}function X(I,he){var oe=P({type:I});return oe||(he?n.element(he,{},{fresh:!1}):n.empty)}function P(I,he){var oe=B(I);return oe?oe.to:he}function B(I){for(var he=0;he<M.length;he++)if(M[he].from.matches(I))return M[he]}function ee(I){return function(he,oe){return e.attempt(function(){return I(he,oe)}).caught(function(re){return oe.push(i.error(re)),[]})}}function Y(I){return J(I.noteType,I.noteId)}function H(I){return ie(I.noteType,I.noteId)}function J(I,he){return z(I+"-"+he)}function ie(I,he){return z(I+"-ref-"+he)}function z(I){return E+I}var ge=n.elements([n.element("table",{},{fresh:!0})]);function ve(I,he,oe){return P(I,ge).wrap(function(){return je(I,he,oe)})}function je(I,he,oe){var re=r.findIndex(I.children,function(Ne){return!Ne.type===t.types.tableRow||!Ne.isHeader});re===-1&&(re=I.children.length);var ne;if(re===0)ne=F(I.children,he,r.extend({},oe,{isTableHeader:!1}));else{var ue=F(I.children.slice(0,re),he,r.extend({},oe,{isTableHeader:!0})),Ce=F(I.children.slice(re),he,r.extend({},oe,{isTableHeader:!1}));ne=[s.freshElement("thead",{},ue),s.freshElement("tbody",{},Ce)]}return[s.forceWrite].concat(ne)}function Ie(I,he,oe){var re=F(I.children,he,oe);return[s.freshElement("tr",{},[s.forceWrite].concat(re))]}function Pe(I,he,oe){var re=oe.isTableHeader?"th":"td",ne=F(I.children,he,oe),ue={};return I.colSpan!==1&&(ue.colspan=I.colSpan.toString()),I.rowSpan!==1&&(ue.rowspan=I.rowSpan.toString()),[s.freshElement(re,ue,[s.forceWrite].concat(ne))]}function fe(I,he,oe){return P(I,n.ignore).wrap(function(){var re=D[I.commentId],ne=N.length+1,ue="["+v(re)+ne+"]";return N.push({label:ue,comment:re}),[s.freshElement("a",{href:"#"+J("comment",I.commentId),id:ie("comment",I.commentId)},[s.text(ue)])]})}function Ue(I,he,oe){var re=I.label,ne=I.comment,ue=F(ne.body,he,oe).concat([s.nonFreshElement("p",{},[s.text(" "),s.freshElement("a",{href:"#"+ie("comment",ne.commentId)},[s.text("")])])]);return[s.freshElement("dt",{id:J("comment",ne.commentId)},[s.text("Comment "+re)]),s.freshElement("dd",{},ue)]}function be(I,he,oe){return Fe(I).wrap(function(){return[]})}function Fe(I){var he=B(I);return he?he.to:I.breakType==="line"?n.topLevelElement("br"):n.empty}var $e={document:function(I,he,oe){var re=F(I.children,he,oe),ne=A.map(function(Ce){return I.notes.resolve(Ce)}),ue=F(ne,he,oe);return re.concat([s.freshElement("ol",{},ue),s.freshElement("dl",{},x(N,function(Ce){return Ue(Ce,he,oe)}))])},paragraph:R,run:U,text:function(I,he,oe){return[s.text(I.value)]},tab:function(I,he,oe){return[s.text("	")]},hyperlink:function(I,he,oe){var re=I.anchor?"#"+z(I.anchor):I.href,ne={href:re};I.targetFrame!=null&&(ne.target=I.targetFrame);var ue=F(I.children,he,oe);return[s.nonFreshElement("a",ne,ue)]},checkbox:function(I){var he={type:"checkbox"};return I.checked&&(he.checked="checked"),[s.freshElement("input",he)]},bookmarkStart:function(I,he,oe){var re=s.freshElement("a",{id:z(I.name)},[s.forceWrite]);return[re]},noteReference:function(I,he,oe){A.push(I);var re=s.freshElement("a",{href:"#"+Y(I),id:H(I)},[s.text("["+_+++"]")]);return[s.freshElement("sup",{},[re])]},note:function(I,he,oe){var re=F(I.body,he,oe),ne=s.elementWithTag(n.element("p",{},{fresh:!1}),[s.text(" "),s.freshElement("a",{href:"#"+H(I)},[s.text("")])]),ue=re.concat([ne]);return s.freshElement("li",{id:Y(I)},ue)},commentReference:fe,comment:Ue,image:g(ee(w.convertImage||a.dataUri)),table:ve,tableRow:Ie,tableCell:Pe,break:be};return{convertToHtml:O}}var h=1;function g(w){return function(D,_,A){return[{type:"deferred",id:h++,value:function(){return w(D,_,A)}}]}}function b(w,D){return i.warning("Unrecognised "+w+" style: '"+D.styleName+"' (Style ID: "+D.styleId+")")}function x(w,D){return r.flatten(w.map(D),!0)}function k(w,D){w.forEach(function(_){D(_),_.children&&k(_.children,D)})}var v=Hy.commentAuthorLabel=function(D){return D.authorInitials||""};return Hy}var Bk={},XU;function r7(){if(XU)return Bk;XU=1;var r=Bd();function e(t){if(t.type==="text")return t.value;if(t.type===r.types.tab)return"	";var n=t.type==="paragraph"?`

`:"";return(t.children||[]).map(e).join("")+n}return Bk.convertElementToRawText=e,Bk}var Rg={},Oa={},Pk={},zk={exports:{}},GU;function i7(){if(GU)return zk.exports;GU=1;var r=zk.exports=function(e,t){this._tokens=e,this._startIndex=t||0};return r.prototype.head=function(){return this._tokens[this._startIndex]},r.prototype.tail=function(e){return new r(this._tokens,this._startIndex+1)},r.prototype.toArray=function(){return this._tokens.slice(this._startIndex)},r.prototype.end=function(){return this._tokens[this._tokens.length-1]},r.prototype.to=function(e){var t=this.head().source,n=e.head()||e.end();return t.to(n.source)},zk.exports}var $U;function a7(){if($U)return Pk;$U=1;var r=i7();return Pk.Parser=function(e){var t=function(n,i){return n(new r(i))};return{parseTokens:t}},Pk}var Wk={},Hk={},YU;function s7(){return YU||(YU=1,(function(r){r.none=Object.create({value:function(){throw new Error("Called value on none")},isNone:function(){return!0},isSome:function(){return!1},map:function(){return r.none},flatMap:function(){return r.none},filter:function(){return r.none},toArray:function(){return[]},orElse:e,valueOrElse:e});function e(n){return typeof n=="function"?n():n}r.some=function(n){return new t(n)};var t=function(n){this._value=n};t.prototype.value=function(){return this._value},t.prototype.isNone=function(){return!1},t.prototype.isSome=function(){return!0},t.prototype.map=function(n){return new t(n(this._value))},t.prototype.flatMap=function(n){return n(this._value)},t.prototype.filter=function(n){return n(this._value)?this:r.none},t.prototype.toArray=function(){return[this._value]},t.prototype.orElse=function(n){return this},t.prototype.valueOrElse=function(n){return this._value},r.isOption=function(n){return n===r.none||n instanceof t},r.fromNullable=function(n){return n==null?r.none:new t(n)}})(Hk)),Hk}var qk,KU;function hS(){if(KU)return qk;KU=1,qk={failure:function(e,t){if(e.length<1)throw new Error("Failure must have errors");return new r({status:"failure",remaining:t,errors:e})},error:function(e,t){if(e.length<1)throw new Error("Failure must have errors");return new r({status:"error",remaining:t,errors:e})},success:function(e,t,n){return new r({status:"success",value:e,source:n,remaining:t,errors:[]})},cut:function(e){return new r({status:"cut",remaining:e,errors:[]})}};var r=function(e){this._value=e.value,this._status=e.status,this._hasValue=e.value!==void 0,this._remaining=e.remaining,this._source=e.source,this._errors=e.errors};return r.prototype.map=function(e){return this._hasValue?new r({value:e(this._value,this._source),status:this._status,remaining:this._remaining,source:this._source,errors:this._errors}):this},r.prototype.changeRemaining=function(e){return new r({value:this._value,status:this._status,remaining:e,source:this._source,errors:this._errors})},r.prototype.isSuccess=function(){return this._status==="success"||this._status==="cut"},r.prototype.isFailure=function(){return this._status==="failure"},r.prototype.isError=function(){return this._status==="error"},r.prototype.isCut=function(){return this._status==="cut"},r.prototype.value=function(){return this._value},r.prototype.remaining=function(){return this._remaining},r.prototype.source=function(){return this._source},r.prototype.errors=function(){return this._errors},qk}var Vk={},QU;function zj(){if(QU)return Vk;QU=1,Vk.error=function(e){return new r(e)};var r=function(e){this.expected=e.expected,this.actual=e.actual,this._location=e.location};return r.prototype.describe=function(){var e=this._location?this._location.describe()+`:
`:"";return e+"Expected "+this.expected+`
but got `+this.actual},r.prototype.lineNumber=function(){return this._location.lineNumber()},r.prototype.characterNumber=function(){return this._location.characterNumber()},Vk}var Xk={},ZU;function o7(){if(ZU)return Xk;ZU=1,Xk.fromArray=function(e){var t=0,n=function(){return t<e.length};return new r({hasNext:n,next:function(){if(n())return e[t++];throw new Error("No more elements")}})};var r=function(e){this._iterator=e};return r.prototype.map=function(e){var t=this._iterator;return new r({hasNext:function(){return t.hasNext()},next:function(){return e(t.next())}})},r.prototype.filter=function(e){var t=this._iterator,n=!1,i=!1,a,s=function(){if(!n)for(n=!0,i=!1;t.hasNext()&&!i;)a=t.next(),i=e(a)};return new r({hasNext:function(){return s(),i},next:function(){s();var l=a;return n=!1,l}})},r.prototype.first=function(){var e=this._iterator;return this._iterator.hasNext()?e.next():null},r.prototype.toArray=function(){for(var e=[];this._iterator.hasNext();)e.push(this._iterator.next());return e},Xk}var JU;function Wj(){return JU||(JU=1,(function(r){var e=Nn,t=s7(),n=hS(),i=zj(),a=o7();r.token=function(b,x){var k=x!==void 0;return function(v){var w=v.head();if(w&&w.name===b&&(!k||w.value===x))return n.success(w.value,v.tail(),w.source);var D=h({name:b,value:x});return g(v,D)}},r.tokenOfType=function(b){return r.token(b)},r.firstOf=function(b,x){return e.isArray(x)||(x=Array.prototype.slice.call(arguments,1)),function(k){return a.fromArray(x).map(function(v){return v(k)}).filter(function(v){return v.isSuccess()||v.isError()}).first()||g(k,b)}},r.then=function(b,x){return function(k){var v=b(k);return v.map||console.log(v),v.map(x)}},r.sequence=function(){var b=Array.prototype.slice.call(arguments,0),x=function(v){var w=e.foldl(b,function(_,A){var N=_.result,E=_.hasCut;if(!N.isSuccess())return{result:N,hasCut:E};var C=A(N.remaining());if(C.isCut())return{result:N,hasCut:!0};if(C.isSuccess()){var j;A.isCaptured?j=N.value().withValue(A,C.value()):j=N.value();var M=C.remaining(),O=v.to(M);return{result:n.success(j,M,O),hasCut:E}}else return E?{result:n.error(C.errors(),C.remaining()),hasCut:E}:{result:C,hasCut:E}},{result:n.success(new s,v),hasCut:!1}).result,D=v.to(w.remaining());return w.map(function(_){return _.withValue(r.sequence.source,D)})};x.head=function(){var v=e.find(b,k);return r.then(x,r.sequence.extract(v))},x.map=function(v){return r.then(x,function(w){return v.apply(this,w.toArray())})};function k(v){return v.isCaptured}return x};var s=function(b,x){this._values=b||{},this._valuesArray=x||[]};s.prototype.withValue=function(b,x){if(b.captureName&&b.captureName in this._values)throw new Error('Cannot add second value for capture "'+b.captureName+'"');var k=e.clone(this._values);k[b.captureName]=x;var v=this._valuesArray.concat([x]);return new s(k,v)},s.prototype.get=function(b){if(b.captureName in this._values)return this._values[b.captureName];throw new Error('No value for capture "'+b.captureName+'"')},s.prototype.toArray=function(){return this._valuesArray},r.sequence.capture=function(b,x){var k=function(){return b.apply(this,arguments)};return k.captureName=x,k.isCaptured=!0,k},r.sequence.extract=function(b){return function(x){return x.get(b)}},r.sequence.applyValues=function(b){var x=Array.prototype.slice.call(arguments,1);return function(k){var v=x.map(function(w){return k.get(w)});return b.apply(this,v)}},r.sequence.source={captureName:"source"},r.sequence.cut=function(){return function(b){return n.cut(b)}},r.optional=function(b){return function(x){var k=b(x);return k.isSuccess()?k.map(t.some):k.isFailure()?n.success(t.none,x):k}},r.zeroOrMoreWithSeparator=function(b,x){return d(b,x,!1)},r.oneOrMoreWithSeparator=function(b,x){return d(b,x,!0)};var l=r.zeroOrMore=function(b){return function(x){for(var k=[],v;(v=b(x))&&v.isSuccess();)x=v.remaining(),k.push(v.value());return v.isError()?v:n.success(k,x)}};r.oneOrMore=function(b){return r.oneOrMoreWithSeparator(b,u)};function u(b){return n.success(null,b)}var d=function(b,x,k){return function(v){var w=b(v);if(w.isSuccess()){var D=r.sequence.capture(b,"main"),_=l(r.then(r.sequence(x,D),r.sequence.extract(D))),A=_(w.remaining());return n.success([w.value()].concat(A.value()),A.remaining())}else return k||w.isError()?w:n.success([],v)}};r.leftAssociative=function(b,x,k){var v;k?v=[{func:k,rule:x}]:v=x,v=v.map(function(D){return r.then(D.rule,function(_){return function(A,N){return D.func(A,_,N)}})});var w=r.firstOf.apply(null,["rules"].concat(v));return function(D){var _=D,A=b(D);if(!A.isSuccess())return A;for(var N=w(A.remaining());N.isSuccess();){var E=N.remaining(),C=_.to(N.remaining()),j=N.value();A=n.success(j(A.value(),C),E,C),N=w(A.remaining())}return N.isError()?N:A}},r.leftAssociative.firstOf=function(){return Array.prototype.slice.call(arguments,0)},r.nonConsuming=function(b){return function(x){return b(x).changeRemaining(x)}};var h=function(b){return b.value?b.name+' "'+b.value+'"':b.name};function g(b,x){var k,v=b.head();return v?k=i.error({expected:x,actual:h(v),location:v.source}):k=i.error({expected:x,actual:"end of tokens"}),n.failure([k],b)}})(Wk)),Wk}var Gk={exports:{}},e4;function Hj(){if(e4)return Gk.exports;e4=1,Gk.exports=function(e,t){var n={asString:function(){return e},range:function(i,a){return new r(e,t,i,a)}};return n};var r=function(e,t,n,i){this._string=e,this._description=t,this._startIndex=n,this._endIndex=i};return r.prototype.to=function(e){return new r(this._string,this._description,this._startIndex,e._endIndex)},r.prototype.describe=function(){var e=this._position(),t=this._description?this._description+`
`:"";return t+"Line number: "+e.lineNumber+`
Character number: `+e.characterNumber},r.prototype.lineNumber=function(){return this._position().lineNumber},r.prototype.characterNumber=function(){return this._position().characterNumber},r.prototype._position=function(){for(var e=this,t=0,n=function(){return e._string.indexOf(`
`,t)},i=1;n()!==-1&&n()<this._startIndex;)t=n()+1,i+=1;var a=this._startIndex-t+1;return{lineNumber:i,characterNumber:a}},Gk.exports}var $k,t4;function qj(){return t4||(t4=1,$k=function(r,e,t){this.name=r,this.value=e,t&&(this.source=t)}),$k}var Yk={},n4;function l7(){return n4||(n4=1,(function(r){var e=Wj(),t=hS();r.parser=function(a,s,l){var u={rule:b,leftAssociative:x,rightAssociative:k},d=new n(l.map(g)),h=e.firstOf(a,s);function g(D){return{name:D.name,rule:i(D.ruleBuilder.bind(null,u))}}function b(){return v(d)}function x(D){return v(d.untilExclusive(D))}function k(D){return v(d.untilInclusive(D))}function v(D){return w.bind(null,D)}function w(D,_){var A=h(_);return A.isSuccess()?D.apply(A):A}return u};function n(a){function s(g){return new n(a.slice(0,u().indexOf(g)))}function l(g){return new n(a.slice(0,u().indexOf(g)+1))}function u(){return a.map(function(g){return g.name})}function d(g){for(var b,x;;)if(b=h(g.remaining()),b.isSuccess())x=g.source().to(b.source()),g=t.success(b.value()(g.value(),x),b.remaining(),x);else return b.isFailure()?g:b}function h(g){return e.firstOf("infix",a.map(function(b){return b.rule}))(g)}return{apply:d,untilExclusive:s,untilInclusive:l}}r.infix=function(a,s){function l(u){return r.infix(a,function(d){var h=s(d);return function(g){var b=h(g);return b.map(function(x){return function(k,v){return u(k,x,v)}})}})}return{name:a,ruleBuilder:s,map:l}};var i=function(a){var s;return function(l){return s||(s=a()),s(l)}}})(Yk)),Yk}var Kk={},r4;function c7(){if(r4)return Kk;r4=1;var r=qj(),e=Hj();Kk.RegexTokeniser=t;function t(n){n=n.map(function(l){return{name:l.name,regex:new RegExp(l.regex.source,"g")}});function i(l,u){for(var d=new e(l,u),h=0,g=[];h<l.length;){var b=a(l,h,d);h=b.endIndex,g.push(b.token)}return g.push(s(l,d)),g}function a(l,u,d){for(var h=0;h<n.length;h++){var g=n[h].regex;g.lastIndex=u;var b=g.exec(l);if(b){var k=u+b[0].length;if(b.index===u&&k>u){var x=b[1],v=new r(n[h].name,x,d.range(u,k));return{token:v,endIndex:k}}}}var k=u+1,v=new r("unrecognisedCharacter",l.substring(u,k),d.range(u,k));return{token:v,endIndex:k}}function s(l,u){return new r("end",null,u.range(l.length,l.length))}return{tokenise:i}}return Kk}var i4;function Vj(){return i4||(i4=1,Oa.Parser=a7().Parser,Oa.rules=Wj(),Oa.errors=zj(),Oa.results=hS(),Oa.StringSource=Hj(),Oa.Token=qj(),Oa.bottomUp=l7(),Oa.RegexTokeniser=c7().RegexTokeniser,Oa.rule=function(r){var e;return function(t){return e||(e=r()),e(t)}}),Oa}var ir={},a4;function u7(){if(a4)return ir;a4=1,ir.paragraph=r,ir.run=e,ir.table=t,ir.bold=new i("bold"),ir.italic=new i("italic"),ir.underline=new i("underline"),ir.strikethrough=new i("strikethrough"),ir.allCaps=new i("allCaps"),ir.smallCaps=new i("smallCaps"),ir.highlight=n,ir.commentReference=new i("commentReference"),ir.lineBreak=new s({breakType:"line"}),ir.pageBreak=new s({breakType:"page"}),ir.columnBreak=new s({breakType:"column"}),ir.equalTo=u,ir.startsWith=d;function r(b){return new i("paragraph",b)}function e(b){return new i("run",b)}function t(b){return new i("table",b)}function n(b){return new a(b)}function i(b,x){x=x||{},this._elementType=b,this._styleId=x.styleId,this._styleName=x.styleName,x.list&&(this._listIndex=x.list.levelIndex,this._listIsOrdered=x.list.isOrdered)}i.prototype.matches=function(b){return b.type===this._elementType&&(this._styleId===void 0||b.styleId===this._styleId)&&(this._styleName===void 0||b.styleName&&this._styleName.operator(this._styleName.operand,b.styleName))&&(this._listIndex===void 0||l(b,this._listIndex,this._listIsOrdered))&&(this._breakType===void 0||this._breakType===b.breakType)};function a(b){b=b||{},this._color=b.color}a.prototype.matches=function(b){return b.type==="highlight"&&(this._color===void 0||b.color===this._color)};function s(b){b=b||{},this._breakType=b.breakType}s.prototype.matches=function(b){return b.type==="break"&&(this._breakType===void 0||b.breakType===this._breakType)};function l(b,x,k){return b.numbering&&b.numbering.level==x&&b.numbering.isOrdered==k}function u(b){return{operator:h,operand:b}}function d(b){return{operator:g,operand:b}}function h(b,x){return b.toUpperCase()===x.toUpperCase()}function g(b,x){return x.toUpperCase().indexOf(b.toUpperCase())===0}return ir}var Qk={},s4;function d7(){if(s4)return Qk;s4=1;var r=Vj(),e=r.RegexTokeniser;Qk.tokenise=n;var t="'((?:\\\\.|[^'])*)";function n(i){var a="(?:[a-zA-Z\\-_]|\\\\.)",s=new e([{name:"identifier",regex:new RegExp("("+a+"(?:"+a+"|[0-9])*)")},{name:"dot",regex:/\./},{name:"colon",regex:/:/},{name:"gt",regex:/>/},{name:"whitespace",regex:/\s+/},{name:"arrow",regex:/=>/},{name:"equals",regex:/=/},{name:"startsWith",regex:/\^=/},{name:"open-paren",regex:/\(/},{name:"close-paren",regex:/\)/},{name:"open-square-bracket",regex:/\[/},{name:"close-square-bracket",regex:/\]/},{name:"string",regex:new RegExp(t+"'")},{name:"unterminated-string",regex:new RegExp(t)},{name:"integer",regex:/([0-9]+)/},{name:"choice",regex:/\|/},{name:"bang",regex:/(!)/}]);return s.tokenise(i)}return Qk}var o4;function h7(){if(o4)return Rg;o4=1;var r=Nn,e=Vj(),t=u7(),n=w1(),i=d7().tokenise,a=nl();Rg.readHtmlPath=h,Rg.readDocumentMatcher=u,Rg.readStyle=s;function s(M){return N(j,M)}function l(){return e.rules.sequence(e.rules.sequence.capture(d()),e.rules.tokenOfType("whitespace"),e.rules.tokenOfType("arrow"),e.rules.sequence.capture(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("whitespace"),e.rules.sequence.capture(g())).head())),e.rules.tokenOfType("end")).map(function(M,O){return{from:M,to:O.valueOrElse(n.empty)}})}function u(M){return N(d(),M)}function d(){var M=e.rules.sequence,O=function(Ue,be){return e.rules.then(e.rules.token("identifier",Ue),function(){return be})},F=O("p",t.paragraph),G=O("r",t.run),R=e.rules.firstOf("p or r or table",F,G),W=e.rules.sequence(e.rules.tokenOfType("dot"),e.rules.sequence.cut(),e.rules.sequence.capture(b)).map(function(Ue){return{styleId:Ue}}),U=e.rules.firstOf("style name matcher",e.rules.then(e.rules.sequence(e.rules.tokenOfType("equals"),e.rules.sequence.cut(),e.rules.sequence.capture(k)).head(),function(Ue){return{styleName:t.equalTo(Ue)}}),e.rules.then(e.rules.sequence(e.rules.tokenOfType("startsWith"),e.rules.sequence.cut(),e.rules.sequence.capture(k)).head(),function(Ue){return{styleName:t.startsWith(Ue)}})),X=e.rules.sequence(e.rules.tokenOfType("open-square-bracket"),e.rules.sequence.cut(),e.rules.token("identifier","style-name"),e.rules.sequence.capture(U),e.rules.tokenOfType("close-square-bracket")).head(),P=e.rules.firstOf("list type",O("ordered-list",{isOrdered:!0}),O("unordered-list",{isOrdered:!1})),B=M(e.rules.tokenOfType("colon"),M.capture(P),M.cut(),e.rules.tokenOfType("open-paren"),M.capture(x),e.rules.tokenOfType("close-paren")).map(function(Ue,be){return{list:{isOrdered:Ue.isOrdered,levelIndex:be-1}}});function ee(Ue){var be=e.rules.firstOf.apply(e.rules.firstOf,["matcher suffix"].concat(Ue)),Fe=e.rules.zeroOrMore(be);return e.rules.then(Fe,function($e){var I={};return $e.forEach(function(he){r.extend(I,he)}),I})}var Y=M(M.capture(R),M.capture(ee([W,X,B]))).map(function(Ue,be){return Ue(be)}),H=M(e.rules.token("identifier","table"),M.capture(ee([W,X]))).map(function(Ue){return t.table(Ue)}),J=O("b",t.bold),ie=O("i",t.italic),z=O("u",t.underline),ge=O("strike",t.strikethrough),ve=O("all-caps",t.allCaps),je=O("small-caps",t.smallCaps),Ie=M(e.rules.token("identifier","highlight"),e.rules.sequence.capture(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("open-square-bracket"),e.rules.sequence.cut(),e.rules.token("identifier","color"),e.rules.tokenOfType("equals"),e.rules.sequence.capture(k),e.rules.tokenOfType("close-square-bracket")).head()))).map(function(Ue){return t.highlight({color:Ue.valueOrElse(void 0)})}),Pe=O("comment-reference",t.commentReference),fe=M(e.rules.token("identifier","br"),M.cut(),e.rules.tokenOfType("open-square-bracket"),e.rules.token("identifier","type"),e.rules.tokenOfType("equals"),M.capture(k),e.rules.tokenOfType("close-square-bracket")).map(function(Ue){switch(Ue){case"line":return t.lineBreak;case"page":return t.pageBreak;case"column":return t.columnBreak}});return e.rules.firstOf("element type",Y,H,J,ie,z,ge,ve,je,Ie,Pe,fe)}function h(M){return N(g(),M)}function g(){var M=e.rules.sequence.capture,O=e.rules.tokenOfType("whitespace"),F=e.rules.then(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("colon"),e.rules.token("identifier","fresh"))),function(U){return U.map(function(){return!0}).valueOrElse(!1)}),G=e.rules.then(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("colon"),e.rules.token("identifier","separator"),e.rules.tokenOfType("open-paren"),M(k),e.rules.tokenOfType("close-paren")).head()),function(U){return U.valueOrElse("")}),R=e.rules.oneOrMoreWithSeparator(b,e.rules.tokenOfType("choice")),W=e.rules.sequence(M(R),M(e.rules.zeroOrMore(A)),M(F),M(G)).map(function(U,X,P,B){var ee={},Y={};return X.forEach(function(H){H.append&&ee[H.name]?ee[H.name]+=" "+H.value:ee[H.name]=H.value}),P&&(Y.fresh=!0),B&&(Y.separator=B),n.element(U,ee,Y)});return e.rules.firstOf("html path",e.rules.then(e.rules.tokenOfType("bang"),function(){return n.ignore}),e.rules.then(e.rules.zeroOrMoreWithSeparator(W,e.rules.sequence(O,e.rules.tokenOfType("gt"),O)),n.elements))}var b=e.rules.then(e.rules.tokenOfType("identifier"),w),x=e.rules.tokenOfType("integer"),k=e.rules.then(e.rules.tokenOfType("string"),w),v={n:`
`,r:"\r",t:"	"};function w(M){return M.replace(/\\(.)/g,function(O,F){return v[F]||F})}var D=e.rules.sequence(e.rules.tokenOfType("open-square-bracket"),e.rules.sequence.cut(),e.rules.sequence.capture(b),e.rules.tokenOfType("equals"),e.rules.sequence.capture(k),e.rules.tokenOfType("close-square-bracket")).map(function(M,O){return{name:M,value:O,append:!1}}),_=e.rules.sequence(e.rules.tokenOfType("dot"),e.rules.sequence.cut(),e.rules.sequence.capture(b)).map(function(M){return{name:"class",value:M,append:!0}}),A=e.rules.firstOf("attribute or class",D,_);function N(M,O){var F=i(O),G=e.Parser(),R=G.parseTokens(M,F);return R.isSuccess()?a.success(R.value()):new a.Result(null,[a.warning(E(O,R))])}function E(M,O){return"Did not understand this style mapping, so ignored it: "+M+`
`+O.errors().map(C).join(`
`)}function C(M){return"Error was at character number "+M.characterNumber()+": Expected "+M.expected+" but got "+M.actual}var j=l();return Rg}var jg={},l4;function f7(){if(l4)return jg;l4=1,jg.readOptions=n;var r=Nn,e=jg._defaultStyleMap=["p.Heading1 => h1:fresh","p.Heading2 => h2:fresh","p.Heading3 => h3:fresh","p.Heading4 => h4:fresh","p.Heading5 => h5:fresh","p.Heading6 => h6:fresh","p[style-name='Heading 1'] => h1:fresh","p[style-name='Heading 2'] => h2:fresh","p[style-name='Heading 3'] => h3:fresh","p[style-name='Heading 4'] => h4:fresh","p[style-name='Heading 5'] => h5:fresh","p[style-name='Heading 6'] => h6:fresh","p[style-name='heading 1'] => h1:fresh","p[style-name='heading 2'] => h2:fresh","p[style-name='heading 3'] => h3:fresh","p[style-name='heading 4'] => h4:fresh","p[style-name='heading 5'] => h5:fresh","p[style-name='heading 6'] => h6:fresh","p.Heading => h1:fresh","p[style-name='Heading'] => h1:fresh","r[style-name='Strong'] => strong","p[style-name='footnote text'] => p:fresh","r[style-name='footnote reference'] =>","p[style-name='endnote text'] => p:fresh","r[style-name='endnote reference'] =>","p[style-name='annotation text'] => p:fresh","r[style-name='annotation reference'] =>","p[style-name='Footnote'] => p:fresh","r[style-name='Footnote anchor'] =>","p[style-name='Endnote'] => p:fresh","r[style-name='Endnote anchor'] =>","p:unordered-list(1) => ul > li:fresh","p:unordered-list(2) => ul|ol > li > ul > li:fresh","p:unordered-list(3) => ul|ol > li > ul|ol > li > ul > li:fresh","p:unordered-list(4) => ul|ol > li > ul|ol > li > ul|ol > li > ul > li:fresh","p:unordered-list(5) => ul|ol > li > ul|ol > li > ul|ol > li > ul|ol > li > ul > li:fresh","p:ordered-list(1) => ol > li:fresh","p:ordered-list(2) => ul|ol > li > ol > li:fresh","p:ordered-list(3) => ul|ol > li > ul|ol > li > ol > li:fresh","p:ordered-list(4) => ul|ol > li > ul|ol > li > ul|ol > li > ol > li:fresh","p:ordered-list(5) => ul|ol > li > ul|ol > li > ul|ol > li > ul|ol > li > ol > li:fresh","r[style-name='Hyperlink'] =>","p[style-name='Normal'] => p:fresh","p.Body => p:fresh","p[style-name='Body'] => p:fresh"],t=jg._standardOptions={transformDocument:a,includeDefaultStyleMap:!0,includeEmbeddedStyleMap:!0};function n(s){return s=s||{},r.extend({},t,s,{customStyleMap:i(s.styleMap),readStyleMap:function(){var l=this.customStyleMap;return this.includeEmbeddedStyleMap&&(l=l.concat(i(this.embeddedStyleMap))),this.includeDefaultStyleMap&&(l=l.concat(e)),l}})}function i(s){return s?r.isString(s)?s.split(`
`).map(function(l){return l.trim()}).filter(function(l){return l!==""&&l.charAt(0)!=="#"}):s:[]}function a(s){return s}return jg}var Zk={},c4;function p7(){if(c4)return Zk;c4=1;var r=qc(),e=jj();Zk.openZip=t;function t(n){return n.arrayBuffer?r.resolve(e.openArrayBuffer(n.arrayBuffer)):r.reject(new Error("Could not find file in options"))}return Zk}var Jk={},u4;function g7(){if(u4)return Jk;u4=1;var r=w1(),e=v1();Jk.element=t;function t(n){return function(i){return e.elementWithTag(r.element(n),[i])}}return Jk}var d4;function m7(){if(d4)return oa;d4=1;var r=Nn,e=KP(),t=QP(),n=n7().DocumentConverter,i=r7().convertElementToRawText,a=h7().readStyle,s=f7().readOptions,l=p7(),u=nl().Result;oa.convertToHtml=d,oa.convertToMarkdown=h,oa.convert=g,oa.extractRawText=v,oa.images=Pj(),oa.transforms=Lj(),oa.underline=g7(),oa.embedStyleMap=w,oa.readEmbeddedStyleMap=b;function d(D,_){return g(D,_)}function h(D,_){var A=Object.create(_||{});return A.outputFormat="markdown",g(D,A)}function g(D,_){return _=s(_),l.openZip(D).tap(function(A){return t.readStyleMap(A).then(function(N){_.embeddedStyleMap=N})}).then(function(A){return e.read(A,D).then(function(N){return N.map(_.transformDocument)}).then(function(N){return x(N,_)})})}function b(D){return l.openZip(D).then(t.readStyleMap)}function x(D,_){var A=k(_.readStyleMap()),N=r.extend({},_,{styleMap:A.value}),E=new n(N);return D.flatMapThen(function(C){return A.flatMapThen(function(j){return E.convertToHtml(C)})})}function k(D){return u.combine((D||[]).map(a)).map(function(_){return _.filter(function(A){return!!A})})}function v(D){return l.openZip(D).then(e.read).then(function(_){return _.map(i)})}function w(D,_){return l.openZip(D).tap(function(A){return t.writeStyleMap(A,_)}).then(function(A){return A.toArrayBuffer()}).then(function(A){return{toArrayBuffer:function(){return A},toBuffer:function(){return Buffer.from(A)}}})}return oa.styleMapping=function(){throw new Error(`Use a raw string instead of mammoth.styleMapping e.g. "p[style-name='Title'] => h1" instead of mammoth.styleMapping("p[style-name='Title'] => h1")`)},oa}var b7=m7();const x7=nx(b7),Vr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),ID=[.001,0,0,.001,0,0],eD=1.35,qi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Il={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Xj="pdfjs_internal_editor_",pt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Nt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},y7={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},pr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},A0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},On={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},jh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},k1={ERRORS:0,WARNINGS:1,INFOS:5},vm={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},qy={moveTo:0,lineTo:1,curveTo:2,closePath:3},v7={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let D1=k1.WARNINGS;function w7(r){Number.isInteger(r)&&(D1=r)}function k7(){return D1}function _1(r){D1>=k1.INFOS&&console.log(`Info: ${r}`)}function gt(r){D1>=k1.WARNINGS&&console.log(`Warning: ${r}`)}function en(r){throw new Error(r)}function Bn(r,e){r||en(e)}function D7(r){switch(r==null?void 0:r.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Gj(r,e=null,t=null){if(!r)return null;if(t&&typeof r=="string"){if(t.addDefaultProtocol&&r.startsWith("www.")){const i=r.match(/\./g);(i==null?void 0:i.length)>=2&&(r=`http://${r}`)}if(t.tryConvertEncoding)try{r=T7(r)}catch{}}const n=e?URL.parse(r,e):URL.parse(r);return D7(n)?n:null}function $j(r,e,t=!1){const n=URL.parse(r);return n?(n.hash=e,n.href):t&&Gj(r,"http://example.com")?r.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Dt(r,e,t,n=!1){return Object.defineProperty(r,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Pd=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class h4 extends Pd{constructor(e,t){super(e,"PasswordException"),this.code=t}}class tD extends Pd{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class OD extends Pd{constructor(e){super(e,"InvalidPDFException")}}class uv extends Pd{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class _7 extends Pd{constructor(e){super(e,"FormatError")}}class Ic extends Pd{constructor(e){super(e,"AbortException")}}function Yj(r){(typeof r!="object"||(r==null?void 0:r.length)===void 0)&&en("Invalid argument for bytesToString");const e=r.length,t=8192;if(e<t)return String.fromCharCode.apply(null,r);const n=[];for(let i=0;i<e;i+=t){const a=Math.min(i+t,e),s=r.subarray(i,a);n.push(String.fromCharCode.apply(null,s))}return n.join("")}function ux(r){typeof r!="string"&&en("Invalid argument for stringToBytes");const e=r.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=r.charCodeAt(n)&255;return t}function A7(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function S7(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function E7(){try{return new Function(""),!0}catch{return!1}}class Ar{static get isLittleEndian(){return Dt(this,"isLittleEndian",S7())}static get isEvalSupported(){return Dt(this,"isEvalSupported",E7())}static get isOffscreenCanvasSupported(){return Dt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Dt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Dt(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Dt(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const nD=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));var Zo,S0,MD;class tt{static makeHexColor(e,t,n){return`#${nD[e]}${nD[t]}${nD[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const i=e[n],a=e[n+1];e[n]=i*t[0]+a*t[2]+t[4],e[n+1]=i*t[1]+a*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const i=t[0],a=t[1],s=t[2],l=t[3],u=t[4],d=t[5];for(let h=0;h<6;h+=2){const g=e[n+h],b=e[n+h+1];e[n+h]=g*i+b*s+u,e[n+h+1]=g*a+b*l+d}}static applyInverseTransform(e,t){const n=e[0],i=e[1],a=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/a,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/a}static axialAlignedBoundingBox(e,t,n){const i=t[0],a=t[1],s=t[2],l=t[3],u=t[4],d=t[5],h=e[0],g=e[1],b=e[2],x=e[3];let k=i*h+u,v=k,w=i*b+u,D=w,_=l*g+d,A=_,N=l*x+d,E=N;if(a!==0||s!==0){const C=a*h,j=a*b,M=s*g,O=s*x;k+=M,D+=M,w+=O,v+=O,_+=C,E+=C,N+=j,A+=j}n[0]=Math.min(n[0],k,w,v,D),n[1]=Math.min(n[1],_,N,A,E),n[2]=Math.max(n[2],k,w,v,D),n[3]=Math.max(n[3],_,N,A,E)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],i=e[1],a=e[2],s=e[3],l=n**2+i**2,u=n*a+i*s,d=a**2+s**2,h=(l+d)/2,g=Math.sqrt(h**2-(l*d-u**2));t[0]=Math.sqrt(h+g||1),t[1]=Math.sqrt(h-g||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>s?null:[n,a,i,s]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,a){a[0]=Math.min(a[0],e,n),a[1]=Math.min(a[1],t,i),a[2]=Math.max(a[2],e,n),a[3]=Math.max(a[3],t,i)}static bezierBoundingBox(e,t,n,i,a,s,l,u,d){d[0]=Math.min(d[0],e,l),d[1]=Math.min(d[1],t,u),d[2]=Math.max(d[2],e,l),d[3]=Math.max(d[3],t,u),$(this,Zo,MD).call(this,e,n,a,l,t,i,s,u,3*(-e+3*(n-a)+l),6*(e-2*n+a),3*(n-e),d),$(this,Zo,MD).call(this,e,n,a,l,t,i,s,u,3*(-t+3*(i-s)+u),6*(t-2*i+s),3*(i-t),d)}}Zo=new WeakSet,S0=function(e,t,n,i,a,s,l,u,d,h){if(d<=0||d>=1)return;const g=1-d,b=d*d,x=b*d,k=g*(g*(g*e+3*d*t)+3*b*n)+x*i,v=g*(g*(g*a+3*d*s)+3*b*l)+x*u;h[0]=Math.min(h[0],k),h[1]=Math.min(h[1],v),h[2]=Math.max(h[2],k),h[3]=Math.max(h[3],v)},MD=function(e,t,n,i,a,s,l,u,d,h,g,b){if(Math.abs(d)<1e-12){Math.abs(h)>=1e-12&&$(this,Zo,S0).call(this,e,t,n,i,a,s,l,u,-g/h,b);return}const x=h**2-4*g*d;if(x<0)return;const k=Math.sqrt(x),v=2*d;$(this,Zo,S0).call(this,e,t,n,i,a,s,l,u,(-h+k)/v,b),$(this,Zo,S0).call(this,e,t,n,i,a,s,l,u,(-h-k)/v,b)},V(tt,Zo);function T7(r){return decodeURIComponent(escape(r))}let rD=null,f4=null;function C7(r){return rD||(rD=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,f4=new Map([["","t"]])),r.replaceAll(rD,(e,t,n)=>t?t.normalize("NFKC"):f4.get(n))}function Kj(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),Yj(r)}const fS="pdfjs_internal_id_";function N7(r,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,i,...a]=t;if(!r(n)&&!Number.isInteger(n)||!e(i))return!1;const s=a.length;let l=!0;switch(i.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;l=!1;break;default:return!1}for(const u of a)if(!(typeof u=="number"||l&&u===null))return!1;return!0}function Xr(r,e,t){return Math.min(Math.max(r,e),t)}function Qj(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(Yj(r))}function U7(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):ux(atob(r))}typeof Promise.try!="function"&&(Promise.try=function(r,...e){return new Promise(t=>{t(r(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((e,t)=>e+t,0)});const io="http://www.w3.org/2000/svg",bu=class bu{};We(bu,"CSS",96),We(bu,"PDF",72),We(bu,"PDF_TO_CSS_UNITS",bu.CSS/bu.PDF);let Oc=bu;async function dx(r,e="text"){if(Wg(r,document.baseURI)){const t=await fetch(r);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const i=new XMLHttpRequest;i.open("GET",r,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class hx{constructor({viewBox:e,userUnit:t,scale:n,rotation:i,offsetX:a=0,offsetY:s=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=i,this.offsetX=a,this.offsetY=s,n*=t;const u=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let h,g,b,x;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,g=0,b=0,x=1;break;case 90:h=0,g=1,b=1,x=0;break;case 270:h=0,g=-1,b=-1,x=0;break;case 0:h=1,g=0,b=0,x=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(b=-b,x=-x);let k,v,w,D;h===0?(k=Math.abs(d-e[1])*n+a,v=Math.abs(u-e[0])*n+s,w=(e[3]-e[1])*n,D=(e[2]-e[0])*n):(k=Math.abs(u-e[0])*n+a,v=Math.abs(d-e[1])*n+s,w=(e[2]-e[0])*n,D=(e[3]-e[1])*n),this.transform=[h*n,g*n,b*n,x*n,k-h*n*u-b*n*d,v-g*n*u-x*n*d],this.width=w,this.height=D}get rawDims(){const e=this.viewBox;return Dt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new hx({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:a})}convertToViewportPoint(e,t){const n=[e,t];return tt.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];tt.applyTransform(t,this.transform);const n=[e[2],e[3]];return tt.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return tt.applyInverseTransform(n,this.transform),n}}class pS extends Pd{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function A1(r){const e=r.length;let t=0;for(;t<e&&r[t].trim()==="";)t++;return r.substring(t,t+5).toLowerCase()==="data:"}function gS(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function R7(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function j7(r,e="document.pdf"){if(typeof r!="string")return e;if(A1(r))return gt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(r);if(!n)return e;const i=l=>{try{let u=decodeURIComponent(l);return u.includes("/")?(u=u.split("/").at(-1),u.test(/^\.pdf$/i)?u:l):u}catch{return l}},a=/\.pdf$/i,s=n.pathname.split("/").at(-1);if(a.test(s))return i(s);if(n.searchParams.size>0){const l=Array.from(n.searchParams.values()).reverse();for(const d of l)if(a.test(d))return i(d);const u=Array.from(n.searchParams.keys()).reverse();for(const d of u)if(a.test(d))return i(d)}if(n.hash){const u=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(u)return i(u[0])}return e}class p4{constructor(){We(this,"started",Object.create(null));We(this,"times",[])}time(e){e in this.started&&gt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||gt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:a}of this.times)e.push(`${n.padEnd(t)} ${a-i}ms
`);return e.join("")}}function Wg(r,e){const t=e?URL.parse(r,e):URL.parse(r);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Ea(r){r.preventDefault()}function Ln(r){r.preventDefault(),r.stopPropagation()}function F7(r){console.log("Deprecated API usage: "+r)}var Sm;class dv{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;m(this,Sm)||L(this,Sm,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=m(this,Sm).exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let u=parseInt(t[6],10);u=u>=0&&u<=59?u:0;const d=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,d==="-"?(s+=h,l+=g):d==="+"&&(s-=h,l-=g),new Date(Date.UTC(n,i,a,s,l,u))}}Sm=new WeakMap,V(dv,Sm);function I7(r,{scale:e=1,rotation:t=0}){const{width:n,height:i}=r.attributes.style,a=[0,0,parseInt(n),parseInt(i)];return new hx({viewBox:a,userUnit:1,scale:e,rotation:t})}function S1(r){if(r.startsWith("#")){const e=parseInt(r.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(e=>parseInt(e)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(gt(`Not a valid color format: "${r}"`),[0,0,0])}function O7(r){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of r.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;r.set(t,S1(n))}e.remove()}function vn(r){const{a:e,b:t,c:n,d:i,e:a,f:s}=r.getTransform();return[e,t,n,i,a,s]}function ls(r){const{a:e,b:t,c:n,d:i,e:a,f:s}=r.getTransform().invertSelf();return[e,t,n,i,a,s]}function Ud(r,e,t=!1,n=!0){if(e instanceof hx){const{pageWidth:i,pageHeight:a}=e.rawDims,{style:s}=r,l=Ar.isCSSRoundSupported,u=`var(--total-scale-factor) * ${i}px`,d=`var(--total-scale-factor) * ${a}px`,h=l?`round(down, ${u}, var(--scale-round-x))`:`calc(${u})`,g=l?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!t||e.rotation%180===0?(s.width=h,s.height=g):(s.width=g,s.height=h)}n&&r.setAttribute("data-main-rotation",e.rotation)}class Is{constructor(){const{pixelRatio:e}=Is;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i,a=-1){let s=1/0,l=1/0,u=1/0;n=Is.capPixels(n,a),n>0&&(s=Math.sqrt(n/(e*t))),i!==-1&&(l=i/e,u=i/t);const d=Math.min(s,l,u);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const LD=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Ol,Ml,da,uo,Em,Jh,ef,Tm,Sv,Zj,Dr,Jj,eF,Fh,Hg;const oo=class oo{constructor(e){V(this,Dr);V(this,Ol,null);V(this,Ml,null);V(this,da);V(this,uo,null);V(this,Em,null);V(this,Jh,null);V(this,ef,null);L(this,da,e),m(oo,Tm)||L(oo,Tm,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=L(this,Ol,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=m(this,da)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Ea,{signal:t}),e.addEventListener("pointerdown",$(oo,Sv,Zj),{signal:t}));const n=L(this,uo,document.createElement("div"));n.className="buttons",e.append(n);const i=m(this,da).toolbarPosition;if(i){const{style:a}=e,s=m(this,da)._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return m(this,Ol)}hide(){var e;m(this,Ol).classList.add("hidden"),(e=m(this,Ml))==null||e.hideDropdown()}show(){var e,t;m(this,Ol).classList.remove("hidden"),(e=m(this,Em))==null||e.shown(),(t=m(this,Jh))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=m(this,da),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",m(oo,Tm)[e]),$(this,Dr,Fh).call(this,n)&&n.addEventListener("click",i=>{t.delete()},{signal:t._signal}),m(this,uo).append(n)}async addAltText(e){const t=await e.render();$(this,Dr,Fh).call(this,t),m(this,uo).append(t,m(this,Dr,Hg)),L(this,Em,e)}addComment(e){if(m(this,Jh))return;const t=e.render();t&&($(this,Dr,Fh).call(this,t),m(this,uo).append(t,m(this,Dr,Hg)),L(this,Jh,e),e.toolbar=this)}addColorPicker(e){if(m(this,Ml))return;L(this,Ml,e);const t=e.renderButton();$(this,Dr,Fh).call(this,t),m(this,uo).append(t,m(this,Dr,Hg))}async addEditSignatureButton(e){const t=L(this,ef,await e.renderEditButton(m(this,da)));$(this,Dr,Fh).call(this,t),m(this,uo).append(t,m(this,Dr,Hg))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}updateEditSignatureButton(e){m(this,ef)&&(m(this,ef).title=e)}remove(){var e;m(this,Ol).remove(),(e=m(this,Ml))==null||e.destroy(),L(this,Ml,null)}};Ol=new WeakMap,Ml=new WeakMap,da=new WeakMap,uo=new WeakMap,Em=new WeakMap,Jh=new WeakMap,ef=new WeakMap,Tm=new WeakMap,Sv=new WeakSet,Zj=function(e){e.stopPropagation()},Dr=new WeakSet,Jj=function(e){m(this,da)._focusEventsAllowed=!1,Ln(e)},eF=function(e){m(this,da)._focusEventsAllowed=!0,Ln(e)},Fh=function(e){const t=m(this,da)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",$(this,Dr,Jj).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",$(this,Dr,eF).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Ea,{signal:t}),!0)},Hg=function(){const e=document.createElement("div");return e.className="divider",e},V(oo,Sv),V(oo,Tm,null);let BD=oo;var Cm,wu,ho,rl,tF,nF,PD;class M7{constructor(e){V(this,rl);V(this,Cm,null);V(this,wu,null);V(this,ho);L(this,ho,e)}show(e,t,n){const[i,a]=$(this,rl,nF).call(this,t,n),{style:s}=m(this,wu)||L(this,wu,$(this,rl,tF).call(this));e.append(m(this,wu)),s.insetInlineEnd=`${100*i}%`,s.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){m(this,wu).remove()}}Cm=new WeakMap,wu=new WeakMap,ho=new WeakMap,rl=new WeakSet,tF=function(){const e=L(this,wu,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=m(this,ho)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Ea,{signal:t});const n=L(this,Cm,document.createElement("div"));return n.className="buttons",e.append(n),m(this,ho).hasCommentManager()&&$(this,rl,PD).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{m(this,ho).commentSelection("floating_button")}),$(this,rl,PD).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{m(this,ho).highlightSelection("floating_button")}),e},nF=function(e,t){let n=0,i=0;for(const a of e){const s=a.y+a.height;if(s<n)continue;const l=a.x+(t?a.width:0);if(s>n){i=l,n=s;continue}t?l>i&&(i=l):l<i&&(i=l)}return[t?1-i:i,n]},PD=function(e,t,n,i){const a=document.createElement("button");a.classList.add("basic",e),a.tabIndex=0,a.setAttribute("data-l10n-id",t);const s=document.createElement("span");a.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",n);const l=m(this,ho)._signal;l instanceof AbortSignal&&!l.aborted&&(a.addEventListener("contextmenu",Ea,{signal:l}),a.addEventListener("click",i,{signal:l})),m(this,Cm).append(a)};function rF(r,e,t){for(const n of t)e.addEventListener(n,r[n].bind(r))}var Ev;class L7{constructor(){V(this,Ev,0)}get id(){return`${Xj}${Hn(this,Ev)._++}`}}Ev=new WeakMap;var tf,Nm,Cr,nf,E0;const zS=class zS{constructor(){V(this,nf);V(this,tf,Kj());V(this,Nm,0);V(this,Cr,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const a=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Dt(this,"_isSVGFittingCanvas",a)}async getFromFile(e){const{lastModified:t,name:n,size:i,type:a}=e;return $(this,nf,E0).call(this,`${t}_${n}_${i}_${a}`,e)}async getFromUrl(e){return $(this,nf,E0).call(this,e,e)}async getFromBlob(e,t){const n=await t;return $(this,nf,E0).call(this,e,n)}async getFromId(e){m(this,Cr)||L(this,Cr,new Map);const t=m(this,Cr).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){m(this,Cr)||L(this,Cr,new Map);let n=m(this,Cr).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${m(this,tf)}_${Hn(this,Nm)._++}`,refCounter:1,isSvg:!1},m(this,Cr).set(e,n),m(this,Cr).set(n.id,n),n}getSvgUrl(e){const t=m(this,Cr).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;m(this,Cr)||L(this,Cr,new Map);const t=m(this,Cr).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const a=new OffscreenCanvas(n.width,n.height);a.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=a.convertToBlob()}(i=n.close)==null||i.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${m(this,tf)}_`)}};tf=new WeakMap,Nm=new WeakMap,Cr=new WeakMap,nf=new WeakSet,E0=async function(e,t){m(this,Cr)||L(this,Cr,new Map);let n=m(this,Cr).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${m(this,tf)}_${Hn(this,Nm)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(n.url=t,i=await dx(t,"blob")):t instanceof File?i=n.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const a=zS._isSVGFittingCanvas,s=new FileReader,l=new Image,u=new Promise((d,h)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,d()},s.onload=async()=>{const g=n.svgUrl=s.result;l.src=await a?`${g}#svgView(preserveAspectRatio(none))`:g},l.onerror=s.onerror=h});s.readAsDataURL(i),await u}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){gt(i),n=null}return m(this,Cr).set(e,n),n&&m(this,Cr).set(n.id,n),n};let zD=zS;var Sn,Ll,Um,xn;class B7{constructor(e=128){V(this,Sn,[]);V(this,Ll,!1);V(this,Um);V(this,xn,-1);L(this,Um,e)}add({cmd:e,undo:t,post:n,mustExec:i,type:a=NaN,overwriteIfSameType:s=!1,keepUndo:l=!1}){if(i&&e(),m(this,Ll))return;const u={cmd:e,undo:t,post:n,type:a};if(m(this,xn)===-1){m(this,Sn).length>0&&(m(this,Sn).length=0),L(this,xn,0),m(this,Sn).push(u);return}if(s&&m(this,Sn)[m(this,xn)].type===a){l&&(u.undo=m(this,Sn)[m(this,xn)].undo),m(this,Sn)[m(this,xn)]=u;return}const d=m(this,xn)+1;d===m(this,Um)?m(this,Sn).splice(0,1):(L(this,xn,d),d<m(this,Sn).length&&m(this,Sn).splice(d)),m(this,Sn).push(u)}undo(){if(m(this,xn)===-1)return;L(this,Ll,!0);const{undo:e,post:t}=m(this,Sn)[m(this,xn)];e(),t==null||t(),L(this,Ll,!1),L(this,xn,m(this,xn)-1)}redo(){if(m(this,xn)<m(this,Sn).length-1){L(this,xn,m(this,xn)+1),L(this,Ll,!0);const{cmd:e,post:t}=m(this,Sn)[m(this,xn)];e(),t==null||t(),L(this,Ll,!1)}}hasSomethingToUndo(){return m(this,xn)!==-1}hasSomethingToRedo(){return m(this,xn)<m(this,Sn).length-1}cleanType(e){if(m(this,xn)!==-1){for(let t=m(this,xn);t>=0;t--)if(m(this,Sn)[t].type!==e){m(this,Sn).splice(t+1,m(this,xn)-t),L(this,xn,t);return}m(this,Sn).length=0,L(this,xn,-1)}}destroy(){L(this,Sn,null)}}Sn=new WeakMap,Ll=new WeakMap,Um=new WeakMap,xn=new WeakMap;var Tv,iF;class fx{constructor(e){V(this,Tv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Ar.platform;for(const[n,i,a={}]of e)for(const s of n){const l=s.startsWith("mac+");t&&l?(this.callbacks.set(s.slice(4),{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1))):!t&&!l&&(this.callbacks.set(s,{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get($(this,Tv,iF).call(this,t));if(!n)return;const{callback:i,options:{bubbles:a=!1,args:s=[],checker:l=null}}=n;l&&!l(e,t)||(i.bind(e,...s,t)(),a||Ln(t))}}Tv=new WeakSet,iF=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Cv=class Cv{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return O7(e),Dt(this,"_colors",e)}convert(e){const t=S1(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((a,s)=>a===t[s]))return Cv._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?tt.makeHexColor(...t):e}};We(Cv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let WD=Cv;var rf,Ei,af,Gn,gr,sf,fo,of,ha,po,Bl,Pl,lf,ku,hs,fa,Du,Rm,jm,cf,Fm,fs,zl,uf,Wl,ps,Nv,Hl,df,Im,ql,_u,hf,Vl,Om,$n,qt,go,Xl,Gl,Mm,ff,Lm,$l,gs,mo,Bm,Pm,pa,Ye,T0,HD,aF,sF,qg,oF,lF,cF,qD,uF,VD,XD,dF,Br,ao,hF,fF,GD,pF,Vg,$D;const Xh=class Xh{constructor(e,t,n,i,a,s,l,u,d,h,g,b,x,k,v,w){V(this,Ye);V(this,rf,new AbortController);V(this,Ei,null);V(this,af,null);V(this,Gn,new Map);V(this,gr,new Map);V(this,sf,null);V(this,fo,null);V(this,of,null);V(this,ha,new B7);V(this,po,null);V(this,Bl,null);V(this,Pl,null);V(this,lf,0);V(this,ku,new Set);V(this,hs,null);V(this,fa,null);V(this,Du,new Set);We(this,"_editorUndoBar",null);V(this,Rm,!1);V(this,jm,!1);V(this,cf,!1);V(this,Fm,null);V(this,fs,null);V(this,zl,null);V(this,uf,null);V(this,Wl,!1);V(this,ps,null);V(this,Nv,new L7);V(this,Hl,!1);V(this,df,!1);V(this,Im,!1);V(this,ql,null);V(this,_u,null);V(this,hf,null);V(this,Vl,null);V(this,Om,null);V(this,$n,pt.NONE);V(this,qt,new Set);V(this,go,null);V(this,Xl,null);V(this,Gl,null);V(this,Mm,null);V(this,ff,null);V(this,Lm,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});V(this,$l,[0,0]);V(this,gs,null);V(this,mo,null);V(this,Bm,null);V(this,Pm,null);V(this,pa,null);const D=this._signal=m(this,rf).signal;L(this,mo,e),L(this,Bm,t),L(this,Pm,n),L(this,sf,i),L(this,po,a),L(this,Xl,s),L(this,ff,u),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:D}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:D}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:D}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:D}),l._on("setpreference",this.onSetPreference.bind(this),{signal:D}),l._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:D}),window.addEventListener("pointerdown",()=>{L(this,df,!0)},{capture:!0,signal:D}),window.addEventListener("pointerup",()=>{L(this,df,!1)},{capture:!0,signal:D}),$(this,Ye,oF).call(this),$(this,Ye,dF).call(this),$(this,Ye,qD).call(this),L(this,fo,u.annotationStorage),L(this,Fm,u.filterFactory),L(this,Gl,d),L(this,uf,h||null),L(this,Rm,g),L(this,jm,b),L(this,cf,x),L(this,Om,k||null),this.viewParameters={realScale:Oc.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=w!==!1}static get _keyboardManager(){const e=Xh.prototype,t=s=>m(s,mo).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&s.hasSomethingToControl(),n=(s,{target:l})=>{if(l instanceof HTMLInputElement){const{type:u}=l;return u!=="text"&&u!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Dt(this,"_keyboardManager",new fx([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(s,{target:l})=>!(l instanceof HTMLButtonElement)&&m(s,mo).contains(l)&&!s.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(s,{target:l})=>!(l instanceof HTMLButtonElement)&&m(s,mo).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}destroy(){var e,t,n,i,a,s,l,u,d;(e=m(this,pa))==null||e.resolve(),L(this,pa,null),(t=m(this,rf))==null||t.abort(),L(this,rf,null),this._signal=null;for(const h of m(this,gr).values())h.destroy();m(this,gr).clear(),m(this,Gn).clear(),m(this,Du).clear(),(n=m(this,Vl))==null||n.clear(),L(this,Ei,null),m(this,qt).clear(),m(this,ha).destroy(),(i=m(this,sf))==null||i.destroy(),(a=m(this,po))==null||a.destroy(),(s=m(this,Xl))==null||s.destroy(),(l=m(this,ps))==null||l.hide(),L(this,ps,null),(u=m(this,hf))==null||u.destroy(),L(this,hf,null),L(this,af,null),m(this,fs)&&(clearTimeout(m(this,fs)),L(this,fs,null)),m(this,gs)&&(clearTimeout(m(this,gs)),L(this,gs,null)),(d=this._editorUndoBar)==null||d.destroy(),L(this,ff,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return m(this,Om)}get useNewAltTextFlow(){return m(this,jm)}get useNewAltTextWhenAddingImage(){return m(this,cf)}get hcmFilter(){return Dt(this,"hcmFilter",m(this,Gl)?m(this,Fm).addHCMFilter(m(this,Gl).foreground,m(this,Gl).background):"none")}get direction(){return Dt(this,"direction",getComputedStyle(m(this,mo)).direction)}get _highlightColors(){return Dt(this,"_highlightColors",m(this,uf)?new Map(m(this,uf).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Dt(this,"highlightColors",null);const t=new Map,n=!!m(this,Gl);for(const[i,a]of e){const s=i.endsWith("_HCM");if(n&&s){t.set(i.replace("_HCM",""),a);continue}!n&&!s&&t.set(i,a)}return Dt(this,"highlightColors",t)}get highlightColorNames(){return Dt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),L(this,Pl,e)}setMainHighlightColorPicker(e){L(this,hf,e)}editAltText(e,t=!1){var n;(n=m(this,sf))==null||n.editAltText(this,e,t)}hasCommentManager(){return!!m(this,po)}editComment(e,t){var n;(n=m(this,po))==null||n.open(this,e,t)}getSignature(e){var t;(t=m(this,Xl))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return m(this,Xl)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":L(this,cf,t);break}}onPageChanging({pageNumber:e}){L(this,lf,e-1)}focusMainContainer(){m(this,mo).focus()}findParent(e,t){for(const n of m(this,gr).values()){const{x:i,y:a,width:s,height:l}=n.div.getBoundingClientRect();if(e>=i&&e<=i+s&&t>=a&&t<=a+l)return n}return null}disableUserSelect(e=!1){m(this,Bm).classList.toggle("noUserSelect",e)}addShouldRescale(e){m(this,Du).add(e)}removeShouldRescale(e){m(this,Du).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Oc.PDF_TO_CSS_UNITS;for(const n of m(this,Du))n.onScaleChanging();(t=m(this,Pl))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:l}=n,u=n.toString(),h=$(this,Ye,T0).call(this,n).closest(".textLayer"),g=this.getSelectionBoxes(h);if(!g)return;n.empty();const b=$(this,Ye,HD).call(this,h),x=m(this,$n)===pt.NONE,k=()=>{const v=b==null?void 0:b.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:l,text:u});x&&this.showAllEditors("highlight",!0,!0),t&&(v==null||v.editComment())};if(x){this.switchToMode(pt.HIGHLIGHT,k);return}k()}commentSelection(e=""){this.highlightSelection(e,!0)}addToAnnotationStorage(e){!e.isEmpty()&&m(this,fo)&&!m(this,fo).has(e.id)&&m(this,fo).setValue(e.id,e)}a11yAlert(e,t=null){const n=m(this,Pm);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,m(this,Wl)&&(L(this,Wl,!1),$(this,Ye,qg).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of m(this,qt))if(t.div.contains(e)){L(this,_u,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!m(this,_u))return;const[e,t]=m(this,_u);L(this,_u,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){$(this,Ye,qD).call(this),$(this,Ye,VD).call(this)}removeEditListeners(){$(this,Ye,uF).call(this),$(this,Ye,XD).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of m(this,fa))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of m(this,fa))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=m(this,Ei))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of m(this,qt)){const a=i.serialize(!0);a&&t.push(a)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const s of m(this,fa))if(s.isHandlingMimeForPasting(a.type)){s.paste(a,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){gt(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const u of n){const d=await i.deserialize(u);if(!d)return;a.push(d)}const s=()=>{for(const u of a)$(this,Ye,GD).call(this,u);$(this,Ye,$D).call(this,a)},l=()=>{for(const u of a)u.remove()};this.addCommands({cmd:s,undo:l,mustExec:!0})}catch(a){gt(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),m(this,$n)!==pt.NONE&&!this.isEditorHandlingKeyboard&&Xh._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,m(this,Wl)&&(L(this,Wl,!1),$(this,Ye,qg).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?($(this,Ye,lF).call(this),$(this,Ye,VD).call(this),$(this,Ye,Br).call(this,{isEditing:m(this,$n)!==pt.NONE,isEmpty:$(this,Ye,Vg).call(this),hasSomethingToUndo:m(this,ha).hasSomethingToUndo(),hasSomethingToRedo:m(this,ha).hasSomethingToRedo(),hasSelectedEditor:!1})):($(this,Ye,cF).call(this),$(this,Ye,XD).call(this),$(this,Ye,Br).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!m(this,fa)){L(this,fa,e);for(const t of m(this,fa))$(this,Ye,ao).call(this,t.defaultPropertiesToUpdate)}}getId(){return m(this,Nv).id}get currentLayer(){return m(this,gr).get(m(this,lf))}getLayer(e){return m(this,gr).get(e)}get currentPageIndex(){return m(this,lf)}addLayer(e){m(this,gr).set(e.pageIndex,e),m(this,Hl)?e.enable():e.disable()}removeLayer(e){m(this,gr).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,i=!1,a=!1){var s,l,u,d,h;if(m(this,$n)!==e&&!(m(this,pa)&&(await m(this,pa).promise,!m(this,pa)))){if(L(this,pa,Promise.withResolvers()),(s=m(this,Pl))==null||s.commitOrRemove(),m(this,$n)===pt.POPUP&&((l=m(this,po))==null||l.hideSidebar()),L(this,$n,e),e===pt.NONE){this.setEditingState(!1),$(this,Ye,fF).call(this),(u=this._editorUndoBar)==null||u.hide(),m(this,pa).resolve();return}e===pt.SIGNATURE&&await((d=m(this,Xl))==null?void 0:d.loadSignatures()),e===pt.POPUP&&(m(this,af)||L(this,af,await m(this,ff).getAnnotationsByType(new Set(m(this,fa).map(g=>g._editorType)))),(h=m(this,po))==null||h.showSidebar(m(this,af))),this.setEditingState(!0),await $(this,Ye,hF).call(this),this.unselectAll();for(const g of m(this,gr).values())g.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),m(this,pa).resolve();return}for(const g of m(this,Gn).values())g.annotationElementId===t||g.id===t?(this.setSelected(g),a?g.editComment():i&&g.enterInEditMode()):g.unselect();m(this,pa).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==m(this,$n)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(m(this,fa)){switch(e){case Nt.CREATE:this.currentLayer.addNewEditor(t);return;case Nt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(m(this,Mm)||L(this,Mm,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of m(this,qt))n.updateParams(e,t);else for(const n of m(this,fa))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var a;for(const s of m(this,Gn).values())s.editorType===e&&s.show(t);(((a=m(this,Mm))==null?void 0:a.get(Nt.HIGHLIGHT_SHOW_ALL))??!0)!==t&&$(this,Ye,ao).call(this,[[Nt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(m(this,Im)!==e){L(this,Im,e);for(const t of m(this,gr).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of m(this,Gn).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return m(this,Gn).get(e)}addEditor(e){m(this,Gn).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(m(this,fs)&&clearTimeout(m(this,fs)),L(this,fs,setTimeout(()=>{this.focusMainContainer(),L(this,fs,null)},0))),m(this,Gn).delete(e.id),e.annotationElementId&&((t=m(this,Vl))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!m(this,ku).has(e.annotationElementId))&&((n=m(this,fo))==null||n.remove(e.id))}addDeletedAnnotationElement(e){m(this,ku).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return m(this,ku).has(e)}removeDeletedAnnotationElement(e){m(this,ku).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){m(this,Ei)!==e&&(L(this,Ei,e),e&&$(this,Ye,ao).call(this,e.propertiesToUpdate))}updateUI(e){m(this,Ye,pF)===e&&$(this,Ye,ao).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){$(this,Ye,ao).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(m(this,qt).has(e)){m(this,qt).delete(e),e.unselect(),$(this,Ye,Br).call(this,{hasSelectedEditor:this.hasSelection});return}m(this,qt).add(e),e.select(),$(this,Ye,ao).call(this,e.propertiesToUpdate),$(this,Ye,Br).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=m(this,Pl))==null||t.commitOrRemove();for(const n of m(this,qt))n!==e&&n.unselect();m(this,qt).clear(),m(this,qt).add(e),e.select(),$(this,Ye,ao).call(this,e.propertiesToUpdate),$(this,Ye,Br).call(this,{hasSelectedEditor:!0})}isSelected(e){return m(this,qt).has(e)}get firstSelectedEditor(){return m(this,qt).values().next().value}unselect(e){e.unselect(),m(this,qt).delete(e),$(this,Ye,Br).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return m(this,qt).size!==0}get isEnterHandled(){return m(this,qt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;m(this,ha).undo(),$(this,Ye,Br).call(this,{hasSomethingToUndo:m(this,ha).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:$(this,Ye,Vg).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){m(this,ha).redo(),$(this,Ye,Br).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:m(this,ha).hasSomethingToRedo(),isEmpty:$(this,Ye,Vg).call(this)})}addCommands(e){m(this,ha).add(e),$(this,Ye,Br).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:$(this,Ye,Vg).call(this)})}cleanUndoStack(e){m(this,ha).cleanType(e)}delete(){var a;this.commitOrRemove();const e=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...m(this,qt)],n=()=>{var s;(s=this._editorUndoBar)==null||s.show(i,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},i=()=>{for(const s of t)$(this,Ye,GD).call(this,s)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=m(this,Ei))==null||e.commitOrRemove()}hasSomethingToControl(){return m(this,Ei)||this.hasSelection}selectAll(){for(const e of m(this,qt))e.commit();$(this,Ye,$D).call(this,m(this,Gn).values())}unselectAll(){var e;if(!(m(this,Ei)&&(m(this,Ei).commitOrRemove(),m(this,$n)!==pt.NONE))&&!((e=m(this,Pl))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of m(this,qt))t.unselect();m(this,qt).clear(),$(this,Ye,Br).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;m(this,$l)[0]+=e,m(this,$l)[1]+=t;const[i,a]=m(this,$l),s=[...m(this,qt)],l=1e3;m(this,gs)&&clearTimeout(m(this,gs)),L(this,gs,setTimeout(()=>{L(this,gs,null),m(this,$l)[0]=m(this,$l)[1]=0,this.addCommands({cmd:()=>{for(const u of s)m(this,Gn).has(u.id)&&(u.translateInPage(i,a),u.translationDone())},undo:()=>{for(const u of s)m(this,Gn).has(u.id)&&(u.translateInPage(-i,-a),u.translationDone())},mustExec:!1})},l));for(const u of s)u.translateInPage(e,t),u.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),L(this,hs,new Map);for(const e of m(this,qt))m(this,hs).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!m(this,hs))return!1;this.disableUserSelect(!1);const e=m(this,hs);L(this,hs,null);let t=!1;for(const[{x:i,y:a,pageIndex:s},l]of e)l.newX=i,l.newY=a,l.newPageIndex=s,t||(t=i!==l.savedX||a!==l.savedY||s!==l.savedPageIndex);if(!t)return!1;const n=(i,a,s,l)=>{if(m(this,Gn).has(i.id)){const u=m(this,gr).get(l);u?i._setParentAndPosition(u,a,s):(i.pageIndex=l,i.x=a,i.y=s)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:s,newPageIndex:l}]of e)n(i,a,s,l)},undo:()=>{for(const[i,{savedX:a,savedY:s,savedPageIndex:l}]of e)n(i,a,s,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(m(this,hs))for(const n of m(this,hs).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||m(this,qt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return m(this,Ei)===e}getActive(){return m(this,Ei)}getMode(){return m(this,$n)}get imageManager(){return Dt(this,"imageManager",new zD)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let d=0,h=t.rangeCount;d<h;d++)if(!e.contains(t.getRangeAt(d).commonAncestorContainer))return null;const{x:n,y:i,width:a,height:s}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(d,h,g,b)=>({x:(h-i)/s,y:1-(d+g-n)/a,width:b/s,height:g/a});break;case"180":l=(d,h,g,b)=>({x:1-(d+g-n)/a,y:1-(h+b-i)/s,width:g/a,height:b/s});break;case"270":l=(d,h,g,b)=>({x:1-(h+b-i)/s,y:(d-n)/a,width:b/s,height:g/a});break;default:l=(d,h,g,b)=>({x:(d-n)/a,y:(h-i)/s,width:g/a,height:b/s});break}const u=[];for(let d=0,h=t.rangeCount;d<h;d++){const g=t.getRangeAt(d);if(!g.collapsed)for(const{x:b,y:x,width:k,height:v}of g.getClientRects())k===0||v===0||u.push(l(b,x,k,v))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:e,id:t}){(m(this,of)||L(this,of,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=m(this,of))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=m(this,of))==null?void 0:i.get(e.data.id);if(!t)return;const n=m(this,fo).getRawValue(t);n&&(m(this,$n)===pt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){var a;const i=(a=m(this,Vl))==null?void 0:a.get(e);i&&(i.setCanvas(t,n),m(this,Vl).delete(e))}addMissingCanvas(e,t){(m(this,Vl)||L(this,Vl,new Map)).set(e,t)}};rf=new WeakMap,Ei=new WeakMap,af=new WeakMap,Gn=new WeakMap,gr=new WeakMap,sf=new WeakMap,fo=new WeakMap,of=new WeakMap,ha=new WeakMap,po=new WeakMap,Bl=new WeakMap,Pl=new WeakMap,lf=new WeakMap,ku=new WeakMap,hs=new WeakMap,fa=new WeakMap,Du=new WeakMap,Rm=new WeakMap,jm=new WeakMap,cf=new WeakMap,Fm=new WeakMap,fs=new WeakMap,zl=new WeakMap,uf=new WeakMap,Wl=new WeakMap,ps=new WeakMap,Nv=new WeakMap,Hl=new WeakMap,df=new WeakMap,Im=new WeakMap,ql=new WeakMap,_u=new WeakMap,hf=new WeakMap,Vl=new WeakMap,Om=new WeakMap,$n=new WeakMap,qt=new WeakMap,go=new WeakMap,Xl=new WeakMap,Gl=new WeakMap,Mm=new WeakMap,ff=new WeakMap,Lm=new WeakMap,$l=new WeakMap,gs=new WeakMap,mo=new WeakMap,Bm=new WeakMap,Pm=new WeakMap,pa=new WeakMap,Ye=new WeakSet,T0=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},HD=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of m(this,gr).values())if(n.hasTextLayer(e))return n;return null},aF=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=$(this,Ye,T0).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(m(this,ps)||L(this,ps,new M7(this)),m(this,ps).show(n,i,this.direction==="ltr"))},sF=function(){var a,s,l;const e=document.getSelection();if(!e||e.isCollapsed){m(this,go)&&((a=m(this,ps))==null||a.hide(),L(this,go,null),$(this,Ye,Br).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===m(this,go))return;const i=$(this,Ye,T0).call(this,e).closest(".textLayer");if(!i){m(this,go)&&((s=m(this,ps))==null||s.hide(),L(this,go,null),$(this,Ye,Br).call(this,{hasSelectedText:!1}));return}if((l=m(this,ps))==null||l.hide(),L(this,go,t),$(this,Ye,Br).call(this,{hasSelectedText:!0}),!(m(this,$n)!==pt.HIGHLIGHT&&m(this,$n)!==pt.NONE)&&(m(this,$n)===pt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),L(this,Wl,this.isShiftKeyDown),!this.isShiftKeyDown)){const u=m(this,$n)===pt.HIGHLIGHT?$(this,Ye,HD).call(this,i):null;if(u==null||u.toggleDrawing(),m(this,df)){const d=new AbortController,h=this.combinedSignal(d),g=b=>{b.type==="pointerup"&&b.button!==0||(d.abort(),u==null||u.toggleDrawing(!0),b.type==="pointerup"&&$(this,Ye,qg).call(this,"main_toolbar"))};window.addEventListener("pointerup",g,{signal:h}),window.addEventListener("blur",g,{signal:h})}else u==null||u.toggleDrawing(!0),$(this,Ye,qg).call(this,"main_toolbar")}},qg=function(e=""){m(this,$n)===pt.HIGHLIGHT?this.highlightSelection(e):m(this,Rm)&&$(this,Ye,aF).call(this)},oF=function(){document.addEventListener("selectionchange",$(this,Ye,sF).bind(this),{signal:this._signal})},lF=function(){if(m(this,zl))return;L(this,zl,new AbortController);const e=this.combinedSignal(m(this,zl));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},cF=function(){var e;(e=m(this,zl))==null||e.abort(),L(this,zl,null)},qD=function(){if(m(this,ql))return;L(this,ql,new AbortController);const e=this.combinedSignal(m(this,ql));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},uF=function(){var e;(e=m(this,ql))==null||e.abort(),L(this,ql,null)},VD=function(){if(m(this,Bl))return;L(this,Bl,new AbortController);const e=this.combinedSignal(m(this,Bl));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},XD=function(){var e;(e=m(this,Bl))==null||e.abort(),L(this,Bl,null)},dF=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Br=function(e){Object.entries(e).some(([n,i])=>m(this,Lm)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(m(this,Lm),e)}),m(this,$n)===pt.HIGHLIGHT&&e.hasSelectedEditor===!1&&$(this,Ye,ao).call(this,[[Nt.HIGHLIGHT_FREE,!0]]))},ao=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},hF=async function(){if(!m(this,Hl)){L(this,Hl,!0);const e=[];for(const t of m(this,gr).values())e.push(t.enable());await Promise.all(e);for(const t of m(this,Gn).values())t.enable()}},fF=function(){if(this.unselectAll(),m(this,Hl)){L(this,Hl,!1);for(const e of m(this,gr).values())e.disable();for(const e of m(this,Gn).values())e.disable()}},GD=function(e){const t=m(this,gr).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},pF=function(){let e=null;for(e of m(this,qt));return e},Vg=function(){if(m(this,Gn).size===0)return!0;if(m(this,Gn).size===1)for(const e of m(this,Gn).values())return e.isEmpty();return!1},$D=function(e){for(const t of m(this,qt))t.unselect();m(this,qt).clear();for(const t of e)t.isEmpty()||(m(this,qt).add(t),t.select());$(this,Ye,Br).call(this,{hasSelectedEditor:this.hasSelection})},We(Xh,"TRANSLATE_SMALL",1),We(Xh,"TRANSLATE_BIG",10);let Rd=Xh;var ar,ms,La,pf,bs,Ti,gf,xs,si,bo,Au,ys,Yl,$a,Xg,C0;const Pr=class Pr{constructor(e){V(this,$a);V(this,ar,null);V(this,ms,!1);V(this,La,null);V(this,pf,null);V(this,bs,null);V(this,Ti,null);V(this,gf,!1);V(this,xs,null);V(this,si,null);V(this,bo,null);V(this,Au,null);V(this,ys,!1);L(this,si,e),L(this,ys,e._uiManager.useNewAltTextFlow),m(Pr,Yl)||L(Pr,Yl,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Pr._l10n??(Pr._l10n=e)}async render(){const e=L(this,La,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=L(this,pf,document.createElement("span"));e.append(t),m(this,ys)?(e.classList.add("new"),e.setAttribute("data-l10n-id",m(Pr,Yl).missing),t.setAttribute("data-l10n-id",m(Pr,Yl)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=m(this,si)._uiManager._signal;e.addEventListener("contextmenu",Ea,{signal:n}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const i=a=>{a.preventDefault(),m(this,si)._uiManager.editAltText(m(this,si)),m(this,ys)&&m(this,si)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:m(this,$a,Xg)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(L(this,gf,!0),i(a))},{signal:n}),await $(this,$a,C0).call(this),e}finish(){m(this,La)&&(m(this,La).focus({focusVisible:m(this,gf)}),L(this,gf,!1))}isEmpty(){return m(this,ys)?m(this,ar)===null:!m(this,ar)&&!m(this,ms)}hasData(){return m(this,ys)?m(this,ar)!==null||!!m(this,bo):this.isEmpty()}get guessedText(){return m(this,bo)}async setGuessedText(e){m(this,ar)===null&&(L(this,bo,e),L(this,Au,await Pr._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),$(this,$a,C0).call(this))}toggleAltTextBadge(e=!1){var t;if(!m(this,ys)||m(this,ar)){(t=m(this,xs))==null||t.remove(),L(this,xs,null);return}if(!m(this,xs)){const n=L(this,xs,document.createElement("div"));n.className="noAltTextBadge",m(this,si).div.append(n)}m(this,xs).classList.toggle("hidden",!e)}serialize(e){let t=m(this,ar);return!e&&m(this,bo)===t&&(t=m(this,Au)),{altText:t,decorative:m(this,ms),guessedText:m(this,bo),textWithDisclaimer:m(this,Au)}}get data(){return{altText:m(this,ar),decorative:m(this,ms)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:i,cancel:a=!1}){n&&(L(this,bo,n),L(this,Au,i)),!(m(this,ar)===e&&m(this,ms)===t)&&(a||(L(this,ar,e),L(this,ms,t)),$(this,$a,C0).call(this))}toggle(e=!1){m(this,La)&&(!e&&m(this,Ti)&&(clearTimeout(m(this,Ti)),L(this,Ti,null)),m(this,La).disabled=!e)}shown(){m(this,si)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:m(this,$a,Xg)}})}destroy(){var e,t;(e=m(this,La))==null||e.remove(),L(this,La,null),L(this,pf,null),L(this,bs,null),(t=m(this,xs))==null||t.remove(),L(this,xs,null)}};ar=new WeakMap,ms=new WeakMap,La=new WeakMap,pf=new WeakMap,bs=new WeakMap,Ti=new WeakMap,gf=new WeakMap,xs=new WeakMap,si=new WeakMap,bo=new WeakMap,Au=new WeakMap,ys=new WeakMap,Yl=new WeakMap,$a=new WeakSet,Xg=function(){return m(this,ar)&&"added"||m(this,ar)===null&&this.guessedText&&"review"||"missing"},C0=async function(){var i,a,s;const e=m(this,La);if(!e)return;if(m(this,ys)){if(e.classList.toggle("done",!!m(this,ar)),e.setAttribute("data-l10n-id",m(Pr,Yl)[m(this,$a,Xg)]),(i=m(this,pf))==null||i.setAttribute("data-l10n-id",m(Pr,Yl)[`${m(this,$a,Xg)}-label`]),!m(this,ar)){(a=m(this,bs))==null||a.remove();return}}else{if(!m(this,ar)&&!m(this,ms)){e.classList.remove("done"),(s=m(this,bs))==null||s.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=m(this,bs);if(!t){L(this,bs,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${m(this,si).id}`;const l=100,u=m(this,si)._uiManager._signal;u.addEventListener("abort",()=>{clearTimeout(m(this,Ti)),L(this,Ti,null)},{once:!0}),e.addEventListener("mouseenter",()=>{L(this,Ti,setTimeout(()=>{L(this,Ti,null),m(this,bs).classList.add("show"),m(this,si)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:u}),e.addEventListener("mouseleave",()=>{var d;m(this,Ti)&&(clearTimeout(m(this,Ti)),L(this,Ti,null)),(d=m(this,bs))==null||d.classList.remove("show")},{signal:u})}m(this,ms)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=m(this,ar)),t.parentNode||e.append(t);const n=m(this,si).getElementForAltText();n==null||n.setAttribute("aria-describedby",t.id)},V(Pr,Yl,null),We(Pr,"_l10n",null);let hv=Pr;var vs,Su,Ba,zm,xo,mf,Kl;class Vy{constructor(e){V(this,vs,null);V(this,Su,!1);V(this,Ba,null);V(this,zm,null);V(this,xo,null);V(this,mf,null);V(this,Kl,!1);L(this,Ba,e),this.toolbar=null}render(){if(!m(this,Ba)._uiManager.hasCommentManager())return null;const e=L(this,vs,document.createElement("button"));e.className="comment",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const t=m(this,Ba)._uiManager._signal;if(!(t instanceof AbortSignal)||t.aborted)return e;e.addEventListener("contextmenu",Ea,{signal:t}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:t});const n=i=>{i.preventDefault(),this.edit()};return e.addEventListener("click",n,{capture:!0,signal:t}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(L(this,Su,!0),n(i))},{signal:t}),e}edit(){const{bottom:e,left:t,right:n}=m(this,Ba).getClientDimensions(),i={top:e};m(this,Ba)._uiManager.direction==="ltr"?i.right=n:i.left=t,m(this,Ba)._uiManager.editComment(m(this,Ba),i)}finish(){m(this,vs)&&(m(this,vs).focus({focusVisible:m(this,Su)}),L(this,Su,!1))}isDeleted(){return m(this,Kl)||m(this,xo)===""}hasBeenEdited(){return this.isDeleted()||m(this,xo)!==m(this,zm)}serialize(){return this.data}get data(){return{text:m(this,xo),date:m(this,mf),deleted:m(this,Kl)}}set data(e){if(e===null){L(this,xo,""),L(this,Kl,!0);return}L(this,xo,e),L(this,mf,new Date),L(this,Kl,!1)}setInitialText(e){L(this,zm,e),this.data=e}toggle(e=!1){m(this,vs)&&(m(this,vs).disabled=!e)}shown(){}destroy(){var e;(e=m(this,vs))==null||e.remove(),L(this,vs,null),L(this,xo,""),L(this,mf,null),L(this,Ba,null),L(this,Su,!1),L(this,Kl,!1)}}vs=new WeakMap,Su=new WeakMap,Ba=new WeakMap,zm=new WeakMap,xo=new WeakMap,mf=new WeakMap,Kl=new WeakMap;var bf,Eu,Wm,Hm,qm,Vm,Xm,yo,Tu,vo,Cu,wo,Mc,gF,mF,bF;const WS=class WS{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:s=null,signal:l}){V(this,Mc);V(this,bf);V(this,Eu,!1);V(this,Wm,null);V(this,Hm);V(this,qm);V(this,Vm);V(this,Xm);V(this,yo,null);V(this,Tu);V(this,vo,null);V(this,Cu);V(this,wo,null);L(this,bf,e),L(this,Wm,n),L(this,Hm,t),L(this,qm,i),L(this,Vm,a),L(this,Xm,s),L(this,Cu,new AbortController),L(this,Tu,AbortSignal.any([l,m(this,Cu).signal])),e.addEventListener("touchstart",$(this,Mc,gF).bind(this),{passive:!1,signal:m(this,Tu)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Is.pixelRatio}destroy(){var e,t;(e=m(this,Cu))==null||e.abort(),L(this,Cu,null),(t=m(this,yo))==null||t.abort(),L(this,yo,null)}};bf=new WeakMap,Eu=new WeakMap,Wm=new WeakMap,Hm=new WeakMap,qm=new WeakMap,Vm=new WeakMap,Xm=new WeakMap,yo=new WeakMap,Tu=new WeakMap,vo=new WeakMap,Cu=new WeakMap,wo=new WeakMap,Mc=new WeakSet,gF=function(e){var i,a,s;if((i=m(this,Hm))!=null&&i.call(this))return;if(e.touches.length===1){if(m(this,yo))return;const l=L(this,yo,new AbortController),u=AbortSignal.any([m(this,Tu),l.signal]),d=m(this,bf),h={capture:!0,signal:u,passive:!1},g=b=>{var x;b.pointerType==="touch"&&((x=m(this,yo))==null||x.abort(),L(this,yo,null))};d.addEventListener("pointerdown",b=>{b.pointerType==="touch"&&(Ln(b),g(b))},h),d.addEventListener("pointerup",g,h),d.addEventListener("pointercancel",g,h);return}if(!m(this,wo)){L(this,wo,new AbortController);const l=AbortSignal.any([m(this,Tu),m(this,wo).signal]),u=m(this,bf),d={signal:l,capture:!1,passive:!1};u.addEventListener("touchmove",$(this,Mc,mF).bind(this),d);const h=$(this,Mc,bF).bind(this);u.addEventListener("touchend",h,d),u.addEventListener("touchcancel",h,d),d.capture=!0,u.addEventListener("pointerdown",Ln,d),u.addEventListener("pointermove",Ln,d),u.addEventListener("pointercancel",Ln,d),u.addEventListener("pointerup",Ln,d),(a=m(this,qm))==null||a.call(this)}if(Ln(e),e.touches.length!==2||(s=m(this,Wm))!=null&&s.call(this)){L(this,vo,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),L(this,vo,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},mF=function(e){var N;if(!m(this,vo)||e.touches.length!==2)return;Ln(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:i,screenY:a}=t,{screenX:s,screenY:l}=n,u=m(this,vo),{touch0X:d,touch0Y:h,touch1X:g,touch1Y:b}=u,x=g-d,k=b-h,v=s-i,w=l-a,D=Math.hypot(v,w)||1,_=Math.hypot(x,k)||1;if(!m(this,Eu)&&Math.abs(_-D)<=WS.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(u.touch0X=i,u.touch0Y=a,u.touch1X=s,u.touch1Y=l,!m(this,Eu)){L(this,Eu,!0);return}const A=[(i+s)/2,(a+l)/2];(N=m(this,Vm))==null||N.call(this,A,_,D)},bF=function(e){var t;e.touches.length>=2||(m(this,wo)&&(m(this,wo).abort(),L(this,wo,null),(t=m(this,Xm))==null||t.call(this)),m(this,vo)&&(Ln(e),L(this,vo,null),L(this,Eu,!1)))};let fv=WS;var Nu,Pa,fn,mr,xf,Ql,Gm,Uu,br,Ru,ko,Zl,$m,ju,Ci,Ym,Fu,Do,ws,yf,vf,ga,Iu,Km,Uv,ut,YD,Qm,KD,N0,xF,yF,QD,U0,ZD,vF,wF,kF,JD,DF,e_,_F,AF,SF,t_,Gg;const xt=class xt{constructor(e){V(this,ut);V(this,Nu,null);V(this,Pa,null);V(this,fn,null);V(this,mr,null);V(this,xf,!1);V(this,Ql,null);V(this,Gm,"");V(this,Uu,!1);V(this,br,null);V(this,Ru,null);V(this,ko,null);V(this,Zl,null);V(this,$m,"");V(this,ju,!1);V(this,Ci,null);V(this,Ym,!1);V(this,Fu,!1);V(this,Do,!1);V(this,ws,null);V(this,yf,0);V(this,vf,0);V(this,ga,null);V(this,Iu,null);We(this,"isSelected",!1);We(this,"_isCopy",!1);We(this,"_editToolbar",null);We(this,"_initialOptions",Object.create(null));We(this,"_initialData",null);We(this,"_isVisible",!0);We(this,"_uiManager",null);We(this,"_focusEventsAllowed",!0);V(this,Km,!1);V(this,Uv,xt._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[a,s];const[l,u]=this.parentDimensions;this.x=e.x/l,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=xt.prototype._resizeWithKeyboard,t=Rd.TRANSLATE_SMALL,n=Rd.TRANSLATE_BIG;return Dt(this,"_resizerKeyboardManager",new fx([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],xt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Dt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new P7({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(xt._l10n??(xt._l10n=e),xt._l10nResizer||(xt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),xt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);xt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){en("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return m(this,Km)}set _isDraggable(e){var t;L(this,Km,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=m(this,Uv)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):$(this,ut,Gg).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(m(this,ju)?L(this,ju,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[a,s]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/a,this.y=(t+i)/s,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}translate(e,t){$(this,ut,YD).call(this,this.parentDimensions,e,t)}translateInPage(e,t){m(this,Ci)||L(this,Ci,[this.x,this.y,this.width,this.height]),$(this,ut,YD).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){m(this,Ci)||L(this,Ci,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=t/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:l}=this;const[u,d]=this.getBaseTranslation();s+=u,l+=d;const{style:h}=n;h.left=`${(100*s).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(s,l),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!m(this,Ci)&&(m(this,Ci)[0]!==this.x||m(this,Ci)[1]!==this.y)}get _hasBeenResized(){return!!m(this,Ci)&&(m(this,Ci)[2]!==this.width||m(this,Ci)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=xt,i=n/e,a=n/t;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,i]}=this;let{x:a,y:s,width:l,height:u}=this;if(l*=n,u*=i,a*=n,s*=i,this._mustFixPosition)switch(e){case 0:a=Xr(a,0,n-l),s=Xr(s,0,i-u);break;case 90:a=Xr(a,0,n-u),s=Xr(s,l,i);break;case 180:a=Xr(a,l,n),s=Xr(s,u,i);break;case 270:a=Xr(a,u,n),s=Xr(s,0,i-l);break}this.x=a/=n,this.y=s/=i;const[d,h]=this.getBaseTranslation();a+=d,s+=h,t.left=`${(100*a).toFixed(2)}%`,t.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return $(n=xt,Qm,KD).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return $(n=xt,Qm,KD).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,i]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*e/n).toFixed(2)}%`,m(this,Uu)||(a.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,i=n.endsWith("%"),a=!m(this,Uu)&&t.endsWith("%");if(i&&a)return;const[s,l]=this.parentDimensions;i||(e.width=`${(100*parseFloat(n)/s).toFixed(2)}%`),!m(this,Uu)&&!a&&(e.height=`${(100*parseFloat(t)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=m(this,fn))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||m(this,Fu))return this._editToolbar;this._editToolbar=new BD(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=m(this,fn))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return m(this,fn)||(hv.initialize(xt._l10n),L(this,fn,new hv(this)),m(this,Nu)&&(m(this,fn).data=m(this,Nu),L(this,Nu,null))),m(this,fn)}get altTextData(){var e;return(e=m(this,fn))==null?void 0:e.data}set altTextData(e){m(this,fn)&&(m(this,fn).data=e)}get guessedAltText(){var e;return(e=m(this,fn))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=m(this,fn))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=m(this,fn))==null?void 0:t.serialize(e)}hasAltText(){return!!m(this,fn)&&!m(this,fn).isEmpty()}hasAltTextData(){var e;return((e=m(this,fn))==null?void 0:e.hasData())??!1}addCommentButton(){return m(this,mr)?m(this,mr):L(this,mr,new Vy(this))}get commentColor(){return null}get comment(){const e=m(this,mr);return{text:e.data.text,date:e.data.date,deleted:e.isDeleted(),color:this.commentColor}}set comment(e){m(this,mr)||L(this,mr,new Vy(this)),m(this,mr).data=e}setCommentData(e){m(this,mr)||L(this,mr,new Vy(this)),m(this,mr).setInitialText(e)}get hasEditedComment(){var e;return(e=m(this,mr))==null?void 0:e.hasBeenEdited()}async editComment(){m(this,mr)||L(this,mr,new Vy(this)),m(this,mr).edit()}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[a]=this.pageDimensions,[s]=this.pageTranslation,l=s+a+1,u=i-100,d=l+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,u,d,i]}}}render(){var s;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=m(this,xf)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),$(this,ut,e_).call(this);const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),rF(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(m(this,Iu)||L(this,Iu,new fv({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:$(this,ut,vF).bind(this),onPinching:$(this,ut,wF).bind(this),onPinchEnd:$(this,ut,kF).bind(this),signal:this._uiManager._signal}))),(s=this._uiManager._editorUndoBar)==null||s.hide(),e}pointerdown(e){const{isMac:t}=Ar.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(L(this,ju,!0),this._isDraggable){$(this,ut,DF).call(this,e);return}$(this,ut,JD).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){m(this,ws)&&clearTimeout(m(this,ws)),L(this,ws,setTimeout(()=>{var e;L(this,ws,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const i=this.parentScale,[a,s]=this.pageDimensions,[l,u]=this.pageTranslation,d=e/i,h=t/i,g=this.x*a,b=this.y*s,x=this.width*a,k=this.height*s;switch(n){case 0:return[g+d+l,s-b-h-k+u,g+d+x+l,s-b-h+u];case 90:return[g+h+l,s-b+d+u,g+h+k+l,s-b+d+x+u];case 180:return[g-d-x+l,s-b+h+u,g-d+l,s-b+h+k+u];case 270:return[g-h-k+l,s-b-d-x+u,g-h+l,s-b-d+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,a,s]=e,l=a-n,u=s-i;switch(this.rotation){case 0:return[n,t-s,l,u];case 90:return[n,t-i,u,l];case 180:return[a,t-i,l,u];case 270:return[a,t-s,u,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),L(this,Fu,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),L(this,Fu,!1),!0):!1}isInEditMode(){return m(this,Fu)}shouldGetKeyboardEvents(){return m(this,Do)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:s}=window;return t<s&&i>0&&e<a&&n>0}rebuild(){$(this,ut,e_).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){en("An editor must be serializable")}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId});i.rotation=e.rotation,L(i,Nu,e.accessibilityData),i._isCopy=e.isCopy||!1;const[a,s]=i.pageDimensions,[l,u,d,h]=i.getRectInCurrentCoords(e.rect,s);return i.x=l/a,i.y=u/s,i.width=d/a,i.height=h/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=m(this,Zl))==null||e.abort(),L(this,Zl,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),m(this,ws)&&(clearTimeout(m(this,ws)),L(this,ws,null)),$(this,ut,Gg).call(this),this.removeEditToolbar(),m(this,ga)){for(const n of m(this,ga).values())clearTimeout(n);L(this,ga,null)}this.parent=null,(t=m(this,Iu))==null||t.destroy(),L(this,Iu,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&($(this,ut,xF).call(this),m(this,br).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),L(this,ko,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=m(this,br).children;if(!m(this,Pa)){L(this,Pa,Array.from(t));const s=$(this,ut,_F).bind(this),l=$(this,ut,AF).bind(this),u=this._uiManager._signal;for(const d of m(this,Pa)){const h=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",s,{signal:u}),d.addEventListener("blur",l,{signal:u}),d.addEventListener("focus",$(this,ut,SF).bind(this,h),{signal:u}),d.setAttribute("data-l10n-id",xt._l10nResizer[h])}}const n=m(this,Pa)[0];let i=0;for(const s of t){if(s===n)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(m(this,Pa).length/4);if(a!==i){if(a<i)for(let l=0;l<i-a;l++)m(this,br).append(m(this,br).firstChild);else if(a>i)for(let l=0;l<a-i;l++)m(this,br).firstChild.before(m(this,br).lastChild);let s=0;for(const l of t){const d=m(this,Pa)[s++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",xt._l10nResizer[d])}}$(this,ut,t_).call(this,0),L(this,Do,!0),m(this,br).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){m(this,Do)&&$(this,ut,ZD).call(this,m(this,$m),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){$(this,ut,Gg).call(this),this.div.focus()}select(){var e,t,n;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,a;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(t=this._editToolbar)==null||t.show(),(n=m(this,fn))==null||n.toggleAltTextBadge(!1)}}unselect(){var e,t,n,i,a;this.isSelected&&(this.isSelected=!1,(e=m(this,br))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(a=m(this,fn))==null||a.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return m(this,Ym)}set isEditing(e){L(this,Ym,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){L(this,Uu,!0);const n=e/t,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){m(this,ga)||L(this,ga,new Map);const{action:n}=e;let i=m(this,ga).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),m(this,ga).delete(n),m(this,ga).size===0&&L(this,ga,null)},xt._telemetryTimeout),m(this,ga).set(n,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),L(this,xf,!1)}disable(){this.div&&(this.div.tabIndex=-1),L(this,xf,!0)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Nu=new WeakMap,Pa=new WeakMap,fn=new WeakMap,mr=new WeakMap,xf=new WeakMap,Ql=new WeakMap,Gm=new WeakMap,Uu=new WeakMap,br=new WeakMap,Ru=new WeakMap,ko=new WeakMap,Zl=new WeakMap,$m=new WeakMap,ju=new WeakMap,Ci=new WeakMap,Ym=new WeakMap,Fu=new WeakMap,Do=new WeakMap,ws=new WeakMap,yf=new WeakMap,vf=new WeakMap,ga=new WeakMap,Iu=new WeakMap,Km=new WeakMap,Uv=new WeakMap,ut=new WeakSet,YD=function([e,t],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Qm=new WeakSet,KD=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},N0=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},xF=function(){if(m(this,br))return;L(this,br,document.createElement("div")),m(this,br).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const i=document.createElement("div");m(this,br).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",$(this,ut,yF).bind(this,n),{signal:t}),i.addEventListener("contextmenu",Ea,{signal:t}),i.tabIndex=-1}this.div.prepend(m(this,br))},yF=function(e,t){var h;t.preventDefault();const{isMac:n}=Ar.platform;if(t.button!==0||t.ctrlKey&&n)return;(h=m(this,fn))==null||h.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,L(this,Ru,[t.screenX,t.screenY]);const a=new AbortController,s=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",$(this,ut,ZD).bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",Ln,{passive:!1,signal:s}),window.addEventListener("contextmenu",Ea,{signal:s}),L(this,ko,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const d=()=>{var g;a.abort(),this.parent.togglePointerEvents(!0),(g=m(this,fn))==null||g.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=l,this.div.style.cursor=u,$(this,ut,U0).call(this)};window.addEventListener("pointerup",d,{signal:s}),window.addEventListener("blur",d,{signal:s})},QD=function(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t;const[a,s]=this.parentDimensions;this.setDims(a*n,s*i),this.fixAndSetPosition(),this._onResized()},U0=function(){if(!m(this,ko))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=m(this,ko);L(this,ko,null);const a=this.x,s=this.y,l=this.width,u=this.height;a===e&&s===t&&l===n&&u===i||this.addCommands({cmd:$(this,ut,QD).bind(this,a,s,l,u),undo:$(this,ut,QD).bind(this,e,t,n,i),mustExec:!0})},ZD=function(e,t){const[n,i]=this.parentDimensions,a=this.x,s=this.y,l=this.width,u=this.height,d=xt.MIN_SIZE/n,h=xt.MIN_SIZE/i,g=$(this,ut,N0).call(this,this.rotation),b=(P,B)=>[g[0]*P+g[2]*B,g[1]*P+g[3]*B],x=$(this,ut,N0).call(this,360-this.rotation),k=(P,B)=>[x[0]*P+x[2]*B,x[1]*P+x[3]*B];let v,w,D=!1,_=!1;switch(e){case"topLeft":D=!0,v=(P,B)=>[0,0],w=(P,B)=>[P,B];break;case"topMiddle":v=(P,B)=>[P/2,0],w=(P,B)=>[P/2,B];break;case"topRight":D=!0,v=(P,B)=>[P,0],w=(P,B)=>[0,B];break;case"middleRight":_=!0,v=(P,B)=>[P,B/2],w=(P,B)=>[0,B/2];break;case"bottomRight":D=!0,v=(P,B)=>[P,B],w=(P,B)=>[0,0];break;case"bottomMiddle":v=(P,B)=>[P/2,B],w=(P,B)=>[P/2,0];break;case"bottomLeft":D=!0,v=(P,B)=>[0,B],w=(P,B)=>[P,0];break;case"middleLeft":_=!0,v=(P,B)=>[0,B/2],w=(P,B)=>[P,B/2];break}const A=v(l,u),N=w(l,u);let E=b(...N);const C=xt._round(a+E[0]),j=xt._round(s+E[1]);let M=1,O=1,F,G;if(t.fromKeyboard)({deltaX:F,deltaY:G}=t);else{const{screenX:P,screenY:B}=t,[ee,Y]=m(this,Ru);[F,G]=this.screenToPageTranslation(P-ee,B-Y),m(this,Ru)[0]=P,m(this,Ru)[1]=B}if([F,G]=k(F/n,G/i),D){const P=Math.hypot(l,u);M=O=Math.max(Math.min(Math.hypot(N[0]-A[0]-F,N[1]-A[1]-G)/P,1/l,1/u),d/l,h/u)}else _?M=Xr(Math.abs(N[0]-A[0]-F),d,1)/l:O=Xr(Math.abs(N[1]-A[1]-G),h,1)/u;const R=xt._round(l*M),W=xt._round(u*O);E=b(...w(R,W));const U=C-E[0],X=j-E[1];m(this,Ci)||L(this,Ci,[this.x,this.y,this.width,this.height]),this.width=R,this.height=W,this.x=U,this.y=X,this.setDims(n*R,i*W),this.fixAndSetPosition(),this._onResizing()},vF=function(){var e;L(this,ko,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=m(this,fn))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},wF=function(e,t,n){let a=.7*(n/t)+1-.7;if(a===1)return;const s=$(this,ut,N0).call(this,this.rotation),l=(C,j)=>[s[0]*C+s[2]*j,s[1]*C+s[3]*j],[u,d]=this.parentDimensions,h=this.x,g=this.y,b=this.width,x=this.height,k=xt.MIN_SIZE/u,v=xt.MIN_SIZE/d;a=Math.max(Math.min(a,1/b,1/x),k/b,v/x);const w=xt._round(b*a),D=xt._round(x*a);if(w===b&&D===x)return;m(this,Ci)||L(this,Ci,[h,g,b,x]);const _=l(b/2,x/2),A=xt._round(h+_[0]),N=xt._round(g+_[1]),E=l(w/2,D/2);this.x=A-E[0],this.y=N-E[1],this.width=w,this.height=D,this.setDims(u*w,d*D),this.fixAndSetPosition(),this._onResizing()},kF=function(){var e;(e=m(this,fn))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),$(this,ut,U0).call(this)},JD=function(e){const{isMac:t}=Ar.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},DF=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:a},l=d=>{i.abort(),L(this,Ql,null),L(this,ju,!1),this._uiManager.endDragSession()||$(this,ut,JD).call(this,d),n&&this._onStopDragging()};t&&(L(this,yf,e.clientX),L(this,vf,e.clientY),L(this,Ql,e.pointerId),L(this,Gm,e.pointerType),window.addEventListener("pointermove",d=>{n||(n=!0,this._onStartDragging());const{clientX:h,clientY:g,pointerId:b}=d;if(b!==m(this,Ql)){Ln(d);return}const[x,k]=this.screenToPageTranslation(h-m(this,yf),g-m(this,vf));L(this,yf,h),L(this,vf,g),this._uiManager.dragSelectedEditors(x,k)},s),window.addEventListener("touchmove",Ln,s),window.addEventListener("pointerdown",d=>{d.pointerType===m(this,Gm)&&(m(this,Iu)||d.isPrimary)&&l(d),Ln(d)},s));const u=d=>{if(!m(this,Ql)||m(this,Ql)===d.pointerId){l(d);return}Ln(d)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})},e_=function(){if(m(this,Zl)||!this.div)return;L(this,Zl,new AbortController);const e=this._uiManager.combinedSignal(m(this,Zl));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},_F=function(e){xt._resizerKeyboardManager.exec(this,e)},AF=function(e){var t;m(this,Do)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==m(this,br)&&$(this,ut,Gg).call(this)},SF=function(e){L(this,$m,m(this,Do)?e:"")},t_=function(e){if(m(this,Pa))for(const t of m(this,Pa))t.tabIndex=e},Gg=function(){L(this,Do,!1),$(this,ut,t_).call(this,-1),$(this,ut,U0).call(this)},V(xt,Qm),We(xt,"_l10n",null),We(xt,"_l10nResizer",null),We(xt,"_borderLineWidth",-1),We(xt,"_colorManager",new WD),We(xt,"_zIndex",1),We(xt,"_telemetryTimeout",1e3);let sn=xt;class P7 extends sn{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const g4=3285377520,ca=4294901760,cs=65535;class EF{constructor(e){this.h1=e?e&4294967295:g4,this.h2=e?e&4294967295:g4}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let v=0,w=e.length;v<w;v++){const D=e.charCodeAt(v);D<=255?t[n++]=D:(t[n++]=D>>>8,t[n++]=D&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,a=n-i*4,s=new Uint32Array(t.buffer,0,i);let l=0,u=0,d=this.h1,h=this.h2;const g=3432918353,b=461845907,x=g&cs,k=b&cs;for(let v=0;v<i;v++)v&1?(l=s[v],l=l*g&ca|l*x&cs,l=l<<15|l>>>17,l=l*b&ca|l*k&cs,d^=l,d=d<<13|d>>>19,d=d*5+3864292196):(u=s[v],u=u*g&ca|u*x&cs,u=u<<15|u>>>17,u=u*b&ca|u*k&cs,h^=u,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,a){case 3:l^=t[i*4+2]<<16;case 2:l^=t[i*4+1]<<8;case 1:l^=t[i*4],l=l*g&ca|l*x&cs,l=l<<15|l>>>17,l=l*b&ca|l*k&cs,i&1?d^=l:h^=l}this.h1=d,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ca|e*36045&cs,t=t*4283543511&ca|((t<<16|e>>>16)*2950163797&ca)>>>16,e^=t>>>1,e=e*444984403&ca|e*60499&cs,t=t*3301882366&ca|((t<<16|e>>>16)*3120437893&ca)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const n_=Object.freeze({map:null,hash:"",transfer:void 0});var Ou,Mu,xr,Rv,TF;class mS{constructor(){V(this,Rv);V(this,Ou,!1);V(this,Mu,null);V(this,xr,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=m(this,xr).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return m(this,xr).get(e)}remove(e){if(m(this,xr).delete(e),m(this,xr).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of m(this,xr).values())if(t instanceof sn)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=m(this,xr).get(e);let i=!1;if(n!==void 0)for(const[a,s]of Object.entries(t))n[a]!==s&&(i=!0,n[a]=s);else i=!0,m(this,xr).set(e,t);i&&$(this,Rv,TF).call(this),t instanceof sn&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return m(this,xr).has(e)}get size(){return m(this,xr).size}resetModified(){m(this,Ou)&&(L(this,Ou,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new CF(this)}get serializable(){if(m(this,xr).size===0)return n_;const e=new Map,t=new EF,n=[],i=Object.create(null);let a=!1;for(const[s,l]of m(this,xr)){const u=l instanceof sn?l.serialize(!1,i):l;u&&(e.set(s,u),t.update(`${s}:${JSON.stringify(u)}`),a||(a=!!u.bitmap))}if(a)for(const s of e.values())s.bitmap&&n.push(s.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:n_}get editorStats(){let e=null;const t=new Map;for(const n of m(this,xr).values()){if(!(n instanceof sn))continue;const i=n.telemetryFinalData;if(!i)continue;const{type:a}=i;t.has(a)||t.set(a,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const s=e[a]||(e[a]=new Map);for(const[l,u]of Object.entries(i)){if(l==="type")continue;let d=s.get(l);d||(d=new Map,s.set(l,d));const h=d.get(u)??0;d.set(u,h+1)}}for(const[n,i]of t)e[n]=i.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){L(this,Mu,null)}get modifiedIds(){if(m(this,Mu))return m(this,Mu);const e=[];for(const t of m(this,xr).values())!(t instanceof sn)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return L(this,Mu,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return m(this,xr).entries()}}Ou=new WeakMap,Mu=new WeakMap,xr=new WeakMap,Rv=new WeakSet,TF=function(){m(this,Ou)||(L(this,Ou,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Zm;class CF extends mS{constructor(t){super();V(this,Zm);const{map:n,hash:i,transfer:a}=t.serializable,s=structuredClone(n,a?{transfer:a}:null);L(this,Zm,{map:s,hash:i,transfer:a})}get print(){en("Should not call PrintAnnotationStorage.print")}get serializable(){return m(this,Zm)}get modifiedIds(){return Dt(this,"modifiedIds",{ids:new Set,hash:""})}}Zm=new WeakMap;var wf;class z7{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){V(this,wf,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),m(this,wf).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||m(this,wf).has(e.loadedName))){if(Bn(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:s}=e,l=new FontFace(i,a,s);this.addNativeFontFace(l);try{await l.load(),m(this,wf).add(i),n==null||n(e)}catch{gt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}en("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw gt(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Dt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Dt(this,"isSyncFontLoadingSupported",Vr||Ar.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Bn(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:t,callback:e};return n.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Dt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(N,E){return N.charCodeAt(E)<<24|N.charCodeAt(E+1)<<16|N.charCodeAt(E+2)<<8|N.charCodeAt(E+3)&255}function i(N,E,C,j){const M=N.substring(0,E),O=N.substring(E+C);return M+j+O}let a,s;const l=this._document.createElement("canvas");l.width=1,l.height=1;const u=l.getContext("2d");let d=0;function h(N,E){if(++d>30){gt("Load test font never loaded."),E();return}if(u.font="30px "+N,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){E();return}setTimeout(h.bind(null,N,E))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=i(b,976,g.length,g);const k=16,v=1482184792;let w=n(b,k);for(a=0,s=g.length-3;a<s;a+=4)w=w-v+n(g,a)|0;a<g.length&&(w=w-v+n(g+"XXX",a)|0),b=i(b,k,4,A7(w));const D=`url(data:font/opentype;base64,${btoa(b)});`,_=`@font-face {font-family:"${g}";src:${D}}`;this.insertRule(_);const A=this._document.createElement("div");A.style.visibility="hidden",A.style.width=A.style.height="10px",A.style.position="absolute",A.style.top=A.style.left="0px";for(const N of[e.loadedName,g]){const E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=N,A.append(E)}this._document.body.append(A),h(g,()=>{A.remove(),t.complete()})}}wf=new WeakMap;class W7{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const n in e)this[n]=e[n];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Qj(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(s){gt(`getPathGenerator - ignoring character: "${s}".`)}const a=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=a}}function H7(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(Vr)return r;const e=URL.parse(r,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function q7(r){if(Vr&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return ux(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r==null?void 0:r.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Xy(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const r_=r=>typeof r=="object"&&Number.isInteger(r==null?void 0:r.num)&&r.num>=0&&Number.isInteger(r==null?void 0:r.gen)&&r.gen>=0,V7=r=>typeof r=="object"&&typeof(r==null?void 0:r.name)=="string",X7=N7.bind(null,r_,V7);var _o,jv;class G7{constructor(){V(this,_o,new Map);V(this,jv,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};m(this,jv).then(()=>{for(const[i]of m(this,_o))i.call(this,n)})}addEventListener(e,t,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:a}=n;if(a.aborted){gt("LoopbackPort - cannot use an `aborted` signal.");return}const s=()=>this.removeEventListener(e,t);i=()=>a.removeEventListener("abort",s),a.addEventListener("abort",s)}m(this,_o).set(t,i)}removeEventListener(e,t){const n=m(this,_o).get(t);n==null||n(),m(this,_o).delete(t)}terminate(){for(const[,e]of m(this,_o))e==null||e();m(this,_o).clear()}}_o=new WeakMap,jv=new WeakMap;const Gy={DATA:1,ERROR:2},In={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function m4(){}function ii(r){if(r instanceof Ic||r instanceof OD||r instanceof h4||r instanceof uv||r instanceof tD)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||en('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Ic(r.message);case"InvalidPDFException":return new OD(r.message);case"PasswordException":return new h4(r.message,r.code);case"ResponseException":return new uv(r.message,r.status,r.missing);case"UnknownErrorException":return new tD(r.message,r.details)}return new tD(r.message,r.toString())}var kf,_a,NF,UF,RF,R0;class $g{constructor(e,t,n){V(this,_a);V(this,kf,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",$(this,_a,NF).bind(this),{signal:m(this,kf).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(s){a.reject(s)}return a.promise}sendWithStream(e,t,n,i){const a=this.streamId++,s=this.sourceName,l=this.targetName,u=this.comObj;return new ReadableStream({start:d=>{const h=Promise.withResolvers();return this.streamControllers[a]={controller:d,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:s,targetName:l,action:e,streamId:a,data:t,desiredSize:d.desiredSize},i),h.promise},pull:d=>{const h=Promise.withResolvers();return this.streamControllers[a].pullCall=h,u.postMessage({sourceName:s,targetName:l,stream:In.PULL,streamId:a,desiredSize:d.desiredSize}),h.promise},cancel:d=>{Bn(d instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[a].cancelCall=h,this.streamControllers[a].isClosed=!0,u.postMessage({sourceName:s,targetName:l,stream:In.CANCEL,streamId:a,reason:ii(d)}),h.promise}},n)}destroy(){var e;(e=m(this,kf))==null||e.abort(),L(this,kf,null)}}kf=new WeakMap,_a=new WeakSet,NF=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){$(this,_a,RF).call(this,e);return}if(e.callback){const n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Gy.DATA)i.resolve(e.data);else if(e.callback===Gy.ERROR)i.reject(ii(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,i=e.sourceName,a=this.comObj;Promise.try(t,e.data).then(function(s){a.postMessage({sourceName:n,targetName:i,callback:Gy.DATA,callbackId:e.callbackId,data:s})},function(s){a.postMessage({sourceName:n,targetName:i,callback:Gy.ERROR,callbackId:e.callbackId,reason:ii(s)})});return}if(e.streamId){$(this,_a,UF).call(this,e);return}t(e.data)},UF=function(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,s=this,l=this.actionHandler[e.action],u={enqueue(d,h=1,g){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=h,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:i,stream:In.ENQUEUE,streamId:t,chunk:d},g)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:In.CLOSE,streamId:t}),delete s.streamSinks[t])},error(d){Bn(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:In.ERROR,streamId:t,reason:ii(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,Promise.try(l,e.data,u).then(function(){a.postMessage({sourceName:n,targetName:i,stream:In.START_COMPLETE,streamId:t,success:!0})},function(d){a.postMessage({sourceName:n,targetName:i,stream:In.START_COMPLETE,streamId:t,reason:ii(d)})})},RF=function(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,s=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case In.START_COMPLETE:e.success?s.startCall.resolve():s.startCall.reject(ii(e.reason));break;case In.PULL_COMPLETE:e.success?s.pullCall.resolve():s.pullCall.reject(ii(e.reason));break;case In.PULL:if(!l){a.postMessage({sourceName:n,targetName:i,stream:In.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||m4).then(function(){a.postMessage({sourceName:n,targetName:i,stream:In.PULL_COMPLETE,streamId:t,success:!0})},function(d){a.postMessage({sourceName:n,targetName:i,stream:In.PULL_COMPLETE,streamId:t,reason:ii(d)})});break;case In.ENQUEUE:if(Bn(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case In.CLOSE:if(Bn(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),$(this,_a,R0).call(this,s,t);break;case In.ERROR:Bn(s,"error should have stream controller"),s.controller.error(ii(e.reason)),$(this,_a,R0).call(this,s,t);break;case In.CANCEL_COMPLETE:e.success?s.cancelCall.resolve():s.cancelCall.reject(ii(e.reason)),$(this,_a,R0).call(this,s,t);break;case In.CANCEL:if(!l)break;const u=ii(e.reason);Promise.try(l.onCancel||m4,u).then(function(){a.postMessage({sourceName:n,targetName:i,stream:In.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){a.postMessage({sourceName:n,targetName:i,stream:In.CANCEL_COMPLETE,streamId:t,reason:ii(d)})}),l.sinkCapability.reject(u),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},R0=async function(e,t){var n,i,a;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(i=e.pullCall)==null?void 0:i.promise,(a=e.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[t]};var Jm;class jF{constructor({enableHWA:e=!1}){V(this,Jm,!1);L(this,Jm,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!m(this,Jm)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){en("Abstract method `_createCanvas` called.")}}Jm=new WeakMap;class $7 extends jF{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class FF{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){en("Abstract method `_fetch` called.")}}class b4 extends FF{async _fetch(e){const t=await dx(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):ux(t)}}class IF{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,a){return"none"}destroy(e=!1){}}var Lu,Df,Ao,So,Nr,Bu,Pu,Qe,Tr,Yg,Ih,j0,Oh,OF,i_,Mh,Kg,Qg,a_,Zg;class Y7 extends IF{constructor({docId:t,ownerDocument:n=globalThis.document}){super();V(this,Qe);V(this,Lu);V(this,Df);V(this,Ao);V(this,So);V(this,Nr);V(this,Bu);V(this,Pu,0);L(this,So,t),L(this,Nr,n)}addFilter(t){if(!t)return"none";let n=m(this,Qe,Tr).get(t);if(n)return n;const[i,a,s]=$(this,Qe,j0).call(this,t),l=t.length===1?i:`${i}${a}${s}`;if(n=m(this,Qe,Tr).get(l),n)return m(this,Qe,Tr).set(t,n),n;const u=`g_${m(this,So)}_transfer_map_${Hn(this,Pu)._++}`,d=$(this,Qe,Oh).call(this,u);m(this,Qe,Tr).set(t,d),m(this,Qe,Tr).set(l,d);const h=$(this,Qe,Mh).call(this,u);return $(this,Qe,Qg).call(this,i,a,s,h),d}addHCMFilter(t,n){var k;const i=`${t}-${n}`,a="base";let s=m(this,Qe,Yg).get(a);if((s==null?void 0:s.key)===i||(s?((k=s.filter)==null||k.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},m(this,Qe,Yg).set(a,s)),!t||!n))return s.url;const l=$(this,Qe,Zg).call(this,t);t=tt.makeHexColor(...l);const u=$(this,Qe,Zg).call(this,n);if(n=tt.makeHexColor(...u),m(this,Qe,Ih).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return s.url;const d=new Array(256);for(let v=0;v<=255;v++){const w=v/255;d[v]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const h=d.join(","),g=`g_${m(this,So)}_hcm_filter`,b=s.filter=$(this,Qe,Mh).call(this,g);$(this,Qe,Qg).call(this,h,h,h,b),$(this,Qe,i_).call(this,b);const x=(v,w)=>{const D=l[v]/255,_=u[v]/255,A=new Array(w+1);for(let N=0;N<=w;N++)A[N]=D+N/w*(_-D);return A.join(",")};return $(this,Qe,Qg).call(this,x(0,5),x(1,5),x(2,5),b),s.url=$(this,Qe,Oh).call(this,g),s.url}addAlphaFilter(t){let n=m(this,Qe,Tr).get(t);if(n)return n;const[i]=$(this,Qe,j0).call(this,[t]),a=`alpha_${i}`;if(n=m(this,Qe,Tr).get(a),n)return m(this,Qe,Tr).set(t,n),n;const s=`g_${m(this,So)}_alpha_map_${Hn(this,Pu)._++}`,l=$(this,Qe,Oh).call(this,s);m(this,Qe,Tr).set(t,l),m(this,Qe,Tr).set(a,l);const u=$(this,Qe,Mh).call(this,s);return $(this,Qe,a_).call(this,i,u),l}addLuminosityFilter(t){let n=m(this,Qe,Tr).get(t||"luminosity");if(n)return n;let i,a;if(t?([i]=$(this,Qe,j0).call(this,[t]),a=`luminosity_${i}`):a="luminosity",n=m(this,Qe,Tr).get(a),n)return m(this,Qe,Tr).set(t,n),n;const s=`g_${m(this,So)}_luminosity_map_${Hn(this,Pu)._++}`,l=$(this,Qe,Oh).call(this,s);m(this,Qe,Tr).set(t,l),m(this,Qe,Tr).set(a,l);const u=$(this,Qe,Mh).call(this,s);return $(this,Qe,OF).call(this,u),t&&$(this,Qe,a_).call(this,i,u),l}addHighlightHCMFilter(t,n,i,a,s){var _;const l=`${n}-${i}-${a}-${s}`;let u=m(this,Qe,Yg).get(t);if((u==null?void 0:u.key)===l||(u?((_=u.filter)==null||_.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},m(this,Qe,Yg).set(t,u)),!n||!i))return u.url;const[d,h]=[n,i].map($(this,Qe,Zg).bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),b=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[x,k]=[a,s].map($(this,Qe,Zg).bind(this));b<g&&([g,b,x,k]=[b,g,k,x]),m(this,Qe,Ih).style.color="";const v=(A,N,E)=>{const C=new Array(256),j=(b-g)/E,M=A/255,O=(N-A)/(255*E);let F=0;for(let G=0;G<=E;G++){const R=Math.round(g+G*j),W=M+G*O;for(let U=F;U<=R;U++)C[U]=W;F=R+1}for(let G=F;G<256;G++)C[G]=C[F-1];return C.join(",")},w=`g_${m(this,So)}_hcm_${t}_filter`,D=u.filter=$(this,Qe,Mh).call(this,w);return $(this,Qe,i_).call(this,D),$(this,Qe,Qg).call(this,v(x[0],k[0],5),v(x[1],k[1],5),v(x[2],k[2],5),D),u.url=$(this,Qe,Oh).call(this,w),u.url}destroy(t=!1){var n,i,a,s;t&&((n=m(this,Bu))!=null&&n.size)||((i=m(this,Ao))==null||i.parentNode.parentNode.remove(),L(this,Ao,null),(a=m(this,Df))==null||a.clear(),L(this,Df,null),(s=m(this,Bu))==null||s.clear(),L(this,Bu,null),L(this,Pu,0))}}Lu=new WeakMap,Df=new WeakMap,Ao=new WeakMap,So=new WeakMap,Nr=new WeakMap,Bu=new WeakMap,Pu=new WeakMap,Qe=new WeakSet,Tr=function(){return m(this,Df)||L(this,Df,new Map)},Yg=function(){return m(this,Bu)||L(this,Bu,new Map)},Ih=function(){if(!m(this,Ao)){const t=m(this,Nr).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=m(this,Nr).createElementNS(io,"svg");i.setAttribute("width",0),i.setAttribute("height",0),L(this,Ao,m(this,Nr).createElementNS(io,"defs")),t.append(i),i.append(m(this,Ao)),m(this,Nr).body.append(t)}return m(this,Ao)},j0=function(t){if(t.length===1){const d=t[0],h=new Array(256);for(let b=0;b<256;b++)h[b]=d[b]/255;const g=h.join(",");return[g,g,g]}const[n,i,a]=t,s=new Array(256),l=new Array(256),u=new Array(256);for(let d=0;d<256;d++)s[d]=n[d]/255,l[d]=i[d]/255,u[d]=a[d]/255;return[s.join(","),l.join(","),u.join(",")]},Oh=function(t){if(m(this,Lu)===void 0){L(this,Lu,"");const n=m(this,Nr).URL;n!==m(this,Nr).baseURI&&(A1(n)?gt('#createUrl: ignore "data:"-URL for performance reasons.'):L(this,Lu,$j(n,"")))}return`url(${m(this,Lu)}#${t})`},OF=function(t){const n=m(this,Nr).createElementNS(io,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},i_=function(t){const n=m(this,Nr).createElementNS(io,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Mh=function(t){const n=m(this,Nr).createElementNS(io,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),m(this,Qe,Ih).append(n),n},Kg=function(t,n,i){const a=m(this,Nr).createElementNS(io,n);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),t.append(a)},Qg=function(t,n,i,a){const s=m(this,Nr).createElementNS(io,"feComponentTransfer");a.append(s),$(this,Qe,Kg).call(this,s,"feFuncR",t),$(this,Qe,Kg).call(this,s,"feFuncG",n),$(this,Qe,Kg).call(this,s,"feFuncB",i)},a_=function(t,n){const i=m(this,Nr).createElementNS(io,"feComponentTransfer");n.append(i),$(this,Qe,Kg).call(this,i,"feFuncA",t)},Zg=function(t){return m(this,Qe,Ih).style.color=t,S1(getComputedStyle(m(this,Qe,Ih)).getPropertyValue("color"))};class MF{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){en("Abstract method `_fetch` called.")}}class x4 extends MF{async _fetch(e){const t=await dx(e,"arraybuffer");return new Uint8Array(t)}}class LF{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){en("Abstract method `_fetch` called.")}}class y4 extends LF{async _fetch(e){const t=await dx(e,"arraybuffer");return new Uint8Array(t)}}Vr&&gt("Please use the `legacy` build in Node.js environments.");async function bS(r){const t=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(t)}class K7 extends IF{}class Q7 extends jF{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class Z7 extends FF{async _fetch(e){return bS(e)}}class J7 extends MF{async _fetch(e){return bS(e)}}class ez extends LF{async _fetch(e){return bS(e)}}const Th="__forcedDependency";var Ni,zr,_f,ks,Af,Eo,Vt,Qt,To,Ui,Jl,Sf,ec,tc;class tz{constructor(e){V(this,Ni,{__proto__:null});V(this,zr,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Th]:[]});V(this,_f,new Map);V(this,ks,[]);V(this,Af,[]);V(this,Eo,[[1,0,0,1,0,0]]);V(this,Vt,[-1/0,-1/0,1/0,1/0]);V(this,Qt,new Float64Array([1/0,1/0,-1/0,-1/0]));V(this,To,-1);V(this,Ui,new Set);V(this,Jl,new Map);V(this,Sf,new Map);V(this,ec);V(this,tc);L(this,ec,e.width),L(this,tc,e.height)}save(e){return L(this,Ni,{__proto__:m(this,Ni)}),L(this,zr,{__proto__:m(this,zr),transform:{__proto__:m(this,zr).transform},moveText:{__proto__:m(this,zr).moveText},sameLineText:{__proto__:m(this,zr).sameLineText},[Th]:{__proto__:m(this,zr)[Th]}}),L(this,Vt,{__proto__:m(this,Vt)}),m(this,ks).push([e,null]),this}restore(e){const t=Object.getPrototypeOf(m(this,Ni));if(t===null)return this;L(this,Ni,t),L(this,zr,Object.getPrototypeOf(m(this,zr))),L(this,Vt,Object.getPrototypeOf(m(this,Vt)));const n=m(this,ks).pop();return n!==void 0&&(n[1]=e),this}recordOpenMarker(e){return m(this,ks).push([e,null]),this}getOpenMarker(){return m(this,ks).length===0?null:m(this,ks).at(-1)[0]}recordCloseMarker(e){const t=m(this,ks).pop();return t!==void 0&&(t[1]=e),this}beginMarkedContent(e){return m(this,Af).push([e,null]),this}endMarkedContent(e){const t=m(this,Af).pop();return t!==void 0&&(t[1]=e),this}pushBaseTransform(e){return m(this,Eo).push(tt.multiplyByDOMMatrix(m(this,Eo).at(-1),e.getTransform())),this}popBaseTransform(){return m(this,Eo).length>1&&m(this,Eo).pop(),this}recordSimpleData(e,t){return m(this,Ni)[e]=t,this}recordIncrementalData(e,t){return m(this,zr)[e].push(t),this}resetIncrementalData(e,t){return m(this,zr)[e].length=0,this}recordNamedData(e,t){return m(this,_f).set(e,t),this}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Th,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in m(this,Ni)&&this.recordFutureForcedDependency(t,m(this,Ni)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of m(this,Ui))this.recordFutureForcedDependency(Th,e);return this}resetBBox(e){return L(this,To,e),m(this,Qt)[0]=1/0,m(this,Qt)[1]=1/0,m(this,Qt)[2]=-1/0,m(this,Qt)[3]=-1/0,this}get hasPendingBBox(){return m(this,To)!==-1}recordClipBox(e,t,n,i,a,s){const l=tt.multiplyByDOMMatrix(m(this,Eo).at(-1),t.getTransform()),u=[1/0,1/0,-1/0,-1/0];tt.axialAlignedBoundingBox([n,a,i,s],l,u);const d=tt.intersect(m(this,Vt),u);return d?(m(this,Vt)[0]=d[0],m(this,Vt)[1]=d[1],m(this,Vt)[2]=d[2],m(this,Vt)[3]=d[3]):(m(this,Vt)[0]=m(this,Vt)[1]=1/0,m(this,Vt)[2]=m(this,Vt)[3]=-1/0),this}recordBBox(e,t,n,i,a,s){const l=m(this,Vt);if(l[0]===1/0)return this;const u=tt.multiplyByDOMMatrix(m(this,Eo).at(-1),t.getTransform());if(l[0]===-1/0)return tt.axialAlignedBoundingBox([n,a,i,s],u,m(this,Qt)),this;const d=[1/0,1/0,-1/0,-1/0];return tt.axialAlignedBoundingBox([n,a,i,s],u,d),m(this,Qt)[0]=Math.min(m(this,Qt)[0],Math.max(d[0],l[0])),m(this,Qt)[1]=Math.min(m(this,Qt)[1],Math.max(d[1],l[1])),m(this,Qt)[2]=Math.max(m(this,Qt)[2],Math.min(d[2],l[2])),m(this,Qt)[3]=Math.max(m(this,Qt)[3],Math.min(d[3],l[3])),this}recordCharacterBBox(e,t,n,i=1,a=0,s=0,l){const u=n.bbox;let d,h;if(u&&(d=u[2]!==u[0]&&u[3]!==u[1]&&m(this,Sf).get(n),d!==!1&&(h=[0,0,0,0],tt.axialAlignedBoundingBox(u,n.fontMatrix,h),(i!==1||a!==0||s!==0)&&tt.scaleMinMax([i,0,0,-i,a,s],h),d)))return this.recordBBox(e,t,h[0],h[2],h[1],h[3]);if(!l)return this.recordFullPageBBox(e);const g=l();return u&&h&&d===void 0&&(d=h[0]<=a-g.actualBoundingBoxLeft&&h[2]>=a+g.actualBoundingBoxRight&&h[1]<=s-g.actualBoundingBoxAscent&&h[3]>=s+g.actualBoundingBoxDescent,m(this,Sf).set(n,d),d)?this.recordBBox(e,t,h[0],h[2],h[1],h[3]):this.recordBBox(e,t,a-g.actualBoundingBoxLeft,a+g.actualBoundingBoxRight,s-g.actualBoundingBoxAscent,s+g.actualBoundingBoxDescent)}recordFullPageBBox(e){return m(this,Qt)[0]=Math.max(0,m(this,Vt)[0]),m(this,Qt)[1]=Math.max(0,m(this,Vt)[1]),m(this,Qt)[2]=Math.min(m(this,ec),m(this,Vt)[2]),m(this,Qt)[3]=Math.min(m(this,tc),m(this,Vt)[3]),this}getSimpleIndex(e){return m(this,Ni)[e]}recordDependencies(e,t){const n=m(this,Ui),i=m(this,Ni),a=m(this,zr);for(const s of t)s in m(this,Ni)?n.add(i[s]):s in a&&a[s].forEach(n.add,n);return this}copyDependenciesFromIncrementalOperation(e,t){const n=m(this,Jl),i=m(this,Ui);for(const a of m(this,zr)[t])n.get(a).dependencies.forEach(i.add,i.add(a));return this}recordNamedDependency(e,t){return m(this,_f).has(t)&&m(this,Ui).add(m(this,_f).get(t)),this}recordOperation(e,t=!1){this.recordDependencies(e,[Th]);const n=new Set(m(this,Ui)),i=m(this,ks).concat(m(this,Af)),a=m(this,To)===e?{minX:m(this,Qt)[0],minY:m(this,Qt)[1],maxX:m(this,Qt)[2],maxY:m(this,Qt)[3]}:null;return m(this,Jl).set(e,{bbox:a,pairs:i,dependencies:n}),t||L(this,To,-1),m(this,Ui).clear(),this}bboxToClipBoxDropOperation(e){return m(this,To)!==-1&&(L(this,To,-1),m(this,Vt)[0]=Math.max(m(this,Vt)[0],m(this,Qt)[0]),m(this,Vt)[1]=Math.max(m(this,Vt)[1],m(this,Qt)[1]),m(this,Vt)[2]=Math.min(m(this,Vt)[2],m(this,Qt)[2]),m(this,Vt)[3]=Math.min(m(this,Vt)[3],m(this,Qt)[3])),m(this,Ui).clear(),this}_takePendingDependencies(){const e=m(this,Ui);return L(this,Ui,new Set),e}_extractOperation(e){const t=m(this,Jl).get(e);return m(this,Jl).delete(e),t}_pushPendingDependencies(e){for(const t of e)m(this,Ui).add(t)}take(){return m(this,Sf).clear(),Array.from(m(this,Jl),([e,{bbox:t,pairs:n,dependencies:i}])=>(n.forEach(a=>a.forEach(i.add,i)),i.delete(e),{minX:((t==null?void 0:t.minX)??0)/m(this,ec),maxX:((t==null?void 0:t.maxX)??m(this,ec))/m(this,ec),minY:((t==null?void 0:t.minY)??0)/m(this,tc),maxY:((t==null?void 0:t.maxY)??m(this,tc))/m(this,tc),dependencies:Array.from(i).sort((a,s)=>a-s),idx:e}))}}Ni=new WeakMap,zr=new WeakMap,_f=new WeakMap,ks=new WeakMap,Af=new WeakMap,Eo=new WeakMap,Vt=new WeakMap,Qt=new WeakMap,To=new WeakMap,Ui=new WeakMap,Jl=new WeakMap,Sf=new WeakMap,ec=new WeakMap,tc=new WeakMap;var Bt,yn,Ef,nc,Tf;const HS=class HS{constructor(e,t){V(this,Bt);V(this,yn);V(this,Ef,0);V(this,nc);V(this,Tf,0);if(e instanceof HS)return e;L(this,Bt,e),L(this,nc,e._takePendingDependencies()),L(this,yn,t)}save(e){return Hn(this,Tf)._++,m(this,Bt).save(m(this,yn)),this}restore(e){return m(this,Tf)>0&&(m(this,Bt).restore(m(this,yn)),Hn(this,Tf)._--),this}recordOpenMarker(e){return Hn(this,Ef)._++,this}getOpenMarker(){return m(this,Ef)>0?m(this,yn):m(this,Bt).getOpenMarker()}recordCloseMarker(e){return Hn(this,Ef)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return m(this,Bt).pushBaseTransform(e),this}popBaseTransform(){return m(this,Bt).popBaseTransform(),this}recordSimpleData(e,t){return m(this,Bt).recordSimpleData(e,m(this,yn)),this}recordIncrementalData(e,t){return m(this,Bt).recordIncrementalData(e,m(this,yn)),this}resetIncrementalData(e,t){return m(this,Bt).resetIncrementalData(e,m(this,yn)),this}recordNamedData(e,t){return this}recordFutureForcedDependency(e,t){return m(this,Bt).recordFutureForcedDependency(e,m(this,yn)),this}inheritSimpleDataAsFutureForcedDependencies(e){return m(this,Bt).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return m(this,Bt).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return m(this,Bt).hasPendingBBox||m(this,Bt).resetBBox(m(this,yn)),this}get hasPendingBBox(){return m(this,Bt).hasPendingBBox}recordClipBox(e,t,n,i,a,s){return m(this,Bt).recordClipBox(m(this,yn),t,n,i,a,s),this}recordBBox(e,t,n,i,a,s){return m(this,Bt).recordBBox(m(this,yn),t,n,i,a,s),this}recordCharacterBBox(e,t,n,i,a,s,l){return m(this,Bt).recordCharacterBBox(m(this,yn),t,n,i,a,s,l),this}recordFullPageBBox(e){return m(this,Bt).recordFullPageBBox(m(this,yn)),this}getSimpleIndex(e){return m(this,Bt).getSimpleIndex(e)}recordDependencies(e,t){return m(this,Bt).recordDependencies(m(this,yn),t),this}copyDependenciesFromIncrementalOperation(e,t){return m(this,Bt).copyDependenciesFromIncrementalOperation(m(this,yn),t),this}recordNamedDependency(e,t){return m(this,Bt).recordNamedDependency(m(this,yn),t),this}recordOperation(e){m(this,Bt).recordOperation(m(this,yn),!0);const t=m(this,Bt)._extractOperation(m(this,yn));for(const n of t.dependencies)m(this,nc).add(n);return m(this,nc).delete(m(this,yn)),m(this,nc).delete(null),this}bboxToClipBoxDropOperation(e){return m(this,Bt).bboxToClipBoxDropOperation(m(this,yn)),this}recordNestedDependencies(){m(this,Bt)._pushPendingDependencies(m(this,nc))}take(){throw new Error("Unreachable")}};Bt=new WeakMap,yn=new WeakMap,Ef=new WeakMap,nc=new WeakMap,Tf=new WeakMap;let pv=HS;const ua={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation"],transform:["transform"],transformAndFill:["transform","fillColor"]},wr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function s_(r,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,n),r.clip(i)}class xS{isModifyingCurrentTransform(){return!1}getPattern(){en("Abstract method `getPattern` called.")}}class nz extends xS{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let a;if(i===wr.STROKE||i===wr.FILL){const s=t.current.getClippedPathBoundingBox(i,vn(e))||[0,0,0,0],l=Math.ceil(s[2]-s[0])||1,u=Math.ceil(s[3]-s[1])||1,d=t.cachedCanvases.getCanvas("pattern",l,u),h=d.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-s[0],-s[1]),n=tt.transform(n,[1,0,0,1,s[0],s[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),s_(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),a=e.createPattern(d.canvas,"no-repeat");const g=new DOMMatrix(n);a.setTransform(g)}else s_(e,this._bbox),a=this._createGradient(e);return a}}function iD(r,e,t,n,i,a,s,l){const u=e.coords,d=e.colors,h=r.data,g=r.width*4;let b;u[t+1]>u[n+1]&&(b=t,t=n,n=b,b=a,a=s,s=b),u[n+1]>u[i+1]&&(b=n,n=i,i=b,b=s,s=l,l=b),u[t+1]>u[n+1]&&(b=t,t=n,n=b,b=a,a=s,s=b);const x=(u[t]+e.offsetX)*e.scaleX,k=(u[t+1]+e.offsetY)*e.scaleY,v=(u[n]+e.offsetX)*e.scaleX,w=(u[n+1]+e.offsetY)*e.scaleY,D=(u[i]+e.offsetX)*e.scaleX,_=(u[i+1]+e.offsetY)*e.scaleY;if(k>=_)return;const A=d[a],N=d[a+1],E=d[a+2],C=d[s],j=d[s+1],M=d[s+2],O=d[l],F=d[l+1],G=d[l+2],R=Math.round(k),W=Math.round(_);let U,X,P,B,ee,Y,H,J;for(let ie=R;ie<=W;ie++){if(ie<w){const Ie=ie<k?0:(k-ie)/(k-w);U=x-(x-v)*Ie,X=A-(A-C)*Ie,P=N-(N-j)*Ie,B=E-(E-M)*Ie}else{let Ie;ie>_?Ie=1:w===_?Ie=0:Ie=(w-ie)/(w-_),U=v-(v-D)*Ie,X=C-(C-O)*Ie,P=j-(j-F)*Ie,B=M-(M-G)*Ie}let z;ie<k?z=0:ie>_?z=1:z=(k-ie)/(k-_),ee=x-(x-D)*z,Y=A-(A-O)*z,H=N-(N-F)*z,J=E-(E-G)*z;const ge=Math.round(Math.min(U,ee)),ve=Math.round(Math.max(U,ee));let je=g*ie+ge*4;for(let Ie=ge;Ie<=ve;Ie++)z=(U-Ie)/(U-ee),z<0?z=0:z>1&&(z=1),h[je++]=X-(X-Y)*z|0,h[je++]=P-(P-H)*z|0,h[je++]=B-(B-J)*z|0,h[je++]=255}}function rz(r,e,t){const n=e.coords,i=e.colors;let a,s;switch(e.type){case"lattice":const l=e.verticesPerRow,u=Math.floor(n.length/l)-1,d=l-1;for(a=0;a<u;a++){let h=a*l;for(let g=0;g<d;g++,h++)iD(r,t,n[h],n[h+1],n[h+l],i[h],i[h+1],i[h+l]),iD(r,t,n[h+l+1],n[h+1],n[h+l],i[h+l+1],i[h+1],i[h+l])}break;case"triangles":for(a=0,s=n.length;a<s;a+=3)iD(r,t,n[a],n[a+1],n[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class iz extends xS{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const l=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-u,g=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),x=d/g,k=h/b,v={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-u,scaleX:1/x,scaleY:1/k},w=g+4,D=b+4,_=n.getCanvas("mesh",w,D),A=_.context,N=A.createImageData(g,b);if(t){const C=N.data;for(let j=0,M=C.length;j<M;j+=4)C[j]=t[0],C[j+1]=t[1],C[j+2]=t[2],C[j+3]=255}for(const C of this._figures)rz(N,C,v);return A.putImageData(N,2,2),{canvas:_.canvas,offsetX:l-2*x,offsetY:u-2*k,scaleX:x,scaleY:k}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){s_(e,this._bbox);const a=new Float32Array(2);if(i===wr.SHADING)tt.singularValueDecompose2dScale(vn(e),a);else if(this.matrix){tt.singularValueDecompose2dScale(this.matrix,a);const[l,u]=a;tt.singularValueDecompose2dScale(t.baseTransform,a),a[0]*=l,a[1]*=u}else tt.singularValueDecompose2dScale(t.baseTransform,a);const s=this._createMeshCanvas(a,i===wr.SHADING?null:this._background,t.cachedCanvases);return i!==wr.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}}class az extends xS{getPattern(){return"hotpink"}}function sz(r){switch(r[0]){case"RadialAxial":return new nz(r);case"Mesh":return new iz(r);case"Dummy":return new az}throw new Error(`Unknown IR type: ${r[0]}`)}const v4={COLORED:1,UNCOLORED:2},Fv=class Fv{constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e){var ee,Y,H,J;const{bbox:t,operatorList:n,paintType:i,tilingType:a,color:s,canvasGraphicsFactory:l}=this;let{xstep:u,ystep:d}=this;u=Math.abs(u),d=Math.abs(d),_1("TilingType: "+a);const h=t[0],g=t[1],b=t[2],x=t[3],k=b-h,v=x-g,w=new Float32Array(2);tt.singularValueDecompose2dScale(this.matrix,w);const[D,_]=w;tt.singularValueDecompose2dScale(this.baseTransform,w);const A=D*w[0],N=_*w[1];let E=k,C=v,j=!1,M=!1;const O=Math.ceil(u*A),F=Math.ceil(d*N),G=Math.ceil(k*A),R=Math.ceil(v*N);O>=G?E=u:j=!0,F>=R?C=d:M=!0;const W=this.getSizeAndScale(E,this.ctx.canvas.width,A),U=this.getSizeAndScale(C,this.ctx.canvas.height,N),X=e.cachedCanvases.getCanvas("pattern",W.size,U.size),P=X.context,B=l.createCanvasGraphics(P);if(B.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(B,i,s),P.translate(-W.scale*h,-U.scale*g),B.transform(0,W.scale,0,0,U.scale,0,0),P.save(),(ee=B.dependencyTracker)==null||ee.save(),this.clipBbox(B,h,g,b,x),B.baseTransform=vn(B.ctx),B.executeOperatorList(n),B.endDrawing(),(J=(Y=B.dependencyTracker)==null?void 0:(H=Y.restore()).recordNestedDependencies)==null||J.call(H),P.restore(),j||M){const ie=X.canvas;j&&(E=u),M&&(C=d);const z=this.getSizeAndScale(E,this.ctx.canvas.width,A),ge=this.getSizeAndScale(C,this.ctx.canvas.height,N),ve=z.size,je=ge.size,Ie=e.cachedCanvases.getCanvas("pattern-workaround",ve,je),Pe=Ie.context,fe=j?Math.floor(k/u):0,Ue=M?Math.floor(v/d):0;for(let be=0;be<=fe;be++)for(let Fe=0;Fe<=Ue;Fe++)Pe.drawImage(ie,ve*be,je*Fe,ve,je,0,0,ve,je);return{canvas:Ie.canvas,scaleX:z.scale,scaleY:ge.scale,offsetX:h,offsetY:g}}return{canvas:X.canvas,scaleX:W.scale,scaleY:U.scale,offsetX:h,offsetY:g}}getSizeAndScale(e,t,n){const i=Math.max(Fv.MAX_PATTERN_SIZE,t);let a=Math.ceil(e*n);return a>=i?a=i:n=a/e,{scale:n,size:a}}clipBbox(e,t,n,i,a){const s=i-t,l=a-n;e.ctx.rect(t,n,s,l),tt.axialAlignedBoundingBox([t,n,i,a],vn(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,a=e.current;switch(t){case v4.COLORED:const{fillStyle:s,strokeStyle:l}=this.ctx;i.fillStyle=a.fillColor=s,i.strokeStyle=a.strokeColor=l;break;case v4.UNCOLORED:i.fillStyle=i.strokeStyle=n,a.fillColor=a.strokeColor=n;break;default:throw new _7(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i){let a=n;i!==wr.SHADING&&(a=tt.transform(a,t.baseTransform),this.matrix&&(a=tt.transform(a,this.matrix)));const s=this.createPatternCanvas(t);let l=new DOMMatrix(a);l=l.translate(s.offsetX,s.offsetY),l=l.scale(1/s.scaleX,1/s.scaleY);const u=e.createPattern(s.canvas,"repeat");return u.setTransform(l),u}};We(Fv,"MAX_PATTERN_SIZE",3e3);let o_=Fv;function oz({src:r,srcPos:e=0,dest:t,width:n,height:i,nonBlackColor:a=4294967295,inverseDecode:s=!1}){const l=Ar.isLittleEndian?4278190080:255,[u,d]=s?[a,l]:[l,a],h=n>>3,g=n&7,b=r.length;t=new Uint32Array(t.buffer);let x=0;for(let k=0;k<i;k++){for(const w=e+h;e<w;e++){const D=e<b?r[e]:255;t[x++]=D&128?d:u,t[x++]=D&64?d:u,t[x++]=D&32?d:u,t[x++]=D&16?d:u,t[x++]=D&8?d:u,t[x++]=D&4?d:u,t[x++]=D&2?d:u,t[x++]=D&1?d:u}if(g===0)continue;const v=e<b?r[e++]:255;for(let w=0;w<g;w++)t[x++]=v&1<<7-w?d:u}return{srcPos:e,destPos:x}}const w4=16,k4=100,lz=15,D4=10,ci=16,aD=new DOMMatrix,Vi=new Float32Array(2),Vh=new Float32Array([1/0,1/0,-1/0,-1/0]);function cz(r,e){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){e.save(),this.__originalSave()},r.restore=function(){e.restore(),this.__originalRestore()},r.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},r.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},r.transform=function(t,n,i,a,s,l){e.transform(t,n,i,a,s,l),this.__originalTransform(t,n,i,a,s,l)},r.setTransform=function(t,n,i,a,s,l){e.setTransform(t,n,i,a,s,l),this.__originalSetTransform(t,n,i,a,s,l)},r.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},r.rotate=function(t){e.rotate(t),this.__originalRotate(t)},r.clip=function(t){e.clip(t),this.__originalClip(t)},r.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},r.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},r.bezierCurveTo=function(t,n,i,a,s,l){e.bezierCurveTo(t,n,i,a,s,l),this.__originalBezierCurveTo(t,n,i,a,s,l)},r.rect=function(t,n,i,a){e.rect(t,n,i,a),this.__originalRect(t,n,i,a)},r.closePath=function(){e.closePath(),this.__originalClosePath()},r.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class uz{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function $y(r,e,t,n,i,a,s,l,u,d){const[h,g,b,x,k,v]=vn(r);if(g===0&&b===0){const _=s*h+k,A=Math.round(_),N=l*x+v,E=Math.round(N),C=(s+u)*h+k,j=Math.abs(Math.round(C)-A)||1,M=(l+d)*x+v,O=Math.abs(Math.round(M)-E)||1;return r.setTransform(Math.sign(h),0,0,Math.sign(x),A,E),r.drawImage(e,t,n,i,a,0,0,j,O),r.setTransform(h,g,b,x,k,v),[j,O]}if(h===0&&x===0){const _=l*b+k,A=Math.round(_),N=s*g+v,E=Math.round(N),C=(l+d)*b+k,j=Math.abs(Math.round(C)-A)||1,M=(s+u)*g+v,O=Math.abs(Math.round(M)-E)||1;return r.setTransform(0,Math.sign(g),Math.sign(b),0,A,E),r.drawImage(e,t,n,i,a,0,0,O,j),r.setTransform(h,g,b,x,k,v),[O,j]}r.drawImage(e,t,n,i,a,s,l,u,d);const w=Math.hypot(h,g),D=Math.hypot(b,x);return[w*u,D*d]}class _4{constructor(e,t,n){We(this,"alphaIsShape",!1);We(this,"fontSize",0);We(this,"fontSizeScale",1);We(this,"textMatrix",null);We(this,"textMatrixScale",1);We(this,"fontMatrix",ID);We(this,"leading",0);We(this,"x",0);We(this,"y",0);We(this,"lineX",0);We(this,"lineY",0);We(this,"charSpacing",0);We(this,"wordSpacing",0);We(this,"textHScale",1);We(this,"textRenderingMode",pr.FILL);We(this,"textRise",0);We(this,"fillColor","#000000");We(this,"strokeColor","#000000");We(this,"patternFill",!1);We(this,"patternStroke",!1);We(this,"fillAlpha",1);We(this,"strokeAlpha",1);We(this,"lineWidth",1);We(this,"activeSMask",null);We(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Vh.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=wr.FILL,t=null){const n=this.minMax.slice();if(e===wr.STROKE){t||en("Stroke bounding box must include transform."),tt.singularValueDecompose2dScale(t,Vi);const i=Vi[0]*this.lineWidth/2,a=Vi[1]*this.lineWidth/2;n[0]-=i,n[1]-=a,n[2]+=i,n[3]+=a}return n}updateClipFromPath(){const e=tt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Vh,0)}getClippedPathBoundingBox(e=wr.FILL,t=null){return tt.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function A4(r,e){if(e instanceof ImageData){r.putImageData(e,0,0);return}const t=e.height,n=e.width,i=t%ci,a=(t-i)/ci,s=i===0?a:a+1,l=r.createImageData(n,ci);let u=0,d;const h=e.data,g=l.data;let b,x,k,v;if(e.kind===A0.GRAYSCALE_1BPP){const w=h.byteLength,D=new Uint32Array(g.buffer,0,g.byteLength>>2),_=D.length,A=n+7>>3,N=4294967295,E=Ar.isLittleEndian?4278190080:255;for(b=0;b<s;b++){for(k=b<a?ci:i,d=0,x=0;x<k;x++){const C=w-u;let j=0;const M=C>A?n:C*8-7,O=M&-8;let F=0,G=0;for(;j<O;j+=8)G=h[u++],D[d++]=G&128?N:E,D[d++]=G&64?N:E,D[d++]=G&32?N:E,D[d++]=G&16?N:E,D[d++]=G&8?N:E,D[d++]=G&4?N:E,D[d++]=G&2?N:E,D[d++]=G&1?N:E;for(;j<M;j++)F===0&&(G=h[u++],F=128),D[d++]=G&F?N:E,F>>=1}for(;d<_;)D[d++]=0;r.putImageData(l,0,b*ci)}}else if(e.kind===A0.RGBA_32BPP){for(x=0,v=n*ci*4,b=0;b<a;b++)g.set(h.subarray(u,u+v)),u+=v,r.putImageData(l,0,x),x+=ci;b<s&&(v=n*i*4,g.set(h.subarray(u,u+v)),r.putImageData(l,0,x))}else if(e.kind===A0.RGB_24BPP)for(k=ci,v=n*k,b=0;b<s;b++){for(b>=a&&(k=i,v=n*k),d=0,x=v;x--;)g[d++]=h[u++],g[d++]=h[u++],g[d++]=h[u++],g[d++]=255;r.putImageData(l,0,b*ci)}else throw new Error(`bad image kind: ${e.kind}`)}function S4(r,e){if(e.bitmap){r.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,i=t%ci,a=(t-i)/ci,s=i===0?a:a+1,l=r.createImageData(n,ci);let u=0;const d=e.data,h=l.data;for(let g=0;g<s;g++){const b=g<a?ci:i;({srcPos:u}=oz({src:d,srcPos:u,dest:h,width:n,height:b,nonBlackColor:0})),r.putImageData(l,0,g*ci)}}function Fg(r,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)r[n]!==void 0&&(e[n]=r[n]);r.setLineDash!==void 0&&(e.setLineDash(r.getLineDash()),e.lineDashOffset=r.lineDashOffset)}function Yy(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:e}=r;e!=="none"&&e!==""&&(r.filter="none")}function E4(r,e){if(e)return!0;tt.singularValueDecompose2dScale(r,Vi);const t=Math.fround(Is.pixelRatio*Oc.PDF_TO_CSS_UNITS);return Vi[0]<=t&&Vi[1]<=t}const dz=["butt","round","square"],hz=["miter","round","bevel"],fz={},T4={};var Ja,l_,c_,u_;const qS=class qS{constructor(e,t,n,i,a,{optionalContentConfig:s,markedContentStack:l=null},u,d,h){V(this,Ja);this.ctx=e,this.current=new _4(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=s,this.cachedCanvases=new uz(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(e,t,n=null){var i;return typeof t=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:i=null}){const a=this.ctx.canvas.width,s=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,s),this.ctx.fillStyle=l,n){const u=this.cachedCanvases.getCanvas("transparent",a,s);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...vn(this.compositeCtx))}this.ctx.save(),Yy(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=vn(this.ctx)}executeOperatorList(e,t,n,i,a){var D;const s=e.argsArray,l=e.fnArray;let u=t||0;const d=s.length;if(d===u)return u;const h=d-u>D4&&typeof n=="function",g=h?Date.now()+lz:0;let b=0;const x=this.commonObjs,k=this.objs;let v,w;for(;;){if(i!==void 0&&u===i.nextBreakPoint)return i.breakIt(u,n),u;if(!a||a.has(u))if(v=l[u],w=s[u]??null,v!==vm.dependency)w===null?this[v](u):this[v](u,...w);else for(const _ of w){(D=this.dependencyTracker)==null||D.recordNamedData(_,u);const A=_.startsWith("g_")?x:k;if(!A.has(_))return A.get(_,n),u}if(u++,u===d)return u;if(h&&++b>D4){if(Date.now()>g)return n(),u;b=0}}}endDrawing(){$(this,Ja,l_).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),$(this,Ja,c_).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,i=e.height??e.displayHeight;let a=Math.max(Math.hypot(t[0],t[1]),1),s=Math.max(Math.hypot(t[2],t[3]),1),l=n,u=i,d="prescale1",h,g;for(;a>2&&l>1||s>2&&u>1;){let b=l,x=u;a>2&&l>1&&(b=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),a/=l/b),s>2&&u>1&&(x=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,s/=u/x),h=this.cachedCanvases.getCanvas(d,b,x),g=h.context,g.clearRect(0,0,b,x),g.drawImage(e,0,0,l,u,0,0,b,x),e=h.canvas,l=b,u=x,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:u}}_createMaskCanvas(e,t){var F,G;const n=this.ctx,{width:i,height:a}=t,s=this.current.fillColor,l=this.current.patternFill,u=vn(n);let d,h,g,b;if((t.bitmap||t.data)&&t.count>1){const R=t.bitmap||t.data.buffer;h=JSON.stringify(l?u:[u.slice(0,4),s]),d=this._cachedBitmapsMap.get(R),d||(d=new Map,this._cachedBitmapsMap.set(R,d));const W=d.get(h);if(W&&!l){const U=Math.round(Math.min(u[0],u[2])+u[4]),X=Math.round(Math.min(u[1],u[3])+u[5]);return(F=this.dependencyTracker)==null||F.recordDependencies(e,ua.transformAndFill),{canvas:W,offsetX:U,offsetY:X}}g=W}g||(b=this.cachedCanvases.getCanvas("maskCanvas",i,a),S4(b.context,t));let x=tt.transform(u,[1/i,0,0,-1/a,0,0]);x=tt.transform(x,[1,0,0,1,0,-a]);const k=Vh.slice();tt.axialAlignedBoundingBox([0,0,i,a],x,k);const[v,w,D,_]=k,A=Math.round(D-v)||1,N=Math.round(_-w)||1,E=this.cachedCanvases.getCanvas("fillCanvas",A,N),C=E.context,j=v,M=w;C.translate(-j,-M),C.transform(...x),g||(g=this._scaleImage(b.canvas,ls(C)),g=g.img,d&&l&&d.set(h,g)),C.imageSmoothingEnabled=E4(vn(C),t.interpolate),$y(C,g,0,0,g.width,g.height,0,0,i,a),C.globalCompositeOperation="source-in";const O=tt.transform(ls(C),[1,0,0,1,-j,-M]);return C.fillStyle=l?s.getPattern(n,this,O,wr.FILL):s,C.fillRect(0,0,i,a),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(h,E.canvas)),(G=this.dependencyTracker)==null||G.recordDependencies(e,ua.transformAndFill),{canvas:E.canvas,offsetX:Math.round(j),offsetY:Math.round(M)}}setLineWidth(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",e),this.ctx.lineCap=dz[t]}setLineJoin(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=hz[t]}setMiterLimit(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,i,a,s,l;for(const[u,d]of t)switch(u){case"LW":this.setLineWidth(e,d);break;case"LC":this.setLineCap(e,d);break;case"LJ":this.setLineJoin(e,d);break;case"ML":this.setMiterLimit(e,d);break;case"D":this.setDash(e,d[0],d[1]);break;case"RI":this.setRenderingIntent(e,d);break;case"FL":this.setFlatness(e,d);break;case"Font":this.setFont(e,d[0],d[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=d;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=d;break;case"BM":(a=this.dependencyTracker)==null||a.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=d;break;case"SMask":(s=this.dependencyTracker)==null||s.recordSimpleData("SMask",e),this.current.activeSMask=d?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(l=this.dependencyTracker)==null||l.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(d);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,t,n);this.suspendedCtx=this.ctx;const s=this.ctx=a.context;s.setTransform(this.suspendedCtx.getTransform()),Fg(this.suspendedCtx,s),cz(s,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Fg(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const a=i[0],s=i[1],l=i[2]-a,u=i[3]-s;l===0||u===0||(this.genericComposeSMask(t.context,n,l,u,t.subtype,t.backdrop,t.transferMap,a,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,a,s,l,u,d,h,g){let b=e.canvas,x=u-h,k=d-g;if(s)if(x<0||k<0||x+n>b.width||k+i>b.height){const w=this.cachedCanvases.getCanvas("maskExtension",n,i),D=w.context;D.drawImage(b,-x,-k),D.globalCompositeOperation="destination-atop",D.fillStyle=s,D.fillRect(0,0,n,i),D.globalCompositeOperation="source-over",b=w.canvas,x=k=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(x,k,n,i),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(x,k,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),a==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):a==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const v=new Path2D;v.rect(u,d,n,i),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(b,x,k,n,i,u,d,n,i),t.restore()}save(e){var n;this.inSMaskMode&&Fg(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(n=this.dependencyTracker)==null||n.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Fg(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,i,a,s,l){var u;(u=this.dependencyTracker)==null||u.recordIncrementalData("transform",e),this.ctx.transform(t,n,i,a,s,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,i){let[a]=n;if(!i){a||(a=n[0]=new Path2D),this[t](e,a);return}if(this.dependencyTracker!==null){const s=t===vm.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-s,i[2]+s,i[1]-s,i[3]+s).recordDependencies(e,["transform"])}if(!(a instanceof Path2D)){const s=n[0]=new Path2D;for(let l=0,u=a.length;l<u;)switch(a[l++]){case qy.moveTo:s.moveTo(a[l++],a[l++]);break;case qy.lineTo:s.lineTo(a[l++],a[l++]);break;case qy.curveTo:s.bezierCurveTo(a[l++],a[l++],a[l++],a[l++],a[l++],a[l++]);break;case qy.closePath:s.closePath();break;default:gt(`Unrecognized drawing path operator: ${a[l-1]}`);break}a=s}tt.axialAlignedBoundingBox(i,vn(this.ctx),this.current.minMax),this[t](e,a),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){var s;const i=this.ctx,a=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&(a!=null&&a.getPattern)){const l=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=a.getPattern(i,this,ls(i),wr.STROKE),l){const u=new Path2D;u.addPath(t,i.getTransform().invertSelf().multiplySelf(l)),t=u}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);(s=this.dependencyTracker)==null||s.recordDependencies(e,ua.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(wr.STROKE,vn(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){var d,h,g;const i=this.ctx,a=this.current.fillColor,s=this.current.patternFill;let l=!1;if(s){const b=a.isModifyingCurrentTransform()?i.getTransform():null;if((d=this.dependencyTracker)==null||d.save(e),i.save(),i.fillStyle=a.getPattern(i,this,ls(i),wr.FILL),b){const x=new Path2D;x.addPath(t,i.getTransform().invertSelf().multiplySelf(b)),t=x}l=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),(h=this.dependencyTracker)==null||h.recordDependencies(e,ua.fill),l&&(i.restore(),(g=this.dependencyTracker)==null||g.restore(e)),n&&this.consumePath(e,t,u)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),(n=this.dependencyTracker)==null||n.recordDependencies(e,ua.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=fz}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=T4}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,a=n.getTransform().invertSelf();for(const{transform:s,x:l,y:u,fontSize:d,path:h}of t)h&&i.addPath(h,new DOMMatrix(s).preMultiplySelf(a).translate(l,u).scale(d,-d));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var g,b;(g=this.dependencyTracker)==null||g.recordSimpleData("font",e).recordNamedDependency(e,t);const i=this.commonObjs.get(t),a=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=i.fontMatrix||ID,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&gt("Invalid font matrix for font "+t),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const s=i.loadedName||"sans-serif",l=((b=i.systemFontInfo)==null?void 0:b.css)||`"${s}", ${i.fallbackName}`;let u="normal";i.black?u="900":i.bold&&(u="bold");const d=i.italic?"italic":"normal";let h=n;n<w4?h=w4:n>k4&&(h=k4),this.current.fontSizeScale=n/h,this.ctx.font=`${d} ${u} ${h}px ${l}`}setTextRenderingMode(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,i,a,s){var D,_,A,N;const l=this.ctx,u=this.current,d=u.font,h=u.textRenderingMode,g=u.fontSize/u.fontSizeScale,b=h&pr.FILL_STROKE_MASK,x=!!(h&pr.ADD_TO_PATH_FLAG),k=u.patternFill&&!d.missingFile,v=u.patternStroke&&!d.missingFile;let w;if((d.disableFontFace||x||k||v)&&!d.missingFile&&(w=d.getPathGenerator(this.commonObjs,t)),w&&(d.disableFontFace||k||v)){l.save(),l.translate(n,i),l.scale(g,-g),(D=this.dependencyTracker)==null||D.recordCharacterBBox(e,l,d);let E;if(b===pr.FILL||b===pr.FILL_STROKE)if(a){E=l.getTransform(),l.setTransform(...a);const C=$(this,Ja,u_).call(this,w,E,a);l.fill(C)}else l.fill(w);if(b===pr.STROKE||b===pr.FILL_STROKE)if(s){E||(E=l.getTransform()),l.setTransform(...s);const{a:C,b:j,c:M,d:O}=E,F=tt.inverseTransform(s),G=tt.transform([C,j,M,O,0,0],F);tt.singularValueDecompose2dScale(G,Vi),l.lineWidth*=Math.max(Vi[0],Vi[1])/g,l.stroke($(this,Ja,u_).call(this,w,E,s))}else l.lineWidth/=g,l.stroke(w);l.restore()}else(b===pr.FILL||b===pr.FILL_STROKE)&&(l.fillText(t,n,i),(_=this.dependencyTracker)==null||_.recordCharacterBBox(e,l,d,g,n,i,()=>l.measureText(t))),(b===pr.STROKE||b===pr.FILL_STROKE)&&(this.dependencyTracker&&((A=this.dependencyTracker)==null||A.recordCharacterBBox(e,l,d,g,n,i,()=>l.measureText(t)).recordDependencies(e,ua.stroke)),l.strokeText(t,n,i));x&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:vn(l),x:n,y:i,fontSize:g,path:w}),(N=this.dependencyTracker)==null||N.recordCharacterBBox(e,l,d,g,n,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return Dt(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var M,O,F,G;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,ua.showText).copyDependenciesFromIncrementalOperation(e,"sameLineText").resetBBox(e),this.current.textRenderingMode&pr.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(e,t),(M=this.dependencyTracker)==null||M.recordOperation(e).recordIncrementalData("sameLineText",e);return}const a=n.fontSize;if(a===0){(O=this.dependencyTracker)==null||O.recordOperation(e);return}const s=this.ctx,l=n.fontSizeScale,u=n.charSpacing,d=n.wordSpacing,h=n.fontDirection,g=n.textHScale*h,b=t.length,x=i.vertical,k=x?1:-1,v=i.defaultVMetrics,w=a*n.fontMatrix[0],D=n.textRenderingMode===pr.FILL&&!i.disableFontFace&&!n.patternFill;s.save(),n.textMatrix&&s.transform(...n.textMatrix),s.translate(n.x,n.y+n.textRise),h>0?s.scale(g,-1):s.scale(g,1);let _,A;if(n.patternFill){s.save();const R=n.fillColor.getPattern(s,this,ls(s),wr.FILL);_=vn(s),s.restore(),s.fillStyle=R}if(n.patternStroke){s.save();const R=n.strokeColor.getPattern(s,this,ls(s),wr.STROKE);A=vn(s),s.restore(),s.strokeStyle=R}let N=n.lineWidth;const E=n.textMatrixScale;if(E===0||N===0){const R=n.textRenderingMode&pr.FILL_STROKE_MASK;(R===pr.STROKE||R===pr.FILL_STROKE)&&(N=this.getSinglePixelWidth())}else N/=E;if(l!==1&&(s.scale(l,l),N/=l),s.lineWidth=N,i.isInvalidPDFjsFont){const R=[];let W=0;for(const X of t)R.push(X.unicode),W+=X.width;const U=R.join("");if(s.fillText(U,0,0),this.dependencyTracker!==null){const X=s.measureText(U);this.dependencyTracker.recordBBox(e,this.ctx,-X.actualBoundingBoxLeft,X.actualBoundingBoxRight,-X.actualBoundingBoxAscent,X.actualBoundingBoxDescent).recordOperation(e).recordIncrementalData("sameLineText",e)}n.x+=W*w*g,s.restore(),this.compose();return}let C=0,j;for(j=0;j<b;++j){const R=t[j];if(typeof R=="number"){C+=k*R*a/1e3;continue}let W=!1;const U=(R.isSpace?d:0)+u,X=R.fontChar,P=R.accent;let B,ee,Y=R.width;if(x){const ie=R.vmetric||v,z=-(R.vmetric?ie[1]:Y*.5)*w,ge=ie[2]*w;Y=ie?-ie[0]:Y,B=z/l,ee=(C+ge)/l}else B=C/l,ee=0;let H;if(i.remeasure&&Y>0){H=s.measureText(X);const ie=H.width*1e3/a*l;if(Y<ie&&this.isFontSubpixelAAEnabled){const z=Y/ie;W=!0,s.save(),s.scale(z,1),B/=z}else Y!==ie&&(B+=(Y-ie)/2e3*a/l)}if(this.contentVisible&&(R.isInFont||i.missingFile)){if(D&&!P)s.fillText(X,B,ee),(F=this.dependencyTracker)==null||F.recordCharacterBBox(e,s,H?{bbox:null}:i,a/l,B,ee,()=>H??s.measureText(X));else if(this.paintChar(e,X,B,ee,_,A),P){const ie=B+a*P.offset.x/l,z=ee-a*P.offset.y/l;this.paintChar(e,P.fontChar,ie,z,_,A)}}const J=x?Y*w-U*h:Y*w+U*h;C+=J,W&&s.restore()}x?n.y-=C:n.x+=C*g,s.restore(),this.compose(),(G=this.dependencyTracker)==null||G.recordOperation(e).recordIncrementalData("sameLineText",e)}showType3Text(e,t){const n=this.ctx,i=this.current,a=i.font,s=i.fontSize,l=i.fontDirection,u=a.vertical?1:-1,d=i.charSpacing,h=i.wordSpacing,g=i.textHScale*l,b=i.fontMatrix||ID,x=t.length,k=i.textRenderingMode===pr.INVISIBLE;let v,w,D,_;if(k||s===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(g,l);const A=this.dependencyTracker;for(this.dependencyTracker=A?new pv(A,e):null,v=0;v<x;++v){if(w=t[v],typeof w=="number"){_=u*w*s/1e3,this.ctx.translate(_,0),i.x+=_*g;continue}const N=(w.isSpace?h:0)+d,E=a.charProcOperatorList[w.operatorListId];E?this.contentVisible&&(this.save(),n.scale(s,s),n.transform(...b),this.executeOperatorList(E),this.restore()):gt(`Type3 character "${w.operatorListId}" is not available.`);const C=[w.width,0];tt.applyTransform(C,b),D=C[0]*s+N,n.translate(D,0),i.x+=D*g}n.restore(),A&&(this.dependencyTracker.recordNestedDependencies(),this.dependencyTracker=A)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,i,a,s,l){var d;const u=new Path2D;u.rect(i,a,s-i,l-a),this.ctx.clip(u),(d=this.dependencyTracker)==null||d.recordBBox(e,this.ctx,i,s,a,l).recordClipBox(e,this.ctx,i,s,a,l),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const i=this.baseTransform||vn(this.ctx),a={createCanvasGraphics:s=>new qS(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new pv(this.dependencyTracker,e):null)};n=new o_(t,this.ctx,a,i)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=sz(this.getObject(e,t)),this.cachedPatterns.set(t,i)),n&&(i.matrix=n),i}shadingFill(e,t){var s;if(!this.contentVisible)return;const n=this.ctx;this.save(e);const i=this._getPattern(e,t);n.fillStyle=i.getPattern(n,this,ls(n),wr.SHADING);const a=ls(n);if(a){const{width:l,height:u}=n.canvas,d=Vh.slice();tt.axialAlignedBoundingBox([0,0,l,u],a,d);const[h,g,b,x]=d;this.ctx.fillRect(h,g,b-h,x-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(s=this.dependencyTracker)==null||s.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,ua.transform).recordDependencies(e,ua.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){en("Should not call beginInlineImage")}beginImageData(){en("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){var i;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=vn(this.ctx),n)){tt.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[a,s,l,u]=n,d=new Path2D;d.rect(a,s,l-a,u-s),this.ctx.clip(d),(i=this.dependencyTracker)==null||i.recordClipBox(e,this.ctx,a,l,s,u),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var A;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||_1("TODO: Support non-isolated groups."),t.knockout&&gt("Knockout groups not supported.");const i=vn(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=Vh.slice();tt.axialAlignedBoundingBox(t.bbox,vn(n),a);const s=[0,0,n.canvas.width,n.canvas.height];a=tt.intersect(a,s)||[0,0,0,0];const l=Math.floor(a[0]),u=Math.floor(a[1]),d=Math.max(Math.ceil(a[2])-l,1),h=Math.max(Math.ceil(a[3])-u,1);this.current.startNewPathAndClipBox([0,0,d,h]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(g,d,h),x=b.context;x.translate(-l,-u),x.transform(...i);let k=new Path2D;const[v,w,D,_]=t.bbox;if(k.rect(v,w,D-v,_-w),t.matrix){const N=new Path2D;N.addPath(k,new DOMMatrix(t.matrix)),k=N}x.clip(k),t.smask&&this.smaskStack.push({canvas:b.canvas,context:x,offsetX:l,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(l,u),n.save()),Fg(n,x),this.ctx=x,(A=this.dependencyTracker)==null||A.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){var a;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(a=this.dependencyTracker)==null||a.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const s=vn(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...s);const l=Vh.slice();tt.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],s,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,n,i,a,s){if($(this,Ja,l_).call(this),Yy(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const l=n[2]-n[0],u=n[3]-n[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=l,n[3]=u,tt.singularValueDecompose2dScale(vn(this.ctx),Vi);const{viewportScale:d}=this,h=Math.ceil(l*this.outputScaleX*d),g=Math.ceil(u*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(h,g);const{canvas:b,context:x}=this.annotationCanvas;this.annotationCanvasMap.set(t,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=x,this.ctx.save(),this.ctx.setTransform(Vi[0],0,0,-Vi[1],0,u*Vi[1]),Yy(this.ctx)}else{Yy(this.ctx),this.endPath(e);const d=new Path2D;d.rect(n[0],n[1],l,u),this.ctx.clip(d)}}this.current=new _4(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...a)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),$(this,Ja,c_).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var l;if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const i=this.ctx,a=this._createMaskCanvas(e,t),s=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,a.offsetX,a.offsetY),(l=this.dependencyTracker)==null||l.resetBBox(e).recordBBox(e,this.ctx,a.offsetX,a.offsetX+s.width,a.offsetY,a.offsetY+s.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,i=0,a=0,s,l){var g,b,x;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const u=this.ctx;u.save();const d=vn(u);u.transform(n,i,a,s,0,0);const h=this._createMaskCanvas(e,t);u.setTransform(1,0,0,1,h.offsetX-d[4],h.offsetY-d[5]),(g=this.dependencyTracker)==null||g.resetBBox(e);for(let k=0,v=l.length;k<v;k+=2){const w=tt.transform(d,[n,i,a,s,l[k],l[k+1]]);u.drawImage(h.canvas,w[4],w[5]),(b=this.dependencyTracker)==null||b.recordBBox(e,this.ctx,w[4],w[4]+h.canvas.width,w[5],w[5]+h.canvas.height)}u.restore(),this.compose(),(x=this.dependencyTracker)==null||x.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var s,l,u;if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,a=this.current.patternFill;(s=this.dependencyTracker)==null||s.resetBBox(e).recordDependencies(e,ua.transformAndFill);for(const d of t){const{data:h,width:g,height:b,transform:x}=d,k=this.cachedCanvases.getCanvas("maskCanvas",g,b),v=k.context;v.save();const w=this.getObject(e,h,d);S4(v,w),v.globalCompositeOperation="source-in",v.fillStyle=a?i.getPattern(v,this,ls(n),wr.FILL):i,v.fillRect(0,0,g,b),v.restore(),n.save(),n.transform(...x),n.scale(1,-1),$y(n,k.canvas,0,0,g,b,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,n,0,g,0,b),n.restore()}this.compose(),(u=this.dependencyTracker)==null||u.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){gt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,i,a){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){gt("Dependent image isn't ready yet");return}const l=s.width,u=s.height,d=[];for(let h=0,g=a.length;h<g;h+=2)d.push({transform:[n,0,0,i,a[h],a[h+1]],x:0,y:0,w:l,h:u});this.paintInlineImageXObjectGroup(e,s,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",n,i),s=a.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",a.canvas}paintInlineImageXObject(e,t){var d;if(!this.contentVisible)return;const n=t.width,i=t.height,a=this.ctx;this.save(e);const{filter:s}=a;s!=="none"&&s!==""&&(a.filter="none"),a.scale(1/n,-1/i);let l;if(t.bitmap)l=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)l=t;else{const g=this.cachedCanvases.getCanvas("inlineImage",n,i).context;A4(g,t),l=this.applyTransferMapsToCanvas(g)}const u=this._scaleImage(l,ls(a));a.imageSmoothingEnabled=E4(vn(a),t.interpolate),(d=this.dependencyTracker)==null||d.resetBBox(e).recordBBox(e,a,0,n,-i,0).recordDependencies(e,ua.imageXObject).recordOperation(e),$y(a,u.img,0,0,u.paintWidth,u.paintHeight,0,-i,n,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var s,l,u;if(!this.contentVisible)return;const i=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const d=t.width,h=t.height,b=this.cachedCanvases.getCanvas("inlineImage",d,h).context;A4(b,t),a=this.applyTransferMapsToCanvas(b)}(s=this.dependencyTracker)==null||s.resetBBox(e);for(const d of n)i.save(),i.transform(...d.transform),i.scale(1,-1),$y(i,a,d.x,d.y,d.w,d.h,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,i,0,1,-1,0),i.restore();(u=this.dependencyTracker)==null||u.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,ua.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){var s,l;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const a=this.ctx;this.pendingClip?(i||(this.pendingClip===T4?a.clip(t,"evenodd"):a.clip(t)),this.pendingClip=null,(s=this.dependencyTracker)==null||s.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(l=this.dependencyTracker)==null||l.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=vn(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:a}=this.ctx.getTransform();let s,l;if(n===0&&i===0){const u=Math.abs(t),d=Math.abs(a);if(u===d)if(e===0)s=l=1/u;else{const h=u*e;s=l=h<1?1/h:1}else if(e===0)s=1/u,l=1/d;else{const h=u*e,g=d*e;s=h<1?1/h:1,l=g<1?1/g:1}}else{const u=Math.abs(t*a-n*i),d=Math.hypot(t,n),h=Math.hypot(i,a);if(e===0)s=h/u,l=d/u;else{const g=e*u;s=h>g?h/g:1,l=d>g?d/g:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:i}}=this,[a,s]=this.getScaleForStroking();if(a===s){n.lineWidth=(i||1)*a,n.stroke(e);return}const l=n.getLineDash();t&&n.save(),n.scale(a,s),aD.a=1/a,aD.d=1/s;const u=new Path2D;if(u.addPath(e,aD),l.length>0){const d=Math.max(a,s);n.setLineDash(l.map(h=>h/d)),n.lineDashOffset/=d}n.lineWidth=i||1,n.stroke(u),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Ja=new WeakSet,l_=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},c_=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},u_=function(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i};let Qh=qS;for(const r in vm)Qh.prototype[r]!==void 0&&(Qh.prototype[vm[r]]=Qh.prototype[r]);var eb,tb;class js{static get workerPort(){return m(this,eb)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");L(this,eb,e)}static get workerSrc(){return m(this,tb)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");L(this,tb,e)}}eb=new WeakMap,tb=new WeakMap,V(js,eb,null),V(js,tb,"");var Cf,nb;class pz{constructor({parsedData:e,rawData:t}){V(this,Cf);V(this,nb);L(this,Cf,e),L(this,nb,t)}getRaw(){return m(this,nb)}get(e){return m(this,Cf).get(e)??null}[Symbol.iterator](){return m(this,Cf).entries()}}Cf=new WeakMap,nb=new WeakMap;const Lh=Symbol("INTERNAL");var rb,ib,ab,Nf;class gz{constructor(e,{name:t,intent:n,usage:i,rbGroups:a}){V(this,rb,!1);V(this,ib,!1);V(this,ab,!1);V(this,Nf,!0);L(this,rb,!!(e&qi.DISPLAY)),L(this,ib,!!(e&qi.PRINT)),this.name=t,this.intent=n,this.usage=i,this.rbGroups=a}get visible(){if(m(this,ab))return m(this,Nf);if(!m(this,Nf))return!1;const{print:e,view:t}=this.usage;return m(this,rb)?(t==null?void 0:t.viewState)!=="OFF":m(this,ib)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Lh&&en("Internal method `_setVisible` called."),L(this,ab,n),L(this,Nf,t)}}rb=new WeakMap,ib=new WeakMap,ab=new WeakMap,Nf=new WeakMap;var rc,Zt,Uf,Rf,sb,d_;class mz{constructor(e,t=qi.DISPLAY){V(this,sb);V(this,rc,null);V(this,Zt,new Map);V(this,Uf,null);V(this,Rf,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,L(this,Rf,e.order);for(const n of e.groups)m(this,Zt).set(n.id,new gz(t,n));if(e.baseState==="OFF")for(const n of m(this,Zt).values())n._setVisible(Lh,!1);for(const n of e.on)m(this,Zt).get(n)._setVisible(Lh,!0);for(const n of e.off)m(this,Zt).get(n)._setVisible(Lh,!1);L(this,Uf,this.getHash())}}isVisible(e){if(m(this,Zt).size===0)return!0;if(!e)return _1("Optional content group not defined."),!0;if(e.type==="OCG")return m(this,Zt).has(e.id)?m(this,Zt).get(e.id).visible:(gt(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return $(this,sb,d_).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!m(this,Zt).has(t))return gt(`Optional content group not found: ${t}`),!0;if(m(this,Zt).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!m(this,Zt).has(t))return gt(`Optional content group not found: ${t}`),!0;if(!m(this,Zt).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!m(this,Zt).has(t))return gt(`Optional content group not found: ${t}`),!0;if(!m(this,Zt).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!m(this,Zt).has(t))return gt(`Optional content group not found: ${t}`),!0;if(m(this,Zt).get(t).visible)return!1}return!0}return gt(`Unknown optional content policy ${e.policy}.`),!0}return gt(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var a;const i=m(this,Zt).get(e);if(!i){gt(`Optional content group not found: ${e}`);return}if(n&&t&&i.rbGroups.length)for(const s of i.rbGroups)for(const l of s)l!==e&&((a=m(this,Zt).get(l))==null||a._setVisible(Lh,!1,!0));i._setVisible(Lh,!!t,!0),L(this,rc,null)}setOCGState({state:e,preserveRB:t}){let n;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const a=m(this,Zt).get(i);if(a)switch(n){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!a.visible,t);break}}L(this,rc,null)}get hasInitialVisibility(){return m(this,Uf)===null||this.getHash()===m(this,Uf)}getOrder(){return m(this,Zt).size?m(this,Rf)?m(this,Rf).slice():[...m(this,Zt).keys()]:null}getGroup(e){return m(this,Zt).get(e)||null}getHash(){if(m(this,rc)!==null)return m(this,rc);const e=new EF;for(const[t,n]of m(this,Zt))e.update(`${t}:${n.visible}`);return L(this,rc,e.hexdigest())}[Symbol.iterator](){return m(this,Zt).entries()}}rc=new WeakMap,Zt=new WeakMap,Uf=new WeakMap,Rf=new WeakMap,sb=new WeakSet,d_=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const a=e[i];let s;if(Array.isArray(a))s=$(this,sb,d_).call(this,a);else if(m(this,Zt).has(a))s=m(this,Zt).get(a).visible;else return gt(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return n==="And"};class bz{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Bn(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:s,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=l,(a==null?void 0:a.length)>0){const u=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((u,d)=>{this._onReceiveData({begin:u,chunk:d})}),e.addProgressListener((u,d)=>{this._onProgress({loaded:u,total:d})}),e.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(n),!0)});Bn(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,i,a;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(a=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||a.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Bn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new xz(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new yz(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class xz{constructor(e,t,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=gS(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class yz{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function vz(r){let e=!0,t=n("filename\\*","i").exec(r);if(t){t=t[1];let h=l(t);return h=unescape(h),h=u(h),h=d(h),a(h)}if(t=s(r),t){const h=d(t);return a(h)}if(t=n("filename","i").exec(r),t){t=t[1];let h=l(t);return h=d(h),a(h)}function n(h,g){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function i(h,g){if(h){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const b=new TextDecoder(h,{fatal:!0}),x=ux(g);g=b.decode(x),e=!1}catch{}}return g}function a(h){return e&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),e&&(h=i("iso-8859-1",h))),h}function s(h){const g=[];let b;const x=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=x.exec(h))!==null;){let[,v,w,D]=b;if(v=parseInt(v,10),v in g){if(v===0)break;continue}g[v]=[w,D]}const k=[];for(let v=0;v<g.length&&v in g;++v){let[w,D]=g[v];D=l(D),w&&(D=unescape(D),v===0&&(D=u(D))),k.push(D)}return k.join("")}function l(h){if(h.startsWith('"')){const g=h.slice(1).split('\\"');for(let b=0;b<g.length;++b){const x=g[b].indexOf('"');x!==-1&&(g[b]=g[b].slice(0,x),g.length=b+1),g[b]=g[b].replaceAll(/\\(.)/g,"$1")}h=g.join('"')}return h}function u(h){const g=h.indexOf("'");if(g===-1)return h;const b=h.slice(0,g),k=h.slice(g+1).replace(/^[^']*'/,"");return i(b,k)}function d(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,b,x,k){if(x==="q"||x==="Q")return k=k.replaceAll("_"," "),k=k.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,w){return String.fromCharCode(parseInt(w,16))}),i(b,k);try{k=atob(k)}catch{}return i(b,k)})}return""}function BF(r,e){const t=new Headers;if(!r||!e||typeof e!="object")return t;for(const n in e){const i=e[n];i!==void 0&&t.append(n,i)}return t}function E1(r){var e;return((e=URL.parse(r))==null?void 0:e.origin)??null}function PF({responseHeaders:r,isHttp:e,rangeChunkSize:t,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(r.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*t)||n||!e||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function zF(r){const e=r.get("Content-Disposition");if(e){let t=vz(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(gS(t))return t}return null}function px(r,e){return new uv(`Unexpected server response (${r}) while retrieving PDF "${e}".`,r,r===404||r===0&&e.startsWith("file:"))}function WF(r){return r===200||r===206}function HF(r,e,t){return{method:"GET",headers:r,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function qF(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(gt(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class wz{constructor(e){We(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=BF(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Bn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new kz(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Dz(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class kz{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,HF(n,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=E1(a.url),!WF(a.status))throw px(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const s=a.headers,{allowRangeRequests:l,suggestedLength:u}=PF({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=u||this._contentLength,this._filename=zF(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ic("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:qF(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class Dz{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${t}-${n-1}`);const s=i.url;fetch(s,HF(a,this._withCredentials,this._abortController)).then(l=>{const u=E1(l.url);if(u!==e._responseOrigin)throw new Error(`Expected range response-origin "${u}" to match "${e._responseOrigin}".`);if(!WF(l.status))throw px(l.status,s);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:qF(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const sD=200,oD=206;function _z(r){const e=r.response;return typeof e!="string"?e:ux(e).buffer}class Az{constructor({url:e,httpHeaders:t,withCredentials:n}){We(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=BF(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[a,s]of this.headers)t.setRequestHeader(a,s);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=oD):i.expectedStatus=sD,t.responseType="arraybuffer",Bn(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var i;const n=this.pendingRequests[e];n&&((i=n.onProgress)==null||i.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}const a=i.status||sD;if(!(a===sD&&n.expectedStatus===oD)&&a!==n.expectedStatus){n.onError(i.status);return}const l=_z(i);if(a===oD){const u=i.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);d?n.onDone({begin:parseInt(d[1],10),chunk:l}):(gt('Missing or invalid "Content-Range" header.'),n.onError(0))}else l?n.onDone({begin:0,chunk:l}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class Sz{constructor(e){this._source=e,this._manager=new Az(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Bn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Ez(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new Tz(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Ez{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=E1(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[u,...d]=l.split(": ");return[u,d.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:s}=PF({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=zF(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=px(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Tz{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=E1((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=px(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Cz=/^[a-z][a-z0-9\-+.]+:/i;function Nz(r){if(Cz.test(r))return new URL(r);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(r))}class Uz{constructor(e){this.source=e,this.url=Nz(e.url),Bn(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Bn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Rz(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new jz(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Rz{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=px(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ic("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class jz{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ig=Symbol("INITIAL_DATA");var Ri,ob,h_;class VF{constructor(){V(this,ob);V(this,Ri,Object.create(null))}get(e,t=null){if(t){const i=$(this,ob,h_).call(this,e);return i.promise.then(()=>t(i.data)),null}const n=m(this,Ri)[e];if(!n||n.data===Ig)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=m(this,Ri)[e];return!!t&&t.data!==Ig}delete(e){const t=m(this,Ri)[e];return!t||t.data===Ig?!1:(delete m(this,Ri)[e],!0)}resolve(e,t=null){const n=$(this,ob,h_).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in m(this,Ri)){const{data:n}=m(this,Ri)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}L(this,Ri,Object.create(null))}*[Symbol.iterator](){for(const e in m(this,Ri)){const{data:t}=m(this,Ri)[e];t!==Ig&&(yield[e,t])}}}Ri=new WeakMap,ob=new WeakSet,h_=function(e){var t;return(t=m(this,Ri))[e]||(t[e]={...Promise.withResolvers(),data:Ig})};const Fz=1e5,C4=30;var _R,ic,oi,lb,cb,zu,Co,ub,db,Wu,jf,Ff,ac,If,hb,Of,Hu,fb,pb,Mf,qu,gb,sc,Lf,il,XF,GF,f_,$i,F0,p_,$F,YF;const Vn=class Vn{constructor({textContentSource:e,container:t,viewport:n}){V(this,il);V(this,ic,Promise.withResolvers());V(this,oi,null);V(this,lb,!1);V(this,cb,!!((_R=globalThis.FontInspector)!=null&&_R.enabled));V(this,zu,null);V(this,Co,null);V(this,ub,0);V(this,db,0);V(this,Wu,null);V(this,jf,null);V(this,Ff,0);V(this,ac,0);V(this,If,Object.create(null));V(this,hb,[]);V(this,Of,null);V(this,Hu,[]);V(this,fb,new WeakMap);V(this,pb,null);var u;if(e instanceof ReadableStream)L(this,Of,e);else if(typeof e=="object")L(this,Of,new ReadableStream({start(d){d.enqueue(e),d.close()}}));else throw new Error('No "textContentSource" parameter specified.');L(this,oi,L(this,jf,t)),L(this,ac,n.scale*Is.pixelRatio),L(this,Ff,n.rotation),L(this,Co,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:a,pageX:s,pageY:l}=n.rawDims;L(this,pb,[1,0,0,-1,-s,l+a]),L(this,db,i),L(this,ub,a),$(u=Vn,$i,$F).call(u),Ud(t,n),m(this,ic).promise.finally(()=>{m(Vn,Lf).delete(this),L(this,Co,null),L(this,If,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Ar.platform;return Dt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{m(this,Wu).read().then(({value:t,done:n})=>{if(n){m(this,ic).resolve();return}m(this,zu)??L(this,zu,t.lang),Object.assign(m(this,If),t.styles),$(this,il,XF).call(this,t.items),e()},m(this,ic).reject)};return L(this,Wu,m(this,Of).getReader()),m(Vn,Lf).add(this),e(),m(this,ic).promise}update({viewport:e,onBefore:t=null}){var a;const n=e.scale*Is.pixelRatio,i=e.rotation;if(i!==m(this,Ff)&&(t==null||t(),L(this,Ff,i),Ud(m(this,jf),{rotation:i})),n!==m(this,ac)){t==null||t(),L(this,ac,n);const s={div:null,properties:null,ctx:$(a=Vn,$i,F0).call(a,m(this,zu))};for(const l of m(this,Hu))s.properties=m(this,fb).get(l),s.div=l,$(this,il,f_).call(this,s)}}cancel(){var t;const e=new Ic("TextLayer task cancelled.");(t=m(this,Wu))==null||t.cancel(e).catch(()=>{}),L(this,Wu,null),m(this,ic).reject(e)}get textDivs(){return m(this,Hu)}get textContentItemsStr(){return m(this,hb)}static cleanup(){if(!(m(this,Lf).size>0)){m(this,Mf).clear();for(const{canvas:e}of m(this,qu).values())e.remove();m(this,qu).clear()}}};ic=new WeakMap,oi=new WeakMap,lb=new WeakMap,cb=new WeakMap,zu=new WeakMap,Co=new WeakMap,ub=new WeakMap,db=new WeakMap,Wu=new WeakMap,jf=new WeakMap,Ff=new WeakMap,ac=new WeakMap,If=new WeakMap,hb=new WeakMap,Of=new WeakMap,Hu=new WeakMap,fb=new WeakMap,pb=new WeakMap,Mf=new WeakMap,qu=new WeakMap,gb=new WeakMap,sc=new WeakMap,Lf=new WeakMap,il=new WeakSet,XF=function(e){var i,a;if(m(this,lb))return;(a=m(this,Co)).ctx??(a.ctx=$(i=Vn,$i,F0).call(i,m(this,zu)));const t=m(this,Hu),n=m(this,hb);for(const s of e){if(t.length>Fz){gt("Ignoring additional textDivs for performance reasons."),L(this,lb,!0);return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const l=m(this,oi);L(this,oi,document.createElement("span")),m(this,oi).classList.add("markedContent"),s.id&&m(this,oi).setAttribute("id",`${s.id}`),l.append(m(this,oi))}else s.type==="endMarkedContent"&&L(this,oi,m(this,oi).parentNode);continue}n.push(s.str),$(this,il,GF).call(this,s)}},GF=function(e){var v;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};m(this,Hu).push(t);const i=tt.transform(m(this,pb),e.transform);let a=Math.atan2(i[1],i[0]);const s=m(this,If)[e.fontName];s.vertical&&(a+=Math.PI/2);let l=m(this,cb)&&s.fontSubstitution||s.fontFamily;l=Vn.fontFamilyMap.get(l)||l;const u=Math.hypot(i[2],i[3]),d=u*$(v=Vn,$i,YF).call(v,l,s,m(this,zu));let h,g;a===0?(h=i[4],g=i[5]-d):(h=i[4]+d*Math.sin(a),g=i[5]-d*Math.cos(a));const b="calc(var(--total-scale-factor) *",x=t.style;m(this,oi)===m(this,jf)?(x.left=`${(100*h/m(this,db)).toFixed(2)}%`,x.top=`${(100*g/m(this,ub)).toFixed(2)}%`):(x.left=`${b}${h.toFixed(2)}px)`,x.top=`${b}${g.toFixed(2)}px)`),x.fontSize=`${b}${(m(Vn,sc)*u).toFixed(2)}px)`,x.fontFamily=l,n.fontSize=u,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,m(this,cb)&&(t.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),a!==0&&(n.angle=a*(180/Math.PI));let k=!1;if(e.str.length>1)k=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),D=Math.abs(e.transform[3]);w!==D&&Math.max(w,D)/Math.min(w,D)>1.5&&(k=!0)}if(k&&(n.canvasWidth=s.vertical?e.height:e.width),m(this,fb).set(t,n),m(this,Co).div=t,m(this,Co).properties=n,$(this,il,f_).call(this,m(this,Co)),n.hasText&&m(this,oi).append(t),n.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),m(this,oi).append(w)}},f_=function(e){var l;const{div:t,properties:n,ctx:i}=e,{style:a}=t;let s="";if(m(Vn,sc)>1&&(s=`scale(${1/m(Vn,sc)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=a,{canvasWidth:d,fontSize:h}=n;$(l=Vn,$i,p_).call(l,i,h*m(this,ac),u);const{width:g}=i.measureText(t.textContent);g>0&&(s=`scaleX(${d*m(this,ac)/g}) ${s}`)}n.angle!==0&&(s=`rotate(${n.angle}deg) ${s}`),s.length>0&&(a.transform=s)},$i=new WeakSet,F0=function(e=null){let t=m(this,qu).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),m(this,qu).set(e,t),m(this,gb).set(t,{size:0,family:""})}return t},p_=function(e,t,n){const i=m(this,gb).get(e);t===i.size&&n===i.family||(e.font=`${t}px ${n}`,i.size=t,i.family=n)},$F=function(){if(m(this,sc)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),L(this,sc,e.getBoundingClientRect().height),e.remove()},YF=function(e,t,n){const i=m(this,Mf).get(e);if(i)return i;const a=$(this,$i,F0).call(this,n);a.canvas.width=a.canvas.height=C4,$(this,$i,p_).call(this,a,C4,e);const s=a.measureText(""),l=s.fontBoundingBoxAscent,u=Math.abs(s.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let d=.8;return l?d=l/(l+u):(Ar.platform.isFirefox&&gt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?d=t.ascent:t.descent&&(d=1+t.descent)),m(this,Mf).set(e,d),d},V(Vn,$i),V(Vn,Mf,new Map),V(Vn,qu,new Map),V(Vn,gb,new WeakMap),V(Vn,sc,null),V(Vn,Lf,new Set);let wm=Vn;class km{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function i(a){var u;if(!a)return;let s=null;const l=a.name;if(l==="#text")s=a.value;else if(km.shouldBuildText(l))(u=a==null?void 0:a.attributes)!=null&&u.textContent?s=a.attributes.textContent:a.value&&(s=a.value);else return;if(s!==null&&t.push({str:s}),!!a.children)for(const d of a.children)i(d)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const Iz=100;function KF(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const e=new g_,{docId:t}=e,n=r.url?H7(r.url):null,i=r.data?q7(r.data):null,a=r.httpHeaders||null,s=r.withCredentials===!0,l=r.password??null,u=r.range instanceof QF?r.range:null,d=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let h=r.worker instanceof Dm?r.worker:null;const g=r.verbosity,b=typeof r.docBaseUrl=="string"&&!A1(r.docBaseUrl)?r.docBaseUrl:null,x=Xy(r.cMapUrl),k=r.cMapPacked!==!1,v=r.CMapReaderFactory||(Vr?Z7:b4),w=Xy(r.iccUrl),D=Xy(r.standardFontDataUrl),_=r.StandardFontDataFactory||(Vr?J7:x4),A=Xy(r.wasmUrl),N=r.WasmFactory||(Vr?ez:y4),E=r.stopAtErrors!==!0,C=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,j=r.isEvalSupported!==!1,M=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!Vr,O=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!Vr&&(Ar.platform.isFirefox||!globalThis.chrome),F=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,G=typeof r.disableFontFace=="boolean"?r.disableFontFace:Vr,R=r.fontExtraProperties===!0,W=r.enableXfa===!0,U=r.ownerDocument||globalThis.document,X=r.disableRange===!0,P=r.disableStream===!0,B=r.disableAutoFetch===!0,ee=r.pdfBug===!0,Y=r.CanvasFactory||(Vr?Q7:$7),H=r.FilterFactory||(Vr?K7:Y7),J=r.enableHWA===!0,ie=r.useWasm!==!1,z=u?u.length:r.length??NaN,ge=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!Vr&&!G,ve=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(v===b4&&_===x4&&N===y4&&x&&D&&A&&Wg(x,document.baseURI)&&Wg(D,document.baseURI)&&Wg(A,document.baseURI)),je=null;w7(g);const Ie={canvasFactory:new Y({ownerDocument:U,enableHWA:J}),filterFactory:new H({docId:t,ownerDocument:U}),cMapReaderFactory:ve?null:new v({baseUrl:x,isCompressed:k}),standardFontDataFactory:ve?null:new _({baseUrl:D}),wasmFactory:ve?null:new N({baseUrl:A})};h||(h=Dm.create({verbosity:g,port:js.workerPort}),e._worker=h);const Pe={docId:t,apiVersion:"5.4.149",data:i,password:l,disableAutoFetch:B,rangeChunkSize:d,length:z,docBaseUrl:b,enableXfa:W,evaluatorOptions:{maxImageSize:C,disableFontFace:G,ignoreErrors:E,isEvalSupported:j,isOffscreenCanvasSupported:M,isImageDecoderSupported:O,canvasMaxAreaInBytes:F,fontExtraProperties:R,useSystemFonts:ge,useWasm:ie,useWorkerFetch:ve,cMapUrl:x,iccUrl:w,standardFontDataUrl:D,wasmUrl:A}},fe={ownerDocument:U,pdfBug:ee,styleElement:je,loadingParams:{disableAutoFetch:B,enableXfa:W}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ue=h.messageHandler.sendWithPromise("GetDocRequest",Pe,i?[i.buffer]:null);let be;if(u)be=new bz(u,{disableRange:X,disableStream:P});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Fe=Wg(n)?wz:Vr?Uz:Sz;be=new Fe({url:n,length:z,httpHeaders:a,withCredentials:s,rangeChunkSize:d,disableRange:X,disableStream:P})}return Ue.then(Fe=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const $e=new $g(t,Fe,h.port),I=new Lz($e,e,be,fe,Ie,J);e._transport=I,$e.send("Ready",null)})}).catch(e._capability.reject),e}var Iv;const Ov=class Ov{constructor(){We(this,"_capability",Promise.withResolvers());We(this,"_transport",null);We(this,"_worker",null);We(this,"docId",`d${Hn(Ov,Iv)._++}`);We(this,"destroyed",!1);We(this,"onPassword",null);We(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(a){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,a}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Iv=new WeakMap,V(Ov,Iv,0);let g_=Ov;var Vu,mb,bb,xb,yb;class QF{constructor(e,t,n=!1,i=null){V(this,Vu,Promise.withResolvers());V(this,mb,[]);V(this,bb,[]);V(this,xb,[]);V(this,yb,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){m(this,yb).push(e)}addProgressListener(e){m(this,xb).push(e)}addProgressiveReadListener(e){m(this,bb).push(e)}addProgressiveDoneListener(e){m(this,mb).push(e)}onDataRange(e,t){for(const n of m(this,yb))n(e,t)}onDataProgress(e,t){m(this,Vu).promise.then(()=>{for(const n of m(this,xb))n(e,t)})}onDataProgressiveRead(e){m(this,Vu).promise.then(()=>{for(const t of m(this,bb))t(e)})}onDataProgressiveDone(){m(this,Vu).promise.then(()=>{for(const e of m(this,mb))e()})}transportReady(){m(this,Vu).resolve()}requestDataRange(e,t){en("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Vu=new WeakMap,mb=new WeakMap,bb=new WeakMap,xb=new WeakMap,yb=new WeakMap;class Oz{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Dt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var No,Xu,Jg;class Mz{constructor(e,t,n,i=!1){V(this,Xu);V(this,No,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new p4:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new VF,this._intentStates=new Map,this.destroyed=!1,this.recordedGroups=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:a=!1}={}){return new hx({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Dt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:i="display",annotationMode:a=Il.ENABLE,transform:s=null,background:l=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:h=null,printAnnotationStorage:g=null,isEditing:b=!1,recordOperations:x=!1,filteredOperationIndexes:k=null}){var M,O,F;(M=this._stats)==null||M.time("Overall");const v=this._transport.getRenderingIntent(i,a,g,b),{renderingIntent:w,cacheKey:D}=v;L(this,No,!1),u||(u=this._transport.getOptionalContentConfig(w));let _=this._intentStates.get(D);_||(_=Object.create(null),this._intentStates.set(D,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);const A=!!(w&qi.PRINT);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(O=this._stats)==null||O.time("Page Request"),this._pumpOperatorList(v));const N=!this.recordedGroups&&(x||this._pdfBug&&((F=globalThis.StepperManager)==null?void 0:F.enabled)),E=G=>{var R,W,U;if(_.renderTasks.delete(C),N){const X=(R=C.gfx)==null?void 0:R.dependencyTracker.take();X?((W=C.stepper)==null||W.setOperatorGroups(X),x&&(this.recordedGroups=X)):x&&(this.recordedGroups=[])}A&&L(this,No,!0),$(this,Xu,Jg).call(this),G?(C.capability.reject(G),this._abortOperatorList({intentState:_,reason:G instanceof Error?G:new Error(G)})):C.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(U=globalThis.Stats)!=null&&U.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new m_({callback:E,params:{canvas:t,canvasContext:e,dependencyTracker:N?new tz(t):null,viewport:n,transform:s,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,filteredOperationIndexes:k});(_.renderTasks||(_.renderTasks=new Set)).add(C);const j=C.task;return Promise.all([_.displayReadyCapability.promise,u]).then(([G,R])=>{var W;if(this.destroyed){E();return}if((W=this._stats)==null||W.time("Rendering"),!(R.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:G,optionalContentConfig:R}),C.operatorListChanged()}).catch(E),j}getOperatorList({intent:e="display",annotationMode:t=Il.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var d;function a(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(u))}const s=this._transport.getRenderingIntent(e,t,n,i,!0);let l=this._intentStates.get(s.cacheKey);l||(l=Object.create(null),this._intentStates.set(s.cacheKey,l));let u;return l.opListReadCapability||(u=Object.create(null),u.operatorListChanged=a,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(u),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(s)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>km.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,i){function a(){s.read().then(function({value:u,done:d}){if(d){n(l);return}l.lang??(l.lang=u.lang),Object.assign(l.styles,u.styles),l.items.push(...u.items),a()},i)}const s=t.getReader(),l={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),L(this,No,!1),Promise.all(e)}cleanup(e=!1){L(this,No,!0);const t=$(this,Xu,Jg).call(this);return e&&t&&this._stats&&(this._stats=new p4),t}_startRenderPage(e,t){var i,a;const n=this._intentStates.get(t);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(a=n.displayReadyCapability)==null||a.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&$(this,Xu,Jg).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:i}){const{map:a,transfer:s}=n,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:a,modifiedIds:i},s).getReader(),d=this._intentStates.get(t);d.streamReader=u;const h=()=>{u.read().then(({value:g,done:b})=>{if(b){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,d),h())},g=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const b of d.renderTasks)b.operatorListChanged();$(this,Xu,Jg).call(this)}if(d.displayReadyCapability)d.displayReadyCapability.reject(g);else if(d.opListReadCapability)d.opListReadCapability.reject(g);else throw g}})};h()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof pS){let i=Iz;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Ic(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}No=new WeakMap,Xu=new WeakSet,Jg=function(){if(!m(this,No)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),L(this,No,!1),!0};var oc,za,Uo,Gu,Mv,$u,Yu,$r,I0,ZF,JF,em,Bf,O0;const hn=class hn{constructor({name:e=null,port:t=null,verbosity:n=k7()}={}){V(this,$r);V(this,oc,Promise.withResolvers());V(this,za,null);V(this,Uo,null);V(this,Gu,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(m(hn,Yu).has(t))throw new Error("Cannot use more than one PDFWorker per port.");m(hn,Yu).set(t,this),$(this,$r,ZF).call(this,t)}else $(this,$r,JF).call(this)}get promise(){return m(this,oc).promise}get port(){return m(this,Uo)}get messageHandler(){return m(this,za)}destroy(){var e,t;this.destroyed=!0,(e=m(this,Gu))==null||e.terminate(),L(this,Gu,null),m(hn,Yu).delete(m(this,Uo)),L(this,Uo,null),(t=m(this,za))==null||t.destroy(),L(this,za,null)}static create(e){const t=m(this,Yu).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new hn(e)}static get workerSrc(){if(js.workerSrc)return js.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Dt(this,"_setupFakeWorkerGlobal",(async()=>m(this,Bf,O0)?m(this,Bf,O0):(await import(this.workerSrc)).WorkerMessageHandler)())}};oc=new WeakMap,za=new WeakMap,Uo=new WeakMap,Gu=new WeakMap,Mv=new WeakMap,$u=new WeakMap,Yu=new WeakMap,$r=new WeakSet,I0=function(){m(this,oc).resolve(),m(this,za).send("configure",{verbosity:this.verbosity})},ZF=function(e){L(this,Uo,e),L(this,za,new $g("main","worker",e)),m(this,za).on("ready",()=>{}),$(this,$r,I0).call(this)},JF=function(){if(m(hn,$u)||m(hn,Bf,O0)){$(this,$r,em).call(this);return}let{workerSrc:e}=hn;try{hn._isSameOrigin(window.location,e)||(e=hn._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new $g("main","worker",t),i=()=>{a.abort(),n.destroy(),t.terminate(),this.destroyed?m(this,oc).reject(new Error("Worker was destroyed")):$(this,$r,em).call(this)},a=new AbortController;t.addEventListener("error",()=>{m(this,Gu)||i()},{signal:a.signal}),n.on("test",l=>{if(a.abort(),this.destroyed||!l){i();return}L(this,za,n),L(this,Uo,t),L(this,Gu,t),$(this,$r,I0).call(this)}),n.on("ready",l=>{if(a.abort(),this.destroyed){i();return}try{s()}catch{$(this,$r,em).call(this)}});const s=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};s();return}catch{_1("The worker has been disabled.")}$(this,$r,em).call(this)},em=function(){m(hn,$u)||(gt("Setting up fake worker."),L(hn,$u,!0)),hn._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){m(this,oc).reject(new Error("Worker was destroyed"));return}const t=new G7;L(this,Uo,t);const n=`fake${Hn(hn,Mv)._++}`,i=new $g(n+"_worker",n,t);e.setup(i,t),L(this,za,new $g(n,n+"_worker",t)),$(this,$r,I0).call(this)}).catch(e=>{m(this,oc).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Bf=new WeakSet,O0=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},V(hn,Bf),V(hn,Mv,0),V(hn,$u,!1),V(hn,Yu,new WeakMap),Vr&&(L(hn,$u,!0),js.workerSrc||(js.workerSrc="./pdf.worker.mjs")),hn._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const i=new URL(t,n);return n.origin===i.origin},hn._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},hn.fromPort=e=>{if(F7("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return hn.create(e)};let Dm=hn;var Ro,Ds,Pf,zf,jo,Ku,tm;class Lz{constructor(e,t,n,i,a,s){V(this,Ku);V(this,Ro,new Map);V(this,Ds,new Map);V(this,Pf,new Map);V(this,zf,new Map);V(this,jo,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new VF,this.fontLoader=new z7({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}get annotationStorage(){return Dt(this,"annotationStorage",new mS)}getRenderingIntent(e,t=Il.ENABLE,n=null,i=!1,a=!1){let s=qi.DISPLAY,l=n_;switch(e){case"any":s=qi.ANY;break;case"display":break;case"print":s=qi.PRINT;break;default:gt(`getRenderingIntent - invalid intent: ${e}`)}const u=s&qi.PRINT&&n instanceof CF?n:this.annotationStorage;switch(t){case Il.DISABLE:s+=qi.ANNOTATIONS_DISABLE;break;case Il.ENABLE:break;case Il.ENABLE_FORMS:s+=qi.ANNOTATIONS_FORMS;break;case Il.ENABLE_STORAGE:s+=qi.ANNOTATIONS_STORAGE,l=u.serializable;break;default:gt(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(s+=qi.IS_EDITING),a&&(s+=qi.OPLIST);const{ids:d,hash:h}=u.modifiedIds,g=[s,l.hash,h];return{renderingIntent:s,cacheKey:g.join("_"),annotationStorageSerializable:l,modifiedIds:d}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=m(this,jo))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of m(this,Ds).values())e.push(i._destroy());m(this,Ds).clear(),m(this,Pf).clear(),m(this,zf).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,a;this.commonObjs.clear(),this.fontLoader.clear(),m(this,Ro).clear(),this.filterFactory.destroy(),wm.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Ic("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,i)=>{Bn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:s}){if(s){i.close();return}Bn(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",async n=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:s}=this._fullReader;return(!i||!a)&&(this._lastProgress&&((l=t.onProgress)==null||l.call(t,this._lastProgress)),this._fullReader.onProgress=u=>{var d;(d=t.onProgress)==null||d.call(t,{loaded:u.loaded,total:u.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:s}}),e.on("GetRangeReader",(n,i)=>{Bn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:s,done:l}){if(l){i.close();return}Bn(s instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{a.cancel(s),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new Oz(n,this))}),e.on("DocException",n=>{t._capability.reject(ii(n))}),e.on("PasswordRequest",n=>{L(this,jo,Promise.withResolvers());try{if(!t.onPassword)throw ii(n);const i=a=>{a instanceof Error?m(this,jo).reject(a):m(this,jo).resolve({password:a})};t.onPassword(i,n.code)}catch(i){m(this,jo).reject(i)}return m(this,jo).promise}),e.on("DataLoaded",n=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;m(this,Ds).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,a])=>{var s;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in a){const h=a.error;gt(`Error during font loading: ${h}`),this.commonObjs.resolve(n,h);break}const l=this._params.pdfBug&&((s=globalThis.FontInspector)!=null&&s.enabled)?(h,g)=>globalThis.FontInspector.fontAdded(h,g):null,u=new W7(a,l);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u.fontExtraProperties&&u.data&&(u.data=null),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":const{imageRef:d}=a;Bn(d,"The imageRef must be defined.");for(const h of m(this,Ds).values())for(const[,g]of h.objs)if((g==null?void 0:g.ref)===d)return g.dataLen?(this.commonObjs.resolve(n,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,a,s])=>{var u;if(this.destroyed)return;const l=m(this,Ds).get(i);if(!l.objs.has(n)){if(l._intentStates.size===0){(u=s==null?void 0:s.bitmap)==null||u.close();return}switch(a){case"Image":case"Pattern":l.objs.resolve(n,s);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",n=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&gt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=m(this,Pf).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&m(this,zf).set(a.refStr,e);const s=new Mz(t,a,this,this._params.pdfBug);return m(this,Ds).set(t,s),s});return m(this,Pf).set(t,i),i}getPageIndex(e){return r_(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return $(this,Ku,tm).call(this,"GetFieldObjects")}hasJSActions(){return $(this,Ku,tm).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return $(this,Ku,tm).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return $(this,Ku,tm).call(this,"GetOptionalContentConfig").then(t=>new mz(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=m(this,Ro).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(i=>{var a,s;return{info:i[0],metadata:i[1]?new pz(i[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((s=this._fullReader)==null?void 0:s.contentLength)??null}});return m(this,Ro).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of m(this,Ds).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),m(this,Ro).clear(),this.filterFactory.destroy(!0),wm.cleanup()}}cachedPageNumber(e){if(!r_(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return m(this,zf).get(t)??null}}Ro=new WeakMap,Ds=new WeakMap,Pf=new WeakMap,zf=new WeakMap,jo=new WeakMap,Ku=new WeakSet,tm=function(e,t=null){const n=m(this,Ro).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return m(this,Ro).set(e,i),i};var lc;class Bz{constructor(e){V(this,lc,null);We(this,"onContinue",null);We(this,"onError",null);L(this,lc,e)}get promise(){return m(this,lc).capability.promise}cancel(e=0){m(this,lc).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=m(this,lc).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=m(this,lc);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}lc=new WeakMap;var cc,Qu;const xu=class xu{constructor({callback:e,params:t,objs:n,commonObjs:i,annotationCanvasMap:a,operatorList:s,pageIndex:l,canvasFactory:u,filterFactory:d,useRequestAnimationFrame:h=!1,pdfBug:g=!1,pageColors:b=null,enableHWA:x=!1,filteredOperationIndexes:k=null}){V(this,cc,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=l,this.canvasFactory=u,this.filterFactory=d,this._pdfBug=g,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Bz(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=x,this._dependencyTracker=t.dependencyTracker,this._filteredOperationIndexes=k}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var u,d;if(this.cancelled)return;if(this._canvas){if(m(xu,Qu).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");m(xu,Qu).add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)!=null&&u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:a,dependencyTracker:s}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Qh(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,s),this.gfx.beginDrawing({transform:i,viewport:n,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var n,i,a;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),m(this,cc)&&(window.cancelAnimationFrame(m(this,cc)),L(this,cc,null)),m(xu,Qu).delete(this._canvas),e||(e=new pS(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(a=(i=this.task).onError)==null||a.call(i,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?L(this,cc,window.requestAnimationFrame(()=>{L(this,cc,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._filteredOperationIndexes),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),m(xu,Qu).delete(this._canvas),this.callback())))}};cc=new WeakMap,Qu=new WeakMap,V(xu,Qu,new WeakSet);let m_=xu;const Pz="5.4.149",zz="9e2e9e209";var ji,Zu,Wf,Yn,vb,Hf,Fo,wb,uc,Wa,kb,Jt,b_,x_,y_,pu,e8,Fl;const ai=class ai{constructor({editor:e=null,uiManager:t=null}){V(this,Jt);V(this,ji,null);V(this,Zu,null);V(this,Wf);V(this,Yn,null);V(this,vb,!1);V(this,Hf,!1);V(this,Fo,null);V(this,wb);V(this,uc,null);V(this,Wa,null);var n,i;e?(L(this,Hf,!1),L(this,Fo,e)):L(this,Hf,!0),L(this,Wa,(e==null?void 0:e._uiManager)||t),L(this,wb,m(this,Wa)._eventBus),L(this,Wf,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((i=m(this,Wa))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),m(ai,kb)||L(ai,kb,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Dt(this,"_keyboardManager",new fx([[["Escape","mac+Escape"],ai.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ai.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ai.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ai.prototype._moveToPrevious],[["Home","mac+Home"],ai.prototype._moveToBeginning],[["End","mac+End"],ai.prototype._moveToEnd]]))}renderButton(){const e=L(this,ji,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",m(this,Fo)&&(e.ariaControls=`${m(this,Fo).id}_colorpicker_dropdown`);const t=m(this,Wa)._signal;e.addEventListener("click",$(this,Jt,pu).bind(this),{signal:t}),e.addEventListener("keydown",$(this,Jt,y_).bind(this),{signal:t});const n=L(this,Zu,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=m(this,Wf),e.append(n),e}renderMainDropdown(){const e=L(this,Yn,$(this,Jt,b_).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===m(this,ji)){$(this,Jt,pu).call(this,e);return}const t=e.target.getAttribute("data-color");t&&$(this,Jt,x_).call(this,t,e)}_moveToNext(e){var t,n;if(!m(this,Jt,Fl)){$(this,Jt,pu).call(this,e);return}if(e.target===m(this,ji)){(t=m(this,Yn).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=m(this,Yn))==null?void 0:t.firstChild)||e.target===m(this,ji)){m(this,Jt,Fl)&&this._hideDropdownFromKeyboard();return}m(this,Jt,Fl)||$(this,Jt,pu).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!m(this,Jt,Fl)){$(this,Jt,pu).call(this,e);return}(t=m(this,Yn).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!m(this,Jt,Fl)){$(this,Jt,pu).call(this,e);return}(t=m(this,Yn).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=m(this,Yn))==null||e.classList.add("hidden"),m(this,ji).ariaExpanded="false",(t=m(this,uc))==null||t.abort(),L(this,uc,null)}_hideDropdownFromKeyboard(){var e;if(!m(this,Hf)){if(!m(this,Jt,Fl)){(e=m(this,Fo))==null||e.unselect();return}this.hideDropdown(),m(this,ji).focus({preventScroll:!0,focusVisible:m(this,vb)})}}updateColor(e){if(m(this,Zu)&&(m(this,Zu).style.backgroundColor=e),!m(this,Yn))return;const t=m(this,Wa).highlightColors.values();for(const n of m(this,Yn).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=m(this,ji))==null||e.remove(),L(this,ji,null),L(this,Zu,null),(t=m(this,Yn))==null||t.remove(),L(this,Yn,null)}};ji=new WeakMap,Zu=new WeakMap,Wf=new WeakMap,Yn=new WeakMap,vb=new WeakMap,Hf=new WeakMap,Fo=new WeakMap,wb=new WeakMap,uc=new WeakMap,Wa=new WeakMap,kb=new WeakMap,Jt=new WeakSet,b_=function(){const e=document.createElement("div"),t=m(this,Wa)._signal;e.addEventListener("contextmenu",Ea,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),m(this,Fo)&&(e.id=`${m(this,Fo).id}_colorpicker_dropdown`);for(const[n,i]of m(this,Wa).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=n,a.setAttribute("data-l10n-id",m(ai,kb)[n]);const s=document.createElement("span");a.append(s),s.className="swatch",s.style.backgroundColor=i,a.ariaSelected=i===m(this,Wf),a.addEventListener("click",$(this,Jt,x_).bind(this,i),{signal:t}),e.append(a)}return e.addEventListener("keydown",$(this,Jt,y_).bind(this),{signal:t}),e},x_=function(e,t){t.stopPropagation(),m(this,wb).dispatch("switchannotationeditorparams",{source:this,type:Nt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},y_=function(e){ai._keyboardManager.exec(this,e)},pu=function(e){if(m(this,Jt,Fl)){this.hideDropdown();return}if(L(this,vb,e.detail===0),m(this,uc)||(L(this,uc,new AbortController),window.addEventListener("pointerdown",$(this,Jt,e8).bind(this),{signal:m(this,Wa).combinedSignal(m(this,uc))})),m(this,ji).ariaExpanded="true",m(this,Yn)){m(this,Yn).classList.remove("hidden");return}const t=L(this,Yn,$(this,Jt,b_).call(this));m(this,ji).append(t)},e8=function(e){var t;(t=m(this,Yn))!=null&&t.contains(e.target)||this.hideDropdown()},Fl=function(){return m(this,Yn)&&!m(this,Yn).classList.contains("hidden")},V(ai,kb,null);let gv=ai;var _s,Db,qf,_b;const yu=class yu{constructor(e){V(this,_s,null);V(this,Db,null);V(this,qf,null);L(this,Db,e),L(this,qf,e._uiManager),m(yu,_b)||L(yu,_b,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(m(this,_s))return m(this,_s);const{editorType:e,colorType:t,colorValue:n}=m(this,Db),i=L(this,_s,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",m(yu,_b)[e]),i.addEventListener("input",()=>{m(this,qf).updateParams(t,i.value)},{signal:m(this,qf)._signal}),i}update(e){m(this,_s)&&(m(this,_s).value=e)}destroy(){var e;(e=m(this,_s))==null||e.remove(),L(this,_s,null)}hideDropdown(){}};_s=new WeakMap,Db=new WeakMap,qf=new WeakMap,_b=new WeakMap,V(yu,_b,null);let mv=yu;function N4(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function Og(r){return Math.max(0,Math.min(255,255*r))}class U4{static CMYK_G([e,t,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Og(e),[e,e,e]}static G_HTML([e]){const t=N4(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Og)}static RGB_HTML(e){return`#${e.map(N4).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,n,i]){return[Og(1-Math.min(1,e+i)),Og(1-Math.min(1,n+i)),Og(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const i=1-e,a=1-t,s=1-n,l=Math.min(i,a,s);return["CMYK",i,a,s,l]}}class Wz{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){en("Abstract method `_createSVG` called.")}}class bv extends Wz{_createSVG(e){return document.createElementNS(io,e)}}class t8{static setupStorage(e,t,n,i,a){const s=i.getValue(t,{value:null});switch(n.name){case"textarea":if(s.value!==null&&(e.textContent=s.value),a==="print")break;e.addEventListener("input",l=>{i.setValue(t,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(s.value===n.attributes.xfaOn?e.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",l=>{i.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&e.setAttribute("value",s.value),a==="print")break;e.addEventListener("input",l=>{i.setValue(t,{value:l.target.value})})}break;case"select":if(s.value!==null){e.setAttribute("value",s.value);for(const l of n.children)l.attributes.value===s.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const u=l.target.options,d=u.selectedIndex===-1?"":u[u.selectedIndex].value;i.setValue(t,{value:d})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:i,linkService:a}){const{attributes:s}=t,l=e instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${i}`);for(const[u,d]of Object.entries(s))if(d!=null)switch(u){case"class":d.length&&e.setAttribute(u,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!l||u!=="href"&&u!=="newWindow")&&e.setAttribute(u,d)}l&&a.addLinkAttributes(e,s.href,s.newWindow),n&&s.dataId&&this.setupStorage(e,s.dataId,t,n)}static render(e){var g,b;const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,a=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:a,linkService:n});const l=a!=="richText",u=e.div;if(u.append(s),e.viewport){const x=`matrix(${e.viewport.transform.join(",")})`;u.style.transform=x}l&&u.setAttribute("class","xfaLayer xfaFont");const d=[];if(i.children.length===0){if(i.value){const x=document.createTextNode(i.value);s.append(x),l&&km.shouldBuildText(i.name)&&d.push(x)}return{textDivs:d}}const h=[[i,-1,s]];for(;h.length>0;){const[x,k,v]=h.at(-1);if(k+1===x.children.length){h.pop();continue}const w=x.children[++h.at(-1)[1]];if(w===null)continue;const{name:D}=w;if(D==="#text"){const A=document.createTextNode(w.value);d.push(A),v.append(A);continue}const _=(g=w==null?void 0:w.attributes)!=null&&g.xmlns?document.createElementNS(w.attributes.xmlns,D):document.createElement(D);if(v.append(_),w.attributes&&this.setAttributes({html:_,element:w,storage:t,intent:a,linkService:n}),((b=w.children)==null?void 0:b.length)>0)h.push([w,-1,_]);else if(w.value){const A=document.createTextNode(w.value);l&&km.shouldBuildText(D)&&d.push(A),_.append(A)}}for(const x of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))x.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Hz=9,jd=new WeakSet,qz=new Date().getTimezoneOffset()*60*1e3;class R4{static create(e){switch(e.data.annotationType){case On.LINK:return new yS(e);case On.TEXT:return new Vz(e);case On.WIDGET:switch(e.data.fieldType){case"Tx":return new Xz(e);case"Btn":return e.data.radioButton?new a8(e):e.data.checkBox?new $z(e):new Yz(e);case"Ch":return new Kz(e);case"Sig":return new Gz(e)}return new zd(e);case On.POPUP:return new w_(e);case On.FREETEXT:return new h8(e);case On.LINE:return new Zz(e);case On.SQUARE:return new Jz(e);case On.CIRCLE:return new eW(e);case On.POLYLINE:return new f8(e);case On.CARET:return new nW(e);case On.INK:return new vS(e);case On.POLYGON:return new tW(e);case On.HIGHLIGHT:return new p8(e);case On.UNDERLINE:return new rW(e);case On.SQUIGGLY:return new iW(e);case On.STRIKEOUT:return new aW(e);case On.STAMP:return new g8(e);case On.FILEATTACHMENT:return new sW(e);default:return new Cn(e)}}}var Ju,Vf,Io,Id,n8,v_;const VS=class VS{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){V(this,Id);V(this,Ju,null);V(this,Vf,!1);V(this,Io,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return VS._hasPopupData(this.data)}get hasCommentButton(){return this.enableComment&&this._isEditable&&this.hasPopupElement}get commentButtonPosition(){const{quadPoints:e,rect:t}=this.data;let n=-1/0,i=-1/0;if((e==null?void 0:e.length)>=8){for(let a=0;a<e.length;a+=8)e[a+1]>i?(i=e[a+1],n=e[a+2]):e[a+1]===i&&(n=Math.max(n,e[a+2]));return[n,i]}return t?[t[2],t[3]]:null}get commentButtonColor(){if(!this.data.color)return null;const[e,t,n]=this.data.color,a=255*(1-(this.data.opacity??1));return $(this,Id,n8).call(this,Math.min(e+a,255),Math.min(t+a,255),Math.min(n+a,255))}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:s}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-a)/n,e[1]=100*(e[1]-s)/i,e}updateEdited(e){var a;if(!this.container)return;e.rect&&(m(this,Ju)||L(this,Ju,{rect:this.data.rect.slice(0)}));const{rect:t,popup:n}=e;t&&$(this,Id,v_).call(this,t);let i=((a=m(this,Io))==null?void 0:a.popup)||this.popup;!i&&(n!=null&&n.text)&&(this._createPopup(n),i=m(this,Io).popup),i&&(i.updateEdited(e),n!=null&&n.deleted&&(i.remove(),L(this,Io,null),this.popup=null))}resetEdited(){var e;m(this,Ju)&&($(this,Id,v_).call(this,m(this,Ju).rect),(e=m(this,Io))==null||e.popup.resetEdited(),L(this,Ju,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),!(this instanceof zd)&&!(this instanceof yS)&&(a.tabIndex=0);const{style:s}=a;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof w_){const{rotation:v}=t;return!t.hasOwnCanvas&&v!==0&&this.setRotation(v,a),a}const{width:l,height:u}=this;if(!e&&t.borderStyle.width>0){s.borderWidth=`${t.borderStyle.width}px`;const v=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(v>0||w>0){const _=`calc(${v}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;s.borderRadius=_}else if(this instanceof a8){const _=`calc(${l}px * var(--total-scale-factor)) / calc(${u}px * var(--total-scale-factor))`;s.borderRadius=_}switch(t.borderStyle.style){case jh.SOLID:s.borderStyle="solid";break;case jh.DASHED:s.borderStyle="dashed";break;case jh.BEVELED:gt("Unimplemented border style: beveled");break;case jh.INSET:gt("Unimplemented border style: inset");break;case jh.UNDERLINE:s.borderBottomStyle="solid";break}const D=t.borderColor||null;D?(L(this,Vf,!0),s.borderColor=tt.makeHexColor(D[0]|0,D[1]|0,D[2]|0)):s.borderWidth=0}const d=tt.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:h,pageHeight:g,pageX:b,pageY:x}=i.rawDims;s.left=`${100*(d[0]-b)/h}%`,s.top=`${100*(d[1]-x)/g}%`;const{rotation:k}=t;return t.hasOwnCanvas||k===0?(s.width=`${100*l/h}%`,s.height=`${100*u/g}%`):this.setRotation(k,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:s}=this;e%180!==0&&([a,s]=[s,a]),t.style.width=`${100*a/n}%`,t.style.height=`${100*s/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,i)=>{const a=i.detail[t],s=a[0],l=a.slice(1);i.target.style[n]=U4[`${s}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:U4[`${s}_rgb`](l)})};return Dt(this,"_commonActions",{display:t=>{const{display:n}=t.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail)){const a=e[i]||n[i];a==null||a(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,a]of Object.entries(t)){const s=n[i];if(s){const l={detail:{[i]:a},target:e};s(l),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,a]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,w,D,_]=e.subarray(2,6);if(i===v&&a===w&&t===D&&n===_)return}const{style:s}=this.container;let l;if(m(this,Vf)){const{borderColor:v,borderWidth:w}=s;s.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const u=i-t,d=a-n,{svgFactory:h}=this,g=h.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const b=h.createElement("defs");g.append(b);const x=h.createElement("clipPath"),k=`clippath_${this.data.id}`;x.setAttribute("id",k),x.setAttribute("clipPathUnits","objectBoundingBox"),b.append(x);for(let v=2,w=e.length;v<w;v+=8){const D=e[v],_=e[v+1],A=e[v+2],N=e[v+3],E=h.createElement("rect"),C=(A-t)/u,j=(a-_)/d,M=(D-A)/u,O=(_-N)/d;E.setAttribute("x",C),E.setAttribute("y",j),E.setAttribute("width",M),E.setAttribute("height",O),x.append(E),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${C}" y="${j}" width="${M}" height="${O}"/>`)}m(this,Vf)&&(l.push("</g></svg>')"),s.backgroundImage=l.join("")),this.container.append(g),this.container.style.clipPath=`url(#${k})`}_createPopup(e=null){const{data:t}=this;let n,i;e?(n={str:e.text},i=e.date):(n=t.contentsObj,i=t.modificationDate);const a=L(this,Io,new w_({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent.div.append(a.render())}get hasPopupElement(){return!!(m(this,Io)||this.popup||this.data.popupRef)}render(){en("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:a,id:s,exportValues:l}of i){if(a===-1||s===t)continue;const u=typeof l=="string"?l:null,d=document.querySelector(`[data-element-id="${s}"]`);if(d&&!jd.has(d)){gt(`_getElementsByName - element not allowed: ${s}`);continue}n.push({id:s,exportValue:u,domElement:d})}return n}for(const i of document.getElementsByName(e)){const{exportValue:a}=i,s=i.getAttribute("data-element-id");s!==t&&jd.has(i)&&n.push({id:s,exportValue:a,domElement:i})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Ju=new WeakMap,Vf=new WeakMap,Io=new WeakMap,Id=new WeakSet,n8=function(e,t,n){e/=255,t/=255,n/=255;const i=Math.max(e,t,n),a=Math.min(e,t,n),s=(i+a)/2,l=((1+Math.sqrt(s))/2*100).toFixed(2);if(i===a)return`hsl(0, 0%, ${l}%)`;const u=i-a;let d;i===e?d=(t-n)/u+(t<n?6:0):i===t?d=(n-e)/u+2:d=(e-t)/u+4,d=(d*60).toFixed(2);const h=(u/(1-Math.abs(2*s-1))*100).toFixed(2);return`hsl(${d}, ${h}%, ${l}%)`},v_=function(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:s,pageX:l,pageY:u}}}}=this;n==null||n.splice(0,4,...e),t.left=`${100*(e[0]-l)/a}%`,t.top=`${100*(s-e[3]+u)/s}%`,i===0?(t.width=`${100*(e[2]-e[0])/a}%`,t.height=`${100*(e[3]-e[1])/s}%`):this.setRotation(i)};let Cn=VS;var Xi,gu,r8,i8;class yS extends Cn{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});V(this,Xi);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let a=!1;return t.url?(n.addLinkAttributes(i,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),a=!0):t.attachment?($(this,Xi,r8).call(this,i,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?($(this,Xi,i8).call(this,i,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),a=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(i),this.container}_bindLink(t,n,i=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&$(this,Xi,gu).call(this),i&&(t.title=i)}_bindNamedAction(t,n,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),i&&(t.title=i),$(this,Xi,gu).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(n.actions)){const s=i.get(a);s&&(t[s]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:a}}),!1})}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),$(this,Xi,gu).call(this)}_bindResetFormAction(t,n){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),$(this,Xi,gu).call(this),!this._fieldObjects){gt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var g;i==null||i();const{fields:a,refs:s,include:l}=n,u=[];if(a.length!==0||s.length!==0){const b=new Set(s);for(const x of a){const k=this._fieldObjects[x]||[];for(const{id:v}of k)b.add(v)}for(const x of Object.values(this._fieldObjects))for(const k of x)b.has(k.id)===l&&u.push(k)}else for(const b of Object.values(this._fieldObjects))u.push(...b);const d=this.annotationStorage,h=[];for(const b of u){const{id:x}=b;switch(h.push(x),b.type){case"text":{const v=b.defaultValue||"";d.setValue(x,{value:v});break}case"checkbox":case"radiobutton":{const v=b.defaultValue===b.exportValues;d.setValue(x,{value:v});break}case"combobox":case"listbox":{const v=b.defaultValue||"";d.setValue(x,{value:v});break}default:continue}const k=document.querySelector(`[data-element-id="${x}"]`);if(k){if(!jd.has(k)){gt(`_bindResetFormAction - element not allowed: ${x}`);continue}}else continue;k.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Xi=new WeakSet,gu=function(){this.container.setAttribute("data-internal-link","")},r8=function(t,n,i="",a=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:i&&(t.title=i),t.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(n.content,n.filename,a),!1},$(this,Xi,gu).call(this)},i8=function(t,n,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),i&&(t.title=i),$(this,Xi,gu).call(this)};class Vz extends Cn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class zd extends Cn{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Ar.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,a){n.includes("mouse")?e.addEventListener(n,s=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s),shift:s.shiftKey,modifier:this._getKeyModifier(s)}})}):e.addEventListener(n,s=>{var l;if(n==="blur"){if(!t.focused||!s.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}a&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s)}}))})}_setEventListeners(e,t,n,i){var a,s,l;for(const[u,d]of n)(d==="Action"||(a=this.data.actions)!=null&&a[d])&&((d==="Focus"||d==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,u,d,i),d==="Focus"&&!((s=this.data.actions)!=null&&s.Blur)?this._setEventListener(e,t,"blur","Blur",null):d==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":tt.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||Hz,a=e.style;let s;const l=2,u=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(d/(eD*i))||1,g=d/h;s=Math.min(i,u(g/eD))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l);s=Math.min(i,u(d/eD))}a.fontSize=`calc(${s}px * var(--total-scale-factor))`,a.color=tt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Xz extends zd{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,i){const a=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=n),a.setValue(s.id,{[i]:n})}render(){var i,a;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const s=e.getValue(t,{value:this.data.fieldValue});let l=s.value||"";const u=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;u&&l.length>u&&(l=l.slice(0,u));let d=s.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;d&&this.data.comb&&(d=d.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:d,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=d??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",d??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),jd.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:g,datetimeType:b,timeStep:x}=this.data,k=!!b&&this.enableScripting;g&&(n.title=g),this._setRequired(n,this.data.required),u&&(n.maxLength=u),n.addEventListener("input",w=>{e.setValue(t,{value:w.target.value}),this.setPropertyOnSiblings(n,"value",w.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",w=>{const D=this.data.defaultFieldValue??"";n.value=h.userValue=D,h.formattedValue=null});let v=w=>{const{formattedValue:D}=h;D!=null&&(w.target.value=D),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",D=>{var A;if(h.focused)return;const{target:_}=D;if(k&&(_.type=b,x&&(_.step=x)),h.userValue){const N=h.userValue;if(k)if(b==="time"){const E=new Date(N),C=[E.getHours(),E.getMinutes(),E.getSeconds()];_.value=C.map(j=>j.toString().padStart(2,"0")).join(":")}else _.value=new Date(N-qz).toISOString().split(b==="date"?"T":".",1)[0];else _.value=N}h.lastCommittedValue=_.value,h.commitKey=1,(A=this.data.actions)!=null&&A.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",D=>{this.showElementAndHideCanvas(D.target);const _={value(A){h.userValue=A.detail.value??"",k||e.setValue(t,{value:h.userValue.toString()}),A.target.value=h.userValue},formattedValue(A){const{formattedValue:N}=A.detail;h.formattedValue=N,N!=null&&A.target!==document.activeElement&&(A.target.value=N);const E={formattedValue:N};k&&(E.value=N),e.setValue(t,E)},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{var j;const{charLimit:N}=A.detail,{target:E}=A;if(N===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",N);let C=h.userValue;!C||C.length<=N||(C=C.slice(0,N),E.value=h.userValue=C,e.setValue(t,{value:C}),(j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(_,D)}),n.addEventListener("keydown",D=>{var N;h.commitKey=1;let _=-1;if(D.key==="Escape"?_=0:D.key==="Enter"&&!this.data.multiLine?_=2:D.key==="Tab"&&(h.commitKey=3),_===-1)return;const{value:A}=D.target;h.lastCommittedValue!==A&&(h.lastCommittedValue=A,h.userValue=A,(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:_,selStart:D.target.selectionStart,selEnd:D.target.selectionEnd}}))});const w=v;v=null,n.addEventListener("blur",D=>{var N,E;if(!h.focused||!D.relatedTarget)return;(N=this.data.actions)!=null&&N.Blur||(h.focused=!1);const{target:_}=D;let{value:A}=_;if(k){if(A&&b==="time"){const C=A.split(":").map(j=>parseInt(j,10));A=new Date(2e3,0,1,C[0],C[1],C[2]||0).valueOf(),_.step=""}else A=new Date(A).valueOf();_.type="text"}h.userValue=A,h.lastCommittedValue!==A&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:h.commitKey,selStart:D.target.selectionStart,selEnd:D.target.selectionEnd}})),w(D)}),(a=this.data.actions)!=null&&a.Keystroke&&n.addEventListener("beforeinput",D=>{var O;h.lastCommittedValue=null;const{data:_,target:A}=D,{value:N,selectionStart:E,selectionEnd:C}=A;let j=E,M=C;switch(D.inputType){case"deleteWordBackward":{const F=N.substring(0,E).match(/\w*[^\w]*$/);F&&(j-=F[0].length);break}case"deleteWordForward":{const F=N.substring(E).match(/^[^\w]*\w*/);F&&(M+=F[0].length);break}case"deleteContentBackward":E===C&&(j-=1);break;case"deleteContentForward":E===C&&(M+=1);break}D.preventDefault(),(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,change:_||"",willCommit:!1,selStart:j,selEnd:M}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],D=>D.target.value)}if(v&&n.addEventListener("blur",v),this.data.comb){const D=(this.data.rect[2]-this.data.rect[0])/u;n.classList.add("comb"),n.style.letterSpacing=`calc(${D}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Gz extends zd{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class $z extends zd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return jd.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=0,a.addEventListener("change",s=>{const{name:l,checked:u}=s.target;for(const d of this._getElementsByName(l,n)){const h=u&&d.exportValue===t.exportValue;d.domElement&&(d.domElement.checked=h),e.setValue(d.id,{value:h})}e.setValue(n,{value:u})}),a.addEventListener("resetform",s=>{const l=t.defaultFieldValue||"Off";s.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",s=>{const l={value(u){u.target.checked=u.detail.value!=="Off",e.setValue(n,{value:u.target.checked})}};this._dispatchEventFromSandbox(l,s)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class a8 extends zd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const s of this._getElementsByName(t.fieldName,n))e.setValue(s.id,{value:!1});const a=document.createElement("input");if(jd.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",s=>{const{name:l,checked:u}=s.target;for(const d of this._getElementsByName(l,n))e.setValue(d.id,{value:!1});e.setValue(n,{value:u})}),a.addEventListener("resetform",s=>{const l=t.defaultFieldValue;s.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const s=t.buttonValue;a.addEventListener("updatefromsandbox",l=>{const u={value:d=>{const h=s===d.detail.value;for(const g of this._getElementsByName(d.target.name)){const b=h&&g.id===n;g.domElement&&(g.domElement.checked=b),e.setValue(g.id,{value:b})}}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Yz extends yS{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class Kz extends zd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");jd.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const g=this.data.defaultFieldValue;for(const b of i.options)b.selected=b.value===g});for(const h of this.data.options){const g=document.createElement("option");g.textContent=h.displayValue,g.value=h.exportValue,n.value.includes(h.exportValue)&&(g.setAttribute("selected",!0),a=!1),i.append(g)}let s=null;if(a){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),s=()=>{h.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}const l=h=>{const g=h?"value":"textContent",{options:b,multiple:x}=i;return x?Array.prototype.filter.call(b,k=>k.selected).map(k=>k[g]):b.selectedIndex===-1?null:b[b.selectedIndex][g]};let u=l(!1);const d=h=>{const g=h.target.options;return Array.prototype.map.call(g,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const g={value(b){s==null||s();const x=b.detail.value,k=new Set(Array.isArray(x)?x:[x]);for(const v of i.options)v.selected=k.has(v.value);e.setValue(t,{value:l(!0)}),u=l(!1)},multipleSelection(b){i.multiple=!0},remove(b){const x=i.options,k=b.detail.remove;x[k].selected=!1,i.remove(k),x.length>0&&Array.prototype.findIndex.call(x,w=>w.selected)===-1&&(x[0].selected=!0),e.setValue(t,{value:l(!0),items:d(b)}),u=l(!1)},clear(b){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),u=l(!1)},insert(b){const{index:x,displayValue:k,exportValue:v}=b.detail.insert,w=i.children[x],D=document.createElement("option");D.textContent=k,D.value=v,w?w.before(D):i.append(D),e.setValue(t,{value:l(!0),items:d(b)}),u=l(!1)},items(b){const{items:x}=b.detail;for(;i.length!==0;)i.remove(0);for(const k of x){const{displayValue:v,exportValue:w}=k,D=document.createElement("option");D.textContent=v,D.value=w,i.append(D)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:l(!0),items:d(b)}),u=l(!1)},indices(b){const x=new Set(b.detail.indices);for(const k of b.target.options)k.selected=x.has(k.index);e.setValue(t,{value:l(!0)}),u=l(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(g,h)}),i.addEventListener("input",h=>{var x;const g=l(!0),b=l(!1);e.setValue(t,{value:g}),h.preventDefault(),(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,change:b,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class w_ extends Cn{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:Cn._hasPopupData(t)}),this.elements=n,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new Qz({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,eventBus:this.linkService.eventBus}),n=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(i=>`${fS}${i}`).join(",")),this.container}}var ed,Lv,Bv,td,Xf,Dn,Oo,dc,Mo,Ab,Sb,Gf,As,Fi,Lo,Bo,Eb,hc,$f,Tb,Po,Yf,nd,fc,Ct,M0,s8,o8,L0,k_,l8,c8,u8,d8,B0,P0,D_;class Qz{constructor({container:e,color:t,elements:n,titleObj:i,modificationDate:a,contentsObj:s,richText:l,parent:u,rect:d,parentRect:h,open:g,eventBus:b=null}){V(this,Ct);V(this,ed,$(this,Ct,u8).bind(this));V(this,Lv,$(this,Ct,D_).bind(this));V(this,Bv,$(this,Ct,P0).bind(this));V(this,td,$(this,Ct,B0).bind(this));V(this,Xf,null);V(this,Dn,null);V(this,Oo,null);V(this,dc,null);V(this,Mo,null);V(this,Ab,null);V(this,Sb,null);V(this,Gf,null);V(this,As,!1);V(this,Fi,null);V(this,Lo,null);V(this,Bo,null);V(this,Eb,null);V(this,hc,null);V(this,$f,null);V(this,Tb,null);V(this,Po,null);V(this,Yf,null);V(this,nd,null);V(this,fc,!1);L(this,Dn,e),L(this,Yf,i),L(this,Oo,s),L(this,Po,l),L(this,Sb,u),L(this,Xf,t),L(this,Tb,d),L(this,Gf,h),L(this,Mo,n),L(this,Ab,b),L(this,dc,dv.toDateObject(a)),this.trigger=n.flatMap(x=>x.getElementsToTriggerPopup()),$(this,Ct,M0).call(this),m(this,Dn).hidden=!0,g&&$(this,Ct,B0).call(this)}render(){var i;if(m(this,Fi))return;const e=L(this,Fi,document.createElement("div"));if(e.className="popup",m(this,Xf)){const a=e.style.outlineColor=tt.makeHexColor(...m(this,Xf));e.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`}const t=document.createElement("span");if(t.className="header",(i=m(this,Yf))!=null&&i.str){const a=document.createElement("span");a.className="title",t.append(a),{dir:a.dir,str:a.textContent}=m(this,Yf)}if(e.append(t),m(this,dc)){const a=document.createElement("time");a.className="popupDate",a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:m(this,dc).valueOf()})),a.dateTime=m(this,dc).toISOString(),t.append(a)}const n=m(this,Ct,L0);if(n)t8.render({xfaHtml:n,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(m(this,Oo));e.append(a)}m(this,Dn).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let a=0,s=i.length;a<s;++a){const l=i[a];n.append(document.createTextNode(l)),a<s-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popup:t,deleted:n}){var i;if(n||t!=null&&t.deleted){this.remove();return}$(this,Ct,M0).call(this),m(this,nd)||L(this,nd,{contentsObj:m(this,Oo),richText:m(this,Po)}),e&&L(this,Bo,null),t&&(L(this,Po,$(this,Ct,c8).call(this,t.text)),L(this,dc,dv.toDateObject(t.date)),L(this,Oo,null)),(i=m(this,Fi))==null||i.remove(),L(this,Fi,null)}resetEdited(){var e;m(this,nd)&&({contentsObj:Hn(this,Oo)._,richText:Hn(this,Po)._}=m(this,nd),L(this,nd,null),(e=m(this,Fi))==null||e.remove(),L(this,Fi,null),L(this,Bo,null))}remove(){var e,t;(e=m(this,Lo))==null||e.abort(),L(this,Lo,null),(t=m(this,Fi))==null||t.remove(),L(this,Fi,null),L(this,fc,!1),L(this,As,!1);for(const n of this.trigger)n.classList.remove("popupTriggerArea")}forceHide(){L(this,fc,this.isVisible),m(this,fc)&&(m(this,Dn).hidden=!0)}maybeShow(){$(this,Ct,M0).call(this),m(this,fc)&&(m(this,Fi)||$(this,Ct,P0).call(this),L(this,fc,!1),m(this,Dn).hidden=!1)}get isVisible(){return m(this,Dn).hidden===!1}}ed=new WeakMap,Lv=new WeakMap,Bv=new WeakMap,td=new WeakMap,Xf=new WeakMap,Dn=new WeakMap,Oo=new WeakMap,dc=new WeakMap,Mo=new WeakMap,Ab=new WeakMap,Sb=new WeakMap,Gf=new WeakMap,As=new WeakMap,Fi=new WeakMap,Lo=new WeakMap,Bo=new WeakMap,Eb=new WeakMap,hc=new WeakMap,$f=new WeakMap,Tb=new WeakMap,Po=new WeakMap,Yf=new WeakMap,nd=new WeakMap,fc=new WeakMap,Ct=new WeakSet,M0=function(){var t;if(m(this,Lo))return;L(this,Lo,new AbortController);const{signal:e}=m(this,Lo);for(const n of this.trigger)n.addEventListener("click",m(this,td),{signal:e}),n.addEventListener("mouseenter",m(this,Bv),{signal:e}),n.addEventListener("mouseleave",m(this,Lv),{signal:e}),n.classList.add("popupTriggerArea");for(const n of m(this,Mo))(t=n.container)==null||t.addEventListener("keydown",m(this,ed),{signal:e});$(this,Ct,o8).call(this)},s8=function(){const e=m(this,Mo).find(t=>t.hasCommentButton);e&&(L(this,hc,e._normalizePoint(e.commentButtonPosition)),L(this,$f,e.commentButtonColor))},o8=function(){if(m(this,Eb)||(m(this,hc)||$(this,Ct,s8).call(this),!m(this,hc)))return;const e=L(this,Eb,document.createElement("button"));e.className="annotationCommentButton";const t=m(this,Mo)[0].container;e.style.zIndex=t.style.zIndex+1,e.tabIndex=0;const{signal:n}=m(this,Lo);e.addEventListener("hover",m(this,td),{signal:n}),e.addEventListener("keydown",m(this,ed),{signal:n}),e.addEventListener("click",()=>{var l;const[{data:{id:a},annotationEditorType:s}]=m(this,Mo);(l=m(this,Ab))==null||l.dispatch("switchannotationeditormode",{source:this,editId:a,mode:s,editComment:!0})},{signal:n});const{style:i}=e;i.left=`calc(${m(this,hc)[0]}%)`,i.top=`calc(${m(this,hc)[1]}% - var(--comment-button-dim))`,m(this,$f)&&(i.backgroundColor=m(this,$f)),t.after(e)},L0=function(){const e=m(this,Po),t=m(this,Oo);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&m(this,Po).html||null},k_=function(){var e,t,n;return((n=(t=(e=m(this,Ct,L0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},l8=function(){var e,t,n;return((n=(t=(e=m(this,Ct,L0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},c8=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:m(this,Ct,l8),fontSize:m(this,Ct,k_)?`calc(${m(this,Ct,k_)}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))t.push({name:"span",value:a,attributes:i});return n},u8=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&m(this,As))&&$(this,Ct,B0).call(this)},d8=function(){if(m(this,Bo)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:a}}}=m(this,Sb);let s=!!m(this,Gf),l=s?m(this,Gf):m(this,Tb);for(const k of m(this,Mo))if(!l||tt.intersect(k.data.rect,l)!==null){l=k.data.rect,s=!0;break}const u=tt.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),h=s?l[2]-l[0]+5:0,g=u[0]+h,b=u[1];L(this,Bo,[100*(g-i)/t,100*(b-a)/n]);const{style:x}=m(this,Dn);x.left=`${m(this,Bo)[0]}%`,x.top=`${m(this,Bo)[1]}%`},B0=function(){L(this,As,!m(this,As)),m(this,As)?($(this,Ct,P0).call(this),m(this,Dn).addEventListener("click",m(this,td)),m(this,Dn).addEventListener("keydown",m(this,ed))):($(this,Ct,D_).call(this),m(this,Dn).removeEventListener("click",m(this,td)),m(this,Dn).removeEventListener("keydown",m(this,ed)))},P0=function(){m(this,Fi)||this.render(),this.isVisible?m(this,As)&&m(this,Dn).classList.add("focused"):($(this,Ct,d8).call(this),m(this,Dn).hidden=!1,m(this,Dn).style.zIndex=parseInt(m(this,Dn).style.zIndex)+1e3)},D_=function(){m(this,Dn).classList.remove("focused"),!(m(this,As)||!this.isVisible)&&(m(this,Dn).hidden=!0,m(this,Dn).style.zIndex=parseInt(m(this,Dn).style.zIndex)-1e3)};class h8 extends Cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=pt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Cb;class Zz extends Cn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});V(this,Cb,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:i}=this,a=this.svgFactory.create(n,i,!0),s=L(this,Cb,this.svgFactory.createElement("svg:line"));return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),a.append(s),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,Cb)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cb=new WeakMap;var Nb;class Jz extends Cn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});V(this,Nb,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:i}=this,a=this.svgFactory.create(n,i,!0),s=t.borderStyle.width,l=L(this,Nb,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",s/2),l.setAttribute("y",s/2),l.setAttribute("width",n-s),l.setAttribute("height",i-s),l.setAttribute("stroke-width",s||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,Nb)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nb=new WeakMap;var Ub;class eW extends Cn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});V(this,Ub,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:i}=this,a=this.svgFactory.create(n,i,!0),s=t.borderStyle.width,l=L(this,Ub,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",i/2),l.setAttribute("rx",n/2-s/2),l.setAttribute("ry",i/2-s/2),l.setAttribute("stroke-width",s||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,Ub)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ub=new WeakMap;var Rb;class f8 extends Cn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});V(this,Rb,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:i,popupRef:a},width:s,height:l}=this;if(!n)return this.container;const u=this.svgFactory.create(s,l,!0);let d=[];for(let g=0,b=n.length;g<b;g+=2){const x=n[g]-t[0],k=t[3]-n[g+1];d.push(`${x},${k}`)}d=d.join(" ");const h=L(this,Rb,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",d),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),u.append(h),this.container.append(u),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,Rb)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rb=new WeakMap;class tW extends f8{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class nW extends Cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var jb,rd,Fb,__;class vS extends Cn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});V(this,Fb);V(this,jb,null);V(this,rd,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?pt.HIGHLIGHT:pt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:i,borderStyle:a,popupRef:s}}=this,{transform:l,width:u,height:d}=$(this,Fb,__).call(this,n,t),h=this.svgFactory.create(u,d,!0),g=L(this,jb,this.svgFactory.createElement("svg:g"));h.append(g),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",l);for(let b=0,x=i.length;b<x;b++){const k=this.svgFactory.createElement(this.svgElementName);m(this,rd).push(k),k.setAttribute("points",i[b].join(",")),g.append(k)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:i,rect:a}=t,s=m(this,jb);if(n>=0&&s.setAttribute("stroke-width",n||1),i)for(let l=0,u=m(this,rd).length;l<u;l++)m(this,rd)[l].setAttribute("points",i[l].join(","));if(a){const{transform:l,width:u,height:d}=$(this,Fb,__).call(this,this.data.rotation,a);s.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),s.setAttribute("transform",l)}}getElementsToTriggerPopup(){return m(this,rd)}addHighlightArea(){this.container.classList.add("highlightArea")}get commentButtonPosition(){const{inkLists:t,rect:n}=this.data;if((t==null?void 0:t.length)>=1){let i=-1/0,a=-1/0;for(const s of t)for(let l=0,u=s.length;l<u;l+=2)s[l+1]>a?(a=s[l+1],i=s[l]):s[l+1]===a&&(i=Math.max(i,s[l]));if(i!==1/0)return[i,a]}return n?[n[2],n[3]]:null}}jb=new WeakMap,rd=new WeakMap,Fb=new WeakSet,__=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class p8 extends Cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=pt.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class rW extends Cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class iW extends Cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class aW extends Cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class g8 extends Cn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=pt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ib,Ob,A_;class sW extends Cn{constructor(t){var i;super(t,{isRenderable:!0});V(this,Ob);V(this,Ib,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",$(this,Ob,A_).bind(this)),L(this,Ib,i);const{isMac:a}=Ar.platform;return t.addEventListener("keydown",s=>{s.key==="Enter"&&(a?s.metaKey:s.ctrlKey)&&$(this,Ob,A_).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return m(this,Ib)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ib=new WeakMap,Ob=new WeakSet,A_=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Mb,id,pc,Lb,Lc,E_,T_;const XS=class XS{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:i,page:a,viewport:s,structTreeLayer:l}){V(this,Lc);V(this,Mb,null);V(this,id,null);V(this,pc,new Map);V(this,Lb,null);this.div=e,L(this,Mb,t),L(this,id,n),L(this,Lb,l||null),this.page=a,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return m(this,pc).size>0}async render(e){var s;const{annotations:t}=e,n=this.div;Ud(n,this.viewport);const i=new Map,a={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new bv,annotationStorage:e.annotationStorage||new mS,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const u=l.annotationType===On.POPUP;if(u){const g=i.get(l.id);if(!g)continue;a.elements=g}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;a.data=l;const d=R4.create(a);if(!d.isRenderable)continue;if(!u&&l.popupRef){const g=i.get(l.popupRef);g?g.push(d):i.set(l.popupRef,[d])}const h=d.render();l.hidden&&(h.style.visibility="hidden"),await $(this,Lc,E_).call(this,h,l.id,a.elements),d._isEditable&&(m(this,pc).set(d.data.id,d),(s=this._annotationEditorUIManager)==null||s.renderAnnotationElement(d))}$(this,Lc,T_).call(this)}async addLinkAnnotations(e,t){const n={data:null,layer:this.div,linkService:t,svgFactory:new bv,parent:this};for(const i of e){i.borderStyle||(i.borderStyle=XS._defaultBorderStyle),n.data=i;const a=R4.create(n);if(!a.isRenderable)continue;const s=a.render();await $(this,Lc,E_).call(this,s,i.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Ud(t,{rotation:e.rotation}),$(this,Lc,T_).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(m(this,pc).values())}getEditableAnnotation(e){return m(this,pc).get(e)}static get _defaultBorderStyle(){return Dt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:jh.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Mb=new WeakMap,id=new WeakMap,pc=new WeakMap,Lb=new WeakMap,Lc=new WeakSet,E_=async function(e,t,n){var l,u;const i=e.firstChild||e,a=i.id=`${fS}${t}`,s=await((l=m(this,Lb))==null?void 0:l.getAriaAttributes(a));if(s)for(const[d,h]of s)i.setAttribute(d,h);n?n.at(-1).container.after(e):(this.div.append(e),(u=m(this,Mb))==null||u.moveElementInDOM(this.div,e,i,!1))},T_=function(){var t;if(!m(this,id))return;const e=this.div;for(const[n,i]of m(this,id)){const a=e.querySelector(`[data-annotation-id="${n}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:s}=a;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):a.append(i);const l=m(this,pc).get(n);l&&(l._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(n,a.id,i),l._hasNoCanvas=!1):l.canvas=i)}m(this,id).clear()};let S_=XS;const Ky=/\r\n?|\n/g;var ma,Ii,Bb,ad,Oi,Pn,m8,b8,x8,z0,Jo,W0,H0,y8,N_,v8;const cn=class cn extends sn{constructor(t){super({...t,name:"freeTextEditor"});V(this,Pn);V(this,ma);V(this,Ii,"");V(this,Bb,`${this.id}-editor`);V(this,ad,null);V(this,Oi);We(this,"_colorPicker",null);L(this,ma,t.color||cn._defaultColor||sn._defaultLineColor),L(this,Oi,t.fontSize||cn._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=cn.prototype,n=s=>s.isEmpty(),i=Rd.TRANSLATE_SMALL,a=Rd.TRANSLATE_BIG;return Dt(this,"_keyboardManager",new fx([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:n}]]))}static initialize(t,n){sn.initialize(t,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Nt.FREETEXT_SIZE:cn._defaultFontSize=n;break;case Nt.FREETEXT_COLOR:cn._defaultColor=n;break}}updateParams(t,n){switch(t){case Nt.FREETEXT_SIZE:$(this,Pn,m8).call(this,n);break;case Nt.FREETEXT_COLOR:$(this,Pn,b8).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Nt.FREETEXT_SIZE,cn._defaultFontSize],[Nt.FREETEXT_COLOR,cn._defaultColor||sn._defaultLineColor]]}get propertiesToUpdate(){return[[Nt.FREETEXT_SIZE,m(this,Oi)],[Nt.FREETEXT_COLOR,m(this,ma)]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new mv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Nt.FREETEXT_COLOR}get colorValue(){return m(this,ma)}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-cn._internalPadding*t,-(cn._internalPadding+m(this,Oi))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),L(this,ad,new AbortController);const t=this._uiManager.combinedSignal(m(this,ad));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",m(this,Bb)),this._isDraggable=!0,(t=m(this,ad))==null||t.abort(),L(this,ad,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=m(this,Ii),n=L(this,Ii,$(this,Pn,x8).call(this).trimEnd());if(t===n)return;const i=a=>{if(L(this,Ii,a),!a){this.remove();return}$(this,Pn,H0).call(this),this._uiManager.rebuild(this),$(this,Pn,z0).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(t)},mustExec:!1}),$(this,Pn,z0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){cn._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",m(this,Bb)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${m(this,Oi)}px * var(--total-scale-factor))`,i.color=m(this,ma),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,s]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[h,g]=this.pageDimensions,[b,x]=this.pageTranslation;let k,v;switch(this.rotation){case 0:k=t+(l[0]-b)/h,v=n+this.height-(l[1]-x)/g;break;case 90:k=t+(l[0]-b)/h,v=n-(l[1]-x)/g,[u,d]=[d,-u];break;case 180:k=t-this.width+(l[0]-b)/h,v=n-(l[1]-x)/g,[u,d]=[-u,-d];break;case 270:k=t+(l[0]-b-this.height*g)/h,v=n+(l[1]-x-this.width*h)/g,[u,d]=[-d,u];break}this.setAt(k*a,v*s,u,d)}else this._moveAfterPaste(t,n);$(this,Pn,H0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var k,v,w;const n=t.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const a=$(k=cn,Jo,N_).call(k,n.getData("text")||"").replaceAll(Ky,`
`);if(!a)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const l=s.getRangeAt(0);if(!a.includes(`
`)){l.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),s.collapseToStart();return}const{startContainer:u,startOffset:d}=l,h=[],g=[];if(u.nodeType===Node.TEXT_NODE){const D=u.parentElement;if(g.push(u.nodeValue.slice(d).replaceAll(Ky,"")),D!==this.editorDiv){let _=h;for(const A of this.editorDiv.childNodes){if(A===D){_=g;continue}_.push($(v=cn,Jo,W0).call(v,A))}}h.push(u.nodeValue.slice(0,d).replaceAll(Ky,""))}else if(u===this.editorDiv){let D=h,_=0;for(const A of this.editorDiv.childNodes)_++===d&&(D=g),D.push($(w=cn,Jo,W0).call(w,A))}L(this,Ii,`${h.join(`
`)}${a}${g.join(`
`)}`),$(this,Pn,H0).call(this);const b=new Range;let x=Math.sumPrecise(h.map(D=>D.length));for(const{firstChild:D}of this.editorDiv.childNodes)if(D.nodeType===Node.TEXT_NODE){const _=D.nodeValue.length;if(x<=_){b.setStart(D,x),b.setEnd(D,x);break}x-=_}s.removeAllRanges(),s.addRange(b)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=cn._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,i){var l;let a=null;if(t instanceof h8){const{data:{defaultAppearanceData:{fontSize:u,fontColor:d},rect:h,rotation:g,id:b,popupRef:x,contentsObj:k},textContent:v,textPosition:w,parent:{page:{pageNumber:D}}}=t;if(!v||v.length===0)return null;a=t={annotationType:pt.FREETEXT,color:Array.from(d),fontSize:u,value:v.join(`
`),position:w,pageIndex:D-1,rect:h.slice(0),rotation:g,annotationElementId:b,id:b,deleted:!1,popupRef:x,comment:(k==null?void 0:k.str)||null}}const s=await super.deserialize(t,n,i);return L(s,Oi,t.fontSize),L(s,ma,tt.makeHexColor(...t.color)),L(s,Ii,$(l=cn,Jo,N_).call(l,t.value)),s._initialData=a,t.comment&&s.setCommentData(t.comment),s}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=this.getPDFRect(),i=sn._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:m(this,ma)),a={annotationType:pt.FREETEXT,color:i,fontSize:m(this,Oi),value:$(this,Pn,y8).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(a),t?(a.isCopy=!0,a):this.annotationElementId&&!$(this,Pn,v8).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(!n)return null;const{style:i}=n;i.fontSize=`calc(${m(this,Oi)}px * var(--total-scale-factor))`,i.color=m(this,ma),n.replaceChildren();for(const s of m(this,Ii).split(`
`)){const l=document.createElement("div");l.append(s?document.createTextNode(s):document.createElement("br")),n.append(l)}const a={rect:this.getPDFRect()};return a.popup=this.hasEditedComment?this.comment:{text:m(this,Ii)},t.updateEdited(a),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};ma=new WeakMap,Ii=new WeakMap,Bb=new WeakMap,ad=new WeakMap,Oi=new WeakMap,Pn=new WeakSet,m8=function(t){const n=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-m(this,Oi))*this.parentScale),L(this,Oi,a),$(this,Pn,z0).call(this)},i=m(this,Oi);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},b8=function(t){const n=a=>{var s;L(this,ma,this.editorDiv.style.color=a),(s=this._colorPicker)==null||s.update(a)},i=m(this,ma);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},x8=function(){var i;const t=[];this.editorDiv.normalize();let n=null;for(const a of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(t.push($(i=cn,Jo,W0).call(i,a)),n=a);return t.join(`
`)},z0=function(){const[t,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:s}=this,l=s.style.display,u=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",a.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=l,s.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/n):(this.width=i.height/t,this.height=i.width/n),this.fixAndSetPosition()},Jo=new WeakSet,W0=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Ky,"")},H0=function(){if(this.editorDiv.replaceChildren(),!!m(this,Ii))for(const t of m(this,Ii).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},y8=function(){return m(this,Ii).replaceAll(""," ")},N_=function(t){return t.replaceAll(" ","")},v8=function(t){const{value:n,fontSize:i,color:a,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==i||t.color.some((l,u)=>l!==a[u])||t.pageIndex!==s},V(cn,Jo),We(cn,"_freeTextDefaultContent",""),We(cn,"_internalPadding",0),We(cn,"_defaultColor",null),We(cn,"_defaultFontSize",10),We(cn,"_type","freetext"),We(cn,"_editorType",pt.FREETEXT);let C_=cn;class Je{toSVGPath(){en("Abstract method `toSVGPath` must be implemented.")}get box(){en("Abstract getter `box` must be implemented.")}serialize(e,t){en("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,a,s){s||(s=new Float32Array(e.length));for(let l=0,u=e.length;l<u;l+=2)s[l]=t+e[l]*i,s[l+1]=n+e[l+1]*a;return s}static _rescaleAndSwap(e,t,n,i,a,s){s||(s=new Float32Array(e.length));for(let l=0,u=e.length;l<u;l+=2)s[l]=t+e[l+1]*i,s[l+1]=n+e[l]*a;return s}static _translate(e,t,n,i){i||(i=new Float32Array(e.length));for(let a=0,s=e.length;a<s;a+=2)i[a]=t+e[a],i[a+1]=n+e[a+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,i,a){switch(a){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,a,s){return[(e+5*n)/6,(t+5*i)/6,(5*n+a)/6,(5*i+s)/6,(n+a)/2,(i+s)/2]}}We(Je,"PRECISION",1e-4);var Mi,Ha,Kf,Qf,Ss,kt,sd,od,Pb,zb,Zf,Jf,gc,Wb,Pv,zv,Qn,nm,w8,k8,D8,_8,A8,S8;const lo=class lo{constructor({x:e,y:t},n,i,a,s,l=0){V(this,Qn);V(this,Mi);V(this,Ha,[]);V(this,Kf);V(this,Qf);V(this,Ss,[]);V(this,kt,new Float32Array(18));V(this,sd);V(this,od);V(this,Pb);V(this,zb);V(this,Zf);V(this,Jf);V(this,gc,[]);L(this,Mi,n),L(this,Jf,a*i),L(this,Qf,s),m(this,kt).set([NaN,NaN,NaN,NaN,e,t],6),L(this,Kf,l),L(this,zb,m(lo,Wb)*i),L(this,Pb,m(lo,zv)*i),L(this,Zf,i),m(this,gc).push(e,t)}isEmpty(){return isNaN(m(this,kt)[8])}add({x:e,y:t}){var O;L(this,sd,e),L(this,od,t);const[n,i,a,s]=m(this,Mi);let[l,u,d,h]=m(this,kt).subarray(8,12);const g=e-d,b=t-h,x=Math.hypot(g,b);if(x<m(this,Pb))return!1;const k=x-m(this,zb),v=k/x,w=v*g,D=v*b;let _=l,A=u;l=d,u=h,d+=w,h+=D,(O=m(this,gc))==null||O.push(e,t);const N=-D/k,E=w/k,C=N*m(this,Jf),j=E*m(this,Jf);return m(this,kt).set(m(this,kt).subarray(2,8),0),m(this,kt).set([d+C,h+j],4),m(this,kt).set(m(this,kt).subarray(14,18),12),m(this,kt).set([d-C,h-j],16),isNaN(m(this,kt)[6])?(m(this,Ss).length===0&&(m(this,kt).set([l+C,u+j],2),m(this,Ss).push(NaN,NaN,NaN,NaN,(l+C-n)/a,(u+j-i)/s),m(this,kt).set([l-C,u-j],14),m(this,Ha).push(NaN,NaN,NaN,NaN,(l-C-n)/a,(u-j-i)/s)),m(this,kt).set([_,A,l,u,d,h],6),!this.isEmpty()):(m(this,kt).set([_,A,l,u,d,h],6),Math.abs(Math.atan2(A-u,_-l)-Math.atan2(D,w))<Math.PI/2?([l,u,d,h]=m(this,kt).subarray(2,6),m(this,Ss).push(NaN,NaN,NaN,NaN,((l+d)/2-n)/a,((u+h)/2-i)/s),[l,u,_,A]=m(this,kt).subarray(14,18),m(this,Ha).push(NaN,NaN,NaN,NaN,((_+l)/2-n)/a,((A+u)/2-i)/s),!0):([_,A,l,u,d,h]=m(this,kt).subarray(0,6),m(this,Ss).push(((_+5*l)/6-n)/a,((A+5*u)/6-i)/s,((5*l+d)/6-n)/a,((5*u+h)/6-i)/s,((l+d)/2-n)/a,((u+h)/2-i)/s),[d,h,l,u,_,A]=m(this,kt).subarray(12,18),m(this,Ha).push(((_+5*l)/6-n)/a,((A+5*u)/6-i)/s,((5*l+d)/6-n)/a,((5*u+h)/6-i)/s,((l+d)/2-n)/a,((u+h)/2-i)/s),!0))}toSVGPath(){if(this.isEmpty())return"";const e=m(this,Ss),t=m(this,Ha);if(isNaN(m(this,kt)[6])&&!this.isEmpty())return $(this,Qn,w8).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);$(this,Qn,D8).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return $(this,Qn,k8).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,a,s){return new E8(e,t,n,i,a,s)}getOutlines(){var g;const e=m(this,Ss),t=m(this,Ha),n=m(this,kt),[i,a,s,l]=m(this,Mi),u=new Float32Array((((g=m(this,gc))==null?void 0:g.length)??0)+2);for(let b=0,x=u.length-2;b<x;b+=2)u[b]=(m(this,gc)[b]-i)/s,u[b+1]=(m(this,gc)[b+1]-a)/l;if(u[u.length-2]=(m(this,sd)-i)/s,u[u.length-1]=(m(this,od)-a)/l,isNaN(n[6])&&!this.isEmpty())return $(this,Qn,_8).call(this,u);const d=new Float32Array(m(this,Ss).length+24+m(this,Ha).length);let h=e.length;for(let b=0;b<h;b+=2){if(isNaN(e[b])){d[b]=d[b+1]=NaN;continue}d[b]=e[b],d[b+1]=e[b+1]}h=$(this,Qn,S8).call(this,d,h);for(let b=t.length-6;b>=6;b-=6)for(let x=0;x<6;x+=2){if(isNaN(t[b+x])){d[h]=d[h+1]=NaN,h+=2;continue}d[h]=t[b+x],d[h+1]=t[b+x+1],h+=2}return $(this,Qn,A8).call(this,d,h),this.newFreeDrawOutline(d,u,m(this,Mi),m(this,Zf),m(this,Kf),m(this,Qf))}};Mi=new WeakMap,Ha=new WeakMap,Kf=new WeakMap,Qf=new WeakMap,Ss=new WeakMap,kt=new WeakMap,sd=new WeakMap,od=new WeakMap,Pb=new WeakMap,zb=new WeakMap,Zf=new WeakMap,Jf=new WeakMap,gc=new WeakMap,Wb=new WeakMap,Pv=new WeakMap,zv=new WeakMap,Qn=new WeakSet,nm=function(){const e=m(this,kt).subarray(4,6),t=m(this,kt).subarray(16,18),[n,i,a,s]=m(this,Mi);return[(m(this,sd)+(e[0]-t[0])/2-n)/a,(m(this,od)+(e[1]-t[1])/2-i)/s,(m(this,sd)+(t[0]-e[0])/2-n)/a,(m(this,od)+(t[1]-e[1])/2-i)/s]},w8=function(){const[e,t,n,i]=m(this,Mi),[a,s,l,u]=$(this,Qn,nm).call(this);return`M${(m(this,kt)[2]-e)/n} ${(m(this,kt)[3]-t)/i} L${(m(this,kt)[4]-e)/n} ${(m(this,kt)[5]-t)/i} L${a} ${s} L${l} ${u} L${(m(this,kt)[16]-e)/n} ${(m(this,kt)[17]-t)/i} L${(m(this,kt)[14]-e)/n} ${(m(this,kt)[15]-t)/i} Z`},k8=function(e){const t=m(this,Ha);e.push(`L${t[4]} ${t[5]} Z`)},D8=function(e){const[t,n,i,a]=m(this,Mi),s=m(this,kt).subarray(4,6),l=m(this,kt).subarray(16,18),[u,d,h,g]=$(this,Qn,nm).call(this);e.push(`L${(s[0]-t)/i} ${(s[1]-n)/a} L${u} ${d} L${h} ${g} L${(l[0]-t)/i} ${(l[1]-n)/a}`)},_8=function(e){const t=m(this,kt),[n,i,a,s]=m(this,Mi),[l,u,d,h]=$(this,Qn,nm).call(this),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-n)/a,(t[3]-i)/s,NaN,NaN,NaN,NaN,(t[4]-n)/a,(t[5]-i)/s,NaN,NaN,NaN,NaN,l,u,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(t[16]-n)/a,(t[17]-i)/s,NaN,NaN,NaN,NaN,(t[14]-n)/a,(t[15]-i)/s],0),this.newFreeDrawOutline(g,e,m(this,Mi),m(this,Zf),m(this,Kf),m(this,Qf))},A8=function(e,t){const n=m(this,Ha);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},S8=function(e,t){const n=m(this,kt).subarray(4,6),i=m(this,kt).subarray(16,18),[a,s,l,u]=m(this,Mi),[d,h,g,b]=$(this,Qn,nm).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-a)/l,(n[1]-s)/u,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,g,b,NaN,NaN,NaN,NaN,(i[0]-a)/l,(i[1]-s)/u],t),t+=24},V(lo,Wb,8),V(lo,Pv,2),V(lo,zv,m(lo,Wb)+m(lo,Pv));let xv=lo;var ep,ld,zo,Hb,Li,qb,En,Wv,T8;class E8 extends Je{constructor(t,n,i,a,s,l){super();V(this,Wv);V(this,ep);V(this,ld,new Float32Array(4));V(this,zo);V(this,Hb);V(this,Li);V(this,qb);V(this,En);L(this,En,t),L(this,Li,n),L(this,ep,i),L(this,qb,a),L(this,zo,s),L(this,Hb,l),this.lastPoint=[NaN,NaN],$(this,Wv,T8).call(this,l);const[u,d,h,g]=m(this,ld);for(let b=0,x=t.length;b<x;b+=2)t[b]=(t[b]-u)/h,t[b+1]=(t[b+1]-d)/g;for(let b=0,x=n.length;b<x;b+=2)n[b]=(n[b]-u)/h,n[b+1]=(n[b+1]-d)/g}toSVGPath(){const t=[`M${m(this,En)[4]} ${m(this,En)[5]}`];for(let n=6,i=m(this,En).length;n<i;n+=6){if(isNaN(m(this,En)[n])){t.push(`L${m(this,En)[n+4]} ${m(this,En)[n+5]}`);continue}t.push(`C${m(this,En)[n]} ${m(this,En)[n+1]} ${m(this,En)[n+2]} ${m(this,En)[n+3]} ${m(this,En)[n+4]} ${m(this,En)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,i,a],s){const l=i-t,u=a-n;let d,h;switch(s){case 0:d=Je._rescale(m(this,En),t,a,l,-u),h=Je._rescale(m(this,Li),t,a,l,-u);break;case 90:d=Je._rescaleAndSwap(m(this,En),t,n,l,u),h=Je._rescaleAndSwap(m(this,Li),t,n,l,u);break;case 180:d=Je._rescale(m(this,En),i,n,-l,u),h=Je._rescale(m(this,Li),i,n,-l,u);break;case 270:d=Je._rescaleAndSwap(m(this,En),i,a,-l,-u),h=Je._rescaleAndSwap(m(this,Li),i,a,-l,-u);break}return{outline:Array.from(d),points:[Array.from(h)]}}get box(){return m(this,ld)}newOutliner(t,n,i,a,s,l=0){return new xv(t,n,i,a,s,l)}getNewOutline(t,n){const[i,a,s,l]=m(this,ld),[u,d,h,g]=m(this,ep),b=s*h,x=l*g,k=i*h+u,v=a*g+d,w=this.newOutliner({x:m(this,Li)[0]*b+k,y:m(this,Li)[1]*x+v},m(this,ep),m(this,qb),t,m(this,Hb),n??m(this,zo));for(let D=2;D<m(this,Li).length;D+=2)w.add({x:m(this,Li)[D]*b+k,y:m(this,Li)[D+1]*x+v});return w.getOutlines()}}ep=new WeakMap,ld=new WeakMap,zo=new WeakMap,Hb=new WeakMap,Li=new WeakMap,qb=new WeakMap,En=new WeakMap,Wv=new WeakSet,T8=function(t){const n=m(this,En);let i=n[4],a=n[5];const s=[i,a,i,a];let l=i,u=a;const d=t?Math.max:Math.min;for(let g=6,b=n.length;g<b;g+=6){const x=n[g+4],k=n[g+5];if(isNaN(n[g]))tt.pointBoundingBox(x,k,s),u<k?(l=x,u=k):u===k&&(l=d(l,x));else{const v=[1/0,1/0,-1/0,-1/0];tt.bezierBoundingBox(i,a,...n.slice(g,g+6),v),tt.rectBoundingBox(...v,s),u<v[3]?(l=v[2],u=v[3]):u===v[3]&&(l=d(l,v[2]))}i=x,a=k}const h=m(this,ld);h[0]=s[0]-m(this,zo),h[1]=s[1]-m(this,zo),h[2]=s[2]-s[0]+2*m(this,zo),h[3]=s[3]-s[1]+2*m(this,zo),this.lastPoint=[l,u]};var Vb,Xb,mc,qa,Kr,C8,q0,N8,U8,R_;class U_{constructor(e,t=0,n=0,i=!0){V(this,Kr);V(this,Vb);V(this,Xb);V(this,mc,[]);V(this,qa,[]);const a=[1/0,1/0,-1/0,-1/0],s=10**-4;for(const{x,y:k,width:v,height:w}of e){const D=Math.floor((x-t)/s)*s,_=Math.ceil((x+v+t)/s)*s,A=Math.floor((k-t)/s)*s,N=Math.ceil((k+w+t)/s)*s,E=[D,A,N,!0],C=[_,A,N,!1];m(this,mc).push(E,C),tt.rectBoundingBox(D,A,_,N,a)}const l=a[2]-a[0]+2*n,u=a[3]-a[1]+2*n,d=a[0]-n,h=a[1]-n,g=m(this,mc).at(i?-1:-2),b=[g[0],g[2]];for(const x of m(this,mc)){const[k,v,w]=x;x[0]=(k-d)/l,x[1]=(v-h)/u,x[2]=(w-h)/u}L(this,Vb,new Float32Array([d,h,l,u])),L(this,Xb,b)}getOutlines(){m(this,mc).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of m(this,mc))t[3]?(e.push(...$(this,Kr,R_).call(this,t)),$(this,Kr,N8).call(this,t)):($(this,Kr,U8).call(this,t),e.push(...$(this,Kr,R_).call(this,t)));return $(this,Kr,C8).call(this,e)}}Vb=new WeakMap,Xb=new WeakMap,mc=new WeakMap,qa=new WeakMap,Kr=new WeakSet,C8=function(e){const t=[],n=new Set;for(const s of e){const[l,u,d]=s;t.push([l,u,s],[l,d,s])}t.sort((s,l)=>s[1]-l[1]||s[0]-l[0]);for(let s=0,l=t.length;s<l;s+=2){const u=t[s][2],d=t[s+1][2];u.push(d),d.push(u),n.add(u),n.add(d)}const i=[];let a;for(;n.size>0;){const s=n.values().next().value;let[l,u,d,h,g]=s;n.delete(s);let b=l,x=u;for(a=[l,d],i.push(a);;){let k;if(n.has(h))k=h;else if(n.has(g))k=g;else break;n.delete(k),[l,u,d,h,g]=k,b!==l&&(a.push(b,x,l,x===u?u:d),b=l),x=x===u?d:u}a.push(b,x)}return new oW(i,m(this,Vb),m(this,Xb))},q0=function(e){const t=m(this,qa);let n=0,i=t.length-1;for(;n<=i;){const a=n+i>>1,s=t[a][0];if(s===e)return a;s<e?n=a+1:i=a-1}return i+1},N8=function([,e,t]){const n=$(this,Kr,q0).call(this,e);m(this,qa).splice(n,0,[e,t])},U8=function([,e,t]){const n=$(this,Kr,q0).call(this,e);for(let i=n;i<m(this,qa).length;i++){const[a,s]=m(this,qa)[i];if(a!==e)break;if(a===e&&s===t){m(this,qa).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[a,s]=m(this,qa)[i];if(a!==e)break;if(a===e&&s===t){m(this,qa).splice(i,1);return}}},R_=function(e){const[t,n,i]=e,a=[[t,n,i]],s=$(this,Kr,q0).call(this,i);for(let l=0;l<s;l++){const[u,d]=m(this,qa)[l];for(let h=0,g=a.length;h<g;h++){const[,b,x]=a[h];if(!(d<=b||x<=u)){if(b>=u){if(x>d)a[h][1]=d;else{if(g===1)return[];a.splice(h,1),h--,g--}continue}a[h][2]=u,x>d&&a.push([t,d,x])}}}return a};var Gb,tp;class oW extends Je{constructor(t,n,i){super();V(this,Gb);V(this,tp);L(this,tp,t),L(this,Gb,n),this.lastPoint=i}toSVGPath(){const t=[];for(const n of m(this,tp)){let[i,a]=n;t.push(`M${i} ${a}`);for(let s=2;s<n.length;s+=2){const l=n[s],u=n[s+1];l===i?(t.push(`V${u}`),a=u):u===a&&(t.push(`H${l}`),i=l)}t.push("Z")}return t.join(" ")}serialize([t,n,i,a],s){const l=[],u=i-t,d=a-n;for(const h of m(this,tp)){const g=new Array(h.length);for(let b=0;b<h.length;b+=2)g[b]=t+h[b]*u,g[b+1]=a-h[b+1]*d;l.push(g)}return l}get box(){return m(this,Gb)}get classNamesForOutlining(){return["highlightOutline"]}}Gb=new WeakMap,tp=new WeakMap;class j_ extends xv{newFreeDrawOutline(e,t,n,i,a,s){return new lW(e,t,n,i,a,s)}}class lW extends E8{newOutliner(e,t,n,i,a,s=0){return new j_(e,t,n,i,a,s)}}var np,$b,Wo,cd,Yb,li,Kb,Qb,ud,ba,Bi,yr,rp,Ho,Ur,ip,xa,Zb,mt,F_,V0,R8,j8,F8,I_,mu,wa,Bh,I8,X0,rm,O8,M8,L8,B8,P8;const Lt=class Lt extends sn{constructor(t){super({...t,name:"highlightEditor"});V(this,mt);V(this,np,null);V(this,$b,0);V(this,Wo);V(this,cd,null);V(this,Yb,null);V(this,li,null);V(this,Kb,null);V(this,Qb,0);V(this,ud,null);V(this,ba,null);V(this,Bi,null);V(this,yr,!1);V(this,rp,null);V(this,Ho);V(this,Ur,null);V(this,ip,"");V(this,xa);V(this,Zb,"");this.color=t.color||Lt._defaultColor,L(this,xa,t.thickness||Lt._defaultThickness),L(this,Ho,t.opacity||Lt._defaultOpacity),L(this,Wo,t.boxes||null),L(this,Zb,t.methodOfCreation||""),L(this,ip,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(L(this,yr,!0),$(this,mt,V0).call(this,t),$(this,mt,mu).call(this)):m(this,Wo)&&(L(this,np,t.anchorNode),L(this,$b,t.anchorOffset),L(this,Kb,t.focusNode),L(this,Qb,t.focusOffset),$(this,mt,F_).call(this),$(this,mt,mu).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Lt.prototype;return Dt(this,"_keyboardManager",new fx([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:m(this,yr)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:m(this,xa),methodOfCreation:m(this,Zb)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var i;sn.initialize(t,n),Lt._defaultColor||(Lt._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Nt.HIGHLIGHT_COLOR:Lt._defaultColor=n;break;case Nt.HIGHLIGHT_THICKNESS:Lt._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return m(this,rp)}updateParams(t,n){switch(t){case Nt.HIGHLIGHT_COLOR:$(this,mt,R8).call(this,n);break;case Nt.HIGHLIGHT_THICKNESS:$(this,mt,j8).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Nt.HIGHLIGHT_COLOR,Lt._defaultColor],[Nt.HIGHLIGHT_THICKNESS,Lt._defaultThickness]]}get propertiesToUpdate(){return[[Nt.HIGHLIGHT_COLOR,this.color||Lt._defaultColor],[Nt.HIGHLIGHT_THICKNESS,m(this,xa)||Lt._defaultThickness],[Nt.HIGHLIGHT_FREE,m(this,yr)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",L(this,Yb,new gv({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition($(this,mt,rm).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,$(this,mt,rm).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){$(this,mt,I_).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&($(this,mt,mu).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let n=!1;this.parent&&!t?$(this,mt,I_).call(this):t&&($(this,mt,mu).call(this,t),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var a,s,l;const{drawLayer:n}=this.parent;let i;m(this,yr)?(t=(t-this.rotation+360)%360,i=$(a=Lt,wa,Bh).call(a,m(this,ba).box,t)):i=$(s=Lt,wa,Bh).call(s,[this.x,this.y,this.width,this.height],t),n.updateProperties(m(this,Bi),{bbox:i,root:{"data-main-rotation":t}}),n.updateProperties(m(this,Ur),{bbox:$(l=Lt,wa,Bh).call(l,m(this,li).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();m(this,ip)&&(t.setAttribute("aria-label",m(this,ip)),t.setAttribute("role","mark")),m(this,yr)?t.classList.add("free"):this.div.addEventListener("keydown",$(this,mt,I8).bind(this),{signal:this._uiManager._signal});const n=L(this,ud,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=m(this,cd);const[i,a]=this.parentDimensions;return this.setDims(this.width*i,this.height*a),rF(this,m(this,ud),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(m(this,Ur),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(m(this,Ur),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:$(this,mt,X0).call(this,!0);break;case 1:case 3:$(this,mt,X0).call(this,!1);break}}select(){var t;super.select(),m(this,Ur)&&((t=this.parent)==null||t.drawLayer.updateProperties(m(this,Ur),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),m(this,Ur)&&((t=this.parent)==null||t.drawLayer.updateProperties(m(this,Ur),{rootClass:{selected:!1}}),m(this,yr)||$(this,mt,X0).call(this,!1))}get _mustFixPosition(){return!m(this,yr)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(m(this,Bi),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(m(this,Ur),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:i,x:a,y:s}){const{x:l,y:u,width:d,height:h}=i.getBoundingClientRect(),g=new AbortController,b=t.combinedSignal(g),x=k=>{g.abort(),$(this,wa,B8).call(this,t,k)};window.addEventListener("blur",x,{signal:b}),window.addEventListener("pointerup",x,{signal:b}),window.addEventListener("pointerdown",Ln,{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",Ea,{signal:b}),i.addEventListener("pointermove",$(this,wa,L8).bind(this,t),{signal:b}),this._freeHighlight=new j_({x:a,y:s},[l,u,d,h],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,i){var v,w,D,_;let a=null;if(t instanceof p8){const{data:{quadPoints:A,rect:N,rotation:E,id:C,color:j,opacity:M,popupRef:O,contentsObj:F},parent:{page:{pageNumber:G}}}=t;a=t={annotationType:pt.HIGHLIGHT,color:Array.from(j),opacity:M,quadPoints:A,boxes:null,pageIndex:G-1,rect:N.slice(0),rotation:E,annotationElementId:C,id:C,deleted:!1,popupRef:O,comment:(F==null?void 0:F.str)||null}}else if(t instanceof vS){const{data:{inkLists:A,rect:N,rotation:E,id:C,color:j,borderStyle:{rawWidth:M},popupRef:O,contentsObj:F},parent:{page:{pageNumber:G}}}=t;a=t={annotationType:pt.HIGHLIGHT,color:Array.from(j),thickness:M,inkLists:A,boxes:null,pageIndex:G-1,rect:N.slice(0),rotation:E,annotationElementId:C,id:C,deleted:!1,popupRef:O,comment:(F==null?void 0:F.str)||null}}const{color:s,quadPoints:l,inkLists:u,opacity:d}=t,h=await super.deserialize(t,n,i);h.color=tt.makeHexColor(...s),L(h,Ho,d||1),u&&L(h,xa,t.thickness),h._initialData=a,t.comment&&h.setCommentData(t.comment);const[g,b]=h.pageDimensions,[x,k]=h.pageTranslation;if(l){const A=L(h,Wo,[]);for(let N=0;N<l.length;N+=8)A.push({x:(l[N]-x)/g,y:1-(l[N+1]-k)/b,width:(l[N+2]-l[N])/g,height:(l[N+1]-l[N+5])/b});$(v=h,mt,F_).call(v),$(w=h,mt,mu).call(w),h.rotate(h.rotation)}else if(u){L(h,yr,!0);const A=u[0],N={x:A[0]-x,y:b-(A[1]-k)},E=new j_(N,[0,0,g,b],1,m(h,xa)/2,!0,.001);for(let M=0,O=A.length;M<O;M+=2)N.x=A[M]-x,N.y=b-(A[M+1]-k),E.add(N);const{id:C,clipPathId:j}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);$(D=h,mt,V0).call(D,{highlightOutlines:E.getOutlines(),highlightId:C,clipPathId:j}),$(_=h,mt,mu).call(_),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getPDFRect(),i=sn._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),a={annotationType:pt.HIGHLIGHT,color:i,opacity:m(this,Ho),thickness:m(this,xa),quadPoints:$(this,mt,O8).call(this),outlines:$(this,mt,M8).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:$(this,mt,rm).call(this),structTreeParentId:this._structTreeParentId};return this.addComment(a),this.annotationElementId&&!$(this,mt,P8).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const n={rect:this.getPDFRect()};return this.hasEditedComment&&(n.popup=this.comment),t.updateEdited(n),null}static canCreateNewEmptyEditor(){return!1}};np=new WeakMap,$b=new WeakMap,Wo=new WeakMap,cd=new WeakMap,Yb=new WeakMap,li=new WeakMap,Kb=new WeakMap,Qb=new WeakMap,ud=new WeakMap,ba=new WeakMap,Bi=new WeakMap,yr=new WeakMap,rp=new WeakMap,Ho=new WeakMap,Ur=new WeakMap,ip=new WeakMap,xa=new WeakMap,Zb=new WeakMap,mt=new WeakSet,F_=function(){const t=new U_(m(this,Wo),.001);L(this,ba,t.getOutlines()),[this.x,this.y,this.width,this.height]=m(this,ba).box;const n=new U_(m(this,Wo),.0025,.001,this._uiManager.direction==="ltr");L(this,li,n.getOutlines());const{lastPoint:i}=m(this,li);L(this,rp,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},V0=function({highlightOutlines:t,highlightId:n,clipPathId:i}){var g,b;if(L(this,ba,t),L(this,li,t.getNewOutline(m(this,xa)/2+1.5,.0025)),n>=0)L(this,Bi,n),L(this,cd,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),L(this,Ur,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:m(this,li).box,path:{d:m(this,li).toSVGPath()}},!0));else if(this.parent){const x=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(m(this,Bi),{bbox:$(g=Lt,wa,Bh).call(g,m(this,ba).box,(x-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(m(this,Ur),{bbox:$(b=Lt,wa,Bh).call(b,m(this,li).box,x),path:{d:m(this,li).toSVGPath()}})}const[s,l,u,d]=t.box;switch(this.rotation){case 0:this.x=s,this.y=l,this.width=u,this.height=d;break;case 90:{const[x,k]=this.parentDimensions;this.x=l,this.y=1-s,this.width=u*k/x,this.height=d*x/k;break}case 180:this.x=1-s,this.y=1-l,this.width=u,this.height=d;break;case 270:{const[x,k]=this.parentDimensions;this.x=1-l,this.y=s,this.width=u*k/x,this.height=d*x/k;break}}const{lastPoint:h}=m(this,li);L(this,rp,[(h[0]-s)/u,(h[1]-l)/d])},R8=function(t){const n=(s,l)=>{var u,d;this.color=s,L(this,Ho,l),(u=this.parent)==null||u.drawLayer.updateProperties(m(this,Bi),{root:{fill:s,"fill-opacity":l}}),(d=m(this,Yb))==null||d.updateColor(s)},i=this.color,a=m(this,Ho);this.addCommands({cmd:n.bind(this,t,Lt._defaultOpacity),undo:n.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},j8=function(t){const n=m(this,xa),i=a=>{L(this,xa,a),$(this,mt,F8).call(this,a)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},F8=function(t){if(!m(this,yr))return;$(this,mt,V0).call(this,{highlightOutlines:m(this,ba).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)},I_=function(){m(this,Bi)===null||!this.parent||(this.parent.drawLayer.remove(m(this,Bi)),L(this,Bi,null),this.parent.drawLayer.remove(m(this,Ur)),L(this,Ur,null))},mu=function(t=this.parent){m(this,Bi)===null&&({id:Hn(this,Bi)._,clipPathId:Hn(this,cd)._}=t.drawLayer.draw({bbox:m(this,ba).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":m(this,Ho)},rootClass:{highlight:!0,free:m(this,yr)},path:{d:m(this,ba).toSVGPath()}},!1,!0),L(this,Ur,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:m(this,yr)},bbox:m(this,li).box,path:{d:m(this,li).toSVGPath()}},m(this,yr))),m(this,ud)&&(m(this,ud).style.clipPath=m(this,cd)))},wa=new WeakSet,Bh=function([t,n,i,a],s){switch(s){case 90:return[1-n-a,t,a,i];case 180:return[1-t-i,1-n-a,i,a];case 270:return[n,1-t-i,a,i]}return[t,n,i,a]},I8=function(t){Lt._keyboardManager.exec(this,t)},X0=function(t){if(!m(this,np))return;const n=window.getSelection();t?n.setPosition(m(this,np),m(this,$b)):n.setPosition(m(this,Kb),m(this,Qb))},rm=function(){return m(this,yr)?this.rotation:0},O8=function(){if(m(this,yr))return null;const[t,n]=this.pageDimensions,[i,a]=this.pageTranslation,s=m(this,Wo),l=new Float32Array(s.length*8);let u=0;for(const{x:d,y:h,width:g,height:b}of s){const x=d*t+i,k=(1-h)*n+a;l[u]=l[u+4]=x,l[u+1]=l[u+3]=k,l[u+2]=l[u+6]=x+g*t,l[u+5]=l[u+7]=k-b*n,u+=8}return l},M8=function(t){return m(this,ba).serialize(t,$(this,mt,rm).call(this))},L8=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},B8=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},P8=function(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((i,a)=>i!==n[a])},V(Lt,wa),We(Lt,"_defaultColor",null),We(Lt,"_defaultOpacity",1),We(Lt,"_defaultThickness",12),We(Lt,"_type","highlight"),We(Lt,"_editorType",pt.HIGHLIGHT),We(Lt,"_freeHighlightId",-1),We(Lt,"_freeHighlight",null),We(Lt,"_freeHighlightClipId","");let yv=Lt;var dd;class z8{constructor(){V(this,dd,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){m(this,dd)[e]=t}toSVGProperties(){const e=m(this,dd);return L(this,dd,Object.create(null)),{root:e}}reset(){L(this,dd,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){en("Not implemented")}}dd=new WeakMap;var Pi,ap,sr,hd,fd,bc,xc,yc,pd,jt,O_,M_,L_,im,W8,G0,am,Ph;const et=class et extends sn{constructor(t){super(t);V(this,jt);V(this,Pi,null);V(this,ap);We(this,"_colorPicker",null);We(this,"_drawId",null);L(this,ap,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&($(this,jt,O_).call(this,t),$(this,jt,im).call(this))}static _mergeSVGProperties(t,n){const i=new Set(Object.keys(t));for(const[a,s]of Object.entries(n))i.has(a)?Object.assign(t[a],s):t[a]=s;return t}static getDefaultDrawingOptions(t){en("Not implemented")}static get typesMap(){en("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(m(et,sr).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)t.push([i,n[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[i,a]of this.constructor.typesMap)t.push([i,n[a]]);return t}_updateProperty(t,n,i){const a=this._drawingOptions,s=a[n],l=u=>{var h,g;a.updateProperty(n,u);const d=m(this,Pi).updateProperty(n,u);d&&$(this,jt,am).call(this,d),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&((g=this._colorPicker)==null||g.update(u))};this.addCommands({cmd:l.bind(this,i),undo:l.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,et._mergeSVGProperties(m(this,Pi).getPathResizingSVGProperties($(this,jt,G0).call(this)),{bbox:$(this,jt,Ph).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,et._mergeSVGProperties(m(this,Pi).getPathResizedSVGProperties($(this,jt,G0).call(this)),{bbox:$(this,jt,Ph).call(this)}))}_onTranslating(t,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:$(this,jt,Ph).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,et._mergeSVGProperties(m(this,Pi).getPathTranslatedSVGProperties($(this,jt,G0).call(this),this.parentDimensions),{bbox:$(this,jt,Ph).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,m(this,ap)&&(L(this,ap,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){$(this,jt,L_).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&($(this,jt,im).call(this),$(this,jt,am).call(this,m(this,Pi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),$(this,jt,L_).call(this)):t&&(this._uiManager.addShouldRescale(this),$(this,jt,im).call(this,t),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,et._mergeSVGProperties({bbox:$(this,jt,Ph).call(this)},m(this,Pi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&$(this,jt,am).call(this,m(this,Pi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal";const[s,l]=this.parentDimensions;return this.setDims(this.width*s,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),i}static createDrawerInstance(t,n,i,a,s){en("Not implemented")}static startDrawing(t,n,i,a){var w;const{target:s,offsetX:l,offsetY:u,pointerId:d,pointerType:h}=a;if(m(et,xc)&&m(et,xc)!==h)return;const{viewport:{rotation:g}}=t,{width:b,height:x}=s.getBoundingClientRect(),k=L(et,hd,new AbortController),v=t.combinedSignal(k);if(m(et,bc)||L(et,bc,d),m(et,xc)??L(et,xc,h),window.addEventListener("pointerup",D=>{var _;m(et,bc)===D.pointerId?this._endDraw(D):(_=m(et,yc))==null||_.delete(D.pointerId)},{signal:v}),window.addEventListener("pointercancel",D=>{var _;m(et,bc)===D.pointerId?this._currentParent.endDrawingSession():(_=m(et,yc))==null||_.delete(D.pointerId)},{signal:v}),window.addEventListener("pointerdown",D=>{m(et,xc)===D.pointerType&&((m(et,yc)||L(et,yc,new Set)).add(D.pointerId),m(et,sr).isCancellable()&&(m(et,sr).removeLastElement(),m(et,sr).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Ea,{signal:v}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),s.addEventListener("touchmove",D=>{D.timeStamp===m(et,pd)&&Ln(D)},{signal:v}),t.toggleDrawing(),(w=n._editorUndoBar)==null||w.hide(),m(et,sr)){t.drawLayer.updateProperties(this._currentDrawId,m(et,sr).startNew(l,u,b,x,g));return}n.updateUIForDefaultProperties(this),L(et,sr,this.createDrawerInstance(l,u,b,x,g)),L(et,fd,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(m(et,fd).toSVGProperties(),m(et,sr).defaultSVGProperties),!0,!1)}static _drawMove(t){var s;if(L(et,pd,-1),!m(et,sr))return;const{offsetX:n,offsetY:i,pointerId:a}=t;if(m(et,bc)===a){if(((s=m(et,yc))==null?void 0:s.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,m(et,sr).add(n,i)),L(et,pd,t.timeStamp),Ln(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,L(et,sr,null),L(et,fd,null),L(et,xc,null),L(et,pd,NaN)),m(et,hd)&&(m(et,hd).abort(),L(et,hd,null),L(et,bc,NaN),L(et,yc,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,m(et,sr).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=m(et,sr),a=this._currentDrawId,s=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(a,i.setLastElement(s))},undo:()=>{n.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:Nt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Nt.DRAW_STEP),!m(et,sr).isEmpty()){const{pageDimensions:[i,a],scale:s}=n,l=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:m(et,sr).getOutlines(i*s,a*s,s,this._INNER_MARGIN),drawingOptions:m(et,fd),mustBeCommitted:!t});return this._cleanup(!0),l}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,i,a,s,l){en("Not implemented")}static async deserialize(t,n,i){var g,b;const{rawDims:{pageWidth:a,pageHeight:s,pageX:l,pageY:u}}=n.viewport,d=this.deserializeDraw(l,u,a,s,this._INNER_MARGIN,t),h=await super.deserialize(t,n,i);return h.createDrawingOptions(t),$(g=h,jt,O_).call(g,{drawOutlines:d}),$(b=h,jt,im).call(b),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[n,i]=this.pageTranslation,[a,s]=this.pageDimensions;return m(this,Pi).serialize([n,i,a,s],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Pi=new WeakMap,ap=new WeakMap,sr=new WeakMap,hd=new WeakMap,fd=new WeakMap,bc=new WeakMap,xc=new WeakMap,yc=new WeakMap,pd=new WeakMap,jt=new WeakSet,O_=function({drawOutlines:t,drawId:n,drawingOptions:i}){L(this,Pi,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=$(this,jt,M_).call(this,t,this.parent),$(this,jt,am).call(this,t.box)},M_=function(t,n){const{id:i}=n.drawLayer.draw(et._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},L_=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},im=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=$(this,jt,M_).call(this,m(this,Pi),t)}},W8=function([t,n,i,a]){const{parentDimensions:[s,l],rotation:u}=this;switch(u){case 90:return[n,1-t,i*(l/s),a*(s/l)];case 180:return[1-t,1-n,i,a];case 270:return[1-n,t,i*(l/s),a*(s/l)];default:return[t,n,i,a]}},G0=function(){const{x:t,y:n,width:i,height:a,parentDimensions:[s,l],rotation:u}=this;switch(u){case 90:return[1-n,t,i*(s/l),a*(l/s)];case 180:return[1-t,1-n,i,a];case 270:return[n,1-t,i*(s/l),a*(l/s)];default:return[t,n,i,a]}},am=function(t){if([this.x,this.y,this.width,this.height]=$(this,jt,W8).call(this,t),this.div){this.fixAndSetPosition();const[n,i]=this.parentDimensions;this.setDims(this.width*n,this.height*i)}this._onResized()},Ph=function(){const{x:t,y:n,width:i,height:a,rotation:s,parentRotation:l,parentDimensions:[u,d]}=this;switch((s*4+l)/90){case 1:return[1-n-a,t,a,i];case 2:return[1-t-i,1-n-a,i,a];case 3:return[n,1-t-i,a,i];case 4:return[t,n-i*(u/d),a*(d/u),i*(u/d)];case 5:return[1-n,t,i*(u/d),a*(d/u)];case 6:return[1-t-a*(d/u),1-n,a*(d/u),i*(u/d)];case 7:return[n-i*(u/d),1-t-a*(d/u),i*(u/d),a*(d/u)];case 8:return[t-i,n-a,i,a];case 9:return[1-n,t-i,a,i];case 10:return[1-t,1-n,i,a];case 11:return[n-a,1-t,a,i];case 12:return[t-a*(d/u),n,a*(d/u),i*(u/d)];case 13:return[1-n-i*(u/d),t-a*(d/u),i*(u/d),a*(d/u)];case 14:return[1-t,1-n-i*(u/d),a*(d/u),i*(u/d)];case 15:return[n,1-t,i*(u/d),a*(d/u)];default:return[t,n,i,a]}},We(et,"_currentDrawId",-1),We(et,"_currentParent",null),V(et,sr,null),V(et,hd,null),V(et,fd,null),V(et,bc,NaN),V(et,xc,null),V(et,yc,null),V(et,pd,NaN),We(et,"_INNER_MARGIN",3);let vv=et;var Es,or,lr,gd,sp,Wr,vr,ya,md,bd,xd,op,$0;class cW{constructor(e,t,n,i,a,s){V(this,op);V(this,Es,new Float64Array(6));V(this,or);V(this,lr);V(this,gd);V(this,sp);V(this,Wr);V(this,vr,"");V(this,ya,0);V(this,md,new gx);V(this,bd);V(this,xd);L(this,bd,n),L(this,xd,i),L(this,gd,a),L(this,sp,s),[e,t]=$(this,op,$0).call(this,e,t);const l=L(this,or,[NaN,NaN,NaN,NaN,e,t]);L(this,Wr,[e,t]),L(this,lr,[{line:l,points:m(this,Wr)}]),m(this,Es).set(l,0)}updateProperty(e,t){e==="stroke-width"&&L(this,sp,t)}isEmpty(){return!m(this,lr)||m(this,lr).length===0}isCancellable(){return m(this,Wr).length<=10}add(e,t){[e,t]=$(this,op,$0).call(this,e,t);const[n,i,a,s]=m(this,Es).subarray(2,6),l=e-a,u=t-s;return Math.hypot(m(this,bd)*l,m(this,xd)*u)<=2?null:(m(this,Wr).push(e,t),isNaN(n)?(m(this,Es).set([a,s,e,t],2),m(this,or).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(m(this,Es)[0])&&m(this,or).splice(6,6),m(this,Es).set([n,i,a,s,e,t],0),m(this,or).push(...Je.createBezierPoints(n,i,a,s,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(m(this,Wr).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,a){L(this,bd,n),L(this,xd,i),L(this,gd,a),[e,t]=$(this,op,$0).call(this,e,t);const s=L(this,or,[NaN,NaN,NaN,NaN,e,t]);L(this,Wr,[e,t]);const l=m(this,lr).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),m(this,lr).push({line:s,points:m(this,Wr)}),m(this,Es).set(s,0),L(this,ya,0),this.toSVGPath(),null}getLastElement(){return m(this,lr).at(-1)}setLastElement(e){return m(this,lr)?(m(this,lr).push(e),L(this,or,e.line),L(this,Wr,e.points),L(this,ya,0),{path:{d:this.toSVGPath()}}):m(this,md).setLastElement(e)}removeLastElement(){if(!m(this,lr))return m(this,md).removeLastElement();m(this,lr).pop(),L(this,vr,"");for(let e=0,t=m(this,lr).length;e<t;e++){const{line:n,points:i}=m(this,lr)[e];L(this,or,n),L(this,Wr,i),L(this,ya,0),this.toSVGPath()}return{path:{d:m(this,vr)}}}toSVGPath(){const e=Je.svgRound(m(this,or)[4]),t=Je.svgRound(m(this,or)[5]);if(m(this,Wr).length===2)return L(this,vr,`${m(this,vr)} M ${e} ${t} Z`),m(this,vr);if(m(this,Wr).length<=6){const i=m(this,vr).lastIndexOf("M");L(this,vr,`${m(this,vr).slice(0,i)} M ${e} ${t}`),L(this,ya,6)}if(m(this,Wr).length===4){const i=Je.svgRound(m(this,or)[10]),a=Je.svgRound(m(this,or)[11]);return L(this,vr,`${m(this,vr)} L ${i} ${a}`),L(this,ya,12),m(this,vr)}const n=[];m(this,ya)===0&&(n.push(`M ${e} ${t}`),L(this,ya,6));for(let i=m(this,ya),a=m(this,or).length;i<a;i+=6){const[s,l,u,d,h,g]=m(this,or).slice(i,i+6).map(Je.svgRound);n.push(`C${s} ${l} ${u} ${d} ${h} ${g}`)}return L(this,vr,m(this,vr)+n.join(" ")),L(this,ya,m(this,or).length),m(this,vr)}getOutlines(e,t,n,i){const a=m(this,lr).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),m(this,md).build(m(this,lr),e,t,n,m(this,gd),m(this,sp),i),L(this,Es,null),L(this,or,null),L(this,lr,null),L(this,vr,null),m(this,md)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Es=new WeakMap,or=new WeakMap,lr=new WeakMap,gd=new WeakMap,sp=new WeakMap,Wr=new WeakMap,vr=new WeakMap,ya=new WeakMap,md=new WeakMap,bd=new WeakMap,xd=new WeakMap,op=new WeakSet,$0=function(e,t){return Je._normalizePoint(e,t,m(this,bd),m(this,xd),m(this,gd))};var Hr,Jb,ex,zi,Ts,Cs,lp,cp,yd,kr,so,H8,q8,V8;class gx extends Je{constructor(){super(...arguments);V(this,kr);V(this,Hr);V(this,Jb,0);V(this,ex);V(this,zi);V(this,Ts);V(this,Cs);V(this,lp);V(this,cp);V(this,yd)}build(t,n,i,a,s,l,u){L(this,Ts,n),L(this,Cs,i),L(this,lp,a),L(this,cp,s),L(this,yd,l),L(this,ex,u??0),L(this,zi,t),$(this,kr,q8).call(this)}get thickness(){return m(this,yd)}setLastElement(t){return m(this,zi).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return m(this,zi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of m(this,zi)){if(t.push(`M${Je.svgRound(n[4])} ${Je.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${Je.svgRound(n[10])} ${Je.svgRound(n[11])}`);continue}for(let i=6,a=n.length;i<a;i+=6){const[s,l,u,d,h,g]=n.subarray(i,i+6).map(Je.svgRound);t.push(`C${s} ${l} ${u} ${d} ${h} ${g}`)}}return t.join("")}serialize([t,n,i,a],s){const l=[],u=[],[d,h,g,b]=$(this,kr,H8).call(this);let x,k,v,w,D,_,A,N,E;switch(m(this,cp)){case 0:E=Je._rescale,x=t,k=n+a,v=i,w=-a,D=t+d*i,_=n+(1-h-b)*a,A=t+(d+g)*i,N=n+(1-h)*a;break;case 90:E=Je._rescaleAndSwap,x=t,k=n,v=i,w=a,D=t+h*i,_=n+d*a,A=t+(h+b)*i,N=n+(d+g)*a;break;case 180:E=Je._rescale,x=t+i,k=n,v=-i,w=a,D=t+(1-d-g)*i,_=n+h*a,A=t+(1-d)*i,N=n+(h+b)*a;break;case 270:E=Je._rescaleAndSwap,x=t+i,k=n+a,v=-i,w=-a,D=t+(1-h-b)*i,_=n+(1-d-g)*a,A=t+(1-h)*i,N=n+(1-d)*a;break}for(const{line:C,points:j}of m(this,zi))l.push(E(C,x,k,v,w,s?new Array(C.length):null)),u.push(E(j,x,k,v,w,s?new Array(j.length):null));return{lines:l,points:u,rect:[D,_,A,N]}}static deserialize(t,n,i,a,s,{paths:{lines:l,points:u},rotation:d,thickness:h}){const g=[];let b,x,k,v,w;switch(d){case 0:w=Je._rescale,b=-t/i,x=n/a+1,k=1/i,v=-1/a;break;case 90:w=Je._rescaleAndSwap,b=-n/a,x=-t/i,k=1/a,v=1/i;break;case 180:w=Je._rescale,b=t/i+1,x=-n/a,k=-1/i,v=1/a;break;case 270:w=Je._rescaleAndSwap,b=n/a+1,x=t/i+1,k=-1/a,v=-1/i;break}if(!l){l=[];for(const _ of u){const A=_.length;if(A===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1]]));continue}if(A===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1],NaN,NaN,NaN,NaN,_[2],_[3]]));continue}const N=new Float32Array(3*(A-2));l.push(N);let[E,C,j,M]=_.subarray(0,4);N.set([NaN,NaN,NaN,NaN,E,C],0);for(let O=4;O<A;O+=2){const F=_[O],G=_[O+1];N.set(Je.createBezierPoints(E,C,j,M,F,G),(O-2)*3),[E,C,j,M]=[j,M,F,G]}}}for(let _=0,A=l.length;_<A;_++)g.push({line:w(l[_].map(N=>N??NaN),b,x,k,v),points:w(u[_].map(N=>N??NaN),b,x,k,v)});const D=new this.prototype.constructor;return D.build(g,i,a,1,d,h,s),D}get box(){return m(this,Hr)}updateProperty(t,n){return t==="stroke-width"?$(this,kr,V8).call(this,n):null}updateParentDimensions([t,n],i){const[a,s]=$(this,kr,so).call(this);L(this,Ts,t),L(this,Cs,n),L(this,lp,i);const[l,u]=$(this,kr,so).call(this),d=l-a,h=u-s,g=m(this,Hr);return g[0]-=d,g[1]-=h,g[2]+=2*d,g[3]+=2*h,g}updateRotation(t){return L(this,Jb,t),{path:{transform:this.rotationTransform}}}get viewBox(){return m(this,Hr).map(Je.svgRound).join(" ")}get defaultProperties(){const[t,n]=m(this,Hr);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Je.svgRound(t)} ${Je.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=m(this,Hr);let i=0,a=0,s=0,l=0,u=0,d=0;switch(m(this,Jb)){case 90:a=n/t,s=-t/n,u=t;break;case 180:i=-1,l=-1,u=t,d=n;break;case 270:a=-n/t,s=t/n,d=n;break;default:return""}return`matrix(${i} ${a} ${s} ${l} ${Je.svgRound(u)} ${Je.svgRound(d)})`}getPathResizingSVGProperties([t,n,i,a]){const[s,l]=$(this,kr,so).call(this),[u,d,h,g]=m(this,Hr);if(Math.abs(h-s)<=Je.PRECISION||Math.abs(g-l)<=Je.PRECISION){const w=t+i/2-(u+h/2),D=n+a/2-(d+g/2);return{path:{"transform-origin":`${Je.svgRound(t)} ${Je.svgRound(n)}`,transform:`${this.rotationTransform} translate(${w} ${D})`}}}const b=(i-2*s)/(h-2*s),x=(a-2*l)/(g-2*l),k=h/i,v=g/a;return{path:{"transform-origin":`${Je.svgRound(u)} ${Je.svgRound(d)}`,transform:`${this.rotationTransform} scale(${k} ${v}) translate(${Je.svgRound(s)} ${Je.svgRound(l)}) scale(${b} ${x}) translate(${Je.svgRound(-s)} ${Je.svgRound(-l)})`}}}getPathResizedSVGProperties([t,n,i,a]){const[s,l]=$(this,kr,so).call(this),u=m(this,Hr),[d,h,g,b]=u;if(u[0]=t,u[1]=n,u[2]=i,u[3]=a,Math.abs(g-s)<=Je.PRECISION||Math.abs(b-l)<=Je.PRECISION){const D=t+i/2-(d+g/2),_=n+a/2-(h+b/2);for(const{line:A,points:N}of m(this,zi))Je._translate(A,D,_,A),Je._translate(N,D,_,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Je.svgRound(t)} ${Je.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const x=(i-2*s)/(g-2*s),k=(a-2*l)/(b-2*l),v=-x*(d+s)+t+s,w=-k*(h+l)+n+l;if(x!==1||k!==1||v!==0||w!==0)for(const{line:D,points:_}of m(this,zi))Je._rescale(D,v,w,x,k,D),Je._rescale(_,v,w,x,k,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Je.svgRound(t)} ${Je.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],i){const[a,s]=i,l=m(this,Hr),u=t-l[0],d=n-l[1];if(m(this,Ts)===a&&m(this,Cs)===s)for(const{line:h,points:g}of m(this,zi))Je._translate(h,u,d,h),Je._translate(g,u,d,g);else{const h=m(this,Ts)/a,g=m(this,Cs)/s;L(this,Ts,a),L(this,Cs,s);for(const{line:b,points:x}of m(this,zi))Je._rescale(b,u,d,h,g,b),Je._rescale(x,u,d,h,g,x);l[2]*=h,l[3]*=g}return l[0]=t,l[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Je.svgRound(t)} ${Je.svgRound(n)}`}}}get defaultSVGProperties(){const t=m(this,Hr);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Je.svgRound(t[0])} ${Je.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Hr=new WeakMap,Jb=new WeakMap,ex=new WeakMap,zi=new WeakMap,Ts=new WeakMap,Cs=new WeakMap,lp=new WeakMap,cp=new WeakMap,yd=new WeakMap,kr=new WeakSet,so=function(t=m(this,yd)){const n=m(this,ex)+t/2*m(this,lp);return m(this,cp)%180===0?[n/m(this,Ts),n/m(this,Cs)]:[n/m(this,Cs),n/m(this,Ts)]},H8=function(){const[t,n,i,a]=m(this,Hr),[s,l]=$(this,kr,so).call(this,0);return[t+s,n+l,i-2*s,a-2*l]},q8=function(){const t=L(this,Hr,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of m(this,zi)){if(a.length<=12){for(let u=4,d=a.length;u<d;u+=6)tt.pointBoundingBox(a[u],a[u+1],t);continue}let s=a[4],l=a[5];for(let u=6,d=a.length;u<d;u+=6){const[h,g,b,x,k,v]=a.subarray(u,u+6);tt.bezierBoundingBox(s,l,h,g,b,x,k,v,t),s=k,l=v}}const[n,i]=$(this,kr,so).call(this);t[0]=Xr(t[0]-n,0,1),t[1]=Xr(t[1]-i,0,1),t[2]=Xr(t[2]+n,0,1),t[3]=Xr(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},V8=function(t){const[n,i]=$(this,kr,so).call(this);L(this,yd,t);const[a,s]=$(this,kr,so).call(this),[l,u]=[a-n,s-i],d=m(this,Hr);return d[0]-=l,d[1]-=u,d[2]+=2*l,d[3]+=2*u,d};class T1 extends z8{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:sn._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new T1(this._viewParameters);return e.updateAll(this),e}}var Hv,X8;const Gh=class Gh extends vv{constructor(t){super({...t,name:"inkEditor"});V(this,Hv);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){sn.initialize(t,n),this._defaultDrawingOptions=new T1(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Dt(this,"typesMap",new Map([[Nt.INK_THICKNESS,"stroke-width"],[Nt.INK_COLOR,"stroke"],[Nt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,i,a,s){return new cW(t,n,i,a,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,i,a,s,l){return gx.deserialize(t,n,i,a,s,l)}static async deserialize(t,n,i){let a=null;if(t instanceof vS){const{data:{inkLists:l,rect:u,rotation:d,id:h,color:g,opacity:b,borderStyle:{rawWidth:x},popupRef:k,contentsObj:v},parent:{page:{pageNumber:w}}}=t;a=t={annotationType:pt.INK,color:Array.from(g),thickness:x,opacity:b,paths:{points:l},boxes:null,pageIndex:w-1,rect:u.slice(0),rotation:d,annotationElementId:h,id:h,deleted:!1,popupRef:k,comment:(v==null?void 0:v.str)||null}}const s=await super.deserialize(t,n,i);return s._initialData=a,t.comment&&s.setCommentData(t.comment),s}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new mv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Nt.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:i}){this._drawingOptions=Gh.getDefaultDrawingOptions({stroke:tt.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i,rect:a}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":l,"stroke-width":u}}=this,d={annotationType:pt.INK,color:sn._colorManager.convert(s),opacity:l,thickness:u,paths:{lines:n,points:i},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(d),t?(d.isCopy=!0,d):this.annotationElementId&&!$(this,Hv,X8).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:n,rect:i}=this.serializeDraw(!1),a={rect:i,thickness:this._drawingOptions["stroke-width"],points:n};return this.hasEditedComment&&(a.popup=this.comment),t.updateEdited(a),null}};Hv=new WeakSet,X8=function(t){const{color:n,thickness:i,opacity:a,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,u)=>l!==n[u])||t.thickness!==i||t.opacity!==a||t.pageIndex!==s},We(Gh,"_type","ink"),We(Gh,"_editorType",pt.INK),We(Gh,"_defaultDrawingOptions",null);let B_=Gh;class P_ extends gx{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Qy=8,Mg=3;var vd,zt,z_,Va,G8,$8,W_,Y0,Y8,K8,Q8,H_,q_,Z8;class Yo{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:i},a,s,l,u){let d=new OffscreenCanvas(1,1),h=d.getContext("2d",{alpha:!1});const g=200,b=h.font=`${n} ${i} ${g}px ${t}`,{actualBoundingBoxLeft:x,actualBoundingBoxRight:k,actualBoundingBoxAscent:v,actualBoundingBoxDescent:w,fontBoundingBoxAscent:D,fontBoundingBoxDescent:_,width:A}=h.measureText(e),N=1.5,E=Math.ceil(Math.max(Math.abs(x)+Math.abs(k)||0,A)*N),C=Math.ceil(Math.max(Math.abs(v)+Math.abs(w)||g,Math.abs(D)+Math.abs(_)||g)*N);d=new OffscreenCanvas(E,C),h=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=b,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,E,C),h.fillStyle="black",h.fillText(e,E*(N-1)/2,C*(3-N)/2);const j=$(this,zt,H_).call(this,h.getImageData(0,0,E,C).data),M=$(this,zt,Q8).call(this,j),O=$(this,zt,q_).call(this,M),F=$(this,zt,W_).call(this,j,E,C,O);return this.processDrawnLines({lines:{curves:F,width:E,height:C},pageWidth:a,pageHeight:s,rotation:l,innerMargin:u,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,a){const[s,l,u]=$(this,zt,Z8).call(this,e),[d,h]=$(this,zt,K8).call(this,s,l,u,Math.hypot(l,u)*m(this,vd).sigmaSFactor,m(this,vd).sigmaR,m(this,vd).kernelSize),g=$(this,zt,q_).call(this,h),b=$(this,zt,W_).call(this,d,l,u,g);return this.processDrawnLines({lines:{curves:b,width:l,height:u},pageWidth:t,pageHeight:n,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:a,mustSmooth:s,areContours:l}){i%180!==0&&([t,n]=[n,t]);const{curves:u,width:d,height:h}=e,g=e.thickness??0,b=[],x=Math.min(t/d,n/h),k=x/t,v=x/n,w=[];for(const{points:_}of u){const A=s?$(this,zt,Y8).call(this,_):_;if(!A)continue;w.push(A);const N=A.length,E=new Float32Array(N),C=new Float32Array(3*(N===2?2:N-2));if(b.push({line:C,points:E}),N===2){E[0]=A[0]*k,E[1]=A[1]*v,C.set([NaN,NaN,NaN,NaN,E[0],E[1]],0);continue}let[j,M,O,F]=A;j*=k,M*=v,O*=k,F*=v,E.set([j,M,O,F],0),C.set([NaN,NaN,NaN,NaN,j,M],0);for(let G=4;G<N;G+=2){const R=E[G]=A[G]*k,W=E[G+1]=A[G+1]*v;C.set(Je.createBezierPoints(j,M,O,F,R,W),(G-2)*3),[j,M,O,F]=[O,F,R,W]}}if(b.length===0)return null;const D=l?new P_:new gx;return D.build(b,t,n,1,i,l?0:g,a),{outline:D,newCurves:w,areContours:l,thickness:g,width:d,height:h}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:i,height:a}){let s=1/0,l=-1/0,u=0;for(const A of e){u+=A.length;for(let N=2,E=A.length;N<E;N++){const C=A[N]-A[N-2];s=Math.min(s,C),l=Math.max(l,C)}}let d;s>=-128&&l<=127?d=Int8Array:s>=-32768&&l<=32767?d=Int16Array:d=Int32Array;const h=e.length,g=Qy+Mg*h,b=new Uint32Array(g);let x=0;b[x++]=g*Uint32Array.BYTES_PER_ELEMENT+(u-2*h)*d.BYTES_PER_ELEMENT,b[x++]=0,b[x++]=i,b[x++]=a,b[x++]=t?0:1,b[x++]=Math.max(0,Math.floor(n??0)),b[x++]=h,b[x++]=d.BYTES_PER_ELEMENT;for(const A of e)b[x++]=A.length-2,b[x++]=A[0],b[x++]=A[1];const k=new CompressionStream("deflate-raw"),v=k.writable.getWriter();await v.ready,v.write(b);const w=d.prototype.constructor;for(const A of e){const N=new w(A.length-2);for(let E=2,C=A.length;E<C;E++)N[E-2]=A[E]-A[E-2];v.write(N)}v.close();const D=await new Response(k.readable).arrayBuffer(),_=new Uint8Array(D);return Qj(_)}static async decompressSignature(e){try{const t=U7(e),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(t).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let s=null,l=0;for await(const A of n)s||(s=new Uint8Array(new Uint32Array(A.buffer,0,4)[0])),s.set(A,l),l+=A.length;const u=new Uint32Array(s.buffer,0,s.length>>2),d=u[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const h=u[2],g=u[3],b=u[4]===0,x=u[5],k=u[6],v=u[7],w=[],D=(Qy+Mg*k)*Uint32Array.BYTES_PER_ELEMENT;let _;switch(v){case Int8Array.BYTES_PER_ELEMENT:_=new Int8Array(s.buffer,D);break;case Int16Array.BYTES_PER_ELEMENT:_=new Int16Array(s.buffer,D);break;case Int32Array.BYTES_PER_ELEMENT:_=new Int32Array(s.buffer,D);break}l=0;for(let A=0;A<k;A++){const N=u[Mg*A+Qy],E=new Float32Array(N+2);w.push(E);for(let C=0;C<Mg-1;C++)E[C]=u[Mg*A+Qy+C+1];for(let C=0;C<N;C++)E[C+2]=E[C]+_[l++]}return{areContours:b,thickness:x,outlines:w,width:h,height:g}}catch(t){return gt(`decompressSignature: ${t}`),null}}}vd=new WeakMap,zt=new WeakSet,z_=function(e,t,n,i){return n-=e,i-=t,n===0?i>0?0:4:n===1?i+6:2-i},Va=new WeakMap,G8=function(e,t,n,i,a,s,l){const u=$(this,zt,z_).call(this,n,i,a,s);for(let d=0;d<8;d++){const h=(-d+u-l+16)%8,g=m(this,Va)[2*h],b=m(this,Va)[2*h+1];if(e[(n+g)*t+(i+b)]!==0)return h}return-1},$8=function(e,t,n,i,a,s,l){const u=$(this,zt,z_).call(this,n,i,a,s);for(let d=0;d<8;d++){const h=(d+u+l+16)%8,g=m(this,Va)[2*h],b=m(this,Va)[2*h+1];if(e[(n+g)*t+(i+b)]!==0)return h}return-1},W_=function(e,t,n,i){const a=e.length,s=new Int32Array(a);for(let h=0;h<a;h++)s[h]=e[h]<=i?1:0;for(let h=1;h<n-1;h++)s[h*t]=s[h*t+t-1]=0;for(let h=0;h<t;h++)s[h]=s[t*n-1-h]=0;let l=1,u;const d=[];for(let h=1;h<n-1;h++){u=1;for(let g=1;g<t-1;g++){const b=h*t+g,x=s[b];if(x===0)continue;let k=h,v=g;if(x===1&&s[b-1]===0)l+=1,v-=1;else if(x>=1&&s[b+1]===0)l+=1,v+=1,x>1&&(u=x);else{x!==1&&(u=Math.abs(x));continue}const w=[g,h],D=v===g+1,_={isHole:D,points:w,id:l,parent:0};d.push(_);let A;for(const G of d)if(G.id===u){A=G;break}A?A.isHole?_.parent=D?A.parent:u:_.parent=D?u:A.parent:_.parent=D?u:0;const N=$(this,zt,G8).call(this,s,t,h,g,k,v,0);if(N===-1){s[b]=-l,s[b]!==1&&(u=Math.abs(s[b]));continue}let E=m(this,Va)[2*N],C=m(this,Va)[2*N+1];const j=h+E,M=g+C;k=j,v=M;let O=h,F=g;for(;;){const G=$(this,zt,$8).call(this,s,t,O,F,k,v,1);E=m(this,Va)[2*G],C=m(this,Va)[2*G+1];const R=O+E,W=F+C;w.push(W,R);const U=O*t+F;if(s[U+1]===0?s[U]=-l:s[U]===1&&(s[U]=l),R===h&&W===g&&O===j&&F===M){s[b]!==1&&(u=Math.abs(s[b]));break}else k=O,v=F,O=R,F=W}}}return d},Y0=function(e,t,n,i){if(n-t<=4){for(let j=t;j<n-2;j+=2)i.push(e[j],e[j+1]);return}const a=e[t],s=e[t+1],l=e[n-4]-a,u=e[n-3]-s,d=Math.hypot(l,u),h=l/d,g=u/d,b=h*s-g*a,x=u/l,k=1/d,v=Math.atan(x),w=Math.cos(v),D=Math.sin(v),_=k*(Math.abs(w)+Math.abs(D)),A=k*(1-_+_**2),N=Math.max(Math.atan(Math.abs(D+w)*A),Math.atan(Math.abs(D-w)*A));let E=0,C=t;for(let j=t+2;j<n-2;j+=2){const M=Math.abs(b-h*e[j+1]+g*e[j]);M>E&&(C=j,E=M)}E>(d*N)**2?($(this,zt,Y0).call(this,e,t,C+2,i),$(this,zt,Y0).call(this,e,C,n,i)):i.push(a,s)},Y8=function(e){const t=[],n=e.length;return $(this,zt,Y0).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},K8=function(e,t,n,i,a,s){const l=new Float32Array(s**2),u=-2*i**2,d=s>>1;for(let v=0;v<s;v++){const w=(v-d)**2;for(let D=0;D<s;D++)l[v*s+D]=Math.exp((w+(D-d)**2)/u)}const h=new Float32Array(256),g=-2*a**2;for(let v=0;v<256;v++)h[v]=Math.exp(v**2/g);const b=e.length,x=new Uint8Array(b),k=new Uint32Array(256);for(let v=0;v<n;v++)for(let w=0;w<t;w++){const D=v*t+w,_=e[D];let A=0,N=0;for(let C=0;C<s;C++){const j=v+C-d;if(!(j<0||j>=n))for(let M=0;M<s;M++){const O=w+M-d;if(O<0||O>=t)continue;const F=e[j*t+O],G=l[C*s+M]*h[Math.abs(F-_)];A+=F*G,N+=G}}const E=x[D]=Math.round(A/N);k[E]++}return[x,k]},Q8=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},H_=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let i=-1/0,a=1/0;for(let l=0,u=n.length;l<u;l++){const d=n[l]=e[l<<2];i=Math.max(i,d),a=Math.min(a,d)}const s=255/(i-a);for(let l=0,u=n.length;l<u;l++)n[l]=(n[l]-a)*s;return n},q_=function(e){let t,n=-1/0,i=-1/0;const a=e.findIndex(u=>u!==0);let s=a,l=a;for(t=a;t<256;t++){const u=e[t];u>n&&(t-s>i&&(i=t-s,l=t-1),n=u,s=t)}for(t=l-1;t>=0&&!(e[t]>e[t+1]);t--);return t},Z8=function(e){const t=e,{width:n,height:i}=e,{maxDim:a}=m(this,vd);let s=n,l=i;if(n>a||i>a){let b=n,x=i,k=Math.log2(Math.max(n,i)/a);const v=Math.floor(k);k=k===v?v-1:v;for(let D=0;D<k;D++){s=Math.ceil(b/2),l=Math.ceil(x/2);const _=new OffscreenCanvas(s,l);_.getContext("2d").drawImage(e,0,0,b,x,0,0,s,l),b=s,x=l,e!==t&&e.close(),e=_.transferToImageBitmap()}const w=Math.min(a/s,a/l);s=Math.round(s*w),l=Math.round(l*w)}const d=new OffscreenCanvas(s,l).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,s,l),d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,s,l);const h=d.getImageData(0,0,s,l).data;return[$(this,zt,H_).call(this,h),s,l]},V(Yo,zt),V(Yo,vd,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),V(Yo,Va,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class wS extends z8{constructor(){super(),super.updateProperties({fill:sn._defaultLineColor,"stroke-width":0})}clone(){const e=new wS;return e.updateAll(this),e}}class kS extends T1{constructor(e){super(e),super.updateProperties({stroke:sn._defaultLineColor,"stroke-width":1})}clone(){const e=new kS(this._viewParameters);return e.updateAll(this),e}}var vc,Ns,wc,wd;const Si=class Si extends vv{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});V(this,vc,!1);V(this,Ns,null);V(this,wc,null);V(this,wd,null);this._willKeepAspectRatio=!0,L(this,wc,t.signatureData||null),L(this,Ns,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){sn.initialize(t,n),this._defaultDrawingOptions=new wS,this._defaultDrawnSignatureOptions=new kS(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Dt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!m(this,Ns)}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(m(this,wc)){const{lines:a,mustSmooth:s,areContours:l,description:u,uuid:d,heightInPage:h}=m(this,wc),{rawDims:{pageWidth:g,pageHeight:b},rotation:x}=this.parent.viewport,k=Yo.processDrawnLines({lines:a,pageWidth:g,pageHeight:b,rotation:x,innerMargin:Si._INNER_MARGIN,mustSmooth:s,areContours:l});this.addSignature(k,h,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:m(this,Ns)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){L(this,wd,t),this.addEditToolbar()}getUuid(){return m(this,wd)}get description(){return m(this,Ns)}set description(t){L(this,Ns,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:i,width:a,height:s}=m(this,wc),l=Math.max(a,s),u=Yo.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:i,width:a,height:s},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,i,a){const{x:s,y:l}=this,{outline:u}=L(this,wc,t);L(this,vc,u instanceof P_),this.description=i;let d;m(this,vc)?d=Si.getDefaultDrawingOptions():(d=Si._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[h,g]=this.parentDimensions,[,b]=this.pageDimensions;let x=n/b;x=x>=1?.5:x,this.width*=x/this.height,this.width>=1&&(x*=.9/this.width,this.width=.9),this.height=x,this.setDims(h*this.width,g*this.height),this.x=s,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:a}=this.parent.viewport;return Yo.process(t,n,i,a,Si._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:i,pageHeight:a},rotation:s}=this.parent.viewport;return Yo.extractContoursFromText(t,n,i,a,s,Si._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:a}=this.parent.viewport;return Yo.processDrawnLines({lines:t,pageWidth:n,pageHeight:i,rotation:a,innerMargin:Si._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Si.getDefaultDrawingOptions():(this._drawingOptions=Si._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:i,rect:a}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":s}}=this,l={annotationType:pt.SIGNATURE,isSignature:!0,areContours:m(this,vc),color:[0,0,0],thickness:m(this,vc)?0:s,pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(l),t?(l.paths={lines:n,points:i},l.uuid=m(this,wd),l.isCopy=!0):l.lines=n,m(this,Ns)&&(l.accessibilityData={type:"Figure",alt:m(this,Ns)}),l}static deserializeDraw(t,n,i,a,s,l){return l.areContours?P_.deserialize(t,n,i,a,s,l):gx.deserialize(t,n,i,a,s,l)}static async deserialize(t,n,i){var s;const a=await super.deserialize(t,n,i);return L(a,vc,t.areContours),a.description=((s=t.accessibilityData)==null?void 0:s.alt)||"",L(a,wd,t.uuid),a}};vc=new WeakMap,Ns=new WeakMap,wc=new WeakMap,wd=new WeakMap,We(Si,"_type","signature"),We(Si,"_editorType",pt.SIGNATURE),We(Si,"_defaultDrawingOptions",null);let V_=Si;var pn,cr,kc,qo,Dc,up,Vo,kd,Us,Wi,dp,Ft,sm,om,K0,Q0,Z0,G_,J0,J8;class X_ extends sn{constructor(t){super({...t,name:"stampEditor"});V(this,Ft);V(this,pn,null);V(this,cr,null);V(this,kc,null);V(this,qo,null);V(this,Dc,null);V(this,up,"");V(this,Vo,null);V(this,kd,!1);V(this,Us,null);V(this,Wi,!1);V(this,dp,!1);L(this,qo,t.bitmapUrl),L(this,Dc,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){sn.initialize(t,n)}static isHandlingMimeForPasting(t){return LD.includes(t)}static paste(t,n){n.pasteEditor({mode:pt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:s,height:l}=t||this.copyCanvas(null,null,!0).imageData,u=await i.guess({name:"altText",request:{data:a,width:s,height:l,channels:a.length/(s*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),n&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}remove(){var t;m(this,cr)&&(L(this,pn,null),this._uiManager.imageManager.deleteId(m(this,cr)),(t=m(this,Vo))==null||t.remove(),L(this,Vo,null),m(this,Us)&&(clearTimeout(m(this,Us)),L(this,Us,null))),super.remove()}rebuild(){if(!this.parent){m(this,cr)&&$(this,Ft,K0).call(this);return}super.rebuild(),this.div!==null&&(m(this,cr)&&m(this,Vo)===null&&$(this,Ft,K0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(m(this,kc)||m(this,pn)||m(this,qo)||m(this,Dc)||m(this,cr)||m(this,kd))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),m(this,kd)||(m(this,pn)?$(this,Ft,Q0).call(this):$(this,Ft,K0).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(L(this,cr,i),a&&L(this,pn,a),L(this,kd,!1),$(this,Ft,Q0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;m(this,Us)!==null&&clearTimeout(m(this,Us)),L(this,Us,setTimeout(()=>{L(this,Us,null),$(this,Ft,G_).call(this)},200))}copyCanvas(t,n,i=!1){var x;t||(t=224);const{width:a,height:s}=m(this,pn),l=new Is;let u=m(this,pn),d=a,h=s,g=null;if(n){if(a>n||s>n){const M=Math.min(n/a,n/s);d=Math.floor(a*M),h=Math.floor(s*M)}g=document.createElement("canvas");const k=g.width=Math.ceil(d*l.sx),v=g.height=Math.ceil(h*l.sy);m(this,Wi)||(u=$(this,Ft,Z0).call(this,k,v));const w=g.getContext("2d");w.filter=this._uiManager.hcmFilter;let D="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":(x=window.matchMedia)!=null&&x.call(window,"(prefers-color-scheme: dark)").matches&&(D="#8f8f9d",_="#42414d");const A=15,N=A*l.sx,E=A*l.sy,C=new OffscreenCanvas(N*2,E*2),j=C.getContext("2d");j.fillStyle=D,j.fillRect(0,0,N*2,E*2),j.fillStyle=_,j.fillRect(0,0,N,E),j.fillRect(N,E,N,E),w.fillStyle=w.createPattern(C,"repeat"),w.fillRect(0,0,k,v),w.drawImage(u,0,0,u.width,u.height,0,0,k,v)}let b=null;if(i){let k,v;if(l.symmetric&&u.width<t&&u.height<t)k=u.width,v=u.height;else if(u=m(this,pn),a>t||s>t){const _=Math.min(t/a,t/s);k=Math.floor(a*_),v=Math.floor(s*_),m(this,Wi)||(u=$(this,Ft,Z0).call(this,k,v))}const D=new OffscreenCanvas(k,v).getContext("2d",{willReadFrequently:!0});D.drawImage(u,0,0,u.width,u.height,0,0,k,v),b={width:k,height:v,data:D.getImageData(0,0,k,v).data}}return{canvas:g,width:d,height:h,imageData:b}}static async deserialize(t,n,i){var w;let a=null,s=!1;if(t instanceof g8){const{data:{rect:D,rotation:_,id:A,structParent:N,popupRef:E,contentsObj:C},container:j,parent:{page:{pageNumber:M}},canvas:O}=t;let F,G;O?(delete t.canvas,{id:F,bitmap:G}=i.imageManager.getFromCanvas(j.id,O),O.remove()):(s=!0,t._hasNoCanvas=!0);const R=((w=await n._structTree.getAriaAttributes(`${fS}${A}`))==null?void 0:w.get("aria-label"))||"";a=t={annotationType:pt.STAMP,bitmapId:F,bitmap:G,pageIndex:M-1,rect:D.slice(0),rotation:_,annotationElementId:A,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:R},isSvg:!1,structParent:N,popupRef:E,comment:(C==null?void 0:C.str)||null}}const l=await super.deserialize(t,n,i),{rect:u,bitmap:d,bitmapUrl:h,bitmapId:g,isSvg:b,accessibilityData:x}=t;s?(i.addMissingCanvas(t.id,l),L(l,kd,!0)):g&&i.imageManager.isValidId(g)?(L(l,cr,g),d&&L(l,pn,d)):L(l,qo,h),L(l,Wi,b);const[k,v]=l.pageDimensions;return l.width=(u[2]-u[0])/k,l.height=(u[3]-u[1])/v,x&&(l.altTextData=x),l._initialData=a,t.comment&&l.setCommentData(t.comment),L(l,dp,!!a),l}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:pt.STAMP,bitmapId:m(this,cr),pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,isSvg:m(this,Wi),structTreeParentId:this._structTreeParentId};if(this.addComment(i),t)return i.bitmapUrl=$(this,Ft,J0).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:s}=this.serializeAltText(!1);if(!a&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const u=$(this,Ft,J8).call(this,i);if(u.isSame)return null;u.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,n===null)return i;n.stamps||(n.stamps=new Map);const l=m(this,Wi)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(m(this,cr)))n.stamps.set(m(this,cr),{area:l,serialized:i}),i.bitmap=$(this,Ft,J0).call(this,!1);else if(m(this,Wi)){const u=n.stamps.get(m(this,cr));l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=$(this,Ft,J0).call(this,!1))}return i}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const n={rect:this.getPDFRect()};return this.hasEditedComment&&(n.popup=this.comment),t.updateEdited(n),null}}pn=new WeakMap,cr=new WeakMap,kc=new WeakMap,qo=new WeakMap,Dc=new WeakMap,up=new WeakMap,Vo=new WeakMap,kd=new WeakMap,Us=new WeakMap,Wi=new WeakMap,dp=new WeakMap,Ft=new WeakSet,sm=function(t,n=!1){if(!t){this.remove();return}L(this,pn,t.bitmap),n||(L(this,cr,t.id),L(this,Wi,t.isSvg)),t.file&&L(this,up,t.file.name),$(this,Ft,Q0).call(this)},om=function(){if(L(this,kc,null),this._uiManager.enableWaiting(!1),!!m(this,Vo)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&m(this,pn)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&m(this,pn)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},K0=function(){if(m(this,cr)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(m(this,cr)).then(i=>$(this,Ft,sm).call(this,i,!0)).finally(()=>$(this,Ft,om).call(this));return}if(m(this,qo)){const i=m(this,qo);L(this,qo,null),this._uiManager.enableWaiting(!0),L(this,kc,this._uiManager.imageManager.getFromUrl(i).then(a=>$(this,Ft,sm).call(this,a)).finally(()=>$(this,Ft,om).call(this)));return}if(m(this,Dc)){const i=m(this,Dc);L(this,Dc,null),this._uiManager.enableWaiting(!0),L(this,kc,this._uiManager.imageManager.getFromFile(i).then(a=>$(this,Ft,sm).call(this,a)).finally(()=>$(this,Ft,om).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=LD.join(",");const n=this._uiManager._signal;L(this,kc,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),$(this,Ft,sm).call(this,a)}i()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>$(this,Ft,om).call(this))),t.click()},Q0=function(){var g;const{div:t}=this;let{width:n,height:i}=m(this,pn);const[a,s]=this.pageDimensions,l=.75;if(this.width)n=this.width*a,i=this.height*s;else if(n>l*a||i>l*s){const b=Math.min(l*a/n,l*s/i);n*=b,i*=b}const[u,d]=this.parentDimensions;this.setDims(n*u/a,i*d/s),this._uiManager.enableWaiting(!1);const h=L(this,Vo,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=n/a,this.height=i/s,(g=this._initialOptions)!=null&&g.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),$(this,Ft,G_).call(this),m(this,dp)||(this.parent.addUndoableEditor(this),L(this,dp,!0)),this._reportTelemetry({action:"inserted_image"}),m(this,up)&&this.div.setAttribute("aria-description",m(this,up)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Z0=function(t,n){const{width:i,height:a}=m(this,pn);let s=i,l=a,u=m(this,pn);for(;s>2*t||l>2*n;){const d=s,h=l;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const g=new OffscreenCanvas(s,l);g.getContext("2d").drawImage(u,0,0,d,h,0,0,s,l),u=g.transferToImageBitmap()}return u},G_=function(){const[t,n]=this.parentDimensions,{width:i,height:a}=this,s=new Is,l=Math.ceil(i*t*s.sx),u=Math.ceil(a*n*s.sy),d=m(this,Vo);if(!d||d.width===l&&d.height===u)return;d.width=l,d.height=u;const h=m(this,Wi)?m(this,pn):$(this,Ft,Z0).call(this,l,u),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(h,0,0,h.width,h.height,0,0,l,u)},J0=function(t){if(t){if(m(this,Wi)){const a=this._uiManager.imageManager.getSvgUrl(m(this,cr));if(a)return a}const n=document.createElement("canvas");return{width:n.width,height:n.height}=m(this,pn),n.getContext("2d").drawImage(m(this,pn),0,0),n.toDataURL()}if(m(this,Wi)){const[n,i]=this.pageDimensions,a=Math.round(this.width*n*Oc.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*Oc.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(a,s);return l.getContext("2d").drawImage(m(this,pn),0,0,m(this,pn).width,m(this,pn).height,0,0,a,s),l.transferToImageBitmap()}return structuredClone(m(this,pn))},J8=function(t){var l;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,a=t.pageIndex===n,s=(((l=t.accessibilityData)==null?void 0:l.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&s,isSameAltText:s}},We(X_,"_type","stamp"),We(X_,"_editorType",pt.STAMP);var Dd,hp,Rs,_c,Xo,Hi,Ac,fp,_d,Xa,Go,ur,$o,Sc,pp,rt,Ec,gn,e6,us,Y_,K_,ev;const Ma=class Ma{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:i,accessibilityManager:a,annotationLayer:s,drawLayer:l,textLayer:u,viewport:d,l10n:h}){V(this,gn);V(this,Dd);V(this,hp,!1);V(this,Rs,null);V(this,_c,null);V(this,Xo,null);V(this,Hi,new Map);V(this,Ac,!1);V(this,fp,!1);V(this,_d,!1);V(this,Xa,null);V(this,Go,null);V(this,ur,null);V(this,$o,null);V(this,Sc,null);V(this,pp,-1);V(this,rt);const g=[...m(Ma,Ec).values()];if(!Ma._initialized){Ma._initialized=!0;for(const b of g)b.initialize(h,e)}e.registerEditorTypes(g),L(this,rt,e),this.pageIndex=t,this.div=n,L(this,Dd,a),L(this,Rs,s),this.viewport=d,L(this,ur,u),this.drawLayer=l,this._structTree=i,m(this,rt).addLayer(this)}get isEmpty(){return m(this,Hi).size===0}get isInvisible(){return this.isEmpty&&m(this,rt).getMode()===pt.NONE}updateToolbar(e){m(this,rt).updateToolbar(e)}updateMode(e=m(this,rt).getMode()){switch($(this,gn,ev).call(this),e){case pt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case pt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case pt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of m(Ma,Ec).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=m(this,ur))==null?void 0:t.div)}setEditingState(e){m(this,rt).setEditingState(e)}addCommands(e){m(this,rt).addCommands(e)}cleanUndoStack(e){m(this,rt).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=m(this,Rs))==null||t.div.classList.toggle("disabled",!e)}async enable(){var n;L(this,_d,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(n=m(this,Sc))==null||n.abort(),L(this,Sc,null);const e=new Set;for(const i of m(this,Hi).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(m(this,rt).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!m(this,Rs)){L(this,_d,!1);return}const t=m(this,Rs).getEditableAnnotations();for(const i of t){if(i.hide(),m(this,rt).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}L(this,_d,!1)}disable(){var i;if(L(this,fp,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),m(this,ur)&&!m(this,Sc)){L(this,Sc,new AbortController);const a=m(this,rt).combinedSignal(m(this,Sc));m(this,ur).div.addEventListener("pointerdown",s=>{const{clientX:u,clientY:d,timeStamp:h}=s,g=m(this,pp);if(h-g>500){L(this,pp,h);return}L(this,pp,-1);const{classList:b}=this.div;b.toggle("getElements",!0);const x=document.elementsFromPoint(u,d);if(b.toggle("getElements",!1),!this.div.contains(x[0]))return;let k;const v=new RegExp(`^${Xj}[0-9]+$`);for(const D of x)if(v.test(D.id)){k=D.id;break}if(!k)return;const w=m(this,Hi).get(k);(w==null?void 0:w.annotationElementId)===null&&(s.stopPropagation(),s.preventDefault(),w.dblclick())},{signal:a,capture:!0})}const e=new Map,t=new Map;for(const a of m(this,Hi).values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){e.set(a.annotationElementId,a);continue}else t.set(a.annotationElementId,a);(i=this.getEditableAnnotation(a.annotationElementId))==null||i.show(),a.remove()}if(m(this,Rs)){const a=m(this,Rs).getEditableAnnotations();for(const s of a){const{id:l}=s.data;if(m(this,rt).isDeletedAnnotationElement(l)){s.updateEdited({deleted:!0});continue}let u=t.get(l);if(u){u.resetAnnotationElement(s),u.show(!1),s.show();continue}u=e.get(l),u&&(m(this,rt).addChangedExistingAnnotation(u),u.renderAnnotationElement(s)&&u.show(!1)),s.show()}}$(this,gn,ev).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const a of m(Ma,Ec).values())n.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),L(this,fp,!1)}getEditableAnnotation(e){var t;return((t=m(this,Rs))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){m(this,rt).getActive()!==e&&m(this,rt).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=m(this,ur))!=null&&e.div&&!m(this,$o)){L(this,$o,new AbortController);const t=m(this,rt).combinedSignal(m(this,$o));m(this,ur).div.addEventListener("pointerdown",$(this,gn,e6).bind(this),{signal:t}),m(this,ur).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=m(this,ur))!=null&&e.div&&m(this,$o)&&(m(this,$o).abort(),L(this,$o,null),m(this,ur).div.classList.remove("highlighting"))}enableClick(){if(m(this,_c))return;L(this,_c,new AbortController);const e=m(this,rt).combinedSignal(m(this,_c));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=m(this,_c))==null||e.abort(),L(this,_c,null)}attach(e){m(this,Hi).set(e.id,e);const{annotationElementId:t}=e;t&&m(this,rt).isDeletedAnnotationElement(t)&&m(this,rt).removeDeletedAnnotationElement(e)}detach(e){var t;m(this,Hi).delete(e.id),(t=m(this,Dd))==null||t.removePointerInTextLayer(e.contentDiv),!m(this,fp)&&e.annotationElementId&&m(this,rt).addDeletedAnnotationElement(e)}remove(e){this.detach(e),m(this,rt).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(m(this,rt).addDeletedAnnotationElement(e.annotationElementId),sn.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),m(this,rt).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!m(this,_d)),m(this,rt).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!m(this,Xo)&&(e._focusEventsAllowed=!1,L(this,Xo,setTimeout(()=>{L(this,Xo,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:m(this,rt)._signal}),t.focus())},0))),e._structTreeParentId=(n=m(this,Dd))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return m(this,rt).getId()}combinedSignal(e){return m(this,rt).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=m(this,gn,us))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await m(this,rt).updateMode(e.mode);const{offsetX:n,offsetY:i}=$(this,gn,K_).call(this),a=this.getNextId(),s=$(this,gn,Y_).call(this,{parent:this,id:a,x:n,y:i,uiManager:m(this,rt),isCentered:!0,...t});s&&this.add(s)}async deserialize(e){var t;return await((t=m(Ma,Ec).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,m(this,rt)))||null}createAndAddNewEditor(e,t,n={}){const i=this.getNextId(),a=$(this,gn,Y_).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:m(this,rt),isCentered:t,...n});return a&&this.add(a),a}addNewEditor(e={}){this.createAndAddNewEditor($(this,gn,K_).call(this),!0,e)}setSelected(e){m(this,rt).setSelected(e)}toggleSelected(e){m(this,rt).toggleSelected(e)}unselect(e){m(this,rt).unselect(e)}pointerup(e){var i;const{isMac:t}=Ar.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!m(this,Ac)||(L(this,Ac,!1),(i=m(this,gn,us))!=null&&i.isDrawer&&m(this,gn,us).supportMultipleDrawings))return;if(!m(this,hp)){L(this,hp,!0);return}const n=m(this,rt).getMode();if(n===pt.STAMP||n===pt.SIGNATURE){m(this,rt).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(m(this,rt).getMode()===pt.HIGHLIGHT&&this.enableTextSelection(),m(this,Ac)){L(this,Ac,!1);return}const{isMac:t}=Ar.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(L(this,Ac,!0),(i=m(this,gn,us))!=null&&i.isDrawer){this.startDrawingSession(e);return}const n=m(this,rt).getActive();L(this,hp,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),m(this,Xa)){m(this,gn,us).startDrawing(this,m(this,rt),!1,e);return}m(this,rt).setCurrentDrawingSession(this),L(this,Xa,new AbortController);const t=m(this,rt).combinedSignal(m(this,Xa));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(L(this,Go,null),this.commitOrRemove())},{signal:t}),m(this,gn,us).startDrawing(this,m(this,rt),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&L(this,Go,t);return}m(this,Go)&&setTimeout(()=>{var t;(t=m(this,Go))==null||t.focus(),L(this,Go,null)},0)}endDrawingSession(e=!1){return m(this,Xa)?(m(this,rt).setCurrentDrawingSession(null),m(this,Xa).abort(),L(this,Xa,null),L(this,Go,null),m(this,gn,us).endDrawing(e)):null}findNewParent(e,t,n){const i=m(this,rt).findParent(t,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return m(this,Xa)?(this.endDrawingSession(),!0):!1}onScaleChanging(){m(this,Xa)&&m(this,gn,us).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=m(this,rt).getActive())==null?void 0:e.parent)===this&&(m(this,rt).commitOrRemove(),m(this,rt).setActiveEditor(null)),m(this,Xo)&&(clearTimeout(m(this,Xo)),L(this,Xo,null));for(const n of m(this,Hi).values())(t=m(this,Dd))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,m(this,Hi).clear(),m(this,rt).removeLayer(this)}render({viewport:e}){this.viewport=e,Ud(this.div,e);for(const t of m(this,rt).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){m(this,rt).commitOrRemove(),$(this,gn,ev).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Ud(this.div,{rotation:n}),t!==n)for(const i of m(this,Hi).values())i.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return m(this,rt).viewParameters.realScale}};Dd=new WeakMap,hp=new WeakMap,Rs=new WeakMap,_c=new WeakMap,Xo=new WeakMap,Hi=new WeakMap,Ac=new WeakMap,fp=new WeakMap,_d=new WeakMap,Xa=new WeakMap,Go=new WeakMap,ur=new WeakMap,$o=new WeakMap,Sc=new WeakMap,pp=new WeakMap,rt=new WeakMap,Ec=new WeakMap,gn=new WeakSet,e6=function(e){m(this,rt).unselectAll();const{target:t}=e;if(t===m(this,ur).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&m(this,ur).div.contains(t)){const{isMac:n}=Ar.platform;if(e.button!==0||e.ctrlKey&&n)return;m(this,rt).showAllEditors("highlight",!0,!0),m(this,ur).div.classList.add("free"),this.toggleDrawing(),yv.startHighlighting(this,m(this,rt).direction==="ltr",{target:m(this,ur).div,x:e.x,y:e.y}),m(this,ur).div.addEventListener("pointerup",()=>{m(this,ur).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:m(this,rt)._signal}),e.preventDefault()}},us=function(){return m(Ma,Ec).get(m(this,rt).getMode())},Y_=function(e){const t=m(this,gn,us);return t?new t.prototype.constructor(e):null},K_=function(){const{x:e,y:t,width:n,height:i}=this.div.getBoundingClientRect(),a=Math.max(0,e),s=Math.max(0,t),l=Math.min(window.innerWidth,e+n),u=Math.min(window.innerHeight,t+i),d=(a+l)/2-e,h=(s+u)/2-t,[g,b]=this.viewport.rotation%180===0?[d,h]:[h,d];return{offsetX:g,offsetY:b}},ev=function(){for(const e of m(this,Hi).values())e.isEmpty()&&e.remove()},We(Ma,"_initialized",!1),V(Ma,Ec,new Map([C_,B_,X_,yv,V_].map(e=>[e._editorType,e])));let $_=Ma;var Ga,qr,Ad,tx,qv,t6,Os,Z_,n6,J_;const Xn=class Xn{constructor({pageIndex:e}){V(this,Os);V(this,Ga,null);V(this,qr,new Map);V(this,Ad,new Map);this.pageIndex=e}setParent(e){if(!m(this,Ga)){L(this,Ga,e);return}if(m(this,Ga)!==e){if(m(this,qr).size>0)for(const t of m(this,qr).values())t.remove(),e.append(t);L(this,Ga,e)}}static get _svgFactory(){return Dt(this,"_svgFactory",new bv)}draw(e,t=!1,n=!1){const i=Hn(Xn,tx)._++,a=$(this,Os,Z_).call(this),s=Xn._svgFactory.createElement("defs");a.append(s);const l=Xn._svgFactory.createElement("path");s.append(l);const u=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke"),t&&m(this,Ad).set(i,l);const d=n?$(this,Os,n6).call(this,s,u):null,h=Xn._svgFactory.createElement("use");return a.append(h),h.setAttribute("href",`#${u}`),this.updateProperties(a,e),m(this,qr).set(i,a),{id:i,clipPathId:`url(#${d})`}}drawOutline(e,t){const n=Hn(Xn,tx)._++,i=$(this,Os,Z_).call(this),a=Xn._svgFactory.createElement("defs");i.append(a);const s=Xn._svgFactory.createElement("path");a.append(s);const l=`path_p${this.pageIndex}_${n}`;s.setAttribute("id",l),s.setAttribute("vector-effect","non-scaling-stroke");let u;if(t){const g=Xn._svgFactory.createElement("mask");a.append(g),u=`mask_p${this.pageIndex}_${n}`,g.setAttribute("id",u),g.setAttribute("maskUnits","objectBoundingBox");const b=Xn._svgFactory.createElement("rect");g.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const x=Xn._svgFactory.createElement("use");g.append(x),x.setAttribute("href",`#${l}`),x.setAttribute("stroke","none"),x.setAttribute("fill","black"),x.setAttribute("fill-rule","nonzero"),x.classList.add("mask")}const d=Xn._svgFactory.createElement("use");i.append(d),d.setAttribute("href",`#${l}`),u&&d.setAttribute("mask",`url(#${u})`);const h=d.cloneNode();return i.append(h),d.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(i,e),m(this,qr).set(n,i),n}finalizeDraw(e,t){m(this,Ad).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var u;if(!t)return;const{root:n,bbox:i,rootClass:a,path:s}=t,l=typeof e=="number"?m(this,qr).get(e):e;if(l){if(n&&$(this,Os,J_).call(this,l,n),i&&$(u=Xn,qv,t6).call(u,l,i),a){const{classList:d}=l;for(const[h,g]of Object.entries(a))d.toggle(h,g)}if(s){const h=l.firstChild.firstChild;$(this,Os,J_).call(this,h,s)}}}updateParent(e,t){if(t===this)return;const n=m(this,qr).get(e);n&&(m(t,Ga).append(n),m(this,qr).delete(e),m(t,qr).set(e,n))}remove(e){m(this,Ad).delete(e),m(this,Ga)!==null&&(m(this,qr).get(e).remove(),m(this,qr).delete(e))}destroy(){L(this,Ga,null);for(const e of m(this,qr).values())e.remove();m(this,qr).clear(),m(this,Ad).clear()}};Ga=new WeakMap,qr=new WeakMap,Ad=new WeakMap,tx=new WeakMap,qv=new WeakSet,t6=function(e,[t,n,i,a]){const{style:s}=e;s.top=`${100*n}%`,s.left=`${100*t}%`,s.width=`${100*i}%`,s.height=`${100*a}%`},Os=new WeakSet,Z_=function(){const e=Xn._svgFactory.create(1,1,!0);return m(this,Ga).append(e),e.setAttribute("aria-hidden",!0),e},n6=function(e,t){const n=Xn._svgFactory.createElement("clipPath");e.append(n);const i=`clip_${t}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const a=Xn._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),i},J_=function(e,t){for(const[n,i]of Object.entries(t))i===null?e.removeAttribute(n):e.setAttribute(n,i)},V(Xn,qv),V(Xn,tx,0);let Q_=Xn;globalThis._pdfjsTestingUtils={HighlightOutliner:U_};globalThis.pdfjsLib={AbortException:Ic,AnnotationEditorLayer:$_,AnnotationEditorParamsType:Nt,AnnotationEditorType:pt,AnnotationEditorUIManager:Rd,AnnotationLayer:S_,AnnotationMode:Il,AnnotationType:On,build:zz,ColorPicker:gv,createValidAbsoluteUrl:Gj,DOMSVGFactory:bv,DrawLayer:Q_,FeatureTest:Ar,fetchData:dx,getDocument:KF,getFilenameFromUrl:R7,getPdfFilenameFromUrl:j7,getRGB:S1,getUuid:Kj,getXfaPageViewport:I7,GlobalWorkerOptions:js,ImageKind:A0,InvalidPDFException:OD,isDataScheme:A1,isPdfFile:gS,isValidExplicitDest:X7,MathClamp:Xr,noContextMenu:Ea,normalizeUnicode:C7,OPS:vm,OutputScale:Is,PasswordResponses:v7,PDFDataRangeTransport:QF,PDFDateString:dv,PDFWorker:Dm,PermissionFlag:y7,PixelsPerInch:Oc,RenderingCancelledException:pS,ResponseException:uv,setLayerDimensions:Ud,shadow:Dt,SignatureExtractor:Yo,stopEvent:Ln,SupportedImageMimeTypes:LD,TextLayer:wm,TouchManager:fv,updateUrlHash:$j,Util:tt,VerbosityLevel:k1,version:Pz,XfaLayer:t8};class Uc{constructor(){this.MAX_FILE_SIZE=10*1024*1024,this.ALLOWED_TYPES=["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/markdown","application/msword","application/octet-stream"]}static getInstance(){return Uc.instance||(Uc.instance=new Uc),Uc.instance}validateFile(e){return e.size>this.MAX_FILE_SIZE?{isValid:!1,error:`File size exceeds ${this.MAX_FILE_SIZE/1024/1024}MB limit`}:this.ALLOWED_TYPES.includes(e.type)?{isValid:!0}:{isValid:!1,error:"File type not supported. Please use PDF, DOCX, TXT, or MD files."}}async uploadKnowledgeBaseFile(e,t){try{const n=this.validateFile(e);if(!n.isValid)throw new Error(n.error);const i=e.name.split(".").pop(),a=`${t}/${Date.now()}-${crypto.randomUUID()}.${i}`,{data:s,error:l}=await qe.storage.from("knowledge-base").upload(a,e,{cacheControl:"3600",upsert:!1});if(l)throw l;const u=await this.extractTextFromFile(e),{data:d,error:h}=await qe.from("knowledge_base_files").insert({user_id:t,filename:a,original_filename:e.name,file_path:s.path,file_size:e.size,mime_type:e.type,processed_content:u,processing_status:u?"completed":"failed"}).select("id").single();if(h)throw await qe.storage.from("knowledge-base").remove([a]),h;return{success:!0,data:{fileId:d.id,filePath:s.path,processedContent:u}}}catch(n){return{success:!1,error:n.message}}}async extractTextFromFile(e){switch(e.type){case"text/plain":case"text/markdown":case"application/octet-stream":return this.extractTextFile(e);case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return this.extractDocxFile(e);case"application/pdf":return this.extractPdfFile(e);default:return Ae.warn("Unsupported file type for content extraction",{fileName:e.name,fileType:e.type}),`[Content from ${e.name} - File type not supported for content extraction]`}}async extractTextFile(e){return e.text()}async extractDocxFile(e){const t=await e.arrayBuffer();return(await x7.extractRawText({arrayBuffer:t})).value}async extractPdfFile(e){js.workerSrc="/pdf.worker.min.mjs";const t=await e.arrayBuffer(),n=await KF({data:t}).promise;let i="";for(let a=1;a<=n.numPages;a++){const l=await(await n.getPage(a)).getTextContent();i+=l.items.map(u=>u.str).join(" ")+`
`}return i}}function uW(r,e){const t={};return(r[r.length-1]===""?[...r,""]:r).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const dW=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,hW=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,fW={};function j4(r,e){return(fW.jsx?hW:dW).test(r)}const pW=/[ \t\n\f\r]/g;function gW(r){return typeof r=="object"?r.type==="text"?F4(r.value):!1:F4(r)}function F4(r){return r.replace(pW,"")===""}class mx{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}mx.prototype.normal={};mx.prototype.property={};mx.prototype.space=void 0;function r6(r,e){const t={},n={};for(const i of r)Object.assign(t,i.property),Object.assign(n,i.normal);return new mx(t,n,e)}function eA(r){return r.toLowerCase()}class gi{constructor(e,t){this.attribute=t,this.property=e}}gi.prototype.attribute="";gi.prototype.booleanish=!1;gi.prototype.boolean=!1;gi.prototype.commaOrSpaceSeparated=!1;gi.prototype.commaSeparated=!1;gi.prototype.defined=!1;gi.prototype.mustUseProperty=!1;gi.prototype.number=!1;gi.prototype.overloadedBoolean=!1;gi.prototype.property="";gi.prototype.spaceSeparated=!1;gi.prototype.space=void 0;let mW=0;const bt=Wd(),Mn=Wd(),tA=Wd(),He=Wd(),an=Wd(),Zh=Wd(),Ai=Wd();function Wd(){return 2**++mW}const nA=Object.freeze(Object.defineProperty({__proto__:null,boolean:bt,booleanish:Mn,commaOrSpaceSeparated:Ai,commaSeparated:Zh,number:He,overloadedBoolean:tA,spaceSeparated:an},Symbol.toStringTag,{value:"Module"})),lD=Object.keys(nA);class DS extends gi{constructor(e,t,n,i){let a=-1;if(super(e,t),I4(this,"space",i),typeof n=="number")for(;++a<lD.length;){const s=lD[a];I4(this,lD[a],(n&nA[s])===nA[s])}}}DS.prototype.defined=!0;function I4(r,e,t){t&&(r[e]=t)}function Sp(r){const e={},t={};for(const[n,i]of Object.entries(r.properties)){const a=new DS(n,r.transform(r.attributes||{},n),i,r.space);r.mustUseProperty&&r.mustUseProperty.includes(n)&&(a.mustUseProperty=!0),e[n]=a,t[eA(n)]=n,t[eA(a.attribute)]=n}return new mx(e,t,r.space)}const i6=Sp({properties:{ariaActiveDescendant:null,ariaAtomic:Mn,ariaAutoComplete:null,ariaBusy:Mn,ariaChecked:Mn,ariaColCount:He,ariaColIndex:He,ariaColSpan:He,ariaControls:an,ariaCurrent:null,ariaDescribedBy:an,ariaDetails:null,ariaDisabled:Mn,ariaDropEffect:an,ariaErrorMessage:null,ariaExpanded:Mn,ariaFlowTo:an,ariaGrabbed:Mn,ariaHasPopup:null,ariaHidden:Mn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:an,ariaLevel:He,ariaLive:null,ariaModal:Mn,ariaMultiLine:Mn,ariaMultiSelectable:Mn,ariaOrientation:null,ariaOwns:an,ariaPlaceholder:null,ariaPosInSet:He,ariaPressed:Mn,ariaReadOnly:Mn,ariaRelevant:null,ariaRequired:Mn,ariaRoleDescription:an,ariaRowCount:He,ariaRowIndex:He,ariaRowSpan:He,ariaSelected:Mn,ariaSetSize:He,ariaSort:null,ariaValueMax:He,ariaValueMin:He,ariaValueNow:He,ariaValueText:null,role:null},transform(r,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function a6(r,e){return e in r?r[e]:e}function s6(r,e){return a6(r,e.toLowerCase())}const bW=Sp({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Zh,acceptCharset:an,accessKey:an,action:null,allow:null,allowFullScreen:bt,allowPaymentRequest:bt,allowUserMedia:bt,alt:null,as:null,async:bt,autoCapitalize:null,autoComplete:an,autoFocus:bt,autoPlay:bt,blocking:an,capture:null,charSet:null,checked:bt,cite:null,className:an,cols:He,colSpan:null,content:null,contentEditable:Mn,controls:bt,controlsList:an,coords:He|Zh,crossOrigin:null,data:null,dateTime:null,decoding:null,default:bt,defer:bt,dir:null,dirName:null,disabled:bt,download:tA,draggable:Mn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:bt,formTarget:null,headers:an,height:He,hidden:tA,high:He,href:null,hrefLang:null,htmlFor:an,httpEquiv:an,id:null,imageSizes:null,imageSrcSet:null,inert:bt,inputMode:null,integrity:null,is:null,isMap:bt,itemId:null,itemProp:an,itemRef:an,itemScope:bt,itemType:an,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:bt,low:He,manifest:null,max:null,maxLength:He,media:null,method:null,min:null,minLength:He,multiple:bt,muted:bt,name:null,nonce:null,noModule:bt,noValidate:bt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:bt,optimum:He,pattern:null,ping:an,placeholder:null,playsInline:bt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:bt,referrerPolicy:null,rel:an,required:bt,reversed:bt,rows:He,rowSpan:He,sandbox:an,scope:null,scoped:bt,seamless:bt,selected:bt,shadowRootClonable:bt,shadowRootDelegatesFocus:bt,shadowRootMode:null,shape:null,size:He,sizes:null,slot:null,span:He,spellCheck:Mn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:He,step:null,style:null,tabIndex:He,target:null,title:null,translate:null,type:null,typeMustMatch:bt,useMap:null,value:Mn,width:He,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:an,axis:null,background:null,bgColor:null,border:He,borderColor:null,bottomMargin:He,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:bt,declare:bt,event:null,face:null,frame:null,frameBorder:null,hSpace:He,leftMargin:He,link:null,longDesc:null,lowSrc:null,marginHeight:He,marginWidth:He,noResize:bt,noHref:bt,noShade:bt,noWrap:bt,object:null,profile:null,prompt:null,rev:null,rightMargin:He,rules:null,scheme:null,scrolling:Mn,standby:null,summary:null,text:null,topMargin:He,valueType:null,version:null,vAlign:null,vLink:null,vSpace:He,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:bt,disableRemotePlayback:bt,prefix:null,property:null,results:He,security:null,unselectable:null},space:"html",transform:s6}),xW=Sp({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ai,accentHeight:He,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:He,amplitude:He,arabicForm:null,ascent:He,attributeName:null,attributeType:null,azimuth:He,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:He,by:null,calcMode:null,capHeight:He,className:an,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:He,diffuseConstant:He,direction:null,display:null,dur:null,divisor:He,dominantBaseline:null,download:bt,dx:null,dy:null,edgeMode:null,editable:null,elevation:He,enableBackground:null,end:null,event:null,exponent:He,externalResourcesRequired:null,fill:null,fillOpacity:He,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Zh,g2:Zh,glyphName:Zh,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:He,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:He,horizOriginX:He,horizOriginY:He,id:null,ideographic:He,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:He,k:He,k1:He,k2:He,k3:He,k4:He,kernelMatrix:Ai,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:He,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:He,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:He,overlineThickness:He,paintOrder:null,panose1:null,path:null,pathLength:He,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:an,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:He,pointsAtY:He,pointsAtZ:He,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ai,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ai,rev:Ai,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ai,requiredFeatures:Ai,requiredFonts:Ai,requiredFormats:Ai,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:He,specularExponent:He,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:He,strikethroughThickness:He,string:null,stroke:null,strokeDashArray:Ai,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:He,strokeOpacity:He,strokeWidth:null,style:null,surfaceScale:He,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ai,tabIndex:He,tableValues:null,target:null,targetX:He,targetY:He,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ai,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:He,underlineThickness:He,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:He,values:null,vAlphabetic:He,vMathematical:He,vectorEffect:null,vHanging:He,vIdeographic:He,version:null,vertAdvY:He,vertOriginX:He,vertOriginY:He,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:He,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:a6}),o6=Sp({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(r,e){return"xlink:"+e.slice(5).toLowerCase()}}),l6=Sp({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:s6}),c6=Sp({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(r,e){return"xml:"+e.slice(3).toLowerCase()}}),yW={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},vW=/[A-Z]/g,O4=/-[a-z]/g,wW=/^data[-\w.:]+$/i;function kW(r,e){const t=eA(e);let n=e,i=gi;if(t in r.normal)return r.property[r.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&wW.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(O4,_W);n="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!O4.test(a)){let s=a.replace(vW,DW);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}i=DS}return new i(n,e)}function DW(r){return"-"+r.toLowerCase()}function _W(r){return r.charAt(1).toUpperCase()}const AW=r6([i6,bW,o6,l6,c6],"html"),_S=r6([i6,xW,o6,l6,c6],"svg");function SW(r){return r.join(" ").trim()}var Ch={},cD,M4;function EW(){if(M4)return cD;M4=1;var r=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,n=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,l=/^\s+|\s+$/g,u=`
`,d="/",h="*",g="",b="comment",x="declaration";cD=function(v,w){if(typeof v!="string")throw new TypeError("First argument must be a string");if(!v)return[];w=w||{};var D=1,_=1;function A(W){var U=W.match(e);U&&(D+=U.length);var X=W.lastIndexOf(u);_=~X?W.length-X:_+W.length}function N(){var W={line:D,column:_};return function(U){return U.position=new E(W),M(),U}}function E(W){this.start=W,this.end={line:D,column:_},this.source=w.source}E.prototype.content=v;function C(W){var U=new Error(w.source+":"+D+":"+_+": "+W);if(U.reason=W,U.filename=w.source,U.line=D,U.column=_,U.source=v,!w.silent)throw U}function j(W){var U=W.exec(v);if(U){var X=U[0];return A(X),v=v.slice(X.length),U}}function M(){j(t)}function O(W){var U;for(W=W||[];U=F();)U!==!1&&W.push(U);return W}function F(){var W=N();if(!(d!=v.charAt(0)||h!=v.charAt(1))){for(var U=2;g!=v.charAt(U)&&(h!=v.charAt(U)||d!=v.charAt(U+1));)++U;if(U+=2,g===v.charAt(U-1))return C("End of comment missing");var X=v.slice(2,U-2);return _+=2,A(X),v=v.slice(U),_+=2,W({type:b,comment:X})}}function G(){var W=N(),U=j(n);if(U){if(F(),!j(i))return C("property missing ':'");var X=j(a),P=W({type:x,property:k(U[0].replace(r,g)),value:X?k(X[0].replace(r,g)):g});return j(s),P}}function R(){var W=[];O(W);for(var U;U=G();)U!==!1&&(W.push(U),O(W));return W}return M(),R()};function k(v){return v?v.replace(l,g):g}return cD}var L4;function TW(){if(L4)return Ch;L4=1;var r=Ch&&Ch.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ch,"__esModule",{value:!0}),Ch.default=t;var e=r(EW());function t(n,i){var a=null;if(!n||typeof n!="string")return a;var s=(0,e.default)(n),l=typeof i=="function";return s.forEach(function(u){if(u.type==="declaration"){var d=u.property,h=u.value;l?i(d,h,u):h&&(a=a||{},a[d]=h)}}),a}return Ch}var Lg={},B4;function CW(){if(B4)return Lg;B4=1,Object.defineProperty(Lg,"__esModule",{value:!0}),Lg.camelCase=void 0;var r=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,n=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,a=function(d){return!d||t.test(d)||r.test(d)},s=function(d,h){return h.toUpperCase()},l=function(d,h){return"".concat(h,"-")},u=function(d,h){return h===void 0&&(h={}),a(d)?d:(d=d.toLowerCase(),h.reactCompat?d=d.replace(i,l):d=d.replace(n,l),d.replace(e,s))};return Lg.camelCase=u,Lg}var Bg,P4;function NW(){if(P4)return Bg;P4=1;var r=Bg&&Bg.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=r(TW()),t=CW();function n(i,a){var s={};return!i||typeof i!="string"||(0,e.default)(i,function(l,u){l&&u&&(s[(0,t.camelCase)(l,a)]=u)}),s}return n.default=n,Bg=n,Bg}var UW=NW();const RW=nx(UW),u6=d6("end"),AS=d6("start");function d6(r){return e;function e(t){const n=t&&t.position&&t.position[r]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function jW(r){const e=AS(r),t=u6(r);if(e&&t)return{start:e,end:t}}function lm(r){return!r||typeof r!="object"?"":"position"in r||"type"in r?z4(r.position):"start"in r||"end"in r?z4(r):"line"in r||"column"in r?rA(r):""}function rA(r){return W4(r&&r.line)+":"+W4(r&&r.column)}function z4(r){return rA(r&&r.start)+"-"+rA(r&&r.end)}function W4(r){return r&&typeof r=="number"?r:1}class Mr extends Error{constructor(e,t,n){super(),typeof t=="string"&&(n=t,t=void 0);let i="",a={},s=!1;if(t&&("line"in t&&"column"in t?a={place:t}:"start"in t&&"end"in t?a={place:t}:"type"in t?a={ancestors:[t],place:t.position}:a={...t}),typeof e=="string"?i=e:!a.cause&&e&&(s=!0,i=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof n=="string"){const u=n.indexOf(":");u===-1?a.ruleId=n:(a.source=n.slice(0,u),a.ruleId=n.slice(u+1))}if(!a.place&&a.ancestors&&a.ancestors){const u=a.ancestors[a.ancestors.length-1];u&&(a.place=u.position)}const l=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=l?l.line:void 0,this.name=lm(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=s&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Mr.prototype.file="";Mr.prototype.name="";Mr.prototype.reason="";Mr.prototype.message="";Mr.prototype.stack="";Mr.prototype.column=void 0;Mr.prototype.line=void 0;Mr.prototype.ancestors=void 0;Mr.prototype.cause=void 0;Mr.prototype.fatal=void 0;Mr.prototype.place=void 0;Mr.prototype.ruleId=void 0;Mr.prototype.source=void 0;const SS={}.hasOwnProperty,FW=new Map,IW=/[A-Z]/g,OW=new Set(["table","tbody","thead","tfoot","tr"]),MW=new Set(["td","th"]),h6="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function LW(r,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let n;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=XW(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=VW(t,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:n,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?_S:AW,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=f6(i,r,void 0);return a&&typeof a!="string"?a:i.create(r,i.Fragment,{children:a||void 0},void 0)}function f6(r,e,t){if(e.type==="element")return BW(r,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return PW(r,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return WW(r,e,t);if(e.type==="mdxjsEsm")return zW(r,e);if(e.type==="root")return HW(r,e,t);if(e.type==="text")return qW(r,e)}function BW(r,e,t){const n=r.schema;let i=n;e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(i=_S,r.schema=i),r.ancestors.push(e);const a=g6(r,e.tagName,!1),s=GW(r,e);let l=TS(r,e);return OW.has(e.tagName)&&(l=l.filter(function(u){return typeof u=="string"?!gW(u):!0})),p6(r,s,a,e),ES(s,l),r.ancestors.pop(),r.schema=n,r.create(e,a,s,t)}function PW(r,e){if(e.data&&e.data.estree&&r.evaluater){const n=e.data.estree.body[0];return n.type,r.evaluater.evaluateExpression(n.expression)}_m(r,e.position)}function zW(r,e){if(e.data&&e.data.estree&&r.evaluater)return r.evaluater.evaluateProgram(e.data.estree);_m(r,e.position)}function WW(r,e,t){const n=r.schema;let i=n;e.name==="svg"&&n.space==="html"&&(i=_S,r.schema=i),r.ancestors.push(e);const a=e.name===null?r.Fragment:g6(r,e.name,!0),s=$W(r,e),l=TS(r,e);return p6(r,s,a,e),ES(s,l),r.ancestors.pop(),r.schema=n,r.create(e,a,s,t)}function HW(r,e,t){const n={};return ES(n,TS(r,e)),r.create(e,r.Fragment,n,t)}function qW(r,e){return e.value}function p6(r,e,t,n){typeof t!="string"&&t!==r.Fragment&&r.passNode&&(e.node=n)}function ES(r,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(r.children=t)}}function VW(r,e,t){return n;function n(i,a,s,l){const d=Array.isArray(s.children)?t:e;return l?d(a,s,l):d(a,s)}}function XW(r,e){return t;function t(n,i,a,s){const l=Array.isArray(a.children),u=AS(n);return e(i,a,s,l,{columnNumber:u?u.column-1:void 0,fileName:r,lineNumber:u?u.line:void 0},void 0)}}function GW(r,e){const t={};let n,i;for(i in e.properties)if(i!=="children"&&SS.call(e.properties,i)){const a=YW(r,i,e.properties[i]);if(a){const[s,l]=a;r.tableCellAlignToStyle&&s==="align"&&typeof l=="string"&&MW.has(e.tagName)?n=l:t[s]=l}}if(n){const a=t.style||(t.style={});a[r.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return t}function $W(r,e){const t={};for(const n of e.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&r.evaluater){const a=n.data.estree.body[0];a.type;const s=a.expression;s.type;const l=s.properties[0];l.type,Object.assign(t,r.evaluater.evaluateExpression(l.argument))}else _m(r,e.position);else{const i=n.name;let a;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&r.evaluater){const l=n.value.data.estree.body[0];l.type,a=r.evaluater.evaluateExpression(l.expression)}else _m(r,e.position);else a=n.value===null?!0:n.value;t[i]=a}return t}function TS(r,e){const t=[];let n=-1;const i=r.passKeys?new Map:FW;for(;++n<e.children.length;){const a=e.children[n];let s;if(r.passKeys){const u=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(u){const d=i.get(u)||0;s=u+"-"+d,i.set(u,d+1)}}const l=f6(r,a,s);l!==void 0&&t.push(l)}return t}function YW(r,e,t){const n=kW(r.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=n.commaSeparated?uW(t):SW(t)),n.property==="style"){let i=typeof t=="object"?t:KW(r,String(t));return r.stylePropertyNameCase==="css"&&(i=QW(i)),["style",i]}return[r.elementAttributeNameCase==="react"&&n.space?yW[n.property]||n.property:n.attribute,t]}}function KW(r,e){try{return RW(e,{reactCompat:!0})}catch(t){if(r.ignoreInvalidStyle)return{};const n=t,i=new Mr("Cannot parse `style` attribute",{ancestors:r.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=r.filePath||void 0,i.url=h6+"#cannot-parse-style-attribute",i}}function g6(r,e,t){let n;if(!t)n={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let a=-1,s;for(;++a<i.length;){const l=j4(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};s=s?{type:"MemberExpression",object:s,property:l,computed:!!(a&&l.type==="Literal"),optional:!1}:l}n=s}else n=j4(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(n.type==="Literal"){const i=n.value;return SS.call(r.components,i)?r.components[i]:i}if(r.evaluater)return r.evaluater.evaluateExpression(n);_m(r)}function _m(r,e){const t=new Mr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:r.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=r.filePath||void 0,t.url=h6+"#cannot-handle-mdx-estrees-without-createevaluater",t}function QW(r){const e={};let t;for(t in r)SS.call(r,t)&&(e[ZW(t)]=r[t]);return e}function ZW(r){let e=r.replace(IW,JW);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function JW(r){return"-"+r.toLowerCase()}const uD={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},eH={};function CS(r,e){const t=eH,n=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,i=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return m6(r,n,i)}function m6(r,e,t){if(tH(r)){if("value"in r)return r.type==="html"&&!t?"":r.value;if(e&&"alt"in r&&r.alt)return r.alt;if("children"in r)return H4(r.children,e,t)}return Array.isArray(r)?H4(r,e,t):""}function H4(r,e,t){const n=[];let i=-1;for(;++i<r.length;)n[i]=m6(r[i],e,t);return n.join("")}function tH(r){return!!(r&&typeof r=="object")}const q4=document.createElement("i");function NS(r){const e="&"+r+";";q4.innerHTML=e;const t=q4.textContent;return t.charCodeAt(t.length-1)===59&&r!=="semi"||t===e?!1:t}function Gi(r,e,t,n){const i=r.length;let a=0,s;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,t=t>0?t:0,n.length<1e4)s=Array.from(n),s.unshift(e,t),r.splice(...s);else for(t&&r.splice(e,t);a<n.length;)s=n.slice(a,a+1e4),s.unshift(e,0),r.splice(...s),a+=1e4,e+=1e4}function va(r,e){return r.length>0?(Gi(r,r.length,0,e),r):e}const V4={}.hasOwnProperty;function b6(r){const e={};let t=-1;for(;++t<r.length;)nH(e,r[t]);return e}function nH(r,e){let t;for(t in e){const i=(V4.call(r,t)?r[t]:void 0)||(r[t]={}),a=e[t];let s;if(a)for(s in a){V4.call(i,s)||(i[s]=[]);const l=a[s];rH(i[s],Array.isArray(l)?l:l?[l]:[])}}}function rH(r,e){let t=-1;const n=[];for(;++t<e.length;)(e[t].add==="after"?r:n).push(e[t]);Gi(r,0,0,n)}function x6(r,e){const t=Number.parseInt(r,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function Ya(r){return r.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Gr=Xc(/[A-Za-z]/),Rr=Xc(/[\dA-Za-z]/),iH=Xc(/[#-'*+\--9=?A-Z^-~]/);function wv(r){return r!==null&&(r<32||r===127)}const iA=Xc(/\d/),aH=Xc(/[\dA-Fa-f]/),sH=Xc(/[!-/:-@[-`{-~]/);function st(r){return r!==null&&r<-2}function nn(r){return r!==null&&(r<0||r===32)}function Et(r){return r===-2||r===-1||r===32}const C1=Xc(new RegExp("\\p{P}|\\p{S}","u")),Fd=Xc(/\s/);function Xc(r){return e;function e(t){return t!==null&&t>-1&&r.test(String.fromCharCode(t))}}function Ep(r){const e=[];let t=-1,n=0,i=0;for(;++t<r.length;){const a=r.charCodeAt(t);let s="";if(a===37&&Rr(r.charCodeAt(t+1))&&Rr(r.charCodeAt(t+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(s=String.fromCharCode(a));else if(a>55295&&a<57344){const l=r.charCodeAt(t+1);a<56320&&l>56319&&l<57344?(s=String.fromCharCode(a,l),i=1):s=""}else s=String.fromCharCode(a);s&&(e.push(r.slice(n,t),encodeURIComponent(s)),n=t+i+1,s=""),i&&(t+=i,i=0)}return e.join("")+r.slice(n)}function Rt(r,e,t,n){const i=n?n-1:Number.POSITIVE_INFINITY;let a=0;return s;function s(u){return Et(u)?(r.enter(t),l(u)):e(u)}function l(u){return Et(u)&&a++<i?(r.consume(u),l):(r.exit(t),e(u))}}const oH={tokenize:lH};function lH(r){const e=r.attempt(this.parser.constructs.contentInitial,n,i);let t;return e;function n(l){if(l===null){r.consume(l);return}return r.enter("lineEnding"),r.consume(l),r.exit("lineEnding"),Rt(r,e,"linePrefix")}function i(l){return r.enter("paragraph"),a(l)}function a(l){const u=r.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=u),t=u,s(l)}function s(l){if(l===null){r.exit("chunkText"),r.exit("paragraph"),r.consume(l);return}return st(l)?(r.consume(l),r.exit("chunkText"),a):(r.consume(l),s)}}const cH={tokenize:uH},X4={tokenize:dH};function uH(r){const e=this,t=[];let n=0,i,a,s;return l;function l(A){if(n<t.length){const N=t[n];return e.containerState=N[1],r.attempt(N[0].continuation,u,d)(A)}return d(A)}function u(A){if(n++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&_();const N=e.events.length;let E=N,C;for(;E--;)if(e.events[E][0]==="exit"&&e.events[E][1].type==="chunkFlow"){C=e.events[E][1].end;break}D(n);let j=N;for(;j<e.events.length;)e.events[j][1].end={...C},j++;return Gi(e.events,E+1,0,e.events.slice(N)),e.events.length=j,d(A)}return l(A)}function d(A){if(n===t.length){if(!i)return b(A);if(i.currentConstruct&&i.currentConstruct.concrete)return k(A);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},r.check(X4,h,g)(A)}function h(A){return i&&_(),D(n),b(A)}function g(A){return e.parser.lazy[e.now().line]=n!==t.length,s=e.now().offset,k(A)}function b(A){return e.containerState={},r.attempt(X4,x,k)(A)}function x(A){return n++,t.push([e.currentConstruct,e.containerState]),b(A)}function k(A){if(A===null){i&&_(),D(0),r.consume(A);return}return i=i||e.parser.flow(e.now()),r.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),v(A)}function v(A){if(A===null){w(r.exit("chunkFlow"),!0),D(0),r.consume(A);return}return st(A)?(r.consume(A),w(r.exit("chunkFlow")),n=0,e.interrupt=void 0,l):(r.consume(A),v)}function w(A,N){const E=e.sliceStream(A);if(N&&E.push(null),A.previous=a,a&&(a.next=A),a=A,i.defineSkip(A.start),i.write(E),e.parser.lazy[A.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<s&&(!i.events[C][1].end||i.events[C][1].end.offset>s))return;const j=e.events.length;let M=j,O,F;for(;M--;)if(e.events[M][0]==="exit"&&e.events[M][1].type==="chunkFlow"){if(O){F=e.events[M][1].end;break}O=!0}for(D(n),C=j;C<e.events.length;)e.events[C][1].end={...F},C++;Gi(e.events,M+1,0,e.events.slice(j)),e.events.length=C}}function D(A){let N=t.length;for(;N-- >A;){const E=t[N];e.containerState=E[1],E[0].exit.call(e,r)}t.length=A}function _(){i.write([null]),a=void 0,i=void 0,e.containerState._closeFlow=void 0}}function dH(r,e,t){return Rt(r,r.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function bp(r){if(r===null||nn(r)||Fd(r))return 1;if(C1(r))return 2}function N1(r,e,t){const n=[];let i=-1;for(;++i<r.length;){const a=r[i].resolveAll;a&&!n.includes(a)&&(e=a(e,t),n.push(a))}return e}const aA={name:"attention",resolveAll:hH,tokenize:fH};function hH(r,e){let t=-1,n,i,a,s,l,u,d,h;for(;++t<r.length;)if(r[t][0]==="enter"&&r[t][1].type==="attentionSequence"&&r[t][1]._close){for(n=t;n--;)if(r[n][0]==="exit"&&r[n][1].type==="attentionSequence"&&r[n][1]._open&&e.sliceSerialize(r[n][1]).charCodeAt(0)===e.sliceSerialize(r[t][1]).charCodeAt(0)){if((r[n][1]._close||r[t][1]._open)&&(r[t][1].end.offset-r[t][1].start.offset)%3&&!((r[n][1].end.offset-r[n][1].start.offset+r[t][1].end.offset-r[t][1].start.offset)%3))continue;u=r[n][1].end.offset-r[n][1].start.offset>1&&r[t][1].end.offset-r[t][1].start.offset>1?2:1;const g={...r[n][1].end},b={...r[t][1].start};G4(g,-u),G4(b,u),s={type:u>1?"strongSequence":"emphasisSequence",start:g,end:{...r[n][1].end}},l={type:u>1?"strongSequence":"emphasisSequence",start:{...r[t][1].start},end:b},a={type:u>1?"strongText":"emphasisText",start:{...r[n][1].end},end:{...r[t][1].start}},i={type:u>1?"strong":"emphasis",start:{...s.start},end:{...l.end}},r[n][1].end={...s.start},r[t][1].start={...l.end},d=[],r[n][1].end.offset-r[n][1].start.offset&&(d=va(d,[["enter",r[n][1],e],["exit",r[n][1],e]])),d=va(d,[["enter",i,e],["enter",s,e],["exit",s,e],["enter",a,e]]),d=va(d,N1(e.parser.constructs.insideSpan.null,r.slice(n+1,t),e)),d=va(d,[["exit",a,e],["enter",l,e],["exit",l,e],["exit",i,e]]),r[t][1].end.offset-r[t][1].start.offset?(h=2,d=va(d,[["enter",r[t][1],e],["exit",r[t][1],e]])):h=0,Gi(r,n-1,t-n+3,d),t=n+d.length-h-2;break}}for(t=-1;++t<r.length;)r[t][1].type==="attentionSequence"&&(r[t][1].type="data");return r}function fH(r,e){const t=this.parser.constructs.attentionMarkers.null,n=this.previous,i=bp(n);let a;return s;function s(u){return a=u,r.enter("attentionSequence"),l(u)}function l(u){if(u===a)return r.consume(u),l;const d=r.exit("attentionSequence"),h=bp(u),g=!h||h===2&&i||t.includes(u),b=!i||i===2&&h||t.includes(n);return d._open=!!(a===42?g:g&&(i||!b)),d._close=!!(a===42?b:b&&(h||!g)),e(u)}}function G4(r,e){r.column+=e,r.offset+=e,r._bufferIndex+=e}const pH={name:"autolink",tokenize:gH};function gH(r,e,t){let n=0;return i;function i(x){return r.enter("autolink"),r.enter("autolinkMarker"),r.consume(x),r.exit("autolinkMarker"),r.enter("autolinkProtocol"),a}function a(x){return Gr(x)?(r.consume(x),s):x===64?t(x):d(x)}function s(x){return x===43||x===45||x===46||Rr(x)?(n=1,l(x)):d(x)}function l(x){return x===58?(r.consume(x),n=0,u):(x===43||x===45||x===46||Rr(x))&&n++<32?(r.consume(x),l):(n=0,d(x))}function u(x){return x===62?(r.exit("autolinkProtocol"),r.enter("autolinkMarker"),r.consume(x),r.exit("autolinkMarker"),r.exit("autolink"),e):x===null||x===32||x===60||wv(x)?t(x):(r.consume(x),u)}function d(x){return x===64?(r.consume(x),h):iH(x)?(r.consume(x),d):t(x)}function h(x){return Rr(x)?g(x):t(x)}function g(x){return x===46?(r.consume(x),n=0,h):x===62?(r.exit("autolinkProtocol").type="autolinkEmail",r.enter("autolinkMarker"),r.consume(x),r.exit("autolinkMarker"),r.exit("autolink"),e):b(x)}function b(x){if((x===45||Rr(x))&&n++<63){const k=x===45?b:g;return r.consume(x),k}return t(x)}}const bx={partial:!0,tokenize:mH};function mH(r,e,t){return n;function n(a){return Et(a)?Rt(r,i,"linePrefix")(a):i(a)}function i(a){return a===null||st(a)?e(a):t(a)}}const y6={continuation:{tokenize:xH},exit:yH,name:"blockQuote",tokenize:bH};function bH(r,e,t){const n=this;return i;function i(s){if(s===62){const l=n.containerState;return l.open||(r.enter("blockQuote",{_container:!0}),l.open=!0),r.enter("blockQuotePrefix"),r.enter("blockQuoteMarker"),r.consume(s),r.exit("blockQuoteMarker"),a}return t(s)}function a(s){return Et(s)?(r.enter("blockQuotePrefixWhitespace"),r.consume(s),r.exit("blockQuotePrefixWhitespace"),r.exit("blockQuotePrefix"),e):(r.exit("blockQuotePrefix"),e(s))}}function xH(r,e,t){const n=this;return i;function i(s){return Et(s)?Rt(r,a,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):a(s)}function a(s){return r.attempt(y6,e,t)(s)}}function yH(r){r.exit("blockQuote")}const v6={name:"characterEscape",tokenize:vH};function vH(r,e,t){return n;function n(a){return r.enter("characterEscape"),r.enter("escapeMarker"),r.consume(a),r.exit("escapeMarker"),i}function i(a){return sH(a)?(r.enter("characterEscapeValue"),r.consume(a),r.exit("characterEscapeValue"),r.exit("characterEscape"),e):t(a)}}const w6={name:"characterReference",tokenize:wH};function wH(r,e,t){const n=this;let i=0,a,s;return l;function l(g){return r.enter("characterReference"),r.enter("characterReferenceMarker"),r.consume(g),r.exit("characterReferenceMarker"),u}function u(g){return g===35?(r.enter("characterReferenceMarkerNumeric"),r.consume(g),r.exit("characterReferenceMarkerNumeric"),d):(r.enter("characterReferenceValue"),a=31,s=Rr,h(g))}function d(g){return g===88||g===120?(r.enter("characterReferenceMarkerHexadecimal"),r.consume(g),r.exit("characterReferenceMarkerHexadecimal"),r.enter("characterReferenceValue"),a=6,s=aH,h):(r.enter("characterReferenceValue"),a=7,s=iA,h(g))}function h(g){if(g===59&&i){const b=r.exit("characterReferenceValue");return s===Rr&&!NS(n.sliceSerialize(b))?t(g):(r.enter("characterReferenceMarker"),r.consume(g),r.exit("characterReferenceMarker"),r.exit("characterReference"),e)}return s(g)&&i++<a?(r.consume(g),h):t(g)}}const $4={partial:!0,tokenize:DH},Y4={concrete:!0,name:"codeFenced",tokenize:kH};function kH(r,e,t){const n=this,i={partial:!0,tokenize:E};let a=0,s=0,l;return u;function u(C){return d(C)}function d(C){const j=n.events[n.events.length-1];return a=j&&j[1].type==="linePrefix"?j[2].sliceSerialize(j[1],!0).length:0,l=C,r.enter("codeFenced"),r.enter("codeFencedFence"),r.enter("codeFencedFenceSequence"),h(C)}function h(C){return C===l?(s++,r.consume(C),h):s<3?t(C):(r.exit("codeFencedFenceSequence"),Et(C)?Rt(r,g,"whitespace")(C):g(C))}function g(C){return C===null||st(C)?(r.exit("codeFencedFence"),n.interrupt?e(C):r.check($4,v,N)(C)):(r.enter("codeFencedFenceInfo"),r.enter("chunkString",{contentType:"string"}),b(C))}function b(C){return C===null||st(C)?(r.exit("chunkString"),r.exit("codeFencedFenceInfo"),g(C)):Et(C)?(r.exit("chunkString"),r.exit("codeFencedFenceInfo"),Rt(r,x,"whitespace")(C)):C===96&&C===l?t(C):(r.consume(C),b)}function x(C){return C===null||st(C)?g(C):(r.enter("codeFencedFenceMeta"),r.enter("chunkString",{contentType:"string"}),k(C))}function k(C){return C===null||st(C)?(r.exit("chunkString"),r.exit("codeFencedFenceMeta"),g(C)):C===96&&C===l?t(C):(r.consume(C),k)}function v(C){return r.attempt(i,N,w)(C)}function w(C){return r.enter("lineEnding"),r.consume(C),r.exit("lineEnding"),D}function D(C){return a>0&&Et(C)?Rt(r,_,"linePrefix",a+1)(C):_(C)}function _(C){return C===null||st(C)?r.check($4,v,N)(C):(r.enter("codeFlowValue"),A(C))}function A(C){return C===null||st(C)?(r.exit("codeFlowValue"),_(C)):(r.consume(C),A)}function N(C){return r.exit("codeFenced"),e(C)}function E(C,j,M){let O=0;return F;function F(X){return C.enter("lineEnding"),C.consume(X),C.exit("lineEnding"),G}function G(X){return C.enter("codeFencedFence"),Et(X)?Rt(C,R,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(X):R(X)}function R(X){return X===l?(C.enter("codeFencedFenceSequence"),W(X)):M(X)}function W(X){return X===l?(O++,C.consume(X),W):O>=s?(C.exit("codeFencedFenceSequence"),Et(X)?Rt(C,U,"whitespace")(X):U(X)):M(X)}function U(X){return X===null||st(X)?(C.exit("codeFencedFence"),j(X)):M(X)}}}function DH(r,e,t){const n=this;return i;function i(s){return s===null?t(s):(r.enter("lineEnding"),r.consume(s),r.exit("lineEnding"),a)}function a(s){return n.parser.lazy[n.now().line]?t(s):e(s)}}const dD={name:"codeIndented",tokenize:AH},_H={partial:!0,tokenize:SH};function AH(r,e,t){const n=this;return i;function i(d){return r.enter("codeIndented"),Rt(r,a,"linePrefix",5)(d)}function a(d){const h=n.events[n.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?s(d):t(d)}function s(d){return d===null?u(d):st(d)?r.attempt(_H,s,u)(d):(r.enter("codeFlowValue"),l(d))}function l(d){return d===null||st(d)?(r.exit("codeFlowValue"),s(d)):(r.consume(d),l)}function u(d){return r.exit("codeIndented"),e(d)}}function SH(r,e,t){const n=this;return i;function i(s){return n.parser.lazy[n.now().line]?t(s):st(s)?(r.enter("lineEnding"),r.consume(s),r.exit("lineEnding"),i):Rt(r,a,"linePrefix",5)(s)}function a(s){const l=n.events[n.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(s):st(s)?i(s):t(s)}}const EH={name:"codeText",previous:CH,resolve:TH,tokenize:NH};function TH(r){let e=r.length-4,t=3,n,i;if((r[t][1].type==="lineEnding"||r[t][1].type==="space")&&(r[e][1].type==="lineEnding"||r[e][1].type==="space")){for(n=t;++n<e;)if(r[n][1].type==="codeTextData"){r[t][1].type="codeTextPadding",r[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(n=t-1,e++;++n<=e;)i===void 0?n!==e&&r[n][1].type!=="lineEnding"&&(i=n):(n===e||r[n][1].type==="lineEnding")&&(r[i][1].type="codeTextData",n!==i+2&&(r[i][1].end=r[n-1][1].end,r.splice(i+2,n-i-2),e-=n-i-2,n=i+2),i=void 0);return r}function CH(r){return r!==96||this.events[this.events.length-1][1].type==="characterEscape"}function NH(r,e,t){let n=0,i,a;return s;function s(g){return r.enter("codeText"),r.enter("codeTextSequence"),l(g)}function l(g){return g===96?(r.consume(g),n++,l):(r.exit("codeTextSequence"),u(g))}function u(g){return g===null?t(g):g===32?(r.enter("space"),r.consume(g),r.exit("space"),u):g===96?(a=r.enter("codeTextSequence"),i=0,h(g)):st(g)?(r.enter("lineEnding"),r.consume(g),r.exit("lineEnding"),u):(r.enter("codeTextData"),d(g))}function d(g){return g===null||g===32||g===96||st(g)?(r.exit("codeTextData"),u(g)):(r.consume(g),d)}function h(g){return g===96?(r.consume(g),i++,h):i===n?(r.exit("codeTextSequence"),r.exit("codeText"),e(g)):(a.type="codeTextData",d(g))}}class UH{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=t??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const i=t||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return n&&Pg(this.left,n),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Pg(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Pg(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);Pg(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Pg(this.left,t.reverse())}}}function Pg(r,e){let t=0;if(e.length<1e4)r.push(...e);else for(;t<e.length;)r.push(...e.slice(t,t+1e4)),t+=1e4}function k6(r){const e={};let t=-1,n,i,a,s,l,u,d;const h=new UH(r);for(;++t<h.length;){for(;t in e;)t=e[t];if(n=h.get(t),t&&n[1].type==="chunkFlow"&&h.get(t-1)[1].type==="listItemPrefix"&&(u=n[1]._tokenizer.events,a=0,a<u.length&&u[a][1].type==="lineEndingBlank"&&(a+=2),a<u.length&&u[a][1].type==="content"))for(;++a<u.length&&u[a][1].type!=="content";)u[a][1].type==="chunkText"&&(u[a][1]._isInFirstContentOfListItem=!0,a++);if(n[0]==="enter")n[1].contentType&&(Object.assign(e,RH(h,t)),t=e[t],d=!0);else if(n[1]._container){for(a=t,i=void 0;a--;)if(s=h.get(a),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(i&&(h.get(i)[1].type="lineEndingBlank"),s[1].type="lineEnding",i=a);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;i&&(n[1].end={...h.get(i)[1].start},l=h.slice(i,t),l.unshift(n),h.splice(i,t-i+1,l))}}return Gi(r,0,Number.POSITIVE_INFINITY,h.slice(0)),!d}function RH(r,e){const t=r.get(e)[1],n=r.get(e)[2];let i=e-1;const a=[];let s=t._tokenizer;s||(s=n.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const l=s.events,u=[],d={};let h,g,b=-1,x=t,k=0,v=0;const w=[v];for(;x;){for(;r.get(++i)[1]!==x;);a.push(i),x._tokenizer||(h=n.sliceStream(x),x.next||h.push(null),g&&s.defineSkip(x.start),x._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(h),x._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),g=x,x=x.next}for(x=t;++b<l.length;)l[b][0]==="exit"&&l[b-1][0]==="enter"&&l[b][1].type===l[b-1][1].type&&l[b][1].start.line!==l[b][1].end.line&&(v=b+1,w.push(v),x._tokenizer=void 0,x.previous=void 0,x=x.next);for(s.events=[],x?(x._tokenizer=void 0,x.previous=void 0):w.pop(),b=w.length;b--;){const D=l.slice(w[b],w[b+1]),_=a.pop();u.push([_,_+D.length-1]),r.splice(_,2,D)}for(u.reverse(),b=-1;++b<u.length;)d[k+u[b][0]]=k+u[b][1],k+=u[b][1]-u[b][0]-1;return d}const jH={resolve:IH,tokenize:OH},FH={partial:!0,tokenize:MH};function IH(r){return k6(r),r}function OH(r,e){let t;return n;function n(l){return r.enter("content"),t=r.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?a(l):st(l)?r.check(FH,s,a)(l):(r.consume(l),i)}function a(l){return r.exit("chunkContent"),r.exit("content"),e(l)}function s(l){return r.consume(l),r.exit("chunkContent"),t.next=r.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function MH(r,e,t){const n=this;return i;function i(s){return r.exit("chunkContent"),r.enter("lineEnding"),r.consume(s),r.exit("lineEnding"),Rt(r,a,"linePrefix")}function a(s){if(s===null||st(s))return t(s);const l=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(s):r.interrupt(n.parser.constructs.flow,t,e)(s)}}function D6(r,e,t,n,i,a,s,l,u){const d=u||Number.POSITIVE_INFINITY;let h=0;return g;function g(D){return D===60?(r.enter(n),r.enter(i),r.enter(a),r.consume(D),r.exit(a),b):D===null||D===32||D===41||wv(D)?t(D):(r.enter(n),r.enter(s),r.enter(l),r.enter("chunkString",{contentType:"string"}),v(D))}function b(D){return D===62?(r.enter(a),r.consume(D),r.exit(a),r.exit(i),r.exit(n),e):(r.enter(l),r.enter("chunkString",{contentType:"string"}),x(D))}function x(D){return D===62?(r.exit("chunkString"),r.exit(l),b(D)):D===null||D===60||st(D)?t(D):(r.consume(D),D===92?k:x)}function k(D){return D===60||D===62||D===92?(r.consume(D),x):x(D)}function v(D){return!h&&(D===null||D===41||nn(D))?(r.exit("chunkString"),r.exit(l),r.exit(s),r.exit(n),e(D)):h<d&&D===40?(r.consume(D),h++,v):D===41?(r.consume(D),h--,v):D===null||D===32||D===40||wv(D)?t(D):(r.consume(D),D===92?w:v)}function w(D){return D===40||D===41||D===92?(r.consume(D),v):v(D)}}function _6(r,e,t,n,i,a){const s=this;let l=0,u;return d;function d(x){return r.enter(n),r.enter(i),r.consume(x),r.exit(i),r.enter(a),h}function h(x){return l>999||x===null||x===91||x===93&&!u||x===94&&!l&&"_hiddenFootnoteSupport"in s.parser.constructs?t(x):x===93?(r.exit(a),r.enter(i),r.consume(x),r.exit(i),r.exit(n),e):st(x)?(r.enter("lineEnding"),r.consume(x),r.exit("lineEnding"),h):(r.enter("chunkString",{contentType:"string"}),g(x))}function g(x){return x===null||x===91||x===93||st(x)||l++>999?(r.exit("chunkString"),h(x)):(r.consume(x),u||(u=!Et(x)),x===92?b:g)}function b(x){return x===91||x===92||x===93?(r.consume(x),l++,g):g(x)}}function A6(r,e,t,n,i,a){let s;return l;function l(b){return b===34||b===39||b===40?(r.enter(n),r.enter(i),r.consume(b),r.exit(i),s=b===40?41:b,u):t(b)}function u(b){return b===s?(r.enter(i),r.consume(b),r.exit(i),r.exit(n),e):(r.enter(a),d(b))}function d(b){return b===s?(r.exit(a),u(s)):b===null?t(b):st(b)?(r.enter("lineEnding"),r.consume(b),r.exit("lineEnding"),Rt(r,d,"linePrefix")):(r.enter("chunkString",{contentType:"string"}),h(b))}function h(b){return b===s||b===null||st(b)?(r.exit("chunkString"),d(b)):(r.consume(b),b===92?g:h)}function g(b){return b===s||b===92?(r.consume(b),h):h(b)}}function cm(r,e){let t;return n;function n(i){return st(i)?(r.enter("lineEnding"),r.consume(i),r.exit("lineEnding"),t=!0,n):Et(i)?Rt(r,n,t?"linePrefix":"lineSuffix")(i):e(i)}}const LH={name:"definition",tokenize:PH},BH={partial:!0,tokenize:zH};function PH(r,e,t){const n=this;let i;return a;function a(x){return r.enter("definition"),s(x)}function s(x){return _6.call(n,r,l,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(x)}function l(x){return i=Ya(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),x===58?(r.enter("definitionMarker"),r.consume(x),r.exit("definitionMarker"),u):t(x)}function u(x){return nn(x)?cm(r,d)(x):d(x)}function d(x){return D6(r,h,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(x)}function h(x){return r.attempt(BH,g,g)(x)}function g(x){return Et(x)?Rt(r,b,"whitespace")(x):b(x)}function b(x){return x===null||st(x)?(r.exit("definition"),n.parser.defined.push(i),e(x)):t(x)}}function zH(r,e,t){return n;function n(l){return nn(l)?cm(r,i)(l):t(l)}function i(l){return A6(r,a,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function a(l){return Et(l)?Rt(r,s,"whitespace")(l):s(l)}function s(l){return l===null||st(l)?e(l):t(l)}}const WH={name:"hardBreakEscape",tokenize:HH};function HH(r,e,t){return n;function n(a){return r.enter("hardBreakEscape"),r.consume(a),i}function i(a){return st(a)?(r.exit("hardBreakEscape"),e(a)):t(a)}}const qH={name:"headingAtx",resolve:VH,tokenize:XH};function VH(r,e){let t=r.length-2,n=3,i,a;return r[n][1].type==="whitespace"&&(n+=2),t-2>n&&r[t][1].type==="whitespace"&&(t-=2),r[t][1].type==="atxHeadingSequence"&&(n===t-1||t-4>n&&r[t-2][1].type==="whitespace")&&(t-=n+1===t?2:4),t>n&&(i={type:"atxHeadingText",start:r[n][1].start,end:r[t][1].end},a={type:"chunkText",start:r[n][1].start,end:r[t][1].end,contentType:"text"},Gi(r,n,t-n+1,[["enter",i,e],["enter",a,e],["exit",a,e],["exit",i,e]])),r}function XH(r,e,t){let n=0;return i;function i(h){return r.enter("atxHeading"),a(h)}function a(h){return r.enter("atxHeadingSequence"),s(h)}function s(h){return h===35&&n++<6?(r.consume(h),s):h===null||nn(h)?(r.exit("atxHeadingSequence"),l(h)):t(h)}function l(h){return h===35?(r.enter("atxHeadingSequence"),u(h)):h===null||st(h)?(r.exit("atxHeading"),e(h)):Et(h)?Rt(r,l,"whitespace")(h):(r.enter("atxHeadingText"),d(h))}function u(h){return h===35?(r.consume(h),u):(r.exit("atxHeadingSequence"),l(h))}function d(h){return h===null||h===35||nn(h)?(r.exit("atxHeadingText"),l(h)):(r.consume(h),d)}}const GH=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],K4=["pre","script","style","textarea"],$H={concrete:!0,name:"htmlFlow",resolveTo:QH,tokenize:ZH},YH={partial:!0,tokenize:eq},KH={partial:!0,tokenize:JH};function QH(r){let e=r.length;for(;e--&&!(r[e][0]==="enter"&&r[e][1].type==="htmlFlow"););return e>1&&r[e-2][1].type==="linePrefix"&&(r[e][1].start=r[e-2][1].start,r[e+1][1].start=r[e-2][1].start,r.splice(e-2,2)),r}function ZH(r,e,t){const n=this;let i,a,s,l,u;return d;function d(z){return h(z)}function h(z){return r.enter("htmlFlow"),r.enter("htmlFlowData"),r.consume(z),g}function g(z){return z===33?(r.consume(z),b):z===47?(r.consume(z),a=!0,v):z===63?(r.consume(z),i=3,n.interrupt?e:H):Gr(z)?(r.consume(z),s=String.fromCharCode(z),w):t(z)}function b(z){return z===45?(r.consume(z),i=2,x):z===91?(r.consume(z),i=5,l=0,k):Gr(z)?(r.consume(z),i=4,n.interrupt?e:H):t(z)}function x(z){return z===45?(r.consume(z),n.interrupt?e:H):t(z)}function k(z){const ge="CDATA[";return z===ge.charCodeAt(l++)?(r.consume(z),l===ge.length?n.interrupt?e:R:k):t(z)}function v(z){return Gr(z)?(r.consume(z),s=String.fromCharCode(z),w):t(z)}function w(z){if(z===null||z===47||z===62||nn(z)){const ge=z===47,ve=s.toLowerCase();return!ge&&!a&&K4.includes(ve)?(i=1,n.interrupt?e(z):R(z)):GH.includes(s.toLowerCase())?(i=6,ge?(r.consume(z),D):n.interrupt?e(z):R(z)):(i=7,n.interrupt&&!n.parser.lazy[n.now().line]?t(z):a?_(z):A(z))}return z===45||Rr(z)?(r.consume(z),s+=String.fromCharCode(z),w):t(z)}function D(z){return z===62?(r.consume(z),n.interrupt?e:R):t(z)}function _(z){return Et(z)?(r.consume(z),_):F(z)}function A(z){return z===47?(r.consume(z),F):z===58||z===95||Gr(z)?(r.consume(z),N):Et(z)?(r.consume(z),A):F(z)}function N(z){return z===45||z===46||z===58||z===95||Rr(z)?(r.consume(z),N):E(z)}function E(z){return z===61?(r.consume(z),C):Et(z)?(r.consume(z),E):A(z)}function C(z){return z===null||z===60||z===61||z===62||z===96?t(z):z===34||z===39?(r.consume(z),u=z,j):Et(z)?(r.consume(z),C):M(z)}function j(z){return z===u?(r.consume(z),u=null,O):z===null||st(z)?t(z):(r.consume(z),j)}function M(z){return z===null||z===34||z===39||z===47||z===60||z===61||z===62||z===96||nn(z)?E(z):(r.consume(z),M)}function O(z){return z===47||z===62||Et(z)?A(z):t(z)}function F(z){return z===62?(r.consume(z),G):t(z)}function G(z){return z===null||st(z)?R(z):Et(z)?(r.consume(z),G):t(z)}function R(z){return z===45&&i===2?(r.consume(z),P):z===60&&i===1?(r.consume(z),B):z===62&&i===4?(r.consume(z),J):z===63&&i===3?(r.consume(z),H):z===93&&i===5?(r.consume(z),Y):st(z)&&(i===6||i===7)?(r.exit("htmlFlowData"),r.check(YH,ie,W)(z)):z===null||st(z)?(r.exit("htmlFlowData"),W(z)):(r.consume(z),R)}function W(z){return r.check(KH,U,ie)(z)}function U(z){return r.enter("lineEnding"),r.consume(z),r.exit("lineEnding"),X}function X(z){return z===null||st(z)?W(z):(r.enter("htmlFlowData"),R(z))}function P(z){return z===45?(r.consume(z),H):R(z)}function B(z){return z===47?(r.consume(z),s="",ee):R(z)}function ee(z){if(z===62){const ge=s.toLowerCase();return K4.includes(ge)?(r.consume(z),J):R(z)}return Gr(z)&&s.length<8?(r.consume(z),s+=String.fromCharCode(z),ee):R(z)}function Y(z){return z===93?(r.consume(z),H):R(z)}function H(z){return z===62?(r.consume(z),J):z===45&&i===2?(r.consume(z),H):R(z)}function J(z){return z===null||st(z)?(r.exit("htmlFlowData"),ie(z)):(r.consume(z),J)}function ie(z){return r.exit("htmlFlow"),e(z)}}function JH(r,e,t){const n=this;return i;function i(s){return st(s)?(r.enter("lineEnding"),r.consume(s),r.exit("lineEnding"),a):t(s)}function a(s){return n.parser.lazy[n.now().line]?t(s):e(s)}}function eq(r,e,t){return n;function n(i){return r.enter("lineEnding"),r.consume(i),r.exit("lineEnding"),r.attempt(bx,e,t)}}const tq={name:"htmlText",tokenize:nq};function nq(r,e,t){const n=this;let i,a,s;return l;function l(H){return r.enter("htmlText"),r.enter("htmlTextData"),r.consume(H),u}function u(H){return H===33?(r.consume(H),d):H===47?(r.consume(H),E):H===63?(r.consume(H),A):Gr(H)?(r.consume(H),M):t(H)}function d(H){return H===45?(r.consume(H),h):H===91?(r.consume(H),a=0,k):Gr(H)?(r.consume(H),_):t(H)}function h(H){return H===45?(r.consume(H),x):t(H)}function g(H){return H===null?t(H):H===45?(r.consume(H),b):st(H)?(s=g,B(H)):(r.consume(H),g)}function b(H){return H===45?(r.consume(H),x):g(H)}function x(H){return H===62?P(H):H===45?b(H):g(H)}function k(H){const J="CDATA[";return H===J.charCodeAt(a++)?(r.consume(H),a===J.length?v:k):t(H)}function v(H){return H===null?t(H):H===93?(r.consume(H),w):st(H)?(s=v,B(H)):(r.consume(H),v)}function w(H){return H===93?(r.consume(H),D):v(H)}function D(H){return H===62?P(H):H===93?(r.consume(H),D):v(H)}function _(H){return H===null||H===62?P(H):st(H)?(s=_,B(H)):(r.consume(H),_)}function A(H){return H===null?t(H):H===63?(r.consume(H),N):st(H)?(s=A,B(H)):(r.consume(H),A)}function N(H){return H===62?P(H):A(H)}function E(H){return Gr(H)?(r.consume(H),C):t(H)}function C(H){return H===45||Rr(H)?(r.consume(H),C):j(H)}function j(H){return st(H)?(s=j,B(H)):Et(H)?(r.consume(H),j):P(H)}function M(H){return H===45||Rr(H)?(r.consume(H),M):H===47||H===62||nn(H)?O(H):t(H)}function O(H){return H===47?(r.consume(H),P):H===58||H===95||Gr(H)?(r.consume(H),F):st(H)?(s=O,B(H)):Et(H)?(r.consume(H),O):P(H)}function F(H){return H===45||H===46||H===58||H===95||Rr(H)?(r.consume(H),F):G(H)}function G(H){return H===61?(r.consume(H),R):st(H)?(s=G,B(H)):Et(H)?(r.consume(H),G):O(H)}function R(H){return H===null||H===60||H===61||H===62||H===96?t(H):H===34||H===39?(r.consume(H),i=H,W):st(H)?(s=R,B(H)):Et(H)?(r.consume(H),R):(r.consume(H),U)}function W(H){return H===i?(r.consume(H),i=void 0,X):H===null?t(H):st(H)?(s=W,B(H)):(r.consume(H),W)}function U(H){return H===null||H===34||H===39||H===60||H===61||H===96?t(H):H===47||H===62||nn(H)?O(H):(r.consume(H),U)}function X(H){return H===47||H===62||nn(H)?O(H):t(H)}function P(H){return H===62?(r.consume(H),r.exit("htmlTextData"),r.exit("htmlText"),e):t(H)}function B(H){return r.exit("htmlTextData"),r.enter("lineEnding"),r.consume(H),r.exit("lineEnding"),ee}function ee(H){return Et(H)?Rt(r,Y,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):Y(H)}function Y(H){return r.enter("htmlTextData"),s(H)}}const US={name:"labelEnd",resolveAll:sq,resolveTo:oq,tokenize:lq},rq={tokenize:cq},iq={tokenize:uq},aq={tokenize:dq};function sq(r){let e=-1;const t=[];for(;++e<r.length;){const n=r[e][1];if(t.push(r[e]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const i=n.type==="labelImage"?4:2;n.type="data",e+=i}}return r.length!==t.length&&Gi(r,0,r.length,t),r}function oq(r,e){let t=r.length,n=0,i,a,s,l;for(;t--;)if(i=r[t][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;r[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(s){if(r[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=t,i.type!=="labelLink")){n=2;break}}else i.type==="labelEnd"&&(s=t);const u={type:r[a][1].type==="labelLink"?"link":"image",start:{...r[a][1].start},end:{...r[r.length-1][1].end}},d={type:"label",start:{...r[a][1].start},end:{...r[s][1].end}},h={type:"labelText",start:{...r[a+n+2][1].end},end:{...r[s-2][1].start}};return l=[["enter",u,e],["enter",d,e]],l=va(l,r.slice(a+1,a+n+3)),l=va(l,[["enter",h,e]]),l=va(l,N1(e.parser.constructs.insideSpan.null,r.slice(a+n+4,s-3),e)),l=va(l,[["exit",h,e],r[s-2],r[s-1],["exit",d,e]]),l=va(l,r.slice(s+1)),l=va(l,[["exit",u,e]]),Gi(r,a,r.length,l),r}function lq(r,e,t){const n=this;let i=n.events.length,a,s;for(;i--;)if((n.events[i][1].type==="labelImage"||n.events[i][1].type==="labelLink")&&!n.events[i][1]._balanced){a=n.events[i][1];break}return l;function l(b){return a?a._inactive?g(b):(s=n.parser.defined.includes(Ya(n.sliceSerialize({start:a.end,end:n.now()}))),r.enter("labelEnd"),r.enter("labelMarker"),r.consume(b),r.exit("labelMarker"),r.exit("labelEnd"),u):t(b)}function u(b){return b===40?r.attempt(rq,h,s?h:g)(b):b===91?r.attempt(iq,h,s?d:g)(b):s?h(b):g(b)}function d(b){return r.attempt(aq,h,g)(b)}function h(b){return e(b)}function g(b){return a._balanced=!0,t(b)}}function cq(r,e,t){return n;function n(g){return r.enter("resource"),r.enter("resourceMarker"),r.consume(g),r.exit("resourceMarker"),i}function i(g){return nn(g)?cm(r,a)(g):a(g)}function a(g){return g===41?h(g):D6(r,s,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function s(g){return nn(g)?cm(r,u)(g):h(g)}function l(g){return t(g)}function u(g){return g===34||g===39||g===40?A6(r,d,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):h(g)}function d(g){return nn(g)?cm(r,h)(g):h(g)}function h(g){return g===41?(r.enter("resourceMarker"),r.consume(g),r.exit("resourceMarker"),r.exit("resource"),e):t(g)}}function uq(r,e,t){const n=this;return i;function i(l){return _6.call(n,r,a,s,"reference","referenceMarker","referenceString")(l)}function a(l){return n.parser.defined.includes(Ya(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?e(l):t(l)}function s(l){return t(l)}}function dq(r,e,t){return n;function n(a){return r.enter("reference"),r.enter("referenceMarker"),r.consume(a),r.exit("referenceMarker"),i}function i(a){return a===93?(r.enter("referenceMarker"),r.consume(a),r.exit("referenceMarker"),r.exit("reference"),e):t(a)}}const hq={name:"labelStartImage",resolveAll:US.resolveAll,tokenize:fq};function fq(r,e,t){const n=this;return i;function i(l){return r.enter("labelImage"),r.enter("labelImageMarker"),r.consume(l),r.exit("labelImageMarker"),a}function a(l){return l===91?(r.enter("labelMarker"),r.consume(l),r.exit("labelMarker"),r.exit("labelImage"),s):t(l)}function s(l){return l===94&&"_hiddenFootnoteSupport"in n.parser.constructs?t(l):e(l)}}const pq={name:"labelStartLink",resolveAll:US.resolveAll,tokenize:gq};function gq(r,e,t){const n=this;return i;function i(s){return r.enter("labelLink"),r.enter("labelMarker"),r.consume(s),r.exit("labelMarker"),r.exit("labelLink"),a}function a(s){return s===94&&"_hiddenFootnoteSupport"in n.parser.constructs?t(s):e(s)}}const hD={name:"lineEnding",tokenize:mq};function mq(r,e){return t;function t(n){return r.enter("lineEnding"),r.consume(n),r.exit("lineEnding"),Rt(r,e,"linePrefix")}}const tv={name:"thematicBreak",tokenize:bq};function bq(r,e,t){let n=0,i;return a;function a(d){return r.enter("thematicBreak"),s(d)}function s(d){return i=d,l(d)}function l(d){return d===i?(r.enter("thematicBreakSequence"),u(d)):n>=3&&(d===null||st(d))?(r.exit("thematicBreak"),e(d)):t(d)}function u(d){return d===i?(r.consume(d),n++,u):(r.exit("thematicBreakSequence"),Et(d)?Rt(r,l,"whitespace")(d):l(d))}}const ri={continuation:{tokenize:wq},exit:Dq,name:"list",tokenize:vq},xq={partial:!0,tokenize:_q},yq={partial:!0,tokenize:kq};function vq(r,e,t){const n=this,i=n.events[n.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,s=0;return l;function l(x){const k=n.containerState.type||(x===42||x===43||x===45?"listUnordered":"listOrdered");if(k==="listUnordered"?!n.containerState.marker||x===n.containerState.marker:iA(x)){if(n.containerState.type||(n.containerState.type=k,r.enter(k,{_container:!0})),k==="listUnordered")return r.enter("listItemPrefix"),x===42||x===45?r.check(tv,t,d)(x):d(x);if(!n.interrupt||x===49)return r.enter("listItemPrefix"),r.enter("listItemValue"),u(x)}return t(x)}function u(x){return iA(x)&&++s<10?(r.consume(x),u):(!n.interrupt||s<2)&&(n.containerState.marker?x===n.containerState.marker:x===41||x===46)?(r.exit("listItemValue"),d(x)):t(x)}function d(x){return r.enter("listItemMarker"),r.consume(x),r.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||x,r.check(bx,n.interrupt?t:h,r.attempt(xq,b,g))}function h(x){return n.containerState.initialBlankLine=!0,a++,b(x)}function g(x){return Et(x)?(r.enter("listItemPrefixWhitespace"),r.consume(x),r.exit("listItemPrefixWhitespace"),b):t(x)}function b(x){return n.containerState.size=a+n.sliceSerialize(r.exit("listItemPrefix"),!0).length,e(x)}}function wq(r,e,t){const n=this;return n.containerState._closeFlow=void 0,r.check(bx,i,a);function i(l){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,Rt(r,e,"listItemIndent",n.containerState.size+1)(l)}function a(l){return n.containerState.furtherBlankLines||!Et(l)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,s(l)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,r.attempt(yq,e,s)(l))}function s(l){return n.containerState._closeFlow=!0,n.interrupt=void 0,Rt(r,r.attempt(ri,e,t),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function kq(r,e,t){const n=this;return Rt(r,i,"listItemIndent",n.containerState.size+1);function i(a){const s=n.events[n.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===n.containerState.size?e(a):t(a)}}function Dq(r){r.exit(this.containerState.type)}function _q(r,e,t){const n=this;return Rt(r,i,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const s=n.events[n.events.length-1];return!Et(a)&&s&&s[1].type==="listItemPrefixWhitespace"?e(a):t(a)}}const Q4={name:"setextUnderline",resolveTo:Aq,tokenize:Sq};function Aq(r,e){let t=r.length,n,i,a;for(;t--;)if(r[t][0]==="enter"){if(r[t][1].type==="content"){n=t;break}r[t][1].type==="paragraph"&&(i=t)}else r[t][1].type==="content"&&r.splice(t,1),!a&&r[t][1].type==="definition"&&(a=t);const s={type:"setextHeading",start:{...r[n][1].start},end:{...r[r.length-1][1].end}};return r[i][1].type="setextHeadingText",a?(r.splice(i,0,["enter",s,e]),r.splice(a+1,0,["exit",r[n][1],e]),r[n][1].end={...r[a][1].end}):r[n][1]=s,r.push(["exit",s,e]),r}function Sq(r,e,t){const n=this;let i;return a;function a(d){let h=n.events.length,g;for(;h--;)if(n.events[h][1].type!=="lineEnding"&&n.events[h][1].type!=="linePrefix"&&n.events[h][1].type!=="content"){g=n.events[h][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||g)?(r.enter("setextHeadingLine"),i=d,s(d)):t(d)}function s(d){return r.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===i?(r.consume(d),l):(r.exit("setextHeadingLineSequence"),Et(d)?Rt(r,u,"lineSuffix")(d):u(d))}function u(d){return d===null||st(d)?(r.exit("setextHeadingLine"),e(d)):t(d)}}const Eq={tokenize:Tq};function Tq(r){const e=this,t=r.attempt(bx,n,r.attempt(this.parser.constructs.flowInitial,i,Rt(r,r.attempt(this.parser.constructs.flow,i,r.attempt(jH,i)),"linePrefix")));return t;function n(a){if(a===null){r.consume(a);return}return r.enter("lineEndingBlank"),r.consume(a),r.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function i(a){if(a===null){r.consume(a);return}return r.enter("lineEnding"),r.consume(a),r.exit("lineEnding"),e.currentConstruct=void 0,t}}const Cq={resolveAll:E6()},Nq=S6("string"),Uq=S6("text");function S6(r){return{resolveAll:E6(r==="text"?Rq:void 0),tokenize:e};function e(t){const n=this,i=this.parser.constructs[r],a=t.attempt(i,s,l);return s;function s(h){return d(h)?a(h):l(h)}function l(h){if(h===null){t.consume(h);return}return t.enter("data"),t.consume(h),u}function u(h){return d(h)?(t.exit("data"),a(h)):(t.consume(h),u)}function d(h){if(h===null)return!0;const g=i[h];let b=-1;if(g)for(;++b<g.length;){const x=g[b];if(!x.previous||x.previous.call(n,n.previous))return!0}return!1}}}function E6(r){return e;function e(t,n){let i=-1,a;for(;++i<=t.length;)a===void 0?t[i]&&t[i][1].type==="data"&&(a=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==a+2&&(t[a][1].end=t[i-1][1].end,t.splice(a+2,i-a-2),i=a+2),a=void 0);return r?r(t,n):t}}function Rq(r,e){let t=0;for(;++t<=r.length;)if((t===r.length||r[t][1].type==="lineEnding")&&r[t-1][1].type==="data"){const n=r[t-1][1],i=e.sliceStream(n);let a=i.length,s=-1,l=0,u;for(;a--;){const d=i[a];if(typeof d=="string"){for(s=d.length;d.charCodeAt(s-1)===32;)l++,s--;if(s)break;s=-1}else if(d===-2)u=!0,l++;else if(d!==-1){a++;break}}if(e._contentTypeTextTrailing&&t===r.length&&(l=0),l){const d={type:t===r.length||u||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?s:n.start._bufferIndex+s,_index:n.start._index+a,line:n.end.line,column:n.end.column-l,offset:n.end.offset-l},end:{...n.end}};n.end={...d.start},n.start.offset===n.end.offset?Object.assign(n,d):(r.splice(t,0,["enter",d,e],["exit",d,e]),t+=2)}t++}return r}const jq={42:ri,43:ri,45:ri,48:ri,49:ri,50:ri,51:ri,52:ri,53:ri,54:ri,55:ri,56:ri,57:ri,62:y6},Fq={91:LH},Iq={[-2]:dD,[-1]:dD,32:dD},Oq={35:qH,42:tv,45:[Q4,tv],60:$H,61:Q4,95:tv,96:Y4,126:Y4},Mq={38:w6,92:v6},Lq={[-5]:hD,[-4]:hD,[-3]:hD,33:hq,38:w6,42:aA,60:[pH,tq],91:pq,92:[WH,v6],93:US,95:aA,96:EH},Bq={null:[aA,Cq]},Pq={null:[42,95]},zq={null:[]},Wq=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Pq,contentInitial:Fq,disable:zq,document:jq,flow:Oq,flowInitial:Iq,insideSpan:Bq,string:Mq,text:Lq},Symbol.toStringTag,{value:"Module"}));function Hq(r,e,t){let n={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const i={},a=[];let s=[],l=[];const u={attempt:j(E),check:j(C),consume:_,enter:A,exit:N,interrupt:j(C,{interrupt:!0})},d={code:null,containerState:{},defineSkip:v,events:[],now:k,parser:r,previous:null,sliceSerialize:b,sliceStream:x,write:g};let h=e.tokenize.call(d,u);return e.resolveAll&&a.push(e),d;function g(G){return s=va(s,G),w(),s[s.length-1]!==null?[]:(M(e,0),d.events=N1(a,d.events,d),d.events)}function b(G,R){return Vq(x(G),R)}function x(G){return qq(s,G)}function k(){const{_bufferIndex:G,_index:R,line:W,column:U,offset:X}=n;return{_bufferIndex:G,_index:R,line:W,column:U,offset:X}}function v(G){i[G.line]=G.column,F()}function w(){let G;for(;n._index<s.length;){const R=s[n._index];if(typeof R=="string")for(G=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===G&&n._bufferIndex<R.length;)D(R.charCodeAt(n._bufferIndex));else D(R)}}function D(G){h=h(G)}function _(G){st(G)?(n.line++,n.column=1,n.offset+=G===-3?2:1,F()):G!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===s[n._index].length&&(n._bufferIndex=-1,n._index++)),d.previous=G}function A(G,R){const W=R||{};return W.type=G,W.start=k(),d.events.push(["enter",W,d]),l.push(W),W}function N(G){const R=l.pop();return R.end=k(),d.events.push(["exit",R,d]),R}function E(G,R){M(G,R.from)}function C(G,R){R.restore()}function j(G,R){return W;function W(U,X,P){let B,ee,Y,H;return Array.isArray(U)?ie(U):"tokenize"in U?ie([U]):J(U);function J(je){return Ie;function Ie(Pe){const fe=Pe!==null&&je[Pe],Ue=Pe!==null&&je.null,be=[...Array.isArray(fe)?fe:fe?[fe]:[],...Array.isArray(Ue)?Ue:Ue?[Ue]:[]];return ie(be)(Pe)}}function ie(je){return B=je,ee=0,je.length===0?P:z(je[ee])}function z(je){return Ie;function Ie(Pe){return H=O(),Y=je,je.partial||(d.currentConstruct=je),je.name&&d.parser.constructs.disable.null.includes(je.name)?ve():je.tokenize.call(R?Object.assign(Object.create(d),R):d,u,ge,ve)(Pe)}}function ge(je){return G(Y,H),X}function ve(je){return H.restore(),++ee<B.length?z(B[ee]):P}}}function M(G,R){G.resolveAll&&!a.includes(G)&&a.push(G),G.resolve&&Gi(d.events,R,d.events.length-R,G.resolve(d.events.slice(R),d)),G.resolveTo&&(d.events=G.resolveTo(d.events,d))}function O(){const G=k(),R=d.previous,W=d.currentConstruct,U=d.events.length,X=Array.from(l);return{from:U,restore:P};function P(){n=G,d.previous=R,d.currentConstruct=W,d.events.length=U,l=X,F()}}function F(){n.line in i&&n.column<2&&(n.column=i[n.line],n.offset+=i[n.line]-1)}}function qq(r,e){const t=e.start._index,n=e.start._bufferIndex,i=e.end._index,a=e.end._bufferIndex;let s;if(t===i)s=[r[t].slice(n,a)];else{if(s=r.slice(t,i),n>-1){const l=s[0];typeof l=="string"?s[0]=l.slice(n):s.shift()}a>0&&s.push(r[i].slice(0,a))}return s}function Vq(r,e){let t=-1;const n=[];let i;for(;++t<r.length;){const a=r[t];let s;if(typeof a=="string")s=a;else switch(a){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=e?" ":"	";break}case-1:{if(!e&&i)continue;s=" ";break}default:s=String.fromCharCode(a)}i=a===-2,n.push(s)}return n.join("")}function Xq(r){const n={constructs:b6([Wq,...(r||{}).extensions||[]]),content:i(oH),defined:[],document:i(cH),flow:i(Eq),lazy:{},string:i(Nq),text:i(Uq)};return n;function i(a){return s;function s(l){return Hq(n,a,l)}}}function Gq(r){for(;!k6(r););return r}const Z4=/[\0\t\n\r]/g;function $q(){let r=1,e="",t=!0,n;return i;function i(a,s,l){const u=[];let d,h,g,b,x;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(s||void 0).decode(a)),g=0,e="",t&&(a.charCodeAt(0)===65279&&g++,t=void 0);g<a.length;){if(Z4.lastIndex=g,d=Z4.exec(a),b=d&&d.index!==void 0?d.index:a.length,x=a.charCodeAt(b),!d){e=a.slice(g);break}if(x===10&&g===b&&n)u.push(-3),n=void 0;else switch(n&&(u.push(-5),n=void 0),g<b&&(u.push(a.slice(g,b)),r+=b-g),x){case 0:{u.push(65533),r++;break}case 9:{for(h=Math.ceil(r/4)*4,u.push(-2);r++<h;)u.push(-1);break}case 10:{u.push(-4),r=1;break}default:n=!0,r=1}g=b+1}return l&&(n&&u.push(-5),e&&u.push(e),u.push(null)),u}}const Yq=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Kq(r){return r.replace(Yq,Qq)}function Qq(r,e,t){if(e)return e;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),a=i===120||i===88;return x6(t.slice(a?2:1),a?16:10)}return NS(t)||r}const T6={}.hasOwnProperty;function Zq(r,e,t){return typeof e!="string"&&(t=e,e=void 0),Jq(t)(Gq(Xq(t).document().write($q()(r,e,!0))))}function Jq(r){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(ue),autolinkProtocol:O,autolinkEmail:O,atxHeading:a(he),blockQuote:a(Ue),characterEscape:O,characterReference:O,codeFenced:a(be),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:a(be,s),codeText:a(Fe,s),codeTextData:O,data:O,codeFlowValue:O,definition:a($e),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:a(I),hardBreakEscape:a(oe),hardBreakTrailing:a(oe),htmlFlow:a(re,s),htmlFlowData:O,htmlText:a(re,s),htmlTextData:O,image:a(ne),label:s,link:a(ue),listItem:a(Ne),listItemValue:b,listOrdered:a(Ce,g),listUnordered:a(Ce),paragraph:a(pe),reference:z,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:a(he),strong:a(se),thematicBreak:a(ye)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:fe,autolinkProtocol:Pe,blockQuote:u(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:ve,characterReferenceMarkerNumeric:ve,characterReferenceValue:je,characterReference:Ie,codeFenced:u(w),codeFencedFence:v,codeFencedFenceInfo:x,codeFencedFenceMeta:k,codeFlowValue:F,codeIndented:u(D),codeText:u(X),codeTextData:F,data:F,definition:u(),definitionDestinationString:N,definitionLabelString:_,definitionTitleString:A,emphasis:u(),hardBreakEscape:u(R),hardBreakTrailing:u(R),htmlFlow:u(W),htmlFlowData:F,htmlText:u(U),htmlTextData:F,image:u(B),label:Y,labelText:ee,lineEnding:G,link:u(P),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:ge,resourceDestinationString:H,resourceTitleString:J,resource:ie,setextHeading:u(M),setextHeadingLineSequence:j,setextHeadingText:C,strong:u(),thematicBreak:u()}};C6(e,(r||{}).mdastExtensions||[]);const t={};return n;function n(ae){let ke={type:"root",children:[]};const Me={stack:[ke],tokenStack:[],config:e,enter:l,exit:d,buffer:s,resume:h,data:t},ze=[];let Ge=-1;for(;++Ge<ae.length;)if(ae[Ge][1].type==="listOrdered"||ae[Ge][1].type==="listUnordered")if(ae[Ge][0]==="enter")ze.push(Ge);else{const at=ze.pop();Ge=i(ae,at,Ge)}for(Ge=-1;++Ge<ae.length;){const at=e[ae[Ge][0]];T6.call(at,ae[Ge][1].type)&&at[ae[Ge][1].type].call(Object.assign({sliceSerialize:ae[Ge][2].sliceSerialize},Me),ae[Ge][1])}if(Me.tokenStack.length>0){const at=Me.tokenStack[Me.tokenStack.length-1];(at[1]||J4).call(Me,void 0,at[0])}for(ke.position={start:jl(ae.length>0?ae[0][1].start:{line:1,column:1,offset:0}),end:jl(ae.length>0?ae[ae.length-2][1].end:{line:1,column:1,offset:0})},Ge=-1;++Ge<e.transforms.length;)ke=e.transforms[Ge](ke)||ke;return ke}function i(ae,ke,Me){let ze=ke-1,Ge=-1,at=!1,xe,Re,Ve,Ze;for(;++ze<=Me;){const Ke=ae[ze];switch(Ke[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ke[0]==="enter"?Ge++:Ge--,Ze=void 0;break}case"lineEndingBlank":{Ke[0]==="enter"&&(xe&&!Ze&&!Ge&&!Ve&&(Ve=ze),Ze=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ze=void 0}if(!Ge&&Ke[0]==="enter"&&Ke[1].type==="listItemPrefix"||Ge===-1&&Ke[0]==="exit"&&(Ke[1].type==="listUnordered"||Ke[1].type==="listOrdered")){if(xe){let ft=ze;for(Re=void 0;ft--;){const yt=ae[ft];if(yt[1].type==="lineEnding"||yt[1].type==="lineEndingBlank"){if(yt[0]==="exit")continue;Re&&(ae[Re][1].type="lineEndingBlank",at=!0),yt[1].type="lineEnding",Re=ft}else if(!(yt[1].type==="linePrefix"||yt[1].type==="blockQuotePrefix"||yt[1].type==="blockQuotePrefixWhitespace"||yt[1].type==="blockQuoteMarker"||yt[1].type==="listItemIndent"))break}Ve&&(!Re||Ve<Re)&&(xe._spread=!0),xe.end=Object.assign({},Re?ae[Re][1].start:Ke[1].end),ae.splice(Re||ze,0,["exit",xe,Ke[2]]),ze++,Me++}if(Ke[1].type==="listItemPrefix"){const ft={type:"listItem",_spread:!1,start:Object.assign({},Ke[1].start),end:void 0};xe=ft,ae.splice(ze,0,["enter",ft,Ke[2]]),ze++,Me++,Ve=void 0,Ze=!0}}}return ae[ke][1]._spread=at,Me}function a(ae,ke){return Me;function Me(ze){l.call(this,ae(ze),ze),ke&&ke.call(this,ze)}}function s(){this.stack.push({type:"fragment",children:[]})}function l(ae,ke,Me){this.stack[this.stack.length-1].children.push(ae),this.stack.push(ae),this.tokenStack.push([ke,Me||void 0]),ae.position={start:jl(ke.start),end:void 0}}function u(ae){return ke;function ke(Me){ae&&ae.call(this,Me),d.call(this,Me)}}function d(ae,ke){const Me=this.stack.pop(),ze=this.tokenStack.pop();if(ze)ze[0].type!==ae.type&&(ke?ke.call(this,ae,ze[0]):(ze[1]||J4).call(this,ae,ze[0]));else throw new Error("Cannot close `"+ae.type+"` ("+lm({start:ae.start,end:ae.end})+"): its not open");Me.position.end=jl(ae.end)}function h(){return CS(this.stack.pop())}function g(){this.data.expectingFirstListItemValue=!0}function b(ae){if(this.data.expectingFirstListItemValue){const ke=this.stack[this.stack.length-2];ke.start=Number.parseInt(this.sliceSerialize(ae),10),this.data.expectingFirstListItemValue=void 0}}function x(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.lang=ae}function k(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.meta=ae}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ae.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function D(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ae.replace(/(\r?\n|\r)$/g,"")}function _(ae){const ke=this.resume(),Me=this.stack[this.stack.length-1];Me.label=ke,Me.identifier=Ya(this.sliceSerialize(ae)).toLowerCase()}function A(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.title=ae}function N(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.url=ae}function E(ae){const ke=this.stack[this.stack.length-1];if(!ke.depth){const Me=this.sliceSerialize(ae).length;ke.depth=Me}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function j(ae){const ke=this.stack[this.stack.length-1];ke.depth=this.sliceSerialize(ae).codePointAt(0)===61?1:2}function M(){this.data.setextHeadingSlurpLineEnding=void 0}function O(ae){const Me=this.stack[this.stack.length-1].children;let ze=Me[Me.length-1];(!ze||ze.type!=="text")&&(ze=de(),ze.position={start:jl(ae.start),end:void 0},Me.push(ze)),this.stack.push(ze)}function F(ae){const ke=this.stack.pop();ke.value+=this.sliceSerialize(ae),ke.position.end=jl(ae.end)}function G(ae){const ke=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Me=ke.children[ke.children.length-1];Me.position.end=jl(ae.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ke.type)&&(O.call(this,ae),F.call(this,ae))}function R(){this.data.atHardBreak=!0}function W(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ae}function U(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ae}function X(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ae}function P(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const ke=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=ke,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function B(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const ke=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=ke,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function ee(ae){const ke=this.sliceSerialize(ae),Me=this.stack[this.stack.length-2];Me.label=Kq(ke),Me.identifier=Ya(ke).toLowerCase()}function Y(){const ae=this.stack[this.stack.length-1],ke=this.resume(),Me=this.stack[this.stack.length-1];if(this.data.inReference=!0,Me.type==="link"){const ze=ae.children;Me.children=ze}else Me.alt=ke}function H(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.url=ae}function J(){const ae=this.resume(),ke=this.stack[this.stack.length-1];ke.title=ae}function ie(){this.data.inReference=void 0}function z(){this.data.referenceType="collapsed"}function ge(ae){const ke=this.resume(),Me=this.stack[this.stack.length-1];Me.label=ke,Me.identifier=Ya(this.sliceSerialize(ae)).toLowerCase(),this.data.referenceType="full"}function ve(ae){this.data.characterReferenceType=ae.type}function je(ae){const ke=this.sliceSerialize(ae),Me=this.data.characterReferenceType;let ze;Me?(ze=x6(ke,Me==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ze=NS(ke);const Ge=this.stack[this.stack.length-1];Ge.value+=ze}function Ie(ae){const ke=this.stack.pop();ke.position.end=jl(ae.end)}function Pe(ae){F.call(this,ae);const ke=this.stack[this.stack.length-1];ke.url=this.sliceSerialize(ae)}function fe(ae){F.call(this,ae);const ke=this.stack[this.stack.length-1];ke.url="mailto:"+this.sliceSerialize(ae)}function Ue(){return{type:"blockquote",children:[]}}function be(){return{type:"code",lang:null,meta:null,value:""}}function Fe(){return{type:"inlineCode",value:""}}function $e(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function I(){return{type:"emphasis",children:[]}}function he(){return{type:"heading",depth:0,children:[]}}function oe(){return{type:"break"}}function re(){return{type:"html",value:""}}function ne(){return{type:"image",title:null,url:"",alt:null}}function ue(){return{type:"link",title:null,url:"",children:[]}}function Ce(ae){return{type:"list",ordered:ae.type==="listOrdered",start:null,spread:ae._spread,children:[]}}function Ne(ae){return{type:"listItem",spread:ae._spread,checked:null,children:[]}}function pe(){return{type:"paragraph",children:[]}}function se(){return{type:"strong",children:[]}}function de(){return{type:"text",value:""}}function ye(){return{type:"thematicBreak"}}}function jl(r){return{line:r.line,column:r.column,offset:r.offset}}function C6(r,e){let t=-1;for(;++t<e.length;){const n=e[t];Array.isArray(n)?C6(r,n):eV(r,n)}}function eV(r,e){let t;for(t in e)if(T6.call(e,t))switch(t){case"canContainEols":{const n=e[t];n&&r[t].push(...n);break}case"transforms":{const n=e[t];n&&r[t].push(...n);break}case"enter":case"exit":{const n=e[t];n&&Object.assign(r[t],n);break}}}function J4(r,e){throw r?new Error("Cannot close `"+r.type+"` ("+lm({start:r.start,end:r.end})+"): a different token (`"+e.type+"`, "+lm({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+lm({start:e.start,end:e.end})+") is still open")}function tV(r){const e=this;e.parser=t;function t(n){return Zq(n,{...e.data("settings"),...r,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function nV(r,e){const t={type:"element",tagName:"blockquote",properties:{},children:r.wrap(r.all(e),!0)};return r.patch(e,t),r.applyData(e,t)}function rV(r,e){const t={type:"element",tagName:"br",properties:{},children:[]};return r.patch(e,t),[r.applyData(e,t),{type:"text",value:`
`}]}function iV(r,e){const t=e.value?e.value+`
`:"",n={};e.lang&&(n.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:n,children:[{type:"text",value:t}]};return e.meta&&(i.data={meta:e.meta}),r.patch(e,i),i=r.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},r.patch(e,i),i}function aV(r,e){const t={type:"element",tagName:"del",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}function sV(r,e){const t={type:"element",tagName:"em",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}function oV(r,e){const t=typeof r.options.clobberPrefix=="string"?r.options.clobberPrefix:"user-content-",n=String(e.identifier).toUpperCase(),i=Ep(n.toLowerCase()),a=r.footnoteOrder.indexOf(n);let s,l=r.footnoteCounts.get(n);l===void 0?(l=0,r.footnoteOrder.push(n),s=r.footnoteOrder.length):s=a+1,l+=1,r.footnoteCounts.set(n,l);const u={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+i,id:t+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};r.patch(e,u);const d={type:"element",tagName:"sup",properties:{},children:[u]};return r.patch(e,d),r.applyData(e,d)}function lV(r,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}function cV(r,e){if(r.options.allowDangerousHtml){const t={type:"raw",value:e.value};return r.patch(e,t),r.applyData(e,t)}}function N6(r,e){const t=e.referenceType;let n="]";if(t==="collapsed"?n+="[]":t==="full"&&(n+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+n}];const i=r.all(e),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const s=i[i.length-1];return s&&s.type==="text"?s.value+=n:i.push({type:"text",value:n}),i}function uV(r,e){const t=String(e.identifier).toUpperCase(),n=r.definitionById.get(t);if(!n)return N6(r,e);const i={src:Ep(n.url||""),alt:e.alt};n.title!==null&&n.title!==void 0&&(i.title=n.title);const a={type:"element",tagName:"img",properties:i,children:[]};return r.patch(e,a),r.applyData(e,a)}function dV(r,e){const t={src:Ep(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const n={type:"element",tagName:"img",properties:t,children:[]};return r.patch(e,n),r.applyData(e,n)}function hV(r,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};r.patch(e,t);const n={type:"element",tagName:"code",properties:{},children:[t]};return r.patch(e,n),r.applyData(e,n)}function fV(r,e){const t=String(e.identifier).toUpperCase(),n=r.definitionById.get(t);if(!n)return N6(r,e);const i={href:Ep(n.url||"")};n.title!==null&&n.title!==void 0&&(i.title=n.title);const a={type:"element",tagName:"a",properties:i,children:r.all(e)};return r.patch(e,a),r.applyData(e,a)}function pV(r,e){const t={href:Ep(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const n={type:"element",tagName:"a",properties:t,children:r.all(e)};return r.patch(e,n),r.applyData(e,n)}function gV(r,e,t){const n=r.all(e),i=t?mV(t):U6(e),a={},s=[];if(typeof e.checked=="boolean"){const h=n[0];let g;h&&h.type==="element"&&h.tagName==="p"?g=h:(g={type:"element",tagName:"p",properties:{},children:[]},n.unshift(g)),g.children.length>0&&g.children.unshift({type:"text",value:" "}),g.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let l=-1;for(;++l<n.length;){const h=n[l];(i||l!==0||h.type!=="element"||h.tagName!=="p")&&s.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!i?s.push(...h.children):s.push(h)}const u=n[n.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&s.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:s};return r.patch(e,d),r.applyData(e,d)}function mV(r){let e=!1;if(r.type==="list"){e=r.spread||!1;const t=r.children;let n=-1;for(;!e&&++n<t.length;)e=U6(t[n])}return e}function U6(r){const e=r.spread;return e??r.children.length>1}function bV(r,e){const t={},n=r.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++i<n.length;){const s=n[i];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:r.wrap(n,!0)};return r.patch(e,a),r.applyData(e,a)}function xV(r,e){const t={type:"element",tagName:"p",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}function yV(r,e){const t={type:"root",children:r.wrap(r.all(e))};return r.patch(e,t),r.applyData(e,t)}function vV(r,e){const t={type:"element",tagName:"strong",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}function wV(r,e){const t=r.all(e),n=t.shift(),i=[];if(n){const s={type:"element",tagName:"thead",properties:{},children:r.wrap([n],!0)};r.patch(e.children[0],s),i.push(s)}if(t.length>0){const s={type:"element",tagName:"tbody",properties:{},children:r.wrap(t,!0)},l=AS(e.children[1]),u=u6(e.children[e.children.length-1]);l&&u&&(s.position={start:l,end:u}),i.push(s)}const a={type:"element",tagName:"table",properties:{},children:r.wrap(i,!0)};return r.patch(e,a),r.applyData(e,a)}function kV(r,e,t){const n=t?t.children:void 0,a=(n?n.indexOf(e):1)===0?"th":"td",s=t&&t.type==="table"?t.align:void 0,l=s?s.length:e.children.length;let u=-1;const d=[];for(;++u<l;){const g=e.children[u],b={},x=s?s[u]:void 0;x&&(b.align=x);let k={type:"element",tagName:a,properties:b,children:[]};g&&(k.children=r.all(g),r.patch(g,k),k=r.applyData(g,k)),d.push(k)}const h={type:"element",tagName:"tr",properties:{},children:r.wrap(d,!0)};return r.patch(e,h),r.applyData(e,h)}function DV(r,e){const t={type:"element",tagName:"td",properties:{},children:r.all(e)};return r.patch(e,t),r.applyData(e,t)}const eR=9,tR=32;function _V(r){const e=String(r),t=/\r?\n|\r/g;let n=t.exec(e),i=0;const a=[];for(;n;)a.push(nR(e.slice(i,n.index),i>0,!0),n[0]),i=n.index+n[0].length,n=t.exec(e);return a.push(nR(e.slice(i),i>0,!1)),a.join("")}function nR(r,e,t){let n=0,i=r.length;if(e){let a=r.codePointAt(n);for(;a===eR||a===tR;)n++,a=r.codePointAt(n)}if(t){let a=r.codePointAt(i-1);for(;a===eR||a===tR;)i--,a=r.codePointAt(i-1)}return i>n?r.slice(n,i):""}function AV(r,e){const t={type:"text",value:_V(String(e.value))};return r.patch(e,t),r.applyData(e,t)}function SV(r,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return r.patch(e,t),r.applyData(e,t)}const EV={blockquote:nV,break:rV,code:iV,delete:aV,emphasis:sV,footnoteReference:oV,heading:lV,html:cV,imageReference:uV,image:dV,inlineCode:hV,linkReference:fV,link:pV,listItem:gV,list:bV,paragraph:xV,root:yV,strong:vV,table:wV,tableCell:DV,tableRow:kV,text:AV,thematicBreak:SV,toml:Zy,yaml:Zy,definition:Zy,footnoteDefinition:Zy};function Zy(){}const R6=-1,U1=0,um=1,kv=2,RS=3,jS=4,FS=5,IS=6,j6=7,F6=8,rR=typeof self=="object"?self:globalThis,TV=(r,e)=>{const t=(i,a)=>(r.set(a,i),i),n=i=>{if(r.has(i))return r.get(i);const[a,s]=e[i];switch(a){case U1:case R6:return t(s,i);case um:{const l=t([],i);for(const u of s)l.push(n(u));return l}case kv:{const l=t({},i);for(const[u,d]of s)l[n(u)]=n(d);return l}case RS:return t(new Date(s),i);case jS:{const{source:l,flags:u}=s;return t(new RegExp(l,u),i)}case FS:{const l=t(new Map,i);for(const[u,d]of s)l.set(n(u),n(d));return l}case IS:{const l=t(new Set,i);for(const u of s)l.add(n(u));return l}case j6:{const{name:l,message:u}=s;return t(new rR[l](u),i)}case F6:return t(BigInt(s),i);case"BigInt":return t(Object(BigInt(s)),i);case"ArrayBuffer":return t(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:l}=new Uint8Array(s);return t(new DataView(l),s)}}return t(new rR[a](s),i)};return n},iR=r=>TV(new Map,r)(0),Nh="",{toString:CV}={},{keys:NV}=Object,zg=r=>{const e=typeof r;if(e!=="object"||!r)return[U1,e];const t=CV.call(r).slice(8,-1);switch(t){case"Array":return[um,Nh];case"Object":return[kv,Nh];case"Date":return[RS,Nh];case"RegExp":return[jS,Nh];case"Map":return[FS,Nh];case"Set":return[IS,Nh];case"DataView":return[um,t]}return t.includes("Array")?[um,t]:t.includes("Error")?[j6,t]:[kv,t]},Jy=([r,e])=>r===U1&&(e==="function"||e==="symbol"),UV=(r,e,t,n)=>{const i=(s,l)=>{const u=n.push(s)-1;return t.set(l,u),u},a=s=>{if(t.has(s))return t.get(s);let[l,u]=zg(s);switch(l){case U1:{let h=s;switch(u){case"bigint":l=F6,h=s.toString();break;case"function":case"symbol":if(r)throw new TypeError("unable to serialize "+u);h=null;break;case"undefined":return i([R6],s)}return i([l,h],s)}case um:{if(u){let b=s;return u==="DataView"?b=new Uint8Array(s.buffer):u==="ArrayBuffer"&&(b=new Uint8Array(s)),i([u,[...b]],s)}const h=[],g=i([l,h],s);for(const b of s)h.push(a(b));return g}case kv:{if(u)switch(u){case"BigInt":return i([u,s.toString()],s);case"Boolean":case"Number":case"String":return i([u,s.valueOf()],s)}if(e&&"toJSON"in s)return a(s.toJSON());const h=[],g=i([l,h],s);for(const b of NV(s))(r||!Jy(zg(s[b])))&&h.push([a(b),a(s[b])]);return g}case RS:return i([l,s.toISOString()],s);case jS:{const{source:h,flags:g}=s;return i([l,{source:h,flags:g}],s)}case FS:{const h=[],g=i([l,h],s);for(const[b,x]of s)(r||!(Jy(zg(b))||Jy(zg(x))))&&h.push([a(b),a(x)]);return g}case IS:{const h=[],g=i([l,h],s);for(const b of s)(r||!Jy(zg(b)))&&h.push(a(b));return g}}const{message:d}=s;return i([l,{name:u,message:d}],s)};return a},aR=(r,{json:e,lossy:t}={})=>{const n=[];return UV(!(e||t),!!e,new Map,n)(r),n},Dv=typeof structuredClone=="function"?(r,e)=>e&&("json"in e||"lossy"in e)?iR(aR(r,e)):structuredClone(r):(r,e)=>iR(aR(r,e));function RV(r,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function jV(r,e){return"Back to reference "+(r+1)+(e>1?"-"+e:"")}function FV(r){const e=typeof r.options.clobberPrefix=="string"?r.options.clobberPrefix:"user-content-",t=r.options.footnoteBackContent||RV,n=r.options.footnoteBackLabel||jV,i=r.options.footnoteLabel||"Footnotes",a=r.options.footnoteLabelTagName||"h2",s=r.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let u=-1;for(;++u<r.footnoteOrder.length;){const d=r.footnoteById.get(r.footnoteOrder[u]);if(!d)continue;const h=r.all(d),g=String(d.identifier).toUpperCase(),b=Ep(g.toLowerCase());let x=0;const k=[],v=r.footnoteCounts.get(g);for(;v!==void 0&&++x<=v;){k.length>0&&k.push({type:"text",value:" "});let _=typeof t=="string"?t:t(u,x);typeof _=="string"&&(_={type:"text",value:_}),k.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+b+(x>1?"-"+x:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(u,x),className:["data-footnote-backref"]},children:Array.isArray(_)?_:[_]})}const w=h[h.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const _=w.children[w.children.length-1];_&&_.type==="text"?_.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...k)}else h.push(...k);const D={type:"element",tagName:"li",properties:{id:e+"fn-"+b},children:r.wrap(h,!0)};r.patch(d,D),l.push(D)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Dv(s),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:r.wrap(l,!0)},{type:"text",value:`
`}]}}const R1=(function(r){if(r==null)return LV;if(typeof r=="function")return j1(r);if(typeof r=="object")return Array.isArray(r)?IV(r):OV(r);if(typeof r=="string")return MV(r);throw new Error("Expected function, string, or object as test")});function IV(r){const e=[];let t=-1;for(;++t<r.length;)e[t]=R1(r[t]);return j1(n);function n(...i){let a=-1;for(;++a<e.length;)if(e[a].apply(this,i))return!0;return!1}}function OV(r){const e=r;return j1(t);function t(n){const i=n;let a;for(a in r)if(i[a]!==e[a])return!1;return!0}}function MV(r){return j1(e);function e(t){return t&&t.type===r}}function j1(r){return e;function e(t,n,i){return!!(BV(t)&&r.call(this,t,typeof n=="number"?n:void 0,i||void 0))}}function LV(){return!0}function BV(r){return r!==null&&typeof r=="object"&&"type"in r}const I6=[],PV=!0,sA=!1,zV="skip";function O6(r,e,t,n){let i;typeof e=="function"&&typeof t!="function"?(n=t,t=e):i=e;const a=R1(i),s=n?-1:1;l(r,void 0,[])();function l(u,d,h){const g=u&&typeof u=="object"?u:{};if(typeof g.type=="string"){const x=typeof g.tagName=="string"?g.tagName:typeof g.name=="string"?g.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(u.type+(x?"<"+x+">":""))+")"})}return b;function b(){let x=I6,k,v,w;if((!e||a(u,d,h[h.length-1]||void 0))&&(x=WV(t(u,h)),x[0]===sA))return x;if("children"in u&&u.children){const D=u;if(D.children&&x[0]!==zV)for(v=(n?D.children.length:-1)+s,w=h.concat(D);v>-1&&v<D.children.length;){const _=D.children[v];if(k=l(_,v,w)(),k[0]===sA)return k;v=typeof k[1]=="number"?k[1]:v+s}}return x}}}function WV(r){return Array.isArray(r)?r:typeof r=="number"?[PV,r]:r==null?I6:[r]}function OS(r,e,t,n){let i,a,s;typeof e=="function"&&typeof t!="function"?(a=void 0,s=e,i=t):(a=e,s=t,i=n),O6(r,a,l,i);function l(u,d){const h=d[d.length-1],g=h?h.children.indexOf(u):void 0;return s(u,g,h)}}const oA={}.hasOwnProperty,HV={};function qV(r,e){const t=e||HV,n=new Map,i=new Map,a=new Map,s={...EV,...t.handlers},l={all:d,applyData:XV,definitionById:n,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:s,one:u,options:t,patch:VV,wrap:$V};return OS(r,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const g=h.type==="definition"?n:i,b=String(h.identifier).toUpperCase();g.has(b)||g.set(b,h)}}),l;function u(h,g){const b=h.type,x=l.handlers[b];if(oA.call(l.handlers,b)&&x)return x(l,h,g);if(l.options.passThrough&&l.options.passThrough.includes(b)){if("children"in h){const{children:v,...w}=h,D=Dv(w);return D.children=l.all(h),D}return Dv(h)}return(l.options.unknownHandler||GV)(l,h,g)}function d(h){const g=[];if("children"in h){const b=h.children;let x=-1;for(;++x<b.length;){const k=l.one(b[x],h);if(k){if(x&&b[x-1].type==="break"&&(!Array.isArray(k)&&k.type==="text"&&(k.value=sR(k.value)),!Array.isArray(k)&&k.type==="element")){const v=k.children[0];v&&v.type==="text"&&(v.value=sR(v.value))}Array.isArray(k)?g.push(...k):g.push(k)}}}return g}}function VV(r,e){r.position&&(e.position=jW(r))}function XV(r,e){let t=e;if(r&&r.data){const n=r.data.hName,i=r.data.hChildren,a=r.data.hProperties;if(typeof n=="string")if(t.type==="element")t.tagName=n;else{const s="children"in t?t.children:[t];t={type:"element",tagName:n,properties:{},children:s}}t.type==="element"&&a&&Object.assign(t.properties,Dv(a)),"children"in t&&t.children&&i!==null&&i!==void 0&&(t.children=i)}return t}function GV(r,e){const t=e.data||{},n="value"in e&&!(oA.call(t,"hProperties")||oA.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:r.all(e)};return r.patch(e,n),r.applyData(e,n)}function $V(r,e){const t=[];let n=-1;for(e&&t.push({type:"text",value:`
`});++n<r.length;)n&&t.push({type:"text",value:`
`}),t.push(r[n]);return e&&r.length>0&&t.push({type:"text",value:`
`}),t}function sR(r){let e=0,t=r.charCodeAt(e);for(;t===9||t===32;)e++,t=r.charCodeAt(e);return r.slice(e)}function oR(r,e){const t=qV(r,e),n=t.one(r,void 0),i=FV(t),a=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function YV(r,e){return r&&"run"in r?async function(t,n){const i=oR(t,{file:n,...e});await r.run(i,n)}:function(t,n){return oR(t,{file:n,...r||e})}}function lR(r){if(r)throw r}var fD,cR;function KV(){if(cR)return fD;cR=1;var r=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},a=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var h=r.call(d,"constructor"),g=d.constructor&&d.constructor.prototype&&r.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!h&&!g)return!1;var b;for(b in d);return typeof b>"u"||r.call(d,b)},s=function(d,h){t&&h.name==="__proto__"?t(d,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):d[h.name]=h.newValue},l=function(d,h){if(h==="__proto__")if(r.call(d,h)){if(n)return n(d,h).value}else return;return d[h]};return fD=function u(){var d,h,g,b,x,k,v=arguments[0],w=1,D=arguments.length,_=!1;for(typeof v=="boolean"&&(_=v,v=arguments[1]||{},w=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});w<D;++w)if(d=arguments[w],d!=null)for(h in d)g=l(v,h),b=l(d,h),v!==b&&(_&&b&&(a(b)||(x=i(b)))?(x?(x=!1,k=g&&i(g)?g:[]):k=g&&a(g)?g:{},s(v,{name:h,newValue:u(_,k,b)})):typeof b<"u"&&s(v,{name:h,newValue:b}));return v},fD}var QV=KV();const pD=nx(QV);function lA(r){if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function ZV(){const r=[],e={run:t,use:n};return e;function t(...i){let a=-1;const s=i.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);l(null,...i);function l(u,...d){const h=r[++a];let g=-1;if(u){s(u);return}for(;++g<i.length;)(d[g]===null||d[g]===void 0)&&(d[g]=i[g]);i=d,h?JV(h,l)(...d):s(null,...d)}}function n(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return r.push(i),e}}function JV(r,e){let t;return n;function n(...s){const l=r.length>s.length;let u;l&&s.push(i);try{u=r.apply(this,s)}catch(d){const h=d;if(l&&t)throw h;return i(h)}l||(u&&u.then&&typeof u.then=="function"?u.then(a,i):u instanceof Error?i(u):a(u))}function i(s,...l){t||(t=!0,e(s,...l))}function a(s){i(null,s)}}const ds={basename:eX,dirname:tX,extname:nX,join:rX,sep:"/"};function eX(r,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');xx(r);let t=0,n=-1,i=r.length,a;if(e===void 0||e.length===0||e.length>r.length){for(;i--;)if(r.codePointAt(i)===47){if(a){t=i+1;break}}else n<0&&(a=!0,n=i+1);return n<0?"":r.slice(t,n)}if(e===r)return"";let s=-1,l=e.length-1;for(;i--;)if(r.codePointAt(i)===47){if(a){t=i+1;break}}else s<0&&(a=!0,s=i+1),l>-1&&(r.codePointAt(i)===e.codePointAt(l--)?l<0&&(n=i):(l=-1,n=s));return t===n?n=s:n<0&&(n=r.length),r.slice(t,n)}function tX(r){if(xx(r),r.length===0)return".";let e=-1,t=r.length,n;for(;--t;)if(r.codePointAt(t)===47){if(n){e=t;break}}else n||(n=!0);return e<0?r.codePointAt(0)===47?"/":".":e===1&&r.codePointAt(0)===47?"//":r.slice(0,e)}function nX(r){xx(r);let e=r.length,t=-1,n=0,i=-1,a=0,s;for(;e--;){const l=r.codePointAt(e);if(l===47){if(s){n=e+1;break}continue}t<0&&(s=!0,t=e+1),l===46?i<0?i=e:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||t<0||a===0||a===1&&i===t-1&&i===n+1?"":r.slice(i,t)}function rX(...r){let e=-1,t;for(;++e<r.length;)xx(r[e]),r[e]&&(t=t===void 0?r[e]:t+"/"+r[e]);return t===void 0?".":iX(t)}function iX(r){xx(r);const e=r.codePointAt(0)===47;let t=aX(r,!e);return t.length===0&&!e&&(t="."),t.length>0&&r.codePointAt(r.length-1)===47&&(t+="/"),e?"/"+t:t}function aX(r,e){let t="",n=0,i=-1,a=0,s=-1,l,u;for(;++s<=r.length;){if(s<r.length)l=r.codePointAt(s);else{if(l===47)break;l=47}if(l===47){if(!(i===s-1||a===1))if(i!==s-1&&a===2){if(t.length<2||n!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(u=t.lastIndexOf("/"),u!==t.length-1){u<0?(t="",n=0):(t=t.slice(0,u),n=t.length-1-t.lastIndexOf("/")),i=s,a=0;continue}}else if(t.length>0){t="",n=0,i=s,a=0;continue}}e&&(t=t.length>0?t+"/..":"..",n=2)}else t.length>0?t+="/"+r.slice(i+1,s):t=r.slice(i+1,s),n=s-i-1;i=s,a=0}else l===46&&a>-1?a++:a=-1}return t}function xx(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}const sX={cwd:oX};function oX(){return"/"}function cA(r){return!!(r!==null&&typeof r=="object"&&"href"in r&&r.href&&"protocol"in r&&r.protocol&&r.auth===void 0)}function lX(r){if(typeof r=="string")r=new URL(r);else if(!cA(r)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+r+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(r.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return cX(r)}function cX(r){if(r.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const e=r.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const n=e.codePointAt(t+2);if(n===70||n===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const gD=["history","path","basename","stem","extname","dirname"];class M6{constructor(e){let t;e?cA(e)?t={path:e}:typeof e=="string"||uX(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":sX.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<gD.length;){const a=gD[n];a in t&&t[a]!==void 0&&t[a]!==null&&(this[a]=a==="history"?[...t[a]]:t[a])}let i;for(i in t)gD.includes(i)||(this[i]=t[i])}get basename(){return typeof this.path=="string"?ds.basename(this.path):void 0}set basename(e){bD(e,"basename"),mD(e,"basename"),this.path=ds.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?ds.dirname(this.path):void 0}set dirname(e){uR(this.basename,"dirname"),this.path=ds.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?ds.extname(this.path):void 0}set extname(e){if(mD(e,"extname"),uR(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ds.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){cA(e)&&(e=lX(e)),bD(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?ds.basename(this.path,this.extname):void 0}set stem(e){bD(e,"stem"),mD(e,"stem"),this.path=ds.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const i=this.message(e,t,n);throw i.fatal=!0,i}info(e,t,n){const i=this.message(e,t,n);return i.fatal=void 0,i}message(e,t,n){const i=new Mr(e,t,n);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function mD(r,e){if(r&&r.includes(ds.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+ds.sep+"`")}function bD(r,e){if(!r)throw new Error("`"+e+"` cannot be empty")}function uR(r,e){if(!r)throw new Error("Setting `"+e+"` requires `path` to be set too")}function uX(r){return!!(r&&typeof r=="object"&&"byteLength"in r&&"byteOffset"in r)}const dX=(function(r){const n=this.constructor.prototype,i=n[r],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,n),a}),hX={}.hasOwnProperty;class MS extends dX{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=ZV()}copy(){const e=new MS;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(pD(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(vD("data",this.frozen),this.namespace[e]=t,this):hX.call(this.namespace,e)&&this.namespace[e]||void 0:e?(vD("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const i=t.call(e,...n);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=e0(e),n=this.parser||this.Parser;return xD("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),xD("process",this.parser||this.Parser),yD("process",this.compiler||this.Compiler),t?i(void 0,t):new Promise(i);function i(a,s){const l=e0(e),u=n.parse(l);n.run(u,l,function(h,g,b){if(h||!g||!b)return d(h);const x=g,k=n.stringify(x,b);gX(k)?b.value=k:b.result=k,d(h,b)});function d(h,g){h||!g?s(h):a?a(g):t(void 0,g)}}}processSync(e){let t=!1,n;return this.freeze(),xD("processSync",this.parser||this.Parser),yD("processSync",this.compiler||this.Compiler),this.process(e,i),hR("processSync","process",t),n;function i(a,s){t=!0,lR(a),n=s}}run(e,t,n){dR(e),this.freeze();const i=this.transformers;return!n&&typeof t=="function"&&(n=t,t=void 0),n?a(void 0,n):new Promise(a);function a(s,l){const u=e0(t);i.run(e,u,d);function d(h,g,b){const x=g||e;h?l(h):s?s(x):n(void 0,x,b)}}}runSync(e,t){let n=!1,i;return this.run(e,t,a),hR("runSync","run",n),i;function a(s,l){lR(s),i=l,n=!0}}stringify(e,t){this.freeze();const n=e0(t),i=this.compiler||this.Compiler;return yD("stringify",i),dR(e),i(e,n)}use(e,...t){const n=this.attachers,i=this.namespace;if(vD("use",this.frozen),e!=null)if(typeof e=="function")u(e,t);else if(typeof e=="object")Array.isArray(e)?l(e):s(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(d){if(typeof d=="function")u(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[h,...g]=d;u(h,g)}else s(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function s(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(i.settings=pD(!0,i.settings,d.settings))}function l(d){let h=-1;if(d!=null)if(Array.isArray(d))for(;++h<d.length;){const g=d[h];a(g)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function u(d,h){let g=-1,b=-1;for(;++g<n.length;)if(n[g][0]===d){b=g;break}if(b===-1)n.push([d,...h]);else if(h.length>0){let[x,...k]=h;const v=n[b][1];lA(v)&&lA(x)&&(x=pD(!0,v,x)),n[b]=[d,x,...k]}}}}const fX=new MS().freeze();function xD(r,e){if(typeof e!="function")throw new TypeError("Cannot `"+r+"` without `parser`")}function yD(r,e){if(typeof e!="function")throw new TypeError("Cannot `"+r+"` without `compiler`")}function vD(r,e){if(e)throw new Error("Cannot call `"+r+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function dR(r){if(!lA(r)||typeof r.type!="string")throw new TypeError("Expected node, got `"+r+"`")}function hR(r,e,t){if(!t)throw new Error("`"+r+"` finished async. Use `"+e+"` instead")}function e0(r){return pX(r)?r:new M6(r)}function pX(r){return!!(r&&typeof r=="object"&&"message"in r&&"messages"in r)}function gX(r){return typeof r=="string"||mX(r)}function mX(r){return!!(r&&typeof r=="object"&&"byteLength"in r&&"byteOffset"in r)}const bX="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",fR=[],pR={allowDangerousHtml:!0},xX=/^(https?|ircs?|mailto|xmpp)$/i,yX=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function L6(r){const e=r.allowedElements,t=r.allowElement,n=r.children||"",i=r.className,a=r.components,s=r.disallowedElements,l=r.rehypePlugins||fR,u=r.remarkPlugins||fR,d=r.remarkRehypeOptions?{...r.remarkRehypeOptions,...pR}:pR,h=r.skipHtml,g=r.unwrapDisallowed,b=r.urlTransform||vX,x=fX().use(tV).use(u).use(YV,d).use(l),k=new M6;typeof n=="string"&&(k.value=n);for(const _ of yX)Object.hasOwn(r,_.from)&&(""+_.from+(_.to?"use `"+_.to+"` instead":"remove it")+bX+_.id,void 0);const v=x.parse(k);let w=x.runSync(v,k);return i&&(w={type:"element",tagName:"div",properties:{className:i},children:w.type==="root"?w.children:[w]}),OS(w,D),LW(w,{Fragment:f.Fragment,components:a,ignoreInvalidStyle:!0,jsx:f.jsx,jsxs:f.jsxs,passKeys:!0,passNode:!0});function D(_,A,N){if(_.type==="raw"&&N&&typeof A=="number")return h?N.children.splice(A,1):N.children[A]={type:"text",value:_.value},A;if(_.type==="element"){let E;for(E in uD)if(Object.hasOwn(uD,E)&&Object.hasOwn(_.properties,E)){const C=_.properties[E],j=uD[E];(j===null||j.includes(_.tagName))&&(_.properties[E]=b(String(C||""),E,_))}}if(_.type==="element"){let E=e?!e.includes(_.tagName):s?s.includes(_.tagName):!1;if(!E&&t&&typeof A=="number"&&(E=!t(_,A,N)),E&&N&&typeof A=="number")return g&&_.children?N.children.splice(A,1,..._.children):N.children.splice(A,1),A}}}function vX(r){const e=r.indexOf(":"),t=r.indexOf("?"),n=r.indexOf("#"),i=r.indexOf("/");return e<0||i>-1&&e>i||t>-1&&e>t||n>-1&&e>n||xX.test(r.slice(0,e))?r:""}function gR(r,e){const t=String(r);if(typeof e!="string")throw new TypeError("Expected character");let n=0,i=t.indexOf(e);for(;i!==-1;)n++,i=t.indexOf(e,i+e.length);return n}function wX(r){if(typeof r!="string")throw new TypeError("Expected a string");return r.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function kX(r,e,t){const i=R1((t||{}).ignore||[]),a=DX(e);let s=-1;for(;++s<a.length;)O6(r,"text",l);function l(d,h){let g=-1,b;for(;++g<h.length;){const x=h[g],k=b?b.children:void 0;if(i(x,k?k.indexOf(x):void 0,b))return;b=x}if(b)return u(d,h)}function u(d,h){const g=h[h.length-1],b=a[s][0],x=a[s][1];let k=0;const w=g.children.indexOf(d);let D=!1,_=[];b.lastIndex=0;let A=b.exec(d.value);for(;A;){const N=A.index,E={index:A.index,input:A.input,stack:[...h,d]};let C=x(...A,E);if(typeof C=="string"&&(C=C.length>0?{type:"text",value:C}:void 0),C===!1?b.lastIndex=N+1:(k!==N&&_.push({type:"text",value:d.value.slice(k,N)}),Array.isArray(C)?_.push(...C):C&&_.push(C),k=N+A[0].length,D=!0),!b.global)break;A=b.exec(d.value)}return D?(k<d.value.length&&_.push({type:"text",value:d.value.slice(k)}),g.children.splice(w,1,..._)):_=[d],w+_.length}}function DX(r){const e=[];if(!Array.isArray(r))throw new TypeError("Expected find and replace tuple or list of tuples");const t=!r[0]||Array.isArray(r[0])?r:[r];let n=-1;for(;++n<t.length;){const i=t[n];e.push([_X(i[0]),AX(i[1])])}return e}function _X(r){return typeof r=="string"?new RegExp(wX(r),"g"):r}function AX(r){return typeof r=="function"?r:function(){return r}}const wD="phrasing",kD=["autolink","link","image","label"];function SX(){return{transforms:[jX],enter:{literalAutolink:TX,literalAutolinkEmail:DD,literalAutolinkHttp:DD,literalAutolinkWww:DD},exit:{literalAutolink:RX,literalAutolinkEmail:UX,literalAutolinkHttp:CX,literalAutolinkWww:NX}}}function EX(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:wD,notInConstruct:kD},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:wD,notInConstruct:kD},{character:":",before:"[ps]",after:"\\/",inConstruct:wD,notInConstruct:kD}]}}function TX(r){this.enter({type:"link",title:null,url:"",children:[]},r)}function DD(r){this.config.enter.autolinkProtocol.call(this,r)}function CX(r){this.config.exit.autolinkProtocol.call(this,r)}function NX(r){this.config.exit.data.call(this,r);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(r)}function UX(r){this.config.exit.autolinkEmail.call(this,r)}function RX(r){this.exit(r)}function jX(r){kX(r,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,FX],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),IX]],{ignore:["link","linkReference"]})}function FX(r,e,t,n,i){let a="";if(!B6(i)||(/^w/i.test(e)&&(t=e+t,e="",a="http://"),!OX(t)))return!1;const s=MX(t+n);if(!s[0])return!1;const l={type:"link",title:null,url:a+e+s[0],children:[{type:"text",value:e+s[0]}]};return s[1]?[l,{type:"text",value:s[1]}]:l}function IX(r,e,t,n){return!B6(n,!0)||/[-\d_]$/.test(t)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+t,children:[{type:"text",value:e+"@"+t}]}}function OX(r){const e=r.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function MX(r){const e=/[!"&'),.:;<>?\]}]+$/.exec(r);if(!e)return[r,void 0];r=r.slice(0,e.index);let t=e[0],n=t.indexOf(")");const i=gR(r,"(");let a=gR(r,")");for(;n!==-1&&i>a;)r+=t.slice(0,n+1),t=t.slice(n+1),n=t.indexOf(")"),a++;return[r,t]}function B6(r,e){const t=r.input.charCodeAt(r.index-1);return(r.index===0||Fd(t)||C1(t))&&(!e||t!==47)}P6.peek=XX;function LX(){this.buffer()}function BX(r){this.enter({type:"footnoteReference",identifier:"",label:""},r)}function PX(){this.buffer()}function zX(r){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},r)}function WX(r){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=Ya(this.sliceSerialize(r)).toLowerCase(),t.label=e}function HX(r){this.exit(r)}function qX(r){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=Ya(this.sliceSerialize(r)).toLowerCase(),t.label=e}function VX(r){this.exit(r)}function XX(){return"["}function P6(r,e,t,n){const i=t.createTracker(n);let a=i.move("[^");const s=t.enter("footnoteReference"),l=t.enter("reference");return a+=i.move(t.safe(t.associationId(r),{after:"]",before:a})),l(),s(),a+=i.move("]"),a}function GX(){return{enter:{gfmFootnoteCallString:LX,gfmFootnoteCall:BX,gfmFootnoteDefinitionLabelString:PX,gfmFootnoteDefinition:zX},exit:{gfmFootnoteCallString:WX,gfmFootnoteCall:HX,gfmFootnoteDefinitionLabelString:qX,gfmFootnoteDefinition:VX}}}function $X(r){let e=!1;return r&&r.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:t,footnoteReference:P6},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function t(n,i,a,s){const l=a.createTracker(s);let u=l.move("[^");const d=a.enter("footnoteDefinition"),h=a.enter("label");return u+=l.move(a.safe(a.associationId(n),{before:u,after:"]"})),h(),u+=l.move("]:"),n.children&&n.children.length>0&&(l.shift(4),u+=l.move((e?`
`:" ")+a.indentLines(a.containerFlow(n,l.current()),e?z6:YX))),d(),u}}function YX(r,e,t){return e===0?r:z6(r,e,t)}function z6(r,e,t){return(t?"":"    ")+r}const KX=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];W6.peek=tG;function QX(){return{canContainEols:["delete"],enter:{strikethrough:JX},exit:{strikethrough:eG}}}function ZX(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:KX}],handlers:{delete:W6}}}function JX(r){this.enter({type:"delete",children:[]},r)}function eG(r){this.exit(r)}function W6(r,e,t,n){const i=t.createTracker(n),a=t.enter("strikethrough");let s=i.move("~~");return s+=t.containerPhrasing(r,{...i.current(),before:s,after:"~"}),s+=i.move("~~"),a(),s}function tG(){return"~"}function nG(r){return r.length}function rG(r,e){const t=e||{},n=(t.align||[]).concat(),i=t.stringLength||nG,a=[],s=[],l=[],u=[];let d=0,h=-1;for(;++h<r.length;){const v=[],w=[];let D=-1;for(r[h].length>d&&(d=r[h].length);++D<r[h].length;){const _=iG(r[h][D]);if(t.alignDelimiters!==!1){const A=i(_);w[D]=A,(u[D]===void 0||A>u[D])&&(u[D]=A)}v.push(_)}s[h]=v,l[h]=w}let g=-1;if(typeof n=="object"&&"length"in n)for(;++g<d;)a[g]=mR(n[g]);else{const v=mR(n);for(;++g<d;)a[g]=v}g=-1;const b=[],x=[];for(;++g<d;){const v=a[g];let w="",D="";v===99?(w=":",D=":"):v===108?w=":":v===114&&(D=":");let _=t.alignDelimiters===!1?1:Math.max(1,u[g]-w.length-D.length);const A=w+"-".repeat(_)+D;t.alignDelimiters!==!1&&(_=w.length+_+D.length,_>u[g]&&(u[g]=_),x[g]=_),b[g]=A}s.splice(1,0,b),l.splice(1,0,x),h=-1;const k=[];for(;++h<s.length;){const v=s[h],w=l[h];g=-1;const D=[];for(;++g<d;){const _=v[g]||"";let A="",N="";if(t.alignDelimiters!==!1){const E=u[g]-(w[g]||0),C=a[g];C===114?A=" ".repeat(E):C===99?E%2?(A=" ".repeat(E/2+.5),N=" ".repeat(E/2-.5)):(A=" ".repeat(E/2),N=A):N=" ".repeat(E)}t.delimiterStart!==!1&&!g&&D.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&_==="")&&(t.delimiterStart!==!1||g)&&D.push(" "),t.alignDelimiters!==!1&&D.push(A),D.push(_),t.alignDelimiters!==!1&&D.push(N),t.padding!==!1&&D.push(" "),(t.delimiterEnd!==!1||g!==d-1)&&D.push("|")}k.push(t.delimiterEnd===!1?D.join("").replace(/ +$/,""):D.join(""))}return k.join(`
`)}function iG(r){return r==null?"":String(r)}function mR(r){const e=typeof r=="string"?r.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function aG(r,e,t,n){const i=t.enter("blockquote"),a=t.createTracker(n);a.move("> "),a.shift(2);const s=t.indentLines(t.containerFlow(r,a.current()),sG);return i(),s}function sG(r,e,t){return">"+(t?"":" ")+r}function oG(r,e){return bR(r,e.inConstruct,!0)&&!bR(r,e.notInConstruct,!1)}function bR(r,e,t){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return t;let n=-1;for(;++n<e.length;)if(r.includes(e[n]))return!0;return!1}function xR(r,e,t,n){let i=-1;for(;++i<t.unsafe.length;)if(t.unsafe[i].character===`
`&&oG(t.stack,t.unsafe[i]))return/[ \t]/.test(n.before)?"":" ";return`\\
`}function lG(r,e){const t=String(r);let n=t.indexOf(e),i=n,a=0,s=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;n!==-1;)n===i?++a>s&&(s=a):a=1,i=n+e.length,n=t.indexOf(e,i);return s}function cG(r,e){return!!(e.options.fences===!1&&r.value&&!r.lang&&/[^ \r\n]/.test(r.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(r.value))}function uG(r){const e=r.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function dG(r,e,t,n){const i=uG(t),a=r.value||"",s=i==="`"?"GraveAccent":"Tilde";if(cG(r,t)){const g=t.enter("codeIndented"),b=t.indentLines(a,hG);return g(),b}const l=t.createTracker(n),u=i.repeat(Math.max(lG(a,i)+1,3)),d=t.enter("codeFenced");let h=l.move(u);if(r.lang){const g=t.enter(`codeFencedLang${s}`);h+=l.move(t.safe(r.lang,{before:h,after:" ",encode:["`"],...l.current()})),g()}if(r.lang&&r.meta){const g=t.enter(`codeFencedMeta${s}`);h+=l.move(" "),h+=l.move(t.safe(r.meta,{before:h,after:`
`,encode:["`"],...l.current()})),g()}return h+=l.move(`
`),a&&(h+=l.move(a+`
`)),h+=l.move(u),d(),h}function hG(r,e,t){return(t?"":"    ")+r}function LS(r){const e=r.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function fG(r,e,t,n){const i=LS(t),a=i==='"'?"Quote":"Apostrophe",s=t.enter("definition");let l=t.enter("label");const u=t.createTracker(n);let d=u.move("[");return d+=u.move(t.safe(t.associationId(r),{before:d,after:"]",...u.current()})),d+=u.move("]: "),l(),!r.url||/[\0- \u007F]/.test(r.url)?(l=t.enter("destinationLiteral"),d+=u.move("<"),d+=u.move(t.safe(r.url,{before:d,after:">",...u.current()})),d+=u.move(">")):(l=t.enter("destinationRaw"),d+=u.move(t.safe(r.url,{before:d,after:r.title?" ":`
`,...u.current()}))),l(),r.title&&(l=t.enter(`title${a}`),d+=u.move(" "+i),d+=u.move(t.safe(r.title,{before:d,after:i,...u.current()})),d+=u.move(i),l()),s(),d}function pG(r){const e=r.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Am(r){return"&#x"+r.toString(16).toUpperCase()+";"}function _v(r,e,t){const n=bp(r),i=bp(e);return n===void 0?i===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:n===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}H6.peek=gG;function H6(r,e,t,n){const i=pG(t),a=t.enter("emphasis"),s=t.createTracker(n),l=s.move(i);let u=s.move(t.containerPhrasing(r,{after:i,before:l,...s.current()}));const d=u.charCodeAt(0),h=_v(n.before.charCodeAt(n.before.length-1),d,i);h.inside&&(u=Am(d)+u.slice(1));const g=u.charCodeAt(u.length-1),b=_v(n.after.charCodeAt(0),g,i);b.inside&&(u=u.slice(0,-1)+Am(g));const x=s.move(i);return a(),t.attentionEncodeSurroundingInfo={after:b.outside,before:h.outside},l+u+x}function gG(r,e,t){return t.options.emphasis||"*"}function mG(r,e){let t=!1;return OS(r,function(n){if("value"in n&&/\r?\n|\r/.test(n.value)||n.type==="break")return t=!0,sA}),!!((!r.depth||r.depth<3)&&CS(r)&&(e.options.setext||t))}function bG(r,e,t,n){const i=Math.max(Math.min(6,r.depth||1),1),a=t.createTracker(n);if(mG(r,t)){const h=t.enter("headingSetext"),g=t.enter("phrasing"),b=t.containerPhrasing(r,{...a.current(),before:`
`,after:`
`});return g(),h(),b+`
`+(i===1?"=":"-").repeat(b.length-(Math.max(b.lastIndexOf("\r"),b.lastIndexOf(`
`))+1))}const s="#".repeat(i),l=t.enter("headingAtx"),u=t.enter("phrasing");a.move(s+" ");let d=t.containerPhrasing(r,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(d)&&(d=Am(d.charCodeAt(0))+d.slice(1)),d=d?s+" "+d:s,t.options.closeAtx&&(d+=" "+s),u(),l(),d}q6.peek=xG;function q6(r){return r.value||""}function xG(){return"<"}V6.peek=yG;function V6(r,e,t,n){const i=LS(t),a=i==='"'?"Quote":"Apostrophe",s=t.enter("image");let l=t.enter("label");const u=t.createTracker(n);let d=u.move("![");return d+=u.move(t.safe(r.alt,{before:d,after:"]",...u.current()})),d+=u.move("]("),l(),!r.url&&r.title||/[\0- \u007F]/.test(r.url)?(l=t.enter("destinationLiteral"),d+=u.move("<"),d+=u.move(t.safe(r.url,{before:d,after:">",...u.current()})),d+=u.move(">")):(l=t.enter("destinationRaw"),d+=u.move(t.safe(r.url,{before:d,after:r.title?" ":")",...u.current()}))),l(),r.title&&(l=t.enter(`title${a}`),d+=u.move(" "+i),d+=u.move(t.safe(r.title,{before:d,after:i,...u.current()})),d+=u.move(i),l()),d+=u.move(")"),s(),d}function yG(){return"!"}X6.peek=vG;function X6(r,e,t,n){const i=r.referenceType,a=t.enter("imageReference");let s=t.enter("label");const l=t.createTracker(n);let u=l.move("![");const d=t.safe(r.alt,{before:u,after:"]",...l.current()});u+=l.move(d+"]["),s();const h=t.stack;t.stack=[],s=t.enter("reference");const g=t.safe(t.associationId(r),{before:u,after:"]",...l.current()});return s(),t.stack=h,a(),i==="full"||!d||d!==g?u+=l.move(g+"]"):i==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function vG(){return"!"}G6.peek=wG;function G6(r,e,t){let n=r.value||"",i="`",a=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(n);)i+="`";for(/[^ \r\n]/.test(n)&&(/^[ \r\n]/.test(n)&&/[ \r\n]$/.test(n)||/^`|`$/.test(n))&&(n=" "+n+" ");++a<t.unsafe.length;){const s=t.unsafe[a],l=t.compilePattern(s);let u;if(s.atBreak)for(;u=l.exec(n);){let d=u.index;n.charCodeAt(d)===10&&n.charCodeAt(d-1)===13&&d--,n=n.slice(0,d)+" "+n.slice(u.index+1)}}return i+n+i}function wG(){return"`"}function $6(r,e){const t=CS(r);return!!(!e.options.resourceLink&&r.url&&!r.title&&r.children&&r.children.length===1&&r.children[0].type==="text"&&(t===r.url||"mailto:"+t===r.url)&&/^[a-z][a-z+.-]+:/i.test(r.url)&&!/[\0- <>\u007F]/.test(r.url))}Y6.peek=kG;function Y6(r,e,t,n){const i=LS(t),a=i==='"'?"Quote":"Apostrophe",s=t.createTracker(n);let l,u;if($6(r,t)){const h=t.stack;t.stack=[],l=t.enter("autolink");let g=s.move("<");return g+=s.move(t.containerPhrasing(r,{before:g,after:">",...s.current()})),g+=s.move(">"),l(),t.stack=h,g}l=t.enter("link"),u=t.enter("label");let d=s.move("[");return d+=s.move(t.containerPhrasing(r,{before:d,after:"](",...s.current()})),d+=s.move("]("),u(),!r.url&&r.title||/[\0- \u007F]/.test(r.url)?(u=t.enter("destinationLiteral"),d+=s.move("<"),d+=s.move(t.safe(r.url,{before:d,after:">",...s.current()})),d+=s.move(">")):(u=t.enter("destinationRaw"),d+=s.move(t.safe(r.url,{before:d,after:r.title?" ":")",...s.current()}))),u(),r.title&&(u=t.enter(`title${a}`),d+=s.move(" "+i),d+=s.move(t.safe(r.title,{before:d,after:i,...s.current()})),d+=s.move(i),u()),d+=s.move(")"),l(),d}function kG(r,e,t){return $6(r,t)?"<":"["}K6.peek=DG;function K6(r,e,t,n){const i=r.referenceType,a=t.enter("linkReference");let s=t.enter("label");const l=t.createTracker(n);let u=l.move("[");const d=t.containerPhrasing(r,{before:u,after:"]",...l.current()});u+=l.move(d+"]["),s();const h=t.stack;t.stack=[],s=t.enter("reference");const g=t.safe(t.associationId(r),{before:u,after:"]",...l.current()});return s(),t.stack=h,a(),i==="full"||!d||d!==g?u+=l.move(g+"]"):i==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function DG(){return"["}function BS(r){const e=r.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function _G(r){const e=BS(r),t=r.options.bulletOther;if(!t)return e==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+t+"`) to be different");return t}function AG(r){const e=r.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function Q6(r){const e=r.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function SG(r,e,t,n){const i=t.enter("list"),a=t.bulletCurrent;let s=r.ordered?AG(t):BS(t);const l=r.ordered?s==="."?")":".":_G(t);let u=e&&t.bulletLastUsed?s===t.bulletLastUsed:!1;if(!r.ordered){const h=r.children?r.children[0]:void 0;if((s==="*"||s==="-")&&h&&(!h.children||!h.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(u=!0),Q6(t)===s&&h){let g=-1;for(;++g<r.children.length;){const b=r.children[g];if(b&&b.type==="listItem"&&b.children&&b.children[0]&&b.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(s=l),t.bulletCurrent=s;const d=t.containerFlow(r,n);return t.bulletLastUsed=s,t.bulletCurrent=a,i(),d}function EG(r){const e=r.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function TG(r,e,t,n){const i=EG(t);let a=t.bulletCurrent||BS(t);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(t.options.incrementListMarker===!1?0:e.children.indexOf(r))+a);let s=a.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||r.spread))&&(s=Math.ceil(s/4)*4);const l=t.createTracker(n);l.move(a+" ".repeat(s-a.length)),l.shift(s);const u=t.enter("listItem"),d=t.indentLines(t.containerFlow(r,l.current()),h);return u(),d;function h(g,b,x){return b?(x?"":" ".repeat(s))+g:(x?a:a+" ".repeat(s-a.length))+g}}function CG(r,e,t,n){const i=t.enter("paragraph"),a=t.enter("phrasing"),s=t.containerPhrasing(r,n);return a(),i(),s}const NG=R1(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function UG(r,e,t,n){return(r.children.some(function(s){return NG(s)})?t.containerPhrasing:t.containerFlow).call(t,r,n)}function RG(r){const e=r.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Z6.peek=jG;function Z6(r,e,t,n){const i=RG(t),a=t.enter("strong"),s=t.createTracker(n),l=s.move(i+i);let u=s.move(t.containerPhrasing(r,{after:i,before:l,...s.current()}));const d=u.charCodeAt(0),h=_v(n.before.charCodeAt(n.before.length-1),d,i);h.inside&&(u=Am(d)+u.slice(1));const g=u.charCodeAt(u.length-1),b=_v(n.after.charCodeAt(0),g,i);b.inside&&(u=u.slice(0,-1)+Am(g));const x=s.move(i+i);return a(),t.attentionEncodeSurroundingInfo={after:b.outside,before:h.outside},l+u+x}function jG(r,e,t){return t.options.strong||"*"}function FG(r,e,t,n){return t.safe(r.value,n)}function IG(r){const e=r.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function OG(r,e,t){const n=(Q6(t)+(t.options.ruleSpaces?" ":"")).repeat(IG(t));return t.options.ruleSpaces?n.slice(0,-1):n}const J6={blockquote:aG,break:xR,code:dG,definition:fG,emphasis:H6,hardBreak:xR,heading:bG,html:q6,image:V6,imageReference:X6,inlineCode:G6,link:Y6,linkReference:K6,list:SG,listItem:TG,paragraph:CG,root:UG,strong:Z6,text:FG,thematicBreak:OG};function MG(){return{enter:{table:LG,tableData:yR,tableHeader:yR,tableRow:PG},exit:{codeText:zG,table:BG,tableData:_D,tableHeader:_D,tableRow:_D}}}function LG(r){const e=r._align;this.enter({type:"table",align:e.map(function(t){return t==="none"?null:t}),children:[]},r),this.data.inTable=!0}function BG(r){this.exit(r),this.data.inTable=void 0}function PG(r){this.enter({type:"tableRow",children:[]},r)}function _D(r){this.exit(r)}function yR(r){this.enter({type:"tableCell",children:[]},r)}function zG(r){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,WG));const t=this.stack[this.stack.length-1];t.type,t.value=e,this.exit(r)}function WG(r,e){return e==="|"?e:r}function HG(r){const e=r||{},t=e.tableCellPadding,n=e.tablePipeAlign,i=e.stringLength,a=t?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:b,table:s,tableCell:u,tableRow:l}};function s(x,k,v,w){return d(h(x,v,w),x.align)}function l(x,k,v,w){const D=g(x,v,w),_=d([D]);return _.slice(0,_.indexOf(`
`))}function u(x,k,v,w){const D=v.enter("tableCell"),_=v.enter("phrasing"),A=v.containerPhrasing(x,{...w,before:a,after:a});return _(),D(),A}function d(x,k){return rG(x,{align:k,alignDelimiters:n,padding:t,stringLength:i})}function h(x,k,v){const w=x.children;let D=-1;const _=[],A=k.enter("table");for(;++D<w.length;)_[D]=g(w[D],k,v);return A(),_}function g(x,k,v){const w=x.children;let D=-1;const _=[],A=k.enter("tableRow");for(;++D<w.length;)_[D]=u(w[D],x,k,v);return A(),_}function b(x,k,v){let w=J6.inlineCode(x,k,v);return v.stack.includes("tableCell")&&(w=w.replace(/\|/g,"\\$&")),w}}function qG(){return{exit:{taskListCheckValueChecked:vR,taskListCheckValueUnchecked:vR,paragraph:XG}}}function VG(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:GG}}}function vR(r){const e=this.stack[this.stack.length-2];e.type,e.checked=r.type==="taskListCheckValueChecked"}function XG(r){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const t=this.stack[this.stack.length-1];t.type;const n=t.children[0];if(n&&n.type==="text"){const i=e.children;let a=-1,s;for(;++a<i.length;){const l=i[a];if(l.type==="paragraph"){s=l;break}}s===t&&(n.value=n.value.slice(1),n.value.length===0?t.children.shift():t.position&&n.position&&typeof n.position.start.offset=="number"&&(n.position.start.column++,n.position.start.offset++,t.position.start=Object.assign({},n.position.start)))}}this.exit(r)}function GG(r,e,t,n){const i=r.children[0],a=typeof r.checked=="boolean"&&i&&i.type==="paragraph",s="["+(r.checked?"x":" ")+"] ",l=t.createTracker(n);a&&l.move(s);let u=J6.listItem(r,e,t,{...n,...l.current()});return a&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),u;function d(h){return h+s}}function $G(){return[SX(),GX(),QX(),MG(),qG()]}function YG(r){return{extensions:[EX(),$X(r),ZX(),HG(r),VG()]}}const KG={tokenize:n$,partial:!0},eI={tokenize:r$,partial:!0},tI={tokenize:i$,partial:!0},nI={tokenize:a$,partial:!0},QG={tokenize:s$,partial:!0},rI={name:"wwwAutolink",tokenize:e$,previous:aI},iI={name:"protocolAutolink",tokenize:t$,previous:sI},al={name:"emailAutolink",tokenize:JG,previous:oI},Ls={};function ZG(){return{text:Ls}}let fu=48;for(;fu<123;)Ls[fu]=al,fu++,fu===58?fu=65:fu===91&&(fu=97);Ls[43]=al;Ls[45]=al;Ls[46]=al;Ls[95]=al;Ls[72]=[al,iI];Ls[104]=[al,iI];Ls[87]=[al,rI];Ls[119]=[al,rI];function JG(r,e,t){const n=this;let i,a;return s;function s(g){return!uA(g)||!oI.call(n,n.previous)||PS(n.events)?t(g):(r.enter("literalAutolink"),r.enter("literalAutolinkEmail"),l(g))}function l(g){return uA(g)?(r.consume(g),l):g===64?(r.consume(g),u):t(g)}function u(g){return g===46?r.check(QG,h,d)(g):g===45||g===95||Rr(g)?(a=!0,r.consume(g),u):h(g)}function d(g){return r.consume(g),i=!0,u}function h(g){return a&&i&&Gr(n.previous)?(r.exit("literalAutolinkEmail"),r.exit("literalAutolink"),e(g)):t(g)}}function e$(r,e,t){const n=this;return i;function i(s){return s!==87&&s!==119||!aI.call(n,n.previous)||PS(n.events)?t(s):(r.enter("literalAutolink"),r.enter("literalAutolinkWww"),r.check(KG,r.attempt(eI,r.attempt(tI,a),t),t)(s))}function a(s){return r.exit("literalAutolinkWww"),r.exit("literalAutolink"),e(s)}}function t$(r,e,t){const n=this;let i="",a=!1;return s;function s(g){return(g===72||g===104)&&sI.call(n,n.previous)&&!PS(n.events)?(r.enter("literalAutolink"),r.enter("literalAutolinkHttp"),i+=String.fromCodePoint(g),r.consume(g),l):t(g)}function l(g){if(Gr(g)&&i.length<5)return i+=String.fromCodePoint(g),r.consume(g),l;if(g===58){const b=i.toLowerCase();if(b==="http"||b==="https")return r.consume(g),u}return t(g)}function u(g){return g===47?(r.consume(g),a?d:(a=!0,u)):t(g)}function d(g){return g===null||wv(g)||nn(g)||Fd(g)||C1(g)?t(g):r.attempt(eI,r.attempt(tI,h),t)(g)}function h(g){return r.exit("literalAutolinkHttp"),r.exit("literalAutolink"),e(g)}}function n$(r,e,t){let n=0;return i;function i(s){return(s===87||s===119)&&n<3?(n++,r.consume(s),i):s===46&&n===3?(r.consume(s),a):t(s)}function a(s){return s===null?t(s):e(s)}}function r$(r,e,t){let n,i,a;return s;function s(d){return d===46||d===95?r.check(nI,u,l)(d):d===null||nn(d)||Fd(d)||d!==45&&C1(d)?u(d):(a=!0,r.consume(d),s)}function l(d){return d===95?n=!0:(i=n,n=void 0),r.consume(d),s}function u(d){return i||n||!a?t(d):e(d)}}function i$(r,e){let t=0,n=0;return i;function i(s){return s===40?(t++,r.consume(s),i):s===41&&n<t?a(s):s===33||s===34||s===38||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===60||s===63||s===93||s===95||s===126?r.check(nI,e,a)(s):s===null||nn(s)||Fd(s)?e(s):(r.consume(s),i)}function a(s){return s===41&&n++,r.consume(s),i}}function a$(r,e,t){return n;function n(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(r.consume(l),n):l===38?(r.consume(l),a):l===93?(r.consume(l),i):l===60||l===null||nn(l)||Fd(l)?e(l):t(l)}function i(l){return l===null||l===40||l===91||nn(l)||Fd(l)?e(l):n(l)}function a(l){return Gr(l)?s(l):t(l)}function s(l){return l===59?(r.consume(l),n):Gr(l)?(r.consume(l),s):t(l)}}function s$(r,e,t){return n;function n(a){return r.consume(a),i}function i(a){return Rr(a)?t(a):e(a)}}function aI(r){return r===null||r===40||r===42||r===95||r===91||r===93||r===126||nn(r)}function sI(r){return!Gr(r)}function oI(r){return!(r===47||uA(r))}function uA(r){return r===43||r===45||r===46||r===95||Rr(r)}function PS(r){let e=r.length,t=!1;for(;e--;){const n=r[e][1];if((n.type==="labelLink"||n.type==="labelImage")&&!n._balanced){t=!0;break}if(n._gfmAutolinkLiteralWalkedInto){t=!1;break}}return r.length>0&&!t&&(r[r.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),t}const o$={tokenize:g$,partial:!0};function l$(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:h$,continuation:{tokenize:f$},exit:p$}},text:{91:{name:"gfmFootnoteCall",tokenize:d$},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:c$,resolveTo:u$}}}}function c$(r,e,t){const n=this;let i=n.events.length;const a=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let s;for(;i--;){const u=n.events[i][1];if(u.type==="labelImage"){s=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return l;function l(u){if(!s||!s._balanced)return t(u);const d=Ya(n.sliceSerialize({start:s.end,end:n.now()}));return d.codePointAt(0)!==94||!a.includes(d.slice(1))?t(u):(r.enter("gfmFootnoteCallLabelMarker"),r.consume(u),r.exit("gfmFootnoteCallLabelMarker"),e(u))}}function u$(r,e){let t=r.length;for(;t--;)if(r[t][1].type==="labelImage"&&r[t][0]==="enter"){r[t][1];break}r[t+1][1].type="data",r[t+3][1].type="gfmFootnoteCallLabelMarker";const n={type:"gfmFootnoteCall",start:Object.assign({},r[t+3][1].start),end:Object.assign({},r[r.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},r[t+3][1].end),end:Object.assign({},r[t+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},r[r.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},l=[r[t+1],r[t+2],["enter",n,e],r[t+3],r[t+4],["enter",i,e],["exit",i,e],["enter",a,e],["enter",s,e],["exit",s,e],["exit",a,e],r[r.length-2],r[r.length-1],["exit",n,e]];return r.splice(t,r.length-t+1,...l),r}function d$(r,e,t){const n=this,i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let a=0,s;return l;function l(g){return r.enter("gfmFootnoteCall"),r.enter("gfmFootnoteCallLabelMarker"),r.consume(g),r.exit("gfmFootnoteCallLabelMarker"),u}function u(g){return g!==94?t(g):(r.enter("gfmFootnoteCallMarker"),r.consume(g),r.exit("gfmFootnoteCallMarker"),r.enter("gfmFootnoteCallString"),r.enter("chunkString").contentType="string",d)}function d(g){if(a>999||g===93&&!s||g===null||g===91||nn(g))return t(g);if(g===93){r.exit("chunkString");const b=r.exit("gfmFootnoteCallString");return i.includes(Ya(n.sliceSerialize(b)))?(r.enter("gfmFootnoteCallLabelMarker"),r.consume(g),r.exit("gfmFootnoteCallLabelMarker"),r.exit("gfmFootnoteCall"),e):t(g)}return nn(g)||(s=!0),a++,r.consume(g),g===92?h:d}function h(g){return g===91||g===92||g===93?(r.consume(g),a++,d):d(g)}}function h$(r,e,t){const n=this,i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let a,s=0,l;return u;function u(k){return r.enter("gfmFootnoteDefinition")._container=!0,r.enter("gfmFootnoteDefinitionLabel"),r.enter("gfmFootnoteDefinitionLabelMarker"),r.consume(k),r.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(k){return k===94?(r.enter("gfmFootnoteDefinitionMarker"),r.consume(k),r.exit("gfmFootnoteDefinitionMarker"),r.enter("gfmFootnoteDefinitionLabelString"),r.enter("chunkString").contentType="string",h):t(k)}function h(k){if(s>999||k===93&&!l||k===null||k===91||nn(k))return t(k);if(k===93){r.exit("chunkString");const v=r.exit("gfmFootnoteDefinitionLabelString");return a=Ya(n.sliceSerialize(v)),r.enter("gfmFootnoteDefinitionLabelMarker"),r.consume(k),r.exit("gfmFootnoteDefinitionLabelMarker"),r.exit("gfmFootnoteDefinitionLabel"),b}return nn(k)||(l=!0),s++,r.consume(k),k===92?g:h}function g(k){return k===91||k===92||k===93?(r.consume(k),s++,h):h(k)}function b(k){return k===58?(r.enter("definitionMarker"),r.consume(k),r.exit("definitionMarker"),i.includes(a)||i.push(a),Rt(r,x,"gfmFootnoteDefinitionWhitespace")):t(k)}function x(k){return e(k)}}function f$(r,e,t){return r.check(bx,e,r.attempt(o$,e,t))}function p$(r){r.exit("gfmFootnoteDefinition")}function g$(r,e,t){const n=this;return Rt(r,i,"gfmFootnoteDefinitionIndent",5);function i(a){const s=n.events[n.events.length-1];return s&&s[1].type==="gfmFootnoteDefinitionIndent"&&s[2].sliceSerialize(s[1],!0).length===4?e(a):t(a)}}function m$(r){let t=(r||{}).singleTilde;const n={name:"strikethrough",tokenize:a,resolveAll:i};return t==null&&(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function i(s,l){let u=-1;for(;++u<s.length;)if(s[u][0]==="enter"&&s[u][1].type==="strikethroughSequenceTemporary"&&s[u][1]._close){let d=u;for(;d--;)if(s[d][0]==="exit"&&s[d][1].type==="strikethroughSequenceTemporary"&&s[d][1]._open&&s[u][1].end.offset-s[u][1].start.offset===s[d][1].end.offset-s[d][1].start.offset){s[u][1].type="strikethroughSequence",s[d][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},s[d][1].start),end:Object.assign({},s[u][1].end)},g={type:"strikethroughText",start:Object.assign({},s[d][1].end),end:Object.assign({},s[u][1].start)},b=[["enter",h,l],["enter",s[d][1],l],["exit",s[d][1],l],["enter",g,l]],x=l.parser.constructs.insideSpan.null;x&&Gi(b,b.length,0,N1(x,s.slice(d+1,u),l)),Gi(b,b.length,0,[["exit",g,l],["enter",s[u][1],l],["exit",s[u][1],l],["exit",h,l]]),Gi(s,d-1,u-d+3,b),u=d+b.length-2;break}}for(u=-1;++u<s.length;)s[u][1].type==="strikethroughSequenceTemporary"&&(s[u][1].type="data");return s}function a(s,l,u){const d=this.previous,h=this.events;let g=0;return b;function b(k){return d===126&&h[h.length-1][1].type!=="characterEscape"?u(k):(s.enter("strikethroughSequenceTemporary"),x(k))}function x(k){const v=bp(d);if(k===126)return g>1?u(k):(s.consume(k),g++,x);if(g<2&&!t)return u(k);const w=s.exit("strikethroughSequenceTemporary"),D=bp(k);return w._open=!D||D===2&&!!v,w._close=!v||v===2&&!!D,l(k)}}}class b${constructor(){this.map=[]}add(e,t,n){x$(this,e,t,n)}consume(e){if(this.map.sort(function(a,s){return a[0]-s[0]}),this.map.length===0)return;let t=this.map.length;const n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push(e.slice()),e.length=0;let i=n.pop();for(;i;){for(const a of i)e.push(a);i=n.pop()}this.map.length=0}}function x$(r,e,t,n){let i=0;if(!(t===0&&n.length===0)){for(;i<r.map.length;){if(r.map[i][0]===e){r.map[i][1]+=t,r.map[i][2].push(...n);return}i+=1}r.map.push([e,t,n])}}function y$(r,e){let t=!1;const n=[];for(;e<r.length;){const i=r[e];if(t){if(i[0]==="enter")i[1].type==="tableContent"&&n.push(r[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(r[e-1][1].type==="tableDelimiterMarker"){const a=n.length-1;n[a]=n[a]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(t=!0);e+=1}return n}function v$(){return{flow:{null:{name:"table",tokenize:w$,resolveAll:k$}}}}function w$(r,e,t){const n=this;let i=0,a=0,s;return l;function l(F){let G=n.events.length-1;for(;G>-1;){const U=n.events[G][1].type;if(U==="lineEnding"||U==="linePrefix")G--;else break}const R=G>-1?n.events[G][1].type:null,W=R==="tableHead"||R==="tableRow"?C:u;return W===C&&n.parser.lazy[n.now().line]?t(F):W(F)}function u(F){return r.enter("tableHead"),r.enter("tableRow"),d(F)}function d(F){return F===124||(s=!0,a+=1),h(F)}function h(F){return F===null?t(F):st(F)?a>1?(a=0,n.interrupt=!0,r.exit("tableRow"),r.enter("lineEnding"),r.consume(F),r.exit("lineEnding"),x):t(F):Et(F)?Rt(r,h,"whitespace")(F):(a+=1,s&&(s=!1,i+=1),F===124?(r.enter("tableCellDivider"),r.consume(F),r.exit("tableCellDivider"),s=!0,h):(r.enter("data"),g(F)))}function g(F){return F===null||F===124||nn(F)?(r.exit("data"),h(F)):(r.consume(F),F===92?b:g)}function b(F){return F===92||F===124?(r.consume(F),g):g(F)}function x(F){return n.interrupt=!1,n.parser.lazy[n.now().line]?t(F):(r.enter("tableDelimiterRow"),s=!1,Et(F)?Rt(r,k,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):k(F))}function k(F){return F===45||F===58?w(F):F===124?(s=!0,r.enter("tableCellDivider"),r.consume(F),r.exit("tableCellDivider"),v):E(F)}function v(F){return Et(F)?Rt(r,w,"whitespace")(F):w(F)}function w(F){return F===58?(a+=1,s=!0,r.enter("tableDelimiterMarker"),r.consume(F),r.exit("tableDelimiterMarker"),D):F===45?(a+=1,D(F)):F===null||st(F)?N(F):E(F)}function D(F){return F===45?(r.enter("tableDelimiterFiller"),_(F)):E(F)}function _(F){return F===45?(r.consume(F),_):F===58?(s=!0,r.exit("tableDelimiterFiller"),r.enter("tableDelimiterMarker"),r.consume(F),r.exit("tableDelimiterMarker"),A):(r.exit("tableDelimiterFiller"),A(F))}function A(F){return Et(F)?Rt(r,N,"whitespace")(F):N(F)}function N(F){return F===124?k(F):F===null||st(F)?!s||i!==a?E(F):(r.exit("tableDelimiterRow"),r.exit("tableHead"),e(F)):E(F)}function E(F){return t(F)}function C(F){return r.enter("tableRow"),j(F)}function j(F){return F===124?(r.enter("tableCellDivider"),r.consume(F),r.exit("tableCellDivider"),j):F===null||st(F)?(r.exit("tableRow"),e(F)):Et(F)?Rt(r,j,"whitespace")(F):(r.enter("data"),M(F))}function M(F){return F===null||F===124||nn(F)?(r.exit("data"),j(F)):(r.consume(F),F===92?O:M)}function O(F){return F===92||F===124?(r.consume(F),M):M(F)}}function k$(r,e){let t=-1,n=!0,i=0,a=[0,0,0,0],s=[0,0,0,0],l=!1,u=0,d,h,g;const b=new b$;for(;++t<r.length;){const x=r[t],k=x[1];x[0]==="enter"?k.type==="tableHead"?(l=!1,u!==0&&(wR(b,e,u,d,h),h=void 0,u=0),d={type:"table",start:Object.assign({},k.start),end:Object.assign({},k.end)},b.add(t,0,[["enter",d,e]])):k.type==="tableRow"||k.type==="tableDelimiterRow"?(n=!0,g=void 0,a=[0,0,0,0],s=[0,t+1,0,0],l&&(l=!1,h={type:"tableBody",start:Object.assign({},k.start),end:Object.assign({},k.end)},b.add(t,0,[["enter",h,e]])),i=k.type==="tableDelimiterRow"?2:h?3:1):i&&(k.type==="data"||k.type==="tableDelimiterMarker"||k.type==="tableDelimiterFiller")?(n=!1,s[2]===0&&(a[1]!==0&&(s[0]=s[1],g=t0(b,e,a,i,void 0,g),a=[0,0,0,0]),s[2]=t)):k.type==="tableCellDivider"&&(n?n=!1:(a[1]!==0&&(s[0]=s[1],g=t0(b,e,a,i,void 0,g)),a=s,s=[a[1],t,0,0])):k.type==="tableHead"?(l=!0,u=t):k.type==="tableRow"||k.type==="tableDelimiterRow"?(u=t,a[1]!==0?(s[0]=s[1],g=t0(b,e,a,i,t,g)):s[1]!==0&&(g=t0(b,e,s,i,t,g)),i=0):i&&(k.type==="data"||k.type==="tableDelimiterMarker"||k.type==="tableDelimiterFiller")&&(s[3]=t)}for(u!==0&&wR(b,e,u,d,h),b.consume(e.events),t=-1;++t<e.events.length;){const x=e.events[t];x[0]==="enter"&&x[1].type==="table"&&(x[1]._align=y$(e.events,t))}return r}function t0(r,e,t,n,i,a){const s=n===1?"tableHeader":n===2?"tableDelimiter":"tableData",l="tableContent";t[0]!==0&&(a.end=Object.assign({},zh(e.events,t[0])),r.add(t[0],0,[["exit",a,e]]));const u=zh(e.events,t[1]);if(a={type:s,start:Object.assign({},u),end:Object.assign({},u)},r.add(t[1],0,[["enter",a,e]]),t[2]!==0){const d=zh(e.events,t[2]),h=zh(e.events,t[3]),g={type:l,start:Object.assign({},d),end:Object.assign({},h)};if(r.add(t[2],0,[["enter",g,e]]),n!==2){const b=e.events[t[2]],x=e.events[t[3]];if(b[1].end=Object.assign({},x[1].end),b[1].type="chunkText",b[1].contentType="text",t[3]>t[2]+1){const k=t[2]+1,v=t[3]-t[2]-1;r.add(k,v,[])}}r.add(t[3]+1,0,[["exit",g,e]])}return i!==void 0&&(a.end=Object.assign({},zh(e.events,i)),r.add(i,0,[["exit",a,e]]),a=void 0),a}function wR(r,e,t,n,i){const a=[],s=zh(e.events,t);i&&(i.end=Object.assign({},s),a.push(["exit",i,e])),n.end=Object.assign({},s),a.push(["exit",n,e]),r.add(t+1,0,a)}function zh(r,e){const t=r[e],n=t[0]==="enter"?"start":"end";return t[1][n]}const D$={name:"tasklistCheck",tokenize:A$};function _$(){return{text:{91:D$}}}function A$(r,e,t){const n=this;return i;function i(u){return n.previous!==null||!n._gfmTasklistFirstContentOfListItem?t(u):(r.enter("taskListCheck"),r.enter("taskListCheckMarker"),r.consume(u),r.exit("taskListCheckMarker"),a)}function a(u){return nn(u)?(r.enter("taskListCheckValueUnchecked"),r.consume(u),r.exit("taskListCheckValueUnchecked"),s):u===88||u===120?(r.enter("taskListCheckValueChecked"),r.consume(u),r.exit("taskListCheckValueChecked"),s):t(u)}function s(u){return u===93?(r.enter("taskListCheckMarker"),r.consume(u),r.exit("taskListCheckMarker"),r.exit("taskListCheck"),l):t(u)}function l(u){return st(u)?e(u):Et(u)?r.check({tokenize:S$},e,t)(u):t(u)}}function S$(r,e,t){return Rt(r,n,"whitespace");function n(i){return i===null?t(i):e(i)}}function E$(r){return b6([ZG(),l$(),m$(r),v$(),_$()])}const T$={};function lI(r){const e=this,t=r||T$,n=e.data(),i=n.micromarkExtensions||(n.micromarkExtensions=[]),a=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),s=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);i.push(E$(t)),a.push($G()),s.push(YG(t))}const C$=({node:r,inline:e,className:t,children:n,...i})=>{const[a,s]=Tn.useState(!1),l=/language-(\w+)/.exec(t||""),u=String(n).replace(/\n$/,""),d=()=>{navigator.clipboard.writeText(u),s(!0),setTimeout(()=>s(!1),2e3)};return e?f.jsx("code",{className:"px-1 py-0.5 bg-light-border dark:bg-dark-border rounded font-mono text-sm",...i,children:n}):f.jsxs("div",{className:"my-4 rounded-md bg-dark-bg-page border border-dark-border text-sm",children:[f.jsxs("div",{className:"flex items-center justify-between px-4 py-1.5 border-b border-dark-border",children:[f.jsx("span",{className:"text-xs font-sans text-dark-text-tertiary",children:l?l[1]:"code"}),f.jsxs("button",{onClick:d,className:"flex items-center gap-1.5 text-xs text-dark-text-tertiary hover:text-dark-text-primary transition-colors",children:[a?f.jsx(hm,{className:"w-4 h-4 text-green-400"}):f.jsx(KR,{className:"w-4 h-4"}),a?"Copied!":"Copy"]})]}),f.jsx("pre",{className:"p-4 overflow-x-auto font-mono",...i,children:n})]})},N$={h1:({node:r,...e})=>f.jsx("h1",{className:"text-2xl font-bold my-4",...e}),h2:({node:r,...e})=>f.jsx("h2",{className:"text-xl font-bold my-3",...e}),h3:({node:r,...e})=>f.jsx("h3",{className:"text-lg font-bold my-3",...e}),p:({node:r,...e})=>f.jsx("p",{className:"my-4 leading-relaxed",...e}),ul:({node:r,...e})=>f.jsx("ul",{className:"list-disc list-inside my-4 pl-4 space-y-2",...e}),ol:({node:r,...e})=>f.jsx("ol",{className:"list-decimal list-inside my-4 pl-4 space-y-2",...e}),li:({node:r,...e})=>f.jsx("li",{className:"pl-2",...e}),blockquote:({node:r,...e})=>f.jsx("blockquote",{className:"border-l-4 border-primary-accent bg-light-bg-sidebar dark:bg-dark-bg-component pl-4 italic my-4 py-2",...e}),code:C$},U$=r=>{if(r===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB","TB"],n=Math.floor(Math.log(r)/Math.log(e));return parseFloat((r/Math.pow(e,n)).toFixed(2))+" "+t[n]},cI=({message:r,onAddToEditor:e})=>{const[t,n]=Tn.useState(!1),i=()=>{navigator.clipboard.writeText(r.text),n(!0),setTimeout(()=>n(!1),2e3)};if(r.sender==="system")return f.jsxs("div",{className:"w-full text-center text-sm text-light-text-tertiary dark:text-dark-text-tertiary py-2 my-2",children:[f.jsx(YR,{className:"w-3 h-3 inline-block mr-1.5"})," ",r.text]});const a=r.sender==="user",s=r.sender==="ai";return f.jsxs("div",{className:`flex items-start gap-3 w-full ${a?"justify-end":""}`,children:[s&&f.jsx(wA,{className:"w-8 h-8 text-primary-accent flex-shrink-0 mt-1"}),f.jsxs("div",{className:`flex flex-col max-w-3xl ${a?"items-end":"w-full items-start"}`,children:[f.jsxs("div",{className:`px-3 py-2 rounded-xl text-left font-sans text-light-text-secondary dark:text-dark-text-secondary ${a?"bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary border border-light-border dark:border-dark-border":""}`,children:[r.file&&f.jsxs("div",{className:"mb-3 p-3 border border-light-border dark:border-dark-border rounded-md flex items-center gap-3 bg-black/5 dark:bg-white/5",children:[f.jsx(Cd,{className:"w-6 h-6 text-light-text-tertiary dark:text-dark-text-tertiary flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-sm text-light-text-primary dark:text-dark-text-primary",children:r.file.name}),f.jsx("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:U$(r.file.size)})]})]}),f.jsx(L6,{remarkPlugins:[lI],components:N$,children:r.text})]}),s&&f.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[f.jsx("button",{onClick:i,className:"flex items-center gap-1.5 p-1 rounded-md text-xs font-medium text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-black/5 dark:hover:bg-white/5 transition-colors",title:"Copy text",children:t?f.jsxs(f.Fragment,{children:[f.jsx(hm,{className:"w-3.5 h-3.5 text-primary-accent"})," Copied"]}):f.jsxs(f.Fragment,{children:[f.jsx(KR,{className:"w-3.5 h-3.5"})," Copy"]})}),e&&f.jsxs("button",{onClick:()=>e&&e(r.text),className:"flex items-center gap-1.5 p-1 rounded-md text-xs font-medium text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-black/5 dark:hover:bg-white/5 transition-colors",title:"Add to editor",children:[f.jsx(Cd,{className:"w-3.5 h-3.5"})," Add to Editor"]})]})]})]})};function Tp(){const r=ax();return{...r,confirmDelete:async(a,s="item")=>r.confirm({title:`Delete ${s}`,message:`Are you sure you want to delete "${a}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger"}),confirmDestructiveAction:async(a,s,l)=>r.confirm({title:`${a}`,message:`Are you sure you want to ${a.toLowerCase()} "${s}"?${l?` ${l}`:""} This action cannot be undone.`,confirmText:a,cancelText:"Cancel",variant:"danger"}),confirmStatusChange:async(a,s,l)=>r.confirm({title:"Change Status",message:`Are you sure you want to change "${a}" from ${s} to ${l}?`,confirmText:`Change to ${l}`,cancelText:"Cancel",variant:"warning"}),confirmRoleChange:async(a,s,l)=>r.confirm({title:"Change User Role",message:`Are you sure you want to ${l==="admin"?"promote":"demote"} "${a}" ${l==="admin"?"to admin":"to regular user"}? ${l==="admin"?"They will gain administrative privileges.":"They will lose administrative privileges."}`,confirmText:l==="admin"?"Promote to Admin":"Demote to User",cancelText:"Cancel",variant:l==="user"?"danger":"warning"})}}const Av=r=>r.replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/__(.*?)__/g,"$1").replace(/~~(.*?)~~/g,"$1").replace(/`(.*?)`/g,"$1").replace(/```[\s\S]*?```/g,"").replace(/#{1,6}\s/g,"").replace(/^\s*[-*+]\s/gm,"").replace(/^\s*\d+\.\s/gm,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/<[^>]*>/g,"").replace(/\n\s*\n\s*\n/g,`

`).replace(/[ \t]+/g," ").replace(/^\s+|\s+$/g,"").trim(),R$=r=>{const e=r.trim()?r.trim().split(/\s+/).length:0,t=r.length,n=r.replace(/\s/g,"").length;return{words:e,characters:t,charactersNoSpaces:n}},uI=({isOpen:r,onClose:e,content:t,onContentChange:n})=>{const i=Tp(),[a,s]=Q.useState(t),[l,u]=Q.useState([]),[d,h]=Q.useState([]),g=Q.useRef(null),b=R$(a);Q.useEffect(()=>{s(t),u([]),h([])},[t]),Q.useEffect(()=>{r&&g.current&&g.current.focus()},[r]);const x=E=>{a!==E&&(u(C=>[...C.slice(-19),a]),h([])),s(E),n(E)},k=async()=>{try{await navigator.clipboard.writeText(a)}catch(E){console.error("Failed to copy text:",E),g.current&&(g.current.select(),document.execCommand("copy"))}},v=async()=>{try{const E=await navigator.clipboard.readText(),C=Av(E);if(g.current){const j=g.current,M=j.selectionStart,O=j.selectionEnd,F=j.value.substring(0,M)+C+j.value.substring(O);x(F),setTimeout(()=>{j.focus(),j.setSelectionRange(M+C.length,M+C.length)},0)}}catch(E){console.error("Failed to paste text:",E)}},w=E=>{(E.ctrlKey||E.metaKey)&&E.key},D=E=>{E.preventDefault();const C=E.clipboardData.getData("text/plain"),j=Av(C);if(g.current){const M=g.current,O=M.selectionStart,F=M.selectionEnd,G=M.value.substring(0,O)+j+M.value.substring(F);x(G),setTimeout(()=>{M.focus(),M.setSelectionRange(O+j.length,O+j.length)},0)}},_=()=>{const E=/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/gu,C=a.replace(E,"");x(C),setTimeout(()=>{var j;(j=g.current)==null||j.focus()},0)},A=()=>{(async()=>{await i.confirm({title:"Clear All Content",message:"Are you sure you want to clear all content? This action cannot be undone.",confirmText:"Clear All",cancelText:"Cancel",variant:"danger"})&&(x(""),setTimeout(()=>{var j;(j=g.current)==null||j.focus()},0))})()},N=[{label:"Remove Emoji",icon:"",action:_,disabled:!a.trim(),shortcut:""},{label:"Clear All",icon:"",action:A,disabled:!a.trim(),shortcut:""},{label:"Copy Text",icon:"",action:k,disabled:!a.trim(),shortcut:"Ctrl+C"},{label:"Paste Text",icon:"",action:v,disabled:!1,shortcut:"Ctrl+V"}];return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:`fixed inset-0 bg-black/20 dark:bg-black/40 backdrop-blur-sm z-[100] transition-opacity duration-300 ${r?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e}),f.jsxs("div",{className:`fixed top-0 right-0 h-full w-full max-w-2xl bg-light-bg-component dark:bg-dark-bg-component border-l border-light-border dark:border-dark-border shadow-2xl z-[101] flex flex-col transition-transform duration-300 ease-in-out ${r?"translate-x-0":"translate-x-full"}`,children:[f.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-light-border dark:border-dark-border",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"text-2xl",children:""}),f.jsx("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Editor"})]}),f.jsx("button",{onClick:e,className:"p-2 rounded-md text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page transition-colors",children:f.jsx(Ms,{className:"w-5 h-5"})})]}),f.jsx("div",{className:"flex-shrink-0 p-4 border-b border-light-border dark:border-dark-border",children:f.jsx("div",{className:"flex gap-2",children:N.map(E=>f.jsxs("button",{onClick:E.action,disabled:E.disabled,className:"flex items-center gap-2 px-3 py-2 text-sm font-medium border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:`${E.label} (${E.shortcut})`,children:[f.jsx("span",{className:"text-base",children:E.icon}),f.jsx("span",{children:E.label})]},E.label))})}),f.jsx("div",{className:"flex-1 p-4 overflow-hidden flex flex-col",children:f.jsx("textarea",{ref:g,value:a,onChange:E=>x(E.target.value),onKeyDown:w,onPaste:D,className:"flex-1 w-full p-4 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none overflow-y-auto font-serif leading-relaxed resize-none",style:{minHeight:"400px"},placeholder:"Start writing or add content from AI messages..."})}),f.jsx("div",{className:"flex-shrink-0 p-4 border-t border-light-border dark:border-dark-border bg-light-bg-sidebar dark:bg-dark-bg-sidebar",children:f.jsxs("div",{className:"flex items-center justify-between text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:[f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsxs("span",{children:["Words: ",f.jsx("span",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:b.words})]}),f.jsxs("span",{children:["Characters: ",f.jsx("span",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:b.characters})]}),f.jsxs("span",{children:["No spaces: ",f.jsx("span",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:b.charactersNoSpaces})]})]}),f.jsx("button",{onClick:()=>x(""),className:"text-xs text-red-600 dark:text-red-400 hover:underline",children:"Clear All"})]})})]})]})},kR=[{patterns:["target audience","audience","who is the audience","target market"],field:"audience",priority:1},{patterns:["tone","voice","tone of voice","writing style","brand voice"],field:"tone",priority:2},{patterns:["language","what language","preferred language"],field:"language",priority:3},{patterns:["client name","company name","brand name","business name"],field:"name",priority:4},{patterns:["sample","example","writing sample","style sample"],field:"sample",priority:5}];function j$(r,e){const t=r.toLowerCase();Logger.info("PREFILL: Attempting to match question to profile field",{component:"clientProfileHelper",questionLabel:r,profileName:e.name,availableFields:Object.keys(e).filter(i=>typeof e[i]=="string"&&e[i])});const n=[...kR].sort((i,a)=>i.priority-a.priority);for(const i of n)if(i.patterns.some(s=>t.includes(s))){const s=e[i.field];if(s&&typeof s=="string"&&s.trim())return Logger.info("PREFILL: Successful question-to-field match found",{component:"clientProfileHelper",questionLabel:r,matchedField:i.field,matchedPattern:i.patterns.find(l=>t.includes(l)),fieldValue:s.substring(0,50)+(s.length>50?"...":""),priority:i.priority}),s.trim()}return Logger.info("PREFILL: No matching profile field found for question",{component:"clientProfileHelper",questionLabel:r,profileName:e.name,checkedPatterns:kR.flatMap(i=>i.patterns)}),null}function F$(r,e){const t={preFilledAnswers:[],preFilledQuestions:[],nextQuestionIndex:0,hasPrefilledData:!1};if(!e||!r||r.length===0)return t;const n=[...r].sort((i,a)=>i.order-a.order);for(let i=0;i<n.length;i++){const a=n[i],s=j$(a.label,e);if(s)t.preFilledAnswers.push(s),t.preFilledQuestions.push(a.label),t.nextQuestionIndex=i+1,t.hasPrefilledData=!0;else break}return t}function I$(r,e,t,n){if(t.length===0)return`Hello! I'm ready to help you with ${r}. Let's get started.`;const i=t.map((a,s)=>` **${a}**: ${n[s]}`).join(`
`);return`Hello! I'm ready to help you with ${r}.

Based on your selected client profile "${e}", I've automatically filled in the following information:

${i}

This saves you time and ensures consistency with your client's requirements. Let's continue with the remaining questions.`}function O$(r,e){return`Perfect! I have all the information I need from your client profile "${e}". What would you like me to create for ${e}?`}const M$=[],L$=({projects:r,selectedProjectId:e,onSelectProject:t,onNewProject:n})=>{const[i,a]=Q.useState(!1),s=Q.useRef(null),l=r.find(h=>h.id===e);Q.useEffect(()=>{const h=g=>{s.current&&!s.current.contains(g.target)&&a(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const u=h=>{t(h),a(!1)},d=()=>{n(),a(!1)};return f.jsxs("div",{className:"relative",ref:s,children:[f.jsxs("button",{onClick:()=>a(!i),className:"flex items-center gap-2 text-sm font-medium px-3 py-1.5 rounded-md border border-light-border dark:border-dark-border bg-light-bg-component dark:bg-dark-bg-component text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[f.jsx(Yr,{className:"w-4 h-4"}),f.jsx("span",{className:"truncate max-w-[150px]",children:(l==null?void 0:l.name)||"Add chat to project"}),f.jsx(sx,{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`})]}),i&&f.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-md shadow-lg z-20",children:[f.jsx("div",{className:"p-2 max-h-60 overflow-y-auto",children:r.map(h=>f.jsxs("a",{href:"#",onClick:g=>{g.preventDefault(),u(h.id)},className:`flex items-center gap-3 w-full text-left px-3 py-2 text-sm rounded-sm ${e===h.id?"bg-primary-accent/20 text-light-text-primary dark:text-dark-text-primary":"text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page"}`,children:[f.jsx(Yr,{className:"w-4 h-4 flex-shrink-0"}),f.jsx("span",{className:"truncate",children:h.name}),e===h.id&&f.jsx(hm,{className:"w-4 h-4 ml-auto text-primary-accent"})]},h.id))}),f.jsx("div",{className:"p-2 border-t border-light-border dark:border-dark-border",children:f.jsxs("a",{href:"#",onClick:h=>{h.preventDefault(),d()},className:"flex items-center gap-3 w-full text-left px-3 py-2 text-sm rounded-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[f.jsx(Ka,{className:"w-4 h-4"}),f.jsx("span",{children:"Create new project"})]})})]})]})},B$=({tool:r,existingChatSession:e,onBack:t,projects:n,onNewProject:i,onStartNewConversation:a})=>{const[s,l]=Q.useState(()=>(e==null?void 0:e.messages)||[]),[u,d]=Q.useState(()=>e!=null&&e.messages?e.messages.filter(Fe=>Fe.sender==="user").length:0),[h,g]=Q.useState(()=>e!=null&&e.messages?e.messages.filter(be=>be.sender==="user").map(be=>be.text):[]),[b,x]=Q.useState(()=>e!=null&&e.messages&&e.messages.length>0?e.messages.filter(Fe=>Fe.sender==="user").length>=r.questions.length||r.questions.length===0:!1),[k,v]=Q.useState(!1),[w,D]=Q.useState(null),[_,A]=Q.useState(()=>{var Fe;const be=sessionStorage.getItem("activeProjectId");return(e==null?void 0:e.projectId)||be||((Fe=n[0])==null?void 0:Fe.id)||null}),[N,E]=Q.useState(()=>e!=null&&e.messages&&e.messages.length>0&&(e.messages.filter(Fe=>Fe.sender==="user").length>=r.questions.length||r.questions.length===0)?"freeform":"structured"),[C,j]=Q.useState(!1),[M,O]=Q.useState(""),[F,G]=Q.useState(null),[R,W]=Q.useState(!1),{getActiveClientProfile:U,setActiveClientProfileId:X}=ct(),P=ct(be=>{var Fe,$e;return(($e=(Fe=be.profile)==null?void 0:Fe.preferences)==null?void 0:$e.clientProfiles)||M$}),[B,ee]=Q.useState(()=>{if(e!=null&&e.clientProfileId){const Fe=P.find($e=>$e.id===e.clientProfileId);if(Fe)return Ae.info("STATE INIT: Resuming with client profile from chat session",{component:"ToolInterfaceView",profileId:Fe.id,profileName:Fe.name,chatSessionId:e.id}),Fe}const be=U();return be?(Ae.info("STATE INIT: Using global active client profile",{component:"ToolInterfaceView",profileId:be.id,profileName:be.name}),be):(Ae.info("STATE INIT: No client profile selected",{component:"ToolInterfaceView"}),null)});Q.useEffect(()=>{const Fe=setTimeout(()=>{sessionStorage.removeItem("activeProjectId"),sessionStorage.removeItem("activeClientProfile")},1e3);return()=>clearTimeout(Fe)},[]);const{user:Y}=ct(),H=Kn.getInstance(),J=Uc.getInstance(),ie=Q.useRef(null);e==null||e.id;const z=Q.useMemo(()=>[...r.questions].sort((be,Fe)=>be.order-Fe.order),[r.questions]);Q.useEffect(()=>{if(s.length>0||(e==null?void 0:e.messages.length)>0){Ae.info("GUARD: Skipping initialization - conversation already in progress",{component:"ToolInterfaceView",toolId:r.id,messageCount:s.length,isExistingSession:!!e,existingMessageCount:(e==null?void 0:e.messages.length)||0});return}Ae.info("INITIALIZATION: Starting fresh conversation with generic welcome",{component:"ToolInterfaceView",toolId:r.id,toolTitle:r.title,questionCount:z.length,isNewChat:!e,hasExistingMessages:!!(e!=null&&e.messages.length)}),v(!0),setTimeout(()=>{const be=z[0],Fe=be?`Hello! I'm ready to help you with ${r.title}. ${be.label}`:`Hello! I'm ready to help you with ${r.title}. How can I assist you today?`;l([{id:"init-message",sender:"ai",text:Fe}]),z.length===0&&(E("freeform"),x(!0)),v(!1)},1e3)},[r.id,z.length]);const ge=be=>{var Fe;if(Ae.info("PREFILL: Client profile selection triggered",{component:"ToolInterfaceView",toolId:r.id,profileId:(be==null?void 0:be.id)||null,profileName:(be==null?void 0:be.name)||"None",currentMessageCount:s.length,currentQuestionIndex:u,conversationMode:N,canPrefill:s.length<=1&&z.length>0&&!!be}),s.length<=1&&z.length>0&&be){Ae.info("PREFILL: Running prefill logic for selected profile",{component:"ToolInterfaceView",toolId:r.id,profileId:be.id,profileName:be.name,questionCount:z.length,currentMessageCount:s.length,willReplacePreviousMessages:s.length>0}),Ae.info("PREFILL: About to call prefillQuestionsFromClientProfile",{component:"ToolInterfaceView",toolId:r.id,profileId:be.id,profileName:be.name,questionCount:z.length,questions:z.map(I=>({label:I.label.substring(0,50)+(I.label.length>50?"...":""),type:I.type,order:I.order}))});const $e=F$(z,be);if(Ae.info("PREFILL: prefillQuestionsFromClientProfile completed",{component:"ToolInterfaceView",toolId:r.id,profileId:be.id,profileName:be.name,hasPrefilledData:$e.hasPrefilledData,prefilledCount:$e.preFilledAnswers.length,nextQuestionIndex:$e.nextQuestionIndex,prefilledQuestions:$e.preFilledQuestions.map(I=>I.substring(0,30)+(I.length>30?"...":"")),prefilledAnswers:$e.preFilledAnswers.map(I=>I.substring(0,30)+(I.length>30?"...":""))}),$e.hasPrefilledData){Ae.info("PREFILL: Creating context-aware welcome message",{component:"ToolInterfaceView",toolId:r.id,profileId:be.id,prefilledCount:$e.preFilledAnswers.length,totalQuestions:z.length});const I=I$(r.title,be.name,$e.preFilledQuestions,$e.preFilledAnswers);g($e.preFilledAnswers),d($e.nextQuestionIndex);let he=[{id:"context-message",sender:"ai",text:I}];if($e.nextQuestionIndex<z.length){Ae.info("PREFILL: Partial prefill - asking next question",{component:"ToolInterfaceView",toolId:r.id,nextQuestionIndex:$e.nextQuestionIndex,nextQuestionLabel:(Fe=z[$e.nextQuestionIndex])==null?void 0:Fe.label});const oe=z[$e.nextQuestionIndex];he.push({id:"next-question",sender:"ai",text:oe.label})}else{Ae.info("PREFILL: Complete prefill - entering freeform mode",{component:"ToolInterfaceView",toolId:r.id,allQuestionsAnswered:!0}),E("freeform"),x(!0);const oe=O$(r.title,be.name);he.push({id:"ready-message",sender:"ai",text:oe})}l(he),Ae.info("PREFILL: Prefill completed successfully",{component:"ToolInterfaceView",toolId:r.id,profileId:be.id,profileName:be.name,finalMessageCount:he.length,finalQuestionIndex:$e.nextQuestionIndex,newConversationMode:$e.nextQuestionIndex>=z.length?"freeform":"structured",replacedPreviousMessages:!0})}else Ae.info("PREFILL: No prefillable data found in profile",{component:"ToolInterfaceView",toolId:r.id,profileId:be.id,profileName:be.name,questionCount:z.length,reason:"No matching fields found between questions and profile data"})}else Ae.info("PREFILL: Skipping prefill logic",{component:"ToolInterfaceView",toolId:r.id,profileId:(be==null?void 0:be.id)||null,profileName:(be==null?void 0:be.name)||"None",currentMessageCount:s.length,questionCount:z.length,reason:s.length>1?"Chat already in progress":z.length===0?"Tool has no questions":be?"Unknown":"No profile selected"})},ve=be=>{Ae.info("HANDLER: Profile selection triggered - updating both local and global state",{component:"ToolInterfaceView",toolId:r.id,newProfileId:(be==null?void 0:be.id)||null,newProfileName:(be==null?void 0:be.name)||"None",previousProfileId:(B==null?void 0:B.id)||null,previousProfileName:(B==null?void 0:B.name)||"None",currentMessageCount:s.length,willTriggerPrefill:s.length<=1&&z.length>0&&!!be}),X((be==null?void 0:be.id)||null),ee(be),ge(be),Ae.info("HANDLER: Profile selection complete - both states synchronized",{component:"ToolInterfaceView",localProfileId:(be==null?void 0:be.id)||null,globalProfileId:(be==null?void 0:be.id)||null})};Q.useEffect(()=>{ie.current&&s.length>0&&setTimeout(()=>{var be;(be=ie.current)==null||be.scrollIntoView({behavior:"smooth",block:"end"})},100)},[s]);const[je,Ie]=Q.useState(()=>(e==null?void 0:e.id)||null);Q.useEffect(()=>{const Fe=setTimeout(async()=>{if(!Y||!s.length||k)return;const $e=s.some(he=>he.sender==="user"),I=s.some(he=>he.sender==="ai");if(!(!$e||!I))try{if(je)(await H.updateChatSession(je,{messages:s,projectId:_||void 0,clientProfileId:(B==null?void 0:B.id)||null})).success&&Ae.info("Chat auto-saved successfully",{component:"ToolInterfaceView",toolId:r.id,messageCount:s.length,projectId:_});else{const he=s.find(ne=>ne.sender==="user"),oe=(he==null?void 0:he.text.substring(0,50))||r.title,re=await H.saveChatSession({userId:Y.id,toolId:r.id,title:oe,messages:s,projectId:_||void 0,clientProfileId:(B==null?void 0:B.id)||null});re.success&&re.data&&(Ie(re.data.id),Ae.info("New chat session created",{component:"ToolInterfaceView",toolId:r.id,sessionId:re.data.id,messageCount:s.length}))}}catch(he){Ae.error({message:"Failed to auto-save chat",code:"CHAT_AUTO_SAVE_ERROR",details:he instanceof Error?he.message:"Unknown auto-save error",timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:"ToolInterfaceView",severity:"warn"},{toolId:r.id,messageCount:s.length})}},2e3);return()=>clearTimeout(Fe)},[s,Y,H,r.id,_,k,je,B]);const Pe=async be=>{var he;Ae.userAction("send_chat_message",{component:"ToolInterfaceView",toolId:r.id,toolTitle:r.title,messageLength:be.length,hasAttachment:!!w,questionIndex:u,conversationMode:N}),W(!0);let Fe;if(w&&Y)try{const oe=await J.uploadKnowledgeBaseFile(w,Y.id);if(oe.success&&((he=oe.data)!=null&&he.fileId)){Ae.info("Knowledge base file uploaded successfully",{component:"ToolInterfaceView",fileId:oe.data.fileId,fileName:w.name}),Fe=oe.data.fileId;const re={id:`system-${Date.now()}`,sender:"system",text:`Knowledge base file "${w.name}" has been processed and added to the conversation context.`};l(ne=>[...ne,re])}else Ae.warn("File upload may have succeeded but no file ID was returned",{component:"ToolInterfaceView",response:oe})}catch(oe){Ae.error({message:"Failed to process knowledge base file",code:"FILE_PROCESSING_ERROR",details:oe instanceof Error?oe.message:"Unknown file error",timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:"ToolInterfaceView",severity:"warn"},{fileName:w.name,fileSize:w.size})}const $e={id:crypto.randomUUID(),sender:"user",text:be,file:w?{name:w.name,size:w.size}:void 0};l(oe=>[...oe,$e]),D(null);const I=[...h,be];g(I),d(oe=>oe+1),v(!0),W(!1);try{if(N==="structured"&&u+1<z.length)setTimeout(()=>{const oe=z[u+1],re={id:crypto.randomUUID(),sender:"ai",text:oe.label};l(ne=>[...ne,re]),v(!1)},800);else{N==="structured"&&!b&&(E("freeform"),x(!0));const oe=[...s,$e],re=U(),ne=await H.sendChatMessage(r.id,oe,Fe,re||void 0);if(ne.success&&ne.data){const ue={id:crypto.randomUUID(),sender:"ai",text:ne.data};G(ue.id),l(Ce=>[...Ce,ue]),Ae.info(`Chat response generated successfully (${N} mode)`,{component:"ToolInterfaceView",toolId:r.id,conversationMode:N,responseLength:ne.data.length,hadKnowledgeBase:!!Fe})}else{Ae.error({message:ne.error||"AI response generation failed",code:"CHAT_AI_RESPONSE_ERROR",timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:"ToolInterfaceView",severity:"error"},{toolId:r.id,questionIndex:u});const ue={id:crypto.randomUUID(),sender:"ai",text:"I apologize, but I encountered an error generating your response. Please try again or contact support if the issue persists."};l(Ce=>[...Ce,ue])}v(!1)}}catch(oe){console.error("Error sending message:",oe),Ae.error({message:"Unexpected error in chat flow",code:"CHAT_FLOW_ERROR",details:oe instanceof Error?oe.message:"Unknown chat error",timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:"ToolInterfaceView",severity:"error"},{toolId:r.id,questionIndex:u,hasAttachment:!!w});const re={id:crypto.randomUUID(),sender:"ai",text:"I apologize, but I encountered an error. Please try again."};l(ne=>[...ne,re]),v(!1)}},fe=()=>{G(null)},Ue=be=>{const Fe=Av(be);O($e=>{const I=$e.trim()?`

`:"";return $e+I+Fe}),j(!0)};return f.jsxs("div",{className:"h-full flex flex-col relative bg-light-bg-page dark:bg-[#212121]",children:[f.jsxs("button",{onClick:()=>j(!0),className:"fixed top-1/2 right-0 -translate-y-1/2 bg-primary-accent text-text-on-accent px-3 py-6 rounded-l-lg shadow-lg hover:opacity-85 transition-all duration-200 z-50 flex flex-col items-center gap-2 text-sm font-medium",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:[f.jsx("span",{className:"text-lg",children:""}),f.jsx("span",{children:"Editor"})]}),f.jsxs("header",{className:"flex-shrink-0 grid grid-cols-3 items-center gap-4 p-4 border-b border-light-border dark:border-gray-600 bg-light-bg-component/90 dark:bg-[rgba(33,33,33,0.9)] backdrop-blur-sm sticky top-0 z-10",children:[f.jsxs("div",{className:"justify-self-start flex items-center gap-4",children:[f.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-sm font-medium text-gray-300 hover:text-white",children:[f.jsx(Yv,{className:"w-4 h-4"}),"Back"]}),f.jsx("div",{className:"h-6 w-px bg-light-border dark:bg-gray-600"}),f.jsx(L$,{projects:n,selectedProjectId:_,onSelectProject:A,onNewProject:i}),f.jsx(i5,{selectedProfileId:(B==null?void 0:B.id)||null,onSelectProfile:ve,className:"min-w-[200px]",label:""})]}),f.jsx("div",{className:"justify-self-center",children:f.jsx("h2",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-white truncate",children:r.title})}),f.jsx("div",{className:"justify-self-end",children:a&&f.jsxs("button",{onClick:()=>a(r),className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",title:"Start a fresh conversation with this tool",children:[f.jsx(Ka,{className:"w-4 h-4"}),"New Conversation"]})})]}),f.jsx("div",{className:"flex-grow overflow-y-auto",children:f.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-6 space-y-8",children:[s.map(be=>f.jsx("div",{className:"mb-8 last:mb-4",children:f.jsx(cI,{message:be,onAddToEditor:Ue,isStreaming:F===be.id,onStreamComplete:fe})},be.id)),k&&f.jsx(z$,{conversationMode:N,isProcessingRequest:R}),f.jsx("div",{ref:ie,className:"h-1"})]})}),f.jsx("div",{className:"flex-shrink-0 p-4 bg-light-bg-component dark:bg-[#212121] border-t border-light-border dark:border-gray-600",children:f.jsxs("div",{className:"max-w-3xl mx-auto",children:[N==="structured"&&!b&&f.jsxs("p",{className:"text-center text-sm text-light-text-tertiary dark:text-gray-400 mb-3",children:["Question ",u+1," of ",z.length]}),f.jsx(P$,{onSendMessage:Pe,disabled:k,attachedFile:w,setAttachedFile:D,placeholder:k?"":N==="freeform"?"Ask for revisions, improvements, or continue the conversation...":"Type your answer here...",isProcessingRequest:R}),N==="freeform"&&f.jsx("p",{className:"text-center text-xs text-light-text-tertiary dark:text-gray-400 mt-2 opacity-70",children:"Continue the conversation - ask for revisions, improvements, or new requests"})]})}),f.jsx(uI,{isOpen:C,onClose:()=>j(!1),content:M,onContentChange:O})]})},P$=({onSendMessage:r,disabled:e,attachedFile:t,setAttachedFile:n,placeholder:i="Type your message here...",isProcessingRequest:a=!1})=>{const[s,l]=Q.useState(""),u=Q.useRef(null),d=Q.useRef(null),h=Uc.getInstance();Q.useEffect(()=>{u.current&&(u.current.style.height="auto",u.current.style.height=`${u.current.scrollHeight}px`)},[s]);const g=x=>{if(x.target.files&&x.target.files.length>0){const k=x.target.files[0],v=h.validateFile(k);if(!v.isValid){Ae.error({message:v.error||"File validation failed",code:"FILE_VALIDATION_ERROR",timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:"ChatInput",severity:"warn"},{fileName:k.name,fileSize:k.size,fileType:k.type}),alert(v.error);return}n(k)}},b=async x=>{if(x.preventDefault(),(s.trim()||t)&&!e){const k=s.trim();l(""),r(k)}};return f.jsxs("form",{onSubmit:b,className:"relative",children:[f.jsx("input",{type:"file",ref:d,onChange:g,className:"hidden",accept:".pdf,.docx,.doc,.txt,.md"}),f.jsxs("div",{className:"flex flex-col text-left bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg p-2 shadow-sm dark:shadow-2xl",children:[f.jsxs("div",{className:"flex items-end",children:[f.jsx("button",{type:"button",onClick:()=>{var x;return(x=d.current)==null?void 0:x.click()},className:"p-2 rounded-md hover:bg-black/5 dark:hover:bg-white/5 mr-2",title:"Attach Knowledge Base file (PDF, DOCX, TXT, MD)",children:f.jsx(YR,{className:"w-5 h-5 text-light-text-tertiary dark:text-dark-text-tertiary"})}),f.jsx("textarea",{ref:u,value:s,onChange:x=>l(x.target.value),onKeyDown:x=>{x.key==="Enter"&&!x.shiftKey&&!e&&(x.preventDefault(),b(x))},rows:1,placeholder:e?"":i,className:"prompt-input w-full border-none outline-none bg-transparent p-2 text-base text-light-text-primary dark:text-dark-text-primary font-medium resize-none leading-normal max-h-48 overflow-y-auto",disabled:e}),f.jsx("button",{type:"submit",className:"bg-primary-accent text-text-on-accent border-none rounded-md p-3 cursor-pointer flex items-center justify-center transition-opacity self-end flex-shrink-0 hover:opacity-85 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!s.trim()&&!t||e,children:f.jsx(ND,{className:"w-5 h-5"})})]}),t&&f.jsxs("div",{className:"flex items-center gap-2 p-2 mt-2 ml-12 border-t border-light-border dark:border-dark-border",children:[f.jsx(Cd,{className:"w-4 h-4 text-light-text-tertiary"}),f.jsx("span",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary",children:t.name}),f.jsx("button",{type:"button",onClick:()=>n(null),className:"ml-auto p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:f.jsx(Ms,{className:"w-4 h-4 text-light-text-tertiary"})})]})]})]})},z$=({conversationMode:r,isProcessingRequest:e=!1})=>f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(wA,{className:"w-8 h-8 flex-shrink-0"}),f.jsxs("div",{className:"p-4 rounded-lg bg-light-bg-component dark:bg-dark-bg-component mt-1 border border-primary-accent/20",children:[f.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[f.jsxs("div",{className:"flex space-x-1",children:[f.jsx("div",{className:"w-2.5 h-2.5 bg-primary-accent rounded-full animate-bounce [animation-delay:-0.3s]"}),f.jsx("div",{className:"w-2.5 h-2.5 bg-primary-accent rounded-full animate-bounce [animation-delay:-0.15s]"}),f.jsx("div",{className:"w-2.5 h-2.5 bg-primary-accent rounded-full animate-bounce"})]}),f.jsx("div",{className:"w-8 h-1 bg-gradient-to-r from-primary-accent via-primary-accent/50 to-transparent rounded-full animate-pulse"})]}),f.jsx("p",{className:"text-sm font-medium text-primary-accent",children:e?"Artemo is processing your request...":r==="structured"?"Artemo is crafting your content...":"Artemo is thinking..."})]})]}),W$=()=>f.jsxs("div",{className:"flex h-screen animate-pulse",children:[f.jsxs("div",{className:"w-96 bg-light-bg-sidebar dark:bg-dark-bg-sidebar p-4 space-y-4 border-r border-light-border dark:border-dark-border",children:[f.jsx("div",{className:"h-8 w-3/4 bg-light-bg-component dark:bg-dark-bg-component rounded-md"}),f.jsx("div",{className:"h-20 w-full bg-light-bg-component dark:bg-dark-bg-component rounded-md"}),f.jsx("div",{className:"h-10 w-full bg-light-bg-component dark:bg-dark-bg-component rounded-md"}),f.jsx("div",{className:"h-10 w-full bg-light-bg-component dark:bg-dark-bg-component rounded-md"})]}),f.jsxs("div",{className:"flex-1 p-6 flex flex-col bg-light-bg-page dark:bg-dark-bg-page",children:[f.jsxs("div",{className:"flex-grow space-y-4",children:[f.jsx("div",{className:"h-16 w-3/4 bg-light-bg-component dark:bg-dark-bg-component rounded-md self-start"}),f.jsx("div",{className:"h-20 w-1/2 bg-light-bg-component dark:bg-dark-bg-component rounded-md self-end ml-auto"}),f.jsx("div",{className:"h-12 w-2/3 bg-light-bg-component dark:bg-dark-bg-component rounded-md self-start"})]}),f.jsx("div",{className:"h-12 w-full bg-light-bg-component dark:bg-dark-bg-component rounded-md mt-4"})]})]}),H$=()=>{var g;const{toolId:r}=pA(),e=Fr(),t=di(),{tools:n,loading:i,error:a}=Pc(),{projects:s}=wp(),{openModal:l}=Ca();if(i)return f.jsx(W$,{});if(a)return f.jsx("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:f.jsxs("div",{className:"text-center py-20 text-red-600 dark:text-red-400",children:[f.jsx("h2",{className:"text-xl font-bold mb-4",children:"Error Loading Tool"}),f.jsx("p",{children:a})]})});const u=n.find(b=>b.id===r),d=(g=t.state)==null?void 0:g.existingChatSession;if(!u)return f.jsx("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:f.jsxs("div",{className:"text-center py-20",children:[f.jsx(Ko,{className:"w-16 h-16 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),f.jsx("h2",{className:"text-2xl font-bold text-light-text-primary dark:text-dark-text-primary mb-4",children:"Tool Not Found"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-6",children:"The tool you're looking for doesn't exist, is inactive, or has been deleted."}),f.jsx("button",{onClick:()=>e("/tools"),className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85",children:"Back to All Tools"})]})});const h=()=>{e(`/tools/${r}`,{replace:!0,state:null})};return f.jsx(B$,{tool:u,existingChatSession:d,onBack:()=>e("/"),projects:s,onNewProject:l,onStartNewConversation:h})},q$=({chatItem:r,onRename:e,onDelete:t,onRemoveFromProject:n})=>{const[i,a]=Q.useState(!1),s=Tn.useRef(null);return Tn.useEffect(()=>{const l=u=>{s.current&&!s.current.contains(u.target)&&a(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]),f.jsxs("div",{className:"relative",ref:s,children:[f.jsx("button",{onClick:l=>{l.stopPropagation(),l.preventDefault(),a(!i)},className:"p-1 rounded-full text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-light-bg-page dark:hover:bg-dark-bg-page opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx(Kv,{className:"w-4 h-4"})}),i&&f.jsxs("div",{className:"absolute right-0 top-full mt-1 w-40 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-md shadow-lg z-10 py-1",children:[f.jsxs("button",{onClick:l=>{l.stopPropagation(),e(),a(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[f.jsx(hi,{className:"w-3.5 h-3.5"})," Rename"]}),f.jsxs("button",{onClick:l=>{l.stopPropagation(),n(),a(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[f.jsx(Yr,{className:"w-3.5 h-3.5"})," Remove from Project"]}),f.jsxs("button",{onClick:l=>{l.stopPropagation(),t(),a(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-red-600 dark:text-red-500 hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[f.jsx(Qa,{className:"w-3.5 h-3.5"})," Delete"]})]})]})},V$=({isOpen:r,onClose:e,projectId:t,project:n})=>{Pc();const[i,a]=Q.useState(""),[s,l]=Q.useState(!1),[u,d]=Q.useState(null),[h,g]=Q.useState(""),[b,x]=Q.useState(0),[k,v]=Q.useState([]),[w,D]=Q.useState(null),[_,A]=Q.useState(""),N=vu.getInstance(),E=Tn.useRef(null);Tn.useEffect(()=>{E.current&&(E.current.style.height="auto",E.current.style.height=`${E.current.scrollHeight}px`)},[i]);const C=()=>{if(sessionStorage.setItem("activeProjectId",t),n.clientProfileSnapshot){sessionStorage.setItem("activeClientProfile",JSON.stringify(n.clientProfileSnapshot));const{setActiveClientProfileId:F}=ct.getState();F(n.clientProfileSnapshot.id)}window.dispatchEvent(new CustomEvent("recommendedToolSelected",{detail:{tool:u,projectId:t}})),sessionStorage.setItem("selectedProjectId",t),e()},j=async F=>{if(!F.trim()){g("Please describe what you need so we can recommend a tool.");return}l(!0),d(null),g(""),x(0),v([]),D(null),A("");try{const G=await N.getOptimizedToolRecommendation(F);if(G.success&&G.data){const{recommendedTool:R,analysis:W,tokensSaved:U,similarTools:X,source:P,provenance:B}=G.data;g(W),x(U??0),v(X??[]),D(P),A(B??""),R&&d(R)}else g(G.error||"AI recommendation service is temporarily unavailable."),D(null)}catch(G){console.error("Failed to analyze prompt:",G),g("AI recommendation service is temporarily unavailable. Please try again shortly."),D(null)}finally{l(!1)}},M=()=>{i.trim()&&j(i.trim())},O=F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),M())};return r?f.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-50 flex items-center justify-center p-4",onClick:e,children:f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-2xl max-h-[90vh] overflow-hidden",onClick:F=>F.stopPropagation(),children:[f.jsxs("div",{className:"p-6 border-b border-light-border dark:border-dark-border flex justify-between items-center",children:[f.jsx("h3",{className:"font-serif text-2xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"AI Tool Recommendation"}),f.jsx("button",{onClick:e,className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md transition-colors",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-4",children:"Tell me what you want to create and I'll recommend the perfect tool for this project."}),f.jsxs("div",{className:"flex flex-col sm:flex-row items-start text-left bg-light-bg-sidebar dark:bg-dark-bg-page border border-light-border dark:border-dark-border rounded-md p-1 sm:pl-4",children:[f.jsx("span",{className:"text-base sm:text-lg text-primary-accent font-medium pt-3 flex-shrink-0 px-3 sm:px-0",children:"I want to create a"}),f.jsx("textarea",{ref:E,value:i,onChange:F=>a(F.target.value),onKeyDown:O,rows:1,className:"prompt-input flex-grow border-none outline-none bg-transparent p-3 text-base sm:text-lg text-light-text-primary dark:text-dark-text-primary font-medium resize-none leading-normal max-h-60 w-full",placeholder:"persuasive email for a new product launch"}),f.jsx("button",{onClick:M,disabled:s||!i.trim(),className:"bg-primary-accent text-text-on-accent border-none rounded-sm m-1 p-2.5 cursor-pointer flex items-center justify-center transition-opacity self-end sm:self-end flex-shrink-0 hover:opacity-85 disabled:opacity-50 disabled:cursor-not-allowed",children:s?f.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-text-on-accent"}):f.jsx(Sa,{className:"w-5 h-5"})})]})]}),(s||u||h)&&f.jsx("div",{className:"bg-light-bg-sidebar dark:bg-dark-bg-page border border-light-border dark:border-dark-border rounded-lg p-6",children:s?f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-accent mx-auto mb-4"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Analyzing your request and finding the perfect tool..."})]}):f.jsxs("div",{children:[f.jsx("h4",{className:"font-serif text-lg font-bold text-light-text-primary dark:text-dark-text-primary mb-4",children:"AI Recommendation"}),w&&f.jsxs("div",{className:"mb-3 text-xs text-primary-accent font-medium uppercase tracking-wide",children:[w==="supabase"?"Powered by Supabase vector search":"Powered by local demo engine",_?`  ${_}`:""]}),h&&f.jsx("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary mb-4 whitespace-pre-line",children:h}),u?f.jsx("div",{className:"space-y-4",children:f.jsxs("div",{className:"bg-primary-accent/10 border border-primary-accent/20 rounded-lg p-4",children:[b>0&&f.jsxs("div",{className:"mb-3 text-xs text-green-600 dark:text-green-400 font-medium",children:[" Optimized search saved ~",b," tokens"]}),f.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[f.jsx("div",{className:"w-10 h-10 bg-primary-accent/20 rounded-lg flex items-center justify-center",children:f.jsx(Sa,{className:"w-5 h-5 text-primary-accent"})}),f.jsxs("div",{children:[f.jsxs("h5",{className:"font-semibold text-light-text-primary dark:text-dark-text-primary",children:["Recommended: ",u.title]}),f.jsx("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary",children:u.category})]})]}),f.jsx("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary mb-4",children:u.description}),f.jsxs("button",{onClick:C,className:"w-full bg-primary-accent text-text-on-accent py-2 px-4 rounded-md hover:opacity-85 transition-opacity",children:["Use ",u.title]})]})}):null,k.length>0&&f.jsxs("div",{className:"mt-4",children:[f.jsx("h5",{className:"text-sm font-semibold text-light-text-secondary dark:text-dark-text-secondary uppercase tracking-wide mb-2",children:"Other close matches"}),f.jsx("ul",{className:"space-y-2",children:k.map(F=>f.jsxs("li",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:[f.jsx("span",{className:"font-medium text-light-text-secondary dark:text-dark-text-secondary",children:F.title}),f.jsxs("span",{className:"ml-2",children:[" ",F.category_name]}),f.jsxs("span",{className:"ml-2 text-xs",children:["(score ",(F.similarity_score*100).toFixed(1),"%)"]})]},F.tool_id))})]})]})})]})]})}):null},X$=({clientProfile:r,projectColor:e})=>{const[t,n]=Q.useState(!1),[i,a]=Q.useState({x:0,y:0}),s=Tn.useRef(null),l=d=>{n(!0);const h=d.currentTarget.getBoundingClientRect();a({x:h.left+h.width/2,y:h.top-10})},u=()=>{n(!1)};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{ref:s,onMouseEnter:l,onMouseLeave:u,className:"inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium rounded-full border transition-all duration-200 hover:shadow-sm cursor-help",style:{borderColor:e,color:e,backgroundColor:"transparent"},children:[f.jsx(Ko,{className:"w-3 h-3"}),f.jsx("span",{children:r.name})]}),t&&f.jsxs("div",{className:"fixed z-[1000] bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg shadow-xl p-4 max-w-sm transform -translate-x-1/2 -translate-y-full transition-all duration-200",style:{left:i.x,top:i.y},children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("h5",{className:"font-semibold text-light-text-primary dark:text-dark-text-primary",children:r.name}),f.jsxs("div",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary space-y-1",children:[f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Audience:"})," ",r.audience]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Language:"})," ",r.language]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Tone:"})," ",r.tone]}),r.sample&&f.jsxs("p",{children:[f.jsx("span",{className:"font-medium",children:"Sample:"}),' "',r.sample,'"']})]})]}),f.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-light-bg-component dark:border-t-dark-bg-component"})]})]})},G$=({project:r,onBack:e,onViewChatDetail:t,onStartNewChat:n})=>{const i=Tp(),a=Ir(),[s,l]=Q.useState([]),[u,d]=Q.useState(!0),[h,g]=Q.useState(null),[b,x]=Q.useState(!1),[k,v]=Q.useState(null),[w,D]=Q.useState(""),{user:_}=ct(),{updateChatSession:A,deleteChat:N}=Dp(),E=Kn.getInstance();Q.useEffect(()=>{(async()=>{if(_){d(!0),g(null);try{const G=await E.getChatSessionsByProjectId(r.id,_.id);G.success&&G.data?l(G.data):G.error&&!G.error.includes("No data")?g(G.error):l([])}catch(G){console.error("Error fetching project chats:",G);const R=G instanceof Error?G.message:"Unknown error";!R.includes("Failed to fetch")&&!R.includes("TypeError")?g("Network error occurred"):l([])}finally{d(!1)}}})()},[r.id,_,E]);const C=async(F,G)=>{if(G.trim())try{await A(F,{title:G.trim()}),l(R=>R.map(W=>W.id===F?{...W,toolTitle:G.trim()}:W)),v(null),D(""),a.success(`Chat renamed to "${G.trim()}" successfully`,"Chat Renamed")}catch(R){console.error("Failed to rename chat:",R),a.error("Failed to rename chat. Please try again.")}},j=async F=>{const G=s.find(W=>W.id===F);if(!(!G||!await i.confirmDelete(G.toolTitle,"chat")))try{N(F),l(W=>W.filter(U=>U.id!==F)),a.success(`Chat "${G.toolTitle}" deleted successfully`,"Chat Deleted")}catch(W){console.error("Failed to delete chat:",W),a.error("Failed to delete chat. Please try again.")}},M=async F=>{const G=s.find(W=>W.id===F);if(!(!G||!await i.confirm({title:"Remove from Project",message:`Are you sure you want to remove "${G.toolTitle}" from this project?`,confirmText:"Remove",cancelText:"Cancel",variant:"warning"})))try{await A(F,{projectId:null}),l(W=>W.filter(U=>U.id!==F)),a.success(`Chat "${G.toolTitle}" removed from project successfully`,"Chat Removed")}catch(W){console.error("Failed to remove chat from project:",W),a.error("Failed to remove chat from project. Please try again.")}},O=F=>{v({id:F.id,name:F.toolTitle}),D(F.toolTitle)};return f.jsxs("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:[f.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[f.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:[f.jsx(Yv,{className:"w-4 h-4"}),"Back"]}),f.jsx("div",{className:"h-6 w-px bg-light-border dark:border-dark-border"}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-xl border-2",style:{borderColor:r.color},children:f.jsx(Yr,{className:"w-8 h-8",style:{color:r.color}})}),f.jsxs("div",{className:"flex-grow",children:[f.jsx("h2",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary mb-3",children:r.name}),r.clientProfileSnapshot&&f.jsx("div",{className:"mb-3",children:f.jsx(X$,{clientProfile:r.clientProfileSnapshot,projectColor:r.color})})]})]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsxs("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:["Chat Sessions (",s.length,")"]}),f.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",children:[f.jsx(Sa,{className:"w-4 h-4"}),"Start New Tool"]})]}),u?f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-accent mx-auto mb-4"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading chats..."})]})}):h?f.jsx("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:f.jsxs("p",{children:["Error: ",h]})}):s.length>0?f.jsx("div",{className:"space-y-3",children:s.map(F=>{var G;return f.jsx("div",{className:"group relative w-full text-left p-4 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-md hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page transition-colors cursor-pointer",onClick:()=>t(F),children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(Sd,{className:"w-5 h-5 text-primary-accent flex-shrink-0 mt-0.5"}),f.jsxs("div",{className:"flex-grow min-w-0 pr-8",children:[f.jsx("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary truncate",children:F.toolTitle}),f.jsxs("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary truncate mt-1",children:['"',((G=F.messages.find(R=>R.sender==="user"))==null?void 0:G.text)||"No messages",'"']}),f.jsxs("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary mt-1",children:[new Date(F.timestamp).toLocaleDateString()," at ",new Date(F.timestamp).toLocaleTimeString()]})]}),f.jsx("div",{className:"absolute top-3 right-3",children:f.jsx(q$,{chatItem:F,onRename:()=>O(F),onDelete:()=>j(F.id),onRemoveFromProject:()=>M(F.id)})})]})},F.id)})}):f.jsxs("div",{className:"text-center py-12 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-lg border border-light-border dark:border-dark-border",children:[f.jsx(Sd,{className:"w-12 h-12 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary",children:"No chat sessions yet"}),f.jsx("p",{className:"text-light-text-tertiary dark:text-dark-text-tertiary mt-1",children:"Start using tools and associate them with this project to see chat sessions here."})]})]}),k&&f.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-[1001] flex items-center justify-center p-4",onClick:()=>v(null),children:f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-md",onClick:F=>F.stopPropagation(),children:[f.jsxs("div",{className:"p-4 border-b border-light-border dark:border-dark-border flex justify-between items-center",children:[f.jsx("h3",{className:"font-serif text-lg font-bold text-light-text-primary dark:text-dark-text-primary",children:"Rename Chat"}),f.jsx("button",{onClick:()=>v(null),className:"text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"p-4",children:[f.jsx("label",{htmlFor:"rename-input",className:"block font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Chat Name"}),f.jsx("input",{id:"rename-input",type:"text",value:w,onChange:F=>D(F.target.value),className:"w-full p-2.5 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-sm text-light-text-primary dark:text-dark-text-primary focus:border-primary-accent focus:ring-2 focus:ring-primary-accent/20 outline-none",onKeyDown:F=>F.key==="Enter"&&C(k.id,w),autoFocus:!0})]}),f.jsxs("div",{className:"p-4 border-t border-light-border dark:border-dark-border flex justify-end gap-3",children:[f.jsx("button",{onClick:()=>v(null),className:"px-4 py-2 rounded-sm bg-light-bg-sidebar dark:bg-dark-bg-component border border-light-border dark:border-dark-border text-light-text-primary dark:text-dark-text-primary hover:opacity-85",children:"Cancel"}),f.jsx("button",{onClick:()=>C(k.id,w),className:"px-4 py-2 rounded-sm bg-primary-accent text-text-on-accent hover:opacity-85",children:"Save"})]})]})}),f.jsx(V$,{isOpen:b,onClose:()=>x(!1),projectId:r.id,project:r})]})},$$=()=>f.jsxs("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full animate-pulse",children:[f.jsx("div",{className:"flex items-center gap-4 mb-8",children:f.jsx("div",{className:"h-6 w-20 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"})}),f.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[f.jsx("div",{className:"w-16 h-16 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-xl"}),f.jsxs("div",{className:"flex-grow space-y-3",children:[f.jsx("div",{className:"h-8 w-1/2 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"}),f.jsx("div",{className:"h-5 w-1/4 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"})]})]}),f.jsx("div",{className:"h-px bg-light-border dark:border-dark-border mb-6"}),f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("div",{className:"h-7 w-1/3 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"}),f.jsx("div",{className:"h-10 w-36 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("div",{className:"h-20 w-full bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"}),f.jsx("div",{className:"h-20 w-full bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"}),f.jsx("div",{className:"h-20 w-full bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"})]})]}),Y$=()=>{const{id:r}=pA(),e=Fr(),{projects:t,loading:n,error:i}=wp();if(n)return f.jsx($$,{});if(i)return f.jsx("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:f.jsxs("div",{className:"text-center py-20 text-red-600 dark:text-red-400",children:[f.jsx("h2",{className:"text-xl font-bold mb-4",children:"Error Loading Project"}),f.jsx("p",{children:i})]})});const a=t.find(u=>u.id===r);if(!a)return f.jsx("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:f.jsxs("div",{className:"text-center py-20",children:[f.jsx(Yr,{className:"w-16 h-16 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),f.jsx("h2",{className:"text-2xl font-bold text-light-text-primary dark:text-dark-text-primary mb-4",children:"Project Not Found"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-6",children:"The project you're looking for doesn't exist or has been deleted."}),f.jsx("button",{onClick:()=>e("/projects"),className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85",children:"Back to All Projects"})]})});const s=u=>{e(`/chat/${u.id}`)},l=(u,d)=>{e(`/tools/${d}`,{state:{projectId:u}})};return f.jsx(G$,{project:a,onBack:()=>e("/projects"),onViewChatDetail:s,onStartNewChat:l})},K$=({onRename:r,onDelete:e})=>{const[t,n]=Q.useState(!1),i=Q.useRef(null);return Q.useEffect(()=>{const a=s=>{i.current&&!i.current.contains(s.target)&&n(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),f.jsxs("div",{className:"relative",ref:i,children:[f.jsx("button",{onClick:a=>{a.stopPropagation(),a.preventDefault(),n(!t)},className:"p-1 rounded-full text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:f.jsx(Kv,{className:"w-4 h-4"})}),t&&f.jsxs("div",{className:"absolute right-0 top-full mt-1 w-32 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-md shadow-lg z-10 py-1",children:[f.jsxs("button",{onClick:a=>{a.stopPropagation(),r(),n(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[f.jsx(hi,{className:"w-3.5 h-3.5"})," Rename"]}),f.jsxs("button",{onClick:a=>{a.stopPropagation(),e(),n(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-1.5 text-sm text-red-600 dark:text-red-500 hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page",children:[f.jsx(Qa,{className:"w-3.5 h-3.5"})," Delete"]})]})]})},Q$=({project:r,onOpenRenameModal:e,onDeleteProject:t,onViewProjectDetail:n})=>f.jsxs("div",{onClick:()=>n(r),className:"group relative bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border p-5 rounded-md no-underline flex flex-col gap-3 transition-all duration-200 hover:-translate-y-0.5 hover:shadow-lg dark:hover:shadow-2xl cursor-pointer",children:[f.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx(K$,{onRename:()=>e(r),onDelete:()=>t(r.id)})}),f.jsx("div",{className:"w-6 h-6 rounded-md flex items-center justify-center",style:{backgroundColor:r.color},children:f.jsx(Yr,{className:"w-4 h-4 text-white"})}),f.jsx("span",{className:"font-serif flex-grow font-bold text-light-text-primary dark:text-dark-text-primary text-lg pr-4",children:r.name}),f.jsx("div",{className:"mt-auto pt-3",children:f.jsx("div",{className:"inline-block w-3 h-3 rounded-full border border-white/20",style:{backgroundColor:r.color},title:"Project color"})})]}),Z$=()=>f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border p-5 rounded-md flex flex-col gap-3 animate-pulse",children:[f.jsx("div",{className:"w-6 h-6 rounded-md bg-light-bg-sidebar dark:bg-dark-bg-page"}),f.jsx("div",{className:"h-6 w-3/4 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md"}),f.jsx("div",{className:"mt-auto pt-3",children:f.jsx("div",{className:"w-3 h-3 rounded-full bg-light-bg-sidebar dark:bg-dark-bg-page"})})]}),J$=()=>f.jsxs("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8 animate-pulse",children:[f.jsx("div",{className:"h-9 w-48 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"}),f.jsx("div",{className:"h-11 w-36 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"})]}),f.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-4",children:[...Array(6)].map((r,e)=>f.jsx(Z$,{},e))})]}),eY=({projects:r,loading:e,onNewProject:t,onUpdateProject:n,onDeleteProject:i,onViewProjectDetail:a})=>{const[s,l]=Q.useState(null),[u,d]=Q.useState("");Ir();const h=b=>{l(b),d(b.name)},g=async()=>{if(s&&u.trim())try{await n(s.id,{name:u.trim()}),l(null),d("")}catch{}};return e?f.jsx(J$,{}):f.jsxs("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h2",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"All Projects"}),f.jsxs("button",{onClick:t,className:"flex items-center justify-center gap-2 px-4 py-2 rounded-sm border-none text-base font-medium cursor-pointer bg-primary-accent text-text-on-accent hover:opacity-85 transition-opacity",children:[f.jsx(Ka,{className:"w-4 h-4"}),f.jsx("span",{children:"New Project"})]})]}),r.length>0?f.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-4",children:r.map(b=>f.jsx(Q$,{project:b,onOpenRenameModal:h,onDeleteProject:i,onViewProjectDetail:a},b.id))}):f.jsxs("div",{className:"text-center py-20 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-lg border border-light-border dark:border-dark-border",children:[f.jsx(Yr,{className:"w-12 h-12 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary",children:"No projects yet"}),f.jsx("p",{className:"text-light-text-tertiary dark:text-dark-text-tertiary mt-1",children:'Click "New Project" to get started.'})]}),s&&f.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-[1001] flex items-center justify-center p-4",onClick:()=>l(null),children:f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-md",onClick:b=>b.stopPropagation(),children:[f.jsxs("div",{className:"p-4 border-b border-light-border dark:border-dark-border flex justify-between items-center",children:[f.jsx("h3",{className:"font-serif text-lg font-bold text-light-text-primary dark:text-dark-text-primary",children:"Rename Project"}),f.jsx("button",{onClick:()=>l(null),className:"text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"p-4",children:[f.jsx("label",{htmlFor:"rename-input",className:"block font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Project Name"}),f.jsx("input",{id:"rename-input",type:"text",value:u,onChange:b=>d(b.target.value),className:"w-full p-2.5 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-sm text-light-text-primary dark:text-dark-text-primary focus:border-primary-accent focus:ring-2 focus:ring-primary-accent/20 outline-none",onKeyDown:b=>b.key==="Enter"&&g(),autoFocus:!0})]}),f.jsxs("div",{className:"p-4 border-t border-light-border dark:border-dark-border flex justify-end gap-3",children:[f.jsx("button",{onClick:()=>l(null),className:"px-4 py-2 rounded-sm bg-light-bg-sidebar dark:bg-dark-bg-component border border-light-border dark:border-dark-border text-light-text-primary dark:text-dark-text-primary hover:opacity-85",children:"Cancel"}),f.jsx("button",{onClick:g,className:"px-4 py-2 rounded-sm bg-primary-accent text-text-on-accent hover:opacity-85",children:"Save"})]})]})})]})},tY=()=>{const r=Fr(),{projects:e,loading:t,deleteProject:n,updateProject:i}=wp(),{openModal:a}=Ca(),s=u=>{r(`/projects/${u.id}`)},l=()=>{a()};return f.jsx(eY,{projects:e,loading:t,onNewProject:l,onUpdateProject:i,onDeleteProject:n,onViewProjectDetail:s})},nY=({chatItem:r,onBack:e,onResume:t})=>{const[n,i]=Tn.useState(!1),[a,s]=Tn.useState(""),l=u=>{const d=Av(u);s(h=>{const g=h.trim()?`

`:"";return h+g+d}),i(!0)};return f.jsxs("div",{className:"h-full flex flex-col relative bg-light-bg-page dark:bg-[#212121]",children:[f.jsxs("button",{onClick:()=>i(!0),className:"fixed top-1/2 right-0 -translate-y-1/2 bg-primary-accent text-text-on-accent px-3 py-6 rounded-l-lg shadow-lg hover:opacity-85 transition-all duration-200 z-50 flex flex-col items-center gap-2 text-sm font-medium",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:[f.jsx("span",{className:"text-lg",children:""}),f.jsx("span",{children:"Editor"})]}),f.jsxs("header",{className:"flex-shrink-0 flex items-center gap-4 p-4 border-b border-light-border dark:border-gray-600 bg-light-bg-component/90 dark:bg-[rgba(33,33,33,0.9)] backdrop-blur-sm sticky top-0 z-10",children:[f.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-sm font-medium text-light-text-secondary dark:text-gray-300 hover:text-light-text-primary dark:hover:text-white",children:[f.jsx(Yv,{className:"w-4 h-4"}),"Back"]}),f.jsx("div",{className:"h-6 w-px bg-light-border dark:bg-gray-600"}),f.jsxs("div",{className:"flex-grow",children:[f.jsx("h2",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-white",children:r.toolTitle}),f.jsxs("p",{className:"text-sm text-light-text-tertiary dark:text-gray-400",children:[new Date(r.timestamp).toLocaleDateString()," at ",new Date(r.timestamp).toLocaleTimeString()]})]}),f.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity font-medium",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Continue Conversation"]})]}),f.jsx("div",{className:"flex-grow overflow-y-auto",children:f.jsx("div",{className:"max-w-3xl mx-auto p-4 md:p-6 space-y-8",children:r.messages.length>0?r.messages.map(u=>f.jsx("div",{className:"mb-8 last:mb-4",children:f.jsx(cI,{message:u,onAddToEditor:l})},u.id)):f.jsx("div",{className:"text-center py-12 text-light-text-tertiary dark:text-dark-text-tertiary",children:f.jsx("p",{children:"No messages found in this conversation."})})})}),f.jsx(uI,{isOpen:n,onClose:()=>i(!1),content:a,onContentChange:s})]})},rY=()=>{const{id:r}=pA(),e=Fr(),t=Ir(),{chatHistory:n}=Dp(),{tools:i}=Pc(),a=n.find(l=>l.id===r);if(!a)return f.jsx("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:f.jsxs("div",{className:"text-center py-20",children:[f.jsx("h2",{className:"text-xl font-bold text-light-text-primary dark:text-dark-text-primary mb-4",children:"Chat Not Found"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-6",children:"The chat session you're looking for doesn't exist or has been deleted."}),f.jsx("button",{onClick:()=>e("/history"),className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85",children:"Back to History"})]})});const s=()=>{const l=i.find(u=>u.id===a.toolId);if(!l){t.error(`The tool "${a.toolTitle}" is no longer available. It may have been deactivated or removed.`,"Tool Not Available");return}e(`/tools/${l.id}`,{state:{existingChatSession:a}})};return f.jsx(nY,{chatItem:a,onBack:()=>e("/history"),onResume:s})},iY=()=>f.jsxs("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full animate-pulse",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("div",{className:"h-9 w-48 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"}),f.jsx("div",{className:"h-9 w-32 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-md"})]}),f.jsx("div",{className:"space-y-4",children:[...Array(3)].map((r,e)=>f.jsxs("div",{className:"p-5 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg",children:[f.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[f.jsx("div",{className:"w-6 h-6 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md flex-shrink-0 mt-1"}),f.jsxs("div",{className:"flex-grow min-w-0 space-y-2",children:[f.jsx("div",{className:"h-6 w-1/2 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md"}),f.jsx("div",{className:"h-4 w-full bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md"}),f.jsx("div",{className:"h-4 w-3/4 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md"})]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"h-10 w-28 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md"}),f.jsx("div",{className:"h-10 w-28 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md"})]}),f.jsx("div",{className:"h-8 w-8 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md"})]})]},e))})]}),aY=({onViewChatDetail:r,onResumeChatSession:e})=>{const{chatHistory:t,loading:n,error:i,deleteChat:a,clearHistory:s}=Dp();return n?f.jsx(iY,{}):i?f.jsx("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:f.jsx("div",{className:"flex items-center justify-center py-20",children:f.jsxs("div",{className:"text-center",children:[f.jsxs("p",{className:"text-red-600 dark:text-red-400 mb-4",children:["Error loading history: ",i]}),f.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85",children:"Retry"})]})})}):f.jsxs("div",{className:"p-4 lg:p-6 max-w-5xl mx-auto w-full",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(rv,{className:"w-6 h-6 text-primary-accent"}),f.jsx("h2",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Chat History"})]}),t.length>0&&f.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors",children:"Clear All History"})]}),t.length>0?f.jsx("div",{className:"space-y-4",children:t.map(l=>{var u;return f.jsxs("div",{className:"p-5 bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg",children:[f.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[f.jsx(Sd,{className:"w-6 h-6 text-primary-accent flex-shrink-0 mt-1"}),f.jsxs("div",{className:"flex-grow min-w-0",children:[f.jsx("h3",{className:"font-serif text-lg font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:l.toolTitle}),f.jsxs("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-2 line-clamp-2",children:['"',((u=l.messages.find(d=>d.sender==="user"))==null?void 0:u.text)||"No messages",'"']}),f.jsxs("div",{className:"flex items-center gap-4 text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:[f.jsx("span",{children:new Date(l.timestamp).toLocaleDateString()}),f.jsxs("span",{children:[l.messages.length," messages"]}),l.projectName&&f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx(Yr,{className:"w-3 h-3"}),l.projectName]})]})]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("button",{onClick:()=>e(l),className:"flex items-center gap-2 px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity font-medium",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Continue"]}),f.jsxs("button",{onClick:()=>r(l),className:"flex items-center gap-2 px-4 py-2 bg-light-bg-sidebar dark:bg-dark-bg-component border border-light-border dark:border-dark-border text-light-text-primary dark:text-dark-text-primary rounded-md hover:bg-light-bg-component dark:hover:bg-dark-bg-page transition-colors",children:[f.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Details"]})]}),f.jsx("button",{onClick:()=>a(l.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors","aria-label":"Delete chat",children:f.jsx(Qa,{className:"w-5 h-5"})})]})]},l.id)})}):f.jsxs("div",{className:"text-center py-20 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-lg border border-light-border dark:border-dark-border",children:[f.jsx(rv,{className:"w-12 h-12 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary",children:"No chat history yet"}),f.jsx("p",{className:"text-light-text-tertiary dark:text-dark-text-tertiary mt-1",children:"Start conversations with AI tools to see your history here."})]})]})},sY=()=>{const r=Fr(),e=Ir(),{tools:t}=Pc(),n=s=>{r(`/chat/${s.id}`)},i=s=>{const l=t.find(u=>u.id===s.toolId);if(!l){e.error(`The tool "${s.toolTitle}" is no longer available. It may have been deactivated or removed.`,"Tool Not Available");return}r(`/tools/${l.id}`,{state:{existingChatSession:s}})},a=()=>{};return f.jsx(aY,{onViewChatDetail:n,onClearHistory:a,onResumeChatSession:i})},oY=()=>{const r=Tp(),e=Ir(),{profile:t,saveClientProfile:n,deleteClientProfile:i,setDefaultClientProfile:a,getClientProfiles:s,getDefaultClientProfile:l}=ct(),[u,d]=Q.useState(""),[h,g]=Q.useState(!1),[b,x]=Q.useState(null),[k,v]=Q.useState(!1),[w,D]=Q.useState({name:"",audience:"",language:"English",tone:"",sample:""}),_=s(),A=l(),N=Q.useMemo(()=>{if(!u.trim())return _;const R=u.toLowerCase();return _.filter(W=>W.name.toLowerCase().includes(R)||W.audience.toLowerCase().includes(R)||W.tone.toLowerCase().includes(R)||W.language.toLowerCase().includes(R))},[_,u]),E=()=>{x(null),D({name:"",audience:"",language:"English",tone:"",sample:""}),g(!0)},C=R=>{x(R),D({name:R.name,audience:R.audience,language:R.language,tone:R.tone,sample:R.sample}),g(!0)},j=()=>{g(!1),x(null),D({name:"",audience:"",language:"English",tone:"",sample:""})},M=async()=>{if(!w.name.trim()||!w.audience.trim()||!w.language.trim()||!w.tone.trim()){e.error("Please fill in all required fields");return}v(!0);try{const R={id:(b==null?void 0:b.id)||crypto.randomUUID(),name:w.name.trim(),audience:w.audience.trim(),language:w.language.trim(),tone:w.tone.trim(),sample:w.sample.trim()};await n(R),e.success(`Client profile "${R.name}" ${b?"updated":"created"} successfully`,b?"Profile Updated":"Profile Created"),j()}catch(R){console.error("Failed to save client profile:",R),e.error("Failed to save client profile. Please try again.")}finally{v(!1)}},O=async R=>{const W=_.find(X=>X.id===R);if(!(!W||!await r.confirmDelete(W.name,"client profile")))try{await i(R),e.success(`Client profile "${W.name}" deleted successfully`,"Profile Deleted")}catch(X){console.error("Failed to delete client profile:",X),e.error("Failed to delete client profile. Please try again.")}},F=async R=>{const W=_.find(U=>U.id===R);if(W)try{await a(R),e.success(`"${W.name}" set as default client profile`,"Default Updated")}catch(U){console.error("Failed to set default client profile:",U),e.error("Failed to update default profile. Please try again.")}},G=async()=>{try{await a(null),e.success("Default client profile cleared","Default Cleared")}catch(R){console.error("Failed to clear default client profile:",R),e.error("Failed to clear default profile. Please try again.")}};return f.jsxs("div",{className:"p-4 lg:p-6 max-w-7xl mx-auto w-full relative",children:[h&&f.jsx("div",{className:"fixed inset-0 bg-black/20 dark:bg-black/40 backdrop-blur-sm z-40 transition-opacity duration-300",onClick:j}),f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-primary-accent/20 to-primary-accent/10 rounded-xl border border-primary-accent/20",children:f.jsx(Ko,{className:"w-6 h-6 text-primary-accent"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Profiles"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Manage different profiles to personalize AI responses for your projects"})]})]}),f.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-6 py-3 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity font-medium shadow-sm",children:[f.jsx(Ka,{className:"w-5 h-5"}),"Create New Profile"]})]}),f.jsx("div",{className:"mb-6",children:f.jsxs("div",{className:"relative max-w-md",children:[f.jsx(Sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-light-text-tertiary dark:text-dark-text-tertiary"}),f.jsx("input",{type:"text",value:u,onChange:R=>d(R.target.value),placeholder:"Search profiles...",className:"w-full pl-10 pr-4 py-3 text-sm border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none"})]})}),N.length>0?f.jsx("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg overflow-hidden shadow-sm",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-light-bg-sidebar dark:bg-dark-bg-sidebar",children:f.jsxs("tr",{children:[f.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Client Name"}),f.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Target Audience"}),f.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Language"}),f.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Tone"}),f.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Actions"})]})}),f.jsx("tbody",{children:N.map(R=>f.jsxs("tr",{className:"border-t border-light-border dark:border-dark-border hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page transition-colors",children:[f.jsx("td",{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 bg-primary-accent/10 rounded-lg flex items-center justify-center flex-shrink-0",children:f.jsx(Ko,{className:"w-5 h-5 text-primary-accent"})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"font-semibold text-light-text-primary dark:text-dark-text-primary",children:R.name}),(A==null?void 0:A.id)===R.id&&f.jsx(co,{className:"w-4 h-4 text-yellow-500",isFilled:!0})]})]})}),f.jsx("td",{className:"p-4",children:f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary line-clamp-2 max-w-xs",children:R.audience})}),f.jsx("td",{className:"p-4",children:f.jsx("span",{className:"px-3 py-1 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-full text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary",children:R.language})}),f.jsx("td",{className:"p-4",children:f.jsx("span",{className:"px-3 py-1 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-full text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary",children:R.tone})}),f.jsx("td",{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-2",children:[(A==null?void 0:A.id)!==R.id&&f.jsx("button",{onClick:()=>F(R.id),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-yellow-500 hover:bg-light-bg-page dark:hover:bg-dark-bg-component rounded-md transition-colors",title:"Set as default",children:f.jsx(co,{className:"w-4 h-4"})}),(A==null?void 0:A.id)===R.id&&f.jsx("button",{onClick:G,className:"p-2 text-yellow-500 hover:text-light-text-tertiary dark:hover:text-dark-text-tertiary hover:bg-light-bg-page dark:hover:bg-dark-bg-component rounded-md transition-colors",title:"Clear default",children:f.jsx(co,{className:"w-4 h-4",isFilled:!0})}),f.jsx("button",{onClick:()=>C(R),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-primary-accent hover:bg-light-bg-page dark:hover:bg-dark-bg-component rounded-md transition-colors",title:"Edit profile",children:f.jsx(hi,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>O(R.id),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-red-500 hover:bg-light-bg-page dark:hover:bg-dark-bg-component rounded-md transition-colors",title:"Delete profile",children:f.jsx(Qa,{className:"w-4 h-4"})})]})})]},R.id))})]})})}):u.trim()?f.jsxs("div",{className:"text-center py-20 bg-light-bg-component dark:bg-dark-bg-component rounded-lg border border-light-border dark:border-dark-border",children:[f.jsx(Sa,{className:"w-12 h-12 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary",children:"No profiles found"}),f.jsxs("p",{className:"text-light-text-tertiary dark:text-dark-text-tertiary mt-1",children:['No profiles match "',u,'". Try different keywords.']})]}):f.jsxs("div",{className:"text-center py-20 bg-light-bg-component dark:bg-dark-bg-component rounded-lg border border-light-border dark:border-dark-border",children:[f.jsx("div",{className:"flex items-center justify-center w-24 h-24 bg-gradient-to-br from-primary-accent/20 to-primary-accent/10 rounded-2xl border border-primary-accent/20 mx-auto mb-6",children:f.jsx(Ko,{className:"w-12 h-12 text-primary-accent"})}),f.jsx("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary mb-3",children:"No profiles yet"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary mb-6 max-w-md mx-auto leading-relaxed",children:"Create a profile to personalize AI responses for your target audience. Each profile helps AI understand unique voice and requirements."}),f.jsx("button",{onClick:E,className:"px-6 py-3 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity font-medium",children:"Create Your First Profile"})]}),f.jsxs("div",{className:`fixed top-0 right-0 h-full w-full max-w-2xl bg-light-bg-component dark:bg-dark-bg-component border-l border-light-border dark:border-dark-border shadow-2xl z-50 flex flex-col transition-transform duration-300 ease-in-out ${h?"translate-x-0":"translate-x-full"}`,children:[f.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-light-border dark:border-dark-border bg-light-bg-sidebar dark:bg-dark-bg-sidebar",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 bg-primary-accent/10 rounded-lg flex items-center justify-center",children:f.jsx(Ko,{className:"w-5 h-5 text-primary-accent"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:b?"Edit Profile":"Create New Profile"}),f.jsx("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary",children:b?"Update the profile information below":"Fill in the details to create a new client profile"})]})]}),f.jsx("button",{onClick:j,className:"p-2 rounded-md text-light-text-tertiary dark:text-dark-text-tertiary hover:bg-light-bg-component dark:hover:bg-dark-bg-component transition-colors",children:f.jsx(Ms,{className:"w-6 h-6"})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Profile Name *"}),f.jsx("input",{type:"text",value:w.name,onChange:R=>D(W=>({...W,name:R.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"e.g., Acme Corp, John Smith, Personal Brand",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Language *"}),f.jsxs("select",{value:w.language,onChange:R=>D(W=>({...W,language:R.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",required:!0,children:[f.jsx("option",{value:"",children:"Select language..."}),f.jsx("option",{value:"English",children:"English"}),f.jsx("option",{value:"Spanish",children:"Spanish"}),f.jsx("option",{value:"French",children:"French"}),f.jsx("option",{value:"German",children:"German"}),f.jsx("option",{value:"Italian",children:"Italian"}),f.jsx("option",{value:"Portuguese",children:"Portuguese"}),f.jsx("option",{value:"Dutch",children:"Dutch"}),f.jsx("option",{value:"Japanese",children:"Japanese"}),f.jsx("option",{value:"Chinese",children:"Chinese"}),f.jsx("option",{value:"Korean",children:"Korean"})]})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Target Audience *"}),f.jsx("textarea",{value:w.audience,onChange:R=>D(W=>({...W,audience:R.target.value})),rows:3,className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none resize-vertical",placeholder:"e.g., Small business owners aged 25-45 who struggle with digital marketing",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Tone & Voice *"}),f.jsx("input",{type:"text",value:w.tone,onChange:R=>D(W=>({...W,tone:R.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"e.g., Professional, Casual, Witty, Authoritative, Friendly",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Writing Sample"}),f.jsx("textarea",{value:w.sample,onChange:R=>D(W=>({...W,sample:R.target.value})),rows:5,className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none resize-vertical",placeholder:"Paste a short sample of the client's preferred writing style to help AI match their voice..."}),f.jsx("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary mt-2",children:"Optional: Provide a sample to help AI match the client's writing style and preferences"})]}),b&&(A==null?void 0:A.id)===b.id&&f.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(co,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400",isFilled:!0}),f.jsx("span",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"This is your default profile"})]}),f.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1",children:"This profile will be automatically selected for new projects and AI conversations."})]})]})}),f.jsx("div",{className:"p-6 border-t border-light-border dark:border-dark-border bg-light-bg-sidebar dark:bg-dark-bg-sidebar",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[b&&(A==null?void 0:A.id)!==b.id&&f.jsxs("button",{onClick:()=>F(b.id),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-primary-accent border border-primary-accent rounded-md hover:bg-primary-accent/10 transition-colors",children:[f.jsx(co,{className:"w-4 h-4"}),"Set as Default"]}),b&&(A==null?void 0:A.id)===b.id&&f.jsxs("button",{onClick:G,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-light-text-tertiary dark:text-dark-text-tertiary border border-light-border dark:border-dark-border rounded-md hover:bg-light-bg-page dark:hover:bg-dark-bg-component transition-colors",children:[f.jsx(co,{className:"w-4 h-4"}),"Clear Default"]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:j,disabled:k,className:"px-6 py-2 text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary disabled:opacity-50 transition-colors",children:"Cancel"}),f.jsxs("button",{onClick:M,disabled:k||!w.name.trim()||!w.audience.trim()||!w.language.trim()||!w.tone.trim(),className:"px-8 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 font-medium",children:[k&&f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-text-on-accent"}),k?"Saving...":b?"Save Changes":"Create Profile"]})]})]})})]})]})},lY=()=>f.jsx(oY,{}),cY=({onBack:r})=>{const e=Ir(),{profile:t,updateProfile:n}=ct(),[i,a]=Q.useState("profile"),[s,l]=Q.useState(!1),[u,d]=Q.useState({fullName:(t==null?void 0:t.full_name)||"",organization:(t==null?void 0:t.organization)||""}),[h,g]=Q.useState({emailUpdates:!0,toolRecommendations:!0,weeklyDigest:!1,marketingEmails:!1}),[b,x]=Q.useState({profileVisibility:"private",shareUsageData:!1,allowAnalytics:!0});ka.getInstance();const k=async()=>{l(!0);try{n({full_name:u.fullName,organization:u.organization}),e.success("Profile updated successfully!","Profile Saved")}catch{e.error("Failed to update profile. Please try again.")}finally{l(!1)}},v=async()=>{l(!0);try{n({preferences:{...t==null?void 0:t.preferences,notifications:e}}),e.success("Notification preferences saved!","Preferences Updated")}catch{e.error("Failed to save preferences. Please try again.")}finally{l(!1)}},w=async()=>{l(!0);try{n({preferences:{...t==null?void 0:t.preferences,privacy:b}}),e.success("Privacy settings updated!","Privacy Updated")}catch{e.error("Failed to update privacy settings. Please try again.")}finally{l(!1)}},D=[{id:"profile",label:"Profile",icon:f.jsx(c9,{className:"w-4 h-4"})},{id:"notifications",label:"Notifications",icon:f.jsx(vA,{className:"w-4 h-4"})},{id:"privacy",label:"Privacy",icon:f.jsx(QR,{className:"w-4 h-4"})}];return f.jsxs("div",{className:"p-4 lg:p-6 max-w-4xl mx-auto w-full",children:[f.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[f.jsxs("button",{onClick:r,className:"flex items-center gap-2 text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:[f.jsx(Yv,{className:"w-4 h-4"}),"Back"]}),f.jsx("div",{className:"h-6 w-px bg-light-border dark:border-dark-border"}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Bc,{className:"w-6 h-6 text-primary-accent"}),f.jsx("h2",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Settings"})]})]}),f.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[f.jsx("div",{className:"lg:w-64 flex-shrink-0",children:f.jsx("nav",{className:"space-y-1",children:D.map(_=>f.jsxs("button",{onClick:()=>a(_.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-md text-sm font-medium transition-colors ${i===_.id?"bg-primary-accent text-text-on-accent":"text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-component dark:hover:bg-dark-bg-component hover:text-light-text-primary dark:hover:text-dark-text-primary"}`,children:[_.icon,_.label]},_.id))})}),f.jsx("div",{className:"flex-1",children:f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg p-6",children:[i==="profile"&&f.jsx("div",{className:"space-y-6",children:f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary mb-4",children:"Profile Information"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Full Name"}),f.jsx("input",{type:"text",value:u.fullName,onChange:_=>d(A=>({...A,fullName:_.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Enter your full name"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Organization"}),f.jsx("input",{type:"text",value:u.organization,onChange:_=>d(A=>({...A,organization:_.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Enter your organization (optional)"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Email"}),f.jsx("input",{type:"email",value:(t==null?void 0:t.id)||"Not available",disabled:!0,className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-sidebar dark:bg-dark-bg-sidebar text-light-text-tertiary dark:text-dark-text-tertiary"}),f.jsx("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary mt-1",children:"Email cannot be changed. Contact support if you need to update your email."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Role"}),f.jsx("input",{type:"text",value:(t==null?void 0:t.role)==="admin"?"Administrator":"User",disabled:!0,className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-sidebar dark:bg-dark-bg-sidebar text-light-text-tertiary dark:text-dark-text-tertiary"})]})]}),f.jsx("div",{className:"flex justify-end mt-6",children:f.jsxs("button",{onClick:k,disabled:s,className:"px-6 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s&&f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-text-on-accent"}),s?"Saving...":"Save Changes"]})})]})}),i==="notifications"&&f.jsx("div",{className:"space-y-6",children:f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary mb-4",children:"Notification Preferences"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between p-4 border border-light-border dark:border-dark-border rounded-md",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:"Email Updates"}),f.jsx("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:"Receive important updates about your account and new features"})]}),f.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:h.emailUpdates,onChange:_=>g(A=>({...A,emailUpdates:_.target.checked})),className:"sr-only peer"}),f.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-accent/20 dark:peer-focus:ring-primary-accent/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-accent"})]})]}),f.jsxs("div",{className:"flex items-center justify-between p-4 border border-light-border dark:border-dark-border rounded-md",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:"Tool Recommendations"}),f.jsx("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:"Get personalized tool suggestions based on your usage"})]}),f.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:h.toolRecommendations,onChange:_=>g(A=>({...A,toolRecommendations:_.target.checked})),className:"sr-only peer"}),f.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-accent/20 dark:peer-focus:ring-primary-accent/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-accent"})]})]})]}),f.jsx("div",{className:"flex justify-end mt-6",children:f.jsxs("button",{onClick:v,disabled:s,className:"px-6 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s&&f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-text-on-accent"}),s?"Saving...":"Save Preferences"]})})]})}),i==="privacy"&&f.jsx("div",{className:"space-y-6",children:f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary mb-4",children:"Privacy & Data"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between p-4 border border-light-border dark:border-dark-border rounded-md",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:"Share Usage Data"}),f.jsx("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:"Help improve Artemo by sharing anonymous usage statistics"})]}),f.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:b.shareUsageData,onChange:_=>x(A=>({...A,shareUsageData:_.target.checked})),className:"sr-only peer"}),f.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-accent/20 dark:peer-focus:ring-primary-accent/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-accent"})]})]}),f.jsxs("div",{className:"flex items-center justify-between p-4 border border-light-border dark:border-dark-border rounded-md",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:"Analytics & Tracking"}),f.jsx("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:"Allow analytics to help us improve your experience"})]}),f.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:b.allowAnalytics,onChange:_=>x(A=>({...A,allowAnalytics:_.target.checked})),className:"sr-only peer"}),f.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-accent/20 dark:peer-focus:ring-primary-accent/20 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-accent"})]})]})]}),f.jsx("div",{className:"flex justify-end mt-6",children:f.jsxs("button",{onClick:w,disabled:s,className:"px-6 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s&&f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-text-on-accent"}),s?"Saving...":"Save Settings"]})})]})})]})})]})]})},uY=()=>{const r=Fr();return f.jsx(cY,{onBack:()=>r("/")})},Uh=8,dY=()=>{const r=Fr(),e=di(),t=Ir(),n=ct(W=>W.isAuthenticated),[i,a]=Q.useState("initializing"),[s,l]=Q.useState(null),[u,d]=Q.useState(""),[h,g]=Q.useState(""),[b,x]=Q.useState(!1),[k,v]=Q.useState(null),[w,D]=Q.useState({type:null,error:null,errorDescription:null}),[_,A]=Q.useState(!1),N=Q.useMemo(()=>!!e.hash,[e.hash]),E=w.type??(e.hash.includes("type=invite")?"invite":null),C=_||E==="invite";Q.useEffect(()=>{const W=e.hash.startsWith("#")?e.hash.slice(1):e.hash;if(!W){D({type:null,error:null,errorDescription:null});return}const U=new URLSearchParams(W),X=U.get("type");X==="invite"&&A(!0),D({type:X,error:U.get("error"),errorDescription:U.get("error_description")})},[e.key,e.hash]),Q.useEffect(()=>{if(!qe){a("error"),v("Supabase is not configured for this environment. Please connect to Supabase before using invite links.");return}let W=!0,U;(async()=>{var B;a(ee=>ee==="success"?ee:"initializing"),v(null);try{const{data:ee,error:Y}=await qe.auth.getSession();if(!W)return;if(Y){a("error"),v(Y.message??"We could not validate your invite link. Please request a new invitation.");return}(B=ee==null?void 0:ee.session)!=null&&B.user?(l(ee.session.user),a("ready"),v(null)):U=window.setTimeout(()=>{W&&(a(H=>H==="success"?H:"error"),v("We could not validate your invite session. The link may have expired. Request a new invitation to continue."))},4e3)}catch(ee){const Y=ee instanceof Error?ee.message:"We could not validate your invite link.";a("error"),v(Y)}})();const{data:P}=qe.auth.onAuthStateChange((B,ee)=>{W&&((B==="INITIAL_SESSION"||B==="SIGNED_IN")&&(ee!=null&&ee.user)&&(B==="INITIAL_SESSION"&&A(!0),U&&(clearTimeout(U),U=void 0),l(ee.user),a("ready"),v(null)),(B==="SIGNED_OUT"||!ee&&(B==="TOKEN_REFRESHED"||B==="USER_UPDATED"))&&(l(null),a(Y=>Y==="success"?Y:"error"),v("Your invite session is no longer active. Request a new link from your administrator.")))});return()=>{W=!1,P.subscription.unsubscribe(),U&&clearTimeout(U)}},[e.key,qe]),Q.useEffect(()=>{w.error&&(a("error"),v(w.errorDescription??"This invite link is no longer valid. Request a new invitation."))},[w.error,w.errorDescription]),Q.useEffect(()=>{n&&!C&&i!=="success"&&i!=="error"&&(a("error"),v("You are already signed in. Visit your account settings to update your password."))},[n,C,i]),Q.useEffect(()=>{let W;return i==="success"&&(W=window.setTimeout(()=>{r("/",{replace:!0})},2e3)),()=>{W&&clearTimeout(W)}},[i,r]);const j=async W=>{if(W.preventDefault(),!qe){v("Supabase is not configured. Unable to set your password.");return}if(!s){v("No active invite session was detected. Request a new invite link and try again."),a("error");return}if(u.length<Uh){v(`Password must be at least ${Uh} characters long.`);return}if(u!==h){v("Passwords do not match. Please confirm your new password.");return}try{a("submitting"),v(null);const{error:U}=await qe.auth.updateUser({password:u});if(U)throw U;t.success("Your password has been saved. Redirecting you to the dashboard...","Password updated"),a("success")}catch(U){const X=U instanceof Error?U.message:"We could not update your password. Please try again.";t.error(X,"Password update failed"),v(X),a("ready")}},M=i==="submitting",O=i==="ready"&&!!s&&C,F=u.length>0&&u.length<Uh,G=h.length>0&&u!==h,R=O&&!M&&!F&&!G&&u.length>=Uh;return qe?f.jsx("div",{className:"min-h-screen bg-light-bg-page dark:bg-dark-bg-page flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg shadow-lg w-full max-w-md p-8",children:[f.jsxs("div",{className:"text-center mb-6 space-y-2",children:[f.jsx("h1",{className:"font-serif text-2xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Set your password"}),s!=null&&s.email?f.jsxs("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:["Completing setup for ",f.jsx("span",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:s.email})]}):f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:C?"We are validating your invitation. Hang tight for a moment.":"Use the invitation link from your email to set your initial password."})]}),i==="initializing"&&f.jsxs("div",{className:"flex flex-col items-center space-y-4 py-6",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-accent"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary text-sm",children:"Checking your invitation details..."})]}),i==="error"&&f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:f.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:k??"We were unable to complete your invitation. The link may be invalid or expired."})}),f.jsxs("div",{className:"space-y-2 text-sm text-light-text-secondary dark:text-dark-text-secondary",children:[!N&&f.jsx("p",{children:"Open the invitation email again and ensure you click the full link provided."}),f.jsx("p",{children:"If the issue persists, ask your administrator to send you a new invitation."})]}),f.jsx("div",{className:"flex justify-center",children:f.jsx("button",{onClick:()=>r("/login"),className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",children:"Return to login"})})]}),i==="success"&&f.jsxs("div",{className:"space-y-4 text-center",children:[f.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md",children:f.jsx("p",{className:"text-sm text-green-800 dark:text-green-200",children:"Password updated successfully! Redirecting you to the dashboard..."})}),f.jsx("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary",children:"If you are not redirected automatically, use the button below to continue."}),f.jsx("button",{onClick:()=>r("/",{replace:!0}),className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",children:"Go to dashboard"})]}),(i==="ready"||i==="submitting")&&s&&f.jsxs("form",{onSubmit:j,className:"space-y-5",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:"New password"}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{id:"password",type:b?"text":"password",value:u,onChange:W=>d(W.target.value),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Create a strong password",disabled:M,minLength:Uh,autoComplete:"new-password"}),f.jsx("button",{type:"button",onClick:()=>x(W=>!W),className:"absolute inset-y-0 right-3 flex items-center text-sm text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:b?"Hide":"Show"})]}),F&&f.jsxs("p",{className:"text-xs text-red-600 dark:text-red-300",children:["Password must be at least ",Uh," characters long."]})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:"Confirm password"}),f.jsx("input",{id:"confirm-password",type:b?"text":"password",value:h,onChange:W=>g(W.target.value),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Re-enter your password",disabled:M,autoComplete:"new-password"}),G&&f.jsx("p",{className:"text-xs text-red-600 dark:text-red-300",children:"Passwords do not match."})]}),k&&f.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:f.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:k})}),f.jsx("button",{type:"submit",disabled:!R,className:"w-full py-3 px-4 bg-primary-accent text-text-on-accent rounded-md font-medium hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:M?"Saving password...":"Save password"}),f.jsx("p",{className:"text-xs text-light-text-secondary dark:text-dark-text-secondary text-center",children:"After setting your password you will be redirected to Artemo automatically."})]}),n&&!C&&i!=="success"&&f.jsxs("div",{className:"mt-6 text-center text-sm text-light-text-secondary dark:text-dark-text-secondary",children:[f.jsx("p",{children:"You are already signed in. If you meant to update your password, visit your account settings instead."}),f.jsx("button",{onClick:()=>r("/",{replace:!0}),className:"mt-3 px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",children:"Go to dashboard"})]})]})}):f.jsx("div",{className:"min-h-screen bg-light-bg-page dark:bg-dark-bg-page flex items-center justify-center p-4",children:f.jsx("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg shadow-lg w-full max-w-md p-8",children:f.jsxs("div",{className:"text-center space-y-4",children:[f.jsx("h1",{className:"text-2xl font-bold text-light-text-primary dark:text-dark-text-primary",children:"Supabase Not Configured"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Connect your Supabase project before sending invite links. Once Supabase is configured, re-open your invitation to finish setting your password."}),f.jsx("button",{onClick:()=>r("/login"),className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",children:"Return to login"})]})})})},hY=({data:r,className:e="w-full h-8",color:t="stroke-primary-accent",height:n=32})=>{if(!r||r.length===0)return null;const i=Math.max(...r),a=Math.min(...r),s=i-a||1,l=r.map((u,d)=>{const h=d/(r.length-1)*100,g=100-(u-a)/s*100;return`${h},${g}`}).join(" ");return f.jsx("svg",{className:e,viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{height:n},children:f.jsx("polyline",{fill:"none",stroke:"currentColor",strokeWidth:"3",points:l,className:t})})},Rh=({title:r,value:e,icon:t,iconColor:n,trend:i,trendColor:a="text-primary-accent",subtitle:s,onClick:l,alertLevel:u="normal"})=>{const d=u==="critical"?"border-red-500":u==="warning"?"border-yellow-500":"border-light-border dark:border-dark-border";return f.jsxs("div",{className:`bg-light-bg-component dark:bg-dark-bg-component border-2 ${d} rounded-lg p-6 transition-all duration-200 ${l?"cursor-pointer hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page hover:shadow-lg":""}`,onClick:l,children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{className:"flex-grow",children:[f.jsx("p",{className:"text-sm font-medium text-light-text-tertiary dark:text-dark-text-tertiary mb-1",children:r}),f.jsx("p",{className:"text-3xl font-bold text-light-text-primary dark:text-dark-text-primary",children:e}),s&&f.jsx("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary mt-2 leading-relaxed",children:s})]}),f.jsx(t,{className:`w-10 h-10 ${n} flex-shrink-0`})]}),i&&i.length>0&&f.jsx("div",{className:"mt-3",children:f.jsx(hY,{data:i,color:a,height:24})})]})},fY=({alerts:r})=>{if(!r||r.length===0)return null;const e=r.filter(n=>n.type==="error"),t=r.filter(n=>n.type==="warning");return f.jsxs("div",{className:"mb-6 space-y-2",children:[e.map(n=>f.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 rounded-r-lg shadow-sm",children:[f.jsx(fm,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0"}),f.jsxs("div",{className:"flex-grow",children:[f.jsx("p",{className:"font-semibold text-red-800 dark:text-red-200",children:n.message}),f.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:new Date(n.timestamp).toLocaleString()})]}),f.jsx("button",{className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200",children:f.jsx("span",{className:"text-xs font-medium",children:"INVESTIGATE"})})]},n.id)),t.map(n=>f.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-500 rounded-r-lg shadow-sm",children:[f.jsx(fm,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0"}),f.jsxs("div",{className:"flex-grow",children:[f.jsx("p",{className:"font-semibold text-yellow-800 dark:text-yellow-200",children:n.message}),f.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:new Date(n.timestamp).toLocaleString()})]}),f.jsx("button",{className:"text-yellow-600 dark:text-yellow-400 hover:text-yellow-800 dark:hover:text-yellow-200",children:f.jsx("span",{className:"text-xs font-medium",children:"REVIEW"})})]},n.id))]})},pY=({title:r,icon:e,children:t,defaultExpanded:n=!1,onToggle:i})=>{const[a,s]=Q.useState(n),l=()=>{const u=!a;s(u),i&&i(u)};return f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg overflow-hidden shadow-sm",children:[f.jsxs("button",{onClick:l,className:"w-full p-4 flex items-center justify-between hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[e,f.jsx("h3",{className:"font-serif text-lg font-bold text-light-text-primary dark:text-dark-text-primary",children:r})]}),f.jsx(sx,{className:`w-5 h-5 text-light-text-tertiary dark:text-dark-text-tertiary transition-transform duration-200 ${a?"rotate-180":""}`})]}),a&&f.jsx("div",{className:"border-t border-light-border dark:border-dark-border",children:t})]})},gY=()=>{var U;const[r,e]=Q.useState("24h"),[t,n]=Q.useState(new Date),[i,a]=Q.useState(!0),[s,l]=Q.useState(null),[u,d]=Q.useState(!0),[h,g]=Q.useState({aiGenerations24h:0,dailyActiveUsers:0,newSignups24h:0,aiSuccessRate:0,totalUsers:0,activeTools:0,totalCategories:0}),[b,x]=Q.useState({hourlyPattern:[],totalTokensUsed:0,costEstimate:0,fallbackRate:0}),[k,v]=Q.useState({dauTrend:[],retention7day:0,signupSources:[]}),[w,D]=Q.useState({aiSuccessRateTrend:[],criticalAlerts:[],modelFailures:[]}),[_,A]=Q.useState({toolActions:[],adminLogins:[],systemChanges:[]}),[N,E]=Q.useState(new Set),C=Kn.getInstance(),j=async()=>{try{const X=await C.getDashboardAnalytics(r);X.success&&X.data&&g({aiGenerations24h:X.data.ai_generations_24h||0,dailyActiveUsers:X.data.daily_active_users||0,newSignups24h:X.data.new_signups_24h||0,aiSuccessRate:X.data.ai_success_rate||100,totalUsers:X.data.total_users||0,activeTools:X.data.active_tools||0,totalCategories:X.data.total_categories||0})}catch(X){console.error("Failed to fetch dashboard metrics:",X)}},M=async()=>{if(!N.has("ai-usage"))try{const X=await C.getAIUsageMetrics(r);X.success&&X.data&&(x({hourlyPattern:X.data.hourly_pattern||[],totalTokensUsed:X.data.total_tokens_used||0,costEstimate:X.data.cost_estimate||0,fallbackRate:X.data.fallback_rate||0}),E(P=>new Set([...P,"ai-usage"])))}catch(X){console.error("Failed to fetch AI usage metrics:",X)}},O=async()=>{if(!N.has("user-engagement"))try{const X=await C.getUserEngagementMetrics(r);X.success&&X.data&&(v({dauTrend:X.data.dau_trend||[],retention7day:X.data.retention_7day||0,signupSources:X.data.signup_sources||[]}),E(P=>new Set([...P,"user-engagement"])))}catch(X){console.error("Failed to fetch user engagement metrics:",X)}},F=async()=>{if(!N.has("system-health"))try{const X=await C.getSystemHealthMetrics();X.success&&X.data&&(D({aiSuccessRateTrend:X.data.ai_success_rate_trend||[],criticalAlerts:X.data.critical_alerts||[],modelFailures:X.data.model_failures||[]}),E(P=>new Set([...P,"system-health"])))}catch(X){console.error("Failed to fetch system health metrics:",X)}},G=async()=>{if(!N.has("admin-activity"))try{const X=await C.getAdminActivityLog(20);X.success&&X.data&&(A({toolActions:X.data.tool_actions||[],adminLogins:X.data.admin_logins||[],systemChanges:X.data.system_changes||[]}),E(P=>new Set([...P,"admin-activity"])))}catch(X){console.error("Failed to fetch admin activity log:",X)}};Q.useEffect(()=>{(async()=>{a(!0),l(null);try{await j(),await F(),n(new Date)}catch(P){l("Failed to load dashboard data"),console.error("Dashboard loading error:",P)}finally{a(!1)}})()},[r]),Q.useEffect(()=>{if(!u)return;const X=setInterval(async()=>{await j(),N.has("system-health")&&await F(),n(new Date)},6e4);return()=>clearInterval(X)},[u,N,r]);const R=async()=>{a(!0);try{await j(),N.has("ai-usage")&&(E(X=>{const P=new Set(X);return P.delete("ai-usage"),P}),await M()),N.has("user-engagement")&&(E(X=>{const P=new Set(X);return P.delete("user-engagement"),P}),await O()),N.has("system-health")&&(E(X=>{const P=new Set(X);return P.delete("system-health"),P}),await F()),N.has("admin-activity")&&(E(X=>{const P=new Set(X);return P.delete("admin-activity"),P}),await G()),n(new Date)}catch{l("Failed to refresh dashboard data")}finally{a(!1)}},W=(X,P)=>{if(P)switch(X){case"ai-usage":M();break;case"user-engagement":O();break;case"system-health":F();break;case"admin-activity":G();break}};return i&&!h.aiGenerations24h?f.jsx("div",{className:"p-6 flex items-center justify-center min-h-[400px]",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-accent mx-auto mb-4"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading strategic dashboard..."})]})}):f.jsxs("div",{className:"p-6 space-y-6 max-w-7xl mx-auto",children:[f.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-8",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:"Strategic Command Center"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Real-time insights for data-driven business decisions"})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[f.jsx("input",{type:"checkbox",checked:u,onChange:X=>d(X.target.checked),className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),f.jsx("span",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Auto-refresh"})]}),f.jsxs("select",{value:r,onChange:X=>e(X.target.value),className:"px-3 py-2 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none text-sm",children:[f.jsx("option",{value:"1h",children:"Last Hour"}),f.jsx("option",{value:"24h",children:"Last 24 Hours"}),f.jsx("option",{value:"7d",children:"Last 7 Days"}),f.jsx("option",{value:"30d",children:"Last 30 Days"})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("button",{onClick:R,disabled:i,className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm font-medium",children:[i?f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-text-on-accent"}):f.jsx(Ed,{className:"w-4 h-4"}),i?"Refreshing...":"Refresh"]}),f.jsxs("div",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:["Updated: ",t.toLocaleTimeString()]})]})]})]}),s&&f.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[f.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200",children:["Error: ",s]}),f.jsx("button",{onClick:R,className:"mt-2 text-sm text-red-600 dark:text-red-400 hover:underline",children:"Retry"})]}),f.jsx(fY,{alerts:w.criticalAlerts}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("h2",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary flex items-center gap-2",children:[f.jsx(WN,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"AI Operations Overview"]}),f.jsx(Rh,{title:"AI Generations (24h)",value:h.aiGenerations24h.toLocaleString(),icon:WN,iconColor:"text-blue-600 dark:text-blue-400",trend:b.hourlyPattern,trendColor:"text-blue-500",subtitle:`${b.totalTokensUsed.toLocaleString()} total interactions`,onClick:()=>W("ai-usage",!0)})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("h2",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary flex items-center gap-2",children:[f.jsx(Fs,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),"User Growth & Engagement Analytics"]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsx(Rh,{title:"Daily Active Users",value:h.dailyActiveUsers,icon:Fs,iconColor:"text-green-600 dark:text-green-400",trend:k.dauTrend,trendColor:"text-green-500",subtitle:"Click for engagement breakdown",onClick:()=>W("user-engagement",!0)}),f.jsx(Rh,{title:"New Signups (24h)",value:h.newSignups24h,icon:Fs,iconColor:"text-purple-600 dark:text-purple-400",subtitle:k.signupSources.length>0?k.signupSources.map(X=>`${X.source}: ${X.count}`).join("  "):"No recent signups"}),f.jsx(Rh,{title:"7-Day Retention",value:`${k.retention7day}%`,icon:Ed,iconColor:"text-orange-600 dark:text-orange-400",alertLevel:k.retention7day<50?"critical":k.retention7day<70?"warning":"normal",subtitle:"User retention rate"})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("h2",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary flex items-center gap-2",children:[f.jsx(iv,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),"AI Performance & Service Health"]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsx(Rh,{title:"AI Success Rate",value:`${h.aiSuccessRate}%`,icon:iv,iconColor:h.aiSuccessRate>=95?"text-green-600 dark:text-green-400":h.aiSuccessRate>=90?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",trend:w.aiSuccessRateTrend,trendColor:h.aiSuccessRate>=95?"text-green-500":h.aiSuccessRate>=90?"text-yellow-500":"text-red-500",subtitle:"24-hour performance trend",alertLevel:h.aiSuccessRate<90?"critical":h.aiSuccessRate<95?"warning":"normal"}),f.jsx(Rh,{title:"Model Fallback Rate",value:`${b.fallbackRate.toFixed(1)}%`,icon:fm,iconColor:b.fallbackRate<=5?"text-green-600 dark:text-green-400":b.fallbackRate<=10?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",subtitle:b.fallbackRate>10?" Above threshold":"Within normal range",alertLevel:b.fallbackRate>10?"critical":b.fallbackRate>5?"warning":"normal"})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("h2",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary flex items-center gap-2",children:[f.jsx(_r,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),"Platform Inventory Overview"]}),f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg p-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-4xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:h.totalUsers.toLocaleString()}),f.jsx("p",{className:"text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary",children:"Total Users"}),f.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["+",h.newSignups24h," today"]})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-4xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:h.activeTools}),f.jsx("p",{className:"text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary",children:"Active AI Tools"}),f.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Operational"})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-4xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:h.totalCategories}),f.jsx("p",{className:"text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary",children:"Tool Categories"}),f.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:"Organized"})]})]}),f.jsxs("div",{className:"mt-6 text-center",children:[f.jsx("p",{className:"text-4xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:((U=h.total_interactions)==null?void 0:U.toLocaleString())||"0"}),f.jsx("p",{className:"text-sm font-medium text-light-text-secondary dark:text-dark-text-secondary",children:"Total AI Interactions"})]})]})]}),f.jsx(pY,{title:"Administrative Activity Monitor",icon:f.jsx(Ed,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),defaultExpanded:!1,onToggle:X=>W("admin-activity",X),children:f.jsx("div",{className:"p-4",children:f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[f.jsxs("div",{children:[f.jsxs("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary mb-3 flex items-center gap-2",children:[f.jsx(_r,{className:"w-4 h-4 text-blue-600"}),"Recent Tool Actions"]}),f.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:_.toolActions.length>0?_.toolActions.map((X,P)=>f.jsxs("div",{className:"p-3 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md border-l-2 border-blue-500",children:[f.jsx("p",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:X.action}),f.jsx("p",{className:"text-xs text-light-text-secondary dark:text-dark-text-secondary",children:X.toolName}),f.jsxs("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:["by ",X.adminName,"  ",X.timestamp]})]},P)):f.jsx("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary italic",children:"No recent tool actions"})})]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary mb-3 flex items-center gap-2",children:[f.jsx(Fs,{className:"w-4 h-4 text-green-600"}),"Admin Login History"]}),f.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:_.adminLogins.length>0?_.adminLogins.map((X,P)=>f.jsxs("div",{className:"p-3 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md border-l-2 border-green-500",children:[f.jsx("p",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:X.adminName}),f.jsx("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:X.timestamp}),X.ipAddress&&f.jsxs("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:["IP: ",X.ipAddress]})]},P)):f.jsx("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary italic",children:"No recent admin logins"})})]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary mb-3 flex items-center gap-2",children:[f.jsx(Bc,{className:"w-4 h-4 text-purple-600"}),"System Changes"]}),f.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:_.systemChanges.length>0?_.systemChanges.map((X,P)=>f.jsxs("div",{className:"p-3 bg-light-bg-sidebar dark:bg-dark-bg-page rounded-md border-l-2 border-purple-500",children:[f.jsx("p",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:X.change}),f.jsx("p",{className:"text-xs text-light-text-secondary dark:text-dark-text-secondary",children:X.details}),f.jsx("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:X.timestamp})]},P)):f.jsx("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary italic",children:"No recent system changes"})})]})]})})})]})},mY=()=>f.jsx(gY,{}),bY=({value:r,onChange:e,placeholder:t="Enter markdown content...",rows:n=6,className:i="",disabled:a=!1})=>{const[s,l]=Q.useState("write"),u=d=>{l(d)};return f.jsxs("div",{className:`border border-light-border dark:border-dark-border rounded-md overflow-hidden ${i}`,children:[f.jsxs("div",{className:"flex items-center justify-between bg-light-bg-sidebar dark:bg-dark-bg-sidebar border-b border-light-border dark:border-dark-border px-3 py-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("button",{type:"button",onClick:()=>u("write"),className:`flex items-center gap-2 px-3 py-1 text-sm font-medium rounded-sm transition-colors ${s==="write"?"bg-primary-accent text-text-on-accent":"text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-component dark:hover:bg-dark-bg-component"}`,children:[f.jsx(hi,{className:"w-4 h-4"}),"Write"]}),f.jsxs("button",{type:"button",onClick:()=>u("preview"),className:`flex items-center gap-2 px-3 py-1 text-sm font-medium rounded-sm transition-colors ${s==="preview"?"bg-primary-accent text-text-on-accent":"text-light-text-secondary dark:text-dark-text-secondary hover:bg-light-bg-component dark:hover:bg-dark-bg-component"}`,children:[f.jsx(QR,{className:"w-4 h-4"}),"Preview"]})]}),f.jsx("div",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:"Markdown supported"})]}),f.jsx("div",{className:"relative",children:s==="write"?f.jsx("textarea",{value:r,onChange:d=>e(d.target.value),placeholder:t,rows:n,disabled:a,className:"w-full p-4 bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none resize-vertical border-none font-mono text-sm leading-relaxed",style:{minHeight:`${n*1.5}rem`}}):f.jsx("div",{className:"p-4 bg-light-bg-component dark:bg-dark-bg-component min-h-[200px] overflow-y-auto",children:r.trim()?f.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none prose-headings:text-light-text-primary dark:prose-headings:text-dark-text-primary prose-p:text-light-text-secondary dark:prose-p:text-dark-text-secondary prose-strong:text-light-text-primary dark:prose-strong:text-dark-text-primary prose-code:text-primary-accent prose-code:bg-light-bg-sidebar dark:prose-code:bg-dark-bg-sidebar prose-pre:bg-light-bg-sidebar dark:prose-pre:bg-dark-bg-sidebar prose-blockquote:border-primary-accent prose-blockquote:text-light-text-secondary dark:prose-blockquote:text-dark-text-secondary",children:f.jsx(L6,{remarkPlugins:[lI],children:r})}):f.jsx("div",{className:"text-light-text-tertiary dark:text-dark-text-tertiary italic",children:"No content to preview. Switch to Write mode to add content."})})}),s==="write"&&f.jsx("div",{className:"bg-light-bg-sidebar dark:bg-dark-bg-sidebar border-t border-light-border dark:border-dark-border px-3 py-2",children:f.jsxs("div",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:[f.jsx("span",{className:"font-medium",children:"Markdown tips:"})," Use **bold**, *italic*, `code`, # headers, - lists, > quotes"]})})]})},xY=({description:r,maxLength:e=100})=>{const[t,n]=Q.useState(!1);return r.length<=e?f.jsx("span",{children:r}):f.jsxs("div",{children:[f.jsx("span",{children:t?r:`${r.substring(0,e)}...`}),f.jsx("button",{onClick:i=>{i.stopPropagation(),n(!t)},className:"ml-2 text-xs text-primary-accent hover:underline",children:t?"Show less":"Show more"})]})},yY=()=>{const r=Tp(),e=Ir(),{allTools:t,createTool:n,updateTool:i,deleteTool:a,loading:s}=Pc(),{allCategories:l}=kp(),[u,d]=Q.useState(!1),[h,g]=Q.useState(null),[b,x]=Q.useState(1),[k,v]=Q.useState(!1),[w,D]=Q.useState(!1),[_,A]=Q.useState(null),[N,E]=Q.useState(null),[C,j]=Q.useState(!1),[M,O]=Q.useState(""),[F,G]=Q.useState("title"),[R,W]=Q.useState("asc"),[U,X]=Q.useState({title:"",description:"",category:"",active:!0,featured:!1,is_pro:!1,primaryModel:"Claude",fallbackModels:[],promptInstructions:"",questions:[]}),P=["Claude","OpenAI","Grok","Gemini"],B=()=>{var fe;g(null),X({title:"",description:"",category:((fe=l[0])==null?void 0:fe.name)||"",active:!0,featured:!1,is_pro:!1,primaryModel:"Claude",fallbackModels:["OpenAI"],promptInstructions:"",questions:[]}),x(1),d(!0)},ee=fe=>{g(fe),X({title:fe.title,description:fe.description,category:fe.category,active:fe.active,featured:fe.featured,is_pro:fe.is_pro||!1,primaryModel:fe.primaryModel,fallbackModels:fe.fallbackModels,promptInstructions:fe.promptInstructions,questions:fe.questions}),x(1),d(!0)},Y=()=>{const fe={id:Date.now().toString(),label:"",type:"input",required:!0,order:U.questions.length+1};X(Ue=>({...Ue,questions:[...Ue.questions,fe]}))},H=(fe,Ue)=>{X(be=>({...be,questions:be.questions.map(Fe=>Fe.id===fe?{...Fe,...Ue}:Fe)}))},J=fe=>{X(Ue=>({...Ue,questions:Ue.questions.filter(be=>be.id!==fe).map((be,Fe)=>({...be,order:Fe+1}))}))},ie=fe=>fe.replace(/[\u200B-\u200D\uFEFF]/g,"").replace(/[\u2000-\u206F]/g," ").replace(/[\u2070-\u209F]/g,"").replace(/[\u20A0-\u20CF]/g,"").replace(/[\u2100-\u214F]/g,"").replace(/[\u2190-\u21FF]/g,"").replace(/[\u2200-\u22FF]/g,"").replace(/[\u2300-\u23FF]/g,"").replace(/[\u2400-\u243F]/g,"").replace(/[\u2440-\u245F]/g,"").replace(/[\u2460-\u24FF]/g,"").replace(/[\u25A0-\u25FF]/g,"").replace(/[\u2600-\u26FF]/g,"").replace(/[\u2700-\u27BF]/g,"").replace(/[\uE000-\uF8FF]/g,"").replace(/[\uFB00-\uFB4F]/g,"").replace(/[\uFE00-\uFE0F]/g,"").replace(/[\uFE20-\uFE2F]/g,"").replace(/[\uFE30-\uFE4F]/g,"").replace(/[\uFE50-\uFE6F]/g,"").replace(/[\uFF00-\uFFEF]/g,"").replace(/\s+/g," ").trim(),z=async fe=>{if(!fe)return null;j(!0);try{const{user:Ue}=ct.getState();if(!Ue)throw new Error("User not authenticated");const Fe=await Uc.getInstance().uploadKnowledgeBaseFile(fe,Ue.id);if(Fe.success&&Fe.data)return console.log("Knowledge base file uploaded successfully:",Fe.data.fileId),console.log(" Extracted text content:",Fe.data.processedContent),Fe.data.fileId;throw new Error(Fe.error||"Failed to upload file")}catch(Ue){return console.error("Failed to upload knowledge base file:",Ue),A("Failed to upload knowledge base file. Please try again."),null}finally{j(!1)}},ge=async()=>{const fe=ie(U.title);if(!fe){A("Tool title is required");return}const Ue=ie(U.description);if(!Ue){A("Tool description is required");return}const be=ie(U.promptInstructions);if(!be){A("Prompt instructions are required");return}if(!U.category){A("Please select a category");return}D(!0),A(null);try{let Fe=null;if(N&&(Fe=await z(N),!Fe))return;console.log("AdminTools: Attempting to save tool with data sizes:",{titleLength:fe.length,descriptionLength:Ue.length,promptLength:be.length,questionCount:U.questions.length,hasKnowledgeBase:!!Fe});const $e=U.questions.map(re=>{var ne;return{...re,label:ie(re.label),placeholder:re.placeholder?ie(re.placeholder):re.placeholder,options:(ne=re.options)==null?void 0:ne.map(ue=>ie(ue))}}),I={title:fe,description:Ue,category:U.category,active:U.active,featured:U.featured,is_pro:U.is_pro,primaryModel:U.primaryModel,fallbackModels:U.fallbackModels,promptInstructions:U.promptInstructions,questions:$e,knowledgeBaseFileId:Fe},he=h?i(h.id,I):n(I),oe=new Promise((re,ne)=>setTimeout(()=>ne(new Error("Save operation timed out after 120 seconds")),12e4));await Promise.race([he,oe]),console.log("AdminTools: Tool saved successfully"),d(!1),E(null),e.success(`Tool "${fe}" ${h?"updated":"created"} successfully`,h?"Tool Updated":"Tool Created")}catch(Fe){console.error("Failed to save tool:",Fe),Fe instanceof Error?Fe.message.includes("timeout")?A("Save operation timed out. This may be due to large content size. Please try with shorter content or contact support."):Fe.message.includes("network")||Fe.message.includes("fetch")?A("Network error. Please check your connection and try again."):A(Fe.message):A("Failed to save tool. Please try again.")}finally{D(!1)}},ve=async fe=>{const Ue=t.find(Fe=>Fe.id===fe);if(!(!Ue||!await r.confirmDelete(Ue.title,"tool")))try{await a(fe),e.success(`Tool "${Ue.title}" deleted successfully`,"Tool Deleted")}catch(Fe){console.error("Failed to delete tool:",Fe),e.error("Failed to delete tool. Please try again.")}},je=fe=>{F===fe?W(R==="asc"?"desc":"asc"):(G(fe),W("asc"))},Ie=({field:fe})=>f.jsx("svg",{className:`w-3 h-3 inline ml-1 transition-colors ${F===fe?"text-red-500":"text-light-text-tertiary dark:text-dark-text-tertiary"}`,fill:"currentColor",viewBox:"0 0 16 16",style:{transform:F===fe&&R==="desc"?"rotate(180deg)":"none"},children:f.jsx("path",{d:"M8 3l4 5H4z"})}),Pe=t.filter(fe=>{if(!M.trim())return!0;const Ue=M.toLowerCase();return fe.title.toLowerCase().includes(Ue)||fe.description.toLowerCase().includes(Ue)||fe.category.toLowerCase().includes(Ue)||fe.primaryModel.toLowerCase().includes(Ue)}).sort((fe,Ue)=>{let be=0;return F==="title"?be=fe.title.localeCompare(Ue.title):F==="category"?be=fe.category.localeCompare(Ue.category):F==="primaryModel"?be=fe.primaryModel.localeCompare(Ue.primaryModel):F==="active"&&(be=fe.active===Ue.active?0:fe.active?-1:1),R==="asc"?be:-be});return s?f.jsx("div",{className:"p-6 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-accent mx-auto mb-4"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading tools..."})]})}):f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:"Tools"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Manage AI tools and their configurations"})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"relative",children:[f.jsx(Sa,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-light-text-tertiary dark:text-dark-text-tertiary"}),f.jsx("input",{type:"text",value:M,onChange:fe=>O(fe.target.value),placeholder:"Search tools...",className:"pl-10 pr-4 py-2 w-64 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary placeholder-light-text-tertiary dark:placeholder-dark-text-tertiary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none"})]}),f.jsxs("button",{onClick:B,disabled:l.length===0,className:"flex items-center gap-2 px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",title:l.length===0?"Create categories first":"Add new tool",children:[f.jsx(Ka,{className:"w-4 h-4"}),"Add Tool"]})]})]}),l.length===0?f.jsxs("div",{className:"text-center py-20 bg-light-bg-sidebar dark:bg-dark-bg-component rounded-lg border border-light-border dark:border-dark-border",children:[f.jsx(_r,{className:"w-12 h-12 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-semibold text-light-text-primary dark:text-dark-text-primary",children:"No categories available"}),f.jsx("p",{className:"text-light-text-tertiary dark:text-dark-text-tertiary mt-1",children:"Create categories first before adding tools."})]}):f.jsx("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-light-bg-sidebar dark:bg-dark-bg-sidebar",children:f.jsxs("tr",{children:[f.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>je("title"),children:["Tool",f.jsx(Ie,{field:"title"})]}),f.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>je("category"),children:["Category",f.jsx(Ie,{field:"category"})]}),f.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>je("primaryModel"),children:["Model",f.jsx(Ie,{field:"primaryModel"})]}),f.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>je("active"),children:["Status",f.jsx(Ie,{field:"active"})]}),f.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Actions"})]})}),f.jsx("tbody",{children:Pe.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:5,className:"p-8 text-center text-light-text-tertiary dark:text-dark-text-tertiary",children:M.trim()?f.jsxs(f.Fragment,{children:["No tools found matching ",f.jsxs("span",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:['"',M,'"']})]}):'No tools created yet. Click "Add Tool" to create your first tool.'})}):Pe.map(fe=>f.jsxs("tr",{className:"border-t border-light-border dark:border-dark-border",children:[f.jsx("td",{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(_r,{className:"w-5 h-5 text-primary-accent"}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:fe.title}),fe.featured&&f.jsx(co,{className:"w-4 h-4 text-yellow-500",isFilled:!0}),fe.is_pro&&f.jsx("span",{className:"text-xs font-bold text-accent-dark-blue dark:text-accent-light-blue bg-accent-light-blue/50 dark:bg-accent-dark-blue/20 py-0.5 px-2 rounded-full",children:"PRO"})]}),f.jsx("div",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:f.jsx(xY,{description:fe.description,maxLength:80})})]})]})}),f.jsx("td",{className:"p-4",children:f.jsx("span",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:fe.category})}),f.jsx("td",{className:"p-4",children:f.jsxs("div",{children:[f.jsx("span",{className:"text-light-text-primary dark:text-dark-text-primary font-medium",children:fe.primaryModel}),fe.fallbackModels.length>0&&f.jsxs("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:["Fallback: ",fe.fallbackModels.join(", ")]})]})}),f.jsx("td",{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${fe.active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:fe.active?"Active":"Inactive"}),!fe.active&&f.jsx("button",{onClick:()=>i(fe.id,{active:!0}),className:"px-2 py-1 text-xs rounded-md bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors",title:"Reactivate tool",children:"Reactivate"})]})}),f.jsx("td",{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>ee(fe),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-primary-accent hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md",children:f.jsx(hi,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>ve(fe.id),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-red-500 hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md",children:f.jsx(Qa,{className:"w-4 h-4"})})]})})]},fe.id))})]})})}),u&&f.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:`bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg transition-all duration-300 ${k?"w-[98vw] h-[98vh] max-w-none max-h-none":"w-full max-w-2xl max-h-[90vh]"} flex flex-col overflow-hidden`,children:[f.jsx("div",{className:"p-6 border-b border-light-border dark:border-dark-border",children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:[h?"Edit Tool":"Create Tool"," - Step ",b," of 3"]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>v(!k),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md transition-colors",title:k?"Minimize":"Maximize",children:k?f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 9V4.5M9 9H4.5M9 9L3.5 3.5M15 15v4.5M15 15h4.5M15 15l5.5 5.5"})}):f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})}),f.jsx("button",{onClick:()=>{d(!1),v(!1)},className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-light-text-primary dark:hover:text-dark-text-primary hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md transition-colors",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}),f.jsxs("div",{className:`p-6 flex-1 overflow-y-auto ${k?"min-h-0 flex-grow":""}`,children:[_&&f.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:f.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:_})}),b===1&&f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Title"}),f.jsx("input",{type:"text",value:U.title,onChange:fe=>X(Ue=>({...Ue,title:ie(fe.target.value)})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Tool name"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Description"}),f.jsx("textarea",{value:U.description,onChange:fe=>X(Ue=>({...Ue,description:ie(fe.target.value)})),rows:3,className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Describe what this tool does"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Category"}),l.length===0?f.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md",children:f.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"No categories available. Create categories first."})}):f.jsx("select",{value:U.category,onChange:fe=>X(Ue=>({...Ue,category:fe.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",children:l.map(fe=>f.jsx("option",{value:fe.name,children:fe.name},fe.id))})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",checked:U.active,onChange:fe=>X(Ue=>({...Ue,active:fe.target.checked})),className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),f.jsx("span",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:"Active"})]}),f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",checked:U.featured,onChange:fe=>X(Ue=>({...Ue,featured:fe.target.checked})),className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),f.jsx("span",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:"Featured"})]}),f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",checked:U.is_pro,onChange:fe=>X(Ue=>({...Ue,is_pro:fe.target.checked})),className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),f.jsx("span",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:"Pro Tool"})]})]}),f.jsx("div",{className:"pt-4 border-t border-light-border dark:border-dark-border",children:f.jsxs("button",{type:"button",onClick:()=>{X(fe=>({...fe,title:ie(fe.title),description:ie(fe.description)}))},className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors text-sm",title:"Remove formatting from title and description",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Clean Text Fields"]})})]}),b===2&&f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Primary Model"}),f.jsx("select",{value:U.primaryModel,onChange:fe=>X(Ue=>({...Ue,primaryModel:fe.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",children:P.map(fe=>f.jsx("option",{value:fe,children:fe},fe))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Fallback Models"}),f.jsx("div",{className:"space-y-2",children:P.filter(fe=>fe!==U.primaryModel).map(fe=>f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",checked:U.fallbackModels.includes(fe),onChange:Ue=>{Ue.target.checked?X(be=>({...be,fallbackModels:[...be.fallbackModels,fe]})):X(be=>({...be,fallbackModels:be.fallbackModels.filter(Fe=>Fe!==fe)}))},className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),f.jsx("span",{className:"text-sm text-light-text-primary dark:text-dark-text-primary",children:fe})]},fe))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Prompt Instructions"}),f.jsx("div",{className:"border border-light-border dark:border-dark-border rounded-md",children:f.jsx(bY,{value:U.promptInstructions,onChange:fe=>X(Ue=>({...Ue,promptInstructions:fe})),rows:k?25:8,placeholder:"You are an expert copywriter..."})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Knowledge Base File (Optional)"}),f.jsx("div",{className:"border-2 border-dashed border-light-border dark:border-dark-border rounded-md p-4",children:N?f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("svg",{className:"w-6 h-6 text-primary-accent",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:N.name}),f.jsxs("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:[(N.size/1024/1024).toFixed(2)," MB"]})]})]}),f.jsx("button",{type:"button",onClick:()=>E(null),className:"text-red-500 hover:text-red-700",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):f.jsxs("div",{className:"text-center",children:[f.jsx("svg",{className:"w-8 h-8 text-light-text-tertiary dark:text-dark-text-tertiary mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),f.jsx("p",{className:"text-sm text-light-text-secondary dark:text-dark-text-secondary mb-2",children:"Upload a knowledge base file to provide context for this tool"}),f.jsx("input",{type:"file",accept:".pdf,.docx,.doc,.txt,.md",onChange:fe=>{fe.target.files&&fe.target.files[0]&&E(fe.target.files[0])},className:"hidden",id:"knowledge-base-upload"}),f.jsx("label",{htmlFor:"knowledge-base-upload",className:"inline-flex items-center px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity cursor-pointer",children:"Choose File"}),f.jsx("p",{className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary mt-2",children:"Supports PDF, DOCX, TXT, and MD files (max 10MB)"})]})})]}),f.jsx("div",{className:"pt-4 border-t border-light-border dark:border-dark-border",children:f.jsxs("button",{type:"button",onClick:()=>{X(fe=>({...fe,title:ie(fe.title),description:ie(fe.description)}))},className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors text-sm",title:"Remove formatting from title and description (preserves markdown in prompt instructions)",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Clean Text Fields"]})})]}),b===3&&f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("h4",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:"Questions"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("button",{type:"button",onClick:()=>{X(fe=>({...fe,questions:fe.questions.map(Ue=>{var be;return{...Ue,label:ie(Ue.label),placeholder:Ue.placeholder?ie(Ue.placeholder):Ue.placeholder,options:(be=Ue.options)==null?void 0:be.map(Fe=>ie(Fe))}})}))},className:"flex items-center gap-2 px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors text-sm",title:"Remove formatting from question text fields",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Clean Questions"]}),f.jsxs("button",{onClick:Y,className:"flex items-center gap-2 px-3 py-1 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity text-sm",children:[f.jsx(Ka,{className:"w-4 h-4"}),"Add Question"]})]})]}),f.jsx("div",{className:`space-y-3 ${k?"max-h-[calc(98vh-300px)]":"max-h-96"} overflow-y-auto`,children:U.questions.length===0?f.jsx("div",{className:"text-center py-8 text-light-text-tertiary dark:text-dark-text-tertiary",children:f.jsx("p",{children:'No questions added yet. Click "Add Question" to create the conversation flow.'})}):U.questions.map((fe,Ue)=>{var be;return f.jsxs("div",{className:"border border-light-border dark:border-dark-border rounded-md p-4",children:[f.jsxs("div",{className:"flex justify-between items-start mb-3",children:[f.jsxs("span",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:["Question ",Ue+1]}),f.jsx("button",{onClick:()=>J(fe.id),className:"text-red-500 hover:text-red-700",children:f.jsx(Qa,{className:"w-4 h-4"})})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("textarea",{value:fe.label,onChange:Fe=>H(fe.id,{label:ie(Fe.target.value)}),placeholder:"Question text",className:"w-full p-2 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none text-sm resize-none overflow-hidden min-h-[40px]",rows:1,style:{height:"auto"},onInput:Fe=>{const $e=Fe.target;$e.style.height="auto",$e.style.height=$e.scrollHeight+"px"}}),f.jsxs("div",{className:"flex gap-4",children:[f.jsxs("select",{value:fe.type,onChange:Fe=>H(fe.id,{type:Fe.target.value}),className:"p-2 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none text-sm",children:[f.jsx("option",{value:"input",children:"Input"}),f.jsx("option",{value:"textarea",children:"Textarea"}),f.jsx("option",{value:"select",children:"Select"})]}),f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",checked:fe.required,onChange:Fe=>H(fe.id,{required:Fe.target.checked}),className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),f.jsx("span",{className:"text-sm text-light-text-primary dark:text-dark-text-primary",children:"Required"})]})]}),fe.type==="select"&&f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-medium text-light-text-primary dark:text-dark-text-primary mb-1",children:"Options (one per line)"}),f.jsx("textarea",{value:((be=fe.options)==null?void 0:be.join(`
`))||"",onChange:Fe=>H(fe.id,{options:Fe.target.value.split(`
`).map($e=>ie($e)).filter($e=>$e.trim())}),placeholder:`Option 1
Option 2
Option 3`,className:"w-full p-2 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none text-sm",rows:3})]})]})]},fe.id)})})]})]}),f.jsxs("div",{className:"p-6 border-t border-light-border dark:border-dark-border flex justify-between flex-shrink-0",children:[f.jsx("div",{children:b>1&&f.jsx("button",{onClick:()=>x(fe=>fe-1),className:"px-4 py-2 text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:"Previous"})}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:"Cancel"}),b<3?f.jsx("button",{onClick:()=>x(fe=>fe+1),disabled:b===1&&l.length===0,className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"}):f.jsxs("button",{onClick:ge,disabled:w,className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[w&&f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-text-on-accent"}),w?"Saving...":h?"Update":"Create"]})]})]})]})})]})},vY=()=>f.jsx(yY,{}),AD=[{name:"Settings",icon:Bc,color:"text-blue-600"},{name:"Box",icon:_r,color:"text-green-600"},{name:"Edit",icon:hi,color:"text-purple-600"},{name:"Mail",icon:Gv,color:"text-red-600"},{name:"File",icon:Cd,color:"text-yellow-600"},{name:"Mic",icon:$v,color:"text-pink-600"},{name:"Activity",icon:Ed,color:"text-indigo-600"},{name:"Users",icon:Fs,color:"text-orange-600"}],wY=()=>{const r=Tp(),e=Ir(),{allCategories:t,createCategory:n,updateCategory:i,deleteCategory:a,loading:s}=kp(),[l,u]=Q.useState(!1),[d,h]=Q.useState(null),[g,b]=Q.useState({name:"",active:!0,iconName:"Settings",iconColor:"text-blue-600"}),[x,k]=Q.useState(null),[v,w]=Q.useState(null),[D,_]=Q.useState(""),[A,N]=Q.useState("displayOrder"),[E,C]=Q.useState("asc"),j=()=>{h(null),b({name:"",active:!0,icon:"Settings",color:"text-blue-600"}),w(null),u(!0)},M=Y=>{h(Y),b({name:Y.name,active:Y.active,iconName:Y.iconName||"Settings",iconColor:Y.iconColor||"text-blue-600"}),w(null),u(!0)},O=async()=>{if(!g.name.trim()){w("Category name is required");return}w(null);try{d?await i(d.id,{name:g.name,active:g.active,iconName:g.iconName,iconColor:g.iconColor}):await n({name:g.name,displayOrder:t.length+1,active:g.active,iconName:g.iconName,iconColor:g.iconColor}),u(!1),e.success(`Category "${g.name}" ${d?"updated":"created"} successfully`,d?"Category Updated":"Category Created")}catch(Y){console.error("Failed to save category:",Y),Y&&typeof Y=="object"&&"message"in Y?w(Y.message):w("Failed to save category. Please try again.")}},F=async Y=>{const H=t.find(ie=>ie.id===Y);if(!(!H||!await r.confirmDelete(H.name,"category")))try{await a(Y),e.success(`Category "${H.name}" deleted successfully`,"Category Deleted")}catch(ie){console.error("Failed to delete category:",ie),e.error("Failed to delete category. Please try again.")}},G=(Y,H)=>{k(H),Y.dataTransfer.effectAllowed="move"},R=Y=>{Y.preventDefault(),Y.dataTransfer.dropEffect="move"},W=async(Y,H)=>{if(Y.preventDefault(),!x||x===H){k(null);return}const J=[...t].sort((ge,ve)=>ge.displayOrder-ve.displayOrder),ie=J.findIndex(ge=>ge.id===x),z=J.findIndex(ge=>ge.id===H);if(ie===-1||z===-1){k(null);return}try{const ge=[...J],[ve]=ge.splice(ie,1);ge.splice(z,0,ve);const je=ge.map((Ie,Pe)=>i(Ie.id,{displayOrder:Pe+1}));await Promise.all(je),e.success("Categories reordered successfully")}catch(ge){console.error("Failed to reorder categories:",ge),e.error("Failed to reorder categories. Please try again.")}finally{k(null)}},U=async(Y,H)=>{const J=[...t].sort((je,Ie)=>je.displayOrder-Ie.displayOrder),ie=J.findIndex(je=>je.id===Y);if(H==="up"&&ie===0||H==="down"&&ie===J.length-1)return;const z=H==="up"?ie-1:ie+1,ge=J[ie],ve=J[z];try{await i(ge.id,{displayOrder:ve.displayOrder}),await i(ve.id,{displayOrder:ge.displayOrder}),e.success("Category moved successfully")}catch(je){console.error("Failed to reorder categories:",je),e.error("Failed to reorder categories. Please try again.")}},X=Y=>AD.find(J=>J.name===Y)||AD[0],P=Y=>{A===Y?C(E==="asc"?"desc":"asc"):(N(Y),C("asc"))},B=({field:Y})=>f.jsx("svg",{className:`w-3 h-3 inline ml-1 transition-colors ${A===Y?"text-red-500":"text-light-text-tertiary dark:text-dark-text-tertiary"}`,fill:"currentColor",viewBox:"0 0 16 16",style:{transform:A===Y&&E==="desc"?"rotate(180deg)":"none"},children:f.jsx("path",{d:"M8 3l4 5H4z"})}),ee=t.filter(Y=>{if(!D.trim())return!0;const H=D.toLowerCase();return Y.name.toLowerCase().includes(H)}).sort((Y,H)=>{let J=0;return A==="name"?J=Y.name.localeCompare(H.name):A==="displayOrder"?J=Y.displayOrder-H.displayOrder:A==="active"&&(J=Y.active===H.active?0:Y.active?-1:1),E==="asc"?J:-J});return s?f.jsx("div",{className:"p-6 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-accent mx-auto mb-4"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading categories..."})]})}):f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:"Categories"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Manage tool categories and their display order"})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"relative",children:[f.jsx(Sa,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-light-text-tertiary dark:text-dark-text-tertiary"}),f.jsx("input",{type:"text",value:D,onChange:Y=>_(Y.target.value),placeholder:"Search categories...",className:"pl-10 pr-4 py-2 w-64 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary placeholder-light-text-tertiary dark:placeholder-dark-text-tertiary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none"})]}),f.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",children:[f.jsx(Ka,{className:"w-4 h-4"}),"Add Category"]})]})]}),f.jsx("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-light-bg-sidebar dark:bg-dark-bg-sidebar",children:f.jsxs("tr",{children:[f.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>P("displayOrder"),children:["Order",f.jsx(B,{field:"displayOrder"})]}),f.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>P("name"),children:["Name",f.jsx(B,{field:"name"})]}),f.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>P("active"),children:["Status",f.jsx(B,{field:"active"})]}),f.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Actions"})]})}),f.jsx("tbody",{children:ee.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:4,className:"p-8 text-center text-light-text-tertiary dark:text-dark-text-tertiary",children:D.trim()?f.jsxs(f.Fragment,{children:["No categories found matching ",f.jsxs("span",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:['"',D,'"']})]}):'No categories created yet. Click "Add Category" to create your first category.'})}):ee.map(Y=>f.jsxs("tr",{className:`border-t border-light-border dark:border-dark-border transition-colors ${x===Y.id?"opacity-50":"hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page"}`,draggable:!0,onDragStart:H=>G(H,Y.id),onDragOver:R,onDrop:H=>W(H,Y.id),children:[f.jsx("td",{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-light-text-primary dark:text-dark-text-primary font-medium",children:Y.displayOrder}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("button",{onClick:()=>U(Y.id,"up"),className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary hover:text-primary-accent p-1 rounded hover:bg-light-bg-page dark:hover:bg-dark-bg-component",disabled:Y.displayOrder===1,children:""}),f.jsx("button",{onClick:()=>U(Y.id,"down"),className:"text-xs text-light-text-tertiary dark:text-dark-text-tertiary hover:text-primary-accent p-1 rounded hover:bg-light-bg-page dark:hover:bg-dark-bg-component",disabled:Y.displayOrder===t.length,children:""})]}),f.jsx("div",{className:"ml-2 text-xs text-light-text-tertiary dark:text-dark-text-tertiary",children:"Drag to reorder"})]})}),f.jsx("td",{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[Tn.createElement(X(Y.iconName||"Settings").icon,{className:`w-5 h-5 ${Y.iconColor||"text-blue-600"}`}),f.jsx("span",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:Y.name})]})}),f.jsx("td",{className:"p-4",children:f.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Y.active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:Y.active?"Active":"Inactive"})}),f.jsx("td",{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>M(Y),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-primary-accent hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md",title:"Edit category",children:f.jsx(hi,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>F(Y.id),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-red-500 hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md",title:"Delete category",children:f.jsx(Qa,{className:"w-4 h-4"})})]})})]},Y.id))})]})})}),l&&f.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-md",children:[f.jsx("div",{className:"p-6 border-b border-light-border dark:border-dark-border",children:f.jsx("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:d?"Edit Category":"Create Category"})}),f.jsxs("div",{className:"p-6 space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Name"}),f.jsx("input",{type:"text",value:g.name,onChange:Y=>b(H=>({...H,name:Y.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Category name"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Icon & Color"}),f.jsx("div",{className:"grid grid-cols-4 gap-2",children:AD.map(Y=>f.jsxs("button",{type:"button",onClick:()=>b(H=>({...H,iconName:Y.name,iconColor:Y.color})),className:`p-3 border rounded-md flex flex-col items-center gap-1 transition-colors ${g.iconName===Y.name?"border-primary-accent bg-primary-accent/10":"border-light-border dark:border-dark-border hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page"}`,children:[Tn.createElement(Y.icon,{className:`w-5 h-5 ${Y.color}`}),f.jsx("span",{className:"text-xs text-light-text-secondary dark:text-dark-text-secondary",children:Y.name})]},Y.name))})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",id:"active",checked:g.active,onChange:Y=>b(H=>({...H,active:Y.target.checked})),className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),f.jsx("label",{htmlFor:"active",className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:"Active"})]}),v&&f.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:f.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:v})})]}),f.jsxs("div",{className:"p-6 border-t border-light-border dark:border-dark-border flex justify-end gap-3",children:[f.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:"Cancel"}),f.jsx("button",{onClick:O,className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",children:d?"Update":"Create"})]})]})})]})},kY=()=>f.jsx(wY,{}),DY=()=>{const r=Tp(),e=Ir(),[t,n]=Q.useState([]),[i,a]=Q.useState(!0),[s,l]=Q.useState(null),[u,d]=Q.useState(null),[h,g]=Q.useState(""),[b,x]=Q.useState("createdAt"),[k,v]=Q.useState("desc"),[w,D]=Q.useState(!1),[_,A]=Q.useState(null),[N,E]=Q.useState({fullName:"",email:"",role:"user",active:!0}),C=Kn.getInstance();Q.useEffect(()=>{j()},[]);const j=async()=>{a(!0),l(null);try{const B=await C.getUsers();B.success&&B.data?n(B.data):l(B.error||"Failed to fetch users")}catch{l("Network error occurred")}finally{a(!1)}},M=B=>{b===B?v(k==="asc"?"desc":"asc"):(x(B),v("asc"))},O=({field:B})=>f.jsx("svg",{className:`w-3 h-3 inline ml-1 transition-colors ${b===B?"text-red-500":"text-light-text-tertiary dark:text-dark-text-tertiary"}`,fill:"currentColor",viewBox:"0 0 16 16",style:{transform:b===B&&k==="desc"?"rotate(180deg)":"none"},children:f.jsx("path",{d:"M8 3l4 5H4z"})}),F=t.filter(B=>{if(!h.trim())return!0;const ee=h.toLowerCase();return B.fullName.toLowerCase().includes(ee)||B.email.toLowerCase().includes(ee)||B.role.toLowerCase().includes(ee)}).sort((B,ee)=>{let Y=0;return b==="fullName"?Y=B.fullName.localeCompare(ee.fullName):b==="email"?Y=B.email.localeCompare(ee.email):b==="role"?Y=B.role.localeCompare(ee.role):b==="active"?Y=B.active===ee.active?0:B.active?-1:1:b==="createdAt"&&(Y=new Date(B.createdAt).getTime()-new Date(ee.createdAt).getTime()),k==="asc"?Y:-Y}),G=()=>{A(null),E({fullName:"",email:"",role:"user",active:!0}),D(!0)},R=B=>{A(B),E({fullName:B.fullName,email:B.email,role:B.role,active:B.active}),D(!0)},W=async()=>{if(!N.fullName.trim()||!N.email.trim()){e.error("Please fill in all required fields");return}try{if(_){const B=await C.updateUserRole(_.id,N.role);if(B.success)n(ee=>ee.map(Y=>Y.id===_.id?{...Y,...N}:Y)),e.success("User updated successfully");else throw new Error(B.error||"Failed to update user")}else{const B=await C.inviteUser(N.email,N.fullName,N.role);if(B.success)await j(),e.success("User invitation sent successfully","Invitation Sent");else throw new Error(B.error||"Failed to invite user")}D(!1)}catch(B){console.error("Failed to save user:",B),e.error("Failed to save user. Please try again.")}},U=async B=>{const ee=t.find(H=>H.id===B);if(!(!ee||!await r.confirmDelete(ee.fullName,"user"))){d(B);try{const H=await C.deleteUser(B,"User deleted by admin");if(H.success){n(ie=>ie.filter(z=>z.id!==B));const J=H.data;J!=null&&J.hasWarnings?e.warning(`User deleted with warnings: ${J.message}. Some data cleanup may have failed.`,"Deletion Completed with Warnings"):e.success("User and all associated data permanently deleted successfully.","User Deleted")}else throw new Error(H.error||"Failed to delete user")}catch(H){console.error("Failed to delete user:",H),e.error("Failed to delete user. Please try again.")}finally{d(null)}}},X=async B=>{const ee=t.find(J=>J.id===B);if(!ee)return;const Y=ee.active?"inactive":"active";if(await r.confirmStatusChange(ee.fullName,ee.active?"active":"inactive",Y)){d(B);try{const J=await C.updateUserStatus(B,!ee.active,"Status updated by admin");if(J.success)n(ie=>ie.map(z=>z.id===B?{...z,active:!z.active,status:z.active?"inactive":"active"}:z)),e.success(`User ${ee.active?"disabled":"enabled"} successfully`);else throw new Error(J.error||"Failed to update user status")}catch(J){console.error("Failed to toggle user status:",J),e.error(`Failed to ${ee.active?"disable":"enable"} user. Please try again.`)}finally{d(null)}}},P=async(B,ee)=>{const Y=t.find(J=>J.id===B);if(!(!Y||Y.role===ee||!await r.confirmRoleChange(Y.fullName,Y.role,ee))){d(B);try{const J=await C.updateUserRole(B,ee,`Role changed to ${ee} by admin`);if(J.success)n(ie=>ie.map(z=>z.id===B?{...z,role:ee}:z)),e.success(`User role updated to ${ee} successfully`);else throw new Error(J.error||"Failed to update user role")}catch(J){console.error("Failed to update user role:",J),e.error(`Failed to update user role to ${ee}. Please try again.`)}finally{d(null)}}};return i?f.jsx("div",{className:"p-6 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-accent mx-auto mb-4"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading users..."})]})}):f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:"Users"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Manage user accounts and permissions"})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"relative",children:[f.jsx(Sa,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-light-text-tertiary dark:text-dark-text-tertiary"}),f.jsx("input",{type:"text",value:h,onChange:B=>g(B.target.value),placeholder:"Search users...",className:"pl-10 pr-4 py-2 w-64 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary placeholder-light-text-tertiary dark:placeholder-dark-text-tertiary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none"})]}),f.jsxs("button",{onClick:G,className:"flex items-center gap-2 px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",children:[f.jsx(l9,{className:"w-4 h-4"}),"Invite User"]})]})]}),s&&f.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:f.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200",children:["Error: ",s]})}),f.jsx("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-light-bg-sidebar dark:bg-dark-bg-sidebar",children:f.jsxs("tr",{children:[f.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>M("fullName"),children:["User",f.jsx(O,{field:"fullName"})]}),f.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>M("role"),children:["Role",f.jsx(O,{field:"role"})]}),f.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>M("active"),children:["Status",f.jsx(O,{field:"active"})]}),f.jsxs("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary cursor-pointer hover:bg-light-bg-page dark:hover:bg-dark-bg-component",onClick:()=>M("createdAt"),children:["Created",f.jsx(O,{field:"createdAt"})]}),f.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Actions"})]})}),f.jsx("tbody",{children:F.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:5,className:"p-8 text-center text-light-text-tertiary dark:text-dark-text-tertiary",children:h.trim()?f.jsxs(f.Fragment,{children:["No users found matching ",f.jsxs("span",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:['"',h,'"']})]}):"No users found. Users will appear here when they register."})}):F.map(B=>f.jsxs("tr",{className:"border-t border-light-border dark:border-dark-border",children:[f.jsx("td",{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-accent text-text-on-accent flex items-center justify-center font-semibold text-sm",children:B.fullName.split(" ").map(ee=>ee[0]).join("").toUpperCase()}),f.jsxs("div",{children:[f.jsx("div",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:B.fullName||"Unknown User"}),f.jsx("div",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary",children:B.email})]})]})}),f.jsx("td",{className:"p-4",children:f.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium capitalize ${B.role==="admin"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300":B.role==="pro"?"bg-accent-light-blue text-accent-dark-blue dark:bg-accent-dark-blue/30 dark:text-accent-light-blue":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:B.role})}),f.jsx("td",{className:"p-4",children:f.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${B.active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:B.active?"Active":"Inactive"})}),f.jsx("td",{className:"p-4",children:f.jsx("span",{className:"text-light-text-secondary dark:text-dark-text-secondary text-sm",children:new Date(B.createdAt).toLocaleDateString()})}),f.jsx("td",{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>X(B.id),disabled:u===B.id,className:"px-2 py-1 text-xs rounded-md bg-light-bg-sidebar dark:bg-dark-bg-page text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary disabled:opacity-50 disabled:cursor-not-allowed",children:u===B.id?"Loading...":B.active?"Disable":"Enable"}),f.jsx("div",{className:"relative",children:f.jsxs("select",{value:B.role,onChange:ee=>P(B.id,ee.target.value),disabled:u===B.id,className:"pl-2 pr-6 py-1 text-xs rounded-md bg-light-bg-sidebar dark:bg-dark-bg-page text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary disabled:opacity-50 disabled:cursor-not-allowed appearance-none",children:[f.jsx("option",{value:"user",children:"User"}),f.jsx("option",{value:"pro",children:"Pro"}),f.jsx("option",{value:"admin",children:"Admin"})]})}),f.jsx("button",{onClick:()=>R(B),disabled:u===B.id,className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-primary-accent hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md",children:f.jsx(hi,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>U(B.id),disabled:u===B.id,className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-red-500 hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md",children:f.jsx(Qa,{className:"w-4 h-4"})})]})})]},B.id))})]})})}),w&&f.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-md",children:[f.jsx("div",{className:"p-6 border-b border-light-border dark:border-dark-border",children:f.jsx("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:_?"Edit User":"Invite User"})}),f.jsxs("div",{className:"p-6 space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Full Name"}),f.jsx("input",{type:"text",value:N.fullName,onChange:B=>E(ee=>({...ee,fullName:B.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Full name"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Email"}),f.jsx("input",{type:"email",value:N.email,onChange:B=>E(ee=>({...ee,email:B.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"user@example.com"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Role"}),f.jsxs("select",{value:N.role,onChange:B=>E(ee=>({...ee,role:B.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",children:[f.jsx("option",{value:"user",children:"User"}),f.jsx("option",{value:"pro",children:"Pro"}),f.jsx("option",{value:"admin",children:"Admin"})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",id:"active",checked:N.active,onChange:B=>E(ee=>({...ee,active:B.target.checked})),className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),f.jsx("label",{htmlFor:"active",className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:"Active"})]})]}),f.jsxs("div",{className:"p-6 border-t border-light-border dark:border-dark-border flex justify-end gap-3",children:[f.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary",children:"Cancel"}),f.jsx("button",{onClick:W,className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",children:_?"Update":"Invite"})]})]})})]})},_Y=()=>f.jsx(DY,{}),AY=()=>{const r=ax(),e=Ir(),[t,n]=Q.useState([]),[i,a]=Q.useState(!0),[s,l]=Q.useState(null),[u,d]=Q.useState(!1),[h,g]=Q.useState(null),[b,x]=Q.useState(!1),[k,v]=Q.useState({title:"",content:"",active:!0,showOnLogin:!1}),w=Kn.getInstance();Q.useEffect(()=>{D()},[]);const D=async()=>{a(!0),l(null);try{console.log("AdminAnnouncements: Fetching announcements from API");const M=await w.getAnnouncements();M.success&&M.data?(console.log("AdminAnnouncements: Announcements fetched successfully:",M.data.length),n(M.data)):(console.error("AdminAnnouncements: Failed to fetch announcements:",M.error),l(M.error||"Failed to fetch announcements"))}catch(M){console.error("AdminAnnouncements: Network error:",M),l("Network error occurred"),console.error("Failed to fetch announcements:",M)}finally{a(!1)}},_=()=>{g(null),v({title:"",content:"",active:!0,showOnLogin:!1}),d(!0)},A=M=>{g(M),v({title:M.title,content:M.content,active:M.active,showOnLogin:M.showOnLogin}),d(!0)},N=async()=>{if(!k.title.trim()||!k.content.trim()){e.error("Please fill in all required fields");return}x(!0);try{if(h){console.log("AdminAnnouncements: Updating announcement:",h.id);const M=await w.updateAnnouncement(h.id,k);if(M.success&&M.data)n(O=>O.map(F=>F.id===h.id?M.data:F)),console.log("AdminAnnouncements: Announcement updated successfully");else throw new Error(M.error||"Failed to update announcement")}else{console.log("AdminAnnouncements: Creating new announcement");const M=await w.createAnnouncement(k);if(M.success&&M.data)n(O=>[M.data,...O]),console.log("AdminAnnouncements: Announcement created successfully");else throw new Error(M.error||"Failed to create announcement")}d(!1),e.success(`Announcement "${k.title}" ${h?"updated":"created"} successfully`,h?"Announcement Updated":"Announcement Created")}catch(M){console.error("Failed to save announcement:",M),e.error("Failed to save announcement. Please try again.")}finally{x(!1)}},E=async M=>{if(await r.confirm({title:"Delete Announcement",message:"Are you sure you want to delete this announcement?",confirmText:"Delete",cancelText:"Cancel",variant:"danger"}))try{console.log("AdminAnnouncements: Deleting announcement:",M);const F=await w.deleteAnnouncement(M);if(F.success)n(G=>G.filter(R=>R.id!==M)),console.log("AdminAnnouncements: Announcement deleted successfully"),e.success("Announcement deleted successfully","Announcement Deleted");else throw new Error(F.error||"Failed to delete announcement")}catch(F){console.error("Failed to delete announcement:",F),e.error("Failed to delete announcement. Please try again.")}},C=async M=>{const O=t.find(F=>F.id===M);if(O)try{const F=await w.updateAnnouncement(M,{active:!O.active});if(F.success&&F.data)n(G=>G.map(R=>R.id===M?F.data:R)),e.success(`Announcement ${O.active?"deactivated":"activated"} successfully`);else throw new Error(F.error||"Failed to update announcement")}catch(F){console.error("Failed to toggle announcement status:",F),e.error("Failed to update announcement. Please try again.")}},j=async M=>{const O=t.find(F=>F.id===M);if(O)try{const F=await w.updateAnnouncement(M,{showOnLogin:!O.showOnLogin});if(F.success&&F.data)n(G=>G.map(R=>R.id===M?F.data:R)),e.success(`Login popup ${O.showOnLogin?"disabled":"enabled"} successfully`);else throw new Error(F.error||"Failed to update announcement")}catch(F){console.error("Failed to toggle login popup:",F),e.error("Failed to update announcement. Please try again.")}};return i?f.jsx("div",{className:"p-6 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-accent mx-auto mb-4"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Loading announcements..."})]})}):f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"font-serif text-3xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2",children:"Announcements"}),f.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Manage announcements and login popups for users"})]}),f.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity",children:[f.jsx(Ka,{className:"w-4 h-4"}),"Add Announcement"]})]}),s&&f.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[f.jsxs("p",{className:"text-sm text-red-800 dark:text-red-200",children:["Error: ",s]}),f.jsx("button",{onClick:D,className:"mt-2 text-sm text-red-600 dark:text-red-400 hover:underline",children:"Retry"})]}),f.jsx("div",{className:"bg-light-bg-component dark:bg-dark-bg-component border border-light-border dark:border-dark-border rounded-lg overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-light-bg-sidebar dark:bg-dark-bg-sidebar",children:f.jsxs("tr",{children:[f.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Announcement"}),f.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Status"}),f.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Login Popup"}),f.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Created"}),f.jsx("th",{className:"text-left p-4 font-medium text-light-text-primary dark:text-dark-text-primary",children:"Actions"})]})}),f.jsx("tbody",{children:t.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:5,className:"p-8 text-center text-light-text-tertiary dark:text-dark-text-tertiary",children:i?"Loading announcements...":'No announcements created yet. Click "Add Announcement" to create your first announcement.'})}):t.map(M=>f.jsxs("tr",{className:"border-t border-light-border dark:border-dark-border",children:[f.jsx("td",{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(vA,{className:"w-5 h-5 text-primary-accent"}),f.jsxs("div",{children:[f.jsx("div",{className:"font-medium text-light-text-primary dark:text-dark-text-primary",children:M.title}),f.jsx("p",{className:"text-sm text-light-text-tertiary dark:text-dark-text-tertiary line-clamp-2",children:M.content})]})]})}),f.jsx("td",{className:"p-4",children:f.jsx("button",{onClick:()=>C(M.id),className:`px-2 py-1 rounded-full text-xs font-medium cursor-pointer transition-colors ${M.active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/50":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-900/50"}`,children:M.active?"Active":"Inactive"})}),f.jsx("td",{className:"p-4",children:f.jsx("button",{onClick:()=>j(M.id),className:`px-2 py-1 rounded-full text-xs font-medium cursor-pointer transition-colors ${M.showOnLogin?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-900/50":"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-900/50"}`,children:M.showOnLogin?"Enabled":"Disabled"})}),f.jsx("td",{className:"p-4",children:f.jsx("span",{className:"text-light-text-secondary dark:text-dark-text-secondary text-sm",children:new Date(M.createdAt).toLocaleDateString()})}),f.jsx("td",{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>A(M),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-primary-accent hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md transition-colors",children:f.jsx(hi,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>E(M.id),className:"p-2 text-light-text-tertiary dark:text-dark-text-tertiary hover:text-red-500 hover:bg-light-bg-sidebar dark:hover:bg-dark-bg-page rounded-md transition-colors",children:f.jsx(Qa,{className:"w-4 h-4"})})]})})]},M.id))})]})})}),u&&f.jsx("div",{className:"fixed inset-0 bg-black/40 dark:bg-black/50 z-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-light-bg-component dark:bg-dark-bg-component rounded-lg shadow-lg w-full max-w-2xl",children:[f.jsx("div",{className:"p-6 border-b border-light-border dark:border-dark-border",children:f.jsx("h3",{className:"font-serif text-xl font-bold text-light-text-primary dark:text-dark-text-primary",children:h?"Edit Announcement":"Create Announcement"})}),f.jsxs("div",{className:"p-6 space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Title *"}),f.jsx("input",{type:"text",value:k.title,onChange:M=>v(O=>({...O,title:M.target.value})),className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none",placeholder:"Announcement title",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-light-text-primary dark:text-dark-text-primary mb-2",children:"Content *"}),f.jsx("textarea",{value:k.content,onChange:M=>v(O=>({...O,content:M.target.value})),rows:6,className:"w-full p-3 border border-light-border dark:border-dark-border rounded-md bg-light-bg-component dark:bg-dark-bg-component text-light-text-primary dark:text-dark-text-primary focus:ring-2 focus:ring-primary-accent focus:border-primary-accent outline-none resize-vertical",placeholder:"Announcement content (supports markdown)",required:!0})]}),f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",checked:k.active,onChange:M=>v(O=>({...O,active:M.target.checked})),className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),f.jsx("span",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:"Active"})]}),f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",checked:k.showOnLogin,onChange:M=>v(O=>({...O,showOnLogin:M.target.checked})),className:"h-4 w-4 text-primary-accent focus:ring-primary-accent border-gray-300 rounded"}),f.jsx("span",{className:"text-sm font-medium text-light-text-primary dark:text-dark-text-primary",children:"Show as login popup"})]})]})]}),f.jsxs("div",{className:"p-6 border-t border-light-border dark:border-dark-border flex justify-end gap-3",children:[f.jsx("button",{onClick:()=>d(!1),disabled:b,className:"px-4 py-2 text-light-text-secondary dark:text-dark-text-secondary hover:text-light-text-primary dark:hover:text-dark-text-primary disabled:opacity-50",children:"Cancel"}),f.jsxs("button",{onClick:N,disabled:b||!k.title.trim()||!k.content.trim(),className:"px-4 py-2 bg-primary-accent text-text-on-accent rounded-md hover:opacity-85 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[b&&f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-text-on-accent"}),b?"Saving...":h?"Update":"Create"]})]})]})})]})},SY=()=>f.jsx(AY,{}),DR=({children:r,requireAdmin:e=!1})=>{const{isAuthenticated:t,isAdmin:n}=ct();return t?e&&!n?f.jsx(ED,{to:"/",replace:!0}):f.jsx(f.Fragment,{children:r}):f.jsx(ED,{to:"/login",replace:!0})},EY=()=>{const{theme:r}=Ca();return Q.useEffect(()=>{const e=window.document.documentElement;r==="dark"?e.classList.add("dark"):e.classList.remove("dark")},[r]),f.jsx(JR,{children:f.jsx(A9,{children:f.jsxs(S9,{children:[f.jsx(E9,{}),f.jsxs(AL,{children:[f.jsx(qn,{path:"/set-password",element:f.jsx(dY,{})}),f.jsxs(qn,{path:"/",element:f.jsx(DR,{children:f.jsx(q9,{})}),children:[f.jsx(qn,{index:!0,element:f.jsx(Y9,{})}),f.jsx(qn,{path:"tools",element:f.jsx(Z9,{})}),f.jsx(qn,{path:"tools/:toolId",element:f.jsx(H$,{})}),f.jsx(qn,{path:"projects",element:f.jsx(tY,{})}),f.jsx(qn,{path:"projects/:id",element:f.jsx(Y$,{})}),f.jsx(qn,{path:"chat/:id",element:f.jsx(rY,{})}),f.jsx(qn,{path:"history",element:f.jsx(sY,{})}),f.jsx(qn,{path:"profiles",element:f.jsx(lY,{})}),f.jsx(qn,{path:"settings",element:f.jsx(uY,{})})]}),f.jsxs(qn,{path:"/admin",element:f.jsx(DR,{requireAdmin:!0,children:f.jsx(X9,{})}),children:[f.jsx(qn,{index:!0,element:f.jsx(mY,{})}),f.jsx(qn,{path:"tools",element:f.jsx(vY,{})}),f.jsx(qn,{path:"categories",element:f.jsx(kY,{})}),f.jsx(qn,{path:"users",element:f.jsx(_Y,{})}),f.jsx(qn,{path:"announcements",element:f.jsx(SY,{})})]}),f.jsx(qn,{path:"*",element:f.jsx(ED,{to:"/",replace:!0})})]})]})})})};window.addEventListener("error",r=>{var t,n;if((t=r.message)!=null&&t.includes("ResizeObserver loop completed with undelivered notifications"))return;const e={message:r.message||"An unhandled error occurred",code:"UNHANDLED_FRONTEND_ERROR",details:((n=r.error)==null?void 0:n.stack)||`${r.filename}:${r.lineno}:${r.colno}`,timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:"Global",severity:"critical",userId:window.BOLT_USER_ID,sessionId:window.BOLT_SESSION_ID,userAgent:navigator.userAgent};Ae.critical(e,{filename:r.filename,lineno:r.lineno,colno:r.colno}),r.preventDefault()});window.addEventListener("unhandledrejection",r=>{var t,n,i,a;if((n=(t=r.reason)==null?void 0:t.message)!=null&&n.includes("ResizeObserver loop completed with undelivered notifications"))return;const e={message:((i=r.reason)==null?void 0:i.message)||"An unhandled promise rejection occurred",code:"UNHANDLED_PROMISE_REJECTION",details:((a=r.reason)==null?void 0:a.stack)||JSON.stringify(r.reason),timestamp:new Date().toISOString(),correlationId:Ae.getCorrelationId(),component:"Global",severity:"critical",userId:window.BOLT_USER_ID,sessionId:window.BOLT_SESSION_ID,userAgent:navigator.userAgent};Ae.critical(e,{reason:r.reason}),r.preventDefault()});Ae.info("Application starting",{component:"Bootstrap",userAgent:navigator.userAgent,url:window.location.href,timestamp:new Date().toISOString()});console.log(" AUTH DIAGNOSTIC: Application bootstrap started",{timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,tabVisible:!document.hidden,pageVisibility:document.visibilityState});window.addEventListener("beforeunload",()=>{console.log(" AUTH DIAGNOSTIC: Page beforeunload event",{timestamp:new Date().toISOString(),currentAuthState:window.localStorage.getItem("artemo-auth-storage")})});window.addEventListener("pagehide",()=>{console.log(" AUTH DIAGNOSTIC: Page pagehide event",{timestamp:new Date().toISOString()})});window.addEventListener("pageshow",r=>{console.log(" AUTH DIAGNOSTIC: Page pageshow event",{timestamp:new Date().toISOString(),persisted:r.persisted})});const dI=document.getElementById("root");if(!dI){const r={message:"Critical application error: Root element not found",code:"MISSING_ROOT_ELEMENT",details:'Could not find root element with id="root" to mount React application',timestamp:new Date().toISOString(),component:"Bootstrap",severity:"critical"};throw Ae.critical(r),new Error("Could not find root element to mount to")}const TY=jM.createRoot(dI);TY.render(f.jsx(Tn.StrictMode,{children:f.jsx(YL,{children:f.jsx(f9,{children:f.jsx(o9,{children:f.jsx(EY,{})})})})}));
